(()=>{var k;window.rlmLcpFinalized=!1;let re="more...";var le,de,q=[],P=[],w=[],ce=[],ue=[],pe=[],me=[],he=[],ge=[],fe="";let ve=null;var x=!1,be=!1,we=!1,S=!1;let z="https://rlmcony.users.earthengine.app";var A="<a href='https://www.randymajors.org/access-ad-free-fullscreen-tools#compare' target='_blank' rel='noopener'>Monthly Contributors</a>",O=" <a href='https://www.randymajors.org/access-ad-free-fullscreen-tools#compare' target='_blank' rel='noopener'>Learn More</a> or <a href='https://www.randymajors.org/product/ad-free-fullscreen-tools-monthly-contribution' target='_blank' rel='noopener'>Join</a>.";let E="/wp-content/themes/generatepress_child/togeojson.min.js",a="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js",ye=" Follow instructions in mapBuilder below the map.";var Le,Ce,ke,I,N,xe,W,_,Se,M,D,Ee,T,Ie,h,_e,Me,Te,ze,qe,F,Ae,B,j,Oe,U,t="xl!Zxt".replace("xl!Zxt","ey=AIz"),Pe=!1,R=document.getElementById.bind(document),H=!1,Ne=!1,We=!1;let i={},o={},r={},l=0,s="Access Temporarily Restricted: Unusual usage patterns have triggered an automated protection system.<br>Access to the free version of this tool is subject to stricter thresholds to help ensure availability and performance for all users.<br>"+O;var Z,De,g,Fe,Be,je,V,Ue,K,Y,Re,He,Ze,d=!1,Ve=!1,Ke=!1,Ye=!1,Ge="#1e73be",f="6/1/1879",Je=!1,c={};let Xe=null,G={},n=Date.now(),$e,Qe,et=new BroadcastChannel("ssbamchan"),u=!1,y,tt,st,nt=6e4,at=!1,it=!1,ot,rt=!1,lt,p={AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming",US:"U.S."},dt=Object.keys(p).reduce((e,t)=>(e[p[t]]=t,e),{});var ct,ut,J,pt,X,$,L,C,mt={"/countygmap":"data-county-name","/zipcodegmap":"data-zip-code","/city-limits-on-google-maps":"data-county-name","/civil-townships-on-google-maps":"data-township-name","/township-range-on-google-maps":"data-township-or-section-name","/maps":"data-historical-county-name","/elevation-on-google-maps":"data-county-name","/timezonesongooglemaps":"data-county-name","/areacodesongooglemaps":"data-area-code-name"},ht=!1,gt={COU:{url:"/countygmap",primlay:"counties",cbvis_a:["citiesCheckbox","mcdsCheckbox","zipcodesCheckbox"]},CIT:{url:"/city-limits-on-google-maps",primlay:"cities",cbvis_a:["countiesCheckbox","mcdsCheckbox","zipcodesCheckbox"]},MCD:{url:"/civil-townships-on-google-maps",primlay:"mcds",cbvis_a:["countiesCheckbox","citiesCheckbox","zipcodesCheckbox"]},ZIP:{url:"/zipcodegmap",primlay:"zipcodes",cbvis_a:["countiesCheckbox","citiesCheckbox","mcdsCheckbox"]},PLS:{url:"/township-range-on-google-maps",primlay:"drawtownships",cbvis_a:["countiesCheckbox","citiesCheckbox","mcdsCheckbox","zipcodesCheckbox"]},ELE:{url:"/elevation-on-google-maps",primlay:"",cbvis_a:["countiesCheckbox","citiesCheckbox","mcdsCheckbox","zipcodesCheckbox"]},HIS:{url:"/maps",primlay:"histcounties",cbvis_a:["countiesCheckbox","citiesCheckbox","mcdsCheckbox","plssCheckbox"]},TIM:{url:"/timezonesongooglemaps",primlay:"timezones",cbvis_a:["countiesCheckbox","citiesCheckbox","mcdsCheckbox","zipcodesCheckbox"]},ARE:{url:"/areacodesongooglemaps",primlay:"areacodes",cbvis_a:["countiesCheckbox","citiesCheckbox","mcdsCheckbox","zipcodesCheckbox"]},CUS:{url:"/customgmap",primlay:"states",cbvis_a:["countiesCheckbox","citiesCheckbox","mcdsCheckbox","zipcodesCheckbox"]},CUA:{url:"/custom-color-coded-maps",primlay:"states",cbvis_a:["countiesCheckbox","citiesCheckbox","mcdsCheckbox","zipcodesCheckbox"]},CUP:{url:"/custom-point-maps",primlay:"states",cbvis_a:["countiesCheckbox","citiesCheckbox","mcdsCheckbox","zipcodesCheckbox"]}},Q=(ft(),{in:{init:!0,hscomp:!1,iploc:!1,ipc:"",ipx:0,ipy:0,lablay:"",cust:!1,prevdrawings:"",speed:0,ts:0,origd:"",pop:!1,thisaction:"",lastst:0},x:0,y:0,cx:0,cy:0,zoom:0,mapbuilder:!1,loc:!1,state:"",onestate:"",fips:"",basemap:"",hidelegend:"",legfs:"",labels:"",title:"",color:"",drawings:"",showoutside:"",hyear:"",sec:"",t:"",td:"",r:"",rd:"",pm:""}),ee={counties:{layname_s:"counties",vis_b:!1,cbid_s:"countiesCheckbox",qpvis_s:"counties",qpvis_v:"show",qpdat_s:"",qpdat_v:"",order:7,mz_i:5,labwt_i:1,labmz_i:7,labspan:"countylabel"},states:{layname_s:"states",vis_b:!0,cbid_s:"",qpvis_s:"",qpvis_v:"",qpdat_s:"",qpdat_v:"",order:8,mz_i:5,labwt_i:0,labmz_i:0,labspan:"statecountrylabel"},cities:{layname_s:"cities",vis_b:!1,cbid_s:"citiesCheckbox",qpvis_s:"cities",qpvis_v:"show",qpdat_s:"",qpdat_v:"",order:5,mz_i:5,labwt_i:0,labmz_i:0,labspan:"citylabel,placetypelabel,placearealabel"},mcds:{layname_s:"mcds",vis_b:!1,cbid_s:"mcdsCheckbox",qpvis_s:"townships",qpvis_v:"show",qpdat_s:"",qpdat_v:"",order:4,mz_i:7,labwt_i:1,labmz_i:9,labspan:"mcdlabel,placetypelabel,placearealabel"},zipcodes:{layname_s:"zipcodes",vis_b:!1,cbid_s:"zipcodesCheckbox",qpvis_s:"zipcodes",qpvis_v:"show",qpdat_s:"",qpdat_v:"",order:6,mz_i:7,labwt_i:1,labmz_i:9,labspan:"zipcodelabel"},histcounties:{layname_s:"histcounties",vis_b:!1,cbid_s:"",qpvis_s:"",qpvis_v:"",qpdat_s:"",qpdat_v:"",order:999,mz_i:5,labwt_i:1,labmz_i:7,labspan:"histcountylabel,detailslabelhc"},plss:{layname_s:"drawtownships",vis_b:!1,cbid_s:"plssCheckbox",qpvis_s:"plss",qpvis_v:"show",qpdat_s:"",qpdat_v:"",order:0,mz_i:7,labwt_i:1,labmz_i:9,labspan:"plsssdlabel,plssseclabel,plsstwnrangelabel,plsspmlabel,plssstatelabel"},timezones:{layname_s:"timezones",vis_b:!1,cbid_s:"",qpvis_s:"",qpvis_v:"",qpdat_s:"",qpdat_v:"",order:9,mz_i:2,labwt_i:0,labmz_i:0,labspan:"timezonelabel"},areacodes:{layname_s:"areacodes",vis_b:!1,cbid_s:"",qpvis_s:"",qpvis_v:"",qpdat_s:"",qpdat_v:"",order:10,mz_i:3,labwt_i:1,labmz_i:5,labspan:"areacodelabel"},custziplist:{layname_s:"drawunion",vis_b:!1,cbid_s:"",qpvis_s:"zips",qpvis_v:"",qpdat_s:"zips",qpdat_v:"",order:999,mz_i:3,labwt_i:10,labmz_i:9,labspan:"zipcodelabel"},custareas:{layname_s:"custareas",vis_b:!1,cbid_s:"",qpvis_s:"areatype",qpvis_v:"",qpdat_s:"sheetid",qpdat_v:"",order:999,mz_i:3,labwt_i:10,labmz_i:7,labspan:"customarealabel,detailslabel"},custpoints:{layname_s:"custpoints",vis_b:!1,cbid_s:"",qpvis_s:"markertype",qpvis_v:"",qpdat_s:"markers",qpdat_v:"",order:999,mz_i:3,labwt_i:5,labmz_i:7,labspan:"custompointlabel,detailslabelpt"},lifemap:{layname_s:"lmpoints",vis_b:!1,cbid_s:"",qpvis_s:"ancname",qpvis_v:"",qpdat_s:"lifemap",qpdat_v:"",order:999,mz_i:3,labwt_i:0,labmz_i:0,labspan:"custompointlabel"}};function ft(){L={in:{}},C={counties:{},states:{},cities:{},mcds:{},zipcodes:{},histcounties:{},plss:{},timezones:{},areacodes:{},custziplist:{},custareas:{},custpoints:{},lifemap:{}}}function e(){if(X=window.location.pathname,N=R("mapdiv"),xe=R("mapiframe"),W=R("mapiframe").contentWindow,T=R("moduletitle-addpoints-closed"),Ie=R("moduletitle-addpoints-open"),h=R("moduletitle-addtitle-closed"),_e=R("moduletitle-addtitle-open"),Me=R("moduletitle-createdrawing-closed"),Te=R("moduletitle-createdrawing-open"),ze=R("moduletitle-zipcountyareas-closed"),qe=R("moduletitle-zipcountyareas-open"),F=R("addZipsListInput"),B=R("resultsFromMapTextarea"),j=R("saveDrawingInput"),Oe=R("setDrawingColorInput"),U=R("mapLegend"),y=R("curLocBtn"),ot=R("printBtn"),"undefined"!=typeof myAjaxVars&&myAjaxVars.nonce&&(H=!0),window.matchMedia("(max-width: 768px)").matches&&(J=!0,H||(pt=document.querySelector(".rlmtopaddiv"))),Se=R("module-viewmymap-control"),M=R("module-viewmymap-control-small"),Se){if((D=new URLSearchParams(location.search)).has("testing")&&(Ne=!0,We=1===Array.from(D.keys()).length),"HIS"===($=Object.keys(gt).find(e=>gt[e].url===X))){var e=R("showChronoCheckbox").parentElement;e&&e.classList.remove("rlmhidden"),(e=R("layContHeader"))&&(e.textContent=e.textContent.replace("OTHER","PRESENT-DAY"));let a=18790601,i=18790602,o=18790531;function r(e){return 1629===e?"0401":1630<=e&&e<=1799?"0802":1800<=e&&e<=1809?"0804":1810<=e&&e<=1819?"0806":1820<=e&&e<=1889?"0601":1890<=e&&e<=1899?"0602":1900<=e&&e<=1909?"0601":1910<=e&&e<=1919?"0415":1920<=e&&e<=1929?"0101":1930<=e&&e<=2e3?"0401":null}function t(e){var e=parseInt(a.toString().substring(0,4),10)+e,t=r(e);t&&(l(t,e),s())}function l(e,t){var s=e.substring(0,2),n=e.substring(2),s=parseInt(s,10).toString(),n=parseInt(n,10).toString();f=s+"/"+n+"/"+t,V.value=f,a=parseInt(t.toString()+e,10)}function s(){f=V.value;var t=parseInt(f,10),s=(4!==f.length||isNaN(t)?8!==f.length||isNaN(f)||(f=f.substring(4,6)+"/"+f.substring(6,8)+"/"+f.substring(0,4),V.value=f):(s=r(t))&&l(s,t),_t(f));if(a=s[0],i=s[1],o=s[2],8!==a.toString().length)ne("Enter a 4-digit year OR a date in the form M/D/YYYY");else if(20001231<a)ne("The latest date for historical counties is 12/31/2000");else if(a<16290304)ne("The earliest date for historical counties is 3/4/1629");else{t=a,s=parseInt(t.toString().substring(0,4),10);let e=t.toString().substring(4,8)===r(s);H||e||Q.in.origd||(Je=!0,(n=r(t=parseInt(a.toString().substring(0,4),10)))&&l(n,t),ne("Free version uses the Census date for each historic year (just type any historic year); "+A+" can type any exact date."+O),e=!0,n=_t(f),a=n[0],i=n[1],o=n[2]),Je||ne("");var n,t={type:"hcDateChange",dateString:f,dateNum:a,beginDate:i,endDate:o,fvForDate:e};Q.in.origd?te():(Q.hyear=a.toString().substring(0,4),Q.state||(Q.state="US"),te(),yt("push")),W.postMessage(t,z),Je=!1}}(V=R("hcdatetextbox"))&&V.addEventListener("change",function(e){(!Q.in.origd&&ps(2.5,"hcdI")?kt:s)()}),(e=R("hcbackten"))&&e.addEventListener("click",gs(t,1500).bind(null,-10,"hcdatetextbox")),(e=R("hcfwdten"))&&e.addEventListener("click",gs(t,1500).bind(null,10,"hcdatetextbox"))}if("ZIP"===$||"ELE"===$||"ARE"===$)if("ZIP"===$){var a=R("colorizeBtn");a&&(a.classList.remove("rlmhidden"),a.addEventListener("click",function(e){ps(3,"colB")||(e.target.textContent.startsWith("Colorize")?(W.postMessage("doColorizeZips:",z),e.target.textContent="Remove Colors"):(W.postMessage("removeColorizeZips:",z),e.target.textContent="Colorize Zips"))}))}else if(R("findCont").classList.remove("rlmhidden"),"ELE"===$){R("findElevCont").classList.remove("rlmhidden");let n=R("findElevInput");n&&(n.addEventListener("change",function(e){if(ps(5,"finEI"))kt();else{if(!H){if(ws("se","check",5))return ne("Thanks for trying Find elevation! "+A+" get unlimited use."+O),R("sameElevCheckbox").checked=!1,R("findElevInput").value="",void W.postMessage("ex-dse:false",z);ws("se","increment",5)}R("sameElevCheckbox").checked=!0,ae("messagefloatlabel",""),ae("guidancelabel","");e=e.target.value.replace(/\D/g,"");W.postMessage("ex-dfe:"+e,z)}}),R("sameElevCheckbox").addEventListener("click",function(t){var s=t.target.checked;if(s&&ps(5,"seC"))t.target.checked=!1,kt();else if(s&&!H&&(ws("se","check",5)?(ne("Thanks for trying Show same elevations! "+A+" get unlimited use."+O),R("sameElevCheckbox").checked=!1,R("findElevInput").value=""):ws("se","increment",5)),s=t.target.checked,W.postMessage("ex-dse:"+s.toString(),z),s){let e=R("elevlabel").innerHTML;t=e.indexOf(" ")+1,s=e.indexOf(" ",t);e=parseInt(e.substring(t,s).trim(),10),n.value=e}else n.value=""}),R("elevUnitsBtn").addEventListener("click",function(e){ps(3,"euB")?kt():e.target.textContent.startsWith("Use m")?(W.postMessage("changeUnits:m",z),R("findElevUnitsLabel").innerText="m",e.target.textContent="Use ft/mi"):(W.postMessage("changeUnits:ft",z),R("findElevUnitsLabel").innerText="ft",e.target.textContent="Use m/km")}),R("elevProfBtn").addEventListener("click",function(e){if(!H){if(ws("elp","check",5))return void ne("Thanks for trying Elevation Profiles! "+A+" get unlimited use."+O);ws("elp","increment",5)}ae("errorfloatlabel",""),ae("eeerrorfloatlabel",""),Q.labels&&(R("labelsCheckbox").checked=!1,R("labelsCheckbox").dispatchEvent(new Event("change"))),R("layercontrolOuter").classList.add("rlmhidden"),ae("getstartedlabel","Draw path for elevation profile:  Click map along a path, double-clicking at last point"),W.postMessage("ex-dep:",z)})),R("selToolsBtn").classList.add("rlmhidden"),R("elevProfBtn").classList.remove("rlmhidden"),R("elevUnitsBtn").classList.remove("rlmhidden");a=R("sameElevCheckbox").parentElement;a&&a.classList.remove("rlmhidden")}else{R("findAcCont").classList.remove("rlmhidden");e=R("findAcInput");e&&e.addEventListener("change",function(e){ps(2.5,"faI")?kt():(e=e.target.value.replace(/\D/g,""),Q.labels&&ys(),W.postMessage("doFindAc:"+e,z))})}function n(){if(!H){if(ws("dw","check",15))return void ne("Thanks for trying Draw & Measure! "+A+" get unlimited use."+O);ws("dw","increment",15)}W.postMessage("fromstartdrawV2",z),setTimeout(function(){R("drawingleft").querySelector(".applynudge")?.classList.remove("rlmhiddenvis")},3e3),R("mainBtnsCont").classList.add("rlmhidden"),R("drawModeCont").classList.remove("rlmhidden"),R("hcdatecontrolOuter")?.classList.add("rlmhidden"),Vt()}function i(e){"Enter"===e.key&&(e.preventDefault(),ks())}if(bt(),wt(),R("shareSaveMapBtn")?.addEventListener("click",function(e){{let i=R("saveMapDiv");if(i){i.querySelector(".applynudge")?.classList.add("rlmhidden"),i.style.background="#fff",i.style.padding="20px",i.classList.add("rlmHighlight");let s=Se.classList.contains("rlmhidden"),n=(s&&Se.classList.remove("rlmhidden"),R("shareSaveIntro")),a=n.textContent;n&&(n.textContent="SHARE OR SAVE YOUR MAP");var t=document.createElement("div");t.className="rlmOverlay",t.id="rlmOverlay",document.body.appendChild(t),t.style.display="flex",R("closeSaveMapDivButton")?.classList.remove("rlmhidden"),["closeSaveMapDivButton","savemapbutton","rlmcopylinkbutton"].forEach(e=>{e=R(e);e&&e.addEventListener("click",function(e){let t=0;if("rlmcopylinkbutton"===e.target.id)t=2500;else if("closeSaveMapDivButton"!==e.target.id&&"savemapbutton"===e.target.id&&!H)return;setTimeout(function(){i.classList.remove("rlmHighlight"),i.style.background="",i.style.padding="",R("rlmOverlay")?.remove(),R("closeSaveMapDivButton")?.classList.add("rlmhidden"),s&&Se.classList.add("rlmhidden"),n&&(n.textContent=a)},t)},{once:!0})})}}}),R("selToolsBtn")?.addEventListener("click",function(e){ae("eeerrorfloatlabel",""),ae("errorfloatlabel",""),R("mainBtnsCont").classList.add("rlmhidden"),R("selModeCont").classList.remove("rlmhidden"),R("hcdatecontrolOuter")?.classList.add("rlmhidden"),Vt(),Xt("0080FFAB"),W.postMessage("fromstartselV2:",z)}),R("radiusInput")?.addEventListener("change",function(e){var t=(()=>{var e=R("radiusInput"),t=e.value;return isNaN(t)?e.value="":(t=parseFloat(t))<.1?e.value=0===t?"":.1:!H&&10<t?(e.value="",ne("Free version has maximum radius/buffer of 10 miles; "+A+" have a 500 mile maximum radius/buffer."+O)):H&&500<t?(e.value="",ne(A+" have a 500 mile maximum radius/buffer.")):ne(""),e.value})();t&&W.postMessage("frombufvalV2:"+t,z)}),R("exitSelModeBtn")?.addEventListener("click",function(e){R("selModeCont").classList.add("rlmhidden"),R("mainBtnsCont").classList.remove("rlmhidden"),R("hcdatecontrolOuter")?.classList.remove("rlmhidden"),Ye=!1,R("radiusInput").value="",W.postMessage("fromstopselV2:",z)}),["labelsCheckbox","countiesCheckbox","citiesCheckbox","mcdsCheckbox","zipcodesCheckbox","plssCheckbox","showChronoCheckbox"].forEach(function(o){let r=R(o);r&&r.addEventListener("change",function(e){if(r.checked&&ps(3.6,o.substring(0,2)+"C"))for(var t in r.checked=!1,ee){t=ee[t];if(t.cbid_s===o){if(t.vis_b=r.checked,!t.vis_b)for(var s of t.labspan.split(","))ae(s,"");break}}else{if("labelsCheckbox"===o)r.checked?te(!(Q.labels="show"),!0,!1):(Q.labels="",ys(),te(!1,!1,!1));else if("showChronoCheckbox"===o)(e=>{if(e){if(!H){if(ws("sc","check",3))return ne("Thanks for trying Show chronology! "+A+" get unlimited use."+O),R("showChronoCheckbox").checked=!1;ws("sc","increment",3)}Q.in.origd=f,ae("guidancelabel",""),ae("messagefloatlabel",""),B.value="COMPLETE COUNTY CHRONOLOGY FROM "+Q.in.origd+" BACK TO COUNTY FORMATION\n\n",B.style.height="50vh",W.postMessage("showchronoV2on",z),oe(B)||B.scrollIntoView({block:"end"})}else W.postMessage("showchronoV2off",z),Mt()})(r.checked);else{for(var n in ee){n=ee[n];if(n.cbid_s===o){if(n.vis_b=r.checked,!n.vis_b)for(var a of n.labspan.split(","))ae(a,"");break}}"plssCheckbox"===o&&(r.checked?ae("statecountrylabel",""):ae("placearealabel",""));let e=!1;"HIS"===$&&"mcdsCheckbox"===o&&(e=!0);var i=r.checked&&Q.x&&Q.y;te(i,e,!1),i&&setTimeout(function(){Jt()},750)}yt("push")}})}),y?.addEventListener("click",function(){if(at){it&&(navigator.geolocation.clearWatch(tt),it=!1,tt=void 0);var e=y.textContent;if(st&&(clearInterval(st),st=void 0),tt&&(navigator.geolocation.clearWatch(tt),it=!1,tt=void 0),"◉"===e)y.textContent=H?"◉ A":"◉ 1",H?os(it=!0):(nt=6e4,os(it=!1),st=setInterval(()=>os(!1),nt));else{if("◉ A"===e)nt=6e4,y.textContent="◉ 1";else if("◉ 1"===e)nt=3e5,y.textContent="◉ 5";else if("◉ 5"===e)nt=6e5,y.textContent="◉ 10";else if("◉ 10"===e)return void(y.textContent="◉",at=!1,y.style.color="#0080ff",Q.loc=!1);os(!1),st=setInterval(()=>os(!1),nt)}}else at=!0,os(!(y.textContent="◉"))}),ot?.addEventListener("click",function(){rt=!0,R("layercontrolOuter")?.classList.add("rlmhidden"),R("hcdatecontrolOuter")?.classList.add("rlmhidden"),R("urcontOuter")?.classList.add("rlmhidden"),ut?.classList.remove("rlmhidden"),ct?.classList.remove("rlmhidden"),g?.classList.add("rlmhidden"),Q.title&&R("midcontOuter")?.classList.add("sphidden"),ae("getstartedlabel",'TIP: press "Windows logo key+Shift+S" to take a screenshot to paste into a document '),ae("guidancelabel",""),ae("messagefloatlabel",""),W.postMessage("enterPrintFS:",z)}),document.referrer.includes(".randymajors.org")&&D.has("mapbuilder")&&(Pe=!0),Q.in.iploc&&fetch("/wp-json/rmrhrest/v1/getiplocation").then(e=>e.json()).then(e=>{"unknown"!==e.iplongitude?(k=e,Q.in.ipx=parseFloat(k.iplongitude),Q.in.ipy=parseFloat(k.iplatitude),Q.in.ipc=k.ipcountry):(Q.in.ipx=-96.428,Q.in.ipy=31.518,Q.in.ipc="US")}),0<D.toString().length&&(Q.drawing&&Pe&&(R("module-createdrawing-inner").classList.remove("rlmhidden"),Me.classList.add("rlmhidden"),Te.classList.remove("rlmhidden")),ee.custziplist.vis_b&&(Pe&&(R("module-zipcountyareas-inner").classList.remove("rlmhidden"),ze.classList.add("rlmhidden"),qe.classList.remove("rlmhidden")),R("instructions-addzipslist").classList.remove("rlmhidden"),R("showOutsideGroup").classList.remove("rlmhiddenvis"),Yt(".rlm-button-addzipsfromlist",".rlm-button-addzipsfromsheet",".rlm-button-addcountiesfromsheet"),F.value=ee.custziplist.qpvis_v.replace("%2C",",")),ee.custareas.vis_b&&(Pe&&(R("module-zipcountyareas-inner").classList.remove("rlmhidden"),ze.classList.add("rlmhidden"),qe.classList.remove("rlmhidden")),Wt(ee.custareas.qpdat_v,"areas",ee.custareas.qpvis_v,!1),"zips"===ee.custareas.qpvis_v?(R("instructions-addzipsfromsheet").classList.remove("rlmhidden"),Yt(".rlm-button-addzipsfromsheet",".rlm-button-addzipsfromlist",".rlm-button-addcountiesfromsheet"),R("addZipsAreasInput").value=ee.custareas.qpdat_v):"counties"===ee.custareas.qpvis_v&&(R("instructions-addcountiesfromsheet").classList.remove("rlmhidden"),Yt(".rlm-button-addcountiesfromsheet",".rlm-button-addzipsfromsheet",".rlm-button-addzipsfromlist"),R("addCountiesAreasInput").value=ee.custareas.qpdat_v)),ee.custpoints.vis_b&&(Pe&&(R("module-addpoints-inner").classList.remove("rlmhidden"),T.classList.add("rlmhidden"),Ie.classList.remove("rlmhidden")),"sheet"===ee.custpoints.qpvis_v?(Wt(ee.custpoints.qpdat_v,"points",null,!1),R("instructions-addpointsfromsheet").classList.remove("rlmhidden"),Yt(".rlm-button-addpointsfromsheet",".rlm-button-addpointsfromKML"),R("addPointsInput").value=ee.custpoints.qpdat_v):"kml"===ee.custpoints.qpvis_v&&(Bt(ee.custpoints.qpdat_v),R("instructions-addpointsfromKML").classList.remove("rlmhidden"),Yt(".rlm-button-addpointsfromKML",".rlm-button-addpointsfromsheet"),R("addPointsKMLInput").value=ee.custpoints.qpdat_v)),Q.title&&(Pe&&(R("module-addtitle-inner").classList.remove("rlmhidden"),h.classList.add("rlmhidden"),_e.classList.remove("rlmhidden")),R("addTitleInput").value=cs(Q.title).replace(/[^a-zA-Z0-9\- ]/g,"").substring(0,100),R("saveMapInput").value=R("addTitleInput").value),Q.color&&(Pe&&(R("module-addtitle-inner").classList.remove("rlmhidden"),h.classList.add("rlmhidden"),_e.classList.remove("rlmhidden")),R("setColorInput").value=ds(Q.color)),Q.loc&&(R("showLocCheckbox").checked=!0,R("useXYCheckbox").checked=!1),Q.x&&!Q.loc&&(R("useXYCheckbox").checked=!0,R("showLocCheckbox").checked=!1),Q.basemap&&(R("basemapType").value=Q.basemap.toLowerCase()),Q.showoutside&&(R("showOutsideCheckbox").checked=!0),Q.hidelegend&&(R("hideLegendCheckbox").checked=!0),Pe&&(R("module-addtitle-inner").classList.remove("rlmhidden"),h.classList.add("rlmhidden"),_e.classList.remove("rlmhidden")),Pe)&&(H||R("mapbuilderplug").classList.add("rlmhidden"),vt(),Se.classList.remove("rlmhidden")),Ee=new URLSearchParams(location.search),_=D.toString()?"https://"+location.host+X+"?"+us(D):"https://"+location.host+X,ct=R("printnowbutton"),(ut=R("doneprintingbutton"))?.addEventListener("click",function(e){Ut()},!1),ct?.addEventListener("click",function(e){window.print()},!1),(I=R("gpxFileInput"))&&(I.onchange=function(){var s;(s=I.files[0])&&(102400<s.size?ne("GPX file size must be less than 100KB",!1,"gpxFileInput"):(zt(),Dt("geojsonScript",E,function(){var e,t=s;t?((e=new FileReader).onload=function(e){var e=e.target.result,e=(new DOMParser).parseFromString(e,"application/xml"),e=toGeoJSON.gpx(e),s=[],n=[],a=!1;function i(e){if("LineString"===e.type){var t=e.coordinates.filter(function(e){return e&&2<=e.length&&null!=e[0]&&null!=e[1]}).map(function(e){return[e[0],e[1]]});if(0<t.length)return{type:e.type,coordinates:t}}else if("MultiLineString"===e.type){t=e.coordinates.map(function(e){return e.filter(function(e){return e&&2<=e.length&&null!=e[0]&&null!=e[1]}).map(function(e){return[e[0],e[1]]})}).filter(function(e){return 0<e.length});if(0<t.length)return{type:"MultiLineString",coordinates:t}}else if("Point"===e.type){t=e.coordinates;if(t&&2<=t.length&&null!=t[0]&&null!=t[1])return{type:e.type,coordinates:[t[0],t[1]]}}return null}function o(e,t){e&&(s.push([t.toString(),{type:e.type,coordinates:e.coordinates}]),n.push({type:"ValueRef",value:t.toString()}))}e.features.forEach(function(e){"LineString"!==e.geometry.type&&"MultiLineString"!==e.geometry.type||(a=!0)}),e.features.forEach(function(e,t){(a&&("LineString"===e.geometry.type||"MultiLineString"===e.geometry.type)||!a&&"Point"===e.geometry.type)&&o(i(e.geometry),t)}),0===(e=s.length)?ne("GPX file does not contain valid routes, waypoints or tracks",!1,"gpxFileInput"):(s.push([e.toString(),n]),e={type:"CompoundValue",scope:s,value:{type:"ValueRef",value:e.toString()}},e=JSON.stringify(e),N.scrollIntoView(),W.postMessage("fromgpxfile:"+e,z),H||x||ne(A+" can save GPX files as editable drawings for use in saved maps. <a href='https://www.randymajors.org/access-ad-free-fullscreen-tools#compare' target='_blank'>Learn More</a> or <a href='https://www.randymajors.org/product/ad-free-fullscreen-tools-monthly-contribution' target='_blank' rel='noopener'>Join</a>."))},e.readAsText(t)):ne("Please select a GPX file",!1,"gpxFileInput")})))}),window.addEventListener("beforeprint",function(){ht=!0,W.postMessage("fromBrowserPrintStart:",z);var e=window.getComputedStyle(N),t=parseFloat(e.width),e=parseFloat(e.height),s=R("site-navigation"),s=window.getComputedStyle(s);let n=parseFloat(s.height);var s=N.offsetWidth,a=s/(11/8.5),i=document.querySelectorAll(".rlmmaplabels");let o=(a-70-45-(e-70-45))/2,r=H?0:40,l=H?0:95.2;var d=s/t;i.forEach(function(e){var t=parseInt(e.style.top,10)-n-l;e.style.left=parseInt(e.style.left,10)*d-r+"px",e.style.top=t+o+"px"}),N.style.width=s+"px",N.style.height=a+"px"}),window.addEventListener("afterprint",function(){ht=!1,ys(),W.postMessage("fromBrowserPrintEnd:",z),N.style.width="",N.style.height="",rt&&Ut()}),R("drawMeasBtn")?.addEventListener("click",function(e){Ke=!0,Zt(),Ke=!1,n()}),R("startdrawingbutton")?.addEventListener("click",function(){N.scrollIntoView(),n()},!1),j?.addEventListener("input",function(){j.value=j.value.replace(/[^a-zA-Z0-9\- '.()]/g,"").substring(0,20)},!1),R("saveDrawingBtn")?.addEventListener("click",function(e){var t;H?(ne(""),zt(),void 0!==j.value&&""!==j.value||(j.value="newDrawing"),"newDrawing"===(ke=j.value)?(ne('Please give your drawing a name (other than "newDrawing")'),ne("Give your drawing a name",!1,"saveDrawingInput")):(t=Oe.value.replace("#",""),W.postMessage("fromsavedrawingV2:"+ke+"_"+t,z),Lt())):ne("Only "+A+" can save drawings to their accounts."+O)}),Oe?.addEventListener("input",function(e){e=e.target.value.replace("#","");W.postMessage("fromdrawcolV2:"+e,z),Xt(e+"AB")}),R("exitDrawModeBtn")?.addEventListener("click",function(e){Lt(),W.postMessage("fromstopdrawV2:",z)}),window.addEventListener("hashchange",function(){var e=location.hash;e&&fs(e)}),window.addEventListener("popstate",e=>{if(!location.hash){D=new URLSearchParams(window.location.search),ft(),L=Q,C=ee,bt(),wt();let t=["zoom","x","y","cx","cy","labels","counties","cities","townships","zipcodes","plss"],s=new Set(Object.keys(Q)),n=new Set(Object.keys(L));var i=new Set([...s,...n]);let a=!0;i.forEach(e=>{t.includes(e)||(s.has(e)!==n.has(e)||s.has(e)&&n.has(e)&&Q[e]!==L[e])&&(a=!1)}),a?te(!(Q.in.pop=!0),!1,!1):window.location.reload()}}),document.querySelector('meta[name="viewport"]')&&-1<navigator.userAgent.indexOf("iPhone")&&document.querySelector("[name=viewport]").setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1"),(g=R("findllinput"))&&(g.addEventListener("focus",function(){g.style.transition="width 0.33s ease-in",g.style.width="180px",g.placeholder="Enter latitude longitude",g.select()}),g.addEventListener("keydown",function(e){"Enter"===e.key&&(e.preventDefault(),e="ELE"===$?5:3,H||(e*=1.5),ps(e,"fllI")?kt():void 0!==(e=((e,t)=>{t=t||5,e=e.replace(/\s\s+/g," ").trim();var s,n=null,a=null,i=(Ve=!1,e.toLowerCase().replace(/(latitude|longitude|lat|long|lon|:)/gi,"").replace(/^,/,"").replace(/, /g,",").replace(/,,/g,",").replace(/\s\s+/g," ").trim());if(/[nsewº°'"]/i.test(i)){var o="",r="",l=[],d=!1;if(Es.test(e)?(l=Es.exec(e),(d=Ss(l))?(n=l[2],a=l[6],n.includes(",")&&n.replace(",","."),a.includes(",")&&a.replace(",","."),l[1]?(o=l[1],r=l[5]):l[4]&&(o=l[4],r=l[8])):ae("messagefloatlabel","invalid decimal coordinate format",2e3)):Is.test(e)?(l=Is.exec(e),(d=Ss(l))?(n=Math.abs(parseInt(l[2])),l[4]&&(n+=l[4]/60),l[6]&&(n+=l[6]/3600),parseInt(l[2])<0&&(n*=-1),a=Math.abs(parseInt(l[9])),l[11]&&(a+=l[11]/60),l[13]&&(a+=l[13]/3600),parseInt(l[9])<0&&(a*=-1),l[1]?(o=l[1],r=l[8]):l[7]&&(o=l[7],r=l[14])):ae("messagefloatlabel","invalid DMS coordinates format",2e3)):_s.test(e)?(l=_s.exec(e),(d=Ss(l))?(n=Math.abs(parseInt(l[2])),l[4]&&(n+=l[4]/60,l[3]||(l[3]=" ")),l[6]&&(n+=l[6]/3600,l[5]||(l[5]=" ")),parseInt(l[2])<0&&(n*=-1),a=Math.abs(parseInt(l[10])),l[12]&&(a+=l[12]/60,l[11]||(l[11]=" ")),l[14]&&(a+=l[14]/3600,l[13]||(l[13]=" ")),parseInt(l[10])<0&&(a*=-1),l[1]?(o=l[1],r=l[9]):l[8]&&(o=l[8],r=l[16])):ae("messagefloatlabel","invalid DMS coordinates format",2e3)):Ms.test(e)&&(l=Ms.exec(e),(d=Ss(l))?(n=Math.abs(parseInt(l[2])),l[4]&&(n+=l[4]/60,l[3]||(l[3]=" ")),l[6]&&(n+=l[6]/3600,l[5]||(l[5]=" ")),parseInt(l[2])<0&&(n*=-1),a=Math.abs(parseInt(l[10])),l[12]&&(a+=l[12]/60,l[11]||(l[11]=" ")),l[14]&&(a+=l[14]/3600,l[13]||(l[13]=" ")),parseInt(l[10])<0&&(a*=-1),l[1]?(o=l[1],r=l[9]):l[8]&&(o=l[8],r=l[16])):ae("messagefloatlabel","invalid coordinates format",2e3)),180<=Math.abs(a)&&ae("messagefloatlabel","invalid longitude value",2e3),d){var e=/S|SOUTH/i,c=(e.test(o)&&0<n&&(n*=-1),(e=/W|WEST/i).test(r)&&0<a&&(a*=-1),l[0].trim()),u=c.match(/[,/;\u0020]/g);if(null!==u){s=u.length%2==1?Math.floor(u.length/2):u.length/2-1;var p=0;if(0!==s)for(var m=0,h=0;m<=s;)p=c.indexOf(u[m],h),h=p+1,m++}return isNaN(n)&&n.includes(",")&&(n=n.replace(",",".")),n=Number(Number(n).toFixed(t)),isNaN(a)&&a.includes(",")&&(a=a.replace(",",".")),[a=Number(Number(a).toFixed(t)),n]}ae("messagefloatlabel","coordinates pattern not recognized",2e3)}else{var g,d=!1;if(i.includes(",")?(g=i.split(","),d=!0):i.includes(" ")&&(g=i.split(" "),d=!0),d)if(n=g[0].replace(/[^0-9.-]/g,""),a=g[1].replace(/[^0-9.-]/g,""),""===n)ae("messagefloatlabel","invalid lat long format",3e3);else if(90<n||n<-90)ae("messagefloatlabel","latitude must be a value between -90 and 90 and be the 1st value",3e3);else{if(!(180<a||a<-180))return Ve=!0,[a,n];ae("messagefloatlabel","longitude must be a value between -180 and 180 and be the 2nd value",3e3)}else ae("messagefloatlabel","decimal degrees coordinates must be separated by a space or comma",2500)}})(g.value))&&Fe!==e.toString()&&(Ve&&(g.value=e[1]+", "+e[0]),W.postMessage("fromfindll:"+e[0]+","+e[1],z),Fe=e.toString()))}),g.addEventListener("blur",function(){g.style.width="80px"})),window.addEventListener("message",n=>{var e,a,i,r,l,d,c,u,p,m,h,g,s,f;if(n.origin===z&&null!=n.data)if("object"==typeof n.data&&"type"in n.data){if("mapStateObj"===n.data.type){let t=n.data.data;["x","y","cx","cy","zoom","state","fips","onestate","basemap","sec","t","td","r","rd","pm"].forEach(e=>{Q[e]=t[e]}),Q.in.init||yt("push"),Q.in.init&&((G.wd||G.wdt)&&hs("iw"),(v=navigator.userAgent)&&"-"!==v||hs("eua")),"search"===t.in.thisaction&&G.lst!==t.in.lastst&&(v=G.lst?t.in.lastst-G.lst:0,G.lst=t.in.lastst,G.spc=(G.spc||0)+1,0<v)&&(v=Math.round(v/1e3),G.spcat=G.spcat?Math.round((G.spcat*(G.spc-1)+v)/G.spc):v),Q.in.init=t.in.init}}else{let o=n.data.toString(),t=o.substring(o.indexOf(":")+1);if('!_{"h":"mapiframe"}'!==o)if("EEonMessageReady"!==o||Q.in.hscomp){if(o.startsWith("vxid:"))t&&(async e=>"undefined"!=typeof myAjaxVars&&(200!==(e=await fetch("/wp-json/rmrhrest/v1/vxid?xid="+e,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:new Headers({"Content-Type":"application/json;charset=UTF-8","X-WP-Nonce":myAjaxVars.nonce})})).status?(H&&console.log("sfvxid: "+e.status),!0):((e=await e.json())?.valid||H&&console.log("vfvxid: "+e?.valid),e?.valid||!1)))(t).then(function(e){e||hs("vx")});else if("checkInfoBarVis"===o)Jt();else if(o.startsWith("passmaplabels:"))Q.labels?(n=(v=t.split("~")).shift(),c=(n=n.split("+"))[0],u=n[1],p=n[2],n=v,g=!1,D.has("mapbuilder")||void 0===mt[X]||(m=mt[X],g=!0),Ue=xe.getBoundingClientRect(),K=parseInt(Ue.top,10)+parseInt(window.scrollY,10)+70,Y=parseInt(Ue.left,10)+parseInt(window.scrollX,10),Re=xe.clientWidth,He=Re+Y,Ze=K+xe.clientHeight-70,h=[{name:"zoomCon",x:Y,y:K+65,width:44,height:66},{name:"satButtons",x:He-168,y:K,width:168,height:43},{name:"FSCon",x:He-39,y:K,width:39,height:85},{name:"googLog",x:Y,y:Ze-28,width:73,height:28},{name:"copyright",x:He-515,y:Ze-16,width:515,height:16}],D.has("title")&&!J&&h.push({name:"mapTitle",x:Y+200,y:K,width:Re-400,height:42}),n.forEach(function(e){var e=e.split("|"),t=e[0],s=e[1],e=e[2],n=document.createElement("span"),e=(n.textContent=e,n.classList.add("rlmmaplabels"),n.style.color="#"+c,n.style.fontSize=u+"px",g&&n.setAttribute(m,e),"U"===p?n.style.textTransform="uppercase":"B"===p?(n.style.fontWeight=600,n.style.letterSpacing="1px"):"R"===p?(n.style.textTransform="uppercase",n.style.fontWeight=400):"S"===p?(n.style.textTransform="uppercase",n.style.fontWeight=600,n.style.letterSpacing="1px"):"T"===p&&(n.style.textTransform="uppercase",n.style.fontWeight=600,n.style.letterSpacing="3px"),document.body.appendChild(n),parseInt(t,10)+Y-n.offsetWidth/2),s=parseInt(s,10)+K-n.offsetHeight/2,t=(!Ee.has("markers")||Ee.has("areatype")||Ee.has("zips")||(e=parseInt(t,10)+Y+10),n.style.top=s.toString()+"px",n.style.left=e.toString()+"px",n.getBoundingClientRect()),s=t.top+parseInt(window.scrollY,10),e=t.right+parseInt(window.scrollX,10),a=t.bottom+parseInt(window.scrollY,10),t=t.left+parseInt(window.scrollX,10),i=new DOMRect(t,s,e-t,a-s);if(s<K||He<e||Ze<a||t<Y)n.remove();else for(let e=0;e<h.length;e++){var o=h[e];if(Ls(i,new DOMRect(o.x,o.y,o.width,o.height))){n.remove();break}}}),Ye&&Cs("drawbuttons"),ae("messagefloatlabel",""),Z.textContent="",Z.classList.add("rlmhidden")):ys();else if(o.startsWith("clearmaplabels"))ys();else if(o.startsWith("unclabels"))R("labelsCheckbox").checked=!1,R("labelsCheckbox").dispatchEvent(new Event("change")),"llmsg"!==t||bs("llab","check",2)||(ne("Check the Show labels checkbox in the lower left corner of the map to turn labels back on; "+A+" get unlimited labels."+O),bs("llab","set",2));else if(o.startsWith("unchecksse"))(o.endsWith("-sl")||o.endsWith("-tl"))&&R("sameElevCheckbox").checked&&ne("Thanks for trying Show same elevations & Find elevation! "+A+" get unlimited use."+O),R("sameElevCheckbox").checked=!1,R("findElevInput").value="";else if(o.startsWith("goingfullscreen"))document.documentElement.style.scrollbarGutter="auto";else if(o.startsWith("passtooltip:"))Q.labels||(v=t.split("~"),Z.textContent=v[2],Z.classList.remove("rlmhidden"),Z.style.left=(parseInt(v[0])-Z.offsetWidth/2).toString()+"px",Z.style.top=(parseInt(v[1])+80).toString()+"px");else if(o.startsWith("passtooltipPre:"))Q.labels||-1===Z.textContent.indexOf(t)&&(Z.textContent=t+Z.textContent);else if(o.startsWith("hidetooltip"))Z.textContent="",Z.classList.add("rlmhidden");else if(o.startsWith("passmessage:"))ae("messagefloatlabel",t);else if(o.startsWith("setstyleprop:")){var n=t.split(",");if(3===n.length){var v=n[0];let e=n[1],t=n[2],s=document.querySelector(v);s&&e in s.style&&(lt=v+","+e,setTimeout(function(){s.style[e]=t},1250))}}else if("resetorigstyle"===o)lt&&(2===(n=lt.split(",")).length&&(v=n[0],n=n[1],v=document.querySelector(v))&&n in v.style&&(v.style[n]=""),lt=null);else if(o.startsWith("passcitylong:"))ae("citylabel",t);else if(o.startsWith("passplacearea:"))ae("placearealabel",t);else if(o.startsWith("passplacetype:"))ae("placetypelabel",t);else if(o.startsWith("passtownshiplong:"))ae("mcdlabel",t);else if(o.startsWith("passcountylong:"))ae("countylabel",t);else if(o.startsWith("passstatecountry:"))ae("statecountrylabel",t);else if(o.startsWith("passzipcode:"))ae("zipcodelabel",t);else if(o.startsWith("hidetopmarker"))Be?.classList.add("rlmhidden");else if(o.startsWith("passlatlon:"))ae("latlonlabel",t),Be?.classList.remove("rlmhidden"),J&&R("lldiv")?.classList.remove("rlmhidden");else if(o.startsWith("passlls:")){for(var v=t.split(","),b=v[0],w=v[1],n=v[2],y=[],L=n,C=0;C<P.length;C++){var k=Math.sqrt((b-P[C][0])*(b-P[C][0])+(w-P[C][1])*(w-P[C][1]));k<=L&&(y.push(P[C][4]),L=k)}if(0<y.length){for(var x=[],S=0;S<y.length;S++){var E=P[y[S]][3];x.push(E)}ae("custompointlabel",Rt(x.join(", "))),0<ue.length&&(n=y.map(function(s){return ge[s]?me.map(function(e,t){return e+": "+(ge[s][t]||"")}).join("<br>"):""}).filter(e=>e),ae("detailslabelpt",(de=0<n.length?n.join("<br><br>"):"")?re:""))}else ae("custompointlabel",""),ae("detailslabelpt","")}else if("removefirstguidancediv"===o){try{R("firstguidancediv")?.classList.add("rlmhidden"),R("rlmiframeoverlay")?.classList.add("rlmhidden")}catch(e){}setTimeout(function(){try{R("firstguidancediv")?.classList.add("rlmhidden"),R("rlmiframeoverlay")?.classList.add("rlmhidden")}catch(e){}},2e3)}else if(o.startsWith("passplsssd:"))ae("plsssdlabel",t);else if(o.startsWith("passplsssec:"))ae("plssseclabel",t);else if(o.startsWith("passplsstwnrange:"))ae("plsstwnrangelabel",t);else if(o.startsWith("passplsspm:"))ae("plsspmlabel",t);else if(o.startsWith("passplssstate:"))ae("plssstatelabel",t);else if(o.startsWith("passareacode:"))ae("areacodelabel",t);else if(o.startsWith("passerror:"))ne(t,!0),t.includes("search again")&&kt();else if(o.startsWith("passgetstarted:"))ae("getstartedlabel",t);else if(o.startsWith("passguidance:"))ae("guidancelabel",t);else if(o.startsWith("passprogress:"))ae("progressfloatlabel",t);else if(o.startsWith("passdrawinglayer:"))ae("drawinglayerlabel",t);else if(o.startsWith("passcustompoint:"))ae("custompointlabel",Rt(t));else if(o.startsWith("passcustomareaFV:"))(v=t)?(a=[],i=[],"zips"===ee.custareas.qpvis_v?(l=(r=v).slice(0,3),q.forEach(function(s){var e;s[0]!==r&&s[0]!==l||(a.push(s[1]+" ("+s[0]+")"),he[s[3]]&&(e=pe.map(function(e,t){return e+": "+he[s[3]][t]}).join("<br>"),i.push(e)))})):(d=v,q.forEach(function(s){var e;s[0]===d&&(a.push(s[1]+" ("+d+")"),he[s[3]])&&(e=pe.map(function(e,t){return e+": "+he[s[3]][t]}).join("<br>"),i.push(e))})),ae("customarealabel",Rt(a.join(", "))),ae("detailslabel",(le=i.join("<br><br>"))?re:"")):(ae("customarealabel",""),ae("detailslabel",""));else if(o.startsWith("passcustomziplistFV:"))ae("customarealabel",t);else if(o.startsWith("passelev:")){if(ae("elevlabel",t),R("sameElevCheckbox").checked){let e=t;var n=e.indexOf(" ")+1,I=e.indexOf(" ",n);e=parseInt(e.substring(n,I).trim(),10),R("findElevInput").value=e}}else if(o.startsWith("passtimezone:"))"n/a"===(n=t)?(ae("timezonelabel",""),ae("curtimelabel",""),ae("tzidlabel","n/a")):(n=n.split("~"),I=n[0],I=J?"aka "+I:"<small>IANA Time Zone Name:</small> "+I,n=n[1].split(" "),f=n.slice(0,3).join(" "),_=n.pop(),s=n.pop(),ae("timezonelabel",n.slice(3).join(" ")+" ("+s+") GMT"+_),ae("curtimelabel",f),ae("tzidlabel",I),e=f,Xe&&clearInterval(Xe),Xe=setInterval(function(){ae("curtimelabel",e=(e=>{var t,s,n,a,i,o;return(a=e.match(/(\w+) (\d+):(\d+):(\d+) (\w{2})/))?(e=a[1],t=parseInt(a[2]),s=parseInt(a[3]),n=parseInt(a[4]),a=a[5],60===(n+=1)&&(n=0,s+=1),60===s&&(s=0,t+=1),12===t&&0===s&&0===n&&(a="AM"===a?"PM":"AM"),(e=12===(t=12<t?1:t)&&0===s&&0===n&&"AM"===a&&-1!==(o=(i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]).indexOf(e))?i[(o+1)%7]:e)+" "+t+":"+String(s).padStart(2,"0")+":"+String(n).padStart(2,"0")+" "+a):e})(e))},1e3));else if(o.startsWith("passhistcounty:")){let e="";ae("histcountylabel",e=t?"As of "+V.value+": "+Tt(t):e)}else if(o.startsWith("passdetailshc:"))fe=""===t?(ae("detailslabelhc",""),""):(ae("detailslabelhc",re),Tt(t));else if(o.startsWith("passhcdatech:")){n=_t(t)[2];V.value=n,V.dispatchEvent(new Event("change"))}else if(o.startsWith("passhcdate:"))V.value=t,V.dispatchEvent(new Event("change"));else if(o.startsWith("hidetopconts"))["hcdatecontrolOuter","midcontOuter"].forEach(function(e){e=R(e);e&&e.classList.add("rlmhidden")}),Q.labels&&Cs("searchdd"),J&&(R("lldiv")?.classList.add("rlmhidden"),R("urcontOuter")?.classList.add("rlmhidden"));else if(o.startsWith("showtopconts"))["hcdatecontrolOuter","midcontOuter"].forEach(function(e){e=R(e);e&&e.classList.remove("rlmhidden")}),J&&(R("lldiv")?.classList.remove("rlmhidden"),R("urcontOuter")?.classList.remove("rlmhidden"));else if(o.startsWith("passzipcodes:"))R("instructions-addzipslist").classList.contains("rlmhidden")?(R("resultsfrommapdiv").classList.remove("rlmhidden"),t.startsWith("HCSC")?B.value+=Tt(t.slice(4)):t.includes("\n")?(s=/^[0-9]{3}$/.test(t.substring(1,4)),B.value=s?"ZIP Code\n"+t.split("\n").removeDuplicates().sort().join("\n"):"County\tState\n"+t.split("\n").removeDuplicates().sort().join("\n")):B.value=t.split(",").removeDuplicates().sort().join(","),oe(B)||B.scrollIntoView({block:"end"}),fs("#resultsFromMapTextarea")):F&&(t.startsWith("LIMITED")&&(t=t.slice(7),ne('More than 250 ZIP Codes. Use the "Color-code ZIP Codes from a spreadsheet" module to map larger numbers of ZIP Codes. First 250 Zip Codes shown below; click Apply to map only the first 250.',!1,"addZipsListInput")),F.value?(t=(t=F.value+","+t).split(",").removeDuplicates().sort().join(",").replace(/^,/,""),F.value=t):F.value=t.split(",").removeDuplicates().sort().join(",").replace(/^,/,""),Se.classList.remove("rlmhidden"),se("zips",t),t&&xs("addZipsListInput"),F.focus(),R("instructions-addzipslist").scrollIntoView({block:"center"}),fs("#addZipsListInput"));else if(o.startsWith("resetDrawNameAndEnsureDrawOpen"))j.value="newDrawing",Oe.value="#6244bb",R("mainBtnsCont").classList.add("rlmhidden"),R("drawModeCont").classList.remove("rlmhidden"),Vt();else if(o.startsWith("clearallmeas"))Ct();else if(o.startsWith("setsegmeas:"))ae("seglabel",t);else if(o.startsWith("setlinemeas:"))ae("linelabel",t);else if(o.startsWith("setareameas:"))ae("arealabel",t);else if(o.startsWith("setperimmeas:"))ae("perimlabel",t);else if(o.startsWith("setmeascolor:"))Xt(t);else if(o.startsWith("showLayerCont"))R("layercontrolOuter").classList.remove("rlmhidden");else if(o.startsWith("triggerExitDraw"))Lt();else if(o.startsWith("hideSelCont"))R("selModeCont").classList.add("rlmhidden");else if(o.startsWith("triggerHideDrawCont"))R("drawModeCont").classList.add("rlmhidden");else if(o.startsWith("existDrawSel:")){var _=t.split(",");j.value=_[0],Oe.value="#"+_[1],R("mainBtnsCont").classList.add("rlmhidden"),R("drawModeCont").classList.remove("rlmhidden"),R("hcdatecontrolOuter")?.classList.add("rlmhidden"),Vt()}else if(o.startsWith("triggerstopShowChronoV2"))Mt(!0);else if(o.startsWith("getLegendForFS"))0<U.children.length&&(f={type:"legendDiv",data:U.outerHTML},W.postMessage(f,z));else if(o.startsWith("saveMapToAccount"))t=t.replace("state=","state|"),window.open("https://www.randymajors.org/my-account?"+t,"_blank","noopener");else if((o.startsWith("saveNewDrawingV2:")||o.startsWith("saveExistingDrawingV2:"))&&"undefined"!=typeof myAjaxVars){t=JSON.stringify(t);let a,i;n=JSON.parse(t);o.startsWith("saveNewDrawingV2:")?ke=n.split("|")[0]:o.startsWith("saveExistingDrawingV2:")&&(n=n.split("|")[0],a=n.split("_")[0],i=n.split("_")[1],t=t.replace("_"+i,""));fetch("/wp-json/rmrhrest/v1/saveeedrawingjson",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:new Headers({"Content-Type":"application/json;charset=UTF-8","X-WP-Nonce":myAjaxVars.nonce}),body:t}).then(function(e){if(200===e.status){let n;e.json().then(function(e){var t,s;o.startsWith("saveNewDrawingV2:")?(n=ke+"_"+e,Q.drawings?Q.drawings+="~"+n:Q.drawings=n,Q.in.prevdrawings=Q.drawings,te(!1,!1,!1),yt("push")):(s=i+"_"+e,as("drawinglegendrow",i),-1!==(s=(t=Q.drawings?Q.drawings.split("~"):[]).indexOf(s))&&t.splice(s,1),n=a+"_"+e,t.includes(n)||t.push(n),Q.drawings=t.join("~"),Q.in.prevdrawings=Q.drawings,te(!1,!1,!1),yt("push"),W.postMessage("removeADrawingV2:"+i,z)),Kt(n)})}}).catch(function(e){})}}else{Q.in.hscomp=!0,"HIS"===$&&(Q.hyear||(ee.lifemap.vis_b?(Q.hyear=JSON.parse(ee.lifemap.qpdat_v)[0][2].toString(),ae("custompointlabel","LifeMap of "+ee.lifemap.qpvis_v+". Click a point to see Year(s).")):Q.hyear="1879"),V.value=Q.hyear,V.dispatchEvent(new Event("change"))),te(!1,!1,!1),ee.custareas.vis_b&&qt(),ee.custpoints.vis_b&&("sheet"===ee.custpoints.qpvis_v?Ot:At)(),Q.drawings&&(Ke=!0,Zt(),Ke=!1,Kt()),"ELE"===$&&Q.in.ipc&&"US"!==Q.in.ipc&&R("elevUnitsBtn").click();{let t=0;function M(){if(++t<=3){navigator.webdriver&&(G.wd=!0);try{var e=Object.getOwnPropertyDescriptor(navigator,"webdriver");e?e.configurable||e.writable||"function get webdriver() { [native code] }"!==e.get?.toString()?G.wdt="wdt1":"[object Function]"!==Object.prototype.toString.call(e.get)&&(G.wdt="wdt2"):!1!==navigator.webdriver&&(void 0===navigator.webdriver?G.wdt="wddu":G.wdt="wddm"),!1===Function.prototype.toString.toString().includes("[native code]")&&(G.wdt="wds")}catch(e){G.wdt=e}navigator.languages&&0!==navigator.languages.length||(G.lngt=navigator.languages?navigator.languages.join(","):"undefined"),J||((!navigator.hardwareConcurrency||navigator.hardwareConcurrency<2)&&(G.hct=void 0===navigator.hardwareConcurrency?"undefined":navigator.hardwareConcurrency.toString()),navigator.userAgent.includes("Android"))||!navigator.userAgent.includes("Chrome")||window.chrome||(G.chrt=window.innerWidth+"x"+window.innerHeight),!/Mobile|Android|iP(hone|od|ad)/i.test(navigator.userAgent)||"ontouchstart"in window&&0!==navigator.maxTouchPoints||(G.mwnt=!0)}G.lst&&(delete G.lst,G.spc<=5||10<=G.spcat)&&(delete G.spc,delete G.spcat),0<Object.keys(G).length&&hs("c"+t.toString())}M();n=J?16e3:12e3;$e=setTimeout(M,n),Qe=setInterval(M,6e4)}et.onmessage=e=>{"sbaiaw"===e.data&&ms()},document.addEventListener("scroll",T,!0),document.addEventListener("keydown",T,!0),document.addEventListener("mousedown",T,!0),document.addEventListener("touchstart",T,!0)}}function T(){document.removeEventListener("scroll",T,!0),document.removeEventListener("keydown",T,!0),document.removeEventListener("mousedown",T,!0),document.removeEventListener("touchstart",T,!0),window.rlmLcpFinalized=!0,vs()&&[{locStoreCond:{key:"totMaps",value:4},targSelector:"#drawMeasBtn",message:"NEW! Now you can try Draw & Measure for free!",contribMsg:"Try the improved Draw & Measure with more interactive measurements",locStoreKeyToSet:"rlmovw-drawmeas",showOnMob:!1},{locStoreCond:{key:"totMaps",value:5},targSelector:"#createmapform",message:'Did you know you can customize the map in many ways by using mapBuilder? Click "Customize this map" to give it a try!',locStoreKeyToSet:"rlmovw-mapbuilder-intro",showOnMob:!1},{locStoreCond:{key:"totMaps",value:6},targSelector:".census-link",message:"Click the city, county, ZIP Code or township name to view Census demographics such as population, income and more.",locStoreKeyToSet:"rlmovw-census-link",showOnMob:!0},{locStoreCond:{key:"totMaps",value:7},targSelector:".drawinglegendrow",targSelectorIndex:2,message:"Click any drawing name in the legend to center the map on that drawing",locStoreKeyToSet:"rlmovw-drawing-legend",showOnMob:!1},{clickElSelector:"#drawMeasBtn",targSelector:"#eedrawtoolsdiv",message:'Choose a drawing tool (point/marker, line or polygon); double-click to finish drawing lines or polygons.<br><br>When using point/marker tool, you can add address markers by using the "Search places" box, or add latitude longitude markers using the "Find lat long" box.<br><br>When done drawing shape(s), set drawing name, color and click the "Save Drawing" button below.',locStoreKeyToSet:"rlmovw-chose-first-drawing-tool",showOnMob:!0},{clickElSelector:"#saveDrawingBtn",targSelector:"#shareSaveMapBtn",message:'Now that you have saved your Drawing, be sure to save your finished Map by clicking the "Share/Save Map" button. Saved Drawings and Saved Maps can be found on your My Account page.',locStoreKeyToSet:"rlmovw-saved-first-drawing",showOnMob:!0},{clickElSelector:".rlm-button-addzipsfromlist",targSelector:"#drawziplist",message:"Save time by clicking this purple button to interactively select ZIP Codes on the map",locStoreKeyToSet:"rlmovw-first-ziplist",showOnMob:!0},{clickElSelector:".rlm-button-addzipsfromsheet",targSelector:"#drawzipsheet",message:"Save time by clicking this purple button to interactively select ZIP Codes on the map that can be copy/pasted into your spreadsheet",locStoreKeyToSet:"rlmovw-first-zipsheet",showOnMob:!0},{clickElSelector:".rlm-button-addcountiesfromsheet",targSelector:"#drawcountysheet",message:"Save time by clicking this purple button to interactively select Counties on the map that can be copy/pasted into your spreadsheet",locStoreKeyToSet:"rlmovw-first-countysheet",showOnMob:!0}].forEach(zs)}}),R("resultsFromMapDivCloseButton").addEventListener("click",function(){R("resultsfrommapdiv").classList.add("rlmhidden")}),R("rlmcopyresultsbutton").addEventListener("click",function(){navigator.clipboard.writeText(B.value),R("rlmcopyresultsbuttonlabel").classList.remove("rlmhidden"),setTimeout(function(){R("rlmcopyresultsbuttonlabel").classList.add("rlmhidden")},5e3)},!1),setTimeout(function(){try{R("firstguidancediv")?.classList.add("rlmhidden"),R("rlmiframeoverlay")?.classList.add("rlmhidden")}catch(e){}},1e4),R("drawziplist").addEventListener("click",function(){N.scrollIntoView(),xt("ziplist")},!1),R("drawzipsheet").addEventListener("click",function(){N.scrollIntoView(),xt("zipsheet")},!1),R("drawcountysheet").addEventListener("click",function(){N.scrollIntoView(),xt("countysheet")},!1),R("addTitleInput").addEventListener("input",function(){var e=this.value.replace(/[^a-zA-Z0-9\- ]/g,"").substring(0,100),t=R("addTitleInput"),s=R("saveMapInput");se("title",e),t.value=e,s.value=e},!1),R("setColorInput").addEventListener("change",function(){se("color",this.value)},!1),R("baseTool")?.addEventListener("change",function(){se("basetool",this.value)},!1),R("basemapType").addEventListener("change",function(){se("basemap",this.value)},!1),R("showLocCheckbox").addEventListener("click",function(){se("loc",this.checked),R("useXYCheckbox").checked=!1},!1),R("useXYCheckbox").addEventListener("click",function(){se("usexy",this.checked),R("showLocCheckbox").checked=!1},!1),R("showOutsideCheckbox").addEventListener("click",function(){se("showoutside",this.checked)},!1),R("hideLegendCheckbox").addEventListener("click",function(){se("hidelegend",this.checked)},!1),F.addEventListener("input",function(){this.value=this.value.replace(/[^0-9,]/g,""),this.value=this.value.replace(/ /g,""),se("zips",this.value.split(",").filter(e=>3===e.length||5===e.length).removeDuplicates().sort().join(",").replace(/^,/,""))&&this.value&&xs("addZipsListInput")},!1),R("addZipsAreasInput").addEventListener("input",function(){se("areatype","zips"),se("sheetid",this.value),this.value&&xs("addZipsAreasInput")},!1),R("addCountiesAreasInput").addEventListener("input",function(){se("areatype","counties"),se("sheetid",this.value),this.value&&xs("addCountiesAreasInput")},!1),R("addPointsInput").addEventListener("input",function(){se("markertype","sheet"),se("markers",this.value),this.value&&xs("addPointsInput")},!1),R("addPointsKMLInput").addEventListener("input",function(){se("markertype","kml"),se("markers",this.value),this.value&&xs("addPointsKMLInput")},!1),Z=R("rlmtooltip"),["addZipsListInput","addZipsAreasInput","addCountiesAreasInput","addTitleInput","addPointsInput","addPointsKMLInput"].forEach(function(e){e=R(e);e&&e.addEventListener("keydown",i,!1)}),(je=document.createElement("span")).className="errortext",je.id="errorspandynamic",R("findparcelplss")){let i={"":"",DC:"DC",F:"F",I:"I",L:"Lot",LT:"Lot",MW:"MW",OT:"OT",P:"P",PB:"Protracted Block",Q:"Quarter Township",QT:"Quarter Township",S:"Section",SN:"Section",TR:"Tract",UA:"Unsectionalized Area",UK:"Unknown",UN:"Unsurveyed Unprotracted Section",UP:"Unsurveyed Protracted Section",FS:"Fractional Section"},o=document.getElementById("divtypedropdown"),r=document.getElementById("sectextbox"),l=r.value,d=document.getElementById("twntextbox"),c=d.value,u=document.getElementById("twndirdropdown"),p=document.getElementById("rangetextbox"),m=p.value,h=document.getElementById("rangedirdropdown"),g=document.getElementById("pmdropdown"),f=document.getElementById("statedropdown"),e=document.getElementById("rlmFindPlssGoBut"),t=new URLSearchParams(location.search);function v(t,s,n,a=!1){t.addEventListener("blur",function(){let e=t.value;if(e=e.replace(/[^0-9.]/g,""),e=(e=/\.5$/.test(e)?e:e.replace(/\./g,"")).replace(/^0+(?!\.)/,""),void 0===(t.value=e)||""===e.trim()){if(!a)return void b("ERROR: You must specify at least Township, Range, and State.");e="0"}e.length>n?(b(s+" must be between 1 and "+n+" digits long."),e="",t.value=e):b("")},!1)}function b(e){document.getElementById("rlmfindplsserror").innerHTML=e}function w(e){switch(e){case"South":return"S";case"North":return"N";case"East":return"E";case"West":return"W";default:return e}}t.has("state")&&(f.value=t.get("state")),v(r,"Section",5,!0),v(d,"Township",4),v(p,"Range",4),e?.addEventListener("click",function(){var e,t,s,n,a=R("plssCheckbox"),a=(a.checked||(a.checked=!0,ee.plss.vis_b=!0,a.dispatchEvent(new Event("change"))),(e=>{var t,s=i;for(t in s)if(s[t]===e)return t})(o.value));l=r.value,c=d.value,m=p.value,l=l||"0",c&&m?(e=u.value,t=h.value,e=w(e),t=w(t),s=g.value,n=f.value,a=a+","+l+","+c+","+e+","+m+","+t+","+n+","+s,Q.labels&&ys(),W.postMessage("fromfindplss:"+a,z)):b("ERROR: You must specify at least Township, Range, and State.")},!1)}if(["detailslabel","detailslabelpt","detailslabelhc"].forEach(function(n){var a=R(n);a&&a.addEventListener("mouseover",function(s){a.classList.add("rlmhover-effect"),setTimeout(function(){var e=document.querySelector(".rlmpopout");e&&e.remove();var e={detailslabel:le,detailslabelpt:de,detailslabelhc:fe}[n],t=document.createElement("div");t.innerHTML=Rt(e),t.classList.add("rlmpopout"),t.style.left=s.pageX-38+"px",t.style.top=s.pageY-12+"px",document.body.appendChild(t),t.addEventListener("mouseleave",function(){this.remove(),a.classList.remove("rlmhover-effect")})},10)})}),H){var o=R("module-createdrawing-inner");if(o.classList.contains("rlmhidden")){let t=new MutationObserver(function(e){e.forEach(function(e){e.target.classList.contains("rlmhidden")||(t.disconnect(),Ht())})});t.observe(o,{attributeFilter:["class"]})}else Ht();R("drawingright")?.addEventListener("click",e=>{var t=R("myMultiselect"),e=e.target;t.contains(e)||It(!0)}),R("mySelectLabel").addEventListener("click",function(){It()},!1),R("adddrawingstomap").addEventListener("click",function(){Lt(),W.postMessage("fromstopdrawV2:",z),N.scrollIntoView(),W.postMessage("setshapenull",z);let t=new Set(Q.drawings.split("~")),s=new Set(Q.in.prevdrawings.split("~"));var e=Array.from(s).filter(e=>!t.has(e)),n=Array.from(t).filter(e=>!s.has(e));e.forEach(e=>{e=e.split("_")[0];W.postMessage("removeADrawingV2:"+e,z),as("drawinglegendrow",e)}),0<n.length&&Kt(n.join("~"),!0),te(!1,!1,!1),yt("push"),Q.in.prevdrawings=Q.drawings},!1),xe.addEventListener("mouseleave",function(){Z.textContent="",Z.classList.add("rlmhidden")})}else R("savedDrawingsTip")?.classList.remove("rlmhidden");"/zipcodegmap"===(R("baseTool").value=X)&&(R("showOutsideCheckbox").checked=!0,R("showOutsideCheckbox").disabled=!0),R("createmapform").addEventListener("click",function(e){e.preventDefault(),Pe||vt(),oe(h)||Ke||h.scrollIntoView({block:"end"}),R("createmapform").classList.remove("rlmshowpointer"),R("createmapform").classList.add("no-shadow"),R("createmapform")?.querySelector("a.gb-container-link")?.remove()},!1),Me.addEventListener("click",function(e){e.preventDefault(),R("module-createdrawing").classList.add("rlmhovercolor"),R("module-createdrawing-inner").classList.toggle("rlmhidden"),Me.classList.toggle("rlmhidden"),Te.classList.toggle("rlmhidden"),H&&!oe(R("adddrawingstomap"))&&R("adddrawingstomap").scrollIntoView({block:"end"})},!1),Te.addEventListener("click",function(e){e.preventDefault(),R("module-createdrawing-inner").classList.toggle("rlmhidden"),Me.classList.toggle("rlmhidden"),Te.classList.toggle("rlmhidden")},!1),ze.addEventListener("click",function(e){e.preventDefault(),R("module-zipcountyareas").classList.add("rlmhovercolor"),R("module-zipcountyareas-inner").classList.toggle("rlmhidden"),ze.classList.toggle("rlmhidden"),qe.classList.toggle("rlmhidden"),oe(T)||Ke||T.scrollIntoView({block:"end"})},!1),qe.addEventListener("click",function(e){e.preventDefault(),R("module-zipcountyareas-inner").classList.toggle("rlmhidden"),ze.classList.toggle("rlmhidden"),qe.classList.toggle("rlmhidden")},!1),document.querySelector(".rlm-button-addzipsfromlist").addEventListener("click",function(e){e.preventDefault(),Yt(".rlm-button-addzipsfromlist",".rlm-button-addzipsfromsheet",".rlm-button-addcountiesfromsheet"),R("instructions-addzipslist").classList.remove("rlmhidden"),oe(F)||R("module-addpoints").scrollIntoView({block:"end"}),R("instructions-addcountiesfromsheet").classList.add("rlmhidden"),R("instructions-addzipsfromsheet").classList.add("rlmhidden")},!1),document.querySelector(".rlm-button-addzipsfromsheet").addEventListener("click",function(e){e.preventDefault(),Yt(".rlm-button-addzipsfromsheet",".rlm-button-addzipsfromlist",".rlm-button-addcountiesfromsheet"),R("instructions-addzipsfromsheet").classList.remove("rlmhidden"),oe(R("addZipsAreasInput"))||R("module-zipcountyareas-inner").scrollIntoView(),R("instructions-addzipslist").classList.add("rlmhidden"),R("instructions-addcountiesfromsheet").classList.add("rlmhidden")},!1),document.querySelector(".rlm-button-addcountiesfromsheet").addEventListener("click",function(e){e.preventDefault(),Yt(".rlm-button-addcountiesfromsheet",".rlm-button-addzipsfromsheet",".rlm-button-addzipsfromlist"),R("instructions-addcountiesfromsheet").classList.remove("rlmhidden"),oe(R("addCountiesAreasInput"))||R("module-zipcountyareas-inner").scrollIntoView(),R("instructions-addzipslist").classList.add("rlmhidden"),R("instructions-addzipsfromsheet").classList.add("rlmhidden")},!1),T.addEventListener("click",function(e){e.preventDefault(),R("module-addpoints").classList.add("rlmhovercolor"),R("module-addpoints-inner").classList.toggle("rlmhidden"),T.classList.toggle("rlmhidden"),Ie.classList.toggle("rlmhidden"),oe(h)||Ke||h.scrollIntoView({block:"end"})},!1),Ie.addEventListener("click",function(e){e.preventDefault(),R("module-addpoints-inner").classList.toggle("rlmhidden"),T.classList.toggle("rlmhidden"),Ie.classList.toggle("rlmhidden"),oe(h)||h.scrollIntoView({block:"end"})},!1),document.querySelector(".rlm-button-addpointsfromsheet").addEventListener("click",function(e){e.preventDefault(),Yt(".rlm-button-addpointsfromsheet",".rlm-button-addpointsfromKML"),R("instructions-addpointsfromsheet").classList.remove("rlmhidden"),oe(R("addPointsInput"))||R("instructions-addpointsfromsheet").scrollIntoView({block:"center"}),R("instructions-addpointsfromKML").classList.add("rlmhidden"),R("instructions-addpointsfromKML").classList.add("rlmhidden")},!1),document.querySelector(".rlm-button-addpointsfromKML").addEventListener("click",function(e){e.preventDefault(),Yt(".rlm-button-addpointsfromKML",".rlm-button-addpointsfromsheet"),R("instructions-addpointsfromKML").classList.remove("rlmhidden"),oe(R("addPointsKMLInput"))||R("instructions-addpointsfromKML").scrollIntoView({block:"center"}),R("instructions-addpointsfromsheet").classList.add("rlmhidden")},!1),h.addEventListener("click",function(e){e.preventDefault(),R("module-addtitle").classList.add("rlmhovercolor"),R("module-addtitle-inner").classList.toggle("rlmhidden"),h.classList.toggle("rlmhidden"),_e.classList.toggle("rlmhidden"),oe(R("module-addtitle"))||Ke||(R("module-addtitle").scrollIntoView({block:"end"}),Ke=!1)},!1),_e.addEventListener("click",function(e){e.preventDefault(),R("module-addtitle-inner").classList.toggle("rlmhidden"),h.classList.toggle("rlmhidden"),_e.classList.toggle("rlmhidden")},!1),R("errorfloatlabel"),De=R("getstartedlabel"),Be=R("rlmmarkertop"),$.startsWith("CU")&&(0===D.toString().length||We)&&(Ke=!0,R("createmapform").click(),("CUP"===$?T:ze).click(),h.click(),De?.classList.add("rlmmessagelarge"),ae("getstartedlabel","Get started by using the mapBuilder form below the map")),R("applybutton").addEventListener("click",function(){ks()},!1),R("applybuttonsmall")?.addEventListener("click",function(){ks()},!1),R("moreoptionslink")?.addEventListener("click",function(){R("moduletitle-addtitle-open").classList.contains("rlmhidden")&&h.click(),oe(R("module-addtitle"))||R("module-addtitle").scrollIntoView({block:"center"})},!1),R("rlmcopylinkbutton")?.addEventListener("click",function(){navigator.clipboard.writeText(_),R("rlmcopylinkbuttonlabel").classList.remove("rlmhidden"),setTimeout(function(){R("rlmcopylinkbuttonlabel").classList.add("rlmhidden")},5e3)},!1),Ae=R("saveMapInput"),H&&vs()&&(o=localStorage.getItem("clickedSavedMapName"))&&(o=o.replace(/[^a-zA-Z0-9\- ]/g,"").substring(0,100),Ae.value=o,localStorage.removeItem("clickedSavedMapName")),Ae.addEventListener("input",function(){Ae.value=Ae.value.replace(/[^a-zA-Z0-9\- ]/g,"").substring(0,100)},!1),R("savemapbutton").addEventListener("click",function(){var e;Ae.value.trim()?(zt(),e="~maptitle~"+Ae.value+"~maplink~"+_,window.open("/my-account?"+e,"_blank","noopener")):ne("Give the map a name and click Save Map",!1,"saveMapInput")},!1),(async()=>{document.querySelectorAll(".rlmLinkSmallCentered a").forEach(e=>{e.href=e.href.replace("/customgmap",X)})})()}if(J&&document.querySelector(".menu-toggle").addEventListener("click",function(){ys()}),!H){for(var d=document.getElementsByClassName("mbCta"),c=0;c<d.length;c++){var u=d[c].innerHTML,p=u.indexOf("using ");-1!==p&&(u=u.substring(0,p+"using ".length)+"<strong>","ZIP"===$||$.startsWith("CU")?d[c].innerHTML=u+"ZIP Codes</strong>, points, lines or counties":d[c].innerHTML="COU"===$?u+"counties</strong>, points, lines or ZIP Codes":"CUA"===$?u+"ZIP Codes, counties</strong>, points or lines":u+"points, lines</strong>, ZIP Codes or counties")}vs()&&50<parseInt(localStorage.getItem("totMaps"),10)&&(O=O.replace("-contribution","-contribution?attribute_monthly-contribution=%249%20suggested%20if%20you%20use%20several%20tools"))}var m=location.hash;m&&fs(m)}function vt(){R("module-createdrawing").classList.remove("rlmhidden"),R("module-zipcountyareas").classList.remove("rlmhidden"),R("module-addpoints").classList.remove("rlmhidden"),R("module-addtitle").classList.remove("rlmhidden"),R("moduletitle-mapbuilder-closed").classList.add("rlmhidden")}function m(){Q.in.init=!0,Q.in.cust=["custziplist","custareas","custpoints","lifemap"].some(e=>ee[e].vis_b),Q.in.iploc=!Q.in.cust&&!(Q.state&&"US"!==Q.state||Q.fips||Q.x)}function bt(){for(var e in"HIS"!==$||H||(D.has("lifemap")?location.href="https://"+location.host+"/my-account?pending=lm":D.has("personpage")&&(location.href="https://"+location.host+"/my-account?pending=pp")),ee){var t=ee[e],s=gt[$].primlay===t.layname_s,n="states"===e;t.vis_b=s||n||D.has(t.qpvis_s),["custziplist","custareas","custpoints","lifemap"].includes(e)&&(t.qpvis_v=D.get(t.qpvis_s)||"",t.qpdat_v=D.get(t.qpdat_s)||"")}["x","y","cx","cy"].forEach(e=>{D.has(e)&&(Q[e]=parseFloat(parseFloat(D.get(e)).toFixed(7)))}),["zoom","legfs"].forEach(e=>{D.has(e)&&(Q[e]=parseInt(D.get(e),10))}),["mapbuilder","loc"].forEach(e=>{Q[e]=D.has(e)}),["onestate","labels","showoutside"].forEach(e=>{D.has(e)&&(Q[e]="show")}),["hidelegend"].forEach(e=>{D.has(e)&&(Q[e]="hide")}),["state","fips","basemap","title","color","drawings","hyear","sec","t","td","r","rd","pm"].forEach(e=>{D.has(e)&&(Q[e]=D.get(e))}),"HIS"===$&&Q.x&&!Q.cx&&(Q.cx=Q.x,Q.cy=Q.y,Q.zoom=10,Q.state="US"),Q.in.prevdrawings=Q.drawings,Q.fips&&(ee.counties.vis_b=!0),m(),Q.labels&&(R("labelsCheckbox").checked=!0)}function wt(){for(var e in ee){var e=ee[e],t=R(e.cbid_s);t&&(t.checked=e.vis_b,(e=t.parentElement)&&!gt[$].cbvis_a.includes(t.id)&&e.classList.add("rlmhidden"),["CUS","CUA","CUP","PLS","ZIP"].includes($))&&"countiesCheckbox"===t.id&&(t=e.querySelector("label"))&&(t.style.color="#696969")}Q.in.lablay=b(),U.classList.toggle("rlmhidden",Q.hidelegend),R("layercontrol").classList.remove("rlmhidden"),J&&R("printBtn").classList.add("rlmhidden"),R("urContInner").classList.remove("rlmhidden"),H||R("getAdFreeLink").classList.remove("rlmhidden"),Q.loc&&os(!1),Q.title&&v(),"ZIP"!==$||Q.mapbuilder||(R("colorizeBtn").textContent="Remove Colors")}function yt(e="push"){var t,s,n,a=new URLSearchParams,i=["x","y","cx","cy"];for(t in Q)Q.hasOwnProperty(t)&&"in"!==t&&Q[t]&&(i.includes(t)?(s=Q[t].toFixed(7),a.set(t,s)):a.set(t,Q[t]));for(n in ee){var o=ee[n];o.vis_b&&(o.qpvis_s&&a.set(o.qpvis_s,o.qpvis_v),o.qpdat_s)&&a.set(o.qpdat_s,o.qpdat_v)}let r="?"+us(a);Ne&&!r.includes("testing")&&(r+="&testing"),_="https://"+location.host+X+r,"push"===e?history.pushState(null,"",r):"apply"===e?history.replaceState(null,"",r):"new"===e&&(location.href="https://"+location.host+X+r)}function v(){var e=R("midcontOuter");e&&(Q.title?(Q.color?e.style.color=ds(Q.color):e.style.color=Ge,e.textContent=Q.title.replace(/\+/g," ")):e.textContent="")}function Lt(){R("drawModeCont").classList.add("rlmhidden"),Ye=!1,R("mainBtnsCont").classList.remove("rlmhidden"),R("hcdatecontrolOuter")?.classList.remove("rlmhidden"),j.value="newDrawing",Oe.value="#6244bb",setTimeout(function(){Ct()},500)}function Ct(){ae("seglabel",""),ae("linelabel",""),ae("arealabel",""),ae("perimlabel","")}function kt(){document.querySelectorAll(".rlmeeheader .rlmlabel").forEach(e=>e.innerHTML="")}function b(){let e="",t=-1;for(var s in ee){var n=ee[s],a=n.layname_s===gt[$].primlay,i=0<n.labwt_i;(Q.in.cust&&n.vis_b&&i&&n.labwt_i>t||a&&i&&n.labwt_i>=t)&&(t=n.labwt_i,e=s),"custziplist"!==e||!Q.showoutside&&"ZIP"!==$||(e="zipcodes")}return e=e||"counties"}function te(e=!1,t=!1,s=!1){W.postMessage({type:"allStateObjs",showRes:e,procLab:t,fromApply:s,data:[Q,ee]},z)}function se(e,t){switch(L.mapbuilder=!0,"string"==typeof t&&(t=t.trim()),e){case"zips":if(""===t||void 0===t)C.custziplist.qpvis_v="",C.custziplist.qpdat_v="";else{if(t.length<3)return!1;if(1500<t.length)return F.value="",ne('More than 250 ZIP Codes. Use the "Color-code ZIP Codes from a spreadsheet" module to map larger numbers of ZIP Codes.',!1,"addZipsListInput"),M?.classList.add("rlmhidden"),!1;if(6<=t.length&&!t.includes(","))return F.value="",ne("ZIP Codes must be separated by commas",!1,"addZipsListInput"),M?.classList.add("rlmhidden"),!1;C.custziplist.vis_b=!0,C.custziplist.qpvis_v=t,C.custziplist.qpdat_v=t,C.custareas.vis_b=!1,C.custareas.qpvis_v="",C.custareas.qpdat_v="",R("addCountiesAreasInput").value="",R("addZipsAreasInput").value="",1499!==t.length&&zt(),R("showOutsideGroup").classList.remove("rlmhiddenvis")}break;case"sheetid":var s=Gt(t);s&&!s.includes("wrong URL")?(C.custpoints.qpdat_v!==s&&ee.custpoints.qpdat_v!==s||(R("addPointsInput").value="",C.custpoints.vis_b=!1,C.custpoints.qpvis_v="",C.custpoints.qpdat_v="",ee.custpoints.vis_b=!1,ee.custpoints.qpvis_v="",ee.custpoints.qpdat_v=""),C.custareas.vis_b=!0,C.custareas.qpdat_v=s,C.custziplist.vis_b=!1,C.custziplist.qpvis_v="",C.custziplist.qpdat_v="",F.value=""):(C.custareas.vis_b=!1,C.custareas.qpvis_v="",C.custareas.qpdat_v="");break;case"areatype":C.custareas.qpvis_v=t,C.custziplist.vis_b=!1,C.custziplist.qpvis_v="",C.custziplist.qpdat_v="",F.value="","zips"===t?R("addCountiesAreasInput").value="":"counties"===t&&(R("addZipsAreasInput").value="");break;case"markers":s=Gt(t);s&&!s.includes("wrong URL")?(C.custareas.qpdat_v!==s&&ee.custareas.qpdat_v!==s||(R("addCountiesAreasInput").value="",R("addZipsAreasInput").value="",C.custareas.vis_b=!1,C.custareas.qpvis_v="",C.custareas.qpdat_v="",ee.custareas.vis_b=!1,ee.custareas.qpvis_v="",ee.custareas.qpdat_v=""),C.custpoints.vis_b=!0,C.custpoints.qpdat_v=s):(C.custpoints.vis_b=!1,C.custpoints.qpvis_v="",C.custpoints.qpdat_v="");break;case"markertype":"sheet"===(C.custpoints.qpvis_v=t)?R("addPointsKMLInput").value="":"kml"===t&&(R("addPointsInput").value="");break;case"title":L.title=t||"";break;case"color":t=ds(t=t.replace("%23","").replace("#","")).replace("#",""),L.color=t;break;case"basetool":X===t.toLowerCase()?d=!1:(X=t.toLowerCase(),d=!0,"/township-range-on-google-maps"!==X&&"/maps"!==X&&(L.plss="",ee.plss.vis_b=!1));break;case"basemap":L.basemap=t.toLowerCase();break;case"loc":L.loc=t;break;case"labels":L.labels=t?"show":"";break;case"showoutside":L.showoutside=t?"show":"";break;case"hidelegend":L.hidelegend=t?"hide":""}return"usexy"!==e&&Se.classList.remove("rlmhidden"),!0}function xt(e){W.postMessage("fromzipcountyareas:"+e,z),R("mainBtnsCont").classList.add("rlmhidden"),R("selModeCont").classList.remove("rlmhidden"),Vt(),Xt("0080FFAB")}async function St(){if(H){R("mySelectOptions").innerHTML="";try{var e=await(200===(n=await fetch("/wp-json/rmrhrest/v1/geteedrawings",{method:"GET",cache:"no-cache",credentials:"same-origin",headers:new Headers({"Content-Type":"application/json;charset=UTF-8","X-WP-Nonce":myAjaxVars.nonce})})).status?n.json():null);if(e){var t=e;if(t=JSON.parse(t)){let a=t[0];t=t[1];let i=cs(Q.drawings||"").split("~").map(e=>e.split("_")[0]);var t=t.sort(function(e,t){return e.localeCompare(t,"en",{sensitivity:"base"})}).map(function(e,t){var s=e.split("_")[0],n=i.includes(s),t="rlmDrawCheckbox-"+t;return'<label for="'+t+'"><input type="checkbox" id="'+t+'" name="'+s+'" value="'+e+"_"+a+'" '+(n?"checked":"")+">"+s+"</label>"}).join(""),s=R("mySelectOptions");s.innerHTML=t,s.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.addEventListener("change",Et),e.checked&&e.dispatchEvent(new Event("change"))})}else R("savedDrawingsTip")?.classList.remove("rlmhidden")}}catch(e){console.error("Fetch Error:",e)}var n}}function Et(){var e,t=R("mySelectLabel").getElementsByTagName("option")[0],s=[],n=[];for(e of R("mySelectOptions").querySelectorAll('input[type="checkbox"]:checked')){var a=e.getAttribute("value"),i=e.getAttribute("name");s.push(a),n.push(i)}var o="Select Drawings";0<s.length&&(o=n.join(", "),R("drawingright")?.querySelectorAll(".applynudge")?.forEach(e=>{e.classList.remove("rlmhiddenvis"),e.classList.remove("rlmhidden")})),Q.in.init||(Q.drawings=s.join("~")),t.innerText=o}function It(e=!1){var t=R("mySelectOptions");"block"!==t.style.display?!1===e&&(t.style.display="block"):t.style.display="none"}function _t(e){var t=(a=new Date(e)).getFullYear(),s=a.getMonth()+1,n=a.getDate(),t=t.toString(),s=s.toString(),n=n.toString(),a=(a=t+(s=1===s.length?"0"+s:s)+(n=1===n.length?"0"+n:n),parseInt(a,10)),s=((t=new Date(e)).setDate(t.getDate()+1),t.getFullYear()),n=t.getMonth()+1,i=t.getDate(),s=s.toString(),n=n.toString(),i=i.toString(),t=(t=s+(n=1===n.length?"0"+n:n)+(i=1===i.length?"0"+i:i),parseInt(t,10)),n=((s=new Date(e)).setDate(s.getDate()-1),s.getFullYear()),i=s.getMonth()+1,e=s.getDate(),n=n.toString(),i=i.toString(),e=e.toString(),s=n+(i=1===i.length?"0"+i:i)+(e=1===e.length?"0"+e:e);return[a,t,s=parseInt(s,10)]}function Mt(e){e&&(R("showChronoCheckbox").checked=!1),setTimeout(function(){V.value=Q.in.origd,V.dispatchEvent(new Event("change")),Q.in.origd=""},1500)}function Tt(e){return e=(e=(e=(e=(e=(e=(e=e.replace(/\(\s*ext\s*\)\s*([a-zA-Z]+\b)(,)/gi,"$1 (extinct)$2")).replace(/Terr\./gi,"Territory")).replace(/Territory County/g,"Territory")).replace(/\bNCA\b\s*\d*\s*County/gi,function(e){return e.replace(/County/gi,"").trim()})).replace(/\bNCA\b/g,"Non-County Area")).replace(/lost to/g,"lost some area to")).replace(/gained from/g,"gained some area from")}function zt(){je&&je.parentNode&&je.parentNode.removeChild(je)}function ne(e,t=!1,s=null){ae("progressfloatlabel",""),ae("guidancelabel",""),ae("getstartedlabel",""),t?ae("eeerrorfloatlabel",e):s?((t=R(s)).parentNode.insertBefore(je,t),je.textContent=e):ae("errorfloatlabel",e)}function qt(){var e;be&&Q.in.hscomp&&(e={type:"areaSheetData",data:q},W.postMessage(e,z),ts(Le,q,2,1,"areas"),be=!1)}function At(){var e;S&&Q.in.hscomp&&(0<P.length&&(e={type:"pointKmlData",data:P},W.postMessage(e,z),ts(Ce,P,2,3,"points")),0<w.length&&(e={type:"lineKmlData",data:w},W.postMessage(e,z),ts("",w,1,2,"drawings")),S=!1)}function Ot(){var e;we&&Q.in.hscomp&&(e={type:"pointSheetData",data:P},W.postMessage(e,z),ts(Ce,P,2,3,"points"),we=!1)}function Pt(e,t,s){var n=t?"KML file":"spreadsheet";H?ne("Too many rows in "+n+"; mapping first 10,000 rows. Maximum is 10,000 rows. To reduce the number of rows, try <a href='https://www.randymajors.org/access-ad-free-fullscreen-tools#compare' target='_blank' rel='noopener'>combining 3-digit ZIP Codes with 5-digit ZIP Codes</a> or chunking up your map into multiple regional maps."):(x=!0,ne(t?s?"Lines are too complex in "+n+": free version maps the first 1,000 vertices of lines. "+A+" have no vertex limit, can show up to 10,000 KML features per map, and view line measurements. <a href='https://www.randymajors.org/access-ad-free-fullscreen-tools#compare' target='_blank' rel='noopener'>Learn More</a> or <a href='https://www.randymajors.org/product/ad-free-fullscreen-tools-monthly-contribution' target='_blank' rel='noopener'>Join</a>.":"Too many rows in "+n+": free version maps the first "+e+" rows. "+A+" can show up to 10,000 KML features per map and can view line measurements. <a href='https://www.randymajors.org/access-ad-free-fullscreen-tools#compare' target='_blank' rel='noopener'>Learn More</a> or <a href='https://www.randymajors.org/product/ad-free-fullscreen-tools-monthly-contribution' target='_blank' rel='noopener'>Join</a>.":"Too many rows in "+n+": free version maps the first "+e+" rows. "+A+" can show up to 10,000 rows per map. <a href='https://www.randymajors.org/access-ad-free-fullscreen-tools#compare' target='_blank'>Learn More</a> or <a href='https://www.randymajors.org/product/ad-free-fullscreen-tools-monthly-contribution' target='_blank' rel='noopener'>Join</a>."))}async function Nt(t,e,s,n){be=!1;for(var v,b,w,a=0<q.length?JSON.stringify(q):"[]",i=0,o=-1,r=-1,l=-1,d=-1,c=-1,u=!(he=[]),p=!(q=[]),m=!1,h=0,g=t.length;h<g;h++)try{if(0===h){for(var f=0;f<t[h].length;f++){var y=ie(t[h][f].toLowerCase());(y.includes("state")||y.includes("st")&&y.includes("abbrev"))&&-1===l?l=f:(y.includes("county")||y.includes("counties")||y.includes("cnty"))&&-1===r?r=f:y.includes("zip")&&-1===o||y.includes("post")&&-1===o?o=f:(y.includes("color")||y.includes("hex"))&&-1===d?d=f:""!==y&&null!==y&&-1===c&&(c=f,Le=t[h][c]),y.includes("count")||y.includes("state")?p=!0:y.includes("zip")?u=!0:(y.includes("lat")||y.includes("lon")||y.includes("addr"))&&(m=!0)}if("counties"===s){if(-1===r||-1===l){let e;return e=u?"Found ZIP Code but not county or state; you probably want to use the ZIP Code module":m?"Found lat/long or address, but not county or state; you probably want to use the custom points module":'Spreadsheet missing required headers; first row of sheet must contain "County" and "State"',void(n?ne(e,!1,"counties"===s?"addCountiesAreasInput":"addZipsAreasInput"):ne(e+=ye))}}else if(-1===c&&-1!==o&&-1!==r&&(c=r,r=-1,Le=t[0][c]),-1===o){var L=t[0][0].trim();if(!/^[0-9]+$/.test(L)||5!==L.length&&3!==L.length){let e;return e=p?"Found county or state but not ZIP Code; you probably want to use the County module":m?"Found lat/long or address, but not ZIP Code; you probably want to use the custom points module":'Spreadsheet missing required headers; first row of sheet must contain "ZIP Code"',void(n?ne(e,!1,"counties"===s?"addCountiesAreasInput":"addZipsAreasInput"):ne(e+=ye))}var c=""!==t[o=0][1]?1:-1,C=-1!==(d=(Le="")!==t[0][2]?2:d)?ds(t[h][d]):Q.color?ds(Q.color):Ge;q[i]=[t[h][o].trim(),"",C,i],i++}for(var k="counties"===s?[r,l,d,c]:[o,d,c],x=0;x<t[0].length;x++)-1===k.indexOf(x)&&""!==t[0][x]&&null!==t[0][x]&&(ce.push(x),pe.push(t[0][x]))}else{1===h&&ae("progressfloatlabel","Mapping custom areas from spreadsheet...");C=-1!==d?ds(t[h][d]):Q.color?ds(Q.color):Ge;if("counties"===s){if(void 0!==t[h][l]&&""!==t[h][l]&&void 0!==t[h][r]&&""!==t[h][r]){var S,E,I=ie(t[h][l]).toUpperCase(),_=ie(t[h][r]).toUpperCase().replace(/ COUNTY/i,"").replace(/ PARISH/i,"").trim();if(2!==I.length&&(I=I.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),I=dt[I]),-1!==c?(S=(t[h][c]||"").trim(),q[i]=[_+", "+I,S,C,i],0<ce.length&&(E=[],ce.forEach(function(e){e=t[h][e]||"";E.push(e)}),he[i]=E)):q[i]=[_+", "+I,"",C,i],e<++i){Pt(e,!1);break}}}else if(void 0!==t[h][o]&&""!==t[h][o])if(-1!==c?(S=(t[h][c]||"").trim(),q[i]=[ie(t[h][o],5),S,C,i],0<ce.length&&(E=[],ce.forEach(function(e){e=t[h][e]||"";E.push(e)}),he[i]=E)):q[i]=[ie(t[h][o],5),"",C,i],e<++i){Pt(e,!1);break}}}catch(e){}if(0===q.length)M="ERROR: Found all empty values in one or more required columns in your spreadsheet.",n?ne(M,!1,"counties"===s?"addCountiesAreasInput":"addZipsAreasInput"):ne(M+=ye);else{let e=Ne?10:H?900:500;if("zips"===s&&q.length>=e){{var M=q;var T=he;let n=0,a=0,i=0,o=0,e=0,r=0,l=0,d=0,c=0,u=0,p=0;ve||(v=await fetch("/wp-content/themes/generatepress_child/zip_prefix_lookup_minified.json"),ve=await v.json());let m=ve,h=[],g=[],f=new Map;M.forEach((e,t)=>{var s=e[0];if(5===s.length)n++;else{if(3!==s.length||!m[s])return void i++;n++,l++}s=s.substring(0,3);m[s]?(a++,f.has(s)||f.set(s,[]),f.get(s).push({rowIndex:t,rowData:e})):(h.push(e),0<T.length&&g.push(T[t]),r++)});for([b,w]of f.entries()){let s=m[b],t=new Set(w.map(e=>e.rowData[0])),n=w[0].rowData,a=T[w[0].rowIndex]||[];var z=t.has(b)||s.every(e=>t.has(e));if(z)if(w.every(({rowData:e,rowIndex:t})=>{t=T[t]||[];return e[1]===n[1]&&e[2]===n[2]&&t.length===a.length&&t.every((e,t)=>e===a[t])})){let t=0;w.forEach(({rowData:e})=>{e=e[0];s.includes(e)?t++:5!==e.length||s.includes(e)||o++}),0<t&&e++,u+=t,h.push([b,n[1],n[2],h.length]),0<T.length&&g.push(a)}else c++,p+=w.length,w.forEach(({rowData:e,rowIndex:t})=>{h.push(e),0<T.length&&g.push(T[t])});else d++,p+=w.length,w.forEach(({rowData:e,rowIndex:t})=>{h.push(e),0<T.length&&g.push(T[t])})}M.length=0,M.push.apply(M,h),T.length=0,T.push.apply(T,g)}await 0}be=!0,n&&N.scrollIntoView(),a===JSON.stringify(q)?(ae("progressfloatlabel",""),ts(Le,q,2,1,"areas")):qt()}}function Wt(e,z,q,A=!1){var O;x=!1,zt(),O=H?1e4:"areas"===z?1e3:100;fetch("https://sheets.googleapis.com/v4/spreadsheets/"+e+"/values/A1:ZZ?k"+t+"aSyDmzKW2bh8uqhboP_8P0-PYTUlrkOsgwz0").then(function(e){if(200!==e.status)throw e.status;return e.json()}).then(function(e){if(e.values)if(0===(e=e.values)[0].length)A?ne("First row of spreadsheet is empty. First row must contain column headers.",!1,"areas"===z?"counties"===q?"addCountiesAreasInput":"addZipsAreasInput":"addPointsInput"):ne("First row of spreadsheet is empty; first row must contain column headers. See mapBuilder instructions below the map.");else if("areas"===z)ae("progressfloatlabel","Loading custom area spreadsheet..."),Nt(e,O,q,A);else{ae("progressfloatlabel","Loading custom point or line data...");var[t,s,n=!1]=[e,O,A],e=(we=!1,0<P.length?JSON.stringify(P):"[]");P=[];for(var a,i=0,o=-1,r=-1,l=-1,d=-1,c=-1,u=-1,p=-1,m=-1,h=!(ge=[]),g=[],f=0,v=t.length;f<v;f++)if(0===f){for(var b,w=0;w<t[f].length;w++){var y=ie(t[f][w].toLowerCase());(y.startsWith("lon")||y.startsWith("lng")||"x"===y)&&-1===o?o=w:!y.startsWith("lat")&&"y"!==y||-1!==r?(y.includes("color")||y.includes("hex"))&&-1===l?(l=w,g.push(l)):(y.includes("addr")||y.includes("street"))&&-1===d?(d=w,g.push(d)):-1!==d&&n?y.includes("city")&&-1===u?u=w:"state"===y&&-1===p?p=w:(y.includes("zip")||y.includes("postal"))&&-1===m&&(m=w):""!==y&&null!==y&&-1===c&&(c=w,g.push(c),Ce=t[f][c]):r=w,(y.includes("zip")||y.includes("count")||y.includes("state"))&&(h=!0)}if((-1===o||-1===r)&&-1===d)return void(h?(b="Found ZIP Code or county or state, but not lat/long or address; you probably want to use the ZIP Codes or Counties modules",n?ne(b,!1,"addPointsInput"):ne(b)):(b="First row of spreadsheet must contain both latitude and longitude column names, or an address column",n?ne(b,!1,"addPointsInput"):ne(b)));if(-1===d||-1!==o&&-1!==r){if(-1!==o&&-1!==r)for(var L=[o,r,l,c],C=0;C<t[0].length;C++)-1===L.indexOf(C)&&""!==t[0][C]&&null!==t[0][C]&&(ue.push(C),me.push(t[0][C]))}else g.sort(function(e,t){return e-t}),P[f]=g.map(function(e){return t[f][e]}),i++}else{var k=t[f][c]||"";if(!n||-1===d||-1!==o&&-1!==r){if(!isNaN(parseInt(t[f][o],10))&&!isNaN(parseInt(t[f][r],10))){1===f&&ae("progressfloatlabel","Mapping custom points from spreadsheet... ");var x,S=parseFloat(parseFloat(ie(t[f][o])).toFixed(7)),E=parseFloat(parseFloat(ie(t[f][r])).toFixed(7)),I=-1!==l?ds(t[f][l]):Q.color?ds(Q.color):Ge;if(90<E||E<-90)a="Latitudes must be between -90 and 90. Do you have the latitude and longitude column headers reversed in your spreadsheet?";else if(0!==S||0!==E)if(P[i]=[S,E,I,k,i],0<ue.length&&(x=[],ue.forEach(function(e){e=t[f][e]||"";x.push(e)}),ge[i]=x),s<++i){Pt(s,!1);break}}}else{var _,M,T,S=t[f][d]||"",E=-1!==S.indexOf(","),I=/\d{5}(-\d{4})?$/.test(S);if((!E||!I)&&(k=-1!==u?ie(t[f][u]||""):"",_=-1!==p?ie(t[f][p]||""):"",M=-1!==m?ie(t[f][m]||""):"",T=[S],k&&T.push(k),_&&T.push(_),M&&T.push(M),t[f][d]=T.join(", ")),P[f]=g.map(function(e){return t[f][e]}),s<++i){Pt(s,!1);break}}}a&&ne(a),0<i?-1===d||-1!==o&&-1!==r?(n&&N.scrollIntoView(),we=!0,e===JSON.stringify(P)?(ae("progressfloatlabel",""),ts(Ce,P,2,3,"points")):Ot()):(e=P[0].findIndex(function(e){return"string"==typeof e&&(e.toLowerCase().includes("addr")||e.toLowerCase().includes("street"))}),n&&window.confirm("Did not find latitude longitude in Sheet, but found addresses. Do you want us to geocode the addresses in order to add latitudes and longitudes that you can paste into your Google Sheet?")?(N.scrollIntoView(),(async(t,s)=>{var n,a=[],i=t.length;for(let e=0;e<i;e++)0===e?a.push([...t[e],"Latitude","Longitude"]):(n=await((i,o)=>new Promise(t=>{var e=encodeURIComponent(i[o]);let s="jsonp_"+Math.random().toString(36).substr(2,5);window["processGeocodeResponse_"+s]=function(e){clearTimeout(a),e&&e.result&&e.result.addressMatches&&0<e.result.addressMatches.length?(e=e.result.addressMatches[0],t([...i,e.coordinates.y,e.coordinates.x])):t(i),document.head.removeChild(n),delete window["processGeocodeResponse_"+s]};e="https://geocoding.geo.census.gov/geocoder/locations/onelineaddress?address="+e+"&benchmark=Public_AR_Current&format=jsonp&callback=processGeocodeResponse_"+s;let n=document.createElement("script"),a=(n.src=e,n.id=s,document.head.appendChild(n),n.onload=n.onerror=()=>{clearTimeout(a),t(i),n.parentNode&&document.head.removeChild(n),delete window["processGeocodeResponse_"+s]},setTimeout(()=>{n.parentNode&&document.head.removeChild(n),delete window["processGeocodeResponse_"+s],ne("US Census Bureau Geocoder timed out. Partial results (if any) shown below)",!1),t(i)},5e3))}))(t[e],s),ae("progressfloatlabel","Performing geocoding from US Census Bureau (row "+e+" of "+i+")..."),a.push(n));return a})(P,e).then(e=>{e=e.map(e=>e.join("\t")).join("\n");B.value=e,R("resultsfrommapdiv").classList.remove("rlmhidden"),ae("getstartedlabel",'Addresses were converted into latitudes and longitudes by the US Census Bureau and are shown below the map; these results can be copy/pasted into your spreadsheet to be used in the "Add points from a spreadsheet" module'),ae("progressfloatlabel",""),oe(B)||B.scrollIntoView({block:"end"}),B.style.height="30vh",fs("#resultsFromMapTextarea")})):(e="Spreadsheet does not contain valid points or required columns.",n?ne("Spreadsheet does not contain valid points or required columns.",!1,"addPointsInput"):ne(e+=ye))):(e="Spreadsheet does not contain valid points or required columns.",n?ne("Spreadsheet does not contain valid points or required columns.",!1,"addPointsInput"):ne(e+=ye))}else A?ne("Spreadsheet is empty. Review instructions above.",!1,"areas"===z?"counties"===q?"addCountiesAreasInput":"addZipsAreasInput":"addPointsInput"):ne("Spreadsheet is empty. See mapBuilder instructions below the map.")}).catch(function(e){let t;400===e?t="Sheet cannot be accessed. Map data is read from the first sheet tab. Also, if you uploaded an Excel file, then in Google Sheets you must choose File, Save as Google Sheets, then follow steps 2 - 4 again.":403===e?t='Cannot access your spreadsheet; make sure it is shared with "Anyone with the link" permissions as shown in step 2 in the mapBuilder tool below the map (hover over the "?" in step 2 for detailed instructions)':404===e&&(t='Spreadsheet does not exist; be sure and follow steps in the mapBuilder tool below the map (hover over the "?" in each step for detailed instructions)'),A?ne(t=t.replace(" in the mapBuilder tool below the map",""),!1,"areas"===z?"counties"===q?"addCountiesAreasInput":"addZipsAreasInput":"addPointsInput"):ne(t),"areas"===z?ee.custareas.vis_b=!1:ee.custpoints.vis_b=!1,Q.labels="",R("labelsCheckbox").checked=!1,Q.in.lablay=b()})}function Dt(e,t,s){var n;R(e)?s():((n=document.createElement("script")).id=e,n.src=t,n.onload=function(){s()},document.head.appendChild(n))}function Ft(v,b){zt(),Dt("geojsonScript",E,function(){var e=v,t=b,s=H?1e4:100,e=(new DOMParser).parseFromString(e,"application/xml"),n=toGeoJSON.kml(e),e=(S=!1,0<P.length?JSON.stringify(P):"[]"),a=0<w.length?JSON.stringify(w):"[]",i=(P=[],w=[],0),o=0,r=0,l=["icon","name","styleUrl","styleHash","styleMapHash","stroke","stroke-opacity","stroke-width"];0<n.features.length&&(c=n.features[0].properties,Object.keys(c).forEach(function(e){-1===l.indexOf(e)&&(ue.push(e),me.push(e))}));for(var d,c,u=0;u<n.features.length;u++){var p,m=n.features[u];if("Point"===m.geometry.type)d=(e=>{var t,s,n=Ge;return e.properties.styleUrl&&6<=e.properties.styleUrl.length&&(t="#"+e.properties.styleUrl.slice(-6),s=/^#[0-9A-F]{6}$/i.test(t),n=s||(t="#"+e.properties.styleHash.slice(-8).replace("-","").substring(0,6),s=/^#[0-9A-F]{6}$/i.test(t))?t:7<(e="#"+t.replace(/[^0-9A-F]/gi,"")).length?e.substring(0,7):Ge),n})(m),P[r]=[m.geometry.coordinates[0],m.geometry.coordinates[1],d,m.properties.name,r],0<ue.length&&(p=me.map(function(e){return m.properties[e]||""}),ge.push(p)),i++,r++;else if("LineString"===m.geometry.type){d="#ff0000";for(var h=[],g=0;g<m.geometry.coordinates.length;g++){if(!H&&999<g){Pt(s,!0,!0);break}var f=m.geometry.coordinates[g];h.push([f[0],f[1]])}w[o]=[h,d,m.properties.name],i++,o++}if(s<i){Pt(s,!0);break}}0===i?(c="KML file does not contain points (with latitude and longitude) nor lines; note that polygons are not supported",t?ne(c,!1,"addPointsKMLInput"):ne(c)):(t&&N.scrollIntoView(),S=!0,e===JSON.stringify(P)&&a===JSON.stringify(w)?(ae("progressfloatlabel",""),0<P.length&&ts(Ce,P,2,3,"points"),0<w.length&&ts("",w,1,2,"drawings")):(At(),0<o&&!H&&!x&&ne(A+" can save KML Lines as editable drawings for use in saved maps, and also see length measurements. <a href='https://www.randymajors.org/access-ad-free-fullscreen-tools#compare' target='_blank'>Learn More</a> or <a href='https://www.randymajors.org/product/ad-free-fullscreen-tools-monthly-contribution' target='_blank' rel='noopener'>Join</a>.")))})}function Bt(e,s=!1){x=!1,zt(),ae("progressfloatlabel","Mapping kml file...");fetch("https://www.googleapis.com/drive/v3/files/"+e+"?k"+t+"aSyAmzomUhRQQE6OlqJEs_ptj4jmAdKe4Qhc&alt=media").then(function(e){var t;200!==e.status?404!==e.status&&403!==e.status||(t='KML file cannot be accessed. Ensure the file is Shared with "Anyone with a link" permissions.',s?ne(t,!1,"addPointsKMLInput"):ne(t),ee.custpoints.vis_b=!1):e.headers.get("Content-Type").includes("application/vnd.google-earth.kmz")?Dt("jszipScript",a,function(){e.blob().then(function(e){JSZip.loadAsync(e).then(function(e){var t=Object.keys(e.files).find(e=>e.endsWith(".kml"));if(t)return e.files[t].async("string");e="KML file not found in KMZ",s?ne(e,!1,"addPointsKMLInput"):ne(e)}).then(function(e){jt(e,s)}).catch(function(e){e="Error processing KMZ file: "+e.message;s?ne(e,!1,"addPointsKMLInput"):ne(e)})})}):e.text().then(function(e){jt(e,s)}).catch(function(e){var t="Cannot access your file. It must be shared in Google Drive with Anyone with the link permission.";s?ne(t,!1,"addPointsKMLInput"):ne(t)})})}function jt(e,s){var t=(new DOMParser).parseFromString(e,"application/xml").querySelector("NetworkLink > Link > href");t?(t=t.textContent,fetch(t).then(e=>{var t=e.headers.get("Content-Type");return t&&t.includes("application/vnd.google-earth.kmz")?e.blob().then(e=>new Promise((s,n)=>{Dt("jszipScript",a,function(){JSZip.loadAsync(e).then(e=>{var t=Object.keys(e.files).find(e=>e.endsWith(".kml"));t?e.files[t].async("string").then(s):n("KML file not found in KMZ from NetworkLink")}).catch(n)})})):e.text()}).then(e=>{Ft(e,s)}).catch(e=>{var t="Error processing linked KML/KMZ file. If you are using a KMZ link in Google My Maps, you need to share the KMZ link and share the map (hover over the '?' in the mapBuilder tool below the map for detailed instructions).";s?ne(t.replace(" in the mapBuilder tool below the map",""),!1,"addPointsKMLInput"):ne(t)})):Ft(e,s)}function Ut(){rt=!1,R("doneprintingbutton").classList.add("rlmhidden"),R("printnowbutton").classList.add("rlmhidden"),g?.classList.remove("rlmhidden"),R("layercontrolOuter")?.classList.remove("rlmhidden"),R("hcdatecontrolOuter")?.classList.remove("rlmhidden"),R("urcontOuter")?.classList.remove("rlmhidden"),ae("getstartedlabel",""),Q.title&&R("midcontOuter")?.classList.remove("sphidden"),ys(),W.postMessage("doneprintingclicked",z)}function Rt(e){if(""===e||void 0===e)return"";let t=/(\bhttps?:\/\/|\bwww\.|\b[a-zA-Z0-9-]+(\.[a-zA-Z]{2,}){1,2})[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]/gi;return e.split(/\s+/).map(e=>e.includes("@")?e:e.replace(t,e=>{e=(e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e).replace(/^http:\/\//i,"https://");return'<a href="'+encodeURI(e)+'" target="_blank" rel="noopener nofollow">'+e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")+"</a>"})).join(" ")}function Ht(){Q.drawings||St()}function Zt(){R("createmapform").click(),R("module-createdrawing").classList.add("rlmhovercolor"),R("module-createdrawing-inner").classList.remove("rlmhidden"),Me.classList.add("rlmhidden"),Te.classList.remove("rlmhidden"),Te.classList.remove("rlmhidden")}function Vt(){Ye=!0,Q.labels&&Cs("drawbuttons")}function Kt(n="",r=!1){let l;if(l=(n||Q.drawings).split("~"),Q.drawings){let s=[];!function e(o){if(o>=l.length)Promise.allSettled(s).then(e=>{n||(e=e.filter(e=>e.value&&e.value.success).map(e=>e.value.name),Q.drawings=e.join("~"),te(!1,!1,!1));{let e=Array.from(U.querySelectorAll(".drawinglegendrow")),t=(e.sort(function(e,t){return e=e.querySelector("span").textContent,t=t.querySelector("span").textContent,e.localeCompare(t)}),U.children[0]);e.forEach(function(e){t=U.insertBefore(e,t.nextSibling)})}yt("push"),St()});else{let i=l[o];var t="/wp-json/rmrhrest/v1/geteedrawingjson?drawing="+i,t=fetch(t,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:new Headers({"Content-Type":"application/json;charset=UTF-8"})}).then(e=>200!==e.status?{success:!1}:e.json().then(e=>{var t=o===l.length-1;let s=!1;t&&(s=!!r||(e=>!(Q.in.cust||Q.cx||1===(e.match(/Point/g)||[]).length&&1===(e.match(/coordinates/g)||[]).length))(e));var n=i.split("_")[0],a=ds("#"+e.substring(1,e.indexOf("|"))),t={type:"drawingJSONToLoad",drawname:n,lastdraw:t,center:s,data:JSON.parse(e)};return W.postMessage(t,z),ss(a,n,"drawings","drawinglegendrow"),{success:!0,name:i}})).catch(e=>({success:!1}));s.push(t),setTimeout(()=>e(o+1),25)}}(0)}}function Yt(t,e,s=void 0){document.querySelector(t).classList.add("rlmshowactivated"),document.querySelectorAll(".rlmContOuter").forEach(e=>{e.querySelector("span"+t)&&(e.querySelectorAll(".rlmContDarkFade").forEach(e=>{e.querySelector("span:not("+t+")")?e.classList.add("rlmshowfaded"):e.classList.remove("rlmshowfaded")}),e.querySelectorAll(".mod-sub-intro").forEach(e=>{e.classList.add("rlmhidden")}))}),document.querySelector(e).classList.remove("rlmshowactivated"),s&&document.querySelector(s).classList.remove("rlmshowactivated")}function Gt(e){for(var t,s,n=/\//gi,a=[];t=n.exec(e);)a.push(t.index);return 1<=a.length?(s=e.substring(a[a.length-2]+1,a[a.length-1]),"pubhtml"===e.slice(-7)?("zips"===ee.custareas.qpvis_v?(R("addZipsAreasInput").value="",ne("This is the wrong URL. Please see step 3 above. Copy the URL from the browser address bar, NOT the link from the Publish to the Web box.",!1,"addZipsAreasInput")):"counties"===ee.custareas.qpvis_v?(R("addCountiesAreasInput").value="",ne("This is the wrong URL. Please see step 3 above. Copy the URL from the browser address bar, NOT the link from the Publish to the Web box.",!1,"addCountiesAreasInput")):"sheet"===ee.custpoints.qpvis_v&&(R("addPointsInput").value="",ne("This is the wrong URL. Please see step 3 above. Copy the URL from the browser address bar, NOT the link from the Publish to the Web box.",!1,"addPointsInput")),""):"d"===s?(R("addPointsKMLInput").value="",ne("This is the wrong link. Please instructions above. Copy the link from the exported KML file Share box, NOT the link from the Google My Maps Share box.",!1,"addPointsKMLInput"),""):(zt(),s)):e}function Jt(){var e,t;Q.in.init&&location.hash||(J&&!H&&pt?(e=pt.getBoundingClientRect()).bottom<65&&(t=window.scrollY+e.bottom-65,setTimeout(function(){window.scrollTo({top:t})},250)):N.getBoundingClientRect().top<0&&setTimeout(function(){N.scrollIntoView()},250))}function ae(e,t,s){var n=document.getElementById(e);n&&(n.innerHTML=t,"getstartedlabel"===e||"messagefloatlabel"===e||e.includes("errorfloatlabel")||"progressfloatlabel"===e)&&(""===t?n.classList.add("rlmhidden"):(n.classList.remove("rlmhidden"),(e.includes("errorfloatlabel")||"getstartedlabel"===e)&&"#aboutmappingaddresses"!==location.hash&&(t&&!t.startsWith("For proper functionality")&&n.scrollIntoView({block:"start"}),"getstartedlabel"===e||e.includes("errorfloatlabel"))&&((t=document.createElement("span")).textContent="✕",t.ariaLabel="Close",t.title="Close",t.classList.add("rlmsmallclosebutton"),t.addEventListener("click",()=>{ae("errorfloatlabel",""),ae("eeerrorfloatlabel",""),ae("getstartedlabel",""),De.classList.remove("rlmmessagelarge")}),n.appendChild(t))),s)&&setTimeout(function(){ae("messagefloatlabel","")},s)}function Xt(e){var t=R("rlmmeasmiddle");t&&(t.style.backgroundColor="#"+e)}function $t(){var e,t=R("urcontOuter");t&&(e=parseInt(window.getComputedStyle(U).getPropertyValue("bottom"),10)||22,t=N.offsetHeight-(t.offsetTop+t.offsetHeight)-e,U.style.maxHeight=t-6+"px")}function Qt(){$t();var e=document.createElement("span");if(e.id="mapLegendCloseBtn",e.classList.add("rlmsmallclosebutton"),e.textContent="✖",U.appendChild(e),R("mapLegendCloseBtn").addEventListener("click",function(){var e;"✖"===(e=R("mapLegendCloseBtn")).textContent?(e.textContent="▲",U.style.top="",U.style.left="",U.style.height="",U.style.width="",U.classList.add("rlmminimized"),R("moveHandle").classList.add("rlmhidden"),R("resizeHandle").classList.add("rlmhidden"),R("changeFontButton").classList.add("rlmhidden")):($t(),U.style.maxWidth="",e.textContent="✖",U.classList.remove("rlmminimized"),R("moveHandle").classList.remove("rlmhidden"),R("resizeHandle").classList.remove("rlmhidden"),R("changeFontButton").classList.remove("rlmhidden"))}),J)return;e=document.createElement("div");e.id="changeFontButton",e.textContent="Aa",U.appendChild(e);let t=16;U.style.fontSize=t+"px",e.addEventListener("click",function(){t=8<t?t-1:16,U.style.fontSize=t+"px",Q.legfs=t,yt("apply"),es(void 0,t)});var e=document.createElement("div"),s=(e.id="resizeHandle",U.appendChild(e),e.addEventListener("mouseover",function(){U.style.border="1px solid #0080FF"}),e.addEventListener("mouseout",function(){U.style.border=""}),document.createElement("div"));s.id="moveHandle",s.textContent="✥",U.appendChild(s),s.addEventListener("mouseover",function(){U.style.border="1px solid #0080FF"}),s.addEventListener("mouseout",function(){U.style.border=""});let n=!1,a,i;function o(e){var t;n&&(U.style.border="1px solid #0080FF",t=e.clientX-d,e=e.clientY-c,U.style.left=a+t+"px",U.style.top=i+e+"px")}function r(e){n&&(n=!1,U.style.border="",R("mapLegendCloseBtn").classList.remove("rlmhidden"),R("resizeHandle").classList.remove("rlmhidden"),v(U,N),document.body.style.cursor="auto",U.style.userSelect="auto",U.releasePointerCapture(e.pointerId),U.removeEventListener("pointermove",o),U.removeEventListener("pointerup",r))}s.addEventListener("pointerdown",e=>{n=!0,R("mapLegendCloseBtn").classList.add("rlmhidden"),R("resizeHandle").classList.add("rlmhidden"),U.style.width=U.offsetWidth+"px",U.style.height=U.offsetHeight+1+"px",d=e.clientX,c=e.clientY,a=U.offsetLeft,i=U.offsetTop,document.body.style.cursor="move",U.style.userSelect="none",U.setPointerCapture(e.pointerId),U.addEventListener("pointermove",o),U.addEventListener("pointerup",r),e.preventDefault()});let l=!1,d,c,u,p,m,h;function g(e){var t;l&&(U.style.borderTop="1px solid #0080FF",t=e.clientX-d,e=e.clientY-c,U.style.width=u-t+"px",U.style.height=p-e+"px",U.style.top=m+e+"px",U.style.left=h+t+"px")}function f(e){l=!1,U.style.border="",R("mapLegendCloseBtn").classList.remove("rlmhidden"),R("moveHandle").classList.remove("rlmhidden"),document.body.style.cursor="auto",U.style.userSelect="auto",v(U,N),U.releasePointerCapture(e.pointerId),U.removeEventListener("pointermove",g),U.removeEventListener("pointerup",f)}function v(e,t){var s=e.getBoundingClientRect(),t=t.getBoundingClientRect();s.left<t.left&&(e.style.left="0px"),s.top<t.top&&(e.style.top="0px"),s.right>t.right&&(e.style.left=t.right-s.width-t.left+"px"),s.bottom>t.bottom&&(e.style.top=t.bottom-s.height-t.top+"px")}e.addEventListener("pointerdown",e=>{l=!0,R("mapLegendCloseBtn").classList.add("rlmhidden"),R("moveHandle").classList.add("rlmhidden"),d=e.clientX,c=e.clientY,U.style.width=U.offsetWidth+"px",U.style.height=U.offsetHeight+1+"px",u=U.offsetWidth,p=U.offsetHeight+1,m=U.offsetTop,h=U.offsetLeft,document.body.style.cursor="nwse-resize",U.style.maxHeight="none",U.style.maxWidth="none",U.style.userSelect="none",U.setPointerCapture(e.pointerId),U.addEventListener("pointermove",g),U.addEventListener("pointerup",f),e.preventDefault()})}function es(e=0,t=0){var s=U.querySelectorAll(".colorbox"),n=U.querySelectorAll(".legendtitle");t&&14<t||e&&e<8?(s.forEach(e=>{e.classList.add("colorbox8"),e.classList.remove("colorbox7")}),n.forEach(e=>{e.classList.add("legendTitle17"),e.classList.remove("legendTitle15")})):t&&11<t||e&&e<=13&&8<=e?(s.forEach(e=>{e.classList.add("colorbox7"),e.classList.remove("colorbox8")}),n.forEach(e=>{e.classList.add("legendTitle15"),e.classList.remove("legendTitle17")})):(s.forEach(e=>e.classList.remove("colorbox7","colorbox8")),n.forEach(e=>e.classList.remove("legendTitle15","legendTitle17")))}function ts(e,t,s,n,a){if(!Q.hidelegend){var i=((e,t,s)=>{for(var n={},a=[],i=0;i<e.length;i++){var o=e[i][t],r=e[i][s];o&&r&&!n[o+r]&&(n[o+r]=!0,a.push([o,r]))}return a.sort(function(e,t){function s(e){e=e.match(/^(\d+|\D+)?(?:-| - |:|: )?(.*)$/);return e?{prefix:e[1]||"",numeric:parseFloat((e[2]||"").replace(/[^0-9.]/g,""))}:{prefix:"",numeric:NaN}}var n=s(e[1]),a=s(t[1]),i=!isNaN(parseInt(n.prefix,10)),o=!isNaN(parseInt(a.prefix,10));if(i&&o){var r=parseInt(n.prefix,10),l=parseInt(a.prefix,10);if(r!==l)return r-l}else{if(i||o)return i?-1:1;r=n.prefix.localeCompare(a.prefix);if(0!==r)return r}return isNaN(n.numeric)||isNaN(a.numeric)?e[1].localeCompare(t[1]):n.numeric-a.numeric}),a})(t,s,n);if(e||0!==i.length){0===U.children.length&&Qt(),Q.hidelegend||((t=document.createElement("div")).style.height="5px",R("mapLegend").appendChild(t));var o=Math.min(i.length,200);s=e,Q.hidelegend||((n=document.createElement("div")).textContent=s,n.className="legendtitle",R("mapLegend").appendChild(n));for(let e=0;e<o;e++)ss(ds(i[e][0]),i[e][1],a);200===o&&ss("#ffffff","...")}}}function ss(t,s,n="",a=""){if(!Q.hidelegend){0===U.children.length&&Qt();var i=document.createElement("div"),a=(i.classList.add("legendrow"),a&&i.classList.add(a),"drawinglegendrow"===a&&(i.classList.add("rlmshowpointer"),i.addEventListener("click",function(){W.postMessage("cdwg:"+s,z),ae("drawinglayerlabel",s)})),document.createElement("div"));a.className="colorbox";let e="";e="areas"===n?"94":"points"===n?(a.classList.add("colorboxrnd"),"de"):(a.classList.add("colorboxdraw"),"b3"),a.style.backgroundColor=t+e;n=document.createElement("span");n.textContent=s.replace(/\+/g," "),i.appendChild(a),i.appendChild(n),R("mapLegend").appendChild(i),ns()}}function ns(){if(!J){let e;var t=U.children.length;e=Q.legfs||(e=10,t<=20?e+=6/96*(100-t):e-=6/96*(t-20),Math.max(8,Math.min(e,14))),U.style.fontSize=e+"px",es(t,void 0)}}function as(e,t){var s=U.querySelectorAll("."+e+" span");for(let e=0;e<s.length;e++)if(s[e].textContent===t)return s[e].parentNode.remove(),void ns()}function is(){var e;U.querySelectorAll(":not(#mapLegendCloseBtn):not(#moveHandle):not(#resizeHandle):not(#changeFontButton):not(.drawinglegendrow):not(.drawinglegendrow *)").forEach(function(e){e.remove()}),3===U.children.length&&((e=R("mapLegendCloseBtn"))&&e.remove(),e=R("resizeHandle"))&&e.remove()}function os(e,t=!1){let s={enableHighAccuracy:!0,maximumAge:0,timeout:1e4};e?tt=navigator.geolocation.watchPosition(rs,ls,s):"permissions"in navigator&&"query"in navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(function(e){"granted"===e.state?navigator.geolocation.getCurrentPosition(function(e){rs(e,t)},ls,s):"prompt"===e.state?navigator.geolocation.getCurrentPosition(function(e){rs(e,t)},ls,s):"denied"===e.state&&ne("Location access denied. Using approximate location.")}).catch(ls):navigator.geolocation.getCurrentPosition(function(e){rs(e,t)},ls,s)}function rs(e,t){y.style.color="#00b300",Q.x=parseFloat(e.coords.longitude.toFixed(7)),Q.y=parseFloat(e.coords.latitude.toFixed(7)),tt?(Q.in.speed=e.coords.speed,Q.in.ts=e.timestamp):(Q.cx=Q.x,Q.cy=Q.y,Q.in.speed=0,Q.in.ts=0),Q.in.init&&!t||(te(!1,!1,!1),W.postMessage("geoSuccessV2:",z))}function ls(e){switch(e.code){case e.PERMISSION_DENIED:ne("Your browser settings are set to not share your location; using approximate location.");break;case e.POSITION_UNAVAILABLE:ne("Location information unavailable. Using approximate location.");break;case e.TIMEOUT:ne("Request to get location timed out; you may refresh the page. Using approximate location.");break;case e.UNKNOWN_ERROR:ne("An unknown error occurred trying to get location. Using approximate location.");break;default:ne(e)}Q.cx=Q.in.ipx,Q.cy=Q.in.ipy,Q.x=Q.cx,Q.y=Q.cy,te(!0,!0,!1)}function ie(e,t=void 0){return t&&e.length>t?e.replace(/[\u200B-\u200D\uFEFF]/g,"").trim().substring(0,t):e.replace(/[\u200B-\u200D\uFEFF]/g,"").trim()}function ds(e){if(void 0===e||""===e)return"#000000";/^#?([0-9A-F]{8})$/i.test(e)?e="#"+e.replace(/^#/,"").slice(0,6):/^([0-9A-F]{6})$/i.test(e)&&(e="#"+e);var t=document.createElement("canvas").getContext("2d");return t.fillStyle=e,"rgba(0, 0, 0, 0)"!==t.fillStyle&&"#000000"!==t.fillStyle||(t.fillStyle="#"+e.replace(/^#/,""),"rgba(0, 0, 0, 0)"!==t.fillStyle&&"#000000"!==t.fillStyle)||(t.fillStyle=e.replace(/^#/,"")),t.fillStyle}function oe(e){e=e.getBoundingClientRect();return 0<=e.top&&0<=e.left&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function cs(e){return decodeURIComponent(e.replace(/\+/g," "))}function us(e){return e.toString().replace(/%2C/gi,",").replace(/%2B/gi,"+").replace(/ /gi,"+").replace(/#/gi,"")}function ps(e,t){let s=Date.now();if(i[t]||(i[t]=0),o[t]||(o[t]=[]),r[t]||(r[t]=0),s-i[t]<1e3*e)return r[t]++,6<=r[t]&&(l++,G.cbc=r[t],G.ce=t,G.lst&&delete G.lst,hs("bc"),r[t]=0),ne("Error: Try again in a moment."),setTimeout(function(){ne("")},3500),1;i[t]=s,o[t].push(s),o[t]=o[t].filter(e=>s-e<6e4);var e=Math.floor(60/e),n=o[t].length;.75*e<n&&(G.cec=n,G.ce=t,hs("el"),o[t]=[])}function ms(){N.innerHTML="";var e=document.createElement("div");e.className="rlmwarningdiv",e.innerHTML=s,N.parentNode.insertBefore(e,N),N.parentNode.removeChild(N),et.postMessage("sbaiaw"),$e&&clearTimeout($e),Qe&&clearInterval(Qe)}function hs(e){if(G.afr=e,G.sd=Math.floor((Date.now()-n)/1e3),G.zpg=window.location.href,G.zic=H,G.zee=Q.in.hscomp,G.zua=navigator.userAgent,G.zre=document.referrer||"",!(-1<G.zua.indexOf(String.fromCharCode(108,111,117,100,102,108,97,114))))for(var t in(G.wd||G.wdt||"tt"===G.fr||"1"===G.hct||1<l||5<G.spc&&G.spcat<10)&&(G.sba=!(H||-1!==G.zpg.indexOf("#MCMP"))),G.sba&&ms(),navigator.sendBeacon("/wp-json/rmrhrest/v1/ametrics","a14: "+(e=G,Object.entries(e).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>e+":"+t).join(", "))),"vx"===G.fr&&(location.href="https://"+location.host+"/my-account?vxse"),G)delete G[t]}function gs(s,n){let a=null,i=!0,o=0;return function(e,t){o+=e;t=document.getElementById(t);!i&&t&&(t.value="waiting..."),i&&(s(e),i=!1,o=0),clearTimeout(a),a=setTimeout(()=>{0!==o&&s(o),i=!0,o=0,a=null},n)}}function fs(e){let s=document.querySelector(e);s&&setTimeout(function(){s.classList.remove("rlmflashel"),requestAnimationFrame(function(){s.classList.add("rlmflashel")}),s.addEventListener("animationend",function e(t){"rlmFlash"===t.animationName&&(s.classList.remove("rlmflashel"),s.removeEventListener("animationend",e))})},800)}function vs(){try{return window.localStorage&&"object"==typeof window.localStorage}catch(e){}}function bs(t,e,s){if(!vs()){if("check"===e)return 1;if("set"===e||"clear"===e)return}var n,t="msg_"+t;if("check"===e)return null!==(n=sessionStorage.getItem(t))&&parseInt(n)>=s;if("set"===e){let e=sessionStorage.getItem(t);null===e&&(e=0),e=parseInt(e)+1,sessionStorage.setItem(t,e.toString())}"clear"===e&&sessionStorage.removeItem(t)}function ws(e,t,s){if(!vs()){if("check"===t)return 1;if("increment"===t||"get"===t)return s}var n="try_"+e;let a=localStorage.getItem(n);a=null!==a?parseInt(a):0;var i=c[e]||0;return a<i&&(a=s,localStorage.setItem(n,a.toString()),hs("tt")),c[e]=a,"check"===t?a>=s:("increment"===t&&(a++,localStorage.setItem(n,a.toString()),c[e]=a),"get"===t&&a)}function ys(){ht||document.querySelectorAll(".rlmmaplabels").forEach(e=>{e.remove()})}function Ls(e,t){return!(e.top>t.bottom||e.right<t.left||e.bottom<t.top||e.left>t.right)}function Cs(e){let r;"drawbuttons"===e?r=[{name:"drawBtns",x:Y,y:K,width:294,height:44}]:"searchdd"===e?r=[{name:"searchdd",x:Y,y:K,width:670,height:190}]:"savedrawingform"!==e&&"hidebuffervalue"!==e||(r=[{name:"zoomMoved",x:Y,y:K,width:44,height:65},{name:"saveDrawActive",x:Y,y:Ze-170,width:316,height:134},{name:"extDrawContAndBuff",x:Y,y:K,width:Re,height:44},{name:"areaMeas",x:He-370,y:Ze-43,width:370,height:43}]),document.querySelectorAll(".rlmmaplabels")?.forEach(t=>{var e=t.getBoundingClientRect(),s=e.top+parseInt(window.scrollY,10),n=e.right+parseInt(window.scrollX,10),a=e.bottom+parseInt(window.scrollY,10),e=e.left+parseInt(window.scrollX,10),i=new DOMRect(e,s,n-e,a-s);for(let e=0;e<r.length;e++){var o=r[e];if(Ls(i,new DOMRect(o.x,o.y,o.width,o.height))){t.remove();break}}})}function ks(){if(!ps(5,"apB")){for(var e in L)L.hasOwnProperty(e)&&("object"!=typeof L[e]||null===L[e]||L[e]instanceof Array?Q[e]=L[e]:(Q[e]||(Q[e]={}),Object.assign(Q[e],L[e])));for(var t in C)C.hasOwnProperty(t)&&(ee[t]||(ee[t]={}),Object.assign(ee[t],C[t]));if(ft(),m(),!Q.in.cust&&!Q.drawings||!Q.loc&&R("useXYCheckbox").checked||["x","y","cx","cy","zoom"].forEach(e=>{Q[e]=0}),ne(""),zt(),ce=[],ue=[],pe=[],me=[],ae("detailslabel",""),ae("detailslabelpt",""),d)yt("new");else{yt("apply"),m(),Q.in.lablay=b(),U.classList.toggle("rlmhidden",Q.hidelegend),te(!1,!1,!0),is();for(var s=document.querySelector("#mapdiv").querySelectorAll(".rlmlabel"),n=0;n<s.length;n++){var a=s[n];a.innerHTML="","getstartedlabel"!==a.id&&"messagefloatlabel"!==a.id&&!a.id.includes("errorfloatlabel")&&"progressfloatlabel"!==a.id||a.classList.add("rlmhidden")}R("selModeCont").classList.add("rlmhidden"),R("drawModeCont").classList.add("rlmhidden"),Ye=!1,R("mainBtnsCont").classList.remove("rlmhidden");var i=!(R("radiusInput").value="");ee.custareas.vis_b&&Wt(ee.custareas.qpdat_v,"areas",ee.custareas.qpvis_v,!(i=!1)),ee.custpoints.vis_b&&(i=!1,"sheet"===ee.custpoints.qpvis_v?Wt(ee.custpoints.qpdat_v,"points",null,!0):"kml"===ee.custpoints.qpvis_v&&Bt(ee.custpoints.qpdat_v,!0)),i&&setTimeout(function(){N.scrollIntoView()},250),Q.loc&&os(!1,!0),v(),Se?.querySelectorAll(".applynudge")?.forEach(e=>{e.classList.remove("rlmhiddenvis")})}}}function xs(e){M&&(e=R(e))&&e.nextSibling!==M&&(M.classList.remove("rlmhidden"),e.parentNode.insertBefore(M,e.nextSibling),oe(R("applybuttonsmall"))||M?.scrollIntoView({block:"end"}),!$.startsWith("CU"))&&R("moduletitle-addtitle-open").classList.contains("rlmhidden")&&h.click()}function Ss(e){if(!isNaN(e[0]))return!1;var t=e.filter(e=>e);if(t.shift(),0<t.length%2)return!1;for(var s=/^[-+]?(\d+|\d+\.\d*|\d*\.\d+)$/,n=/[A-Za-z]+/,a=t.length/2,i=!0,o=0;o<a;o++)if(s.test(t[o])!==s.test(t[o+a])||n.test(t[o])!==n.test(t[o+a])){i=!1;break}return i}document.querySelector(".rlmeeheader")?.addEventListener("click",function(t){t=t.target;if(t&&t.classList.contains("census-link")){var s=t.getAttribute("data-census-geoid"),t=t.closest(".rlmlabel");let e="";t&&(t=t.innerText,e=(t.includes(": ")?t.split(": ")[1]:t).trim()),(async(e,t)=>{let s=document.getElementById("census-subtitle"),n=0,a="Fetching Census Bureau Statistics for ",i=["...","...still fetching","...a little longer","...compiling statistics","...nearly complete"];s.textContent=a+t+i[0];var o=setInterval(function(){++n<i.length&&(s.textContent=a+t+i[n])},4e3);document.querySelectorAll(".census-value").forEach(e=>{e.classList.add("loading-placeholder"),e.textContent=""});try{var r=await(await fetch("https://data.census.gov/api/profile/content/highlights?g="+e)).json(),l=(clearInterval(o),r.selectedProfile.label?r.selectedProfile.label.replace("ZCTA5 ","ZIP Code "):"the selected area");s.textContent="Census Bureau Statistics for "+l,(o=>{let r=document.getElementById("census-stats-container");fs("#census-stats-container"),o.highlights.forEach(e=>{var t,s,n,a,i=r.querySelector('[data-topic="'+e.topic+'"]');i&&((t=i.querySelector(".census-value")).classList.remove("loading-placeholder"),s=(e=>{var t=e.value;return isNaN(t)||null==t?"N/A":"dollar"===e.format?"$"+Number(t).toLocaleString():"number"===e.format?Number(t).toLocaleString():"percent"===e.format?t+"%":t})(e),t.textContent=s,(t=i.querySelector(".census-source")).innerHTML="",s=document.createElement("a"),"https:"===(i=new URL(e.sourceLink)).protocol&&i.hostname.endsWith("census.gov")?s.href=i.href:s.href="#",s.target="_blank",s.rel="noreferrer noopener nofollow",s.textContent=e.source,t.appendChild(s),e.tableId)&&((i=document.createElement("span")).classList.add("census-pipe-separator"),i.textContent=" | ",n=document.createElement("a"),[e,a]=e.tableId.split("."),n.href=e&&a?"https://data.census.gov/table/"+encodeURIComponent(e)+"."+encodeURIComponent(a)+"?g="+encodeURIComponent(o.selectedProfile.params.g):"#",n.target="_blank",s.rel="noreferrer noopener nofollow",n.textContent=a,t.appendChild(i),t.appendChild(n))})})(r)}catch(e){console.log("CenErr:",e),s.textContent="Census data is currently unavailable.",clearInterval(o)}})(s,e),document.getElementById("census-jump").scrollIntoView({behavior:"smooth"})}}),Array.prototype.removeDuplicates=function(){return this.filter(function(e,t,s){return s.indexOf(e)===t})};var Es=/(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))([•º°]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))([•º°]?)[\s]*(EAST|WEST|[EW])?/i,Is=/(NORTH|SOUTH|[NS])?[\ \t]*([+-]?[0-8]?[0-9])[\ \t]*(\.)[\ \t]*([0-5]?[0-9])[\ \t]*(\.)?[\ \t]*((?:[0-5]?[0-9])(?:\.\d{1,3})?)?(NORTH|SOUTH|[NS])?(?:[\ \t]*[,/;][\ \t]*|[\ \t]*)(EAST|WEST|[EW])?[\ \t]*([+-]?[0-1]?[0-9]?[0-9])[\ \t]*(\.)[\ \t]*([0-5]?[0-9])[\ \t]*(\.)?[\ \t]*((?:[0-5]?[0-9])(?:\.\d{1,3})?)?(EAST|WEST|[EW])?/i,_s=/(NORTH|SOUTH|[NS])?[\ \t]*([+-]?[0-8]?[0-9])[\ \t]*(D(?:EG)?(?:REES)?)[\ \t]*([0-5]?[0-9])[\ \t]*(M(?:IN)?(?:UTES)?)[\ \t]*((?:[0-5]?[0-9])(?:\.\d{1,3})?)?(S(?:EC)?(?:ONDS)?)?[\ \t]*(NORTH|SOUTH|[NS])?(?:[\ \t]*[,/;][\ \t]*|[\ \t]*)(EAST|WEST|[EW])?[\ \t]*([+-]?[0-1]?[0-9]?[0-9])[\ \t]*(D(?:EG)?(?:REES)?)[\ \t]*([0-5]?[0-9])[\ \t]*(M(?:IN)?(?:UTES)?)[\ \t]*((?:[0-5]?[0-9])(?:\.\d{1,3})?)?(S(?:EC)?(?:ONDS)?)[\ \t]*(EAST|WEST|[EW])?/i,Ms=/(NORTH|SOUTH|[NS])?[\ \t]*([+-]?[0-8]?[0-9])[\ \t]*([•º°\.:]|D(?:EG)?(?:REES)?)?[\ \t]*,?([0-5]?[0-9](?:\.\d{1,})?)?[\ \t]*(['′´’\.:]|M(?:IN)?(?:UTES)?)?[\ \t]*,?((?:[0-5]?[0-9])(?:\.\d{1,3})?)?[\ \t]*(''|′′|’’|´´|["″”\.])?[\ \t]*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?[\ \t]*([+-]?[0-1]?[0-9]?[0-9])[\ \t]*([•º°\.:]|D(?:EG)?(?:REES)?)?[\ \t]*,?([0-5]?[0-9](?:\.\d{1,})?)?[\ \t]*(['′´’\.:]|M(?:IN)?(?:UTES)?)?[\ \t]*,?((?:[0-5]?[0-9])(?:\.\d{1,3})?)?[\ \t]*(''|′′|´´|’’|["″”\.])?[\ \t]*(EAST|WEST|[EW])?/i;function Ts(o,e,t){function s(){var e,t,s,n,a,i=o.getBoundingClientRect();0===i.width&&0===i.height?u(!1):(a=r.getBoundingClientRect(),e=window.scrollY+i.bottom+8,t=window.scrollX+i.left+i.width/2-a.width/2,s="50%",n="up",window.innerHeight+window.scrollY<e+a.height&&(e=window.scrollY+i.top-a.height-12,n="down"),t<0?t=10:t+a.width>window.innerWidth+window.scrollX&&(t=window.innerWidth+window.scrollX-a.width-10),s=i.left+i.width/2-t+"px","number"==typeof r._baseTop&&"number"==typeof r._baseLeft?(a=t-r._baseLeft,i=e-r._baseTop,r.style.transform="translate("+a+"px,"+i+"px)"):(r.style.top=e+"px",r.style.left=t+"px"),"down"===n?(r.style.setProperty("--pointer-top","100%"),r.style.setProperty("--pointer-left",s),r.style.setProperty("--pointer-transform","translateX(-50%) rotate(180deg)")):(r.style.setProperty("--pointer-top","-8px"),r.style.setProperty("--pointer-left",s),r.style.setProperty("--pointer-transform","translateX(-50%)")))}var r=document.createElement("div");r.classList.add("highlight-card"),r.classList.add("rlmhiddenvis"),r.innerHTML="<p>"+e+'</p><button class="dismiss-highlight">Got it!</button>',document.body.appendChild(r),requestAnimationFrame(function(){s(),r._baseTop=parseFloat(r.style.top)||0,r._baseLeft=parseFloat(r.style.left)||0,r.style.transform="translate(0px, 0px)",r.classList.remove("rlmhiddenvis")});n=s,a=50;var n,a,i,l=function(){clearTimeout(i),i=setTimeout(()=>n(),a)};window.addEventListener("scroll",l),window.addEventListener("resize",s);let d=o.getBoundingClientRect();let c=setInterval(function(){var e=o.getBoundingClientRect();e.top===d.top&&e.left===d.left||(d=e,s())},500);function u(e=!0){r&&r.parentNode&&r.remove(),window.removeEventListener("scroll",l),window.removeEventListener("resize",s),clearInterval(c),e&&localStorage.setItem(t,"true")}r.querySelector(".dismiss-highlight").addEventListener("click",function(){u()}),o&&o.isConnected&&o.addEventListener("click",function(){u()},{once:!0})}function zs(e){var t,{locStoreCond:s,targSelector:n,targSelectorIndex:a=0,message:i,contribMsg:e,locStoreKeyToSet:o,clickElSelector:r,showOnMob:l}=e;H&&e&&(i=e),localStorage.getItem(o)||!l&&J||(s&&n&&!u?(setTimeout(function(){var e=document.querySelectorAll(n)[a],t=localStorage.getItem(s.key)?parseInt(localStorage.getItem(s.key),10):NaN;e&&!localStorage.getItem(o)&&!isNaN(t)&&t>=s.value&&(e&&("none"===getComputedStyle(e).display||"hidden"===getComputedStyle(e).visibility)||Ts(e,i,o))},3e3),u=!0):r&&n&&(e=document.querySelector(r),t=document.querySelector(n),e)&&t&&e.addEventListener("click",function(){setTimeout(function(){Ts(t,i,o)},1750)},{once:!0}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()})();