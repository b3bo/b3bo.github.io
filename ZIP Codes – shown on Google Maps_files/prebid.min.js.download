(()=>{var e={4645:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._internal=t.DEFAULT_INCLUDE_EVENTS=void 0,t.default=function(e){let t,r,n,s,d,{url:u,analyticsType:g,global:h,handler:b}=e,y=[],v=!1,A=(r=!1,n=()=>{if(!r){r=!0;try{let e=0,t=0;for(;y.length>0;){e++;let r=y.length;if(y.shift()(),y.length>=r?t++:t=0,t>=10){(0,o.logError)("Detected probable infinite loop, discarding events",y),y.length=0;return}}(0,o.logMessage)(`${d} analytics: processed ${e} events`)}finally{r=!1}}},function(){null!=t&&(clearTimeout(t),t=null),0===m?n():t=setTimeout(n,m)});return Object.defineProperties({track:function(e){let{eventType:t,args:r}=e;"bundle"===this.getAdapterType()&&window[h](b,t,r),"endpoint"===this.getAdapterType()&&function(e){let{eventType:t,args:r,callback:i}=e;l.ajax(u,i,JSON.stringify({eventType:t,args:r,labels:p}))}(...arguments)},enqueue:I,enableAnalytics:E,disableAnalytics:function(){Object.entries(s||{}).forEach(e=>{let[t,r]=e;a.off(t,r)}),this.enableAnalytics=this._oldEnable?this._oldEnable:E,v=!1},getAdapterType:()=>g,getGlobal:()=>h,getHandler:()=>b,getUrl:()=>u},{enabled:{get:()=>v}});function I(e){let{eventType:t,args:r}=e;y.push(()=>{Object.keys(p||[]).length>0&&(r={[c]:p,...r}),this.track({eventType:t,labels:p,args:r})}),A()}function E(e){d=e?.provider;var t=this;if("object"!=typeof e||"object"!=typeof e.options||void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling)){let r=(()=>{let{includeEvents:t=f,excludeEvents:r=[]}=e||{};return new Set(Object.values(i.EVENTS).filter(e=>t.includes(e)).filter(e=>!r.includes(e)))})();a.getEvents().forEach(e=>{if(!e||!r.has(e.eventType))return;let{eventType:i,args:n}=e;I.call(t,{eventType:i,args:n})}),s=Object.fromEntries(Array.from(r).map(e=>{let t=t=>this.enqueue({eventType:e,args:t});return a.on(e,t),[e,t]}))}else(0,o.logMessage)(`Analytics adapter for "${h}" disabled by sampling`);this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return(0,o.logMessage)(`Analytics adapter for "${h}" already enabled, unnecessary call to \`enableAnalytics\`.`)},v=!0}},t.setDebounceDelay=function(e){m=e},t.setLabels=function(e){u.internal=e,p=g()};var i=r(8878),n=r(7581),o=r(7750),a=d(r(2506)),s=r(4321);function d(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(d=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let l=t._internal={ajax:n.ajax},c="analyticsLabels",u={internal:{},publisher:{}},p={};s.config.getConfig(c,e=>{u.publisher=e[c],p=g()});let g=()=>Object.values(u).reduce((e,t)=>({...e,...t}),{}),f=t.DEFAULT_INCLUDE_EVENTS=Object.values(i.EVENTS).filter(e=>e!==i.EVENTS.AUCTION_DEBUG),m=100},4091:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertKeywordStringToANMap=function(e){return(0,i.isStr)(e)&&""!==e?c(e.split(/\s*(?:,)\s*/)):{}},t.getANKewyordParamFromMaps=p,t.getANKeywordParam=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return p(u(e),g(e),...r)},t.getANMapFromOrtbKeywords=u,t.getANMapFromOrtbSegments=g,t.transformBidderParamKeywords=l;var i=r(7750),n=r(5743),o=r(6565);let a={526:"1plusX",527:"1plusX",541:"captify_segments",540:"perid",501:"perid"},s=["user.data"].concat(o.CLIENT_SECTIONS.map(e=>`${e}.content.data`));function d(e,t,r){return null==t?r:(0,i.isStr)(t)?t:(0,i.isNumber)(t)?t.toString():void(0,i.logWarn)("Unsuported type for param: "+e+" required type: String")}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",r=[];return(0,i._each)(e,(e,n)=>{if((0,i.isArray)(e)){let r=[];(0,i._each)(e,e=>{((e=d(t+"."+n,e))||""===e)&&r.push(e)}),e=r}else{if(e=d(t+"."+n,e),!(0,i.isStr)(e))return;e=[e]}e=e.filter(e=>""!==e);let o={key:n};e.length>0&&(o.value=e),r.push(o)}),r}function c(e){let t={};return e.forEach(e=>{if(-1!==e.indexOf("=")){let r=e.split("="),i=r[0],n=r[1];t.hasOwnProperty(i)?t[i].push(n):t[i]=[n]}else t.hasOwnProperty(e)||(t[e]=[])}),t}function u(e){return c((0,n.getAllOrtbKeywords)(e))}function p(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return l((0,i.mergeDeep)(...t.map(e=>Object.fromEntries(Object.entries(e||{}).map(e=>{let[t,r]=e;return[t,(0,i.isNumber)(r)||(0,i.isStr)(r)?[r]:r]})))))}function g(e){let t={};return s.forEach(r=>{((0,i.deepAccess)(e,r)||[]).forEach(e=>{let r=a[e?.ext?.segtax];r&&e.segment.forEach(e=>{t[r]?t[r].push(e.id):t[r]=[e.id]})})}),t}},8938:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appnexusAliases=void 0,t.convertCamelToUnderscore=function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")},t.fill=function(e,t){let r=[];for(let n=0;n<t;n++){let t=(0,i.isPlainObject)(e)?(0,i.deepClone)(e):e;r.push(t)}return r};var i=r(7750);t.appnexusAliases=[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"emetriq",gvlid:213},{code:"pagescience",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618},{code:"projectagora",gvlid:1032},{code:"stailamedia",gvlid:32},{code:"uol",gvlid:32},{code:"adzymic",gvlid:723}]},2572:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAutoplayEnabled=void 0;let r=null;t.isAutoplayEnabled=()=>!1!==r,!function(){let e=navigator.userAgent.match(/iPhone OS (\d+)_(\d+)/);if(null!==e&&17>parseInt(e[1])&&!navigator.userAgent.includes("Safari"))return;let t=document.createElement("video");t.src="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAADxtZGF0AAAAMGWIhAAV//73ye/Apuvb3rW/k89I/Cy3PsIqP39atohOSV14BYa1heKCYgALQC5K4QAAAwZtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAD6AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACMHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAD6AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAoAAAAFoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAA+gAAAAAAAEAAAAAAahtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAEAAAABAAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAFTbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABE3N0YmwAAACvc3RzZAAAAAAAAAABAAAAn2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAoABaAEgAAABIAAAAAAAAAAEVTGF2YzYwLjMxLjEwMiBsaWJ4MjY0AAAAAAAAAAAAAAAY//8AAAA1YXZjQwFkAAr/4QAYZ2QACqzZQo35IQAAAwABAAADAAIPEiWWAQAGaOvjyyLA/fj4AAAAABRidHJ0AAAAAAAAAaAAAAGgAAAAGHN0dHMAAAAAAAAAAQAAAAEAAEAAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAADQAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjYwLjE2LjEwMA==",t.setAttribute("playsinline","true"),t.muted=!0;let i=t.play();if(!i){r=!1;return}i.then(()=>{r=!0,t.src=""}).catch(e=>{e instanceof DOMException&&"NotSupportedError"===e.name||(r=!1)})}()},7105:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearCache=o,t.getBoundingClientRect=function(e){let t;return n.has(e)?t=n.get(e):(t=e.getBoundingClientRect(),n.set(e,t)),t};var i=r(9283);let n=new Map;function o(){n.clear()}i.startAuction.before((e,t)=>{o(),e(t)})},2379:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APPNEXUS_CATEGORY_MAPPING=void 0,t.APPNEXUS_CATEGORY_MAPPING={1:"IAB20-3",2:"IAB18-5",3:"IAB10-1",4:"IAB2-3",5:"IAB19-8",6:"IAB22-1",7:"IAB18-1",8:"IAB12-3",9:"IAB5-1",10:"IAB4-5",11:"IAB13-4",12:"IAB8-7",13:"IAB9-7",14:"IAB7-1",15:"IAB20-18",16:"IAB10-7",17:"IAB19-18",18:"IAB13-6",19:"IAB18-4",20:"IAB1-5",21:"IAB1-6",22:"IAB3-4",23:"IAB19-13",24:"IAB22-2",25:"IAB3-9",26:"IAB17-18",27:"IAB19-6",28:"IAB1-7",29:"IAB9-30",30:"IAB20-7",31:"IAB20-17",32:"IAB7-32",33:"IAB16-5",34:"IAB19-34",35:"IAB11-5",36:"IAB12-3",37:"IAB11-4",38:"IAB12-3",39:"IAB9-30",41:"IAB7-44",42:"IAB7-1",43:"IAB7-30",50:"IAB19-30",51:"IAB17-12",52:"IAB19-30",53:"IAB3-1",55:"IAB13-2",56:"IAB19-30",57:"IAB19-30",58:"IAB7-39",59:"IAB22-1",60:"IAB7-39",61:"IAB21-3",62:"IAB5-1",63:"IAB12-3",64:"IAB20-18",65:"IAB11-2",66:"IAB17-18",67:"IAB9-9",68:"IAB9-5",69:"IAB7-44",71:"IAB22-3",73:"IAB19-30",74:"IAB8-5",78:"IAB22-1",85:"IAB12-2",86:"IAB22-3",87:"IAB11-3",112:"IAB7-32",113:"IAB7-32",114:"IAB7-32",115:"IAB7-32",118:"IAB9-5",119:"IAB9-5",120:"IAB9-5",121:"IAB9-5",122:"IAB9-5",123:"IAB9-5",124:"IAB9-5",125:"IAB9-5",126:"IAB9-5",127:"IAB22-1",132:"IAB1-2",133:"IAB19-30",137:"IAB3-9",138:"IAB19-3",140:"IAB2-3",141:"IAB2-1",142:"IAB2-3",143:"IAB17-13",166:"IAB11-4",175:"IAB3-1",176:"IAB13-4",182:"IAB8-9",183:"IAB3-5"}},1493:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunk=function(e,t){let r=[];for(let i=0;i<Math.ceil(e.length/t);i++){let n=i*t,o=n+t;r.push(e.slice(n,o))}return r}},1578:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODE_RETURN=t.MODE_MIXED=t.MODE_CALLBACK=void 0,t.cmpClient=function(e){let t,{apiName:r,apiVersion:s,apiArgs:d=["command","callback","parameter","version"],callbackArgs:l=["returnValue","success"],mode:c=n}=e,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,p={},g=`${r}Call`,f=`${r}Return`;function m(e){let t="string"==typeof e.data&&e.data.includes(f)?JSON.parse(e.data):e.data;if(t?.[f]?.callId){let e=t[f];p.hasOwnProperty(e.callId)&&p[e.callId](...l.map(t=>e[t]))}}let[h,b]=function(){let e,t=u,i=!1;for(;null!=t;){try{if("function"==typeof t[r]){e=t,i=!0;break}}catch(e){}try{if(t.frames[`${r}Locator`]){e=t;break}}catch(e){}if(t===u.top)break;t=t.parent}return[e,i]}();if(h)return b?t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new i.PbPromise((t,i)=>{let s=h[r](...y({...e,callback:e.callback||c===a?v(e.callback,t,i):void 0}).map(e=>{let[t,r]=e;return r}));(c===o||null==e.callback&&c===n)&&t(s)})}:(u.addEventListener("message",m,!1),t=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new i.PbPromise((r,i)=>{let n=Math.random().toString(),a={[g]:{...Object.fromEntries(y(e).filter(e=>{let[t]=e;return"callback"!==t})),callId:n}};p[n]=v(e?.callback,r,i,(t||e?.callback==null)&&(()=>{delete p[n]})),h.postMessage(a,"*"),c===o&&r()})}),Object.assign(t,{isDirect:b,close(){b||u.removeEventListener("message",m)}});function y(e){return e=Object.assign({version:s},e),d.map(t=>[t,e[t]])}function v(e,t,r,i){let n="function"==typeof e;return function(a,s){i&&i(),c!==o&&(null==s||s?t:r)(n?void 0:a),n&&e.apply(this,arguments)}}};var i=r(7148);let n=t.MODE_MIXED=0,o=t.MODE_RETURN=1,a=t.MODE_CALLBACK=2},3870:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectionType=function(){let e=navigator.connection||navigator.webkitConnection;if(!e)return 0;switch(e.type){case"ethernet":return 1;case"wifi":return 2;case"wimax":return 6;default:switch(e.effectiveType){case"slow-2g":case"2g":return 4;case"3g":return 5;case"4g":return 6;case"5g":return 7;default:return 3*("cellular"==e.type)}}}},2954:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RENDERER=void 0,t.RENDERER='(()=>{"use strict";window.render=function({ad:e,adUrl:t,width:n,height:i,instl:d},{mkFrame:r},s){if(!e&&!t)throw{reason:"noAd",message:"Missing ad markup or URL"};{if(null==i){const e=s.document?.body;[e,e?.parentElement].filter((e=>null!=e?.style)).forEach((e=>e.style.height="100%"))}const h=s.document,o={width:n??"100%",height:i??"100%"};if(t&&!e?o.src=t:o.srcdoc=e,h.body.appendChild(r(h,o)),d&&s.frameElement){const e=s.frameElement.style;e.width=n?`${n}px`:"100vw",e.height=i?`${i}px`:"100vh"}}}})();'},1398:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertCurrency=o,t.currencyCompare=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>[e.cpm,e.currency],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a();return(0,n.keyCompare)(r=>t.apply(null,e(r)))},t.currencyNormalizer=a;var i=r(3800),n=r(1720);function o(e,t,r){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(t===r)return e;let o=e;try{o=(0,i.getGlobal)().convertCurrency(e,t,r)}catch(e){if(!n)throw e}return o}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return function(i,n){return null==e&&(e=n),r(i,n,e,t)}}},6981:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DFP_ENDPOINT=t.DEFAULT_DFP_PARAMS=void 0,t.gdprParams=function(){let e=i.gdprDataHandler.getConsentData(),t={};return e&&("boolean"==typeof e.gdprApplies&&(t.gdpr=Number(e.gdprApplies)),e.consentString&&(t.gdpr_consent=e.consentString),e.addtlConsent&&(t.addtl_consent=e.addtlConsent)),t};var i=r(3029);t.DEFAULT_DFP_PARAMS={env:"vp",gdfp_req:1,output:"vast",unviewed_position_start:1},t.DFP_ENDPOINT={protocol:"https",host:"securepubads.g.doubleclick.net",pathname:"/gampad/ads"}},9246:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domainOverrideToRootDomain=function(e,t){return function(){let r=document.domain.split("."),i=`_gd${Date.now()}_${t}`;for(let t=0,n,o;t<r.length;t++){let a=r.slice(t).join(".");if(e.setCookie(i,"1",void 0,void 0,a),o=e.getCookie(i),e.setCookie(i,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,a),"1"!==o)return n;n=a}}}},2335:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBidFloor=function(e,t,r){let o=[];return(0,n.isFn)(e.getFloor)&&((0,n.deepAccess)(e,`mediaTypes.${r}.${r===i.VIDEO?"playerSize":"sizes"}`)||[]).forEach(i=>{let n=e.getFloor({currency:t||"USD",mediaType:r,size:i}).floor;o.push(isNaN(n)?0:n)}),o.length?Math.min(...o):0},t.prepareSplitImps=function(e,t,r,i,n){let o=[];return e.forEach(e=>{let a={},s=function(i,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,d=t.getFloor?.({currency:r,mediaType:i,size:[o,s]}).floor||t.params.bidfloor||-1;a[d]||(a[d]={...e,bidfloor:d}),a[d][n]||(a[d][n]="banner"===i?{format:[]}:e[i]),"banner"===i&&a[d][n].format.push({w:o,h:s})};e.banner?.format?.length&&e.banner.format.forEach(e=>s("banner","bannerTemp",e?.w,e?.h)),s("native","nativeTemp"),s("video","videoTemp",e.video?.w,e.video?.h),Object.values(a).forEach(t=>{if([["banner","bannerTemp"],["native","nativeTemp"],["video","videoTemp"]].forEach(e=>{let[r,i]=e;return t=function(e,t,r){let i={};for(let n in e)n===t?Object.prototype.hasOwnProperty.call(e,r)&&(i[t]=e[r]):n!==r&&(i[n]=e[n]);return -1===i.bidfloor&&delete i.bidfloor,i}(t,r,i)}),t.banner||t.video||t.native){let r=function(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=0,r="";for(;t++<14;)r+=e.charAt(Math.floor(Math.random()*e.length));return r}();i[r]=t.id,t.id=r,t.banner&&"stx"===n&&(t.banner.pos=e.banner.pos,t.banner.topframe=e.banner.topframe),o.push(t)}})}),o};var i=r(4030),n=r(7750)},5767:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGptSlotForAdUnitCode=a,t.getGptSlotInfoForAdUnitCode=function(e){let t=a(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}},t.getSegments=d,t.getSignals=function(e){return Object.entries({[s[0]]:d(e,["user.data"],4),[s[1]]:d(e,i.CLIENT_SECTIONS.map(e=>`${e}.content.data`),6)}).map(e=>{let[t,r]=e;return r.length?{taxonomy:t,values:r}:null}).filter(e=>e)},t.isSlotMatchingAdUnitCode=o,t.setKeyValue=function(e,t){if(!e||"string"!=typeof e)return!1;window.googletag=window.googletag||{cmd:[]},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(()=>{window.googletag.pubads().setTargeting(e,t)})},t.subscribeToGamEvent=l,t.subscribeToGamSlotRenderEndedEvent=function(e){l("slotRenderEnded",e)},t.taxonomies=void 0;var i=r(6565),n=r(7750);function o(e){return t=>(0,n.compareCodeAndSlot)(t,e)}function a(e){let t;return(0,n.isGptPubadsDefined)()&&(t=window.googletag.pubads().getSlots().find(o(e))),t}let s=t.taxonomies=["IAB_AUDIENCE_1_1","IAB_CONTENT_2_2"];function d(e,t,r){return t.flatMap(t=>(0,n.deepAccess)(e,t)||[]).filter(e=>e.ext?.segtax===r).flatMap(e=>e.segment?.map(e=>e.id)).filter(e=>e).filter(n.uniques)}function l(e,t){let r=()=>window.googletag.pubads().addEventListener(e,t);(0,n.isGptPubadsDefined)()?r():(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(r))}},2442:function(e,t){"use strict";function r(e,t,r){if(!t.has(e))throw TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function i(e,t){var i=r(e,t,"get");return i.get?i.get.call(e):i.value}function n(e,t,r){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,r)}function o(e,t,i){var n=r(e,t,"set");if(n.set)n.set.call(e,i);else{if(!n.writable)throw TypeError("attempted to set read only private field");n.value=i}return i}function a(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}Object.defineProperty(t,"__esModule",{value:!0}),t.GreedyPromise=void 0,t.greedySetTimeout=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t>0)return setTimeout(e,t);e()};var s=new WeakMap,d=new WeakMap;class l{then(e,t){let r=i(this,s);return new this.constructor((n,o)=>{let a=()=>{let i=r[1],[a,s]=0===r[0]?[e,n]:[t,o];if("function"==typeof a){try{i=a(i)}catch(e){o(e);return}s=n}s(i)};r.length?a():i(this,d).push(a)})}catch(e){return this.then(null,e)}finally(e){let t;return this.then(r=>(t=r,e()),r=>(t=this.constructor.reject(r),e())).then(()=>t)}static race(e){return new this((t,r)=>{(a(this,l),c).call(l,e,(e,i)=>e?t(i):r(i))})}static all(e){return new this((t,r)=>{let i=[];(a(this,l),c).call(l,e,(e,t,n)=>e?i[n]=t:r(t),()=>t(i))})}static allSettled(e){return new this(t=>{let r=[];(a(this,l),c).call(l,e,(e,t,i)=>r[i]=e?{status:"fulfilled",value:t}:{status:"rejected",reason:t},()=>t(r))})}static resolve(e){return new this(t=>t(e))}static reject(e){return new this((t,r)=>r(e))}constructor(e){if(n(this,s,{writable:!0,value:void 0}),n(this,d,{writable:!0,value:void 0}),"function"!=typeof e)throw Error("resolver not a function");const t=[],r=[];let[i,a]=[0,1].map(e=>function(n){if(0===e&&"function"==typeof n?.then)n.then(i,a);else if(!t.length)for(t.push(e,n);r.length;)r.shift()()});try{e(i,a)}catch(e){a(e)}o(this,s,t),o(this,d,r)}}function c(e,t,r){let i=e.length;function n(){t.apply(this,arguments),--i<=0&&r&&r()}0===e.length&&r?r():e.forEach((e,t)=>this.resolve(e).then(e=>n(!0,e,t),e=>n(!1,e,t)))}t.GreedyPromise=l},3113:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WITH_IIQ=t.WITHOUT_IIQ=t.VERSION=t.SYNC_REFRESH_MILL=t.SUPPORTED_TYPES=t.SCREEN_PARAMS=t.PREBID=t.NOT_YET_DEFINED=t.META_DATA_CONSTANT=t.MAX_REQUEST_LENGTH=t.INVALID_ID=t.HOURS_24=t.GVLID=t.FIRST_PARTY_KEY=t.EMPTY=t.CLIENT_HINTS_KEY=t.BLACK_LIST=void 0,t.FIRST_PARTY_KEY="_iiq_fdata",t.SUPPORTED_TYPES=["html5","cookie"],t.WITH_IIQ="A",t.WITHOUT_IIQ="B",t.NOT_YET_DEFINED="U",t.BLACK_LIST="L",t.CLIENT_HINTS_KEY="_iiq_ch",t.EMPTY="EMPTY",t.GVLID="1323",t.VERSION=.29,t.PREBID="pbjs",t.HOURS_24=864e5,t.INVALID_ID="INVALID_ID",t.SCREEN_PARAMS={0:"windowInnerHeight",1:"windowInnerWidth",2:"devicePixelRatio",3:"windowScreenHeight",4:"windowScreenWidth",5:"language"},t.SYNC_REFRESH_MILL=36e5,t.META_DATA_CONSTANT=256,t.MAX_REQUEST_LENGTH={chrome:2097152,safari:8e4,opera:2097152,edge:2048,firefox:65536,ie:2048}},7100:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectBrowser=function(){try{if(navigator.userAgent)return n(navigator.userAgent);if(navigator.userAgentData)return o(navigator.userAgentData)}catch(e){(0,i.logError)("Error detecting browser:",e)}return"unknown"},t.detectBrowserFromUserAgent=n,t.detectBrowserFromUserAgentData=o;var i=r(7750);function n(e){let t={opera:/Opera|OPR/,edge:/Edg/,chrome:/Chrome|CriOS/,safari:/Safari/,firefox:/Firefox/,ie:/MSIE|Trident/};if(t.edge.test(e))return"edge";if(t.opera.test(e))return"opera";if(t.chrome.test(e))return"chrome";if(t.safari.test(e)&&!t.chrome.test(e))return"safari";for(let r in t)if(t[r].test(e))return r;return"unknown"}function o(e){let t=e.brands.map(e=>e.brand);return t.includes("Microsoft Edge")?"edge":t.includes("Opera")?"opera":t.some(e=>"Chromium"===e||"Google Chrome"===e)?"chrome":"unknown"}},1174:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCmpData=function(){let e=i.allConsent.getConsentData();return{gdprApplies:e?.gdpr?.gdprApplies||!1,gdprString:"string"==typeof e?.gdpr?.consentString?e.gdpr.consentString:null,uspString:"string"==typeof e?.usp?e.usp:null,gppString:"string"==typeof e?.gpp?.gppString?e.gpp.gppString:null}};var i=r(3029)},6765:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendVrrefAndFui=function(e,t){let r=encodeURIComponent(n());return r?e+"&vrref="+o(t,r):(e+="&fui=1",e+="&vrref="+encodeURIComponent(t||""))},t.getReferrer=n,t.getRelevantRefferer=o,t.isDomainIncluded=a;var i=r(7750);function n(){try{let e=(0,i.getWindowSelf)()===(0,i.getWindowTop)()?(0,i.getWindowLocation)().href:(0,i.getWindowTop)().location.href;if(e.length>=50){let{origin:t}=new URL(e);return t}return e}catch(e){return(0,i.logError)(`Error accessing location: ${e}`),""}}function o(e,t){return e&&a(t,e)?t:e?encodeURIComponent(e):t}function a(e,t){try{return e.includes(t)}catch(e){return(0,i.logError)(`Invalid URL provided: ${e}`),!1}}},9696:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SYNC_KEY=void 0,t.SYNC_KEY=e=>"_iiq_sync_"+e},883:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleAdditionalParams=function(e,t,r,n){let o="";if(!Array.isArray(n))return t;for(let e=0;e<n.length;e++){let t=n[e];"object"==typeof t&&t.parameterName&&t.parameterValue&&t.destination&&Array.isArray(t.destination)&&t.destination[r]&&(o+=`&agp_${encodeURIComponent(t.parameterName)}=${t.parameterValue}`)}let a=i.MAX_REQUEST_LENGTH[e]??2048;return t.length+o.length>a?t:t+o};var i=r(3113)},1896:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportingServerAddress=t.iiqServerAddress=t.iiqPixelServerAddress=void 0,t.iiqServerAddress=(e,t)=>"string"==typeof e?.iiqServerAddress?e.iiqServerAddress:t?"https://api-gdpr.intentiq.com":"https://api.intentiq.com",t.iiqPixelServerAddress=(e,t)=>"string"==typeof e?.iiqPixelServerAddress?e.iiqPixelServerAddress:t?"https://sync-gdpr.intentiq.com":"https://sync.intentiq.com",t.reportingServerAddress=(e,t)=>"string"==typeof e?.params?.reportingServerAddress?e.params.reportingServerAddress:t?"https://reports-gdpr.intentiq.com/report":"https://reports.intentiq.com/report"},348:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineStorageType=function(e){if(!e||!Array.isArray(e))return["html5"];let t=e.filter(e=>n.SUPPORTED_TYPES.includes(e));return t.length?t:["html5"]},t.readData=function(e,t){try{if(d.hasLocalStorage()&&t.includes("html5"))return d.getDataFromLocalStorage(e);if(d.cookiesAreEnabled()&&t.includes("cookie"))return d.getCookie(e)}catch(e){(0,i.logError)(`${s}: Error reading data`,e)}return null},t.removeDataByKey=function(e,t){try{if(d.hasLocalStorage()&&t.includes("html5")&&d.removeDataFromLocalStorage(e),d.cookiesAreEnabled()&&t.includes("cookie")){let t=new Date(0).toUTCString();d.setCookie(e,"",t,"LAX")}}catch(e){(0,i.logError)(e)}},t.storage=void 0,t.storeData=function(e,t,r,o){try{if(o?.isOptedOut&&e!==n.FIRST_PARTY_KEY)return;if((0,i.logInfo)(s+": storing data: key="+e+" value="+t),t&&(d.hasLocalStorage()&&r.includes("html5")&&d.setDataInLocalStorage(e,t),d.cookiesAreEnabled()&&r.includes("cookie"))){let r=new Date(Date.now()+31536e6).toUTCString();d.setCookie(e,t,r,"LAX")}}catch(e){(0,i.logError)(e)}},t.tryParse=function(e){try{return JSON.parse(e)}catch(e){return(0,i.logError)(e),null}};var i=r(7750),n=r(3113),o=r(9287),a=r(4767);let s="intentIqId",d=t.storage=(0,o.getStorageManager)({moduleType:a.MODULE_TYPE_UID,moduleName:s})},3620:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendSPData=function(e,t){let r=t?.spd?encodeURIComponent("object"==typeof t.spd?JSON.stringify(t.spd):t.spd):"";return e+(r?"&spd="+r:"")}},5743:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllOrtbKeywords=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return a(...o.map(t=>(0,n.deepAccess)(e,t)),...r)},t.mergeKeywords=a;var i=r(6565),n=r(7750);let o=["user.keywords"].concat(i.CLIENT_SECTIONS.flatMap(e=>["keywords","content.keywords"].map(t=>`${e}.${t}`)));function a(){let e=new Set;for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return r.filter(e=>e).flatMap(e=>Array.isArray(e)?e:e.split(",")).map(e=>e.replace(/^\s*/,"").replace(/\s*$/,"")).filter(e=>e).forEach(t=>e.add(t)),Array.from(e.keys())}},9496:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liveIntentIdSubmodule=void 0,t.reset=function(){window&&window.liQ_instances&&(window.liQ_instances.forEach(e=>e.eventBus.off(f,v)),window.liQ_instances=[]),E.setModuleMode(null),b=!1,y=null},t.setEventFiredFlag=v,t.storage=void 0;var i=r(7750),n=r(7581),o=g(r(2506)),a=r(8878),s=r(6553),d=r(1620),l=r(9749),c=r(9287),u=r(4767),p=r(3689);function g(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(g=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let f="pre_lips",m=t.storage=(0,c.getStorageManager)({moduleType:u.MODULE_TYPE_UID,moduleName:p.MODULE_NAME}),h={ajaxGet:(e,t,r,i,o)=>{(0,n.ajaxBuilder)(i)(e,{success:t,error:r},void 0,{method:"GET",withCredentials:!0,customHeaders:o})},pixelGet:(e,t)=>(0,i.triggerPixel)(e,t)},b=!1,y=null;function v(){b=!0}function A(e){var t;let r;if(y)return y;let i={publisherId:(e=e||{}).publisherId||"any",requestedAttributes:(0,p.parseRequestedAttributes)(e.requestedAttributesOverrides),extraAttributes:{ipv4:e.ipv4,ipv6:e.ipv6}};e.url&&(i.url=e.url),i.ajaxTimeout=e.ajaxTimeout||p.DEFAULT_AJAX_TIMEOUT;let n=(t=e.liCollectConfig,r={},(t=t||{}).appId&&(r.appId=t.appId),t.fpiStorageStrategy&&(r.storageStrategy=t.fpiStorageStrategy),t.fpiExpirationDays&&(r.expirationDays=t.fpiExpirationDays),t.collectorUrl&&(r.collectorUrl=t.collectorUrl),r.ajaxTimeout=t.ajaxTimeout||p.DEFAULT_AJAX_TIMEOUT,r);e.partner&&(i.source=e.partner),n.wrapperName="prebid",n.trackerVersion="9.53.2",n.identityResolutionConfig=i,n.identifiersToResolve=e.identifiersToResolve||[],n.fireEventDelay=e.fireEventDelay;let o=s.uspDataHandler.getConsentData();o&&(n.usPrivacyString=o);let a=s.gdprDataHandler.getConsentData();a&&(n.gdprApplies=a.gdprApplies,n.gdprConsent=a.consentString);let d=s.gppDataHandler.getConsentData();d&&(n.gppString=d.gppString,n.gppApplicableSections=d.applicableSections),y=E.getInitializer()(n,m,h);let l=(0,p.makeSourceEventToSend)(e);return null!=l&&y.push(l),y}function I(){!b&&y&&setTimeout(()=>{window.liQ_instances.forEach(e=>e.eventBus.once(f,v)),!b&&y&&y.fire()},y.config.fireEventDelay||p.DEFAULT_DELAY)}let E=t.liveIntentIdSubmodule={moduleMode:"standard",name:p.MODULE_NAME,gvlid:p.GVLID,setModuleMode(e){this.moduleMode=e},getInitializer(){return(e,t,r)=>(0,l.LiveConnect)(e,t,r,this.moduleMode)},decode(e,t){let r=t&&t.params||{};return(0,p.setUpTreatment)(r),y||A(r),I(),(0,p.composeResult)(e,r)},getId(e){let t=e&&e.params||{};(0,p.setUpTreatment)(t);let r=A(t);return r?(I(),{callback:function(e){r.resolve(t=>{o.emit(a.EVENTS.LIVEINTENT_RESOLVED,t),e(t)},t=>{(0,i.logError)(`${p.MODULE_NAME}: ID fetch encountered an error: `,t),e()})}}):void 0},primaryIds:p.PRIMARY_IDS,eids:p.eids};(0,d.submodule)("userId",E)},3689:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PRIMARY_IDS=t.MODULE_NAME=t.LI_PROVIDER_DOMAIN=t.GVLID=t.DEFAULT_TREATMENT_RATE=t.DEFAULT_REQUESTED_ATTRIBUTES=t.DEFAULT_DELAY=t.DEFAULT_AJAX_TIMEOUT=void 0,t.composeResult=function(e,t){return t.activatePartialTreatment?window.liModuleEnabled?c(e):{}:c(e)},t.eids=void 0,t.makeSourceEventToSend=function(e){let t={},r=!1;if("string"==typeof e.emailHash&&(r=!0,t.emailHash=e.emailHash),"string"==typeof e.ipv4&&(r=!0,t.ipv4=e.ipv4),"string"==typeof e.ipv6&&(r=!0,t.ipv6=e.ipv6),"string"==typeof e.userAgent&&(r=!0,t.userAgent=e.userAgent),r)return t},t.parseRequestedAttributes=function(e){function t(e){return Object.entries(e).flatMap(e=>{let[t,r]=e;return"boolean"==typeof r&&r?[t]:[]})}return t("object"==typeof e?{...d,...e}:d)},t.setUpTreatment=function(e){if(void 0===window.liModuleEnabled&&e.activatePartialTreatment){let e=(0,a.isNumber)(window.liTreatmentRate)?window.liTreatmentRate:l;window.liModuleEnabled=Math.random()<e,window.liTreatmentRate=e}};var i=r(2043),n=r(2621),o=r(783),a=r(7750);t.PRIMARY_IDS=["libp"],t.GVLID=148,t.DEFAULT_AJAX_TIMEOUT=5e3,t.DEFAULT_DELAY=500,t.MODULE_NAME="liveIntentId";let s=t.LI_PROVIDER_DOMAIN="liveintent.com",d=t.DEFAULT_REQUESTED_ATTRIBUTES={nonId:!0},l=t.DEFAULT_TREATMENT_RATE=.95;function c(e){let t={},r=e.nonId||e.unifiedId;return t.lipb=r?{...e,lipbid:r}:e,delete t.lipb?.unifiedId,e.uid2&&(t.uid2={id:e.uid2,ext:{provider:s}}),e.bidswitch&&(t.bidswitch={id:e.bidswitch,ext:{provider:s}}),e.triplelift&&(t.triplelift={id:e.triplelift,ext:{provider:s}}),e.zetassp&&(t.zetassp={id:e.zetassp,ext:{provider:s}}),e.medianet&&(t.medianet={id:e.medianet,ext:{provider:s}}),e.magnite&&(t.magnite={id:e.magnite,ext:{provider:s}}),e.index&&(t.index={id:e.index,ext:{provider:s}}),e.openx&&(t.openx={id:e.openx,ext:{provider:s}}),e.pubmatic&&(t.pubmatic={id:e.pubmatic,ext:{provider:s}}),e.sovrn&&(t.sovrn={id:e.sovrn,ext:{provider:s}}),e.triplelift&&(t.triplelift={id:e.triplelift,ext:{provider:s}}),e.thetradedesk&&(t.lipb={...t.lipb,tdid:e.thetradedesk},t.tdid={id:e.thetradedesk,ext:{rtiPartner:"TDID",provider:(0,o.getRefererInfo)().domain||s}},delete t.lipb.thetradedesk),e.sharethrough&&(t.sharethrough={id:e.sharethrough,ext:{provider:s}}),e.sonobi&&(t.sonobi={id:e.sonobi,ext:{provider:s}}),e.vidazoo&&(t.vidazoo={id:e.vidazoo,ext:{provider:s}}),e.nexxen&&(t.nexxen={id:e.nexxen,ext:{provider:s}}),t}t.eids={...i.UID1_EIDS,tdid:{...i.UID1_EIDS.tdid,matcher:s},...n.UID2_EIDS,lipb:{getValue:function(e){return e.lipbid},source:"liveintent.com",atype:3,getEidExt:function(e){if(Array.isArray(e.segments)&&e.segments.length)return{segments:e.segments}}},bidswitch:{source:"bidswitch.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},medianet:{source:"media.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},magnite:{source:"rubiconproject.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},index:{source:"liveintent.indexexchange.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},openx:{source:"openx.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},pubmatic:{source:"pubmatic.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},sovrn:{source:"liveintent.sovrn.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},fpid:{source:"fpid.liveintent.com",atype:1,getValue:function(e){return e.id}},sharethrough:{source:"sharethrough.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},sonobi:{source:"liveintent.sonobi.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},triplelift:{source:"liveintent.triplelift.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},zetassp:{source:"zeta-ssp.liveintent.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},vidazoo:{source:"liveintent.vidazoo.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},nexxen:{source:"liveintent.unrulymedia.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}}}},5829:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDM=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{e=t.top.navigator.deviceMemory}catch(t){e=void 0}return e},t.getHC=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{e=t.top.navigator.hardwareConcurrency}catch(t){e=void 0}return e},t.getHLen=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{e=t.top.history.length}catch(t){e=void 0}return e}},817:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectGuard=function(e){let t={},r=[];e.forEach(e=>{e.wp&&r.push(e),e.get&&e.paths.forEach(r=>{let i=t;r.split(".").forEach(e=>{i.children=i.children||{},i.children[e]=i.children[e]||{},i=i.children[e]}),i.rule=e})});let n=(0,i.objectTransformer)(r);return function(e){let r={};for(var o,a=arguments.length,s=Array(a>1?a-1:0),d=1;d<a;d++)s[d-1]=arguments[d];return{obj:function e(t,r,n){return new Proxy(t,{get(t,o,a){let s=Reflect.get(t,o,a);if(r.hasOwnProperty(o)){let{children:t,rule:a}=r[o];if(t&&null!=s&&"object"==typeof s)return e(s,t,n);if(a&&(0,i.isData)(s)&&n(a))return a.get(s)}return s}})}(e,t.children||{},(0,i.sessionedApplies)(r,...s)),verify:(o=n(r,e,...s),function(){o.forEach(e=>e())})}}},t.writeProtectRule=function(e){return Object.assign({wp:!0,run(e,t,r,o,a){let s=r&&r.hasOwnProperty(o),d=s?r[o]:void 0,l=s&&null!=d&&"object"==typeof d?(0,n.deepClone)(d):d;return function(){let r=null==t?e:(0,n.deepAccess)(e,t),c=r&&(0,i.isData)(r[o]),u=c?r[o]:void 0;!s&&c&&a()?delete r[o]:(s!==c||u!==d||!(0,n.deepEqual)(u,l))&&a()&&(0,n.deepSetValue)(e,(null==t?[]:[t]).concat(o).join("."),l)}}},e)};var i=r(9961),n=r(7750)},4558:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guardOrtb2Fragments=void 0,t.ortb2FragmentsGuardFactory=c,t.ortb2Guard=void 0,t.ortb2GuardFactory=d;var i=r(5110),n=r(2276),o=r(9961),a=r(817),s=r(7750);function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.isActivityAllowed;return(0,a.objectGuard)((0,o.ortb2TransmitRules)(e).concat(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.isActivityAllowed;return[{name:n.ACTIVITY_ENRICH_EIDS,paths:o.ORTB_EIDS_PATHS,applies:(0,o.appliesWhenActivityDenied)(n.ACTIVITY_ENRICH_EIDS,e)},{name:n.ACTIVITY_ENRICH_UFPD,paths:o.ORTB_UFPD_PATHS,applies:(0,o.appliesWhenActivityDenied)(n.ACTIVITY_ENRICH_UFPD,e)}].map(a.writeProtectRule)}(e)))}let l=t.ortb2Guard=d();function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return function(t,r){t.global=t.global||{},t.bidder=t.bidder||{};let i=new Set(Object.keys(t.bidder)),n=[];function o(t){let i=e(t,r);return n.push(i.verify),i.obj}let a={global:o(t.global),bidder:Object.fromEntries(Object.entries(t.bidder).map(e=>{let[t,r]=e;return[t,o(r)]}))};return{obj:a,verify(){Object.entries(a.bidder).filter(e=>{let[t]=e;return!i.has(t)}).forEach(i=>{let[n,o]=i,a={},d=e(a,r);(0,s.mergeDeep)(d.obj,o),d.verify(),t.bidder[n]=a}),n.forEach(e=>e())}}}}t.guardOrtb2Fragments=c()},1927:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXT_PROMOTIONS=t.DEFAULT_RULES=void 0,t.moveRule=a,t.ortb25Translator=d,t.splitPath=o,t.toOrtb25=void 0;var i=r(7750);let n=t.EXT_PROMOTIONS=["device.sua","source.schain","regs.gdpr","regs.us_privacy","regs.gpp","regs.gpp_sid","user.consent","user.eids"];function o(e){let t=e.split(".");return[t.slice(0,t.length-1).join("."),t[t.length-1]]}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>`${e}.ext.${t}`,[r,n]=o(e);return t=t(r,n),e=>{let o=(0,i.deepAccess)(e,r);if(o?.[n]!=null)return(0,i.deepSetValue)(e,t,o[n]),()=>delete o[n]}}let s=t.DEFAULT_RULES=Object.freeze([...n.map(e=>a(e)),...["app","content","site","user"].map(function(e){return t=>{let r=t[e]?.kwarray;if(null!=r){let i=(t[e].keywords||"").split(",");return Array.isArray(r)&&i.push(...r),t[e].keywords=i.join(","),()=>delete t[e].kwarray}}})]);function d(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return function(r){return t.forEach(t=>{try{let i=t(r);"function"==typeof i&&e&&i()}catch(e){(0,i.logError)("Error translating request to ORTB 2.5",e)}}),r}}t.toOrtb25=d()},8256:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProcessors=void 0,t.ortbConverter=function(){let{context:e={},processors:t=d,overrides:r={},imp:o,request:s,bidResponse:l,response:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=new WeakMap;function p(e,n,o,a){let s;return function(){return null==s&&(s=function(){let s=o.bind(this,(0,i.compose)(t()[e]||{},r[e]||{}));return n&&(s=n.bind(this,s)),function(){try{return s.apply(this,arguments)}catch(e){a.call(this,e,...arguments)}}}()),s.apply(this,arguments)}}let g=p(a.IMP,o,function(e,t,r){let i={};return e(i,t,r),i},function(e,t,r){(0,n.logError)("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:r})}),f=p(a.REQUEST,s,function(e,t,r,i){let n={imp:t};return e(n,r,i),n},function(e,t,r,i){throw(0,n.logError)("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:r,context:i}),e}),m=p(a.BID_RESPONSE,l,function(e,t,r){let i={};return e(i,t,r),i},function(e,t,r){(0,n.logError)("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:t,context:r})}),h=p(a.RESPONSE,c,function(e,t,r,i){let n={bids:t};return e(n,r,i),n},function(e,t,r,i){throw(0,n.logError)("Error while converting from ORTB response",{error:e,bidResponses:t,ortbResponse:r,context:i}),e});return{toORTB(t){let{bidderRequest:r,bidRequests:i,context:o={}}=t,a={req:Object.assign({bidRequests:i=i||r.bids},e,o),imp:{}};a.req.impContext=a.imp;let s=f(i.map(t=>{let i=Object.assign({bidderRequest:r,reqContext:a.req},e,o),s=g(t,i);if(null!=s){if(s.hasOwnProperty("id"))return Object.assign(i,{bidRequest:t,imp:s}),a.imp[s.id]=i,s;(0,n.logError)("Converted ORTB imp does not specify an id, ignoring bid request",t,s)}}).filter(Boolean),r,a.req);return a.req.bidderRequest=r,null!=s&&u.set(s,a),s},fromORTB(e){let{request:t,response:r}=e,i=u.get(t);if(null==i)throw Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function o(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(e,{ortbRequest:t},r)}let a=Object.fromEntries((t.imp||[]).map(e=>[e.id,e]));return h((r.seatbid||[]).flatMap(e=>(e.bid||[]).map(t=>{if(a.hasOwnProperty(t.impid)&&i.imp.hasOwnProperty(t.impid))return m(t,o(i.imp[t.impid],{imp:a[t.impid],seatbid:e,ortbResponse:r}));(0,n.logError)("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",t)})).filter(Boolean),r,o(i.req))}}};var i=r(7992),n=r(7750),o=r(3105),a=r(5177),s=r(1945);let d=t.defaultProcessors=(0,n.memoize)(()=>(0,s.mergeProcessors)(o.DEFAULT_PROCESSORS,(0,a.getProcessors)(a.DEFAULT)))},7992:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compose=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!r.has(e)){let t=Object.entries(e);t.sort((e,t)=>(e=e[1].priority||0)===(t=t[1].priority||0)?0:e>t?-1:1),r.set(e,t.map(e=>{let[t,r]=e;return[t,r.fn]}))}let i=r.get(e).filter(e=>{let[r]=e;return!t.hasOwnProperty(r)||t[r]}).map(function(e){let[r,i]=e;return t.hasOwnProperty(r)?t[r].bind(this,i):i});return function(){let e=Array.from(arguments);i.forEach(t=>{t.apply(this,e)})}};let r=new WeakMap},1945:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeProcessors=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];let o=r.shift(),a=r.length>1?e(...r):r[0];return Object.fromEntries(i.PROCESSOR_TYPES.map(e=>[e,Object.assign({},o[e],a[e])]))};var i=r(5177)},6260:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bannerResponseProcessor=function(){let{createPixel:e=e=>(0,i.createTrackPixelHtml)(decodeURIComponent(e),i.encodeMacroURI)}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,r){t.mediaType===n.BANNER&&(r.adm&&r.nurl?t.ad=e(r.nurl)+r.adm:r.adm?t.ad=r.adm:r.nurl&&(t.adUrl=r.nurl))}},t.fillBannerImp=function(e,t,r){if(r.mediaType&&r.mediaType!==n.BANNER)return;let o=t?.mediaTypes?.banner;if(o){let r={topframe:+(!0!==(0,i.inIframe)())};o.sizes&&t.ortb2Imp?.banner?.format==null&&(r.format=(0,i.sizesToSizeTuples)(o.sizes).map(i.sizeTupleToRtbSize)),o.hasOwnProperty("pos")&&(r.pos=o.pos),e.banner=(0,i.mergeDeep)(r,e.banner)}};var i=r(7750),n=r(4030)},3105:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROCESSORS=void 0;var i=r(7750),n=r(6260),o=r(7515),a=r(5584),s=r(2077),d=r(5177),l=r(6565);let c=t.DEFAULT_PROCESSORS={[d.REQUEST]:{fpd:{priority:99,fn(e,t){(0,i.mergeDeep)(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:(0,l.clientSectionChecker)("ORTB request")},props:{fn(e,t){Object.assign(e,{id:e.id||(0,i.generateUUID)(),test:e.test||0});let r=parseInt(t.timeout,10);isNaN(r)||(e.tmax=r)}}},[d.IMP]:{fpd:{priority:99,fn(e,t){(0,i.mergeDeep)(e,t.ortb2Imp)}},id:{fn(e,t){e.id=t.bidId}},banner:{fn:n.fillBannerImp},pbadslot:{fn(e){let t=e.ext?.data?.pbadslot;t&&"string"==typeof t||delete e.ext?.data?.pbadslot}},secure:{fn(e){e.secure=1}}},[d.BID_RESPONSE]:{mediaType:{priority:99,fn:a.setResponseMediaType},banner:{fn:(0,n.bannerResponseProcessor)()},props:{fn(e,t,r){if(Object.entries({requestId:r.bidRequest?.bidId,seatBidId:t.id,cpm:t.price,currency:r.ortbResponse.cur||r.currency,width:t.w,height:t.h,wratio:t.wratio,hratio:t.hratio,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||r.ttl,netRevenue:r.netRevenue,pbsHost:r.bidRequest?.pbsHost}).filter(e=>{let[t,r]=e;return void 0!==r}).forEach(t=>{let[r,i]=t;return e[r]=i}),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain),t.ext?.dsa&&(e.meta.dsa=t.ext.dsa),t.cat&&(e.meta.primaryCatId=t.cat[0],e.meta.secondaryCatIds=t.cat.slice(1)),t.attr&&(e.meta.attr=t.attr),r.ortbResponse?.ext?.responsetimemillis){let t=r.ortbResponse.ext.responsetimemillis,i=r?.bidRequest?.bidder;t[i]&&(e.responseTimeMillis=t[i])}if(r.ortbResponse?.ext?.seatnonbid&&r.ortbResponse?.ext?.seatnonbid.length>0){let t=r?.bidRequest?.bidder,i=r.ortbResponse.ext.seatnonbid.find(e=>e.seat===t);i&&(e.seatNonBidStatusCode=(i.nonbid||[])[0]?.statuscode)}t.ext?.eventtrackers&&(e.eventtrackers=(e.eventtrackers??[]).concat(t.ext.eventtrackers)),t.ext?.dspid&&(e.meta.dspid??=t.ext.dspid),t.ext?.networkId&&(e.meta.networkId??=t.ext.networkId),t.ext?.networkName&&(e.meta.networkName??=t.ext.networkName),t.ext?.prebid?.meta?.demandSource&&(e.meta.demandSource??=t.ext.prebid.meta.demandSource)}}}};c[d.IMP].native={fn:s.fillNativeImp},c[d.BID_RESPONSE].native={fn:s.fillNativeResponse},c[d.IMP].video={fn:o.fillVideoImp},c[d.BID_RESPONSE].video={fn:o.fillVideoResponse}},5584:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ORTB_MTYPES=void 0,t.setResponseMediaType=function(e,t,r){if(e.mediaType)return;let i=r.mediaType;if(!i&&!n.hasOwnProperty(t.mtype))throw Error("Cannot determine mediaType for response");e.mediaType=i||n[t.mtype]};var i=r(4030);let n=t.ORTB_MTYPES={1:i.BANNER,2:i.VIDEO,4:i.NATIVE}},2077:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillNativeImp=function(e,t,r){if(r.mediaType&&r.mediaType!==n.NATIVE)return;let o=t.nativeOrtbRequest;o&&(o=Object.assign({},r.nativeRequest,o),o.assets?.length?e.native=(0,i.mergeDeep)({},{request:JSON.stringify(o),ver:o.ver},e.native):(0,i.logWarn)("mediaTypes.native is set, but no assets were specified. Native request skipped.",t))},t.fillNativeResponse=function(e,t){if(e.mediaType===n.NATIVE){let r;if(r="string"==typeof t.adm?JSON.parse(t.adm):t.adm,(0,i.isPlainObject)(r)&&Array.isArray(r.assets))e.native={ortb:r};else throw Error("ORTB native response contained no assets")}};var i=r(7750),n=r(4030)},7515:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillVideoImp=function(e,t,r){if(r.mediaType&&r.mediaType!==n.VIDEO)return;let a=t?.mediaTypes?.video;if(!(0,i.isEmpty)(a)){let t=Object.fromEntries(Object.entries(a).filter(e=>{let[t]=e;return o.ORTB_VIDEO_PARAMS.has(t)}));if(a.playerSize){let e=(0,i.sizesToSizeTuples)(a.playerSize).map(i.sizeTupleToRtbSize);e.length>1&&(0,i.logWarn)("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(t,e[0])}e.video=(0,i.mergeDeep)(t,e.video)}},t.fillVideoResponse=function(e,t,r){e.mediaType===n.VIDEO&&(r?.imp?.video?.w&&r?.imp?.video?.h&&([e.playerWidth,e.playerHeight]=[r.imp.video.w,r.imp.video.h]),t.ext&&(e.ext=t.ext),t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl))};var i=r(7750),n=r(4030),o=r(4312)},5253:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pbsExtensions=void 0;var i=r(1945),n=r(6395),o=r(5177),a=r(8256);t.pbsExtensions=(0,r(7750).memoize)(()=>(0,i.mergeProcessors)((0,a.defaultProcessors)(),n.PBS_PROCESSORS,(0,o.getProcessors)(o.PBS)))},2488:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setImpAdUnitCode=function(e,t){let r=t.adUnitCode;r&&(0,i.deepSetValue)(e,"ext.prebid.adunitcode",r)};var i=r(7750)},5828:function(e,t,r){"use strict";var i=r(5824);Object.defineProperty(t,"__esModule",{value:!0}),t.setRequestExtPrebidAliases=function(e,t,r){let{am:i=n.default}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(i.aliasRegistry[t.bidderCode]){let r=i.bidderRegistry[t.bidderCode];if(!r||!r.getSpec().skipPbsAliasing){(0,a.deepSetValue)(e,`ext.prebid.aliases.${t.bidderCode}`,i.aliasRegistry[t.bidderCode]);let n=o.config.getConfig(`gvlMapping.${t.bidderCode}`)||r?.getSpec?.().gvlid;n&&(0,a.deepSetValue)(e,`ext.prebid.aliasgvlids.${t.bidderCode}`,n)}}};var n=i(r(6553)),o=r(4321),a=r(7750)},7129:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addEventTrackers=function(e,t){e.eventtrackers=e.eventtrackers||[],[[t.burl,i.EVENT_TYPE_IMPRESSION],[t?.ext?.prebid?.events?.win,i.EVENT_TYPE_WIN]].filter(t=>{let[r,n]=t;return r&&null==e.eventtrackers.find(e=>{let{method:t,event:o,url:a}=e;return o===n&&t===i.TRACKER_METHOD_IMG&&a===r})}).forEach(t=>{let[r,n]=t;e.eventtrackers.push({method:i.TRACKER_METHOD_IMG,event:n,url:r})})};var i=r(750)},3520:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUPPORTED_MEDIA_TYPES=void 0,t.extPrebidMediaType=function(e,t,r){let a=r.mediaType;!a&&(a=n.ORTB_MTYPES.hasOwnProperty(t.mtype)?n.ORTB_MTYPES[t.mtype]:t.ext?.prebid?.type,o.hasOwnProperty(a)||(a=i.BANNER)),e.mediaType=a};var i=r(4030),n=r(5584);let o=t.SUPPORTED_MEDIA_TYPES={[i.BANNER]:"banner",[i.NATIVE]:"native",[i.VIDEO]:"video"}},6400:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setImpBidParams=function(e,t){let r=t.params;r&&(0,i.deepSetValue)(e,`ext.prebid.bidder.${t.bidder}`,r)};var i=r(7750)},6395:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PBS_PROCESSORS=void 0;var i=r(5177),n=r(7750),o=r(3520),a=r(5828),s=r(6400),d=r(2488),l=r(3222),c=r(1099),u=r(7129);t.PBS_PROCESSORS={[i.REQUEST]:{extPrebid:{fn:l.setRequestExtPrebid},extPrebidChannel:{fn:l.setRequestExtPrebidChannel},extPrebidAliases:{fn:a.setRequestExtPrebidAliases}},[i.IMP]:{params:{fn:s.setImpBidParams},adUnitCode:{fn:d.setImpAdUnitCode}},[i.BID_RESPONSE]:{mediaType:{fn:o.extPrebidMediaType,priority:99},videoCache:{fn:c.setBidResponseVideoCache,priority:-10},bidderCode:{fn(e,t,r){e.bidderCode=r.seatbid.seat,e.adapterCode=t?.ext?.prebid?.meta?.adaptercode||r.bidRequest?.bidder||e.bidderCode}},pbsBidId:{fn(e,t){let r=t?.ext?.prebid?.bidid;(0,n.isStr)(r)&&(e.pbsBidId=r)}},adserverTargeting:{fn(e,t){let r=t?.ext?.prebid?.targeting;(0,n.isPlainObject)(r)&&(e.adserverTargeting=r)}},extPrebidMeta:{fn(e,t){e.meta=(0,n.mergeDeep)({},t?.ext?.prebid?.meta,e.meta)}},pbsWinTrackers:{fn:u.addEventTrackers}},[i.RESPONSE]:{serverSideStats:{fn(e,t,r){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach(e=>{let[i,o]=e,a=(0,n.deepAccess)(t,`ext.${i}.${r.bidderRequest.bidderCode}`);a&&(r.bidderRequest[o]=a,r.bidRequests.forEach(e=>e[o]=a))})}}}}},3222:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRequestExtPrebid=function(e,t){(0,i.deepSetValue)(e,"ext.prebid",(0,i.mergeDeep)({auctiontimestamp:t.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},e.ext?.prebid)),n.config.getConfig("debug")&&(e.ext.prebid.debug=!0)},t.setRequestExtPrebidChannel=function(e){(0,i.deepSetValue)(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:(0,o.getGlobal)().version},e.ext?.prebid?.channel))};var i=r(7750),n=r(4321),o=r(3800)},1099:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setBidResponseVideoCache=function(e,t){if(e.mediaType===i.VIDEO){let{cacheId:r,url:i}=t?.ext?.prebid?.cache?.vastXml??{};if(!r||!i){let{hb_uuid:e,hb_cache_host:n,hb_cache_path:o}=t?.ext?.prebid?.targeting??{};e&&n&&o&&(r=e,i=`https://${n}${o}?uuid=${e}`)}r&&i&&Object.assign(e,{videoCacheKey:r,vastUrl:i})}};var i=r(4030)},8401:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBoundingBox=o,t.getViewability=function(e,t,r){return"visible"===t.document.visibilityState?a(e,r):0},t.isViewabilityMeasurable=function(e){return!(0,i.inIframe)()&&null!==e},t.percentInView=void 0;var i=r(7750),n=r(7105);function o(e){let{w:t,h:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{width:i,height:o,left:a,top:s,right:d,bottom:l,x:c,y:u}=(0,n.getBoundingClientRect)(e);return(0===i||0===o)&&t&&r&&(i=t,o=r,d=a+t,l=s+r),{width:i,height:o,left:a,top:s,right:d,bottom:l,x:c,y:u}}let a=function(e){let{w:t,h:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o(e,{w:t,h:r}),{innerHeight:a,innerWidth:s}=(0,i.getWinDimensions)(),d=function(e){let t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom};for(let r=1;r<e.length;++r)if(t.left=Math.max(t.left,e[r].left),t.right=Math.min(t.right,e[r].right),t.left>=t.right||(t.top=Math.max(t.top,e[r].top),t.bottom=Math.min(t.bottom,e[r].bottom),t.top>=t.bottom))return null;return t.width=t.right-t.left,t.height=t.bottom-t.top,t}([{left:0,top:0,right:s,bottom:a},n]);return null!==d?d.width*d.height/(n.width*n.height)*100:0};t.percentInView=a},1419:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBidFromResponse=function(e,t){return e?e.bid?e.bid[0]||(0,i.logError)(t.noBid):(0,i.logError)(t.hasNoArrayOfBids+JSON.stringify(e)):(0,i.logError)(t.emptySeatbid),e&&e.bid&&e.bid[0]};var i=r(7750)},5909:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTimeToFirstByte=function(e){let t=e.performance||e.webkitPerformance||e.msPerformance||e.mozPerformance,r=t&&"function"==typeof t.getEntriesByType&&"[object Function]"===Object.prototype.toString.call(t.getEntriesByType)&&t.getEntriesByType("navigation")[0]&&t.getEntriesByType("navigation")[0].responseStart&&t.getEntriesByType("navigation")[0].requestStart&&t.getEntriesByType("navigation")[0].responseStart>0&&t.getEntriesByType("navigation")[0].requestStart>0&&Math.round(t.getEntriesByType("navigation")[0].responseStart-t.getEntriesByType("navigation")[0].requestStart);if(r)return r.toString();let i=t&&t.timing.responseStart&&t.timing.requestStart&&t.timing.responseStart>0&&t.timing.requestStart>0&&t.timing.responseStart-t.timing.requestStart;return i?i.toString():""}},1375:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutQueue=function(){let e=[];return{submit(t,r,i){let n=[r,setTimeout(()=>{e.splice(e.indexOf(n),1),i()},t)];e.push(n)},resume(){for(;e.length;){let[t,r]=e.shift();clearTimeout(r),t()}}}}},2334:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertTypes=function(e,t){return Object.keys(e).forEach(r=>{if(t[r]){if((0,i.isFn)(e[r]))t[r]=e[r](t[r]);else{var n,o;t[r]=(n=e[r],o=t[r],"string"===n?o&&o.toString():"number"===n?Number(o):o)}isNaN(t[r])&&delete t.key}}),t};var i=r(7750)},2043:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UID1_EIDS=void 0,t.UID1_EIDS={tdid:{source:"adserver.org",atype:1,getValue:function(e){return e.id?e.id:e},getUidExt:function(e){return{rtiPartner:"TDID",...e.ext}}}}},2621:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UID2_EIDS=void 0,t.UID2_EIDS={uid2:{source:"uidapi.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}}}},3350:function(e,t,r){"use strict";let i;Object.defineProperty(t,"__esModule",{value:!0}),t.Uid2CodeVersion=t.Uid2ApiClient=void 0,t.Uid2GetId=function(e,t,r,n){let a=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return s(r,...t)},d=null,u="cookie"!==e.storage,p=new l(t,u,e.internalStorage,a);a(`Module is using ${u?"local storage":"cookies"} for internal storage.`);let g=i&&i.isCSTGOptionsValid(e.cstg,n);g?(a("Module is using client-side token generation."),d=null):e.paramToken?a("Read token from params",d=e.paramToken):e.serverCookieName&&a("Read token from server-supplied cookie",d=p.readProvidedCookie(e.serverCookieName));let f=p.getStoredValueWithFallback();if(a("Loaded module-stored tokens:",f),f&&"string"==typeof f){if(!d&&!g)return a("Returning legacy cookie value."),{id:f};a("Discarding superseded legacy cookie."),f=null}d&&f&&f.originalToken?.advertising_token!==d.advertising_token&&(a("Server supplied new token - ignoring stored value.",f.originalToken?.advertising_token,d.advertising_token),f=null);let m=!f?.latestToken||d&&d.identity_expires>f.latestToken.identity_expires,h=m?d:f.latestToken;if(a("UID2 module selected latest token",m,h),!h||Date.now()>h.refresh_expires)return a("Newest available token is expired and not refreshable."),{id:null};if(Date.now()>h.identity_expires){let t=c(e.apiBaseUrl,h,e.clientId,p,a,n);return a("Token is expired but can be refreshed, attempting refresh."),{callback:e=>{t.then(t=>{a("Refresh reponded, passing the updated token on.",t),e(t)}).catch(e=>{(0,o.logError)("error refreshing token: ",e)})}}}Date.now()>h.refresh_from&&(a("Refreshing token in background with low priority."),c(e.apiBaseUrl,h,e.clientId,p,a,n).catch(e=>{(0,o.logError)("error refreshing token in background: ",e)}));let b={originalToken:d??f?.originalToken,latestToken:h};return p.storeValue(b),{id:b}},t.Uid2StorageManager=void 0,t.extractIdentityFromParams=function(e){for(let t of["emailHash","phoneHash","email","phone"])if(e.hasOwnProperty(t))return{[t]:e[t]};return{}};var n=r(7581),o=r(7750);function a(e){return`UID2 shared library - ${e}`}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];e(a(r[0]),...r.slice(1))}t.Uid2CodeVersion="1.1";class d{createArrayBuffer(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}hasStatusResponse(e){return"object"==typeof e&&e&&e.status}isValidRefreshResponse(e){var t;return this.hasStatusResponse(e)&&("optout"===e.status||"expired_token"===e.status||"success"===e.status&&e.body&&!!("object"==typeof(t=e.body)&&null!==t&&t.advertising_token&&t.identity_expires&&t.refresh_from&&t.refresh_token&&t.refresh_expires))}ResponseToRefreshResult(e){return this.isValidRefreshResponse(e)?"success"===e.status?{status:e.status,identity:e.body}:e:a("Response didn't contain a valid status")}callRefreshApi(e){let t,r,i=this._baseUrl+"/v2/token/refresh",o=new Promise((e,i)=>{t=e,r=i});return this._logInfo("Sending refresh request",e),(0,n.ajax)(i,{success:i=>{try{if(e.refresh_response_key){this._logInfo("Decrypting refresh API response");let n=this.createArrayBuffer(atob(i));window.crypto.subtle.importKey("raw",this.createArrayBuffer(atob(e.refresh_response_key)),{name:"AES-GCM"},!1,["decrypt"]).then(e=>{this._logInfo("Imported decryption key"),window.crypto.subtle.decrypt({name:"AES-GCM",iv:n.slice(0,12),tagLength:128},e,n.slice(12)).then(e=>{let i=String.fromCharCode(...new Uint8Array(e));this._logInfo("Decrypted to:",i);let n=JSON.parse(i),o=this.ResponseToRefreshResult(n);"string"==typeof o?r(a(o)):t(o)},e=>this._logWarn(a("Call to UID2 API failed"),e))},e=>this._logWarn(a("Call to UID2 API failed"),e))}else{this._logInfo("No response decryption key available, assuming unencrypted JSON");let e=JSON.parse(i),n=this.ResponseToRefreshResult(e);"string"==typeof n?r(a(n)):t(n)}}catch(e){r(a(i))}},error:(e,i)=>{try{this._logInfo("Error status, assuming unencrypted JSON");let e=JSON.parse(i.responseText),n=this.ResponseToRefreshResult(e);"string"==typeof n?r(a(n)):t(n)}catch(t){r(a(e))}}},e.refresh_token,{method:"POST",customHeaders:{"X-UID2-Client-Version":this._clientVersion}}),o}constructor(e,t,r,i){this._baseUrl=e.baseUrl,this._clientVersion=t,this._logInfo=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return s(r,...t)},this._logWarn=i}}t.Uid2ApiClient=d;class l{readCookie(e){return this._storage.cookiesAreEnabled()?this._storage.getCookie(e):null}readLocalStorage(e){return this._storage.localStorageIsEnabled()?this._storage.getDataFromLocalStorage(e):null}readModuleCookie(){return this.parseIfContainsBraces(this.readCookie(this._storageName))}writeModuleCookie(e){this._storage.setCookie(this._storageName,JSON.stringify(e),Date.now()+864e5)}readModuleStorage(){return this.parseIfContainsBraces(this.readLocalStorage(this._storageName))}writeModuleStorage(e){this._storage.setDataInLocalStorage(this._storageName,JSON.stringify(e))}readProvidedCookie(e){return JSON.parse(this.readCookie(e))}parseIfContainsBraces(e){return e?.includes("{")?JSON.parse(e):e}storeValue(e){this._preferLocalStorage?this.writeModuleStorage(e):this.writeModuleCookie(e)}getStoredValueWithFallback(){let e=this._preferLocalStorage?"local storage":"cookie",t=(this._preferLocalStorage?this.readModuleStorage:this.readModuleCookie).bind(this),r=(this._preferLocalStorage?this.writeModuleStorage:this.writeModuleCookie).bind(this),i=(this._preferLocalStorage?this.readModuleCookie:this.readModuleStorage).bind(this),n=t();if(n){if("string"==typeof n){let t=i();if(t&&"object"==typeof t)return this._logInfo(`${e} contained a basic token, but found a refreshable token fallback. Copying the fallback value to ${e}.`),r(t),t}}else{let t=i();if(t)return this._logInfo(`${e} was empty, but found a fallback value.`),"object"==typeof t&&(this._logInfo(`Copying the fallback value to ${e}.`),r(t)),t}return n}constructor(e,t,r,i){this._storage=e,this._preferLocalStorage=t,this._storageName=r,this._logInfo=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return s(i,...t)}}}function c(e,t,r,i,n,o){return n("UID2 base url provided: ",e),new d({baseUrl:e},r,n,o).callRefreshApi(t).then(e=>{n("Refresh endpoint responded with:",e);let r={originalToken:t,latestToken:e.identity},o=i.getStoredValueWithFallback();return o?.originalIdentity&&(r.originalIdentity=o.originalIdentity),i.storeValue(r),r})}t.Uid2StorageManager=l},4891:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryAppendQueryString=function(e,t,r){return r?e+t+"="+encodeURIComponent(r)+"&":e}},2473:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserSyncParams=function(e,t,r){let i={};return e&&("boolean"==typeof e.gdprApplies&&(i.gdpr=Number(e.gdprApplies)),"string"==typeof e.consentString&&(i.gdpr_consent=e.consentString)),t&&(i.us_privacy=encodeURIComponent(t)),r?.gppString&&(i.gpp=r.gppString,i.gpp_sid=r.applicableSections?.toString()),i}},1019:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewportCoordinates=function(){try{let{scrollY:e,scrollX:t}=(0,i.getWindowTop)(),{height:r,width:o}=n();return{top:e,right:t+o,bottom:e+r,left:t}}catch(e){return{}}},t.getViewportSize=n;var i=r(7750);function n(){let e=(0,i.getWinDimensions)();try{let t=e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight||0;return{width:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth||0,height:t}}catch(e){return{}}}},5101:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.auctionStore=void 0,t.weakStore=n;var i=r(1171);function n(e){let t=new WeakMap;return function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e(r);if(null!=n)return t.has(n)||t.set(n,i),t.get(n)}}t.auctionStore=()=>n(e=>i.auctionManager.index.getAuction({auctionId:e}))},5723:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e,t;return{parse:function(t){return(!e&&(e=new DOMParser),e).parseFromString(t,"application/xml")},serialize:function(e){return(!t&&(t=new XMLSerializer),t).serializeToString(e)}}}},2177:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(7581),a=r(1620),s=r(6553),d=r(9287),l=r(4767),c=r(9246);let u="33acrossId",p="33acrossIdFp",g="33acrossIdTp",f="33acrossIdHm",m=(0,d.getStorageManager)({moduleType:l.MODULE_TYPE_UID,moduleName:u}),h={domainOverride:(0,c.domainOverrideToRootDomain)(m,u)};function b(e){if(m.cookiesAreEnabled()){let t=new Date(0).toUTCString();m.setCookie(e,"",t,"Lax",h.domainOverride())}m.removeDataFromLocalStorage(e)}function y(e,t){let r;return t.find(t=>(t===d.STORAGE_TYPE_COOKIES?r=m.getCookie(e):t===d.STORAGE_TYPE_LOCALSTORAGE&&(r=m.getDataFromLocalStorage(e)),!!r)),r}let v={name:u,gvlid:58,decode:e=>({[u]:{envelope:e}}),getId(e){let{params:t={},enabledStorageTypes:r=[],storage:i={}}=e,{gdpr:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t.pid)return void(0,n.logError)(`${u}: Submodule requires a partner ID to be defined`);if(a?.gdprApplies===!0)return void(0,n.logWarn)(`${u}: Submodule cannot be used where GDPR applies`);let{storeFpid:l=!0,storeTpid:c=!0,apiUrl:v="https://lexicon.33across.com/v1/envelope",pid:A,hem:I}=t,E=I||window._33across?.hem?.sha256;return{callback(e){(0,o.ajaxBuilder)(1e4)(v,{success(t){let o={};try{var a;o=(a=JSON.parse(t)).succeeded?a.data.envelope?{envelope:a.data.envelope,fp:a.data.fp,tp:a.data.tp}:((0,n.logMessage)(`${u}: No envelope was received`),{}):("Cookied User"==a.error?(0,n.logMessage)(`${u}: Unsuccessful response`.concat(" ",a.error)):(0,n.logError)(`${u}: Unsuccessful response`.concat(" ",a.error)),{})}catch(e){(0,n.logError)(`${u}: ID reading error:`,e)}o.envelope||["","_last","_exp","_cst"].forEach(e=>{b(`${u}${e}`)}),function(e,t){let{enabledStorageTypes:r,expires:i,...n}=t;(function(e,t){let{tp:r,fp:i,hem:n}=e,{storeFpid:o,storeTpid:a,envelopeAvailable:s}=t,d=[];return o&&d.push([p,i,!i],[f,n,!s]),a&&d.push([g,r,!r]),d})(e,n).forEach(e=>{!function(e,t){let[r,i,n]=e;n?b(r):i&&function(e,t,r){let{enabledStorageTypes:i,expires:n}=r;i.forEach(r=>{if(r===d.STORAGE_TYPE_COOKIES){let r=new Date(Date.now()+864e5*n);m.setCookie(e,t,r.toUTCString(),"Lax",h.domainOverride())}else r===d.STORAGE_TYPE_LOCALSTORAGE&&m.setDataInLocalStorage(e,t)})}(r,i,t)}(e,{enabledStorageTypes:r,expires:i})})}({fp:o.fp,tp:o.tp,hem:E},{storeFpid:l,storeTpid:c,envelopeAvailable:!!o.envelope,enabledStorageTypes:r,expires:i.expires}),e(o.envelope)},error(t){(0,n.logError)(`${u}: ID error response`,t),e()}},function(e,t,r){let{pid:i,pubProvidedHem:n}=e,o=s.uspDataHandler.getConsentData(),a=s.coppaDataHandler.getCoppa(),d=s.gppDataHandler.getConsentData(),l={pid:i,gdpr:0,src:"pbjs",ver:"9.53.2",coppa:Number(a)};if(o&&(l.us_privacy=o),d){let{gppString:e="",applicableSections:t=[]}=d;l.gpp=e,l.gpp_sid=encodeURIComponent(t.join(","))}t?.consentString&&(l.gdpr_consent=t.consentString);let c=y(p,r);c&&(l.fp=encodeURIComponent(c));let u=y(g,r);u&&(l.tp=encodeURIComponent(u));let m=n||y(f,r);return m&&(l.sha256=encodeURIComponent(m)),l}({pid:A,pubProvidedHem:E},a,r),{method:"GET",withCredentials:!0})}}},domainOverride:h.domainOverride,eids:{"33acrossId":{source:"33across.com",atype:1,getValue:function(e){return e.envelope}}}};(0,a.submodule)("userId",v),(0,i.registerModule)("33acrossIdSystem")},4784:function(e,t,r){"use strict";let i,n,o;var a,s=r(3800),d=r(4321),l=r(5110);let c="allowActivities",u=`${c} config`;a=l.registerActivityControl,i=new Map,n=new Map,o=new Map,d.config.getConfig(c,e=>{o.clear(),Array.from(i.values()).flatMap(e=>Array.from(e.values())).forEach(e=>e()),i.clear(),Array.from(n.values()).forEach(e=>e()),n.clear(),Object.entries(e[c]).forEach(e=>{let[t,r]=e;!1===r.default&&(n.has(t)||n.set(t,a(t,u,function(){return{allow:!1,reason:"activity denied by default"}},1/0)));let s=new Map;o.set(t,s),(r.rules||[]).forEach(e=>{let t=null==e.priority?1:e.priority;s.has(t)||s.set(t,[]),s.get(t).push(e)}),Array.from(s.keys()).forEach(e=>{let r;return i.has(t)||i.set(t,new Map),void(!(r=i.get(t)).has(e)&&r.set(e,a(t,u,function(r){for(let i of o.get(t).get(e))if(!i.condition||i.condition(Object.fromEntries(Object.entries(r).filter(e=>{let[t]=e;return!t.startsWith("_")}))))return{allow:i.allow,reason:i}},e)))})})}),(0,s.registerModule)("allowActivities")},6586:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(836),a=r(4321),s=r(256),d=r(4030),l=r(4312),c=r(9287),u=r(1928),p=r(3020),g=r(6680),f=r(2379),m=r(4091),h=r(8938),b=r(2334),y=r(1493);let v="appnexus",A=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],I=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay","placement","plcmt"],E=["age","externalUid","external_uid","segments","gender","dnt","language"],S=["geo","device_id"],_=["enabled","dongle","member_id","debug_timeout"],T={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},O={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5,"in-feed":6,interstitial:7,accompanying_content_pre_roll:8,accompanying_content_mid_roll:9,accompanying_content_post_roll:10}},C={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},w=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,x=(0,c.getStorageManager)({bidderCode:v}),R=new Map([[1,"Mobile/Tablet - General"],[2,"Personal Computer"],[3,"Connected TV"],[4,"Phone"],[5,"Tablet"],[6,"Connected Device"],[7,"Set Top Box"],[8,"OOH Device"]]),D={code:v,gvlid:32,aliases:h.appnexusAliases,supportedMediaTypes:[d.BANNER,d.VIDEO,d.NATIVE],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.placement_id||e.params.member&&(e.params.invCode||e.params.inv_code))},buildRequests:function(e,t){var r;let i,o,s,d=(e=(0,g.convertOrtbRequestToProprietaryNative)(e)).map(P),l=(e||[]).find(N),c={};!0===a.config.getConfig("coppa")&&(c={coppa:!0}),l&&Object.keys(l.params.user).filter(e=>E.includes(e)).forEach(e=>{let t=(0,h.convertCamelToUnderscore)(e);if("segments"===e&&(0,n.isArray)(l.params.user[e])){let r=[];l.params.user[e].forEach(e=>{(0,n.isNumber)(e)?r.push({id:e}):(0,n.isPlainObject)(e)&&r.push(e)}),c[t]=r}else"segments"!==e&&(c[t]=l.params.user[e])});let u=(e||[]).find(U);u&&u.params&&u.params.app&&(o={},Object.keys(u.params.app).filter(e=>S.includes(e)).forEach(e=>o[e]=u.params.app[e]));let f=(e||[]).find(j);f&&f.params&&u.params.app&&u.params.app.id&&(s={appid:f.params.app.id});let v={},A={},I=x.getCookie("apn_prebid_debug")||null;if(I)try{v=JSON.parse(I)}catch(e){(0,n.logError)("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(T).forEach(e=>{let t=(0,n.getParameterByName)(e);(0,n.isStr)(t)&&""!==t&&(v[T[e]]=t,v.enabled=!0)}),v=(0,b.convertTypes)({member_id:"number",debug_timeout:"number"},v);let t=(e||[]).find(M);t&&t.debug&&(v=t.debug)}v&&v.enabled&&Object.keys(v).filter(e=>_.includes(e)).forEach(e=>{A[e]=v[e]});let O=(e||[]).find(B),C=O?parseInt(O.params.member,10):0,w=e[0].schain,D=(e||[]).find($),k={tags:[...d],user:c,sdk:{source:"pbjs",version:"9.53.2"},schain:w};D&&(k.iab_support={omidpn:"Appnexus",omidpv:"9.53.2"}),C>0&&(k.member_id=C),u&&(k.device=o),f&&(k.app=s),t?.ortb2?.device&&(k.device=k.device||{},(0,n.mergeDeep)(k.device,Object.keys(i={useragent:(r=t.ortb2.device).ua,devicetype:R.get(r.devicetype),make:r.make,model:r.model,os:r.os,os_version:r.osv,w:r.w,h:r.h,ppi:r.ppi,pxratio:r.pxratio}).reduce((e,t)=>(i[t]&&(e[t]=i[t]),e),{})));let L=(0,n.deepClone)(t&&t.ortb2),F=(0,n.deepClone)(a.config.getConfig("appnexusAuctionKeywords"))||{},W=(0,m.getANKeywordParam)(L,F);if(W.length>0&&(k.keywords=W),a.config.getConfig("adpod.brandCategoryExclusion")&&(k.brand_category_uniqueness=!0),A.enabled&&(k.debug=A,(0,n.logInfo)("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(A,null,4))),t&&t.gdprConsent&&(k.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){let e=t.gdprConsent.addtlConsent,r=e.substring(e.indexOf("~")+1);k.gdpr_consent.addtl_consent=r.split(".").map(e=>parseInt(e,10))}if(t&&t.uspConsent&&(k.us_privacy=t.uspConsent),t?.gppConsent?k.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:t?.ortb2?.regs?.gpp&&(k.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){let e={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map(e=>encodeURIComponent(e)).join(",")},r=t.refererInfo.canonicalUrl;(0,n.isStr)(r)&&""!==r&&(e.rd_can=r),k.referrer_detection=e}if((e||[]).find(V)&&e.filter(V).forEach(e=>{let t=function(e,t){let{durationRangeSec:r,requireExactDuration:i}=t.mediaTypes.video,n=function(e){let{adPodDurationSec:t,durationRangeSec:r,requireExactDuration:i}=e,n=Math.floor(t/Math.min(...r));return i?Math.max(n,r.length):n}(t.mediaTypes.video),o=Math.max(...r),a=e.filter(e=>e.uuid===t.bidId),s=(0,h.fill)(...a,n);if(i){let e=Math.ceil(n/r.length),t=(0,y.chunk)(s,e);r.forEach((e,r)=>{t[r].map(t=>{q(t,"minduration",e),q(t,"maxduration",e)})})}else s.map(e=>q(e,"maxduration",o));return s}(d,e),r=k.tags.filter(t=>t.uuid!==e.bidId);k.tags=[...r,...t]}),e[0].userIdAsEids?.length>0){let t=[];e[0].userIdAsEids.forEach(e=>{e&&e.uids&&!(e.uids.length<1)&&e.uids.forEach(r=>{let i={source:e.source,id:r.id};"adserver.org"==e.source||"adsrvr.org"==e.source?i.rti_partner="TDID":"uidapi.com"==e.source&&(i.rti_partner="UID2"),t.push(i)})}),t.length&&(k.eids=t)}if(t?.ortb2?.regs?.ext?.dsa){let e=t.ortb2.regs.ext.dsa,r={};if(["dsarequired","pubrender","datatopub"].forEach(t=>{(0,n.isNumber)(e[t])&&(r[t]=e[t])}),(0,n.isArray)(e.transparency)&&e.transparency.every(e=>(0,n.isPlainObject)(e))){let t=[];e.transparency.forEach(e=>{(0,n.isStr)(e.domain)&&""!=e.domain&&(0,n.isArray)(e.dsaparams)&&e.dsaparams.every(e=>(0,n.isNumber)(e))&&t.push(e)}),t.length>0&&(r.transparency=t)}(0,n.isEmpty)(r)||(k.dsa=r)}return d[0].publisher_id&&(k.publisher_id=d[0].publisher_id),function(e,t){let r=[],i={withCredentials:!0},o="https://ib.adnxs.com/ut/v3/prebid";if((0,p.hasPurpose1Consent)(t?.gdprConsent)||(o="https://ib.adnxs-simple.com/ut/v3/prebid"),("TRUE"===(0,n.getParameterByName)("apn_test").toUpperCase()||!0===a.config.getConfig("apn_test"))&&(i.customHeaders={"X-Is-Test":1}),e.tags.length>15){let a=(0,n.deepClone)(e);(0,y.chunk)(e.tags,15).forEach(e=>{a.tags=e;let n=JSON.stringify(a);r.push({method:"POST",url:o,data:n,bidderRequest:t,options:i})})}else{let n=JSON.stringify(e);r={method:"POST",url:o,data:n,bidderRequest:t,options:i}}return r}(k,t)},interpretResponse:function(e,t){let{bidderRequest:r}=t;e=e.body;let i=[];if(!e||e.error){let t=`in response for ${r.bidderCode} adapter`;return e&&e.error&&(t+=`: ${e.error}`),(0,n.logError)(t),i}if(e.tags&&e.tags.forEach(e=>{var t;let a=(t=e)&&t.ads&&t.ads.length&&(t.ads||[]).find(e=>e.rtb);if(a&&(!0===u.bidderSettings.get(r.bidderCode,"allowZeroCpmBids")?a.cpm>=0:a.cpm>0)&&this.supportedMediaTypes.includes(a.ad_type)){let t,s=function(e,t,r){let i=(0,n.getBidRequest)(e.uuid,[r]),a=(0,n.getUniqueIdentifierStr)(),s={adId:a,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:i.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};if(t.adomain&&(s.meta=Object.assign({},s.meta,{advertiserDomains:[t.adomain]})),t.advertiser_id&&(s.meta=Object.assign({},s.meta,{advertiserId:t.advertiser_id})),t.dsa&&(s.meta=Object.assign({},s.meta,{dsa:t.dsa})),t.buyer_member_id&&(s.meta=Object.assign({},s.meta,{dchain:{ver:"1.0",complete:0,nodes:[{bsid:t.buyer_member_id.toString()}]}})),t.brand_id&&(s.meta=Object.assign({},s.meta,{brandId:t.brand_id})),t.rtb.video)switch(Object.assign(s,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),(0,n.deepAccess)(i,"mediaTypes.video.context")){case d.ADPOD:let c=f.APPNEXUS_CATEGORY_MAPPING[t.brand_category_id]?f.APPNEXUS_CATEGORY_MAPPING[t.brand_category_id]:null;s.meta=Object.assign({},s.meta,{primaryCatId:c});let u=t.deal_priority;s.video={context:d.ADPOD,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:u},s.vastUrl=t.rtb.video.asset_url;break;case l.OUTSTREAM:if(s.adResponse=e,s.adResponse.ad=s.adResponse.ads[0],s.adResponse.ad.video=s.adResponse.ad.rtb.video,s.vastXml=t.rtb.video.content,t.renderer_url){let i=(r.bids||[]).find(t=>t.bidId===e.uuid),a=(0,n.deepAccess)(i,"mediaTypes.video.renderer.options");a||(a=(0,n.deepAccess)(i,"renderer.options")),s.renderer=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.Renderer.install({id:t.renderer_id,url:t.renderer_url,config:r,loaded:!1,adUnitCode:e});try{i.setRender(L)}catch(e){(0,n.logWarn)("Prebid Error calling setRender on renderer",e)}return i.setEventHandlers({impression:()=>(0,n.logMessage)("AppNexus outstream video impression event"),loaded:()=>(0,n.logMessage)("AppNexus outstream video loaded event"),ended:()=>{(0,n.logMessage)("AppNexus outstream renderer video event"),document.querySelector(`#${e}`).style.display="none"}}),i}(s.adUnitCode,t,a)}break;case l.INSTREAM:s.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}else if(t.rtb[d.NATIVE]){let e,r=t.rtb[d.NATIVE];if(function(e){if(!e||""===e)return!1;let t=e.match(w),r=null!=t&&t.length>=1,i=e.match("trk.js"),n=null!=i&&i.length>=1;return e.startsWith("<script")&&n&&r}(t.viewability.config)){let r="pbjs_adid="+a+";pbjs_auc="+i.adUnitCode;e=t.viewability.config.replace("dom_id=%native_dom_id%",r)}let o=r.javascript_trackers;void 0==o?o=e:(0,n.isStr)(o)?o=[o,e]:o.push(e),s[d.NATIVE]={title:r.title,body:r.desc,body2:r.desc2,cta:r.ctatext,rating:r.rating,sponsoredBy:r.sponsored,privacyLink:r.privacy_link,address:r.address,downloads:r.downloads,likes:r.likes,phone:r.phone,price:r.price,salePrice:r.saleprice,clickUrl:r.link.url,displayUrl:r.displayurl,clickTrackers:r.link.click_trackers,impressionTrackers:r.impression_trackers,video:r.video,javascriptTrackers:o},r.main_img&&(s[d.NATIVE].image={url:r.main_img.url,height:r.main_img.height,width:r.main_img.width}),r.icon&&(s[d.NATIVE].icon={url:r.icon.url,height:r.icon.height,width:r.icon.width}),s[d.NATIVE].ext={video:r.video,customImage1:r.image1&&{url:r.image1.url,height:r.image1.height,width:r.image1.width},customImage2:r.image2&&{url:r.image2.url,height:r.image2.height,width:r.image2.width},customImage3:r.image3&&{url:r.image3.url,height:r.image3.height,width:r.image3.width},customImage4:r.image4&&{url:r.image4.url,height:r.image4.height,width:r.image4.width},customImage5:r.image5&&{url:r.image5.url,height:r.image5.height,width:r.image5.width},customIcon1:r.icon1&&{url:r.icon1.url,height:r.icon1.height,width:r.icon1.width},customIcon2:r.icon2&&{url:r.icon2.url,height:r.icon2.height,width:r.icon2.width},customIcon3:r.icon3&&{url:r.icon3.url,height:r.icon3.height,width:r.icon3.width},customIcon4:r.icon4&&{url:r.icon4.url,height:r.icon4.height,width:r.icon4.width},customIcon5:r.icon5&&{url:r.icon5.url,height:r.icon5.height,width:r.icon5.width},customSocialIcon1:r.socialicon1&&{url:r.socialicon1.url,height:r.socialicon1.height,width:r.socialicon1.width},customSocialIcon2:r.socialicon2&&{url:r.socialicon2.url,height:r.socialicon2.height,width:r.socialicon2.width},customSocialIcon3:r.socialicon3&&{url:r.socialicon3.url,height:r.socialicon3.height,width:r.socialicon3.width},customSocialIcon4:r.socialicon4&&{url:r.socialicon4.url,height:r.socialicon4.height,width:r.socialicon4.width},customSocialIcon5:r.socialicon5&&{url:r.socialicon5.url,height:r.socialicon5.height,width:r.socialicon5.width},customTitle1:r.title1,customTitle2:r.title2,customTitle3:r.title3,customTitle4:r.title4,customTitle5:r.title5,customBody1:r.body1,customBody2:r.body2,customBody3:r.body3,customBody4:r.body4,customBody5:r.body5,customCta1:r.ctatext1,customCta2:r.ctatext2,customCta3:r.ctatext3,customCta4:r.ctatext4,customCta5:r.ctatext5,customDisplayUrl1:r.displayurl1,customDisplayUrl2:r.displayurl2,customDisplayUrl3:r.displayurl3,customDisplayUrl4:r.displayurl4,customDisplayUrl5:r.displayurl5,customSocialUrl1:r.socialurl1,customSocialUrl2:r.socialurl2,customSocialUrl3:r.socialurl3,customSocialUrl4:r.socialurl4,customSocialUrl5:r.socialurl5}}else{Object.assign(s,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(let e=0;e<t.rtb.trackers[0].impression_urls.length;e++){let r=t.rtb.trackers[0].impression_urls[e],i=(0,n.createTrackPixelHtml)(r);s.ad+=i}}catch(e){(0,n.logError)("Error appending tracking pixel",e)}}return s}(e,a,r);s.mediaType=(t=a.ad_type)===d.VIDEO?d.VIDEO:t===d.NATIVE?d.NATIVE:d.BANNER,i.push(s)}}),e.debug&&e.debug.debug_info){let t="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;t=t.replace(/(<td>|<th>)/gm,"	").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/igm,""),(0,n.logMessage)("https://console.appnexus.com/docs/understanding-the-debug-auction"),(0,n.logMessage)(t)}return i},getUserSyncs:function(e,t,r,i,n){return e.iframeEnabled&&(0,p.hasPurpose1Consent)(r)?[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]:e.pixelEnabled?["https://px.ads.linkedin.com/setuid?partner=appNexus"].map(e=>({type:"image",url:e})):void 0}};function P(e){let t={};Object.keys(e.params).forEach(t=>{let r=(0,h.convertCamelToUnderscore)(t);r!==t&&(e.params[r]=e.params[t],delete e.params[t])}),t.sizes=k(e.sizes),t.primary_size=t.sizes[0],t.ad_types=[],t.uuid=e.bidId,e.params.placement_id?t.id=parseInt(e.params.placement_id,10):t.code=e.params.inv_code;let r=(0,n.getParameterByName)("ast_override_div");if((0,n.isStr)(r)&&""!==r){let i=decodeURIComponent(r).split(",").find(t=>t.startsWith(`${e.adUnitCode}:`));if(i){let e=i.split(":")[1];e&&(t.force_creative_id=parseInt(e,10))}}t.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,t.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,t.prebid=!0,t.disable_psa=!0;let i=function(e){if(!(0,n.isFn)(e.getFloor))return e.params.reserve?e.params.reserve:null;let t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return(0,n.isPlainObject)(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}(e);if(i&&(t.reserve=i),e.params.position)t.position=({above:1,below:2})[e.params.position]||0;else{let r=(0,n.deepAccess)(e,"mediaTypes.banner.pos")||(0,n.deepAccess)(e,"mediaTypes.video.pos");(0===r||1===r||3===r)&&(t.position=3===r?2:r)}e.params.traffic_source_code&&(t.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(t.private_sizes=k(e.params.private_sizes)),e.params.supply_type&&(t.supply_type=e.params.supply_type),e.params.pub_click&&(t.pubclick=e.params.pub_click),e.params.ext_inv_code&&(t.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(t.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(t.external_imp_id=e.params.external_imp_id);let o=(0,m.getANKewyordParamFromMaps)((0,m.convertKeywordStringToANMap)((0,n.deepAccess)(e,"ortb2Imp.ext.data.keywords")),e.params?.keywords);o.length>0&&(t.keywords=o);let a=(0,n.deepAccess)(e,"ortb2Imp.ext.gpid")||(0,n.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");if(a&&(t.gpid=a),(e.mediaType===d.NATIVE||(0,n.deepAccess)(e,`mediaTypes.${d.NATIVE}`))&&(t.ad_types.push(d.NATIVE),0===t.sizes.length&&(t.sizes=k([1,1])),e.nativeParams)){var s;let r,i=(s=e.nativeParams,r={},Object.keys(s).forEach(e=>{let t=C[e]&&C[e].serverName||C[e]||e,i=C[e]&&C[e].requiredParams;if(r[t]=Object.assign({},i,s[e]),(t===C.image.serverName||t===C.icon.serverName)&&r[t].sizes){let e=r[t].sizes;((0,n.isArrayOfNums)(e)||(0,n.isArray)(e)&&e.length>0&&e.every(e=>(0,n.isArrayOfNums)(e)))&&(r[t].sizes=k(r[t].sizes))}t===C.privacyLink&&(r.privacy_supported=!0)}),r);t[d.NATIVE]={layouts:[i]}}{let r=(0,n.deepAccess)(e,`mediaTypes.${d.VIDEO}`),i=(0,n.deepAccess)(e,"mediaTypes.video.context");r&&"adpod"===i?t.hb_source=7:t.hb_source=1,(e.mediaType===d.VIDEO||r)&&t.ad_types.push(d.VIDEO),(e.mediaType===d.VIDEO||r&&"outstream"!==i)&&(t.require_asset_url=!0),e.params.video&&(t.video={},Object.keys(e.params.video).filter(e=>A.includes(e)).forEach(r=>{switch(r){case"context":case"playback_method":let i=e.params.video[r];i=(0,n.isArray)(i)?i[0]:i,t.video[r]=O[r][i];break;case"frameworks":break;default:t.video[r]=e.params.video[r]}}),e.params.video.frameworks&&(0,n.isArray)(e.params.video.frameworks)&&(t.video_frameworks=e.params.video.frameworks)),r&&(t.video=t.video||{},Object.keys(r).filter(e=>I.includes(e)).forEach(e=>{switch(e){case"minduration":case"maxduration":"number"!=typeof t.video[e]&&(t.video[e]=r[e]);break;case"skip":"boolean"!=typeof t.video.skippable&&(t.video.skippable=1===r[e]);break;case"skipafter":"number"!=typeof t.video.skipoffset&&(t.video.skippoffset=r[e]);break;case"playbackmethod":if("number"!=typeof t.video.playback_method){let i=r[e];(i=(0,n.isArray)(i)?i[0]:i)>=1&&i<=4&&(t.video.playback_method=i)}break;case"api":!t.video_frameworks&&(0,n.isArray)(r[e])&&(t.video_frameworks=r[e].map(e=>{let t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t}).filter(e=>e));break;case"startdelay":case"plcmt":case"placement":if("number"!=typeof t.video.context){let e=r.plcmt,i=r.placement,n=r.startdelay,o=function(e,t){if(e){if(2===e){if(void 0===t)return;if(0===t)return"accompanying_content_pre_roll";if(-1===t)return"accompanying_content_mid_roll";if(-2===t)return"accompanying_content_post_roll"}else if(3===e)return"interstitial";else if(4===e)return"outstream"}}(e,n)||function(e){if(e){if(2===e)return"in-banner";else if(3===e)return"outstream";else if(4===e)return"in-feed";else if(5===e)return"intersitial"}}(i)||function(e){if(void 0!==e){if(0===e)return"pre_roll";else if(-1===e)return"mid_roll";else if(-2===e)return"post_roll"}}(n);t.video.context=O.context[o]}}})),e.renderer&&(t.video=Object.assign({},t.video,{custom_renderer_present:!0}))}return e.params.frameworks&&(0,n.isArray)(e.params.frameworks)&&(t.banner_frameworks=e.params.frameworks),(0,n.deepAccess)(e,`mediaTypes.${d.BANNER}`)&&t.ad_types.push(d.BANNER),0===t.ad_types.length&&delete t.ad_types,t}function k(e){let t=[],r={};if((0,n.isArray)(e)&&2===e.length&&!(0,n.isArray)(e[0]))r.width=parseInt(e[0],10),r.height=parseInt(e[1],10),t.push(r);else if("object"==typeof e)for(let i=0;i<e.length;i++){let n=e[i];(r={}).width=parseInt(n[0],10),r.height=parseInt(n[1],10),t.push(r)}return t}function N(e){return!!e.params.user}function B(e){return!!parseInt(e.params.member,10)}function U(e){if(e.params)return!!e.params.app}function j(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function M(e){return!!e.debug}function V(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===d.ADPOD}function $(e){let t=!1,r=e.params,i=e.params.video;return r.frameworks&&(0,n.isArray)(r.frameworks)&&(t=e.params.frameworks.includes(6)),!t&&i&&i.frameworks&&(0,n.isArray)(i.frameworks)&&(t=e.params.video.frameworks.includes(6)),t}function q(e,t,r){(0,n.isEmpty)(e.video)&&(e.video={}),e.video[t]=r}function L(e,t){var r=e.adUnitCode;try{let e=document.getElementById(r).querySelectorAll("div[id^='google_ads']");e[0]&&e[0].style.setProperty("display","none")}catch(e){}var i=e.adUnitCode;try{let e=document.getElementById(i).querySelectorAll("script[id^='sas_script']");e[0].nextSibling&&"iframe"===e[0].nextSibling.localName&&e[0].nextSibling.style.setProperty("display","none")}catch(e){}e.renderer.push(()=>{(t?.defaultView||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},F.bind(null,e))})}function F(e,t,r){e.renderer.handleVideoEvent({id:t,eventName:r})}(0,s.registerBidder)(D),(0,i.registerModule)("appnexusBidAdapter")},4290:function(e,t,r){"use strict";var i=r(3800),n=r(7581),o=r(1620),a=r(783),s=r(9287),d=r(7750),l=r(4767);let c="connectId",u="__PIXEL_ID__",p=`https://ups.analytics.yahoo.com/ups/${u}/fed`,g=["pixelId","he","puid"],f=["yahoo.com","aol.com","aol.ca","aol.de","aol.co.uk","engadget.com","techcrunch.com","autoblog.com"],m=(0,s.getStorageManager)({moduleType:l.MODULE_TYPE_UID,moduleName:c});function h(e){let t=Date.now()+31536e6;m.cookiesAreEnabled()&&b(c,JSON.stringify(e),new Date(t),A()),m.localStorageIsEnabled()&&m.setDataInLocalStorage(c,JSON.stringify(e))}function b(e,t,r,i){let n=i.split(".");for(let i=0;i<n.length;++i){let o=n.slice(n.length-i-1,n.length).join(".");try{m.setCookie(e,t,r.toUTCString(),null,"."+o);let i=m.getCookie(e);if(i&&i===t)break}catch(e){}}}function y(){if(m.localStorageIsEnabled()){let e=m.getDataFromLocalStorage(c);if(e){try{e=JSON.parse(e)}catch(e){(0,d.logError)(`${c} module: error while reading the local storage data.`)}return(0,d.isPlainObject)(e)&&e.__expires&&e.__expires<=Date.now()?(m.removeDataFromLocalStorage(c),null):e}}return null}function v(e){if(function(){let e=(0,a.getRefererInfo)().ref;if(e){let t=(e=(0,d.parseUrl)(e).hostname).split(".");e=t.slice(t.length-2,t.length).join(".")}return f.indexOf(e)>=0}())return!0;if((0,d.isPlainObject)(e)&&e.lastSynced){let t=e.ttl||12096e5;return e.lastSynced+t<=Date.now()}return!1}function A(){return(0,d.parseUrl)((0,a.getRefererInfo)().page).hostname}let I={name:c,gvlid:25,decode(e){if(!I.userHasOptedOut())return(0,d.isPlainObject)(e)&&(e.connectId||e.connectid)?{connectId:e.connectId||e.connectid}:void 0},getId(e,t){let r;if(I.userHasOptedOut())return;let i=e.params||{};if(!i||void 0===i.pixelId&&void 0===i.endpoint)return void(0,d.logError)(`${c} module: configuration requires the 'pixelId'.`);let n=((r=function(){if(m.cookiesAreEnabled())try{return JSON.parse(m.getCookie(c))}catch{}return null}())||(r=y())&&!v(r)&&function(){if(!m.cookiesAreEnabled())return;let e=y(),t=Date.now()+31536e6;b(c,JSON.stringify(e),new Date(t),A())}(),r),o=v(n);if(n&&((0,d.isPlainObject)(n)&&n.puid&&n.lastUsed&&!i.puid&&n.lastUsed+2592e6<=Date.now()&&(delete n.puid,o=!0),(i.he&&i.he!==n.he||i.puid&&i.puid!==n.puid)&&(o=!0),!o))return n.lastUsed=Date.now(),h(n),{id:n};let s=t.usp||"",l={v:"1","1p":[1,"1",!0].includes(i["1p"])?"1":"0",gdpr:I.isEUConsentRequired(t?.gdpr)?"1":"0",gdpr_consent:I.isEUConsentRequired(t?.gdpr)?t.gdpr.consentString:"",us_privacy:s},f=t.gpp;f&&(l.gpp=`${f.gppString?f.gppString:""}`,Array.isArray(f.applicableSections)&&(l.gpp_sid=f.applicableSections.join(",")));let E=(0,a.getRefererInfo)().topmostLocation;"string"==typeof E&&(l.url=E.split("?")[0]),g.forEach(e=>{void 0!==i[e]&&(l[e]=i[e])});let S=i.he||n?.he;S&&(l.he=S),!l.puid&&n?.puid&&(l.puid=n.puid);let _={callback:function(e){let t=p.replace(u,i.pixelId),r=`${i.endpoint||t}?${(0,d.formatQS)(l)}`;I.getAjaxFn()(r,{success:t=>{let r;if(t)try{if(r=JSON.parse(t),(0,d.isPlainObject)(r)&&Object.keys(r).length>0&&(r.connectId||r.connectid)){if(r.he=i.he,r.puid=i.puid||r.puid,r.lastSynced=Date.now(),r.lastUsed=Date.now(),(0,d.isNumber)(r.ttl)){let e=60*r.ttl*6e4;e>12096e5&&(e=12096e5),r.ttl=e}h(r)}else(0,d.logError)(`${c} module: UPS response returned an invalid payload ${t}`)}catch(e){(0,d.logError)(e)}e(r)},error:t=>{(0,d.logError)(`${c} module: ID fetch encountered an error`,t),e()}},null,{method:"GET",withCredentials:!0})}};return o&&n&&(_.id=n),_},isEUConsentRequired:e=>!!e?.gdprApplies,userHasOptedOut(){try{if(m.localStorageIsEnabled())return"1"===m.getDataFromLocalStorage("connectIdOptOut");return!0}catch{return!1}},getAjaxFn:()=>n.ajax,eids:{connectId:{source:"yahoo.com",atype:3}}};(0,o.submodule)("userId",I),(0,i.registerModule)("connectIdSystem")},9121:function(e,t,r){"use strict";let i,n;var o=r(3800),a=r(7750),s=r(4321),d=g(r(6553)),l=r(7557),c=r(1620),u=r(5189),p=r(1578);function g(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(g=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let f="iab",m=50,h=!1,b={iab:function(e){let t,{onSuccess:r,onError:i}=e,n=(t={},{consentDataCallback:(e,n)=>{n&&e.uspString&&(t.usPrivacy=e.uspString),t.usPrivacy?A(t,{onSuccess:r,onError:i}):i("Unable to get USP consent string.")}}),o=(0,p.cmpClient)({apiName:"__uspapi",apiVersion:1,apiArgs:["command","version","callback"]});if(!o)return i("USP CMP not found.");o.isDirect?(0,a.logInfo)("Detected USP CMP is directly accessible, calling it now..."):(0,a.logInfo)("Detected USP CMP is outside the current iframe where Prebid.js is located, calling it now..."),o({command:"getUSPData",callback:n.consentDataCallback}),o({command:"registerDeletion",callback:(e,t)=>(null==t||t)&&d.default.callDataDeletionRequest(e)}).catch(e=>{(0,a.logError)("Error invoking CMP `registerDeletion`:",e)})},static:function(e){let{onSuccess:t,onError:r}=e;A(n,{onSuccess:t,onError:r})}};function y(e){let t=null,r=!1;function i(i,n){if(null!=t&&clearTimeout(t),r=!0,d.uspDataHandler.setConsentData(i),null!=e){for(var o=arguments.length,a=Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];e(n,...a)}}if(!b[f])return void i(null,`USP framework (${f}) is not a supported framework. Aborting consentManagement module and resuming auction.`);let n={onSuccess:i,onError:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i(null,`${e} Resuming auction without consent data as per consentManagement config.`,...r)}};b[f](n),r||(0===m?A(void 0,n):t=setTimeout(n.onError.bind(null,"USPAPI workflow exceeded timeout threshold."),m))}let v=(0,l.timedAuctionHook)("usp",function(e,t){var r=this;h||I(),y(function(i){if(null!=i){for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];(0,a.logWarn)(i,...o)}e.call(r,t)})});function A(e,t){var r;let{onSuccess:n,onError:o}=t;e&&e.usPrivacy?((r=e)&&r.usPrivacy&&(i=r.usPrivacy),n(i)):o("USPAPI returned unexpected value during lookup process.",e)}function I(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h||((0,a.logInfo)(`USPAPI consentManagement module has been activated${e?"":` using default values (api: '${f}', timeout: ${m}ms)`}`),h=!0,d.uspDataHandler.enable()),y()}s.config.getConfig("consentManagement",e=>{var t;(t=(t=e.consentManagement)&&t.usp)&&"object"==typeof t||(0,a.logWarn)("consentManagement.usp config not defined, using defaults"),t&&(0,a.isStr)(t.cmpApi)?f=t.cmpApi:(f="iab",(0,a.logInfo)("consentManagement.usp config did not specify cmpApi. Using system default setting (iab).")),t&&(0,a.isNumber)(t.timeout)?m=t.timeout:(m=50,(0,a.logInfo)("consentManagement.usp config did not specify timeout. Using system default setting (50).")),"static"===f&&((0,a.isPlainObject)(t.consentData)&&(0,a.isPlainObject)(t.consentData.getUSPData)?(t.consentData.getUSPData.uspString&&(n={usPrivacy:t.consentData.getUSPData.uspString}),m=0):(0,a.logError)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),I(!0)}),(0,c.getHook)("requestBids").before(v,50),u.enrichFPD.before(function(e,t){return e(t.then(e=>{let t=d.uspDataHandler.getConsentData();return t&&(0,a.deepSetValue)(e,"regs.ext.us_privacy",t),e}))}),(0,o.registerModule)("consentManagementUsp")},4272:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(256),a=r(4030),s=r(9287),d=r(783),l=r(3020),c=r(836),u=r(4312),p=r(7581),g=r(8256),f=r(1927);let m="criteo",h=(0,s.getStorageManager)({bidderCode:m}),b="Criteo: ",y=(0,f.ortb25Translator)(),v="cto_optout",A="cto_bundle",I=(0,g.ortbConverter)({context:{netRevenue:!0,ttl:60},imp:function(e,t,r){let i=e(t,r),o=t.params;if(i.tagid=t.adUnitCode,(0,n.deepSetValue)(i,"ext",{...t.params.ext,...i.ext,rwdd:i.rwdd,floors:function(e){try{let t={},r=function(e){if(e.getFloor)return e.getFloor;if(e.params.bidFloor&&e.params.bidFloorCur)try{let t=parseFloat(e.params.bidFloor);return()=>({currency:e.params.bidFloorCur,floor:t})}catch{}}(e);if(r)return e.mediaTypes?.banner&&(t.banner={},O(e?.mediaTypes?.banner?.sizes).forEach(i=>t.banner[C(i).toString()]=r.call(e,{size:i,mediaType:a.BANNER}))),e.mediaTypes?.video&&(t.video={},O(e?.mediaTypes?.video?.playerSize).forEach(i=>t.video[C(i).toString()]=r.call(e,{size:i,mediaType:a.VIDEO}))),e.mediaTypes?.native&&(t.native={},t.native["*"]=r.call(e,{size:"*",mediaType:a.NATIVE})),t}catch(e){(0,n.logError)("Could not parse floors from Prebid: "+e)}}(t),bidder:{publishersubid:o?.publisherSubId,zoneid:o?.zoneId,uid:o?.uid}}),delete i.rwdd,!r.fledgeEnabled&&i.ext.igs?.ae&&delete i.ext.igs.ae,w(t)){let e=t.params.video;void 0!==e&&(0,n.deepSetValue)(i,"video",{...i.video,skip:i.video.skip||e.skip||0,placement:i.video.placement||e.placement,minduration:i.video.minduration||e.minduration,playbackmethod:i.video.playbackmethod||e.playbackmethod,startdelay:i.video.startdelay||e.startdelay||0}),(0,n.deepSetValue)(i,"video.ext",{context:t.mediaTypes.video.context,playersizes:O(t?.mediaTypes?.video?.playerSize,C),plcmt:t.mediaTypes.video.plcmt,poddur:t.mediaTypes.video.adPodDurationSec,rqddurs:t.mediaTypes.video.durationRangeSec})}if(i.native&&void 0!==i.native.request){let e=JSON.parse(i.native.request);e.assets&&(1!==e.assets.length||Object.keys(e.assets[0]).length)||delete e.assets,(0,n.deepSetValue)(i,"native.request_native",e),delete i.native.request}return i},request:function(e,t,r,i){let o=e(t,r,i);return void 0!==i.publisherId&&(void 0!==o.app?(0,n.deepSetValue)(o,"app.publisher.id",i.publisherId):(0,n.deepSetValue)(o,"site.publisher.id",i.publisherId)),r&&r.gdprConsent&&(0,n.deepSetValue)(o,"regs.ext.gdprversion",r.gdprConsent.apiVersion),o=y(o)},bidResponse:function(e,t,r){r.mediaType=t?.ext?.mediatype,r.mediaType===a.NATIVE&&void 0!==t.adm_native&&(t.adm=t.adm_native,delete t.adm_native);let i=e(t,r),{bidRequest:o}=r;return i.currency=t?.ext?.cur,void 0!==t?.ext?.meta&&(0,n.deepSetValue)(i,"meta",{...i.meta,...t.ext.meta}),void 0!==t?.ext?.paf?.content_id&&(0,n.deepSetValue)(i,"meta.paf.content_id",t.ext.paf.content_id),i.mediaType===a.VIDEO&&(i.vastUrl=t.ext?.displayurl,o?.mediaTypes?.video?.context===u.OUTSTREAM&&(i.renderer=function(e){if(e.ext?.videoPlayerConfig===void 0||e.ext?.videoPlayerType===void 0)return;let t=c.Renderer.install({url:"https://static.criteo.net/js/ld/publishertag.renderer.js",config:{documentResolver:(e,t,r)=>r??t}});return t.setRender((t,r)=>{let i={slotid:e.id,vastUrl:e.ext?.displayurl,vastXml:e.adm,documentContext:r},n=e.ext.videoPlayerConfig;window.CriteoOutStream[e.ext.videoPlayerType].play(i,n)}),t}(t))),i},response:function(e,t,r,i){let o=e(t,r,i),a=r?.ext?.paf?.transmission;return o.bids.forEach(e=>{void 0!==a&&void 0!==e?.meta?.paf?.content_id?(0,n.deepSetValue)(e,"meta.paf.transmission",a):delete e.meta.paf}),o}}),E={code:m,gvlid:91,supportedMediaTypes:[a.BANNER,a.VIDEO,a.NATIVE],getUserSyncs:function(e,t,r,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},{gppString:a="",applicableSections:s=[]}=o,c=(0,d.getRefererInfo)(),u="criteoPrebidAdapter";if(e.iframeEnabled&&(0,l.hasPurpose1Consent)(r)){let e=[];if(e.push(`origin=${u}`),e.push(`topUrl=${c.domain}`),r&&(r.gdprApplies&&e.push(`gdpr=${+(!0==r.gdprApplies)}`),r.consentString&&e.push(`gdpr_consent=${r.consentString}`)),i&&e.push(`us_privacy=${i}`),e.push(`gpp=${a}`),Array.isArray(s))for(let t of s)e.push(`gpp_sid=${t}`);let t=Math.random().toString(),o={bundle:S(A),cw:h.cookiesAreEnabled(),lsw:h.localStorageIsEnabled(),optoutCookie:S(v),origin:u,requestId:t,tld:c.domain,topUrl:c.domain,version:"9.53.2".replace(/\./g,"_")};window.addEventListener("message",function e(r){if(!r.data||"https://gum.criteo.com"!=r.origin||r.data.requestId!==t)return;this.removeEventListener("message",e),r.stopImmediatePropagation();let i=r.data;i.optout?(T(A),_(v,!0,43200,c.domain)):(i.bundle&&_(A,i.bundle,9360,c.domain),i?.callbacks?.forEach?.(n.triggerPixel))},!0);let d=JSON.stringify(o).replace(/"/g,"%22");return[{type:"iframe",url:`https://gum.criteo.com/syncframe?${e.join("&")}#${d}`}]}if(e.pixelEnabled&&(0,l.hasPurpose1Consent)(r)){let e=[];if(e.push("profile=207"),r&&(!0===r.gdprApplies&&e.push("gdprapplies=true"),r.consentString&&e.push(`gdpr=${r.consentString}`)),i&&e.push(`ccpa=${i}`),e.push(`gpp=${a}`),Array.isArray(s))for(let t of s)e.push(`gpp_sid=${t}`);return[{type:"image",url:`https://ssp-sync.criteo.com/user-sync/redirect?${e.join("&")}`}]}return[]},isBidRequestValid:e=>{var t;let r;return!(!(e&&e.params&&(e.params.zoneId||e.params.networkId))||w(e)&&(t=e,r=!0,["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach(function(e){"placement"===e?t?.mediaTypes?.video?.[e]===void 0&&t?.params?.video?.[e]===void 0&&t?.mediaTypes?.video?.plcmt===void 0&&t?.params?.video?.plcmt===void 0&&(r=!1,(0,n.logError)("Criteo Bid Adapter: mediaTypes.video."+e+" or mediaTypes.video.plcmt is required")):t?.mediaTypes?.video?.[e]===void 0&&t?.params?.video?.[e]===void 0&&(r=!1,(0,n.logError)("Criteo Bid Adapter: mediaTypes.video."+e+" is required"))}),!r))},buildRequests:(e,t)=>{var r,i,o;let a,s,d;e.forEach(e=>{var t,r;t=e,t?.mediaTypes?.native!==void 0&&((r=e).nativeParams&&(r.nativeParams.image&&(!0!==r.nativeParams.image.sendId||!0===r.nativeParams.image.sendTargetingKeys)||r.nativeParams.icon&&(!0!==r.nativeParams.icon.sendId||!0===r.nativeParams.icon.sendTargetingKeys)||r.nativeParams.clickUrl&&(!0!==r.nativeParams.clickUrl.sendId||!0===r.nativeParams.clickUrl.sendTargetingKeys)||r.nativeParams.displayUrl&&(!0!==r.nativeParams.displayUrl.sendId||!0===r.nativeParams.displayUrl.sendTargetingKeys)||r.nativeParams.privacyLink&&(!0!==r.nativeParams.privacyLink.sendId||!0===r.nativeParams.privacyLink.sendTargetingKeys)||r.nativeParams.privacyIcon&&(!0!==r.nativeParams.privacyIcon.sendId||!0===r.nativeParams.privacyIcon.sendTargetingKeys))&&(0,n.logWarn)(b+"all native assets containing URL should be sent as placeholders with sendId(icon, image, clickUrl, displayUrl, privacyLink, privacyIcon)"),e?.nativeOrtbRequest?.assets==null&&((0,n.logWarn)(b+"native asset requirements are missing"),(0,n.deepSetValue)(e,"nativeOrtbRequest.assets",[{}])))});let l=(r=e,i=t,a=(0,n.parseUrl)(i?.refererInfo?.topmostLocation).search,{url:i?.refererInfo?.page||"",debug:"1"===a.pbt_debug,noLog:"1"===a.pbt_nolog,fledgeEnabled:i.paapi?.enabled,amp:r.some(e=>"amp"===e.params.integrationMode),networkId:r.find(e=>e.params?.networkId)?.params.networkId,publisherId:r.find(e=>e.params?.pubid)?.params.pubid}),c=(o=l,s="https://grid-bidder.criteo.com/openrtb_2_5/pbjs/auction/request"+("?profileId=207&av="+String(37)+("&wv="+encodeURIComponent("9.53.2"))+("&cb="+String(Math.floor(0x174876e7ff*Math.random())))),h.localStorageIsEnabled()?s+="&lsavail=1":s+="&lsavail=0",o.amp&&(s+="&im=1"),o.debug&&(s+="&debug=1"),o.noLog&&(s+="&nolog=1"),(d=S(A))&&(s+=`&bundle=${d}`),S(v)&&(s+="&optout=1"),o.networkId&&(s+="&networkId="+o.networkId),s),u=I.toORTB({bidderRequest:t,bidRequests:e,context:l});if(u)return{method:"POST",url:c,data:u,bidRequests:e}},interpretResponse:(e,t)=>{if(void 0===e?.body)return[];let r=I.fromORTB({response:e.body,request:t.data}).bids||[],i=e.body?.ext?.igi?.filter(e=>(0,n.isArray)(e?.igs)).flatMap(e=>e.igs);return i?.length?{bids:r,paapi:i}:r},onDataDeletionRequest:e=>{let t=S(A);t&&(T(A),(0,p.ajax)("https://privacy.criteo.com/api/privacy/datadeletionrequest",null,JSON.stringify({publisherUserId:t}),{contentType:"application/json",method:"POST"}))}};function S(e){let t=h.getCookie(e),r=h.getDataFromLocalStorage(e);return t||r||void 0}function _(e,t,r,i){let n=new Date;n.setTime(n.getTime()+60*r*6e4);let o=`expires=${n.toUTCString()}`,a=i.split(".");for(let r=0;r<a.length;++r){let i=a.slice(a.length-r-1,a.length).join(".");try{h.setCookie(e,t,o,null,"."+i);let r=h.getCookie(e);if(r&&r===t)break}catch(e){}}h.setDataInLocalStorage(e,t)}function T(e){h.setCookie(e,"",0),h.removeDataFromLocalStorage(e)}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return void 0==e?[]:Array.isArray(e[0])?e.map(e=>t(e)):[t(e)]}function C(e){return e[0]+"x"+e[1]}function w(e){return e?.mediaTypes?.video!==void 0}(0,o.registerBidder)(E),(0,i.registerModule)("criteoBidAdapter")},9222:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(7581),a=r(783),s=r(1620),d=r(9287),l=r(4767),c=r(6553);let u="criteo",p=(0,d.getStorageManager)({moduleType:l.MODULE_TYPE_UID,moduleName:u}),g="cto_bidid",f="cto_bundle",m="html5",h="cookie",b=new Date(0).toString(),y=new Date((0,n.timestamp)()+33696e6).toString();function v(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,n.parseUrl)(e,{noDecodeWholeURL:!0});return t?`${r.hostname}`:`${r.protocol}://${r.hostname}${r.port?":"+r.port:""}/`}function A(e,t){return e?.storage?.type===m?p.getDataFromLocalStorage(t):e?.storage?.type===h?p.getCookie(t):p.getCookie(t)||p.getDataFromLocalStorage(t)}function I(e,t,r,i){t&&r&&(e?.storage?.type===m?p.setDataInLocalStorage(t,r):(e?.storage?.type===h||p.setDataInLocalStorage(t,r),E(t,r,y,i,!0)))}function E(e,t,r,i,n){let o=i.split(".");for(let i=0;i<o.length;++i){let a=o.slice(o.length-i-1,o.length).join(".");try{if(p.setCookie(e,t,r,null,"."+a),n){let r=p.getCookie(e);if(r&&r===t)break}}catch(e){}}}(0,s.submodule)("userId",{name:u,gvlid:91,decode:e=>e,getId(e){let t={bundle:A(e,f),dnaBundle:A(e,"cto_dna_bundle"),bidId:A(e,g)};return{id:t.bidId?{criteoId:t.bidId}:void 0,callback:r=>{var i,s;let d,l,u,y,A,S,_,T,O,C;return d=(e?.storage?.type===void 0||e?.storage?.type===h)&&p.cookiesAreEnabled(),l=(e?.storage?.type===void 0||e?.storage?.type===m)&&p.localStorageIsEnabled(),u=v((0,a.getRefererInfo)().page),y=v(document.location.href,!0),A="undefined"!=typeof criteo_pubtag,i=t.bundle,s=t.dnaBundle,S=`https://gum.criteo.com/sid/json?origin=prebid${u?"&topUrl="+encodeURIComponent(u):""}${y?"&domain="+encodeURIComponent(y):""}${i?"&bundle="+encodeURIComponent(i):""}${s?"&info="+encodeURIComponent(s):""}${d?"&cw=1":""}${A?"&pbt=1":""}${l?"&lsw=1":""}`,(_=c.uspDataHandler.getConsentData())&&(S+=`&us_privacy=${encodeURIComponent(_)}`),(T=c.gdprDataHandler.getConsentData())&&(S+=`${T.consentString?"&gdprString="+encodeURIComponent(T.consentString):""}&gdpr=${+(!0===T.gdprApplies)}`),(O=c.gppDataHandler.getConsentData())&&(S+=`${O.gppString?"&gpp="+encodeURIComponent(O.gppString):""}${O.applicableSections?"&gpp_sid="+encodeURIComponent(O.applicableSections):""}`),C=S,void(0,o.ajax)(C,{success:t=>{let i=JSON.parse(t);if(i.pixels&&i.pixels.forEach(t=>{t.writeBundleInStorage&&t.bundlePropertyName&&t.storageKeyName?(0,o.ajax)(t.pixelUrl,{success:r=>{if(r){let i=JSON.parse(r);i&&i[t.bundlePropertyName]&&I(e,t.storageKeyName,i[t.bundlePropertyName],y)}},error:e=>{(0,n.logError)("criteoIdSystem: unable to sync user id",e)}},void 0,{method:"GET",withCredentials:!0}):(0,n.triggerPixel)(t.pixelUrl)}),i.acwsUrl?("string"==typeof i.acwsUrl?[i.acwsUrl]:i.acwsUrl).forEach(e=>(0,n.triggerPixel)(e)):i.bundle&&I(e,f,i.bundle,y),i.bidId)I(e,g,i.bidId,y),r({criteoId:i.bidId});else E(g,"",b,y,!0),p.removeDataFromLocalStorage(g),r()},error:e=>{(0,n.logError)("criteoIdSystem: unable to sync user id",e),r()}},void 0,{method:"GET",contentType:"application/json",withCredentials:!0})}}},eids:{criteoId:{source:"criteo.com",atype:1}}}),(0,i.registerModule)("criteoIdSystem")},2253:function(e,t,r){"use strict";let i,n;var o=r(3800),a=r(7750),s=r(8878),d=r(7581),l=r(4321),c=r(1620),u=r(7148),p=r(5177),g=r(7557),f=r(2506),m=r(5189),h=r(1375);let b=[],y={},v=!1,A=!0,I="USD";var E=!1,S={};let _={},T=(0,u.defer)(),O=(0,h.timeoutQueue)(),C=0;function w(e){n?((0,a.logWarn)(e),(0,a.logWarn)("Currency failed loading rates, falling back to currency.defaultRates")):(0,a.logError)(e)}function x(){A?(A=!1,v=!1,(0,d.ajax)(i,{success:function(e){try{S=JSON.parse(e),(0,a.logInfo)("currencyRates set to "+JSON.stringify(S)),y={},v=!0,k(),O.resume()}catch(t){w("Failed to parse currencyRates response: "+e)}},error:function(){w(...arguments),v=!0,k(),O.resume(),A=!0}})):k()}l.config.getConfig("currency",e=>(function(e){if(i="https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json?date=$$TODAY$$",null!==e.rates&&"object"==typeof e.rates&&(S.conversions=e.rates,v=!0,A=!1),null!==e.defaultRates&&"object"==typeof e.defaultRates&&(n=e.defaultRates,S.conversions=n,v=!0),"string"==typeof e.adServerCurrency){C=e.auctionDelay,(0,a.logInfo)("enabling currency support",arguments),I=e.adServerCurrency,e.conversionRateFile&&((0,a.logInfo)("currency using override conversionRateFile:",e.conversionRateFile),i=e.conversionRateFile);let t=i.indexOf("$$TODAY$$");if(-1!==t){let e=new Date,r=`${e.getMonth()+1}`,n=`${e.getDate()}`;r.length<2&&(r=`0${r}`),n.length<2&&(n=`0${n}`);let o=`${e.getFullYear()}${r}${n}`;i=`${i.substring(0,t)}${o}${i.substring(t+9,i.length)}`}y={},E||(E=!0,(0,o.getGlobal)().convertCurrency=(e,t,r)=>parseFloat(e)*N(t,r),(0,c.getHook)("addBidResponse").before(D,100),(0,c.getHook)("responsesReady").before(R),m.enrichFPD.before(U),(0,c.getHook)("requestBids").before(j,50),(0,f.on)(s.EVENTS.AUCTION_TIMEOUT,P),(0,f.on)(s.EVENTS.AUCTION_INIT,x),x())}else C=0,(0,a.logInfo)("disabling currency support"),function(){E&&((0,c.getHook)("addBidResponse").getHooks({hook:D}).remove(),(0,c.getHook)("responsesReady").getHooks({hook:R}).remove(),m.enrichFPD.getHooks({hook:U}).remove(),(0,c.getHook)("requestBids").getHooks({hook:j}).remove(),(0,f.off)(s.EVENTS.AUCTION_TIMEOUT,P),(0,f.off)(s.EVENTS.AUCTION_INIT,x),delete(0,o.getGlobal)().convertCurrency,I="USD",y={},E=!1,v=!1,A=!0,S={},_={},T=(0,u.defer)())}();"object"==typeof e.bidderCurrencyDefault&&(_=e.bidderCurrencyDefault)})(e.currency));function R(e,t){e(t.then(()=>T.promise))}let D=(0,g.timedBidResponseHook)("currency",function(e,t,r,i){if(!r)return e.call(this,t,r,i);let n=r.bidderCode||r.bidder;if(_[n]){let e=_[n];r.currency&&e!==r.currency?(0,a.logWarn)(`Currency default '${n}: ${e}' ignored. adapter specified '${r.currency}'`):r.currency=e}if(r.currency||((0,a.logWarn)('Currency not specified on bid.  Defaulted to "USD"'),r.currency="USD"),r.getCpmInNewCurrency=function(e){return(parseFloat(this.cpm)*N(this.currency,e)).toFixed(3)},r.currency===I)return e.call(this,t,r,i);b.push([e,this,t,r,i]),(!E||v)&&k()});function P(e){let{auctionId:t}=e;b=b.filter(e=>{let[r,i,n,o,a]=e;if(o.auctionId!==t)return!0;a(s.REJECTION_REASON.CANNOT_CONVERT_CURRENCY)})}function k(){for(;b.length>0;){let[e,t,r,i,n]=b.shift();if(void 0!==i&&"currency"in i&&"cpm"in i){let e=i.currency;try{let t=N(e);1!==t&&(i.cpm=(parseFloat(i.cpm)*t).toFixed(4),i.currency=I)}catch(e){(0,a.logWarn)("getCurrencyConversion threw error: ",e),n(s.REJECTION_REASON.CANNOT_CONVERT_CURRENCY);continue}}e.call(t,r,i,n)}T.resolve()}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;var r,i=null;let n=`${e}->${t}`;if(n in y)i=y[n],(0,a.logMessage)("Using conversionCache value "+i+" for "+n);else if(!1===E)if("USD"===e)i=1;else throw Error("Prebid currency support has not been enabled and fromCurrency is not USD");else if(e===t)i=1;else if(e in S.conversions){if(!(t in(r=S.conversions[e])))throw Error("Specified adServerCurrency in config '"+t+"' not found in the currency rates file");i=r[t],(0,a.logInfo)("getCurrencyConversion using direct "+e+" to "+t+" conversionRate "+i)}else if(t in S.conversions){if(!(e in(r=S.conversions[t])))throw Error("Specified fromCurrency '"+e+"' not found in the currency rates file");i=B(1/r[e],4),(0,a.logInfo)("getCurrencyConversion using reciprocal "+e+" to "+t+" conversionRate "+i)}else{var o=Object.keys(S.conversions)[0];if(!(e in S.conversions[o]))throw Error("Specified fromCurrency '"+e+"' not found in the currency rates file");var s=1/S.conversions[o][e];if(!(t in S.conversions[o]))throw Error("Specified adServerCurrency in config '"+t+"' not found in the currency rates file");i=B(s*S.conversions[o][t],4),(0,a.logInfo)("getCurrencyConversion using intermediate "+e+" thru "+o+" to "+t+" conversionRate "+i)}return n in y||((0,a.logMessage)("Adding conversionCache value "+i+" for "+n),y[n]=i),i}function B(e,t){var r=1;for(let e=0;e<t;e++)r+="0";return Math.round(e*r)/r}function U(e,t){return e(t.then(e=>((0,a.deepSetValue)(e,"ext.prebid.adServerCurrency",I),e)))}(0,p.registerOrtbProcessor)({type:p.REQUEST,name:"currency",fn:function(e,t,r){E&&(e.cur=e.cur||[r.currency||I])}});let j=(0,g.timedAuctionHook)("currency",function(e,t){let r,i=(r=this,()=>e.call(r,t));!v&&C>0?O.submit(C,i,()=>{(0,a.logWarn)(`currency: Fetch attempt did not return in time for auction ${t.auctionId}`),i()}):i()});(0,o.registerModule)("currency")},1757:function(e,t,r){"use strict";var i=r(5824),n=r(3800),o=r(5767),a=r(9186),s=r(3645),d=r(1171),l=r(4321),c=r(8878),u=A(r(2506)),p=r(1620),g=r(783),f=r(9204),m=r(7750),h=r(6981),b=r(2948),y=r(7581),v=i(r(5723));function A(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(A=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let I={ri:g.getRefererInfo},E="VASTAdTagURI";function S(e){if(!e.params&&!e.url)return void(0,m.logError)("A params object or a url is required to use pbjs.adServers.dfp.buildVideoUrl");let t=e.adUnit,r=e.bid||f.targeting.getWinningBids(t.code)[0],i={};if(e.url&&(i=(0,m.parseUrl)(e.url,{noDecodeWholeURL:!0}),(0,m.isEmpty)(e.params))){var n,a,l;let t;return n=i,a=r,l=e,(t=_(a,n,"search"))&&(n.search.description_url=t),n.search.cust_params=T(a,l,n.search.cust_params),(0,m.buildUrl)(n)}let c={correlator:Date.now(),sz:(0,m.parseSizesInput)(t?.mediaTypes?.video?.playerSize).join("|"),url:encodeURIComponent(location.href)},u=i.search,p=u&&u.sz;p&&(c.sz=p+"|"+c.sz);let g=T(r,e,u&&u.cust_params),b=Object.assign({},h.DEFAULT_DFP_PARAMS,i.search,c,e.params,{cust_params:g},(0,h.gdprParams)()),y=_(r,e,"params");if(y&&(b.description_url=y),!b.ppid){let e=(0,s.getPPID)();null!=e&&(b.ppid=e)}let v=e.adUnit?.mediaTypes?.video;Object.entries({plcmt:()=>v?.plcmt,vpos(){let e=v?.startdelay;if((0,m.isNumber)(e))return -2===e?"postroll":-1===e||e>0?"midroll":"preroll"},vpmute(){if(Array.isArray(v?.playbackmethod)){let e=v.playbackmethod.some(e=>[2,6].includes(e)),t=v.playbackmethod.some(e=>[1,3,4,5].includes(e));if(e&&!t)return"1";if(t&&!e)return"0"}}}).forEach(e=>{let[t,r]=e;if(!b.hasOwnProperty(t)){let e=r();null!=e&&(b[t]=e)}});let A=d.auctionManager.index.getBidRequest(e.bid||{})?.ortb2??d.auctionManager.index.getAuction(e.bid||{})?.getFPD()?.global,I=(0,o.getSignals)(A);return I.length&&(b.ppsj=btoa(JSON.stringify({PublisherProvidedTaxonomySignals:I}))),(0,m.buildUrl)(Object.assign({},h.DFP_ENDPOINT,i,{search:b}))}function _(e,t,r){return t?.[r]?.description_url||encodeURIComponent(I.ri().page)}function T(e,t,r){let i=e&&e.adserverTargeting||{},n={},o=t&&t.adUnit;if(o){let e=f.targeting.getAllTargeting(o.code);n=e?e[o.code]:{}}let a=Object.assign({},{hb_uuid:e&&e.videoCacheKey},{hb_cache_id:e&&e.videoCacheKey},n,i);u.emit(c.EVENTS.SET_TARGETING,{[o.code]:a});let s=Object.assign({},a,t?.params?.cust_params),d=encodeURIComponent((0,m.formatQS)(s));return r&&(d=r+"%26"+d),d}async function O(e,t){try{let r=(0,v.default)(),i=r.parse(e),n=i.querySelectorAll(E)[0];if(!n||!n.textContent)return e;let o=RegExp("[A-Fa-f0-9]{8}-(?:[A-Fa-f0-9]{4}-){3}[A-Fa-f0-9]{12}","gi"),a=Array.from(n.textContent.matchAll(o)).map(e=>{let[t]=e;return t}).filter(e=>t.has(e));if(1!=a.length)return(0,m.logWarn)(`Unable to determine unique uuid in ${E}`),e;let s=a[0],d=t.get(s),l=await w(d),c=i.createCDATASection(l);return n.textContent="",n.appendChild(c),r.serialize(i)}catch(t){return(0,m.logWarn)("Unable to process xml",t),e}}async function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.vastLocalCache,r=S(e),i=await (0,y.fetch)(r);if(!i.ok)throw Error("Unable to fetch GAM VAST wrapper");let n=await i.text();return l.config.getConfig("cache.useLocal")?await O(n,t):n}async function w(e){let t=await (0,y.fetch)(e);if(!t.ok)throw(0,m.logError)("Unable to fetch blob"),Error("Blob not found");let r=await t.text();return`data://text/xml;base64,${btoa(r)}`}l.config.getConfig("brandCategoryTranslation.translationFile")&&(0,p.getHook)("registerAdserver").before(function(e){e.call(this,"dfp")}),(0,a.registerVideoSupport)("dfp",{buildVideoUrl:S,getVastXml:C}),(0,n.registerModule)("dfpAdServerVideo")},3638:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(7581),a=r(1620),s=r(783);function d(e,t){if(t){let r=t.split("?")[0];if(e.has(r)){let i=e.get(r);t.length>i.length&&e.set(r,t)}else e.set(r,t)}}(0,a.submodule)("userId",{name:"fabrickId",decode:e=>e&&e.fabrickId?{fabrickId:e.fabrickId}:void 0,getId(e,t,r){try{let l=e&&e.params||{};if(window.fabrickMod1&&window.fabrickMod1(l,t?.gdpr,r),!l||!l.apiKey||"string"!=typeof l.apiKey)return void(0,n.logError)("fabrick submodule requires an apiKey.");try{var i,a;let e=(i=l).url?i.url:"https://fid.agkn.com/f?",c=Object.keys(l);for(let t in c){let r=c[t];if("url"===r||"refererInfo"===r||r.length>3&&"max"===r.substring(0,3))continue;let i=l[r];if(Array.isArray(i))for(let t in i)("string"==typeof i[t]||"number"==typeof i[t])&&(e+=`${r}=${i[t]}&`);else("string"==typeof i||"number"==typeof i)&&(e+=`${r}=${i}&`)}e=e.slice(0,-1);let u=(a=l).refererInfo?a.refererInfo:(0,s.getRefererInfo)(),p=new Map;return d(p,u.topmostLocation),u.stack&&u.stack[0]&&d(p,u.stack[0]),d(p,u.canonicalUrl),d(p,window.location.href),p.forEach(t=>{e=function(e,t,r,i){let n=i&&i.maxUrlLen||2e3,o=i&&i.maxRefLen||1e3,a=i&&i.maxSpaceAvailable||50;if(!r||!(e.length<n-a))return e;{let t=n-e.length;return t>o&&(t=o),(r=`&r=${encodeURIComponent(r)}`).length>=t&&("%"===(r=r.substring(0,t)).charAt(r.length-1)?r=r.substring(0,t-1):"%"===r.charAt(r.length-2)&&(r=r.substring(0,t-2))),`${e}${r}`}}(e,"r",t,l)}),{callback:function(i){(0,o.ajax)(e,{success:e=>{if(window.fabrickMod2)return window.fabrickMod2(i,e,l,t?.gdpr,r);{let t;if(e)try{t=JSON.parse(e)}catch(e){(0,n.logError)(e),t={}}i(t)}},error:e=>{(0,n.logError)("fabrickId fetch encountered an error",e),i()}},null,{method:"GET",withCredentials:!0})}}}catch(e){(0,n.logError)("fabrickIdSystem encountered an error",e)}}catch(e){(0,n.logError)("fabrickIdSystem encountered an error",e)}},eids:{fabrickId:{source:"neustar.biz",atype:1}}}),(0,i.registerModule)("fabrickIdSystem")},3793:function(e,t,r){"use strict";var i=r(3800),n=r(4321),o=r(1620),a=r(7750),s=r(7148),d=r(7557);let l=[],c=(0,d.timedAuctionHook)("fpd",function(e,t){(function(){let{global:e={},bidder:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.config.getConfig("firstPartyData")||{},i=s.PbPromise.resolve({global:e,bidder:t});return l.sort((e,t)=>(e.queue||1)-(t.queue||1)).forEach(e=>{i=i.then(t=>{let{global:i,bidder:n}=t;return s.PbPromise.resolve(e.processFpd(r,{global:i,bidder:n})).catch(t=>((0,a.logError)(`Error in FPD module ${e.name}`,t),{})).then(e=>({global:e.global||i,bidder:e.bidder||n}))})}),i})(t.ortb2Fragments).then(r=>{Object.assign(t.ortb2Fragments,r),e.call(this,t)})});(0,o.module)("firstPartyData",function(e){l.push(e)}),(0,o.getHook)("startAuction").before(c,10),(0,i.registerModule)("fpdModule")},6583:function(e,t,r){"use strict";var i=r(3800),n=l(r(7750)),o=r(1620),a=r(9287),s=r(4389),d=r(4767);function l(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(l=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let c="ftrackId",u="FTRACK - ",p="html5",g="ftrackId",f=`${g}_privacy`,m=(0,a.getStorageManager)({moduleType:d.MODULE_TYPE_UID,moduleName:c}),h={gdpr:{applies:0,consentString:null,pd:null},usPrivacy:{value:null}};(0,o.submodule)("userId",{name:"ftrack",decode(e,t){if(!e)return;let r={ftrackId:{uid:"",ext:{}}};for(var i in e){let t=e[i];Array.isArray(t)?t=t.join("|"):"string"!=typeof e[i]&&(t=""),r.ftrackId.ext[i]=t}return r.ftrackId.ext.hasOwnProperty("DeviceID")&&(r.ftrackId.uid=r.ftrackId.ext.DeviceID),r},getId(e,t,r){if(!1!==this.isConfigOk(e)&&!1!==this.isThereConsent(t))return{callback:function(t){window.D9v={UserID:"99999999999999",CampID:"3175",CCampID:"148556"},window.D9r={callback:function(e){return e&&(m.setDataInLocalStorage(`${g}_exp`,new Date(Date.now()+2592e6).toUTCString()),m.setDataInLocalStorage(`${g}`,JSON.stringify(e)),m.setDataInLocalStorage(`${f}_exp`,new Date(Date.now()+2592e6).toUTCString()),m.setDataInLocalStorage(`${f}`,JSON.stringify(h))),"function"==typeof t&&t(e),e}},e.params.hasOwnProperty("ids")?(e.params.ids.hasOwnProperty("device id")&&!0===e.params.ids["device id"]&&(window.D9r.DeviceID=!0),e.params.ids.hasOwnProperty("single device id")&&!0===e.params.ids["single device id"]&&(window.D9r.SingleDeviceID=!0),e.params.ids.hasOwnProperty("household id")&&!0===e.params.ids["household id"]&&(window.D9r.HHID=!0)):(window.D9r.DeviceID=!0,window.D9r.SingleDeviceID=!0),(0,s.loadExternalScript)(e.params.url,d.MODULE_TYPE_UID,c)}}},extendId(e,t,r){return this.isConfigOk(e),r},isConfigOk:function(e){return e.storage&&e.storage.type&&e.storage.name?(e.storage.type!==p&&n.logWarn(u+'config.storage.type recommended to be "'+p+'".'),e.storage.name!==g&&n.logWarn(u+'config.storage.name recommended to be "'+g+'".'),!!e.hasOwnProperty("params")&&!!e.params.hasOwnProperty("url")||(n.logWarn(u+"config.params.url is required for ftrack to run."),!1)):(n.logError(u+"config.storage required to be set."),!1)},isThereConsent:function(e){let t,r,i=!0,{gdpr:o,usp:a}=e??{};return(o?.gdprApplies===!0||o?.gdprApplies===1)&&(h.gdpr.applies=1,i=!1),void 0===o?.consentString||n.isEmpty(o.consentString)||n.isEmptyStr(o.consentString)||(h.gdpr.consentString=e.consentString),void 0===a||n.isEmpty(a)||n.isEmptyStr(a)||(h.usPrivacy.value=a,t=a[0],r=a[2]),1==t&&"Y"===r&&(i=!1),i},eids:{ftrackId:{source:"flashtalking.com",atype:1,getValue:function(e){let t="";return e&&e.ext&&e.ext.DeviceID&&(t=e.ext.DeviceID),t},getUidExt:function(e){return e&&e.ext}}}}),(0,i.registerModule)("ftrackIdSystem")},1753:function(e,t,r){"use strict";var i=r(5824),n=r(3800),o=i(r(4645)),a=r(7750),s=r(2506),d=i(r(6553)),l=r(7581);let c={batchSize:1,batchDelay:100,method:"POST"},u={handler:"function",batchSize:"number",batchDelay:"number",gvlid:"number"};d.default.registerAnalyticsAdapter({adapter:function(){let e,t,r,i,n=(0,o.default)({analyticsType:"endpoint"}),{logError:d,logWarn:p}=(0,a.prefixLog)("Generic analytics:"),g=[],f=0;function m(){let e=g;g=[],f++;try{if(20===f&&d("detected probable infinite recursion, discarding events",e),f>=20)return;try{t(e)}catch(e){d("error executing options.handler",e)}}finally{f--}}return Object.assign(Object.create(n),{gvlid:e=>e?.options?.gvlid,enableAnalytics(r){if(function(e){if(!e.url&&!e.handler)return d("options must specify either `url` or `handler`"),!1;if(e.hasOwnProperty("method")&&!["GET","POST"].includes(e.method))return d("options.method must be GET or POST"),!1;for(let[t,r]of Object.entries(u))if(e.hasOwnProperty(t)&&typeof e[t]!==r)return d(`options.${t} must be a ${r}`),!1;if(e.hasOwnProperty("events")){if(!(0,a.isPlainObject)(e.events))return d("options.events must be an object"),!1;for(let[t,r]of Object.entries(e.events))if((0,s.has)(t)||p(`options.events.${t} does not match any known Prebid event`),"function"!=typeof r)return d(`options.events.${t} must be a function`),!1}return!0}(r?.options||{})){var o;t=(e=Object.assign({},c,r.options)).handler||function(e){let{url:t,method:r,batchSize:i,ajax:n=(0,l.ajaxBuilder)()}=e,o={success(){},error(){}},a=i>1?e=>e:e=>e[0],s="GET"===r?e=>({data:JSON.stringify(e)}):e=>JSON.stringify(e);return function(e){n(t,o,s(a(e)),{method:r,keepalive:!0})}}(e),i=(o=e.events)?function(e){let{eventType:t,args:r}=e;if(o.hasOwnProperty(t))try{return o[t](r)}catch(e){d(`error executing options.events.${t}`,e)}}:e=>e,n.enableAnalytics.call(this,r)}},track(t){let n=i(t);null!=n&&(g.push(n),null!=r&&(clearTimeout(r),r=null),g.length>=e.batchSize?m():r=setTimeout(m,e.batchDelay))}})}(),code:"generic"}),(0,n.registerModule)("genericAnalyticsAdapter")},2355:function(e,t,r){"use strict";var i=r(3800),n=r(5767),o=r(1171),a=r(4321),s=r(8878),d=r(1620),l=r(7750),c=void 0;let u={},p=!1;function g(e){return(0,n.getSignals)(e)}let f=e=>(a.config.getConfig("gptPreAuction")||{}).mcmEnabled?e.replace(/(^\/\d*),\d*\//,"$1/"):e;function m(e){(0,l.logWarn)("pbadslot is deprecated and will soon be removed, use gpid instead",e)}let h=function(e,t){let r=(e=>{let{customGptSlotMatching:t}=u;if(!(0,l.isGptPubadsDefined)())return;let r=e.reduce((e,t)=>(e[t.code]=e[t.code]||[],e[t.code].push(t),e),{}),i={};return window.googletag.pubads().getSlots().forEach(e=>{let n=Object.keys(r).find(t?t(e):(0,l.isAdUnitCodeMatchingSlot)(e));if(n){let t={name:"gam",adslot:f(i[n]=e.getAdUnitPath())};r[n].forEach(e=>{(0,l.deepSetValue)(e,"ortb2Imp.ext.data.adserver",Object.assign({},e.ortb2Imp?.ext?.data?.adserver,t))})}}),i})(t),{useDefaultPreAuction:i,customPreAuction:n}=u;t.forEach(e=>{e.ortb2Imp=e.ortb2Imp||{},e.ortb2Imp.ext=e.ortb2Imp.ext||{},e.ortb2Imp.ext.data=e.ortb2Imp.ext.data||{};let t=e.ortb2Imp.ext;if(n||i){let o;t.data?.pbadslot&&m(e);let a=(0,l.deepAccess)(t,"data.adserver.adslot");n?o=n(e,a,r?.[e.code]):i&&(o=((e,t,r)=>{let i=e.ortb2Imp.ext.data;if(i.pbadslot)return i.pbadslot;if((0,l.isGptPubadsDefined)()){var n=window.googletag.pubads().getSlots().filter(e=>e.getAdUnitPath()===r);if(0!==n.length)return 1===n.length?t:`${t}#${e.code}`}})(e,a,r?.[e.code])),o&&(t.gpid=t.data.pbadslot=o)}else{m(e);let r=(e=>{let t=e.ortb2Imp.ext.data,{customPbAdSlot:r}=u;if(!t.pbadslot){if(r){t.pbadslot=r(e.code,(0,l.deepAccess)(t,"adserver.adslot"));return}try{let r=document.getElementById(e.code);if(r.dataset.adslotid){t.pbadslot=r.dataset.adslotid;return}}catch(e){}if((0,l.deepAccess)(t,"adserver.adslot")){t.pbadslot=t.adserver.adslot;return}return t.pbadslot=e.code,!0}})(e);t.gpid||r||(t.gpid=t.data.pbadslot)}});for(var o=arguments.length,a=Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];return e.call(c,t,...a)},b=(e,t)=>{var r;let i,a=(r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.auctionManager.index;return e.map(e=>t.getAuction({auctionId:e})?.getFPD()?.global).map(g).filter(e=>e)}(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.auctionManager;return Object.values(e).flatMap(e=>Object.entries(e)).filter(e=>e[0]===s.TARGETING_KEYS.AD_ID||e[0].startsWith(s.TARGETING_KEYS.AD_ID+"_")).flatMap(e=>e[1]).map(e=>t.findBidByAdId(e)?.auctionId).filter(e=>null!=e).filter(l.uniques)}(t)),i={},n.taxonomies.forEach(e=>{let t=r.flatMap(e=>e).filter(t=>t.taxonomy===e).map(e=>e.values);i[e]=t.length?t.reduce((e,t)=>e.filter(e=>t.includes(e))):[],i[e]={values:i[e]}}),i);window.googletag.setConfig&&window.googletag.setConfig({pps:{taxonomies:a}}),e(t)},y=e=>{(u=(0,l.pick)(e,["enabled",e=>!1!==e,"customGptSlotMatching",e=>"function"==typeof e&&e,"customPbAdSlot",e=>"function"==typeof e&&e,"customPreAuction",e=>"function"==typeof e&&e,"useDefaultPreAuction",e=>e??!0])).enabled?p||((0,d.getHook)("makeBidRequests").before(h),(0,d.getHook)("targetingDone").after(b),p=!0):((0,l.logInfo)("GPT Pre-Auction: Turning off module"),u={},(0,d.getHook)("makeBidRequests").getHooks({hook:h}).remove(),(0,d.getHook)("targetingDone").getHooks({hook:b}).remove(),p=!1)};a.config.getConfig("gptPreAuction",e=>y(e.gptPreAuction)),y({}),(0,i.registerModule)("gptPreAuction")},9172:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(7581),a=r(256),s=r(836),d=r(4030),l=r(4321),c=r(9287),u=r(1419);let p="grid",g="https://grid.bidswitch.net/hbjson",f="tmguid",m=(0,c.getStorageManager)({bidderCode:p}),h={noAdid:"Bid from response has no adid parameter - ",noAdm:"Bid from response has no adm parameter - ",noBid:"Array of bid objects is empty",emptyUids:"Uids should be not empty",emptySeatbid:"Seatbid array from response has empty item",emptyResponse:"Response is empty",hasEmptySeatbidArray:"Response has empty seatbid array",hasNoArrayOfBids:"Seatbid from response has no array of bid objects - "},b={trustx:{endpoint:"https://grid.bidswitch.net/hbjson?sp=trustx",syncurl:"https://x.bidswitch.net/sync?ssp=themediagrid",bidResponseExternal:{netRevenue:!1}},gridNM:{defaultParams:{multiRequest:!0}}},y=!1,v={code:p,gvlid:686,aliases:["playwire","adlivetech","gridNM",{code:"trustx",skipPbsAliasing:!0}],supportedMediaTypes:[d.BANNER,d.VIDEO],isBidRequestValid:function(e){return e&&!!(e.params.uid||e.params.secid)},buildRequests:function(e,t){if(!e.length)return null;let r=null,i=null,o=null,a=null,s=null,c=null,u=null,p=!1,{bidderRequestId:h,gdprConsent:y,uspConsent:v,timeout:A,refererInfo:I,gppConsent:E}=t||{},S=I?encodeURIComponent(I.page):"",_=parseInt(A)||null,T=[],O={},C=[],w=[],x=[];e.forEach(e=>{let s={bid:e,savedPrebidBid:null};if(!e.params.uid&&!e.params.secid)return;h||(h=e.bidderRequestId),o||(o=e.schain),a||(a=e.userIdAsEids),u||(u=b[e.bidder]&&b[e.bidder].endpoint);let{params:l,mediaTypes:c,bidId:g,adUnitCode:f,rtd:m,ortb2Imp:y}=e,{defaultParams:v}=b[e.bidder]||{},{secid:A,pubid:I,source:E,uid:R,keywords:D,forceBidder:P,multiRequest:k,content:N,video:B}={...v,...l},U=function(e,t){let r=e.video?"video":"banner",i=parseFloat(t.params.bidFloor||t.params.floorcpm||0)||null;if("function"==typeof t.getFloor){let e=t.getFloor({currency:"USD",mediaType:r,size:t.sizes.map(e=>{let[t,r]=e;return{w:t,h:r}})});(0,n.isPlainObject)(e)&&"USD"===e.currency&&!isNaN(parseFloat(e.floor))&&(i=Math.max(i,parseFloat(e.floor)))}return i}(c||{},e),j=m&&m.jwplayer&&m.jwplayer.targeting;j&&!i&&j.content&&(i=j.content);let M={id:g.toString(),tagid:(A||R).toString(),ext:{divid:f.toString()}};if(y&&(y.instl&&(M.instl=parseInt(y.instl)||null),y.ext&&(M.ext.gpid=y.ext.gpid?.toString()||y.ext.data?.pbadslot?.toString()||y.ext.data?.adserver?.adslot?.toString(),y.ext.data&&(M.ext.data=y.ext.data))),(0,n.isEmpty)(D)||(r||(r=D),M.ext.bidder={keywords:D}),U&&(M.bidfloor=U),!c||c[d.BANNER]){let t=function(e,t){let r=t.sizes||e.sizes;if(!r||!r.length)return;let i=r.map(e=>(0,n.parseGPTSingleSizeArrayToRtbSize)(e)),o=(0,n.parseGPTSingleSizeArrayToRtbSize)(r[0]);return i.length&&(o.format=i),o}(e,c?c[d.BANNER]:{});t&&(M.banner=t)}if(c&&c[d.VIDEO]){let t=function(e,t,r){let{mind:i,maxd:o,size:a,playerSize:s,protocols:d,durationRangeSec:l=[],...c}={...t,...e};if(a&&(0,n.isStr)(a)){let e=a.split("x");2===e.length&&parseInt(e[0])&&parseInt(e[1])&&(c.w=parseInt(e[0]),c.h=parseInt(e[1]))}if(!c.w||!c.h){let e=((s||r||[]).toString().match(/^\d+,\d+/)||[])[0],t=e&&e.split(",").map(e=>parseInt(e));t&&2===t.length&&Object.assign(c,(0,n.parseGPTSingleSizeArrayToRtbSize)(t))}if(!c.w||!c.h)return;let u=i||l[0]||parseInt(c.minduration)||null,p=o||l[1]||parseInt(c.maxduration)||null;return u&&(c.minduration=u),p&&(c.maxduration=p),d&&d.length&&(c.protocols=d),c}(B,c[d.VIDEO],e.sizes);t&&(M.video=t)}if(M.banner||M.video)if(k){let r={tid:t?.ortb2?.source?.tid?.toString?.(),ext:{wrapper:"Prebid_js",wrapper_version:"9.53.2"}};e.schain&&(r.ext.schain=e.schain);let i={id:e.bidderRequestId&&e.bidderRequestId.toString(),site:{page:S},tmax:_,source:r,imp:[M]};I&&(i.site.publisher={id:I});let n=N||j&&j.content;n&&(i.site.content=n),C.push(i),w.push(E),x.push(s)}else O[g]=s,T.push(M);!p&&P&&b[P]&&(p=P)}),(p=l.config.getConfig("forceBidderName")||p)&&b[p]&&(u=b[p].endpoint,this.forceBidderName=p);let R={tid:t?.ortb2?.source?.tid?.toString?.(),ext:{wrapper:"Prebid_js",wrapper_version:"9.53.2"}};o&&(R.ext.schain=o);let D=T.length||!C.length?{id:h&&h.toString(),site:{page:S},tmax:_,source:R,imp:T}:null;return i&&(D.site.content=i),[...C,D].forEach(e=>{var i;let o;if(!e)return;s=null;let d=(0,n.deepAccess)(t,"ortb2.user.data");d&&d.length&&(s={data:[...d]}),y&&y.consentString&&(c={consent:y.consentString});let u=(0,n.deepAccess)(t,"ortb2.user.ext.device");u&&((c=c||{}).device={...u}),t?.ortb2?.device&&(e.device=t.ortb2.device),a&&a.length&&((c=c||{}).eids=[...a]),c&&Object.keys(c).length&&((s=s||{}).ext=c);let p=m.getDataFromLocalStorage(f)||function(){if(l.config.getConfig("localStorageWriteAllowed")){let e=(0,n.generateUUID)().replace(/-/g,"");return m.setDataInLocalStorage(f,e),e}return null}();p&&((s=s||{}).id=p.toString()),s&&(e.user=s);let g=(0,n.deepAccess)(t,"ortb2.user.keywords")||null,h=(0,n.deepAccess)(t,"ortb2.site.keywords")||null;g&&((r=r||{}).user=r.user||{},r.user.ortb2=[{name:"keywords",keywords:g.split(",")}]),h&&((r=r||{}).site=r.site||{},r.site.ortb2=[{name:"keywords",keywords:h.split(",")}]),r&&(o={},Object.keys(i=r).forEach(e=>{let t=i[e];if(t)if("site"===e||"user"===e){let r={};Object.keys(t).forEach(e=>{if(Array.isArray(t[e])){let i=[];t[e].forEach(e=>{if("object"==typeof e&&e.name){let t={name:e.name,segments:[]};Object.keys(e).forEach(r=>{Array.isArray(e[r])&&e[r].forEach(e=>{e&&("string"==typeof e?t.segments.push({name:r,value:e}):"segments"===r&&"string"==typeof e.name&&"string"==typeof e.value&&t.segments.push(e))})}),t.segments.length&&i.push(t)}}),i.length&&(r[e]=i)}}),o[e]=r}else o[e]=t}),r=Object.keys(o).length&&o)&&(e.ext={keywords:r}),y&&y.gdprApplies&&(e.regs={ext:{gdpr:+!!y.gdprApplies}});let b=(0,n.deepAccess)(t,"ortb2.regs")||{};if(E||b?.gpp){let t={gpp:E?.gppString??b?.gpp,gpp_sid:E?.applicableSections??b?.gpp_sid};e.regs=(0,n.mergeDeep)(e?.regs??{},t)}v&&(e.regs||(e.regs={ext:{}}),e.regs.ext||(e.regs.ext={}),e.regs.ext.us_privacy=v),!0===l.config.getConfig("coppa")&&(e.regs||(e.regs={}),e.regs.coppa=1),b?.ext?.dsa&&(e.regs||(e.regs={ext:{}}),e.regs.ext||(e.regs.ext={}),e.regs.ext.dsa=b.ext.dsa);let A=(0,n.deepAccess)(t,"ortb2.site");if(A){let t=[...A.cat||[],...A.pagecat||[]].filter(e=>e&&"string"==typeof e);t.length&&(e.site.cat=t);let r=(0,n.deepAccess)(A,"content.genre");r&&"string"==typeof r&&(e.site.content={...e.site.content,genre:r});let i=(0,n.deepAccess)(A,"content.data");if(i&&i.length){let t=e.site.content||{};e.site.content=(0,n.mergeDeep)(t,{data:i})}let o=(0,n.deepAccess)(A,"content.id");o&&(e.site.content={...e.site.content,id:o})}}),[...C.map((e,t)=>{let r,i=(u||g).replace(/[?&]sp=([^?&=]+)/,(e,t)=>(t&&(r=t),"")),n=w[t]||r;return{method:"POST",url:i+(i.indexOf("?")>-1?"&":"?")+"no_mapping=1"+(n?`&sp=${n}`:""),data:JSON.stringify(e),bidObject:x[t]}}),...D?[{method:"POST",url:u||g,data:JSON.stringify(D),bidsMap:O}]:[]]},interpretResponse:function(e,t){let r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.Renderer;e=e&&e.body;let o=[];e?e.seatbid&&!e.seatbid.length&&(r=h.hasEmptySeatbidArray):r=h.emptyResponse;let a=this.forceBidderName||this.code;return!r&&e.seatbid&&e.seatbid.forEach(e=>{!function(e,t,r,i,o){let a;if(e){if(e.adid||(a=h.noAdid+JSON.stringify(e)),a||e.adm||e.nurl){var s,l;let a=t.bidsMap?t.bidsMap[e.impid]:t.bidObject,{bid:c,savedPrebidBid:u}=a||{};if(c&&(s=e.price,l=u&&u.cpm,!(0,n.isNumber)(l)||s>l||s===l&&Math.random()>.5)){let t={requestId:c.bidId,cpm:e.price,width:e.w,height:e.h,creativeId:e.adid,currency:"USD",netRevenue:!0,ttl:360,meta:{advertiserDomains:e.adomain?e.adomain:[]},dealId:e.dealid};a.savedPrebidBid=t,e.ext&&e.ext.bidder&&e.ext.bidder.grid&&e.ext.bidder.grid.demandSource&&(t.adserverTargeting={hb_ds:e.ext.bidder.grid.demandSource},t.meta.demandSource=e.ext.bidder.grid.demandSource),e.ext&&e.ext.dsa&&(t.meta.dsa=e.ext.dsa),"video"===e.content_type?(e.adm?(t.vastXml=e.adm,t.adResponse={content:t.vastXml}):e.nurl&&(t.vastUrl=e.nurl),t.mediaType=d.VIDEO,c.renderer||c.mediaTypes&&c.mediaTypes.video&&"outstream"!==c.mediaTypes.video.context||(t.renderer=function(e,t,r){let i=r.install({id:t.id,url:t.url,loaded:!1});try{i.setRender(A)}catch(e){(0,n.logWarn)("Prebid Error calling setRender on renderer",e)}return i}(0,{id:c.bidId,url:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js"},i))):(t.ad=e.adm,t.mediaType=d.BANNER);let s=b[o]&&b[o].bidResponseExternal||{};r.push((0,n.mergeDeep)(t,s))}}else a=h.noAdm+JSON.stringify(e);a&&(0,n.logError)(a)}}((0,u.getBidFromResponse)(e,h),t,o,i,a)}),r&&(0,n.logError)(r),o},getUserSyncs:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[i,,n,o]=t;if(!y&&i.pixelEnabled){let e="";n&&("boolean"==typeof n.gdprApplies&&(e+=`&gdpr=${Number(n.gdprApplies)}`),"string"==typeof n.consentString&&(e+=`&gdpr_consent=${n.consentString}`)),o&&(e+=`&us_privacy=${o}`);let t=this.forceBidderName||this.code,r=b[t]&&b[t].syncurl||"https://x.bidswitch.net/sync?ssp=themediagrid";return y=!0,{type:"image",url:r+e}}},ajaxCall:function(e,t,r,i){return i.browsingTopics=!1,(0,o.ajax)(e,t,r,i)},onDataDeletionRequest:function(e){v.ajaxCall("https://media.grid.bidswitch.net/uspapi_delete_c2s",null,null,{method:"GET"})}};function A(e){e.renderer.push(()=>{window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:e.adResponse})})}(0,a.registerBidder)(v),(0,i.registerModule)("gridBidAdapter")},7162:function(e,t,r){"use strict";var i=r(3800),n=r(4030),o=r(7750),a=r(4321),s=r(9287),d=r(256);let l="gumgum",c=(0,s.getStorageManager)({bidderCode:l}),u={t:0,rq:8,pbv:"9.53.2"},p=[n.BANNER,n.VIDEO],g=["dac.co.jp","audigent.com","id5-sync.com","liveramp.com","intentiq.com","liveintent.com","crwdcntrl.net","quantcast.com","adserver.org","yahoo.com"],f={},m=null;function h(e){let t=0,r=0,i=0;return e.forEach(e=>{let[n,o]=e,a=n>o?n:o;(a>i||a===i&&n>=t&&o>=r)&&(i=a,t=n,r=o)}),[t,r]}function b(e){if(e.content&&Array.isArray(e.content.data)){for(let t of e.content.data)if("string"==typeof t?.name&&(t.name.includes("iris.com")||t.name.includes("iris.tv")))return Array.isArray(t.ext?.cids)?t.ext.cids.join(","):""}return null}(0,d.registerBidder)({code:l,gvlid:61,aliases:["gg"],isBidRequestValid:function(e){let{params:t,adUnitCode:r}=e,i=t.inScreen||t.inScreenPubID||t.inSlot||t.ICV||t.video||t.inVideo||t.slot||t.native||t.zone||t.pubID;if(f[i])return(0,o.logWarn)(`[GumGum] Please check the implementation for ${i} for the placement ${r}`),!1;switch(!0){case!!t.zone:case!!t.pubId:case!!t.inScreen:case!!t.inScreenPubID:case!!t.inSlot:case!!t.ICV:case!!t.video:case!!t.inVideo:case!!t.videoPubID:break;default:return(0,o.logWarn)(`[GumGum] No product selected for the placement ${r}, please check your implementation.`),!1}return!t.bidfloor||!!("number"==typeof t.bidfloor&&isFinite(t.bidfloor))||((0,o.logWarn)("[GumGum] bidfloor must be a Number"),!1)},buildRequests:function(e,t){let i=[],n=t&&t.gdprConsent,s=t&&t.uspConsent,d=t&&t.gppConsent,l=t&&t.timeout,p=+(!0===a.config.getConfig("coppa")),f=t&&t.refererInfo&&t.refererInfo.page,y=t&&t.refererInfo&&t.refererInfo.topmostLocation;return(0,o._each)(e,e=>{var a,v,A,I;let E,S,_,T,{bidId:O,mediaTypes:C={},params:w={},schain:x,userId:R={},ortb2Imp:D,adUnitCode:P=""}=e,{currency:k,floor:N}=function(e,t,r){let i=Object.keys(e)[0]||"banner",n={floor:0,currency:"USD"};if("function"==typeof r.getFloor){let{currency:e,floor:o}=r.getFloor({mediaType:i,size:"*"})||{};o&&(n.floor=o),e&&(n.currency=e),t&&o&&"USD"===e&&(n.floor=Math.max(t,parseFloat(o)))}else t&&(n.floor=t);return n}(C,w.bidfloor,e),B=(E=["uid","eid","lipbid","envelope","id"],Object.keys(R).reduce(function(e,t){let r=R[t];switch(typeof r){case"string":e[t]=r;break;case"object":let i=E.filter(e=>r.hasOwnProperty(e));i.length&&(e[t]=r[i[0]])}return e},{})),U=(0,o.deepAccess)(D,"ext.gpid")||(0,o.deepAccess)(D,"ext.data.pbadslot"),j=1===(0,o.deepAccess)(D,"ext.ae"),M=[1,1],V={};V.displaymanager="Prebid.js - gumgum",V.displaymanagerver="9.53.2";let $=new Date,q=$.getTime(),L=$.getTimezoneOffset();if(V.lt=q,V.to=L,R&&R.pubProvidedId){let e,t=R.pubProvidedId.filter(e=>g.includes(e.source)),r=(e=JSON.stringify(t)).length<=1800?e:e=JSON.stringify(t.slice(0,Math.floor(t.length*(1800/e.length))));V.pubProvidedId=r}for(let e in R&&R.id5id&&R.id5id.uid&&R.id5id.ext&&(V.id5Id=R.id5id.uid||null,V.id5IdLinkType=R.id5id.ext.linkType||null),P&&(V.aun=P),B)V[e]=B[e];if(C.banner?M=C.banner.sizes:C.video&&(M=C.video.playerSize,V=function(e){let{minduration:t,maxduration:r,linearity:i,startdelay:n,placement:a,plcmt:s,protocols:d=[],playerSize:l=[],skip:c,api:u,mimes:p,playbackmethod:g,playbackend:f}=e,m=(0,o.parseSizesInput)(l),[h,b]=m[0]&&m[0].split("x"),y="";d.length&&(y=d.join(","));let v={mind:t,maxd:r,li:i,sd:n,pt:a,pr:y,viw:h,vih:b,skip:c,pbe:f};return null!=s&&(v.vplcmt=s),u&&u.length&&(v.api=u.join(",")),p&&p.length&&(v.mimes=p.join(",")),g&&g.length&&(v.pbm=g.join(",")),v}(C.video)),U&&(V.gpid=U),m&&(V.pv=m),N&&(V.fp=N,V.fpc=k),t&&t.ortb2&&t.ortb2.site){let e;v=V,A=t.ortb2.site,I=w,(e=b(A))?v.irisid=e:I.irisid&&"string"==typeof I.irisid&&(v.irisid=I.irisid);let r=t.ortb2.site.content?.url;r&&(V.curl=r)}if(w.iriscat&&"string"==typeof w.iriscat&&(V.iriscat=w.iriscat),w.zone||w.pubId)if(w.zone?V.t=w.zone:V.pubId=w.pubId,V.pi=2,w.slot){let[e,t]=h(M);V.maxw=e,V.maxh=t,V.si=w.slot,V.pi=3,V.bf=M.reduce((e,t)=>`${e}${e&&","}${t[0]}x${t[1]}`,"")}else w.native?(V.ni=w.native,V.pi=5):C.video?V.pi=2===C.video.linearity?6:7:w.product&&"skins"===w.product.toLowerCase()&&(V.pi=8);else V={...V,...function(e,t){let r={};if(e.inScreenPubID&&(r.pubId=e.inScreenPubID,r.pi=2),e.inScreen&&(r.t=e.inScreen,r.pi=2),e.inSlot){let[i,n]=h(t);r.maxw=i,r.maxh=n,r.si=e.inSlot,r.pi=3,r.bf=t.reduce((e,t)=>`${e}${e&&","}${t[0]}x${t[1]}`,"")}return e.ICV&&(r.ni=e.ICV,r.pi=5),e.videoPubID&&(r.pubId=e.videoPubID,r.pi=7),e.video&&(r.t=e.video,r.pi=7),e.inVideo&&(r.t=e.inVideo,r.pi=6),r}(w,M)};j&&(V.ae=j),n&&(V.gdprApplies=+!!n.gdprApplies),V.gdprApplies&&(V.gdprConsent=n.consentString),s&&(V.uspConsent=s),d?(V.gppString=t.gppConsent.gppString?t.gppConsent.gppString:"",V.gppSid=Array.isArray(t.gppConsent.applicableSections)?t.gppConsent.applicableSections.join(","):""):!d&&t?.ortb2?.regs?.gpp&&(V.gppString=t.ortb2.regs.gpp,V.gppSid=Array.isArray(t.ortb2.regs.gpp_sid)?t.ortb2.regs.gpp_sid.join(","):"");let F=(0,o.deepAccess)(t,"ortb2.regs.ext.dsa");F&&(V.dsa=JSON.stringify(F)),p&&(V.coppa=p),x&&x.nodes&&(V.schain=(S=`${x.ver},${x.complete}`,x.nodes.map(e=>{S+=`!${encodeURIComponent(e.asi||"")},${encodeURIComponent(e.sid||"")},${encodeURIComponent(e.hp||"")},${encodeURIComponent(e.rid||"")},${encodeURIComponent(e.name||"")},${encodeURIComponent(e.domain||"")}`}),S));let W=(0,o.deepAccess)(D,"ext.tid")||(0,o.deepAccess)(t,"ortb2.source.tid")||"";V.tId=W,Object.assign(V,function(e,t){var i;let n,a,s,d,l,p,g,f,m,h,b=e=>RegExp(`[?#&](${e}=(.*?))($|&)`,"i"),y={};try{a=(n=r.g.top).screen,s=e||"",d=t||""}catch(e){return(0,o.logError)(e),y}return y={vw:(0,o.getWinDimensions)().innerWidth,vh:(0,o.getWinDimensions)().innerHeight,sw:a.width,sh:a.height,pu:["ggad","ggdeal"].reduce((e,t)=>{let r=i.match(b(t));return r&&(r[1]&&(e=e.replace(r[1],"")),r[3]&&(e=e.replace(r[3],""))),e},i=s),tpl:d,ce:c.cookiesAreEnabled(),dpr:n.devicePixelRatio||1,jcsi:JSON.stringify(u),ogu:(f=(document&&document.getElementsByTagName("head")[0]).querySelector("meta[property='og:url']"),f?f.content:null)},(g=(h=(m=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection))&&(m.downlink||m.bandwidth))?Math.round(1024*h):null)&&(y.ns=g),(l=(s.match(b("ggad"))||[0,0,0])[2])&&(y[isNaN(l)?"eAdBuyId":"adBuyId"]=l),(p=(s.match(b("ggdeal"))||[0,0,0])[2])&&(y.ggdeal=p),y}(f,y),(a=t?.ortb2,Object.keys(T={ip:(_=(0,o.deepAccess)(a,"device")||{}).ip,ipv6:_.ipv6,ua:_.ua,sua:_.sua?JSON.stringify(_.sua):void 0,dnt:_.dnt,os:_.os,osv:_.osv,dt:_.devicetype,lang:_.language,make:_.make,model:_.model,ppi:_.ppi,pxratio:_.pxratio,foddid:_?.ext?.fiftyonedegrees_deviceId}).reduce((e,t)=>(void 0!==T[t]&&(e[t]=T[t]),e),{}))),i.push({id:O,tmax:l,tId:W,pi:V.pi,selector:w.selector,sizes:M,url:"https://g2.gumgum.com/hbid/imp",method:"GET",data:V})}),i},interpretResponse:function(e,t){var r;let i=[],a=e.body;if(!a||a.err){let e=t.data||{},r=e.si||e.ni||e.t||e.pubId,i=a?a.err.drt:18e5;f[r]={productId:e.pi,timestamp:new Date().getTime()},setTimeout(()=>{f[r]&&delete f[r]},i),(0,o.logWarn)(`[GumGum] Please check the implementation for ${r}`)}let{ad:{price:s,id:d,markup:l,cur:c,width:p,height:g,maxw:h,maxh:b},cw:y,pag:{pvid:v},jcsi:A,meta:{adomain:I,mediaType:E}}=Object.assign({ad:{price:0,id:0,markup:"",width:0,height:0},pag:{pvid:0},meta:{adomain:[],mediaType:""}},a),S=t.data||{},_=S.pi,T=6===_||7===_?n.VIDEO:n.BANNER,O=3===_&&9===S.si,C=(0,o.parseSizesInput)(t.sizes);if(h&&b)C=[`${h}x${b}`];else if(5===_&&C.includes("1x1"))C=["1x1"];else if(2===_&&C.includes("1x1")||3===_){let e=t.sizes&&t.sizes.reduce((e,t)=>{let[r,i]=t;return p===r&&g===i&&e.push(t.join("x")),e},[])||[];C=e.length?e:(0,o.parseSizesInput)(t.sizes)}let[w,x]=C[0].split("x");return A&&(a.jcsi=u),m=v,d&&i.push({ad:y?(r=Object.assign({},a,{bidRequest:t}),y.replace("AD_JSON",window.btoa(JSON.stringify(r)))):l,...T===n.VIDEO&&{ad:l,vastXml:l},mediaType:T,cpm:O?.1:s,creativeId:d,currency:c||"USD",height:x,netRevenue:!0,requestId:t.id,ttl:60,width:w,meta:{advertiserDomains:I||[],mediaType:E||T}}),i},getUserSyncs:function(e,t){return t.map(e=>e.body&&e.body.pxs&&e.body.pxs.scr||[]).reduce(function(e,t){return e.concat(t)},[]).map(e=>({type:"f"===e.t?"iframe":"image",url:e.u}))},supportedMediaTypes:p,getCids:b}),(0,i.registerModule)("gumgumBidAdapter")},8268:function(e,t,r){"use strict";function i(e,t,r){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return r}function n(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}var o=r(3800),a=r(7750),s=r(7581),d=r(1620),l=r(783),c=r(9287),u=r(4767),p=r(7148),g=r(4389),f=h(r(2506)),m=r(8878);function h(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(h=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let b="id5id",y="User ID - ID5 submodule: ",v="id5-sync.com",A=(0,c.getStorageManager)({moduleType:u.MODULE_TYPE_UID,moduleName:"id5Id"}),I={id5id:{getValue:function(e){return e.uid},source:v,atype:1,getUidExt:function(e){if(e.ext)return e.ext}},euid:{getValue:function(e){return e.uid},getSource:function(e){return e.source},atype:3,getUidExt:function(e){if(e.ext)return e.ext}},trueLinkId:{getValue:function(e){return e.uid},getSource:function(e){return"true-link-id5-sync.com"},atype:1,getUidExt:function(e){if(e.ext)return e.ext}}};var E=new WeakSet,S=new WeakSet,_=new WeakSet,T=new WeakSet,O=new WeakSet,C=new WeakSet,w=new WeakSet,x=new WeakSet,R=new WeakSet;class D{async execute(){let e=i(this,O,U).call(this);if(!i(this,E,P).call(this))return i(this,T,B).call(this,e);try{return await i(this,S,k).call(this,e)}catch(t){return(0,a.logError)(y+"Error while performing ID5 external module flow. Continuing with regular flow.",t),i(this,T,B).call(this,e)}}constructor(e,t,r,i,o){n(this,E),n(this,S),n(this,_),n(this,T),n(this,O),n(this,C),n(this,w),n(this,x),n(this,R),this.submoduleConfig=e,this.gdprConsentData=t,this.cacheIdObj=r,this.usPrivacyData=i,this.gppData=o}}function P(){return"string"==typeof this.submoduleConfig.params.externalModuleUrl}async function k(e){await q(this.submoduleConfig.params.externalModuleUrl);let t=await e;return i(this,_,N).call(this).fetchId5Id(t,this.submoduleConfig.params,(0,l.getRefererInfo)(),this.gdprConsentData,this.usPrivacyData,this.gppData)}function N(){return window.id5Prebid&&window.id5Prebid.integration}async function B(e){let t=await e,r=await i(this,C,j).call(this,t.extensionsCall),n=await i(this,w,M).call(this,t.fetchCall,r);return i(this,R,$).call(this,n)}async function U(){let e=this.submoduleConfig.params.configUrl||"https://id5-sync.com/api/config/prebid",t=await (0,s.fetch)(e,{method:"POST",body:JSON.stringify({...this.submoduleConfig,bounce:!0}),credentials:"include"});if(!t.ok)throw Error("Error while calling config endpoint: ",t);let r=await t.json();return(0,a.logInfo)(y+"config response received from the server",r),r}async function j(e){if(void 0===e)return;let t=e.url,r=e.method||"GET",i="GET"===r?void 0:JSON.stringify(e.body||{}),n=await (0,s.fetch)(t,{method:r,body:i});if(!n.ok)throw Error("Error while calling extensions endpoint: ",n);let o=await n.json();return(0,a.logInfo)(y+"extensions response received from the server",o),o}async function M(e,t){let r=e.url,n=e.overrides||{},o=JSON.stringify({...i(this,x,V).call(this),...n,extensions:t}),d=await (0,s.fetch)(r,{method:"POST",body:o,credentials:"include"});if(!d.ok)throw Error("Error while calling fetch endpoint: ",d);let l=await d.json();return(0,a.logInfo)(y+"fetch response received from the server",l),l}function V(){let e=this.submoduleConfig.params,t=this.gdprConsentData&&"boolean"==typeof this.gdprConsentData.gdprApplies&&this.gdprConsentData.gdprApplies?1:0,r=(0,l.getRefererInfo)(),i=this.cacheIdObj?this.cacheIdObj.signature:void 0,n=L(this.cacheIdObj),o=window.id5Bootstrap?window.id5Bootstrap.getTrueLinkInfo():{booted:!1},s={partner:e.partner,gdpr:t,nbPage:n,o:"pbjs",tml:r.topmostLocation,ref:r.ref,cu:r.canonicalUrl,top:+!!r.reachedTop,u:r.stack[0]||window.location.href,v:"9.53.2",storage:this.submoduleConfig.storage,localStorage:+!!A.localStorageIsEnabled(),true_link:o};!t||void 0===this.gdprConsentData.consentString||(0,a.isEmpty)(this.gdprConsentData.consentString)||(0,a.isEmptyStr)(this.gdprConsentData.consentString)||(s.gdpr_consent=this.gdprConsentData.consentString),void 0===this.usPrivacyData||(0,a.isEmpty)(this.usPrivacyData)||(0,a.isEmptyStr)(this.usPrivacyData)||(s.us_privacy=this.usPrivacyData),this.gppData&&(s.gpp_string=this.gppData.gppString,s.gpp_sid=this.gppData.applicableSections),void 0===i||(0,a.isEmptyStr)(i)||(s.s=i),void 0===e.pd||(0,a.isEmptyStr)(e.pd)||(s.pd=e.pd),void 0===e.provider||(0,a.isEmptyStr)(e.provider)||(s.provider=e.provider);let d=e.abTesting||{enabled:!1};return d.enabled&&(s.ab_testing={enabled:!0,control_group_pct:d.controlGroupPct}),s}function $(e){try{e.privacy&&window.id5Bootstrap&&window.id5Bootstrap.setPrivacy&&window.id5Bootstrap.setPrivacy(e.privacy)}catch(e){(0,a.logError)(y+"Error while writing privacy info into local storage.",e)}return e}async function q(e){return new p.PbPromise((t,r)=>{if(window.id5Prebid)t();else try{(0,g.loadExternalScript)(e,u.MODULE_TYPE_UID,"id5",t)}catch(e){r(e)}})}function L(e){return e&&void 0!==e.nbPage?e.nbPage+1:1}function F(e){let t=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies,r=(0,a.deepAccess)(e,"vendorData.purpose.consents.1"),i=(0,a.deepAccess)(e,"vendorData.vendor.consents.131");return!t||!!r&&!!i}(0,d.submodule)("userId",{name:"id5Id",gvlid:131,decode(e,t){let r,i;if(e&&void 0!==e.ids){let t={},r={};return Object.entries(e.ids).forEach(e=>{let[i,n]=e,o=n.eid,a=o?.uids?.[0];t[i]={uid:a?.id,ext:a?.ext},r[i]=function(){return o}}),this.eids=r,t}let n={};if(!e||"string"!=typeof e.universal_uid)return;r=e.universal_uid,n=e.ext||n,i=e.publisherTrueLinkId,this.eids=I;let o={id5id:{uid:r,ext:n}};switch((0,a.isPlainObject)(n.euid)&&(o.euid={uid:n.euid.uids[0].id,source:n.euid.source,ext:{provider:v}}),i&&(o.trueLinkId={uid:i}),(0,a.deepAccess)(e,"ab_testing.result")){case"control":(0,a.logInfo)(y+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),(0,a.deepSetValue)(o,"id5id.ext.abTestingControlGroup",!0);break;case"error":(0,a.logError)(y+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1");break;case"normal":(0,a.logInfo)(y+"A/B Testing - user is NOT in the Control Group"),(0,a.deepSetValue)(o,"id5id.ext.abTestingControlGroup",!1)}return(0,a.logInfo)(y+"Decoded ID",o),o},getId:(e,t,r)=>!function(e){if(!e||!e.params||!e.params.partner)return(0,a.logError)(y+"partner required to be defined"),!1;let t=e.params.partner;if("string"==typeof t||t instanceof String){let r=parseInt(t);if(isNaN(r)||r<0)return(0,a.logError)(y+"partner required to be a number or a String parsable to a positive integer"),!1;e.params.partner=r}else if("number"!=typeof t)return(0,a.logError)(y+"partner required to be a number or a String parsable to a positive integer"),!1;return e.storage&&e.storage.type&&e.storage.name?(e.storage.name!==b&&(0,a.logWarn)(y+`storage name recommended to be '${b}'.`),!0):((0,a.logError)(y+"storage required to be set"),!1)}(e)?void 0:F(t?.gdpr)?{callback:function(i){new D(e,t?.gdpr,r,t?.usp,t?.gpp).execute().then(e=>{f.emit(m.EVENTS.ID5_RESOLVED,e),i(e)}).catch(e=>{(0,a.logError)(y+"getId fetch encountered an error",e),i()})}}:void(0,a.logInfo)(y+"Skipping ID5 local storage write because no consent given."),extendId:(e,t,r)=>(F(t?.gdpr)?((0,a.logInfo)(y+"using cached ID",r),r&&(r.nbPage=L(r))):(0,a.logInfo)(y+"No consent given for ID5 local storage writing, skipping nb increment."),r),primaryIds:["id5id","trueLinkId"],eids:I,_reset(){this.eids=I}}),(0,o.registerModule)("id5IdSystem")},9228:function(e,t,r){"use strict";var i=r(3800),n=l(r(7750)),o=r(7581),a=r(1620),s=r(9287),d=r(4767);function l(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(l=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let c="identityLink",u=(0,s.getStorageManager)({moduleType:d.MODULE_TYPE_UID,moduleName:c}),p="_lr_env";function g(e,t,r){let i;r.notUse3P||u.getCookie("_lr_retry_request")?t():((i=new Date).setTime(i.getTime()+36e5),u.setCookie("_lr_retry_request","true",i.toUTCString()),n.logInfo("identityLink: A 3P retrieval is attempted!"),f(!1),(0,o.ajax)(e,{success:e=>{let r;if(e)try{r=JSON.parse(e)}catch(e){n.logInfo(e)}t(r&&r.envelope?r.envelope:"")},error:e=>{n.logInfo("identityLink: identityLink: ID fetch encountered an error",e),t()}},void 0,{method:"GET",withCredentials:!0}))}function f(e){let t=new Date;t.setTime(t.getTime()+2592e6),u.setCookie("_lr_env_src_ats",e,t.toUTCString())}(0,a.submodule)("userId",{name:c,gvlid:97,decode:e=>({idl_env:e}),getId(e,t){let r=e&&e.params||{};if(!r||"string"!=typeof r.pid)return void n.logError("identityLink: requires partner id to be defined");let{gdpr:i,gpp:o}=t??{},a=i&&"boolean"==typeof i.gdprApplies&&i.gdprApplies?1:0,s=a?i.consentString:"";if(a&&(!s||""===s))return void n.logInfo("identityLink: Consent string is required to call envelope API.");let d=!!o&&!!o.gppString&&o.gppString,l=!!o&&!!o.gppString&&o.applicableSections.length>0&&-1!==o.applicableSections[0]&&o.applicableSections[0],c=`https://api.rlcdn.com/api/identity/envelope?pid=${r.pid}${a?"&ct=4&cv="+s:""}${d&&l?"&gpp="+d+"&gpp_sid="+l:""}`;return{callback:function(e){if(window.ats&&window.ats.retrieveEnvelope)n.logInfo("identityLink: ATS exists!"),window.ats.retrieveEnvelope(function(t){t?(n.logInfo("identityLink: An envelope can be retrieved from ATS!"),f(!0),e(JSON.parse(t).envelope)):g(c,e,r)});else{let t=function(){let e=u.getCookie(p)||u.getDataFromLocalStorage(p);if(e)try{return window.atob(e)}catch(t){try{return window.atob(e.replace(/-/g,"+").replace(/_/g,"/"))}catch(e){n.logError("identityLink: invalid envelope format");return}}}();t?(n.logInfo("identityLink: LiveRamp envelope successfully retrieved from storage!"),e(JSON.parse(t).envelope)):g(c,e,r)}}}},eids:{idl_env:{source:"liveramp.com",atype:3}}}),(0,i.registerModule)("identityLinkIdSystem")},6577:function(e,t,r){"use strict";var i,n=r(5824),o=r(3800),a=r(7750),s=n(r(4645)),d=n(r(6553)),l=r(7581),c=r(9287),u=r(4321),p=r(8878),g=r(4767),f=r(7100),m=r(3620),h=r(6765),b=r(1174),y=r(3113),v=r(348),A=r(1896),I=r(883);let E="iiqAnalytics",S=(0,c.getStorageManager)({moduleType:g.MODULE_TYPE_ANALYTICS,moduleName:E}),_="9.53.2",T=Date.now()+"_"+(i=0,Math.floor(1001*Math.random()+0)),O=(0,v.defineStorageType)(u.config.enabledStorageTypes);function C(){return u.config.getConfig("userSync.userIds")?.find(e=>"intentIqId"===e.name)}let w=Object.assign((0,s.default)({url:"https://reports.intentiq.com/report",analyticsType:"endpoint"}),{initOptions:{lsValueInitialized:!1,partner:null,fpid:null,currentGroup:null,dataInLs:null,eidl:null,lsIdsInitialized:!1,manualWinReportEnabled:!1,domainName:null,siloEnabled:!1,reportMethod:null,additionalParams:null,cmpRate:null},track(e){let{eventType:t,args:r}=e;switch(t){case x:D(r);break;case R:let i,n;i=C(),n=i?.params?.partner||0,window[`intentIqAnalyticsAdapter_${n}`]={reportExternalWin:function(e){return D(e,!0)}}}}}),{BID_WON:x,BID_REQUESTED:R}=p.EVENTS;function D(e,t){if(w.initOptions.lsValueInitialized||function(){if(w.initOptions.lsValueInitialized)return;let e=C();if(e){let t,r,i,n;w.initOptions.lsValueInitialized=!0,w.initOptions.partner=e.params?.partner&&!isNaN(e.params.partner)?e.params.partner:-1,w.initOptions.browserBlackList="string"==typeof e.params?.browserBlackList?e.params.browserBlackList.toLowerCase():"",w.initOptions.manualWinReportEnabled=e.params?.manualWinReportEnabled||!1,w.initOptions.domainName=e.params?.domainName||"",w.initOptions.siloEnabled="boolean"==typeof e.params?.siloEnabled&&e.params.siloEnabled,w.initOptions.reportMethod=function(e){if("string"==typeof e)switch(e.toUpperCase()){case"GET":default:break;case"POST":return"POST"}return"GET"}(e.params?.reportMethod),w.initOptions.additionalParams=e.params?.additionalParams||null,w.initOptions.cmpRate=(t="string"==typeof e?.params?.cpmInt?e.params.cpmInt:"",r="string"==typeof e?.params?.cpmFrac?e.params.cpmFrac:"",i=t.length>0?t.codePointAt(0):null,n=r.length>0?r.codePointAt(0):null,null!==i&&null!==n?Number(`${i}.${n}`):null!==i?i:null!==n?Number(`0.${n}`):null)}else w.initOptions.lsValueInitialized=!1,w.initOptions.partner=-1,w.initOptions.reportMethod="GET"}(),isNaN(w.initOptions.partner)||-1==w.initOptions.partner)return;let r=(0,f.detectBrowser)();if(w.initOptions.browserBlackList?.includes(r))return void(0,a.logError)("IIQ ANALYTICS -> Browser is in blacklist!");if(w.initOptions.lsValueInitialized&&!w.initOptions.lsIdsInitialized&&function(){try{w.initOptions.dataInLs=null,w.initOptions.fpid=JSON.parse((0,v.readData)(`${y.FIRST_PARTY_KEY}${w.initOptions.siloEnabled?"_p_"+w.initOptions.partner:""}`,O,S)),w.initOptions.fpid&&(w.initOptions.currentGroup=w.initOptions.fpid.group);let e=(0,v.readData)(y.FIRST_PARTY_KEY+"_"+w.initOptions.partner,O,S),t=(0,v.readData)(y.CLIENT_HINTS_KEY,O,S)||"";if(e){w.initOptions.lsIdsInitialized=!0;let t=JSON.parse(e);w.initOptions.terminationCause=t.terminationCause,w.initOptions.dataInLs=t.data,w.initOptions.eidl=t.eidl||-1,w.initOptions.clientType=t.clientType||null,w.initOptions.siteId=t.siteId||null,w.initOptions.wsrvcll=t.wsrvcll||!1,w.initOptions.rrtt=t.rrtt||null}w.initOptions.clientsHints=t}catch(e){(0,a.logError)(e)}}(),t&&w.initOptions.manualWinReportEnabled||!t&&!w.initOptions.manualWinReportEnabled){var i;let t,r,n,o,s,d,{url:c,method:u,payload:p}=(i=function(e){var t;let r={inbbl:!1,pbjsver:_,partnerAuctionId:"BW",reportSource:"pbjs",abGroup:"U",jsversion:y.VERSION,partnerId:-1,biddingPlatformId:1,idls:!1,ast:-1,aeidln:-1};return(0,v.readData)(y.FIRST_PARTY_KEY+"_"+w.initOptions.partner,O,S),r.partnerId=w.initOptions.partner,r.pbjsver=_,r.vrref=(0,h.getReferrer)(),r.terminationCause=w.initOptions.terminationCause,r.abGroup=w.initOptions.currentGroup,r.clientType=w.initOptions.clientType,r.sid=w.initOptions.siteId,r.wsrvcll=w.initOptions.wsrvcll,r.rtt=w.initOptions.rrtt,r.isInTestGroup="A"==w.initOptions.currentGroup,r.aid=T,w.initOptions.fpid?.pcid&&(r.pcid=encodeURIComponent(w.initOptions.fpid.pcid)),w.initOptions.fpid?.pid&&(r.profile=encodeURIComponent(w.initOptions.fpid.pid)),function(e,t){let r=e.adType||e.mediaType;e.bidderCode&&(t.bidderCode=e.bidderCode),e.cpm&&(w.initOptions.cmpRate&&w.initOptions.cmpRate>0?t.cpm=e.cpm*w.initOptions.cmpRate:t.cpm=e.cpm),e.currency&&(t.currency=e.currency),e.originalCpm&&(t.originalCpm=e.originalCpm),e.originalCurrency&&(t.originalCurrency=e.originalCurrency),e.status&&(t.status=e.status),e.auctionId&&(t.prebidAuctionId=e.auctionId),r&&(t.adType=r);let i=C();switch(i.params?.adUnitConfig){case 1:default:t.placementId=e.adUnitCode||P(e)||"";break;case 2:t.placementId=P(e)||e.adUnitCode||"";break;case 3:t.placementId=e.adUnitCode||"";break;case 4:t.placementId=P(e)||""}t.biddingPlatformId=1,t.partnerAuctionId="BW"}(e,r),t=r,w.initOptions.lsIdsInitialized&&(t.idls=w.initOptions.eidl&&w.initOptions.eidl>0,t.aeidln=w.initOptions.eidl||-1),r}(e,!0),r=[],n=w.initOptions.reportMethod,o=(0,f.detectBrowser)(),r.push(i=btoa(JSON.stringify(i))),s=(0,b.getCmpData)(),d=(0,A.reportingServerAddress)(t=C(),(0,b.getCmpData)().gdprString)+"?pid="+w.initOptions.partner+"&mct=1"+(w.initOptions?.fpid?"&iiqid="+encodeURIComponent(w.initOptions.fpid.pcid):"")+"&agid="+T+"&jsver="+y.VERSION+"&source="+y.PREBID+"&uh="+encodeURIComponent(w.initOptions.clientsHints)+(s.uspString?"&us_privacy="+encodeURIComponent(s.uspString):"")+(s.gppString?"&gpp="+encodeURIComponent(s.gppString):"")+(s.gdprString?"&gdpr_consent="+encodeURIComponent(s.gdprString)+"&gdpr=1":"&gdpr=0"),(d=(0,m.appendSPData)(d,w.initOptions.fpid),d=(0,h.appendVrrefAndFui)(d,w.initOptions.domainName),"POST"===n)?{url:d,method:"POST",payload:JSON.stringify(r)}:(d+="&payload="+encodeURIComponent(JSON.stringify(r)),{url:d=(0,I.handleAdditionalParams)(o,d,2,w.initOptions.additionalParams),method:"GET"}));return"POST"===u?(0,l.ajax)(c,void 0,p,{method:u,contentType:"application/x-www-form-urlencoded"}):(0,l.ajax)(c,void 0,null,{method:u}),(0,a.logInfo)("IIQ ANALYTICS -> BID WON"),!0}return!1}function P(e){if(e.placementId)return e.placementId;if(e.params&&Array.isArray(e.params)){for(let t=0;t<e.params.length;t++)if(e.params[t].placementId)return e.params[t].placementId}return null}w.originEnableAnalytics=w.enableAnalytics,w.enableAnalytics=function(e){w.originEnableAnalytics(e)},d.default.registerAnalyticsAdapter({adapter:w,code:E}),(0,o.registerModule)("intentIqAnalyticsAdapter")},9750:function(e,t,r){"use strict";let i,n,o,a;var s=r(5824),d=r(3800),l=r(7750),c=r(7581),u=r(1620),p=s(r(7336)),g=s(r(9271)),f=r(7100),m=r(3620),h=r(6765),b=r(1174),y=r(348),v=r(3113),A=r(9696),I=r(1896),E=r(883);let S="intentIqId",_={brands:0,mobile:1,platform:2,architecture:3,bitness:4,model:5,platformVersion:6,wow64:7,fullVersionList:8},T=v.FIRST_PARTY_KEY,O=0,C=0,w=0;function x(e,t,r){return e+=t.pid?"&pid="+encodeURIComponent(t.pid):"",e+=t.pcid?"&iiqidtype=2&iiqpcid="+encodeURIComponent(t.pcid):"",e+=t.pcidDate?"&iiqpciddate="+encodeURIComponent(t.pcidDate):""}function R(e,t){var r;let i="string"==typeof t.partnerClientId?encodeURIComponent(t.partnerClientId):"",n="number"==typeof t.partnerClientIdType&&(0===(r=t.partnerClientIdType)||1===r||3===r||4===r)?r:-1;return -1===n||""!==i&&(e=(e=e+"&pcid="+i)+"&idtype="+n),e}function D(e,t){return e+=t.uspString?"&us_privacy="+encodeURIComponent(t.uspString):"",e+=t.gppString?"&gpp="+encodeURIComponent(t.gppString):"",e+=t.gdprApplies?"&gdpr_consent="+encodeURIComponent(t.gdprString)+"&gdpr=1":"&gdpr=0"}function P(e,t){return"number"!=typeof t||isNaN(t)?e:e+"&fbp="+t}function k(e,t,r){(0,l.isPlainObject)(e)&&e.cmd&&e.cmd.push(()=>{e.pubads().setTargeting(t,r||v.NOT_YET_DEFINED)})}function N(e,t,r){e?.eids?.length?O++:w++,B(t,r)}function B(e,t){t.callCount=O,t.failCount=C,t.noDataCounter=w,(0,y.storeData)(o,JSON.stringify(t),e,a)}let U={name:S,gvlid:v.GVLID,decode:e=>e&&""!=e&&v.INVALID_ID!=e?{intentIqId:e}:void 0,getId(e){var t,r,s,d,u,U,j,M,V,$;let q,L=e?.params||{},F=()=>{L.callback&&!W&&(W=!0,q&&clearTimeout(q),ei&&(G={eids:[]}),L.callback(G))};if("number"!=typeof L.partner){(0,l.logError)("User ID - intentIqId submodule requires a valid partner to be defined"),F();return}let W=!1,G={eids:[]},z=(0,l.isPlainObject)(L.gamObjectReference)?L.gamObjectReference:void 0,H=L.gamParameterName?L.gamParameterName:"intent_iq_group",Y="function"==typeof L.groupChanged?L.groupChanged:void 0,J="boolean"==typeof L.siloEnabled&&L.siloEnabled;i=(0,l.isStr)(L.sourceMetaData)?function(e){try{let t=e.split(".");return((t[0]*v.META_DATA_CONSTANT+ +t[1])*v.META_DATA_CONSTANT+ +t[2])*v.META_DATA_CONSTANT+ +t[3]}catch(e){return NaN}}(L.sourceMetaData):"",n=(0,l.isNumber)(L.sourceMetaDataExternal)?L.sourceMetaDataExternal:void 0;let K=L.additionalParams?L.additionalParams:void 0;o=`${v.FIRST_PARTY_KEY}_${L.partner}`;let Q=(0,y.defineStorageType)(e.enabledStorageTypes),X=0,Z={},ee=!1;T=`${v.FIRST_PARTY_KEY}${J?"_p_"+L.partner:""}`;let et=(0,b.getCmpData)(),er=et.gdprString;a=(0,y.tryParse)((0,y.readData)(T,Q));let ei=a?.group===v.WITHOUT_IIQ;k(z,H,a?.group),Y&&Y(a?.group||v.NOT_YET_DEFINED),q=setTimeout(()=>{F()},L.timeoutInMillis||500);let en=(0,f.detectBrowser)(),eo="string"==typeof L.browserBlackList?L.browserBlackList.toLowerCase():"",ea=!1;if(a?.pcid)a.pcidDate||(a.pcidDate=Date.now(),(0,y.storeData)(T,JSON.stringify(a),Q,a));else{let e;a={pcid:(e=new Date().getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)})),pcidDate:Date.now(),group:v.NOT_YET_DEFINED,uspString:v.EMPTY,gppString:v.EMPTY,gdprString:v.EMPTY,date:Date.now()},ea=!0,(0,y.storeData)(T,JSON.stringify(a),Q,a)}!er||"isOptedOut"in a||(a.isOptedOut=!0);let es=(0,y.readData)(v.CLIENT_HINTS_KEY,Q);navigator?.userAgentData?.getHighEntropyValues&&navigator.userAgentData.getHighEntropyValues(["brands","mobile","bitness","wow64","architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{es=function(e){let t={};for(let r in e)if(e.hasOwnProperty(r)&&""!==e[r])if(["brands","fullVersionList"].includes(r)){let i="";e[r].forEach((t,n)=>{let o=n<e[r].length-1;i+=`"${t.brand}";v="${t.version}"${o?", ":""}`}),t[_[r]]=i}else"boolean"==typeof e[r]?t[_[r]]=`?${+!!e[r]}`:t[_[r]]=`"${e[r]}"`;return Object.keys(t).length?JSON.stringify(t):""}(e),(0,y.storeData)(v.CLIENT_HINTS_KEY,es,Q,a)});let ed=(0,y.tryParse)((0,y.readData)(o,Q));if(ed&&("number"==typeof(Z=ed).callCount&&(O=Z.callCount),"number"==typeof Z.failCount&&(C=Z.failCount),"number"==typeof Z.noDataCounter&&(w=Z.noDataCounter),Z.wsrvcll&&(Z.wsrvcll=!1,(0,y.storeData)(o,JSON.stringify(Z),Q,a))),Z.data&&Z.data.length&&(G=(0,y.tryParse)((t=Z.data,p.default.decrypt(t,S).toString(g.default)))),r=a,s=et,(`${r.gdprString}${r.gppString}${r.uspString}`!=`${s.gdprString}${s.gppString}${s.uspString}`||!a.sCal||ed&&(!Z.cttl||!Z.date||Date.now()-Z.date>Z.cttl))&&(a.uspString=et.uspString,a.gppString=et.gppString,a.gdprString=et.gdprString,ee=!0,(0,y.storeData)(T,JSON.stringify(a),Q,a),(0,y.storeData)(o,JSON.stringify(Z),Q,a)),ee||(ee=!ed&&!a.isOptedOut||Date.now()>a.sCal+v.HOURS_24),a.isOptedOut&&(Z.data=G={eids:[]},F()),(a.group===v.WITHOUT_IIQ||a.group!==v.WITHOUT_IIQ&&G?.eids?.length)&&F(),eo?.includes(en)){let e,t,r,o,s;(0,l.logError)("User ID - intentIqId submodule: browser is in blacklist! Data will be not provided."),L.callback&&L.callback(""),function(e,t,r,i,n){let o=Number((0,y.readData)((0,A.SYNC_KEY)(r)||"",e))||!1,a=Date.now()-o;if(i.isOptedOut){let r=Date.now()-(i?.date||i?.sCal||Date.now())>v.SYNC_REFRESH_MILL;(n||r)&&((0,c.ajax)(t,()=>{},void 0,{method:"GET",withCredentials:!0}),i?.date&&(i.date=Date.now(),(0,y.storeData)(T,JSON.stringify(i),e,i)))}else(!o||a>v.SYNC_REFRESH_MILL)&&((0,y.storeData)((0,A.SYNC_KEY)(r),Date.now()+"",e),(0,c.ajax)(t,()=>{},void 0,{method:"GET",withCredentials:!0}))}(Q,(d=a,u=es,U=L,j=Z,M=et,r={windowInnerHeight:(e=(0,l.getWinDimensions)()).innerHeight,windowInnerWidth:e.innerWidth,devicePixelRatio:e.devicePixelRatio,windowScreenHeight:e.screen.height,windowScreenWidth:e.screen.width,language:navigator.language},o=(0,f.detectBrowser)(),s=(V=(s=R(s=x(s=(0,I.iiqPixelServerAddress)(U,M.gdprString)+"/profiles_engine/ProfilesEngineServlet?at=20&mi=10&secure=1"+("&dpi="+U.partner),d,j),U))+("&tsrnd="+Math.floor(1e3*Math.random())+"_")+new Date().getTime())+(j?.clientType?"&idtype="+j.clientType:""),r&&($=s,t=Object.entries(v.SCREEN_PARAMS).map(e=>{let[t,i]=e,n=r[i];return`${t}:${n}`}).join(","),$+=`&cz=${encodeURIComponent(t)}`,s=$+=`&dw=${r.windowScreenWidth}&dh=${r.windowScreenHeight}&dpr=${r.devicePixelRatio}&lan=${r.language}`),s+=v.VERSION?"&jsver="+v.VERSION:"",u&&(s+="&uh="+encodeURIComponent(u)),s=P(s=D(s=(0,h.appendVrrefAndFui)(s,U.domainName),M),n||i),s=(0,E.handleAdditionalParams)(o,s,0,U.additionalParams),s=(0,m.appendSPData)(s,d)+"&source="+v.PREBID),L.partner,a,ea);return}if(!ee)return ei&&(G={eids:[]}),F(),N(G,Q,Z),{id:G.eids};let el=`${(0,I.iiqServerAddress)(L,er)}/profiles_engine/ProfilesEngineServlet?at=39&mi=10&dpi=${L.partner}&pt=17&dpn=1`;el+=L.pai?"&pai="+encodeURIComponent(L.pai):"",el=P(el=(el=D(el=R(el=x(el,a,Z),L)+(Z.cttl?"&cttl="+encodeURIComponent(Z.cttl):"")+(Z.rrtt?"&rrtt="+encodeURIComponent(Z.rrtt):""),et)+"&japs="+encodeURIComponent(!0===L.siloEnabled))+"&jaesc="+encodeURIComponent(O)+"&jafc="+encodeURIComponent(C)+"&jaensc="+encodeURIComponent(w)+(es?"&uh="+encodeURIComponent(es):"")+(v.VERSION?"&jsver="+v.VERSION:"")+(a?.group?"&testGroup="+encodeURIComponent(a.group):""),n||i),el=(0,E.handleAdditionalParams)(en,el,1,K),el=(0,m.appendSPData)(el,a)+"&source="+v.PREBID,el=(0,h.appendVrrefAndFui)(el,L.domainName);let ec=()=>{Z.eidl=G?.eids?.length||-1,(0,y.storeData)(T,JSON.stringify(a),Q,a),(0,y.storeData)(o,JSON.stringify(Z),Q,a)},eu={callback:function(e){X=Date.now(),Z.wsrvcll=!0,(0,y.storeData)(o,JSON.stringify(Z),Q,a),O=0,C=0,w=0,B(Q,Z),(0,c.ajax)(el,{success:t=>{let r=(0,y.tryParse)(t);if(r){Z.date=Date.now(),a.sCal=Date.now();let t=()=>{r.data=Z.data=G={eids:[]},ec(),F(),e(G)};if(q&&clearTimeout(q),"cttl"in r?Z.cttl=r.cttl:Z.cttl=v.HOURS_24,"tc"in r){if(Z.terminationCause=r.tc,41==r.tc){a.group=v.WITHOUT_IIQ,(0,y.storeData)(T,JSON.stringify(a),Q,a),Y&&Y(a.group),t(),z&&k(z,H,a.group);return}a.group=v.WITH_IIQ,z&&k(z,H,a.group),Y&&Y(a.group)}if("isOptedOut"in r&&(r.isOptedOut!==a.isOptedOut&&(a.isOptedOut=r.isOptedOut),!0===r.isOptedOut)){r.data=Z.data=G={eids:[]},[o,v.CLIENT_HINTS_KEY].forEach(e=>(0,y.removeDataByKey)(e,Q)),(0,y.storeData)(T,JSON.stringify(a),Q,a),F(),e(G);return}if("pid"in r&&(a.pid=r.pid),"dbsaved"in r&&(a.dbsaved=r.dbsaved),"ls"in r){if(!1===r.ls)return void t();""==r.data?r.data=v.INVALID_ID:r.data&&"string"==typeof r.data&&(r.data={eids:[r.data]}),Z.data=r.data}if("ct"in r&&(Z.clientType=r.ct),"sid"in r&&(Z.siteId=r.sid),"spd"in r&&(a.spd=r.spd),X&&X>0&&(Z.rrtt=Date.now()-X),r.data?.eids){var i;G=r.data,e(r.data.eids),F();let t=(i=JSON.stringify(r.data),p.default.encrypt(i,S).toString());Z.data=t}else e(G),F();N(G,Q,Z),ec()}else e(G),F()},error:t=>{(0,l.logError)(S+": ID fetch encountered an error",t),C++,N(G,Q,Z),e(G)}},void 0,{method:"GET",withCredentials:!0})}};return G?.eids?.length&&(eu.id=G.eids),eu},eids:{intentIqId:{source:"intentiq.com",atype:1,getSource:function(e){return e.source},getValue:function(e){return e?.uids?.length?e.uids[0].id:null},getUidExt:function(e){return e?.uids?.length?(e.uids[0].ext=e.uids[0].ext||{},e.uids[0].ext.provider="intentiq.com",e.uids[0].ext):null}}}};(0,u.submodule)("userId",U),(0,d.registerModule)("intentIqIdSystem")},7101:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(4030),a=r(4321),s=r(9287),d=r(256),l=r(4312),c=r(836),u=r(5767);let p=[o.BANNER,o.VIDEO,o.NATIVE],g={JPY:1},f=["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],m=["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"],h={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","adsrvr.org":"TDID"},b=["lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId","pairId"],y=["mimes","minduration","maxduration"],v=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h","plcmt"],A="ix_features",I=(0,s.getStorageManager)({bidderCode:"ix"}),E={REQUESTED_FEATURE_TOGGLES:["pbjs_enable_multiformat","pbjs_allow_all_eids"],featureToggles:{},isFeatureEnabled:function(e){return(0,n.deepAccess)(this.featureToggles,`features.${e}.activated`,!1)},getFeatureToggles:function(){if(I.localStorageIsEnabled()){let e=(0,n.safeJSONParse)(I.getDataFromLocalStorage(A));(0,n.deepAccess)(e,"expiry")&&e.expiry>=new Date().getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){let t=e.body,r=new Date,i=(0,n.deepAccess)(t,"ext.features");i&&(this.featureToggles={expiry:r.setHours(r.getHours()+1),features:i},I.localStorageIsEnabled()&&I.setDataInLocalStorage(A,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},I.localStorageIsEnabled()&&I.removeDataFromLocalStorage(A)}},S=0,_="",T="",O=!1;function C(e){var t;let r=x(e,o.VIDEO),i=(0,n.deepAccess)(e,"mediaTypes.video"),a=(0,n.deepAccess)(e,"params.video");if(k(i,a).length)return{};r.video=a?(0,n.deepClone)(e.params.video):{};let s=(0,n.deepAccess)(e,"ortb2Imp.ext.tid");for(let t in s&&(0,n.deepSetValue)(r,"ext.tid",s),!function(e,t){if((0,n.deepAccess)(t,"mediaTypes.video.context")===l.OUTSTREAM){let r=(0,n.deepAccess)(t,"mediaTypes.video.renderer");if(r||(r=(0,n.deepAccess)(t,"renderer")),(0,n.deepAccess)(t,"schain",!1))e.displaymanager="pbjs_wrapper";else if(r&&"object"==typeof r){if(void 0!==r.url){let t="";try{t=new URL(r.url).hostname}catch{return}t.includes("js-sec.indexww")?e.displaymanager="ix":e.displaymanager=r.url}}else e.displaymanager="ix"}}(r,e),U(r,e),i)-1===v.indexOf(t)||r.video.hasOwnProperty(t)||(r.video[t]=i[t]);if(r.video.minduration>r.video.maxduration)return(0,n.logError)(`IX Bid Adapter: video minduration [${r.video.minduration}] cannot be greater than video maxduration [${r.video.maxduration}]`),{};let d=a&&a.context||i&&i.context;if((t=r).video.hasOwnProperty("plcmt")&&(!(0,n.isInteger)(t.video.plcmt)||t.video.plcmt<1||t.video.plcmt>4)&&((0,n.logWarn)(`IX Bid Adapter: video.plcmt [${t.video.plcmt}] must be an integer between 1-4 inclusive`),delete t.video.plcmt),d&&!r.video.hasOwnProperty("placement")&&(d===l.INSTREAM?r.video.placement=1:d===l.OUTSTREAM?(0,n.deepAccess)(a,"playerConfig.floatOnScroll")?r.video.placement=5:(r.video.placement=3,O=!0):(0,n.logWarn)(`IX Bid Adapter: Video context '${d}' is not supported`)),!(r.video.w&&r.video.h)){let t=N((0,n.deepAccess)(r,"video.playerSize"))||N((0,n.deepAccess)(e,"params.size"));if(!t)return(0,n.logWarn)("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};r.video.w=t[0],r.video.h=t[1]}return R(e,r,o.VIDEO),r}function w(e){let t=x(e,o.NATIVE),r=e.nativeOrtbRequest;r.eventtrackers=[{event:1,methods:[1,2]}],r.privacy=1,t.native={request:JSON.stringify(r),ver:"1.2"};let i=(0,n.deepAccess)(e,"ortb2Imp.ext.tid");return i&&(0,n.deepSetValue)(t,"ext.tid",i),U(t,e),R(e,t,o.NATIVE),t}function x(e,t){let r={};if(r.id=e.bidId,r.ext={},$()&&(0,n.deepAccess)(e,"params.externalId")&&(0,n.deepSetValue)(r,"ext.externalID",e.params.externalId),(0,n.deepAccess)(e,`params.${t}.siteId`)&&!isNaN(Number(e.params[t].siteId)))switch(t){case o.BANNER:(0,n.deepSetValue)(r,"ext.siteID",e.params.banner.siteId.toString());break;case o.VIDEO:(0,n.deepSetValue)(r,"ext.siteID",e.params.video.siteId.toString());break;case o.NATIVE:(0,n.deepSetValue)(r,"ext.siteID",e.params.native.siteId.toString())}else e.params.siteId&&(0,n.deepSetValue)(r,"ext.siteID",e.params.siteId.toString());return e.params.hasOwnProperty("id")&&("string"==typeof e.params.id||"number"==typeof e.params.id)&&(0,n.deepSetValue)(r,"ext.sid",String(e.params.id)),r}function R(e,t,r){let i=null,a=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(i={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),(0,n.isFn)(e.getFloor)){let i="*",o="*";if(r&&(0,n.contains)(p,r)){let{w:e,h:n}=t[r];i=r,o=[e,n]}try{a=e.getFloor({mediaType:i,size:o})}catch(e){(0,n.logWarn)("priceFloors module call getFloor failed, error : ",e)}}let s=!1;a?(t.bidfloor=a.floor,t.bidfloorcur=a.currency,(0,n.deepSetValue)(t,"ext.fl","p"),s=!0):i&&(t.bidfloor=i.floor,t.bidfloorcur=i.currency,(0,n.deepSetValue)(t,"ext.fl","x"),s=!0),s&&(r==o.BANNER?((0,n.deepSetValue)(t,"banner.ext.bidfloor",t.bidfloor),(0,n.deepSetValue)(t,"banner.ext.fl",t.ext.fl)):r==o.VIDEO?((0,n.deepSetValue)(t,"video.ext.bidfloor",t.bidfloor),(0,n.deepSetValue)(t,"video.ext.fl",t.ext.fl)):((0,n.deepSetValue)(t,"native.ext.bidfloor",t.bidfloor),(0,n.deepSetValue)(t,"native.ext.fl",t.ext.fl)))}function D(e){return Array.isArray(e)&&2===e.length&&(0,n.isInteger)(e[0])&&(0,n.isInteger)(e[1])}function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(D(e))return e[0]===t[0]&&e[1]===t[1];for(let r=0;r<e.length;r++)if(e[r][0]===t[0]&&e[r][1]===t[1])return!0;return!1}function k(e,t){let r=[];for(let i of(e||(0,n.logWarn)("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit"),y)){let n=e&&e.hasOwnProperty(i),o=t&&t.hasOwnProperty(i);n||o||r.push(`IX Bid Adapter: ${i} is not included in either the adunit or params level`)}let i=e&&e.hasOwnProperty("protocol"),o=e&&e.hasOwnProperty("protocols"),a=t&&t.hasOwnProperty("protocol"),s=t&&t.hasOwnProperty("protocols");return i||o||a||s||r.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),r}function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return D(e)?e:!!D(e[0])&&e[0]}function B(e,t,r,i){var s,d,l,c,u,p,g;let y,v,A="https://htlb.casalemedia.com/openrtb/pbjs",C=function(e){let t=[],r={};if((0,n.isArray)(e))for(let i of e){let e=h.hasOwnProperty(i.source);if((0,n.deepAccess)(i,"uids.0")&&(r[i.source]=!0,e&&""!==h[i.source]&&(i.uids[0].ext={rtiPartner:h[i.source]}),t.push(i),t.length>=50))break}return{toSend:t,seenSources:r}}((0,n.deepAccess)(e,"0.userIdAsEids")),w=C.toSend;window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&function(e,t){let r=window.headertag.getIdentityInfo();if(r&&"object"==typeof r)for(let i in r){if(e.length>=50)return;if(r.hasOwnProperty(i)){let n=r[i];!n.responsePending&&n.data&&"object"==typeof n.data&&Object.keys(n.data).length&&!t.seenSources[n.data.source]&&e.push(n.data)}}}(w,C);let x=[],R=((y={}).id=e[0].bidderRequestId.toString(),y.site={},y.ext={},y.ext.source="prebid",y.ext.ixdiag={},y.ext.ixdiag.ls=I.localStorageIsEnabled(),y.ext.ixdiag.msd=0,y.ext.ixdiag.msi=0,y.imp=[],y.at=1,y);s=R,(d=E.REQUESTED_FEATURE_TOGGLES).length>0&&(s.ext.features={},d.forEach(e=>{s.ext.features[e]={activated:E.isFeatureEnabled(e)}})),R=s;let D=function(e,t){let r;var i=e.map(e=>e.adUnitCode).filter((e,t,r)=>r.indexOf(e)===t);let o=(0,n.deepAccess)(e,"0.userIdAsEids",[]),a={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"9.53.2",userIds:(r=e[0].userId||{},b.filter(e=>"lipbid"===e?(0,n.deepAccess)(r,"lipb.lipbid"):r[e])),url:window.location.href.split("?")[0],vpd:O,ae:t,eidLength:o.length};for(let t of i){let r=e.filter(e=>e.adUnitCode===t)[0];(0,n.deepAccess)(r,"mediaTypes")&&(Object.keys(r.mediaTypes).length>1&&a.mfu++,(0,n.deepAccess)(r,"mediaTypes.native")&&a.nu++,(0,n.deepAccess)(r,"mediaTypes.banner")&&a.bu++,"outstream"===(0,n.deepAccess)(r,"mediaTypes.video.context")&&(a.ou++,V(r)&&(a.ren=!0)),"instream"===(0,n.deepAccess)(r,"mediaTypes.video.context")&&a.iu++,a.allu++)}return a}(e,(0,n.deepAccess)(t,"paapi.enabled"));for(let e in D)R.ext.ixdiag[e]=D[e];R=function(e,t){if(t){t.gdprConsent&&((_=t.gdprConsent).hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:+!!_.gdprApplies}}),_.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:_.consentString||""},_.hasOwnProperty("addtlConsent")&&_.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:_.addtlConsent}))),t.uspConsent&&((0,n.deepSetValue)(e,"regs.ext.us_privacy",t.uspConsent),T=t.uspConsent);let r=(0,n.deepAccess)(t,"refererInfo.page");r&&(e.site.page=r),t.gppConsent&&((0,n.deepSetValue)(e,"regs.gpp",t.gppConsent.gppString),(0,n.deepSetValue)(e,"regs.gpp_sid",t.gppConsent.applicableSections))}return a.config.getConfig("coppa")&&(0,n.deepSetValue)(e,"regs.coppa",1),e}((l=R,c=t,u=r,p=e,g=w,(v=(0,n.deepAccess)(c,"timeout"))&&(l.ext.ixdiag.tmax=v),a.config.getConfig("userSync")&&(l.ext.ixdiag.syncsPerBidder=a.config.getConfig("userSync").syncsPerBidder),l.ext.ixdiag.imps=Object.keys(u).length,l.source={tid:c?.ortb2?.source?.tid},p[0].schain&&(l.source.ext={},l.source.ext.schain=p[0].schain),g.length>0&&(l.user={},l.user.eids=g),document.referrer&&""!==document.referrer&&(l.site.ref=document.referrer),R=l),t);let P={};e[0].params.siteId&&(P.s=S=e[0].params.siteId);let k=Object.keys(r),N=!1;for(let i=0;i<k.length&&!(x.length>=4);i++){R=function(e,t,r,i){let{missingCount:a=0,missingImps:s=[],ixImps:d=[]}=e[t[i]],l={ixImps:d,missingBannerImpressions:s},c=Object.keys(l).map(e=>l[e]).filter(e=>Array.isArray(e)).reduce((e,t)=>e.concat(...t),[]),u=e[t[i]].gpid,p=e[t[i]].dfp_ad_unit_code,g=e[t[i]].tid,f=e[t[i]].sid,m=e[t[i]].ae,h=e[t[i]].paapi,b=c.filter(e=>o.BANNER in e),y=c.filter(e=>!(o.BANNER in e));if(b.length>0){let o=b.reduce((e,t)=>(e[t.adunitCode]||(e[t.adunitCode]=[]),e[t.adunitCode].push(t),e),{});for(let d in o){let l=o[d],{id:c,banner:{topframe:b}}=l[0],y=(0,n.deepAccess)(l[0],"ext.externalID"),v={id:c,banner:{topframe:b,format:l.map(e=>{let{banner:{w:t,h:r},ext:i}=e;return{w:t,h:r,ext:i}})}};for(let e=0;e<v.banner.format.length;e++)null!=v.banner.format[e].ext&&(null!=v.banner.format[e].ext.sid&&delete v.banner.format[e].ext.sid,null!=v.banner.format[e].ext.externalID&&delete v.banner.format[e].ext.externalID),"bidfloor"in l[e]&&(v.banner.format[e].ext.bidfloor=l[e].bidfloor),"{}"===JSON.stringify(v.banner.format[e].ext)&&delete v.banner.format[e].ext;let A=e[t[i]].pos;(0,n.isInteger)(A)&&(v.banner.pos=A),(p||u||g||f||m||y||h)&&(v.ext={},v.ext.dfp_ad_unit_code=p,v.ext.gpid=u,v.ext.tid=g,v.ext.sid=f,v.ext.externalID=y,1==m&&(v.ext.ae=1,v.ext.paapi=h)),"bidfloor"in l[0]&&(v.bidfloor=l[0].bidfloor),"bidfloorcur"in l[0]&&(v.bidfloorcur=l[0].bidfloorcur);let I=e[t[i]].adUnitFPD;I&&(0,n.deepSetValue)(v,"ext.data",I),r.imp.push(v),r.ext.ixdiag||(r.ext.ixdiag={}),r.ext.ixdiag.msd+=a,r.ext.ixdiag.msi+=s.length}}return y.length>0&&y.forEach(e=>{if(u&&(0,n.deepSetValue)(e,"ext.gpid",u),r.imp.length>0){let t=!1;r.imp.forEach((i,a)=>{e.id===i.id&&o.VIDEO in e?(i.video=e.video,i.video.ext=Object.assign({},e.video.ext,e.ext),(0,n.deepAccess)(i,"video.ext.bidfloor",!1)&&(0,n.deepAccess)(i,"bidfloor",!1)&&i.video.ext.bidfloor<i.bidfloor&&(i.bidfloor=i.video.ext.bidfloor),!(0,n.deepAccess)(i,"ext.siteID",!1)&&(0,n.deepAccess)(e,"video.ext.siteID")&&((0,n.deepSetValue)(i,"ext.siteID",e.video.ext.siteID),(0,n.deepSetValue)(r,"ext.ixdiag.usid",!0)),t=!0):e.id===i.id&&o.NATIVE in e&&(i.native=e.native,i.native.ext=Object.assign({},e.native.ext,e.ext),(0,n.deepAccess)(i,"native.ext.bidfloor",!1)&&(0,n.deepAccess)(i,"bidfloor",!1)&&i.native.ext.bidfloor<i.bidfloor&&(i.bidfloor=i.native.ext.bidfloor),!(0,n.deepAccess)(i,"ext.siteID",!1)&&(0,n.deepAccess)(e,"native.ext.siteID",!1)&&((0,n.deepSetValue)(i,"ext.siteID",e.native.ext.siteID),(0,n.deepSetValue)(r,"ext.ixdiag.usid",!0)),t=!0)}),t||r.imp.push(e)}else r.imp.push(e)}),r}(r,k,R,i);let s=(0,n.deepAccess)(t,"ortb2")||{},d={...s.site||s.context};d.page=function(e,t){let r=e&&e.bidderCode||"ix",i=a.config.getConfig(r),o="";return(o=(0,n.deepAccess)(e,"ortb2.site.page")?e.ortb2.site.page:(0,n.deepAccess)(e,"refererInfo.page"),i&&"object"==typeof i.firstPartyData)?function(e,t,r,i){let o,a=Object.keys(i),s="",d="?#",l=i[a[0]].adUnitCode,c=e=>{if(l&&e&&e[l]>=0){let t=`${e[l]}`,r=d.match(/\#PD:\S+?\#/i);r&&r[0]?d=d.replace(r[0],`${r[0]}HVP:${t}#`):s=`HVP:${t}`}};try{o=new URL(t)}catch(r){(0,n.logWarn)(`IX Bid Adapter: Invalid URL set in ortb2.site.page: ${t}. Using referer URL instead.`),o=new URL((0,n.deepAccess)(e,"refererInfo.page"))}for(let e in r)"HVP"===e.toUpperCase()?c(r[e]):"PD"===e.toUpperCase()&&s?d+=`${e}:${r[e]}#${s}#`:d+=`${e}:${r[e]}#`;return d=d.slice(0,-1),o.search="",o.toString()+d}(e,o,i.firstPartyData,t):o}(t,r);let l={...s.user};(0,n.isEmpty)(s)||N||((R=function(e,t,r,i,o){if(t.ext.ixdiag.fpd=!0,Object.keys(i).forEach(e=>{-1===f.indexOf(e)&&delete i[e]}),Object.keys(o).forEach(e=>{-1===m.indexOf(e)&&delete o[e]}),r.device){let e={...r.device.sua};(0,n.isEmpty)(e)||(0,n.deepSetValue)(t,"device.sua",e);let i=r.device.ip;i&&(0,n.deepSetValue)(t,"device.ip",i);let o=r.device.ipv6;o&&(0,n.deepSetValue)(t,"device.ipv6",o);let a=r.device.geo;a&&(0,n.deepSetValue)(t,"device.geo",a)}if(r.hasOwnProperty("regs")&&!e.gppConsent&&(r.regs.hasOwnProperty("gpp")&&"string"==typeof r.regs.gpp&&(0,n.deepSetValue)(t,"regs.gpp",r.regs.gpp),r.regs.hasOwnProperty("gpp_sid")&&Array.isArray(r.regs.gpp_sid)&&(0,n.deepSetValue)(t,"regs.gpp_sid",r.regs.gpp_sid),r.regs.ext?.dsa)){let e=r.regs.ext.dsa,i={};if(["dsarequired","pubrender","datatopub"].forEach(t=>{(0,n.isNumber)(e[t])&&(i[t]=e[t])}),(0,n.isArray)(e.transparency)){let t=[];e.transparency.forEach(e=>{(0,n.isPlainObject)(e)&&(0,n.isStr)(e.domain)&&""!=e.domain&&(0,n.isArray)(e.dsaparams)&&e.dsaparams.every(e=>(0,n.isNumber)(e))&&t.push(e)}),t.length>0&&(i.transparency=t)}(0,n.isEmpty)(i)||(0,n.deepSetValue)(t,"regs.ext.dsa",i)}return t}(t,R,s,d,l)).site=(0,n.mergeDeep)({},R.site,d),R.user=(0,n.mergeDeep)({},R.user,l),N=!0),R=function(e,t,r,i,n,o){let a=e[r[i]].pbadslot,s=e[r[i]].tagId,d=e[r[i]].adUnitCode,l=e[r[i]].divId;return(a||s||d||l)&&(t.ext.ixdiag.pbadslot=a,t.ext.ixdiag.tagid=s,t.ext.ixdiag.adunitcode=d,t.ext.ixdiag.divId=l),t}(r,R,k,i,0,0);let c=i===k.length-1;if(R=function(e){return e.imp.forEach((t,r)=>{if(void 0==t.ext)return e;if(!(2>q(t))){if(o.BANNER in t){let i=t.banner.ext;if(void 0!==i&&void 0!==i.siteID&&delete e.imp[r].banner.ext.siteID,void 0!==t.banner.format)for(let i=0;i<t.banner.format.length;i++)void 0!==t.banner.format[i].ext&&void 0!==t.banner.format[i].ext.siteID&&((0,n.deepSetValue)(e.imp[r],"ext.siteID",t.banner.format[i].ext.siteID),(0,n.deepSetValue)(e,"ext.ixdiag.usid",!0),delete e.imp[r].banner.format[i].ext.siteID)}if(o.VIDEO in t){let i=t.video.ext;void 0!==i&&void 0!==i.siteID&&delete e.imp[r].video.ext.siteID}if(o.NATIVE in t){let i=t.native.ext;void 0!==i&&void 0!==i.siteID&&delete e.imp[r].native.ext.siteID}}}),e}(R=function(e){return e.imp.forEach((t,r)=>{let i=t.ext;if(void 0==i)return e;2>q(t)||Object.keys(i).forEach(n=>{if(o.BANNER in t){let o=t.banner.ext;if(void 0!==o&&void 0!==o[n]&&o[n]==i[n]&&delete e.imp[r].banner.ext[n],void 0!==t.banner.format)for(let o=0;o<t.banner.format.length;o++)void 0!=t.banner.format[o].ext&&void 0!=t.banner.format[o].ext[n]&&t.banner.format[o].ext[n]==i[n]&&delete e.imp[r].banner.format[o].ext[n]}if(o.VIDEO in t){let o=t.video.ext;void 0!==o&&void 0!==o[n]&&o[n]==i[n]&&delete e.imp[r].video.ext[n]}if(o.NATIVE in t){let o=t.native.ext;void 0!==o&&void 0!==o[n]&&o[n]==i[n]&&delete e.imp[r].native.ext[n]}})}),e}(R=function(e){return void 0==e.device&&(e.device={}),e.device.h=window.screen.height,e.device.w=window.screen.width,e}(R))),c){let t=`${A}?`;0!==S&&(t+=`s=${S}`),$()&&(t+=(0!==S?"&":"")+`p=${a.config.getConfig("exchangeId")}`),x.push({method:"POST",url:t,data:(0,n.deepClone)(R),options:{contentType:"text/plain",withCredentials:!0},validBidRequests:e}),R.imp=[],R.ext.ixdiag.msd=0,R.ext.ixdiag.msi=0,N=!1}}return x}function U(e,t){let r=(0,n.deepAccess)(t,"ortb2Imp.ext.data");r&&(0,n.deepSetValue)(e,"ext.data",r)}function j(e,t){if(t)for(let r=0;r<e.length;r++){let i=e[r];if(t[0]===i[0]&&t[1]===i[1]){e.splice(r,1);break}}}function M(e){e.renderer.push(function(){let t=e.adUnitCode,r=document.getElementById(t)?t:(0,u.getGptSlotInfoForAdUnitCode)(t).divId;r?window.createIXPlayer(r,e):(0,n.logWarn)(`IX Bid Adapter: adUnitCode: ${r} not found on page.`)})}function V(e){if("outstream"!==(0,n.deepAccess)(e,"mediaTypes.video.context"))return!1;let t=(0,n.deepAccess)(e,"mediaTypes.video.renderer");return t||(t=(0,n.deepAccess)(e,"renderer")),!("object"==typeof t&&t.url&&t.render)||t.backupOnly}function $(){let e=a.config.getConfig("exchangeId");return!!("number"==typeof e&&isFinite(e)||"string"==typeof e&&""!==e.trim()&&isFinite(Number(e)))}function q(e){let t=0;return void 0!==e.banner&&(t+=1),void 0!==e.video&&(t+=1),void 0!==e.native&&(t+=1),t}(0,d.registerBidder)({code:"ix",gvlid:10,supportedMediaTypes:p,isBidRequestValid:function(e){var t,r;let i=(a.config.getConfig("ix")||{}).largeFormatSizes,o=(0,n.deepAccess)(e,"params.video"),s=(0,n.deepAccess)(e,"params.size"),d=(0,n.deepAccess)(e,"mediaTypes.banner.sizes"),c=(0,n.deepAccess)(e,"mediaTypes.video"),u=(0,n.deepAccess)(e,"mediaTypes.video.playerSize"),g=e.params.hasOwnProperty("bidFloor"),f=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!(0,n.contains)(p,e.mediaType))return(0,n.logWarn)("IX Bid Adapter: media type is not supported."),!1;if((0,n.deepAccess)(e,"mediaTypes.banner")&&!d)return!1;if(s){let t=N(s);if(!t)return(0,n.logError)("IX Bid Adapter: size has invalid format."),!1;if(!P(e.sizes,t)&&!P(u,t)&&!(P(d,t)||P(i,t)))return(0,n.logError)("IX Bid Adapter: bid size is not included in ad unit sizes or player size."),!1}if(!$()&&void 0==e.params.siteId)return(0,n.logError)("IX Bid Adapter: Invalid configuration - either siteId or exchangeId must be configured."),!1;if(void 0!==e.params.siteId){if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return(0,n.logError)("IX Bid Adapter: siteId must be string or number type."),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return(0,n.logError)("IX Bid Adapter: siteId must valid value"),!1}if((g||f)&&!(g&&f&&(t=e.params.bidFloor,r=e.params.bidFloorCur,"number"==typeof t&&"string"==typeof r&&r.match(/^[A-Z]{3}$/))))return(0,n.logError)("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format."),!1;if(c&&o){let t=C(e).video,r=k(c,o);if((0,n.deepAccess)(e,"mediaTypes.video.context")===l.OUTSTREAM&&V(e)&&t){let e=[(0,n.deepAccess)(t,"w"),(0,n.deepAccess)(t,"h")];if(!(e[0]>=144&&e[1]>=144))return(0,n.logError)(`IX Bid Adapter: ${e} is an invalid size for IX outstream renderer`),!1}if(r.length)return r.forEach(e=>{(0,n.logError)(e)}),!1}return void 0===(0,n.deepAccess)(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0},resetSiteID:function(){S=0},buildRequests:function(e,t){let r,i=[],s={},d={},l={},c={};for(let r in E.getFeatureToggles(),e.forEach(e=>{let r=Object.keys((0,n.deepAccess)(e,"mediaTypes",{}));for(let i in r)switch(r[i]){case o.BANNER:!function(e,t,r,i){var s;let d,l,c={detectMissingSizes:!0,...a.config.getConfig("ix")},p=((d=x(s=e,o.BANNER)).banner={},d.adunitCode=s.adUnitCode,(l=(0,n.deepAccess)(s,"params.size"))&&(d.banner.w=l[0],d.banner.h=l[1]),d.banner.topframe=+!(0,n.inIframe)(),R(s,d,o.BANNER),d),g=c.largeFormatSizes||[],f=P([...(0,n.deepAccess)(e,"mediaTypes.banner.sizes"),...g],(0,n.deepAccess)(e,"params.size"));if(r.hasOwnProperty(e.adUnitCode)||(r[e.adUnitCode]={}),r[e.adUnitCode].gpid=(0,n.deepAccess)(e,"ortb2Imp.ext.gpid"),r[e.adUnitCode].dfp_ad_unit_code=(0,n.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"),r[e.adUnitCode].tid=(0,n.deepAccess)(e,"ortb2Imp.ext.tid"),r[e.adUnitCode].pbadslot=(0,n.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"),r[e.adUnitCode].tagId=(0,n.deepAccess)(e,"params.tagId"),r[e.adUnitCode].pos=(0,n.deepAccess)(e,"mediaTypes.banner.pos"),(0,n.deepAccess)(i,"paapi.enabled")){let t=(0,n.deepAccess)(e,"ortb2Imp.ext.ae"),i=(0,n.deepAccess)(e,"ortb2Imp.ext.paapi");i&&(r[e.adUnitCode].paapi=i),t&&((0,n.isInteger)(t)?r[e.adUnitCode].ae=t:(0,n.logWarn)("error setting auction environment flag - must be an integer"))}let m=(0,n.deepAccess)(e,"ortb2Imp.ext.data");m&&(r[e.adUnitCode].adUnitFPD=m);let h=(0,n.deepAccess)(e,"params.id");h&&("string"==typeof h||"number"==typeof h)&&(r[e.adUnitCode].sid=String(h));let b=e.adUnitCode,y=document.getElementById(b)?b:(0,u.getGptSlotInfoForAdUnitCode)(b).divId;r[e.adUnitCode].adUnitCode=b,r[e.adUnitCode].divId=y,f&&(r[e.adUnitCode].hasOwnProperty("ixImps")||(r[e.adUnitCode].ixImps=[]),r[e.adUnitCode].ixImps.push(p)),c.hasOwnProperty("detectMissingSizes")&&c.detectMissingSizes&&function(e,t,r){if(t.hasOwnProperty(e.adUnitCode)){let r=[];t[e.adUnitCode].hasOwnProperty("missingSizes")&&(r=t[e.adUnitCode].missingSizes),j(r,e.params.size),t[e.adUnitCode].missingSizes=r}else if((0,n.deepAccess)(e,"mediaTypes.banner.sizes")){let i=(0,n.deepClone)(e.mediaTypes.banner.sizes);j(i,e.params.size),t[e.adUnitCode]={missingSizes:i,impression:r}}}(e,t,p)}(e,c,s,t);break;case o.VIDEO:!function(e,t){let r=C(e);if(0!=Object.keys(r).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(r),t[e.adUnitCode].gpid=(0,n.deepAccess)(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=(0,n.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=(0,n.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=(0,n.deepAccess)(e,"params.tagId");let i=e.adUnitCode,o=document.getElementById(i)?i:(0,u.getGptSlotInfoForAdUnitCode)(i).divId;t[e.adUnitCode].adUnitCode=i,t[e.adUnitCode].divId=o}}(e,d);break;case o.NATIVE:!function(e,t){let r=w(e);if(0!=Object.keys(r).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(r),t[e.adUnitCode].gpid=(0,n.deepAccess)(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=(0,n.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=(0,n.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=(0,n.deepAccess)(e,"params.tagId");let i=e.adUnitCode,o=document.getElementById(i)?i:(0,u.getGptSlotInfoForAdUnitCode)(i).divId;t[e.adUnitCode].adUnitCode=i,t[e.adUnitCode].divId=o}}(e,l);break;default:(0,n.logWarn)(`IX Bid Adapter: ad unit mediaTypes ${i} is not supported`)}}),c)if(c.hasOwnProperty(r)){let t=c[r].missingSizes;s.hasOwnProperty(r)||(s[r]={}),s[r].hasOwnProperty("missingImps")||(s[r].missingImps=[]),s[r].hasOwnProperty("missingCount")||(s[r].missingCount=0);let i=c[r].impression;for(let a=0;a<t.length;a++){let d=function(e,t,r){let i=(0,n.deepClone)(t);return i.banner.w=r[0],i.banner.h=r[1],R(e,i,o.BANNER),i}(e[0],i,t[a]);s[r].missingImps.push(d),s[r].missingCount++}}let p=[];return Object.keys(s).length>0&&p.push(s),Object.keys(d).length>0&&p.push(d),Object.keys(l).length>0&&p.push(l),E.isFeatureEnabled("pbjs_enable_multiformat")?i.push(...B(e,t,(r={},p.forEach(e=>{Object.keys(e).forEach(t=>{Object.keys(r).includes(t)?r[t].hasOwnProperty("ixImps")&&e[t].hasOwnProperty("ixImps")?r[t].ixImps=[...r[t].ixImps,...e[t].ixImps]:r[t].hasOwnProperty("missingImps")&&e[t].hasOwnProperty("missingImps")?r[t].missingImps=[...r[t].missingImps,...e[t].missingImps]:e[t].hasOwnProperty("ixImps")?r[t].ixImps=e[t].ixImps:e[t].hasOwnProperty("missingImps")&&(r[t].missingImps=e[t].missingImps):r[t]=e[t]})}),r))):(Object.keys(s).length>0&&i.push(...B(e,t,s,7.2)),Object.keys(d).length>0&&i.push(...B(e,t,d,8.1)),Object.keys(l).length>0&&i.push(...B(e,t,l))),i},interpretResponse:function(e,t){let r=[],i=null,a=(0,n.deepAccess)(e,"body.ext.protectedAudienceAuctionConfigs")||[];if(E.setFeatureToggles(e),!e.hasOwnProperty("body"))return r;let s=e.body,d=s.seatbid||[];for(let e=0;e<d.length;e++){if(!d[e].hasOwnProperty("bid"))continue;let a=d[e].bid,l=t.data;for(let e=0;e<a.length;e++){let d=function(e,t,r){if(e)return{...r.find(t=>t.bidId===e),...t.find(t=>t.id===e)}}(a[e].impid,l.imp,t.validBidRequests);if((i=function(e,t,r){let i={},a=!!((0,n.deepAccess)(e,"exp")&&(0,n.isInteger)(e.exp)),s=(0,n.deepAccess)(e,"dealid")||(0,n.deepAccess)(e,"ext.dealid");g.hasOwnProperty(t)?i.cpm=e.price/g[t]:i.cpm=e.price/100,i.requestId=e.impid,s&&(i.dealId=s),i.netRevenue=!0,i.currency=t,i.creativeId=e.hasOwnProperty("crid")?e.crid:"-",2!=e.mtype||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(i.vastUrl=e.ext.vasturl):i.vastXml=e.adm;let d=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{d=JSON.parse(e.adm)}catch(e){(0,n.logWarn)("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||2==e.mtype?(i.width=r.video.w,i.height=r.video.h,i.mediaType=o.VIDEO,i.mediaTypes=r.mediaTypes,i.ttl=a?e.exp:3600):d&&d.native?(i.native={ortb:d.native},i.width=e.w?e.w:1,i.height=e.h?e.h:1,i.mediaType=o.NATIVE,i.ttl=a?e.exp:3600):(i.ad=e.adm,i.width=e.w,i.height=e.h,i.mediaType=o.BANNER,i.ttl=a?e.exp:300),i.meta={},i.meta.networkId=(0,n.deepAccess)(e,"ext.dspid"),i.meta.brandId=(0,n.deepAccess)(e,"ext.advbrandid"),i.meta.brandName=(0,n.deepAccess)(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(i.meta.advertiserDomains=e.adomain),e.ext?.dsa&&(i.meta.dsa=e.ext.dsa),e.ext?.ibv&&(i.ext=i.ext||{},i.ext.ibv=e.ext.ibv),i}(a[e],s.cur,d)).mediaType===o.VIDEO&&V(d)){let t=(0,n.deepAccess)(s,"ext.videoplayerurl");if(t&&(i.renderer=function(e,t){let r=c.Renderer.install({id:e,url:t,loaded:!1});try{r.setRender(M)}catch(e){return(0,n.logWarn)("Prebid Error calling setRender on renderer",e),null}return t?r:((0,n.logWarn)("Outstream renderer URL not found"),null)}(a[e].bidId,t),!i.renderer))continue}r.push(i)}if((0,n.deepAccess)(l,"ext.ixdiag.err")&&I.localStorageIsEnabled())try{I.removeDataFromLocalStorage("ixdiag")}catch(e){(0,n.logError)("ix can not clear ixdiag from localStorage.")}}if(!Array.isArray(a)||!(a.length>0))return r;a=a.filter(e=>{var t;return"object"==typeof(t=e)&&null!==t||((0,n.logWarn)("Malformed auction config detected:",e),!1)});try{return{bids:r,paapi:a}}catch(e){return(0,n.logWarn)("Error attaching AuctionConfigs",e),r}},getUserSyncs:function(e,t){let r=[],i=null;if(t.length>0&&(i=(0,n.deepAccess)(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==i&&0==i)return[];if(e.iframeEnabled)r.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{let e=null;a.config.getConfig("userSync")&&(e=a.config.getConfig("userSync").syncsPerBidder),0===e&&(e=i),e=i&&(0===e||e)?i>e?e:i:1;for(let t=0;t<e;t++)r.push({type:"image",url:function(e,t){let r="",i="0";return _&&_.hasOwnProperty("gdprApplies")&&(i=_.gdprApplies?"1":"0"),_&&_.hasOwnProperty("consentString")&&(r=_.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid"+(0!==S?"&site_id="+S.toString():"")+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+i+"&gdpr_consent="+r+"&us_privacy="+(T||"")}(e,t)})}return r}}),(0,i.registerModule)("ixBidAdapter")},2958:function(e,t,r){"use strict";let i,n,o;var a=r(3800),s=r(7750),d=r(4321),l=r(256),c=r(9287),u=r(4030);let p=Object.freeze({CODE:"kargo",HOST:"krk2.kargo.com",REQUEST_METHOD:"POST",REQUEST_ENDPOINT:"/api/v1/prebid",TIMEOUT_ENDPOINT:"/api/v1/event/timeout",GVLID:972,SUPPORTED_MEDIA_TYPES:[u.BANNER,u.VIDEO]}),g=(0,c.getStorageManager)({bidderCode:p.CODE}),f=Object.freeze({KEY:"currency",US_DOLLAR:"USD"}),m=Object.freeze({USER_DATA:"ortb2.user.data",SOCIAL_CANVAS:"params.socialCanvas",SUA:"ortb2.device.sua",TDID_ADAPTER:"userId.tdid"}),h=Object.freeze({BROWSERS:"browsers",MOBILE:"mobile",MODEL:"model",PLATFORM:"platform",SOURCE:"source"}),b=[h.BROWSERS,h.MOBILE,h.MODEL,h.SOURCE,h.PLATFORM],y=Object.freeze({KEY:"krg_crb",SYNC_URL:"https://crb.kargo.com/api/v1/initsyncrnd/{UUID}?seed={SEED}&gdpr={GDPR}&gdpr_consent={GDPR_CONSENT}&us_privacy={US_PRIVACY}&gpp={GPP_STRING}&gpp_sid={GPP_SID}",SYNC_COUNT:5,PAGE_VIEW_ID:"pageViewId",PAGE_VIEW_TIMESTAMP:"pageViewTimestamp",PAGE_VIEW_URL:"pageViewUrl"});function v(){try{var e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=-177&e[6]|64,e[8]=-65&e[8]|128;var t=Array.prototype.map.call(new Uint8Array(e),function(e){return("00"+e.toString(16)).slice(-2)}).join("");return t.slice(0,8)+"-"+t.slice(8,12)+"-"+t.slice(12,16)+"-"+t.slice(16,20)+"-"+t.slice(20)}catch(e){return""}}function A(){return i||(i=v()),i}function I(e){try{return g.getDataFromLocalStorage(e)}catch(e){return null}}let E={gvlid:p.GVLID,code:p.CODE,isBidRequestValid:function(e){return!!e&&!!e.params&&!!e.params.placementId},buildRequests:function(e,t){var r,i,a;let l,c=d.config.getConfig(f.KEY),u=c&&c.adServerCurrency?c.adServerCurrency:null,v=[];(0,s._each)(e,e=>{v.push(function(e){let t={id:e.bidId,tid:e.ortb2Imp?.ext?.tid,pid:e.params.placementId,code:e.adUnitCode};null!=e.floorData&&e.floorData.floorMin>0&&(t.floor=e.floorData.floorMin),e.bidRequestsCount>0&&(t.bidRequestCount=e.bidRequestsCount),e.bidderRequestsCount>0&&(t.bidderRequestCount=e.bidderRequestsCount),e.bidderWinsCount>0&&(t.bidderWinCount=e.bidderWinsCount);let r=(0,s.deepAccess)(e,"ortb2Imp.ext.gpid")||(0,s.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");if(r&&(t.fpd={gpid:r}),e.ortb2Imp&&(t.ext={ortb2Imp:e.ortb2Imp}),e.mediaTypes){let{banner:r,video:i,native:n}=e.mediaTypes;r&&(t.banner=r),i&&(t.video=i),n&&(t.native=n)}return t}(e))});let S=e[0],_=(0,s.deepAccess)(S,m.TDID_ADAPTER),T=(r=t,{pageURL:r?.refererInfo?.page,rawCRB:g.getCookie(y.KEY),rawCRBLocalStorage:I(y.KEY)}),O=Object.assign({},{pbv:"9.53.2",aid:S.auctionId,sid:A(),url:T.pageURL,timeout:t.timeout,ts:new Date().getTime(),device:{size:[window.screen.width,window.screen.height]},imp:v,user:function(e,t,r,i,n){let o=E._getCrb(),a={crbIDs:o.syncIds||{}};if(!e&&o.tdID?a.tdID=o.tdID:e&&(a.tdID=e),t&&(a.usp=t),r&&(a.gdpr={consent:r.consentString||"",applies:!!r.gdprApplies}),null!=o.lexId&&(a.kargoID=o.lexId),null!=o.clientId&&(a.clientID=o.clientId),null!=o.optOut&&(a.optOut=o.optOut),null!=i&&(a.sharedIDEids=i),n){let e={};n.consentString&&(e.gppString=n.consentString),n.applicableSections&&(e.applicableSections=n.applicableSections),(0,s.isEmpty)(e)||(a.gpp=e)}return a}(_,t.uspConsent,t.gdprConsent,S.userIdAsEids,t.gppConsent),ext:(i=S.ortb2,a=t?.refererInfo,l={},i&&(l.ortb2=i),a&&(l.refererInfo=a),l)});S.ortb2?.site?.cat!=null&&(O.site={cat:S.ortb2.site.cat}),S.schain&&S.schain.nodes&&(O.schain=S.schain),O.user.data=(0,s.deepAccess)(S,m.USER_DATA)||[];let C=n===window.location.pathname?++o:(n=window.location.pathname,o=0);null!=C&&(O.requestCount=C),null!=u&&u!=f.US_DOLLAR&&(O.cur=u),null!=T.rawCRB&&(O.rawCRB=T.rawCRB),null!=T.rawCRBLocalStorage&&(O.rawCRBLocalStorage=T.rawCRBLocalStorage);let w=(0,s.deepAccess)(S,m.SOCIAL_CANVAS);null!=w&&(O.socan=w);let x=(0,s.deepAccess)(S,m.SUA);if(x){let e=[];b.forEach(t=>{let r=x[t];if(r&&("string"!=typeof r||""!==r.trim()))switch(t){case h.MOBILE&&r<1:case h.SOURCE&&r<1:break;default:e.push(t)}}),O.device.sua=(0,s.pick)(x,e)}let R=null!=I(y.PAGE_VIEW_ID),D=null!=I(y.PAGE_VIEW_TIMESTAMP),P=null!=I(y.PAGE_VIEW_URL),k={};return R&&(k.id=I(y.PAGE_VIEW_ID)),D&&(k.timestamp=Number(I(y.PAGE_VIEW_TIMESTAMP))),P&&(k.url=I(y.PAGE_VIEW_URL)),(0,s.isEmpty)(k)||(O.page=k),O.ext&&0===Object.keys(O.ext).length&&delete O.ext,Object.assign({},t,{method:p.REQUEST_METHOD,url:`https://${p.HOST}${p.REQUEST_ENDPOINT}`,data:O,currency:u})},interpretResponse:function(e,t){let r=e.body,i=[],n=[];if((0,s.isEmpty)(r)||"object"!=typeof r)return n;for(let[e,o]of Object.entries(r)){let r={mediaType:o.mediaType&&p.SUPPORTED_MEDIA_TYPES.includes(o.mediaType)?o.mediaType:u.BANNER};o.metadata?.landingPageDomain&&(r.clickUrl=o.metadata.landingPageDomain[0],r.advertiserDomains=o.metadata.landingPageDomain);let a={requestId:e,cpm:Number(o.cpm),width:o.width,height:o.height,ttl:300,creativeId:o.creativeID,dealId:o.targetingCustom,netRevenue:!0,currency:o.currency||t.currency,mediaType:r.mediaType,meta:r};r.mediaType==u.VIDEO?o.admUrl?a.vastUrl=o.admUrl:a.vastXml=o.adm:a.ad=o.adm,n.push(a),o.auctionConfig&&i.push({bidId:e,config:o.auctionConfig})}return i.length>0?{bids:n,paapi:i}:n},getUserSyncs:function(e,t,r,i,n){let o=[],a=v(),s=E._getCrb().clientId;var d=r&&r.gdprApplies?1:0,l=r&&r.consentString?r.consentString:"",c=n&&n.consentString?n.consentString:"",u=n&&n.applicableSections&&Array.isArray(n.applicableSections)?n.applicableSections.join(","):"";return"string"==typeof i&&4==i.length&&1==i[0]&&"Y"==i[2]||e.iframeEnabled&&a&&s&&o.push({type:"iframe",url:y.SYNC_URL.replace("{UUID}",s).replace("{SEED}",a).replace("{GDPR}",d).replace("{GDPR_CONSENT}",l).replace("{US_PRIVACY}",i||"").replace("{GPP_STRING}",c).replace("{GPP_SID}",u)}),o},supportedMediaTypes:p.SUPPORTED_MEDIA_TYPES,onTimeout:function(e){null!=e&&e.forEach(e=>{var t,r;t=e.auctionId,r=e.timeout,fetch((0,s.buildUrl)({protocol:"https",hostname:p.HOST,pathname:p.TIMEOUT_ENDPOINT,search:{aid:t,ato:r}}),{method:"GET",keepalive:!0}).catch(e=>{(0,s.logError)("Kargo: sendTimeoutData/fetch threw an error: ",e)})})},_getCrb:function(){let e=function(){try{return JSON.parse(atob(I(y.KEY)))}catch(e){return{}}}();return Object.keys(e).length?e:function(){try{let e=JSON.parse(g.getCookie(y.KEY));if(e&&e.v){let t=JSON.parse(atob(e.v));if(t)return t}return{}}catch(e){return{}}}()},_getSessionId:A};(0,l.registerBidder)(E),(0,a.registerModule)("kargoBidAdapter")},7376:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(1620),a=r(9287),s=r(4767),d=r(6553);let l="linkedInAdsId",c="LinkedIn Ads ID: ",u=(0,a.getStorageManager)({moduleType:s.MODULE_TYPE_UID,moduleName:l});(0,o.submodule)("userId",{name:l,getCookieIds:()=>({li_fat:u.getCookie("li_fat"),li_giant:u.getCookie("li_giant")}),decode(e){let t=this.getCookieIds();return(0,n.logInfo)(`${c} found Legacy cookies: ${JSON.stringify(t)}`),{linkedInAdsId:{li_adsId:e,ext:{...t}}}},getId(e){let t=e?.storage?.name||"li_adsId",r=u.localStorageIsEnabled()&&u.getDataFromLocalStorage(t);return this.hasConsent()&&!r&&((0,n.logInfo)(`${c} existing id not found, generating a new li_adsId`),r=(0,n.generateUUID)()),{id:r}},hasConsent:function(){let e=d.gdprDataHandler.getConsentData(),t=!e?.gdprApplies,r=d.coppaDataHandler.getCoppa(),i=d.uspDataHandler.getConsentData()||"",n=4!==i.length||"Y"!==i[1]||"Y"!==i[2];return t&&n&&!r},eids:{linkedInAdsId:{source:"linkedin.com",getValue:function(e){return e.li_adsId},getUidExt:function(e){if(e.ext)return e.ext},atype:1}}}),(0,i.registerModule)("linkedInAdsIdSystem")},9606:function(e,t,r){"use strict";var i=r(3800);r(9496),(0,i.registerModule)("liveIntentIdSystem")},6033:function(e,t,r){"use strict";var i=r(3800),n=r(1620),o=r(4767),a=r(9287);let s="lmpid",d="__lmpid",l=(0,a.getStorageManager)({moduleType:o.MODULE_TYPE_UID,moduleName:s});(0,n.submodule)("userId",{name:s,decode:e=>e?{lmpid:e}:void 0,getId(e){let t=window[d]||(l.localStorageIsEnabled()?l.getDataFromLocalStorage(d):null);return t?{id:t}:void 0},eids:{lmpid:{source:"loblawmedia.ca",atype:3}}}),(0,i.registerModule)("lmpIdSystem")},3173:function(e,t,r){"use strict";let i;var n=r(3800),o=r(7750),a=r(7581),s=r(1620),d=r(9287),l=r(4767);let c="panoramaId",u=`${c}_expiry`,p="_cc_id",g="lotamePanoramaId",f=(0,d.getStorageManager)({moduleType:l.MODULE_TYPE_UID,moduleName:g}),m={type:"cookie&html5",name:"panoramaId"};function h(e){let t=null;return v(!1)&&(t=f.getCookie(e,void 0)),null===t&&A(!1)&&(t=f.getDataFromLocalStorage(e,void 0)),t}function b(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.timestamp)()+6048e5;if(e&&t){let n=new Date(r).toUTCString();v()&&f.setCookie(e,t,n,"Lax",i,void 0),A()&&f.setDataInLocalStorage(e,t,void 0)}}function y(e){if(e){if(v(!1)){let t=new Date(0).toUTCString();f.setCookie(e,"",t,"Lax",i,void 0)}A(!1)&&f.removeDataFromLocalStorage(e,void 0)}}function v(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e?f.cookiesAreEnabled()&&m.type.includes("cookie"):f.cookiesAreEnabled()}function A(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e?f.hasLocalStorage()&&m.type.includes("html5"):f.hasLocalStorage()}let I={name:g,gvlid:95,decode:(e,t)=>(0,o.isStr)(e)?{lotamePanoramaId:e}:void 0,getId(e,t,r){let n;if(function(e){let t=null;if(void 0!==e.storage){Object.assign(m,m,e.storage);let r="Lotame ID module",i=["cookie","html5","cookie&html5"];void 0!==e.storage.name&&e.storage.name!==c?((0,o.logError)(`Misconfigured ${r}, "storage.name" is expected to be "${c}", actual is "${e.storage.name}"`),t=!0):"undefined"===e.storage.type||i.includes(e.storage.type)||(0,o.logError)(`Misconfigured ${r}, "storage.type" is expected to be one of "${i.join(", ")}", actual is "${e.storage.type}"`)}return t}(e))return;i=I.findRootDomain();let s=(e&&e.params||{}).clientId,d=!(0,o.isEmpty)(s),l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t={data:h(c),expiryTimestampMs:0,clientExpiryTimestampMs:0};try{if(e){let r=h(`${u}_${e}`);(0,o.isStr)(r)&&(t.clientExpiryTimestampMs=parseInt(r,10))}let r=h(u);(0,o.isStr)(r)&&(t.expiryTimestampMs=parseInt(r,10))}catch(e){(0,o.logError)(e)}return t}(s),g=Date.now()>l.expiryTimestampMs;if(d&&Date.now()<l.clientExpiryTimestampMs)return{id:void 0,reason:"NO_CLIENT_CONSENT"};if(!g)return{id:l.data};let E=(v(!1)&&(n=f.getCookie(p,void 0)),!n&&A(!1)&&(n=f.getDataFromLocalStorage(p,void 0)),n);return{callback:function(e){let r,n={};E&&(n.fp=E),t&&((0,o.isBoolean)(t.gdpr?.gdprApplies)&&(n.gdpr_applies=t.gdpr.gdprApplies),r=t.gdpr?.consentString),r&&(n.gdpr_consent=r),d&&(n.c=s);let l=(0,o.buildUrl)({protocol:"https",host:navigator.userAgent&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?"c.ltmsphrcl.net":"id.crwdcntrl.net",pathname:"/id",search:(0,o.isEmpty)(n)?void 0:n});(0,a.ajax)(l,t=>{let r;if(t)try{let n=JSON.parse(t),a=!((0,o.isArray)(n.errors)&&-1!==n.errors.indexOf(111));if(d){if(a)y(`${u}_${s}`);else if((0,o.isStr)(n.no_consent)&&"CLIENT"===n.no_consent){b(`${u}_${s}`,n.expiry_ts,n.expiry_ts),e();return}}b(u,n.expiry_ts,n.expiry_ts),(0,o.isStr)(n.profile_id)?(a&&function(e){if(v()){let t=new Date((0,o.timestamp)()+23328e6).toUTCString();f.setCookie(p,e,t,"Lax",i,void 0)}A()&&f.setDataInLocalStorage(p,e,void 0)}(n.profile_id),(0,o.isStr)(n.core_id)?(b(c,n.core_id,n.expiry_ts),r=n.core_id):y(c)):(a&&y(p),y(c))}catch(e){(0,o.logError)(e)}e(r)},void 0,{method:"GET",withCredentials:!0})}}},eids:{lotamePanoramaId:{source:"crwdcntrl.net",atype:1}}};(0,s.submodule)("userId",I),(0,n.registerModule)("lotamePanoramaIdSystem")},8316:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=l(r(7581)),a=r(1620),s=r(9287),d=r(4767);function l(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(l=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let c="merkleId",u="https://prebid.sv.rkdms.com/identity/",p="_svsid",g=(0,s.getStorageManager)({moduleType:d.MODULE_TYPE_UID,moduleName:c});function f(e,t){let r,i,a=(r="string"==typeof e.sv_session?e.sv_session:g.getCookie(p),i=e.endpoint+`?sv_domain=${e.sv_domain}&sv_pubid=${e.sv_pubid}&ssp_ids=${e.ssp_ids.join()}`,r&&(i=`${i}&sv_session=${r}`),(0,n.logInfo)("Merkle url :"+i),i);return function(e){o.ajaxBuilder()(a,r=>{let i;if(r)try{var o,a,s;let e;o=i=JSON.parse(r),(0,n.logInfo)(`Merkle setting ${p}`),o&&o[p]&&"string"==typeof o[p]&&(a=o[p],s=t.expires,(e=new Date).setTime(e.getTime()+1e3*s*60),g.setCookie(p,a,e.toUTCString(),"Lax")),(0,n.logInfo)("Merkle responseObj "+JSON.stringify(i))}catch(e){(0,n.logError)(e)}let d=new Date().toUTCString();i.date=d,(0,n.logInfo)("Merkle responseObj with date "+JSON.stringify(i)),e(i)},t=>{(0,n.logError)(`${c}: merkleId fetch encountered an error`,t),e()},{method:"GET",withCredentials:!0})}}let m={name:c,decode(e){let t=e&&e.pam_id&&"string"==typeof e.pam_id.id?e.pam_id:void 0;if((0,n.logInfo)("Merkle id "+JSON.stringify(t)),t)return{merkleId:t};let r=e&&e?.merkleId&&Array.isArray(e.merkleId)?e.merkleId:void 0;return(0,n.logInfo)("merkleIds: "+JSON.stringify(r)),r?{merkleId:r}:void 0},getId(e,t){(0,n.logInfo)("User ID - merkleId generating id");let r=e&&e.params||{};return"string"!=typeof r.sv_pubid?void(0,n.logError)("User ID - merkleId submodule requires a valid sv_pubid string to be defined"):Array.isArray(r.ssp_ids)?t?.gdpr?.gdprApplies===!0?void(0,n.logError)("User ID - merkleId submodule does not currently handle consent strings"):("string"!=typeof r.endpoint&&((0,n.logWarn)("User ID - merkleId submodule endpoint string is not defined"),r.endpoint=u),"string"!=typeof r.sv_domain&&(r.sv_domain=m.findRootDomain()),{callback:f(r,e&&e.storage||{})}):void(0,n.logError)("User ID - merkleId submodule requires a valid ssp_ids array to be defined")},extendId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;(0,n.logInfo)("User ID - stored id "+r);let i=e&&e.params||{};if("string"!=typeof i.endpoint&&((0,n.logWarn)("User ID - merkleId submodule endpoint string is not defined"),i.endpoint=u),t&&"boolean"==typeof t.gdprApplies&&t.gdprApplies)return void(0,n.logError)("User ID - merkleId submodule does not currently handle consent strings");"string"!=typeof i.sv_domain&&(i.sv_domain=m.findRootDomain());let o=e&&e.storage||{};if(o&&o.refreshInSeconds&&"number"==typeof i.refreshInSeconds)return{id:r};let a=25200;i&&i.refreshInSeconds&&"number"==typeof i.refreshInSeconds&&(a=i.refreshInSeconds,(0,n.logInfo)("User ID - merkleId param refreshInSeconds"+a));let s=new Date(r.date);return s&&s&&Date.now()-s.getTime()>1e3*a?((0,n.logInfo)("User ID - merkleId needs refreshing id"),{callback:f(i,o)}):((0,n.logInfo)("User ID - merkleId not refreshed"),{id:r})},eids:{merkleId:{atype:3,getSource:function(e){return e?.ext?.ssp?`${e.ext.ssp}.merkleinc.com`:"merkleinc.com"},getValue:function(e){return e.id},getUidExt:function(e){return e.keyID?{keyID:e.keyID}:e.ext?e.ext:void 0}}}};(0,a.submodule)("userId",m),(0,i.registerModule)("merkleIdSystem")},9461:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(256),a=r(4030);let s=(0,r(8256).ortbConverter)({context:{netRevenue:!0,ttl:30},imp(e,t,r){let i=e(t,r);return i.tagid=t.adUnitCode,i.ext&&(i.ext.placementId=t.params.placementId),i}}),d=[a.BANNER,a.VIDEO,a.NATIVE],l=(0,i.getGlobal)(),c={},u={},p={},g=new Set,f=new Set,m=new Set,h={url:e=>"string"==typeof e,placementId:e=>"string"==typeof e||"number"==typeof e};(0,o.registerBidder)({code:"nativo",gvlid:263,aliases:["ntv"],supportedMediaTypes:d,isBidRequestValid:function(e){return!e.params||!Object.keys(e.params).some(t=>{let r=e.params[t],i=h[t];return!!i&&!i(r)})},buildRequests:function(e,t){let r,i,o=JSON.stringify(s.toORTB({bidRequests:e,bidderRequest:t})),a=new b;a.addBidRequestDataSource(new v);let d=new Set,p=function(){let e={},t=[];function r(t,r){e.hasOwnProperty(t)||(e[t]=r)}return{addBidData:function(e,i){let n=t.length;(t.push(e),Array.isArray(i))?i.forEach(e=>{r(String(e),n)}):r(String(i),n)},getBidData:function(r){let i=String(r);if(e.hasOwnProperty(i))return t[e[i]]}}}(),h={length:0},y={};e.forEach(e=>{i=function(e){let t=(0,n.deepAccess)(e,"params.url");if(void 0!=t){if(T(t))return t;t=function(e){if(T(e))return e;let t="https:";return 0!==e.indexOf("//")&&(t+="//"),`${t}${e}`}(t);try{return new URL(t).href}catch(e){}}}(e)||t.refererInfo.location,r=(0,n.deepAccess)(e,"params.placementId");let o=[e.adUnitCode];r&&!d.has(r)&&(d.add(r),o.push(r),h[r]=e.sizes,h.length++);let s={bidId:e.bidId,size:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;return e&&0!==e.length?1===e.length?e[0]:e.reduce((e,r)=>t(r)>t(e)?r:e):[]}(e.sizes)};p.addBidData(s,o);let l=function(e){if("function"!=typeof e.getFloor)return;let t={},r=e.mediaTypes,i=new Set;Object.keys(r).forEach(n=>{let o=r[n],a={};(o.sizes||o.playerSize||[]).forEach(t=>{let r=e.getFloor({currency:"USD",mediaType:n,size:t});a[I(t)]=r?.floor,i.add(t)}),t[n]=a;let s=function(e,t){return e.getFloor({currency:"USD",mediaType:t,size:"*"})}(e,n);s?.floor>0&&(a["*"]=s.floor)});let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["*"],r={};return t.forEach(t=>{let i=e.mediaTypes;e.mediaTypes={PRICE_FLOOR_WILDCARD:i.sizes};let n=e.getFloor({currency:"USD",mediaType:"*",size:t});e.mediaTypes=i,r["*"!==t?I(t):"*"]=n.floor}),r}(e,["*",...Array.from(i)]);return t["*"]=n,t}(e);l&&(y[e.adUnitCode]=l),a.processBidRequestData(e,t)}),c[t.bidderRequestId]=p;let A=e.map(e=>(u[e.adUnitCode]=void 0!==u[e.adUnitCode]?u[e.adUnitCode]+1:0,{adUnitCode:e.adUnitCode,mediaTypes:e.mediaTypes})),_=[{key:"ntv_pbv",value:l.version},{key:"ntv_pb_rid",value:t.bidderRequestId},{key:"ntv_ppc",value:btoa(JSON.stringify(A))},{key:"ntv_dbr",value:btoa(JSON.stringify(u))},{key:"ntv_url",value:encodeURIComponent(i)}];if(Object.keys(y).length&&_.unshift({key:"ntv_ppf",value:btoa(JSON.stringify(y))}),g.size>0&&_.unshift({key:"ntv_atf",value:Array.from(g).join(",")}),f.size>0&&_.unshift({key:"ntv_avtf",value:Array.from(f).join(",")}),m.size>0&&_.unshift({key:"ntv_ctf",value:Array.from(m).join(",")}),h.length&&_.unshift({key:"ntv_pas",value:btoa(JSON.stringify(h))}),d.size>0){let e=[];d.forEach(t=>e.push(t)),_.unshift({key:"ntv_ptd",value:e.join(",")})}return t.gdprConsent&&_.unshift({key:"ntv_gdpr_consent",value:t.gdprConsent.consentString}),t.gppConsent&&_.unshift({key:"ntv_gpp_consent",value:t.gppConsent.gppString}),t.uspConsent&&_.unshift({key:"us_privacy",value:t.uspConsent}),{method:"POST",url:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length||!Array.isArray(t))return e;let r=t.filter(e=>""!==e.trim());if(0===r.length)return e;let i=`${e}?${r[0]}`;for(let e=1;e<r.length;e++)i+=`&${r[e]}`;return i}("https://exchange.postrelease.com/prebid",[a.getRequestDataQueryString(),_.reduce((e,t)=>E(e,t.key,t.value),"")]),data:o,bidderRequest:t}},interpretResponse:function(e,t){if(!e||!e.body||(0,n.isEmpty)(e.body))return[];try{let r,i,o="string"==typeof e.body?JSON.parse(e.body):e.body,s=[];return o.seatbid.forEach((e,d)=>{e.bid.forEach(e=>{var l;r={requestId:(i=this.getAdUnitData(o.id,e)).bidId,cpm:e.price,currency:o.cur,width:e.w||i.size[0],height:e.h||i.size[1],creativeId:e.crid,dealId:e.id,netRevenue:!0,ttl:e.ttl||360,ad:e.adm,meta:{advertiserDomains:e.adomain},mediaType:(l=t.bidderRequest.bids[d],(0,n.deepAccess)(l,"mediaTypes.video")?a.VIDEO:(0,n.deepAccess)(l,"mediaTypes.native")?a.NATIVE:a.BANNER)},e.ext&&(p[e.id]=e.ext),r.mediaType===a.VIDEO&&(r.vastUrl=e.adm),r.mediaType===a.NATIVE&&(r.native={ortb:JSON.parse(r.ad)}),s.push(r)})}),delete c[o.id],s}catch(e){return[]}},getUserSyncs:function(e,t,r,i){let o,a="";r&&(a=E(a,"gdpr",+!!r.gdprApplies),a=E(a,"gdpr_consent",encodeURIComponent(r.consentString||""))),i&&(a=E(a,"us_privacy",encodeURIComponent(i.uspConsent)));let s={iframe:e.iframeEnabled,image:e.pixelEnabled},d=[];return t.forEach(e=>{if(!e||!e.body||(0,n.isEmpty)(e.body))return d;try{o="string"==typeof e.body?JSON.parse(e.body):e.body}catch(e){return}o&&o.seatbid&&0!==o.seatbid.length&&o.seatbid.forEach(e=>{e.syncUrls&&e.syncUrls.forEach(e=>{s[e.type]&&""!==e.url.trim()&&d.push({type:e.type,url:e.url.replace("{GDPR_params}",a)})})})}),d},onBidWon:function(e){let t=p[e.dealId];t&&(_(g,t.adsToFilter),_(f,t.advertisersToFilter),_(m,t.campaignsToFilter))},getAdUnitData:function(e,t){let r=c[e],i=t.impid,o=(0,n.deepAccess)(t,"ext.ad_unit_id");return r.getBidData(o)||r.getBidData(i)}});class b{addBidRequestDataSource(e){e instanceof y&&this.bidRequestDataSources.push(e)}processBidRequestData(e,t){for(let r of this.bidRequestDataSources)r.processBidRequestData(e,t)}getRequestDataQueryString(){if(0!=this.bidRequestDataSources.length)return this.bidRequestDataSources.map(e=>e.getRequestQueryString()).filter(e=>""!==e).join("&")}constructor(){this.bidRequestDataSources=[]}}class y{processBidRequestData(e,t){}getRequestQueryString(){return""}constructor(){this.type="BidRequestDataSource"}}class v extends y{processBidRequestData(e,t){void 0===e.userIdAsEids||this.eids.length>0||(this.eids=e.userIdAsEids)}getRequestQueryString(){if(0===this.eids.length)return"";let e=function(e){try{return btoa(JSON.stringify(e))}catch(e){}}(this.eids);return this.qsParam.value=e,this.qsParam.toString()}constructor(){super(),this.type="UserEIDs",this.qsParam=new A("ntv_pb_eid"),this.eids=[]}}class A{constructor(e,t){this.key=e,this.value=t}}function I(e){return!Array.isArray(e)||e.length<2?"":`${e[0]}x${e[1]}`}function E(e,t,r){return e+`${e.length?"&":""}${t}=${r}`}A.prototype.toString=function(){return`${this.key}=${this.value}`};let S=e=>e[0]*e[1];function _(e,t){t&&Array.isArray(t)&&t.length&&t.forEach(t=>e.add(t))}function T(e){return/^http[s]?\:/.test(e)}(0,i.registerModule)("nativoBidAdapter")},4378:function(e,t,r){"use strict";var i=r(3800),n=r(4321),o=r(256),a=l(r(7750)),s=r(4030),d=r(8256);function l(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(l=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let c={code:"openx",gvlid:69,supportedMediaTypes:[s.BANNER,s.VIDEO,s.NATIVE],isBidRequestValid:function(e){let t=e.params.delDomain||e.params.platform;return a.deepAccess(e,"mediaTypes.banner")&&t?!!e.params.unit||a.deepAccess(e,"mediaTypes.banner.sizes.length")>0:!!(e.params.unit&&t)},buildRequests:function(e,t){let r=e.filter(e=>g(e)),i=e.filter(e=>{var t;let r;return r=!g(t=e)&&!f(t),a.deepAccess(t,"mediaTypes.banner")||r||f(e)}).map(e=>({...e,mediaTypes:{...e.mediaTypes,video:void 0}})),n=i.length?[p(i,t,null)]:[];return r.forEach(e=>{n.push(p([e],t,s.VIDEO))}),n},interpretResponse:function(e,t){return e.body||(e.body={nbr:0}),u.fromORTB({request:t.data,response:e.body})},getUserSyncs:function(e,t,r,i){if(e.iframeEnabled||e.pixelEnabled){let n=e.iframeEnabled?"iframe":"image",o=[],a="https://u.openx.net/w/1.0/pd";if(r&&(o.push("gdpr="+ +!!r.gdprApplies),o.push("gdpr_consent="+encodeURIComponent(r.consentString||""))),i&&o.push("us_privacy="+encodeURIComponent(i)),t.length>0&&t[0].body&&t[0].body.ext){let e=t[0].body.ext;e.delDomain?a=`https://${e.delDomain}/w/1.0/pd`:e.platform&&o.push("ph="+e.platform)}else o.push("ph=2d1251ae-7f3a-47cf-bd2a-2f288854a0ba");return[{type:n,url:`${a}${o.length>0?"?"+o.join("&"):""}`}]}}};(0,o.registerBidder)(c);let u=(0,d.ortbConverter)({context:{netRevenue:!0,ttl:300,nativeRequest:{eventtrackers:[{event:1,methods:[1,2]}]}},imp(e,t,r){let i=e(t,r);return(0,a.mergeDeep)(i,{tagid:t.params.unit,ext:{divid:t.adUnitCode}}),t.params.customParams&&a.deepSetValue(i,"ext.customParams",t.params.customParams),t.params.customFloor&&!i.bidfloor&&(i.bidfloor=t.params.customFloor),i},request(e,t,r,i){let n=e(t,r,i);(0,a.mergeDeep)(n,{at:1,ext:{bc:"hb_pb_ortb_2.0",pv:"9.53.2"}});let o=i.bidRequests[0];return o.params.coppa&&a.deepSetValue(n,"regs.coppa",1),o.params.doNotTrack&&a.deepSetValue(n,"device.dnt",1),o.params.platform&&a.deepSetValue(n,"ext.platform",o.params.platform),o.params.delDomain&&a.deepSetValue(n,"ext.delDomain",o.params.delDomain),o.params.response_template_name&&a.deepSetValue(n,"ext.response_template_name",o.params.response_template_name),o.params.test&&(n.test=1),n},bidResponse(e,t,r){let i=e(t,r);return t.ext&&(i.meta.networkId=t.ext.dsp_id,i.meta.advertiserId=t.ext.buyer_id,i.meta.brandId=t.ext.brand_id),i},response(e,t,r,i){let{ortbRequest:n}=i;n.ext&&(n.ext.delDomain&&a.deepSetValue(r,"ext.delDomain",n.ext.delDomain),n.ext.platform&&a.deepSetValue(r,"ext.platform",n.ext.platform));let o=e(t,r,i),s=a.deepAccess(r,"ext.fledge_auction_configs");return s?(s=Object.entries(s).map(e=>{let[t,r]=e;return{bidId:t,config:(0,a.mergeDeep)(Object.assign({},r),{auctionSignals:{ortb2Imp:i.impContext[t]?.imp}})}}),{bids:o.bids,paapi:s}):o},overrides:{imp:{bidfloor(e,t,r,i){let n={};e(n,r,{...i,currency:"USD"}),"USD"===n.bidfloorcur&&Object.assign(t,n)},video(e,t,r,i){{let n=r.mediaTypes[s.VIDEO];n&&(n=Object.assign({},n,r.params.video),r={...r,mediaTypes:{[s.VIDEO]:n}}),e(t,r,i)}}}}});function p(e,t,r){return{method:"POST",url:n.config.getConfig("openxOrtbUrl")||"https://rtb.openx.net/openrtbb/prebidjs",data:u.toORTB({bidRequests:e,bidderRequest:t,context:{mediaType:r}})}}function g(e){return a.deepAccess(e,"mediaTypes.video")}function f(e){return a.deepAccess(e,"mediaTypes.native")}(0,i.registerModule)("openxBidAdapter")},8001:function(e,t,r){"use strict";let i;var n=r(3800),o=r(7750),a=r(256),s=r(4030),d=r(4321),l=r(6856),c=r(836),u=r(783),p=r(1927);let g="ozone",f="https://elb.the-ozone-project.com",m="4.0.0",h={gvlid:524,version:m,code:g,supportedMediaTypes:[s.VIDEO,s.BANNER],cookieSyncBag:{publisherId:null,siteId:null,userIdObject:{}},propertyBag:{pageId:null,buildRequestsStart:0,buildRequestsEnd:0},getAuctionUrl(){let e=d.config.getConfig("ozone.endpointOverride")||{};return e.auctionUrl?e.auctionUrl:(e.origin||f)+"/openrtb2/auction"},getCookieSyncUrl(){let e=d.config.getConfig("ozone.endpointOverride")||{};return e.cookieSyncUrl?e.cookieSyncUrl:(e.origin||f)+"/static/load-cookie.html"},getRendererUrl:()=>(d.config.getConfig("ozone.endpointOverride")||{}).rendererUrl||"https://prebid.the-ozone-project.com/ozone-renderer.js",getVideoPlacementValue:e=>0>["instream","outstream"].indexOf(e)?null:(0,o.deepAccess)(d.config.getConfig("ozone.videoParams"),e),getBatchRequests(){let e=this.getGetParametersAsObject();if(e.batchRequests&&e.batchRequests.toString().match(/^[0-9]+$/))return parseInt(e.batchRequests);let t=d.config.getConfig("ozone.batchRequests");return!0===t?10:"number"==typeof t&&t>0&&t},isBidRequestValid(e){let t="VALIDATION FAILED";(0,o.logInfo)("isBidRequestValid : ",d.config.getConfig(),e);let r=e.adUnitCode,i=`${t} : missing {param} : siteId, placementId and publisherId are REQUIRED`;if(!(0,o.getBidIdParameter)("placementId",e.params))return(0,o.logError)(i.replace("{param}","placementId"),r),!1;if(!this.isValidPlacementId(e.params.placementId))return(0,o.logError)(`${t} : placementId must be exactly 10 numbers`,r),!1;if(!(0,o.getBidIdParameter)("publisherId",e.params))return(0,o.logError)(i.replace("{param}","publisherId"),r),!1;if(!e.params.publisherId.toString().match(/^[a-zA-Z0-9\-]{12}$/))return(0,o.logError)(`${t} : publisherId must be /^[a-zA-Z0-9\\-]{12}$/`,r),!1;if(!(0,o.getBidIdParameter)("siteId",e.params))return(0,o.logError)(i.replace("{param}","siteId"),r),!1;if(!e.params.siteId.toString().match(/^[0-9]{10}$/))return(0,o.logError)(`${t} : siteId must be /^[0-9]{10}$/`,r),!1;if(e.params.hasOwnProperty("customParams"))return(0,o.logError)(`${t} : customParams should be renamed: customData`,r),!1;if(e.params.hasOwnProperty("customData")){if(!(0,o.isArray)(e.params.customData))return(0,o.logError)(`${t} : customData is not an Array`,r),!1;if(e.params.customData.length<1)return(0,o.logError)(`${t} : empty customData`,r),!1;if(!e.params.customData[0].hasOwnProperty("targeting"))return(0,o.logError)(`${t} :no customData[0].targeting`,r),!1;if("object"!=typeof e.params.customData[0].targeting)return(0,o.logError)(`${t} : customData[0].targeting is not an Object`,r),!1}if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(s.VIDEO)){if(!e.mediaTypes?.[s.VIDEO]?.context)return(0,o.logError)(`${t} No video context key/value`),!1;if(0>["instream","outstream"].indexOf(e.mediaTypes?.[s.VIDEO]?.context))return(0,o.logError)(`${t} video.context is invalid.`),!1}return!0},isValidPlacementId:e=>e.toString().match(/^[0-9]{10}$/),buildRequests(e,t){if(this.propertyBag.buildRequestsStart=new Date().getTime(),(0,o.logInfo)(`buildRequests time: ${this.propertyBag.buildRequestsStart} v ${m} validBidRequests`,(0,o.deepClone)(e),"bidderRequest",(0,o.deepClone)(t)),this.blockTheRequest())return[];let r=!!t.fledgeEnabled,i={publisherId:"",siteId:""};e.length>0&&(Object.assign(this.cookieSyncBag.userIdObject,this.findAllUserIdsFromEids(e[0])),this.cookieSyncBag.siteId=(0,o.deepAccess)(e[0],"params.siteId"),this.cookieSyncBag.publisherId=(0,o.deepAccess)(e[0],"params.publisherId"),i=e[0].params),(0,o.logInfo)("cookie sync bag",this.cookieSyncBag);let n=d.config.getConfig("ozone.singleRequest");n=!1!==n;let a={},l=(0,o.deepAccess)(t,"ortb2",null);(0,o.logInfo)("got ortb2 fpd: ",l),l&&(0,o.deepAccess)(l,"user")&&((0,o.logInfo)("added FPD user object"),a.user=l.user);let c=this.getGetParametersAsObject(),f="oztestmode",h=c[f]||null;a.device=t?.ortb2?.device||{};let b=this.getPlacementIdOverrideFromGetParam(),y=null;var A=(0,o.deepAccess)(e,"0.ortb2.source.tid");"0"===A&&(A=null);let I=e.map(e=>{var t={};let i=b||this.getPlacementId(e);t.id=e.bidId,t.tagid=i,t.secure=+("https"===(0,o.parseUrl)((0,u.getRefererInfo)().page).protocol);let n=[];if(e.hasOwnProperty("mediaTypes")){if(e.mediaTypes.hasOwnProperty(s.BANNER)&&(n=e.mediaTypes[s.BANNER].sizes,(0,o.logInfo)("setting banner size from mediaTypes.banner for bidId "+t.id+": ",n)),e.mediaTypes.hasOwnProperty(s.VIDEO)){if((0,o.logInfo)("openrtb 2.5 compliant video"),"object"==typeof e.mediaTypes[s.VIDEO]){let r=(0,o.deepAccess)(e,"params.video",{});t.video=this.unpackVideoConfigIntoIABformat(e.mediaTypes[s.VIDEO],r),t.video=this.addVideoDefaults(t.video,e.mediaTypes[s.VIDEO],r)}let r=function(e){let t=v(e);return t?t[0]&&"object"==typeof t[0]&&((0,o.logInfo)("getWidthAndHeightFromVideoObject found nested array inside playerSize.",t[0]),"number"!=typeof(t=t[0])[0]&&"string"!=typeof t[0])?((0,o.logError)("getWidthAndHeightFromVideoObject found non-number/string type inside the INNER array in playerSize. This is totally wrong - cannot continue.",t[0]),null):2!==t.length?((0,o.logError)("getWidthAndHeightFromVideoObject found playerSize with length of "+t.length+". This is totally wrong - cannot continue."),null):{w:t[0],h:t[1]}:null}(t.video);(0,o.logInfo)(`setting video object ${t.id} from mediaTypes.video: `,t.video,"wh=",r);let i="setting obj.video.format to be ";if(r&&"object"==typeof r){t.video.w=r.w,t.video.h=r.h;let e=v(t.video);e&&Array.isArray(e[0])?((0,o.logInfo)(`${i} an array of objects`),t.video.ext.format=[r]):((0,o.logInfo)(`${i} an object`),t.video.ext.format=r)}else(0,o.logWarn)(`Failed ${i} anything - bad config`)}e.mediaTypes.hasOwnProperty(s.NATIVE)&&(t.native=e.mediaTypes[s.NATIVE],(0,o.logInfo)(`setting native object ${t.id} from mediaTypes.native element:`,t.native)),e.hasOwnProperty("getFloor")?(t.floor=this.getFloorObjectForAuction(e),(0,o.logInfo)("obj.floor is : ",t.floor)):(0,o.logInfo)("no getFloor property")}else e.hasOwnProperty("sizes")?n=e.sizes:(0,o.logInfo)("no mediaTypes or sizes array. Cannot set sizes for banner type");if(n.length>0&&(t.banner={topframe:1,w:n[0][0]||0,h:n[0][1]||0,format:n.map(e=>({w:e[0],h:e[1]}))}),t.placementId=i,(0,o.deepSetValue)(t,"ext.prebid",{storedrequest:{id:i}}),t.ext[g]={},t.ext[g].adUnitCode=e.adUnitCode,e.params.hasOwnProperty("customData")&&(t.ext[g].customData=e.params.customData),e.params.hasOwnProperty("ozFloor")){let r=parseFloat(e.params.ozFloor);isNaN(r)?(0,o.logError)(`Ignoring invalid ozFloor value for adunit code: ${e.adUnitCode}`):t.ext[g].ozFloor=r}if((0,o.logInfo)(`obj.ext.${g} is `,t.ext[g]),null!=h)if((0,o.logInfo)(`setting isTestMode: ${h}`),t.ext[g].hasOwnProperty("customData"))for(let e=0;e<t.ext[g].customData.length;e++)t.ext[g].customData[e].targeting[f]=h;else t.ext[g].customData=[{settings:{},targeting:{}}],t.ext[g].customData[0].targeting[f]=h;l&&(0,o.deepAccess)(l,"site")&&((0,o.logInfo)("adding fpd.site"),(0,o.deepAccess)(t,`ext.${g}.customData.0.targeting`,!1)?Object.assign(t.ext[g].customData[0].targeting,l.site):(0,o.deepSetValue)(t,`ext.${g}.customData.0.targeting`,l.site)),!y&&(0,o.deepAccess)(e,"schain")&&(y=e.schain);let a=(0,o.deepAccess)(e,"ortb2Imp.ext.gpid");a&&(0,o.deepSetValue)(t,"ext.gpid",a);let d=(0,o.deepAccess)(e,"ortb2Imp.ext.tid");if(d&&(t.ext.tid=d),A&&(t.ext.auctionId=A),r){let r=(0,o.deepAccess)(e,"ortb2Imp.ext.ae");(0,o.isInteger)(r)?(0,o.deepSetValue)(t,"ext.ae",r):(0,o.logError)(`ignoring ortb2Imp.ext.ae - not an integer for obj.id=${t.id}`)}return t}),E={};if(E[g]={},E[g].oz_pb_v=m,E[g].oz_rw=+!!b,e.length>0){let e=this.cookieSyncBag.userIdObject;e.hasOwnProperty("pubcid.org")&&(E[g].pubcid=e["pubcid.org"])}E[g].pv=this.getPageId();let S=d.config.getConfig("ozone.oz_omp_floor");(0,o.logInfo)("oz_omp_floor dollar value = ",S),"number"==typeof S?E[g].oz_omp_floor=S:void 0!==S&&(0,o.logError)("IF set, oz_omp_floor must be a number eg. 1.55. Found:"+typeof S);let _=d.config.getConfig("ozone.oz_whitelist_adserver_keys"),T=(0,o.isArray)(_)&&_.length>0;E[g].oz_kvp_rw=+!!T;let O=d.config.getConfig("ozone.endpointOverride");(O?.origin||O?.auctionUrl)&&(E[g].origin=O.auctionUrl||O.origin);let C=(0,o.deepAccess)(e,"0.userIdAsEids",[]);if(a.site={publisher:{id:i.publisherId},page:(0,u.getRefererInfo)().page,id:i.siteId},a.test=+!!d.config.getConfig("debug"),t&&t.gdprConsent){(0,o.logInfo)("ADDING GDPR");let e=(0,o.deepAccess)(t,"gdprConsent.apiVersion",1);a.regs={ext:{gdpr:+!!t.gdprConsent.gdprApplies,apiVersion:e}},(0,o.deepAccess)(a,"regs.ext.gdpr")?(0,o.deepSetValue)(a,"user.ext.consent",t.gdprConsent.consentString):(0,o.logWarn)("**** Strange CMP info: bidderRequest.gdprConsent exists BUT bidderRequest.gdprConsent.gdprApplies is false. See bidderRequest logged above. ****")}else(0,o.logInfo)("WILL NOT ADD GDPR info; no bidderRequest.gdprConsent object");t&&t.uspConsent?((0,o.logInfo)("ADDING USP consent info"),(0,o.deepSetValue)(a,"regs.ext.us_privacy",t.uspConsent)):(0,o.logInfo)("WILL NOT ADD USP consent info; no bidderRequest.uspConsent."),t?.ortb2?.regs?.gpp&&((0,o.deepSetValue)(a,"regs.gpp",t.ortb2.regs.gpp),(0,o.deepSetValue)(a,"regs.gpp_sid",t.ortb2.regs.gpp_sid)),y&&((0,o.logInfo)("schain found"),(0,o.deepSetValue)(a,"source.ext.schain",y)),!0===d.config.getConfig("coppa")&&(0,o.deepSetValue)(a,"regs.coppa",1),E[g].cookieDeprecationLabel=(0,o.deepAccess)(t,"ortb2.device.ext.cdep","none"),(0,o.logInfo)(`cookieDeprecationLabel ortb2.device.ext.cdep = ${E[g].cookieDeprecationLabel}`);let w=this.getBatchRequests();if("number"==typeof w){(0,o.logInfo)(`Batching = ${w}`);let e=[];for(let r=0;r<I.length;r+=w)a.id=(0,o.generateUUID)(),(0,o.deepSetValue)(a,"user.ext.eids",C),A&&(0,o.deepSetValue)(a,"source.tid",A),a.imp=I.slice(r,r+w),a.ext=E,(0,p.toOrtb25)(a),a.imp.length>0&&e.push({method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(a),bidderRequest:t});return(0,o.logInfo)("batch request going to return : ",e),e}if(n){(0,o.logInfo)("single request starting"),a.id=(0,o.generateUUID)(),a.imp=I,a.ext=E,(0,p.toOrtb25)(a),(0,o.deepSetValue)(a,"user.ext.eids",C),A&&(0,o.deepSetValue)(a,"source.tid",A);var x={method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(a),bidderRequest:t};return this.propertyBag.buildRequestsEnd=new Date().getTime(),(0,o.logInfo)(`buildRequests going to return for single at time ${this.propertyBag.buildRequestsEnd} (took ${this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart}ms): `,(0,o.deepClone)(x)),x}let R=I.map(e=>{(0,o.logInfo)("non-single response, working on imp : ",e);let r=Object.assign({},a);return r.id=(0,o.generateUUID)(),r.imp=[e],r.ext=E,(0,o.deepSetValue)(r,"user.ext.eids",C),A&&(0,o.deepSetValue)(r,"source.tid",A),(0,p.toOrtb25)(r),{method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(r),bidderRequest:t}});return this.propertyBag.buildRequestsEnd=new Date().getTime(),(0,o.logInfo)(`buildRequests going to return for non-single at time ${this.propertyBag.buildRequestsEnd} (took ${this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart}ms): `,R),R},getFloorObjectForAuction(e){let t={banner:(0,o.deepAccess)(e,"mediaTypes.banner.sizes",null),video:(0,o.deepAccess)(e,"mediaTypes.video.playerSize",null),native:(0,o.deepAccess)(e,"mediaTypes.native.image.sizes",null)};(0,o.logInfo)("getFloorObjectForAuction mediaTypesSizes : ",t);let r={};return t.banner&&(r.banner=e.getFloor({mediaType:"banner",currency:"USD",size:t.banner[0]})),t.video&&(r.video=e.getFloor({mediaType:"video",currency:"USD",size:t.video[0]})),t.native&&(r.native=e.getFloor({mediaType:"native",currency:"USD",size:t.native[0]})),(0,o.logInfo)("getFloorObjectForAuction returning : ",(0,o.deepClone)(r)),r},interpretResponse(e,t){let r,n=new Date().getTime();(0,o.logInfo)(`interpretResponse time: ${n} . Time between buildRequests done and interpretResponse start was ${n-this.propertyBag.buildRequestsEnd}ms`),(0,o.logInfo)("serverResponse, request",(0,o.deepClone)(e),(0,o.deepClone)(t));let a=(e=e.body||{}).id;if(!e.hasOwnProperty("seatbid")||"object"!=typeof e.seatbid)return[];let l=[],u=d.config.getConfig("ozone.enhancedAdserverTargeting");(0,o.logInfo)("enhancedAdserverTargeting",u),void 0===u&&(u=!0),(0,o.logInfo)("enhancedAdserverTargeting",u),e.seatbid=function(e){(0,o.logInfo)("injectAdIdsIntoAllBidResponses",(0,o.deepClone)(e));for(let t=0;t<e.length;t++){let r=e[t];for(let e=0;e<r.bid.length;e++)r.bid[e].adId=`${r.bid[e].impid}-${t}-oz-${e}`}return e}(e.seatbid),e.seatbid=this.removeSingleBidderMultipleBids(e.seatbid);let p=d.config.getConfig("ozone.oz_omp_floor"),f="number"==typeof p,v=d.config.getConfig("ozone.oz_whitelist_adserver_keys"),I=(0,o.isArray)(v)&&v.length>0;for(let n=0;n<e.seatbid.length;n++){let d=e.seatbid[n];for(let E=0;E<d.bid.length;E++){let S=this.getBidRequestForBidId(d.bid[E].impid,t.bidderRequest.bids);(0,o.logInfo)(`seatbid:${n}, bid:${E} Going to set default w h for seatbid/bidRequest`,d.bid[E],S);let{defaultWidth:_,defaultHeight:T}=function(e){if(!e)return(0,o.logInfo)("defaultSize received empty bid obj! going to return fixed default size"),{defaultHeight:250,defaultWidth:300};let t=e.sizes||[],r=Array.isArray(t[0])?t[0]:t;return{defaultWidth:r[0],defaultHeight:r[1]}}(S),O=y(d.bid[E],_,T);O.meta={advertiserDomains:O.adomain||[]};let C=null,w=!1,x=(0,o.deepAccess)(O,"ext.prebid.type");(0,o.logInfo)(`this bid type is : ${x}`);let R={};if(x===s.VIDEO)if(w=!0,this.setBidMediaTypeIfNotExist(O,s.VIDEO),"outstream"===(C=this.getVideoContextForBidId(O.bidId,t.bidderRequest.bids)))(0,o.logInfo)("setting thisBid.mediaType = VIDEO & attach a renderer to OUTSTREAM video"),O.renderer=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i){i=c.Renderer.install({url:h.getRendererUrl(),config:t,loaded:!1,adUnitCode:e});try{i.setRender(A)}catch(e){(0,o.logError)("Prebid Error calling renderer.setRender",i,e)}(0,o.logInfo)("created renderer object")}return i}(O.bidId),O.vastUrl=`https://${(0,o.deepAccess)(O,"ext.prebid.targeting.hb_cache_host","missing_host")}${(0,o.deepAccess)(O,"ext.prebid.targeting.hb_cache_path","missing_path")}?uuid=${(0,o.deepAccess)(O,"ext.prebid.targeting.hb_uuid","missing_uuid")}`,O.vastXml=O.adm;else if((0,o.logInfo)("not an outstream video (presumably instream), will set thisBid.mediaType = VIDEO and thisBid.vastUrl and not attach a renderer"),O.vastUrl=`https://${(0,o.deepAccess)(O,"ext.prebid.targeting.hb_cache_host","missing_host")}${(0,o.deepAccess)(O,"ext.prebid.targeting.hb_cache_path","missing_path")}?uuid=${(0,o.deepAccess)(O,"ext.prebid.targeting.hb_uuid","missing_uuid")}`,O.hasOwnProperty("videoCacheKey"))(0,o.logInfo)("videoCacheKey already exists on the bid object, will not add it");else{let e=(0,o.deepAccess)(O,"ext.prebid.targeting.hb_uuid","no_hb_uuid");(0,o.logInfo)(`Adding videoCacheKey: ${e}`),O.videoCacheKey=e}else this.setBidMediaTypeIfNotExist(O,s.BANNER);if(R=Object.assign(R,(0,o.deepAccess)(O,"ext.prebid.targeting",{})),u){let t=function(e,t,r,i){let n={};for(let o=0;o<t.length;o++){let a=t[o].bid,s=t[o].seat;for(let t=0;t<a.length;t++)a[t].impid===e&&(n.hasOwnProperty(s)?n[s].price<a[t].price&&(n[s]=y(a[t],r,i)):(n[s]=a[t],n[s]=y(a[t],r,i)))}return n}(O.bidId,e.seatbid,_,T);(0,o.logInfo)("Going to iterate allBidsForThisBidId",(0,o.deepClone)(t)),Object.keys(t).forEach((e,i,n)=>{(0,o.logInfo)(`adding adserverTargeting for ${e} for bidId ${O.bidId}`),R["oz_"+e]=e,R["oz_"+e+"_crid"]=String(t[e].crid),R["oz_"+e+"_adv"]=String(t[e].adomain),R["oz_"+e+"_adId"]=String(t[e].adId),R["oz_"+e+"_pb_r"]=b(t[e].price,t[e].ext.prebid.type),R["oz_"+e+"_size"]=String(t[e].width)+"x"+String(t[e].height),t[e].hasOwnProperty("dealid")&&(R["oz_"+e+"_dealid"]=String(t[e].dealid)),f&&(R["oz_"+e+"_omp"]=t[e].price>=p?"1":"0"),w&&(R["oz_"+e+"_vid"]=C);let a=(0,o.deepAccess)(t[e],`ext.bidder.${g}.floor`,null);null!=a&&(R["oz_"+e+"_flr"]=a);let s=(0,o.deepAccess)(t[e],`ext.bidder.${g}.ruleId`,null);null!=s&&(R["oz_"+e+"_rid"]=s),e.match(/^ozappnexus/)&&(R["oz_"+e+"_sid"]=String(t[e].cid)),(r=(0,o.deepAccess)(t[e],"ext.prebid.labels",null))&&(R["oz_"+e+"_labels"]=r.join(","))})}else{let e=`${g}.enhancedAdserverTargeting is set to false. No per-bid keys will be sent to adserver.`;I?(0,o.logWarn)(`Your adserver keys whitelist will be ignored - ${e}`):(0,o.logInfo)(e)}let{seat:D,bid:P}=function(e,t){let r=null,i=null;for(let n=0;n<t.length;n++){let o=t[n].bid,a=t[n].seat;for(let t=0;t<o.length;t++)if(o[t].impid===e&&(null==r||r.price<o[t].price)){r=o[t],i=a;break}}return{seat:i,bid:r}}(O.bidId,e.seatbid);P=y(P,_,T),R.oz_auc_id=String(a),R.oz_winner=String(D),R.oz_bid="true",R.oz_cache_id=(0,o.deepAccess)(O,"ext.prebid.targeting.hb_cache_id","no-id"),R.oz_uuid=(0,o.deepAccess)(O,"ext.prebid.targeting.hb_uuid","no-id"),u&&((r=(0,o.deepAccess)(P,"ext.prebid.labels",null))&&(R.oz_labels=r.join(",")),R.oz_imp_id=String(P.impid),R.oz_pb_v=m,R.oz_pb=P.price,R.oz_pb_r=b(P.price,x),R.oz_adId=String(P.adId),R.oz_size=`${P.width}x${P.height}`),I&&((0,o.logInfo)("Filtering out adserver targeting keys not in the whitelist: ",v),Object.keys(R).forEach(function(e){-1===v.indexOf(e)&&delete R[e]})),O.adserverTargeting=R,l.push(O)}}let E=l,S=(0,o.deepAccess)(e,"ext.igi")||[];(0,o.isArray)(S)&&S.length>0&&(E={bids:l,fledgeAuctionConfigs:S=S.filter(e=>"object"==typeof e&&null!==e||((0,o.logWarn)("Removing malformed fledge auction config:",e),!1))});let _=new Date().getTime();return(0,o.logInfo)(`interpretResponse going to return at time ${_} (took ${_-n}ms) Time from buildRequests Start -> interpretRequests End = ${_-this.propertyBag.buildRequestsStart}ms`),(0,o.logInfo)("will return: ",(0,o.deepClone)(E)),E},setBidMediaTypeIfNotExist(e,t){e.hasOwnProperty("mediaType")?(0,o.logInfo)(`found value for thisBid.mediaType: ${e.mediaType}`):((0,o.logInfo)(`setting thisBid.mediaType = ${t}`),e.mediaType=t)},removeSingleBidderMultipleBids(e){var t=[];for(let o=0;o<e.length;o++){let a=e[o];var r={seat:a.seat,bid:[]},i=[];for(let e=0;e<a.bid.length;e++){var n=a.bid[e];if(!i.includes(n.impid)){i.push(n.impid);for(let t=e+1;t<a.bid.length;t++)a.bid[t].impid===n.impid&&a.bid[t].price>n.price&&(n=a.bid[t]);r.bid.push(n)}}t.push(r)}return t},getUserSyncs(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if((0,o.logInfo)("getUserSyncs optionsType",e,"serverResponse",t,"gdprConsent",r,"usPrivacy",i,"cookieSyncBag",this.cookieSyncBag),!t||0===t.length)return[];let{gppString:a="",applicableSections:s=[]}=n;if(e.iframeEnabled){let e=[];for(let t in d.config.getConfig("debug")&&e.push("pbjs_debug=true"),e.push("gdpr="+((0,o.deepAccess)(r,"gdprApplies",!1)?"1":"0")),e.push("gdpr_consent="+(0,o.deepAccess)(r,"consentString","")),e.push("usp_consent="+(i||"")),e.push("gpp="+a),Array.isArray(s)&&e.push(`gpp_sid=${s.join()}`),this.cookieSyncBag.userIdObject)e.push(t+"="+this.cookieSyncBag.userIdObject[t]);e.push("publisherId="+this.cookieSyncBag.publisherId),e.push("siteId="+this.cookieSyncBag.siteId),e.push("cb="+Date.now()),e.push("bidder="+g);let t=e.join("&");return t.length>0&&(t="?"+t),(0,o.logInfo)("getUserSyncs going to return cookie sync url : "+this.getCookieSyncUrl()+t),[{type:"iframe",url:this.getCookieSyncUrl()+t}]}},getBidRequestForBidId(e,t){for(let r=0;r<t.length;r++)if(t[r].bidId===e)return t[r];return null},getVideoContextForBidId(e,t){let r=this.getBidRequestForBidId(e,t);return null!=r?(0,o.deepAccess)(r,"mediaTypes.video.context","unknown"):null},findAllUserIdsFromEids(e){let t={};if(!e.hasOwnProperty("userIdAsEids"))return(0,o.logInfo)("findAllUserIdsFromEids - no bidRequest.userIdAsEids object was found on the bid!"),this.tryGetPubCidFromOldLocation(t,e),t;for(let r of e.userIdAsEids)t[r.source]=(0,o.deepAccess)(r,"uids.0.id");return this.tryGetPubCidFromOldLocation(t,e),t},tryGetPubCidFromOldLocation(e,t){if(!e.hasOwnProperty("pubcid")){let r=(0,o.deepAccess)(t,"crumbs.pubcid");r&&(e["pubcid.org"]=r)}},getPlacementId:e=>e.params.placementId.toString(),getPlacementIdOverrideFromGetParam(){let e=this.getGetParametersAsObject();if(e.hasOwnProperty("ozstoredrequest"))if(this.isValidPlacementId(e.ozstoredrequest))return(0,o.logInfo)("using GET ozstoredrequest="+e.ozstoredrequest+" to replace placementId"),e.ozstoredrequest;else(0,o.logError)("GET ozstoredrequest FAILED VALIDATION - will not use it");return null},getGetParametersAsObject(){let e=(0,o.parseUrl)((0,u.getRefererInfo)().location);return(0,o.logInfo)("getGetParametersAsObject found:",e.search),e.search},blockTheRequest:()=>!1===d.config.getConfig("ozone.oz_request")&&((0,o.logWarn)("Will not allow the auction : oz_request is set to false"),!0),getPageId:function(){if(null==this.propertyBag.pageId){let e="";for(let t=20;t>0;t--)e+="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];this.propertyBag.pageId=new Date().getTime()+"_"+e}return this.propertyBag.pageId},unpackVideoConfigIntoIABformat(e,t){let r={ext:{}};return r=this._unpackVideoConfigIntoIABformat(r,e),r=this._unpackVideoConfigIntoIABformat(r,t)},_unpackVideoConfigIntoIABformat(e,t){let r=["mimes","minduration","maxduration","protocols","w","h","startdelay","placement","plcmt","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype"];for(let n in t){var i=!1;r.forEach(function(r){r===n&&(e[n]=t[n],i=!0)}),i||(e.ext[n]=t[n])}return t.hasOwnProperty("ext")&&"object"==typeof t.ext&&(e.hasOwnProperty("ext")?e.ext=(0,o.mergeDeep)(e.ext,t.ext):e.ext=t.ext),e},addVideoDefaults(e,t,r){let i=(t,r)=>{if(!t)return;let i=this.getVideoPlacementValue((0,o.deepAccess)(t,"context"));i&&(e.placement=i);let n=(0,o.deepAccess)(t,"skippable",null);null==n?r&&!e.hasOwnProperty("skip")&&(e.skip=0):e.skip=+!!n};return i(t,!1),i(r,!0),e},getLoggableBidObject(e){let t={ad:e.ad,adId:e.adId,adUnitCode:e.adUnitCode,adm:e.adm,adomain:e.adomain,adserverTargeting:e.adserverTargeting,auctionId:e.auctionId,bidId:e.bidId,bidder:e.bidder,bidderCode:e.bidderCode,cpm:e.cpm,creativeId:e.creativeId,crid:e.crid,currency:e.currency,h:e.h,w:e.w,impid:e.impid,mediaType:e.mediaType,params:e.params,price:e.price,transactionId:e.transactionId,ttl:e.ttl,ortb2:(0,o.deepAccess)(e,"ortb2"),ortb2Imp:(0,o.deepAccess)(e,"ortb2Imp")};return e.hasOwnProperty("floorData")&&(t.floorData=e.floorData),t}};function b(e,t){let r=d.config.getConfig(`mediaTypePriceGranularity.${t}`),i="auto",n=d.config.getConfig("customPriceBucket");if("string"==typeof r)i=r;else if("object"==typeof r)i="custom",n=r;else{let e=d.config.getConfig("priceGranularity");"string"==typeof e&&(i=e),"custom"===e&&(i="custom")}let a=(0,l.getPriceBucketString)(e,n,d.config.getConfig("currency.granularityMultiplier"));return(0,o.logInfo)("getRoundedBid price:",e,"mediaType:",t,"bucketKey:",i),a[({medium:"med",custom:"custom",high:"high",low:"low",dense:"dense"})[i]||"auto"]}function y(e,t,r){return e.cpm=e.price,e.bidId=e.impid,e.requestId=e.impid,e.width=e.w||t,e.height=e.h||r,e.ad=e.adm,e.netRevenue=!0,e.creativeId=e.crid,e.currency="USD",e.ttl=300,e}function v(e){(0,o.logInfo)("getPlayerSizeFromObject received object",e);let t=(0,o.deepAccess)(e,"playerSize");return(t||(t=(0,o.deepAccess)(e,"ext.playerSize")),t)?"object"!=typeof t?((0,o.logError)("getPlayerSizeFromObject FAILED: playerSize is not an object/array",e),null):t:((0,o.logError)("getPlayerSizeFromObject FAILED: no playerSize in video object or ext",e),null)}function A(e){(0,o.logInfo)("outstreamRender got",(0,o.deepClone)(e)),e.renderer.push(()=>{(0,o.logInfo)("outstreamRender: Going to execute window.ozoneVideo.outstreamRender"),window.ozoneVideo.outstreamRender(e)})}(0,a.registerBidder)(h),(0,o.logInfo)(`*BidAdapter ${m} was loaded`),(0,n.registerModule)("ozoneBidAdapter")},2917:function(e,t,r){"use strict";let i;var n=r(3800),o=r(4321),a=r(1620),s=r(7750),d=r(5177),l=b(r(2506)),c=r(8878),u=r(1398),p=r(1720),g=r(5101),f=r(256),m=r(7148),h=r(1171);function b(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(b=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let y="PAAPI",v=[],A=new WeakSet;(0,a.module)("paapi",function(e){v.push(e),e.init&&e.init({getPAAPIConfig:$,expandFilters:V})});let I=(0,g.auctionStore)(),E=(0,g.auctionStore)(),S=(0,g.auctionStore)(),_=(0,g.auctionStore)(),T={},O={};o.config.getConfig("paapi",e=>{(function(e){e&&!0===e.enabled?(O.enabled||((0,a.getHook)("addPaapiConfig").before(N),(0,a.getHook)("makeBidRequests").before(G),(0,a.getHook)("makeBidRequests").after(H),(0,a.getHook)("processBidderRequests").before(Q,9),(0,a.getHook)("processBidderRequests").before(Z,10),(0,a.getHook)("processBidderRequests").before(C),l.on(c.EVENTS.AUCTION_INIT,ee),l.on(c.EVENTS.AUCTION_END,R)),O=e,(0,s.logInfo)(`${y} enabled (browser ${q()?"supports":"does NOT support"} runAdAuction)`,e)):(O.enabled&&((0,a.getHook)("addPaapiConfig").getHooks({hook:N}).remove(),(0,a.getHook)("makeBidRequests").getHooks({hook:G}).remove(),(0,a.getHook)("makeBidRequests").getHooks({hook:H}).remove(),(0,a.getHook)("processBidderRequests").getHooks({hook:Q}).remove(),(0,a.getHook)("processBidderRequests").getHooks({hook:Z}).remove(),(0,a.getHook)("processBidderRequests").getHooks({hook:C}).remove(),l.off(c.EVENTS.AUCTION_INIT,ee),l.off(c.EVENTS.AUCTION_END,R)),O={},(0,s.logInfo)(`${y} disabled`,e))})(e.paapi)});function C(e,t,r,i,n){let o;i.paapi?.enabled&&(o=n,n=function(e,t,r,i){return(i=i??{}).adAuctionHeaders=i.adAuctionHeaders??!0,o.call(this,e,t,r,i)});for(var a=arguments.length,s=Array(a>5?a-5:0),d=5;d<a;d++)s[d-5]=arguments[d];return e.call(this,t,r,i,n,...s)}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=W(e);return r&&(t.requestedSize=r),t}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O?.componentSeller??{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{compact:e=>(function(e){return e.reduce((e,t)=>{if(U(t)){let r=e.find(e=>!e.hasOwnProperty(t.origin)||(0,s.deepEqual)(e[t.origin],t));r||(r={},e.push(r)),r[t.origin]=t}return e},[]).map(e=>Object.values(e))})(e.map(e=>e[1])).map(e=>[{},e]),expand:M};return r.auctionConfig?(0,i[r.separateAuctions?"expand":"compact"])(e).map(e=>{let[i,n]=e,o=(0,s.mergeDeep)(t(n),r.auctionConfig);return o.auctionSignals=P(o.auctionSignals||{},i),[i,o]}):((0,s.logWarn)(y,"Cannot use IG buyers: paapi.componentSeller.auctionConfig not set",e.map(e=>e[1])),[])}function R(e){let{auctionId:t,bidsReceived:r,bidderRequests:i,adUnitCodes:n,adUnits:o}=e,a=Object.fromEntries(o?.map(e=>[e.code,e])||[]),d=i?.flatMap(e=>e.bids),l=I(t);(n||[]).forEach(e=>{l.hasOwnProperty(e)||(l[e]=null),T.hasOwnProperty(e)||(T[e]=null)});let c=E(t),g=S(t);c&&g&&Object.entries(g).forEach(e=>{let[t,r]=e;x(r).forEach(e=>{let[{bidder:r},i]=e;return D(c,t,{id:k(r),config:i})})});let f=_(t),m=Object.fromEntries(Array.from(new Set(Object.keys(c).concat(Object.keys(f)))).map(e=>{T[e]=t;let i=t=>t.adUnitCode===e;return[e,{...w(a[e]),...function(){let e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r.length>0){let i=r.reduce((0,p.maximum)((0,u.currencyCompare)(e=>[e.cpm,e.currency])));e=i.cpm,t=i.currency}else{let r=i.map(e=>"function"==typeof e.getFloor&&e.getFloor()).filter(e=>e),n=r.length&&r.reduce((0,p.minimum)((0,u.currencyCompare)(e=>[e.floor,e.currency])));e=n?.floor,t=n?.currency}let n={};return e&&((0,s.deepSetValue)(n,"auctionSignals.prebid.bidfloor",e),t&&(0,s.deepSetValue)(n,"auctionSignals.prebid.bidfloorcur",t)),n}(r?.filter(i),d?.filter(i))}]})),h={};function b(e,t){Object.entries(t).forEach(t=>{let[r,{resolve:i,default:n}]=t,o=e.hasOwnProperty(r)?e[r]:null;i(o=null==o&&null==n?void 0:"object"==typeof n&&"object"==typeof o?(0,s.mergeDeep)({},n,o):o??n)})}Object.entries(c||{}).forEach(e=>{let[t,r]=e;r.forEach(e=>{let{id:r,config:i}=e;return D(h,r,{adUnitCode:t,config:(0,s.mergeDeep)({},m[t],i)})})}),Object.entries(f).forEach(e=>{let[t,{top:r,components:i}]=e;b(m[t],r),Object.entries(i).forEach(e=>{let[r,{deferrals:i}]=e,n=h.hasOwnProperty(r)?h[r]:[];n.length>1&&(0,s.logWarn)(`Received multiple PAAPI configs for the same bidder and seller (${r}), active PAAPI auctions will only see the first`);let{config:o}=n.shift()??{config:{...m[t]}};b(o,i)})});let y=Object.values(h).flatMap(e=>e),A=Object.keys(f).length>0;O.parallel&&A&&y.length>0&&(0,s.logError)("Received PAAPI configs after PAAPI auctions were already started in parallel with their contextual auction",y),y.forEach(e=>{let{adUnitCode:t,config:r}=e;null==l[t]&&(l[t]={...m[t],componentAuctions:[]}),l[t].componentAuctions.push((0,s.mergeDeep)({},m[t],r))}),O.parallel&&A||v.forEach(e=>e.onAuctionConfig?.(t,l))}function D(e,t,r){e.hasOwnProperty(t)||(e[t]=[]),e[t].push(r)}function P(e,t){let{ortb2:r,ortb2Imp:i}=t;return null!=r&&(0,s.deepSetValue)(e,"prebid.ortb2",(0,s.mergeDeep)({},r,e.prebid?.ortb2)),null!=i&&(0,s.deepSetValue)(e,"prebid.ortb2Imp",(0,s.mergeDeep)({},i,e.prebid?.ortb2Imp)),e}function k(e){return O.componentSeller.separateAuctions?`igb::${e}`:"igb"}function N(e,t,r){if(L(o.config.getCurrentBidder()).enabled){let{adUnitCode:e,auctionId:o,bidder:a}=t;function i(t,r){let i=t(o);null!=i?D(i,e,r):(0,s.logWarn)(y,`Received PAAPI config for auction that has closed (auction '${o}', adUnit '${e}')`,r)}let{config:d,igb:l}=r;if(d){var n;d.auctionSignals=P(d.auctionSignals||{},t);let e=d.perBuyerSignals=d.perBuyerSignals??{};(d.interestGroupBuyers||[]).forEach(r=>{e[r]=P(e[r]??{},t)}),i(E,{id:(n=d.seller,`${a}::${n}`),config:d})}l&&U(l)&&(l.pbs=P(l.pbs||{},t),i(S,[t,l]))}e(t,r)}let B={cur:"perBuyerCurrencies",pbs:"perBuyerSignals",ps:"perBuyerPrioritySignals",maxbid:"auctionSignals.prebid.perBuyerMaxbid"};function U(e){if(e.origin)return!0;(0,s.logWarn)("PAAPI buyer does not specify origin and will be ignored",e)}function j(e){let t=new Set;return Object.assign(e.reduce((r,i)=>(U(i)&&(t.has(i.origin)?(0,s.logWarn)(y,`Duplicate buyer: ${i.origin}. All but the first will be ignored`,e):(t.add(i.origin),Object.entries(B).forEach(e=>{let[t,n]=e;if(null!=i[t]){let e=(0,s.deepAccess)(r,n)||{};e[i.origin]=i[t],(0,s.deepSetValue)(r,n,e)}}))),r),{}),{interestGroupBuyers:Array.from(t.keys())})}function M(e){let t={},r={};return e.forEach(e=>{let[i,n]=e;t.hasOwnProperty(i.bidder)||(t[i.bidder]=i),D(r,i.bidder,n)}),Object.entries(r).map(e=>{let[r,i]=e;return[t[r],i]})}function V(){let{auctionId:e,adUnitCode:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=[];return null==t?r=Object.keys(T):T.hasOwnProperty(t)&&(r=[t]),Object.fromEntries(r.map(t=>[t,e??T[t]]))}function $(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={};return Object.entries(V(e)).forEach(e=>{let[i,n]=e,o=I(n);if(o?.hasOwnProperty(i)){let e=o[i];e&&!A.has(e)?(r[i]=e,A.add(e)):t&&(r[i]=null)}else null==n&&t&&(r[i]=null)}),r}function q(){return"runAdAuction"in navigator&&"joinAdInterestGroup"in navigator}function L(e){let t=O.enabled&&(null==e||!O.bidders?.length||O.bidders?.includes(e));return{enabled:t,ae:t?O.defaultForSlots:void 0}}(0,n.getGlobal)().getPAAPIConfig=e=>$(e);let F=(0,a.hook)("sync",function(e){if(e=e?.filter(e=>{let[t,r]=e;return!(t===r&&t<=5)}),e?.length)return e.reduce((0,p.maximum)((0,p.keyCompare)(e=>{let[t,r]=e;return t*r})))},"getPAAPISize");function W(e){return e.ortb2Imp?.ext?.paapi?.requestedSize||(()=>{let t=F((0,s.sizesToSizeTuples)(e.mediaTypes?.banner?.sizes));if(t)return{width:t[0],height:t[1]}})()}function G(e,t){q()&&O.enabled&&t.forEach(e=>{let t=e.ortb2Imp?.ext?.igs!=null?e.ortb2Imp.ext.igs.ae||1:null,r=e.ortb2Imp?.ext?.ae;t!==r&&null!=t&&null!=r&&(0,s.logWarn)(y,"Ad unit defines conflicting ortb2Imp.ext.ae and ortb2Imp.ext.igs, using the latter",e);let i=t??r??O.defaultForSlots;if(i){(0,s.deepSetValue)(e,"ortb2Imp.ext.ae",i),e.ortb2Imp.ext.igs=Object.assign({ae:i,biddable:1},e.ortb2Imp.ext.igs);let t=W(e);t&&(0,s.deepSetValue)(e,"ortb2Imp.ext.paapi.requestedSize",t),e.bids.forEach(e=>{L(e.bidder).enabled||((0,s.deepSetValue)(e,"ortb2Imp.ext.ae",0),e.ortb2Imp.ext.igs={ae:0,biddable:0})})}});for(var r=arguments.length,i=Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];e(t,...i)}let z=["createAuctionNonce","getInterestGroupAdAuctionData"];function H(e,t){q()&&t.forEach(e=>{let{enabled:t}=L(e.bidderCode);Object.assign(e,{paapi:{enabled:t,componentSeller:!!O.componentSeller?.auctionConfig}}),t&&z.forEach(t=>{e.paapi[t]=function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return new X(()=>navigator[t](...r))}})}),e(t)}let Y=["auctionSignals","sellerSignals","perBuyerSignals","perBuyerTimeouts","directFromSellerSignals","perBuyerCurrencies","perBuyerCumulativeTimeouts","serverResponse"],J=(i=[{props:["seller"],validate:e=>"string"==typeof e},{props:["interestGroupBuyers"],validate:e=>Array.isArray(e)&&e.length>0},{props:["decisionLogicURL","decisionLogicUrl"],validate:e=>"string"==typeof e}],function(e){let t=i.find(t=>{let{props:r,validate:i}=t;return r.every(t=>!e.hasOwnProperty(t)||!e[t]||!i(e[t]))});return!t||((0,s.logError)(`Partial PAAPI config has missing or invalid property "${t.props[0]}"`,e),!1)});function K(e,t,r,i){let n,o=(0,f.adapterMetrics)(i),a=(0,f.guardTids)(i);return o.measureTime(t,()=>{try{n=e[t](r.map(a.bidRequest),a.bidderRequest(i))}catch(e){(0,s.logError)(`Error invoking "${t}":`,e)}}),n}function Q(e,t,r,i){function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return[Object.fromEntries(Y.map(r=>{let i=(0,m.defer)({promiseFactory:e=>new Promise(e)});return i.default=e.hasOwnProperty(r)?e[r]:null,t[r]=i.promise,[r,i]})),t]}let{auctionId:o,paapi:{enabled:a,componentSeller:d}={}}=i,l=I(o);if(r.map(e=>e.adUnitCode).forEach(e=>{T[e]=o,l.hasOwnProperty(e)||(l[e]=null)}),a&&t.buildPAAPIConfigs){let e=K(t,"buildPAAPIConfigs",r,i),a=Object.fromEntries(r.map(e=>[e.bidId,e]));(e??[]).forEach(e=>{let{bidId:r,config:i,igb:c}=e,u=a.hasOwnProperty(r)&&a[r];if(u){let e=u.adUnitCode;T[e]=o;let r=_(o),a=()=>{if(!r.hasOwnProperty(e)){let[t,i]=n();l[e]={...w(h.auctionManager.index.getAdUnit(u)),...i,componentAuctions:[]},r[e]={top:t,components:{},auctionConfig:l[e]}}return r[e]};if(i&&J(i)){var p,g;let e=(p=u.bidder,g=i.seller,`${p}::${g}`),t=a();if(t.components.hasOwnProperty(e))(0,s.logWarn)("Received multiple PAAPI configs for the same bidder and seller; config will be ignored",{config:i,bidder:u.bidder});else{let[r,o]=n(i),a={...w(u),...i,...o};t.auctionConfig.componentAuctions.push(a),t.components[e]={auctionConfig:a,deferrals:r}}}if(d&&c&&U(c)){let e=k(t.code),r=a(),i=x([[u,c]])[0][1];if(r.components.hasOwnProperty(e)){let{auctionConfig:t,deferrals:n}=r.components[e];if(t.interestGroupBuyers.includes(c.origin))(0,s.logWarn)("Received the same PAAPI buyer multiple times for the same PAAPI auction. Consider setting paapi.componentSeller.separateAuctions: true",c);else{let e={};Object.entries(i).forEach(t=>{let[r,i]=t;n.hasOwnProperty(r)?(0,s.mergeDeep)(n[r],{default:i}):e[r]=i}),(0,s.mergeDeep)(t,e)}}else{let[t,o]=n(i),a={...i,...w(u),...o};r.components[e]={auctionConfig:a,deferrals:t},r.auctionConfig.componentAuctions.push(a)}}}else(0,s.logError)("Received partial PAAPI config for unknown bidId",{bidId:r,config:i})})}for(var c=arguments.length,u=Array(c>4?c-4:0),p=4;p<c;p++)u[p-4]=arguments[p];return e.call(this,t,r,i,...u)}class X{constructor(e){this.resolve=e}}function Z(e,t,r,i){for(var n=arguments.length,o=Array(n>4?n-4:0),a=4;a<n;a++)o[a-4]=arguments[a];if(i.paapi?.enabled&&t.paapiParameters){let n=K(t,"paapiParameters",r,i);return m.PbPromise.all(Object.entries(n??{}).map(e=>{let[t,r]=e;return r instanceof X?r.resolve().then(e=>[t,e]):Promise.resolve([t,r])})).then(e=>{i.paapi.params=Object.fromEntries(e)}).catch(e=>{(0,s.logError)("Could not resolve PAAPI parameters",e)}).then(()=>{e.call(this,t,r,i,...o)})}e.call(this,t,r,i,...o)}function ee(e){let{auctionId:t}=e;O.parallel&&h.auctionManager.index.getAuction({auctionId:t}).requestsDone.then(()=>{Object.keys(_(t)).length>0&&v.forEach(e=>e.onAuctionConfig?.(t,I(t)))})}function et(e,t,r){e.forEach(e=>{let t=r.impContext[e.impid];t?.imp?.ext?.ae?(t.paapiConfigs=t.paapiConfigs||[],t.paapiConfigs.push(e)):(0,s.logWarn)(y,"Received auction configuration for an impression that was not in the request or did not ask for it",e,t?.imp)})}(0,d.registerOrtbProcessor)({type:d.IMP,name:"impExtAe",fn:function(e,t,r){r.bidderRequest.paapi?.enabled||(delete e.ext?.ae,delete e.ext?.igs)}}),(0,d.registerOrtbProcessor)({type:d.RESPONSE,name:"extPrebidFledge",fn:function(e,t,r){et(t.ext?.prebid?.fledge?.auctionconfigs||[],e,r)},dialects:[d.PBS]}),(0,d.registerOrtbProcessor)({type:d.RESPONSE,name:"extIgiIgs",fn:function(e,t,r){et((t.ext?.igi||[]).flatMap(e=>(e?.igs||[]).map(t=>(t.impid!==e.impid&&null!=t.impid&&null!=e.impid&&(0,s.logWarn)(y,"ORTB response ext.igi.igs.impid conflicts with parent's impid",e),{config:t.config,impid:t.impid??e.impid})).concat((e?.igb||[]).map(t=>({igb:t,impid:e.impid})))),e,r)}}),(0,d.registerOrtbProcessor)({type:d.RESPONSE,name:"paapiConfigs",priority:-1,fn:function(e,t,r){let i=Object.values(r.impContext).flatMap(e=>(e.paapiConfigs||[]).map(t=>({bidId:e.bidRequest.bidId,...t})));i.length>0&&(e.paapi=i)}}),(0,n.registerModule)("paapi")},6129:function(e,t,r){"use strict";let i,n,o;var a=r(3800),s=r(1620),d=r(7750),l=r(4321),c=r(1720),u=r(9204);let p="paapiForGpt";l.config.getConfig("paapi",e=>{(0,d.deepAccess)(e,"paapi.gpt.configWithTargeting",!0)?((0,d.logInfo)(p,"enabling PAAPI configuration with setTargetingForGPTAsync"),u.targeting.setTargetingForGPT.before(m)):u.targeting.setTargetingForGPT.getHooks({hook:m}).remove()});let g=(o={},function(e,t,r){let i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(t.length>0){let n=o[e]??{},a=Object.fromEntries(r.map(e=>[e.seller,e])),s=Object.keys(a);i?(a=Object.assign(n,a),n=Object.fromEntries(s.map(e=>[e,null]))):s.forEach(e=>{n[e]=null}),Object.keys(n).length?o[e]=n:delete o[e];let l=Object.entries(a).map(e=>{let[t,r]=e;return{configKey:t,auctionConfig:r}});l.length>0&&t.forEach(t=>{t.setConfig({componentAuction:l}),(0,d.logInfo)(p,`register component auction configs for: ${e}: ${t.getAdUnitPath()}`,r)})}else r.length>0&&(0,d.logWarn)(p,`unable to register component auction config for ${e}`,r)}),f=(n=[[728,90],[336,280],[300,250],[300,50],[160,600],[1024,768],[970,250],[970,90],[768,1024],[480,320],[468,60],[320,480],[320,100],[320,50],[300,600],[300,100],[250,250],[234,60],[200,200],[180,150],[125,125],[120,600],[120,240],[120,60],[88,31],[980,120],[980,90],[950,90],[930,180],[750,300],[750,200],[750,100],[580,400],[250,360],[240,400]].sort((0,c.keyCompare)(e=>{let[t,r]=e;return-(t*r)})).map(e=>[e,(0,d.sizeTupleToSizeString)(e)]),function(e,t){if(t?.length){let r=new Set(t.map(d.sizeTupleToSizeString)),i=n.find(e=>{let[t,i]=e;return r.has(i)});if(i)return void e.bail(i[0])}e(t)});(0,a.getGlobal)().setPAAPIConfigForGPT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>i(e,!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.getGPTSlotsForAdUnits;return function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=!1,a=e(i)||{},s=r(Object.keys(a),n);Object.entries(a).forEach(e=>{let[r,i]=e;null!=i&&(o=!0),t(r,s[r],i?.componentAuctions||[],!0)}),o||(0,d.logInfo)(`${p}: No component auctions available to set`)}}();let m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.getGlobal)().setPAAPIConfigForGPT;return function(t,r,i){(Array.isArray(r)?r:[r]).map(e=>null==e?void 0:{adUnitCode:e}).forEach(t=>e(t,i)),t(r,i)}}();(0,s.submodule)("paapi",{name:"gpt",init(e){i=e.getPAAPIConfig,(0,s.getHook)("getPAAPISize").before(f)}}),(0,a.registerModule)("paapiForGpt")},9530:function(e,t,r){"use strict";var i=r(3800),n=r(1620),o=r(9287),a=r(7750),s=r(4767);let d="pairId",l="pairId",c=(0,o.getStorageManager)({moduleType:s.MODULE_TYPE_UID,moduleName:d});function u(e){return c.localStorageIsEnabled()?c.getDataFromLocalStorage(e):null}function p(e){return c.cookiesAreEnabled()?c.getCookie(e):null}(0,n.submodule)("userId",{name:d,gvlid:755,decode:e=>e&&Array.isArray(e)?{pairId:e}:void 0,getId(e){let t=u(l)||p(l),r=[];if(t&&"string"==typeof t)try{r=r.concat(JSON.parse(atob(t)))}catch(e){(0,a.logInfo)(e)}let i=e&&e.params||{};if(i&&i.liveramp){let e=i.liveramp.storageKey||"_lr_pairId",t=u(e)||p(e);if(t)try{let e=atob(t);if(e){let t=JSON.parse(e);t&&"object"==typeof t&&t.envelope?r=r.concat(t.envelope):(0,a.logInfo)("Pairid: Parsed object is not valid or does not contain envelope")}else(0,a.logInfo)("Pairid: Decoded value is empty")}catch(e){(0,a.logInfo)("Pairid: Error parsing JSON: ",e)}else(0,a.logInfo)("Pairid: liverampValue for pairId from storage is empty or null")}return 0==r.length?void(0,a.logInfo)("PairId not found."):{id:r}},eids:{pairId:{source:"google.com",atype:571187}}}),(0,i.registerModule)("pairIdSystem")},1446:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.consolidateEids=s,t.extractEids=a,t.getPBSBidderConfig=o,t.premergeFpd=function(e,t){return null==e||0===Object.keys(e.bidder||{}).length?e:{...e=function(e,t){let{global:r,bidder:n}=e,o=s(a({global:r,bidder:n}));function d(e){delete e?.user?.eids,delete e?.user?.ext?.eids}return r=(0,i.deepClone)(r),n=(0,i.deepClone)(n),d(r),Object.values(n).forEach(d),o.global.length&&(0,i.deepSetValue)(r,"user.ext.eids",o.global),t?.length&&o.permissions.forEach(e=>e.bidders=e.bidders.filter(e=>t.includes(e))),o.permissions.length&&(0,i.deepSetValue)(r,"ext.prebid.data.eidpermissions",o.permissions),Object.entries(o.bidder).forEach(e=>{let[t,r]=e;r.length&&(0,i.deepSetValue)(n[t],"user.ext.eids",r)}),{global:r,bidder:n}}(e,t),bidder:o(e)}};var i=r(7750),n=r(9961);function o(e){let{global:t,bidder:r}=e;return Object.fromEntries(Object.entries(r).map(e=>{let[r,n]=e;return[r,function e(t,r){return Object.fromEntries(Object.entries(t).map(t=>{let[n,o]=t,a=r[n];return Array.isArray(o)?!(0,i.deepEqual)(o,a)&&Array.isArray(a)&&(o=a):null!=o&&"object"==typeof o&&(o=e(o,a)),[n,o]}))}(n,(0,i.mergeDeep)({},t,n))]}))}function a(e){let{global:t,bidder:r}=e,o=[],a={},s=new Set;function d(e){let t=o.find(t=>(0,i.deepEqual)(t.eid,e));return null==t&&(t={eid:e,bidders:new Set},o.push(t)),null==a[e.source]?a[e.source]=t.eid:t.eid===e&&s.add(e.source),t}return n.ORTB_EIDS_PATHS.forEach(e=>{((0,i.deepAccess)(t,e)||[]).forEach(e=>{d(e).bidders=!1})}),Object.entries(r).forEach(e=>{let[t,r]=e;n.ORTB_EIDS_PATHS.forEach(e=>{((0,i.deepAccess)(r,e)||[]).forEach(e=>{let r=d(e);!1!==r.bidders&&r.bidders.add(t)})})}),{eids:o.map(e=>{let{eid:t,bidders:r}=e;return{eid:t,bidders:r&&Array.from(r)}}),conflicts:s}}function s(e){let{eids:t,conflicts:r=new Set}=e,i=[],n=[],o={};return t.forEach(e=>{(!1===e.bidders?i:n).push(e)}),n.forEach(e=>{let{eid:t,bidders:n}=e;r.has(t.source)?n.forEach(e=>{(o[e]=o[e]||[]).push(t)}):i.push({eid:t,bidders:n})}),{global:i.map(e=>{let{eid:t}=e;return t}),permissions:i.filter(e=>{let{bidders:t}=e;return!1!==t}).map(e=>{let{eid:t,bidders:r}=e;return{source:t.source,bidders:r}}),bidder:o}}},7880:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.S2S_VENDORS=void 0,t.S2S_VENDORS={}},1860:function(e,t,r){"use strict";let i;var n=r(5824);Object.defineProperty(t,"__esModule",{value:!0}),t.PrebidServer=w,t.processAttr=C,t.processPBSRequest=void 0,t.resetSyncedStatus=function(){E=0},t.s2sDefaultConfig=void 0,t.validateConfig=_;var o=r(3800),a=n(r(7292)),s=r(7750),d=r(8878),l=n(r(6553)),c=r(4321),u=r(256),p=v(r(2506)),g=r(7880),f=r(7581),m=r(1620),h=r(3020),b=r(7829),y=r(7557);function v(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(v=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let A=c.config.getConfig,I=d.S2S.SRC,E=0,S=t.s2sDefaultConfig={bidders:Object.freeze([]),syncTimeout:1e3,maxBids:1,adapter:"prebidServer",allowUnknownBidderCodes:!1,adapterOptions:{},syncUrlModifier:{},ortbNative:{eventtrackers:[{event:1,methods:[1,2]}]},maxTimeout:1500,filterBidderlessCalls:!1};function _(e){if(!e)return;e=Array.isArray(e)?e:[e];let t=new Set;return e.filter(e=>{if(["endpoint","syncEndpoint"].forEach(t=>{if((0,s.isStr)(e[t])){let r=e[t];e[t]={p1Consent:r,noP1Consent:r}}!(0,s.isPlainObject)(e[t])||e[t].p1Consent&&e[t].noP1Consent||["p1Consent","noP1Consent"].forEach(r=>{e[t][r]||(0,s.logWarn)(`s2sConfig.${t}.${r} not defined.  PBS request will be skipped in some P1 scenarios.`)})}),function(e){if(e.defaultVendor){let t=e.defaultVendor,r=Object.keys(e);if(!g.S2S_VENDORS[t])return(0,s.logError)("Incorrect or unavailable prebid server default vendor option: "+t),!1;Object.keys(g.S2S_VENDORS[t]).forEach(i=>{S[i]!==e[i]&&r.includes(i)||(e[i]=g.S2S_VENDORS[t][i])})}else null==e.adapter&&(e.adapter="prebidServer");return!0}(e)&&function(e){for(let t of["accountId","endpoint"])if(null==e[t])return(0,s.logError)(t+" missing in server to server config"),!1;return!0}(e)&&e.enabled)return Array.isArray(e.bidders)&&!e.ignoreDuplicateBidders&&(e.bidders=e.bidders.filter(e=>!t.has(e)&&(t.add(e),!0))),!0;(0,s.logWarn)("prebidServer: s2s config is disabled",e)})}function T(e,t){let r=(0,h.hasPurpose1Consent)(t),i=r?e.p1Consent:e.noP1Consent;return i||(0,s.logWarn)("Missing matching consent URL when gdpr="+r),i}function O(e){let t,r,i;return Array.isArray(e)&&e.length>0&&(t=e[0].gdprConsent,r=e[0].uspConsent,i=e[0].gppConsent),{gdprConsent:t,uspConsent:r,gppConsent:i}}function C(e,t,r){let i=e?.seatbid?.flatMap(e=>e.bid.map(e=>({attr:e.attr})))||[];return i?.[r]&&t?.bid&&(t.bid.meta={...t.bid.meta,isInBannerVideo:!!(i[r].attr&&Array.isArray(i[r].attr)&&i[r].attr.includes(6))}),t}function w(){let e=new a.default("prebidServer");return e.callBids=function(e,t,r,n,o){let a=e.metrics=(0,y.useMetrics)(t?.[0]?.metrics).newMetrics().renameWith(t=>[`adapter.s2s.${t}`,`adapters.s2s.${e.s2sConfig.defaultVendor}.${t}`]);n=a.startTiming("total").stopBefore(n),t.forEach(e=>(0,y.useMetrics)(e.metrics).join(a,{continuePropagation:!1}));let{gdprConsent:g,uspConsent:m,gppConsent:h}=O(t);if(Array.isArray(i)){let b=e.s2sConfig;if(b?.syncEndpoint&&T(b.syncEndpoint,g)){let t=b.extPrebid?.aliases??{};!function(e,t,r,n,o){if(i.length===E)return;E++;let a={},d=A("userSync.filterSettings");if(d){let{all:e,iframe:t,image:r}=d,i=t||e,n=r||e;i&&(a=Object.assign({iframe:i},a)),n&&(a=Object.assign({image:n},a))}let l={uuid:(0,s.generateUUID)(),bidders:e,account:o.accountId,filterSettings:a},c=o.userSyncLimit;(0,s.isNumber)(c)&&c>0&&(l.limit=c),t&&(l.gdpr=+!!t.gdprApplies,!1!==t.gdprApplies&&(l.gdpr_consent=t.consentString)),r&&(l.us_privacy=r),n&&(l.gpp_sid=n.applicableSections.join(),l.gpp=n.gppString),"boolean"==typeof o.coopSync&&(l.coopSync=o.coopSync);let u=JSON.stringify(l);(0,f.ajax)(T(o.syncEndpoint,t),e=>{try{e=JSON.parse(e),function e(t,r){var i,n,o,a,d,l,c,u,p,g;if(0===t.length)return;let f=t.shift();f.no_cookie?(i=f.usersync.type,n=f.usersync.url,o=f.bidder,a=e.bind(null,t,r),(d=r).syncUrlModifier&&"function"==typeof d.syncUrlModifier[o]&&(n=d.syncUrlModifier[o](i,n,o)),l=i,c=n,u=o,p=a,g=d.syncTimeout,c?"image"===l||"redirect"===l?((0,s.logMessage)(`Invoking image pixel user sync for bidder: "${u}"`),(0,s.triggerPixel)(c,p,g)):"iframe"===l?((0,s.logMessage)(`Invoking iframe user sync for bidder: "${u}"`),(0,s.insertUserSyncIframe)(c,p,g)):((0,s.logError)(`User sync type "${l}" not supported for bidder: "${u}"`),p()):((0,s.logError)(`No sync url for bidder "${u}": ${c}`),p())):e(t,r)}(e.bidder_status,o)}catch(e){(0,s.logError)(e)}},u,{contentType:"text/plain",withCredentials:!0})}((b.syncBidders??b.bidders).map(e=>l.default.aliasRegistry[e]||t[e]||e).filter((e,t,r)=>r.indexOf(e)===t),g,m,h,e.s2sConfig)}x(e,t,o,{onResponse:function(r,i,o){var s,u,f,b,y;o?.app&&t.forEach(e=>e.app=!0),r&&t.forEach(e=>p.emit(d.EVENTS.BIDDER_DONE,e));let{seatNonBidData:v,atagData:A}=(s=e.s2sConfig,{atagData:(f=u=o,f?.ext?.prebid?.analytics?.tags),seatNonBidData:(b=s,y=u,b?.extPrebid?.returnallbidstatus?y?.ext?.seatnonbid:void 0)});if(v&&p.emit(d.EVENTS.SEAT_NON_BID,{seatnonbid:o.ext.seatnonbid,auctionId:t[0].auctionId,requestedBidders:i,response:o,adapterMetrics:a}),v||A){let e={seatnonbid:v,atag:A,auctionId:t[0].auctionId,requestedBidders:i,response:o,adapterMetrics:a};p.emit(d.EVENTS.PBS_ANALYTICS,e)}n(!1),i.forEach(e=>{let t=l.default.getBidAdapter(e);t&&t.registerSyncs&&c.config.runWithBidder(e,t.registerSyncs.bind(t,[],g,m,h))})},onError(r,i){let{p1Consent:o="",noP1Consent:a=""}=e?.s2sConfig?.endpoint||{};o===a?(0,s.logError)(`Prebid server call failed: '${r}'. Endpoint: "${o}"}`,i):(0,s.logError)(`Prebid server call failed: '${r}'. Endpoints: p1Consent "${o}", noP1Consent "${a}"}`,i),t.forEach(e=>p.emit(d.EVENTS.BIDDER_ERROR,{error:i,bidderRequest:e})),n(i.timedOut)},onBid:function(t){let{adUnit:i,bid:n}=t,o=n.metrics=e.metrics.fork().renameWith();o.checkpoint("addBidResponse"),null!=n.requestId&&null!=n.requestBidder||e.s2sConfig.allowUnknownBidderCodes?(n.originalCurrency=n.currency,o.measureTime("addBidResponse.validate",()=>(0,u.isValid)(i,n))?r(i,n):r.reject(i,n,d.REJECTION_REASON.INVALID)):((0,s.logWarn)(`PBS adapter received bid from unknown bidder (${n.bidder}), but 's2sConfig.allowUnknownBidderCodes' is not set. Ignoring bid.`),r.reject(i,n,d.REJECTION_REASON.BIDDER_DISALLOWED))},onFledge:e=>{c.config.runWithBidder(e.bidder,()=>{(0,u.addPaapiConfig)({auctionId:t[0].auctionId,...e},{config:e.config})})}})}},Object.assign(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:I})}c.config.setDefaults({s2sConfig:S}),A("s2sConfig",e=>{var t;let{s2sConfig:r}=e;t=_(t=r),t?.length&&(i=t)});let x=t.processPBSRequest=(0,m.hook)("async",function(e,t,r,i){let{onResponse:n,onError:o,onBid:a,onFledge:c}=i,{gdprConsent:u}=O(t),g=(0,s.deepClone)(e.ad_units),f={},m=g.map(e=>e.bids.map(e=>{let t=l.default.aliasRegistry[e.bidder];return t&&(f[e.bidder]=t),e.bidder}).filter(s.uniques)).reduce(s.flatten,[]).filter(s.uniques),h=e.metrics.measureTime("buildRequests",()=>(0,b.buildPBSRequest)(e,t,g,m,f)),y={endpointUrl:T(e.s2sConfig.endpoint,u),requestJson:h&&JSON.stringify(h),customHeaders:e?.s2sConfig?.customHeaders??{}};if(p.emit(d.EVENTS.BEFORE_PBS_HTTP,y),(0,s.logInfo)("BidRequest: "+y),h&&y.requestJson&&y.endpointUrl){let t=(t,i)=>{let d=e.metrics.startTiming("net");r(i,{success:function(t){let r;d();try{r=JSON.parse(t);let{bids:i,paapi:n}=e.metrics.measureTime("interpretResponse",()=>(0,b.interpretPBSResponse)(r,h));i.forEach((e,t)=>{e?.bid?.bidderCode==="pubm_ss"&&(e=C(r,e,t)),a(e)}),n&&n.forEach(c),h?.app&&(r.app=!0)}catch(e){(0,s.logError)(e)}!r||r.status&&r.status.includes("Error")?((0,s.logError)("error parsing response: ",r?r.status:"not valid JSON"),n(!1,m)):n(!0,m,r)},error:function(){d(),o.apply(this,arguments)}},t,{contentType:"text/plain",withCredentials:!0,customHeaders:y.customHeaders})},i=e.s2sConfig.endpointCompression&&!y.customHeaders["Content-Encoding"],l="TRUE"===(0,s.getParameterByName)(d.DEBUG_MODE).toUpperCase()||(0,s.debugTurnedOn)();i&&l&&(0,s.logWarn)("Skipping GZIP compression for PBS as debug mode is enabled"),i&&!l&&(0,s.isGzipCompressionSupported)()?(0,s.compressDataWithGZip)(y.requestJson).then(e=>{let r=new URL(y.endpointUrl);r.searchParams.set("gzip","1"),t(e,r.href)}):t(y.requestJson,y.endpointUrl)}else(0,s.logError)("PBS request not made.  Check endpoints.")},"processPBSRequest");l.default.registerBidAdapter(new w,"prebidServer"),(0,o.registerModule)("prebidServerBidAdapter")},7829:function(e,t,r){"use strict";let i;Object.defineProperty(t,"__esModule",{value:!0}),t.buildPBSRequest=function(e,t,r,i,n){let s,d,l=(0,o.timestamp)(),c=new Set,u=[],p=(0,f.s2sActivityParams)(e.s2sConfig),v=(s=(0,g.redactor)(p),d={},e=>null==e?s:(d.hasOwnProperty(e)||(d[e]=(0,g.redactor)((0,m.activityParams)(h.MODULE_TYPE_BIDDER,e))),d[e]));(r=r.map(e=>v().bidRequest(e))).forEach(a=>{let s=new Map;r.bids=a.bids.map(e=>v(e.bidder).bidRequest(e)),a.bids.forEach(r=>{null!=r.mediaTypes&&(0,o.logWarn)(`Prebid Server adapter does not (yet) support bidder-specific mediaTypes for the same adUnit. Size mapping configuration will be ignored for adUnit: ${a.code}, bidder: ${r.bidder}`);let d=s.get(r.bidder),l=(0,o.getBidRequest)(r.bid_id,t);d?x(r,l,e,s,i,n):s.set(r.bidder,l)});let d=a.code,l=1;for(;c.has(d);)l++,d=`${a.code}-${l}`;c.add(d),u.push({...a,adUnitCode:a.code,pbsData:{impId:d,actualBidRequests:s,adUnit:a}})});let A={...Object.fromEntries(Object.entries(t[0]).filter(e=>{let[t]=e;return!_.has(t)})),paapi:{enabled:t.some(e=>e.paapi?.enabled)}},I=(0,o.deepClone)(A),S=(0,o.deepAccess)(I,"ortb2.user.ext.eids",[]);S.length&&(0,o.deepSetValue)(e,"ortb2Fragments.global.user.ext.eids",S);let T=C.toORTB({bidderRequest:A,bidRequests:u,context:{currency:a.config.getConfig("currency.adServerCurrency")||"USD",ttl:e.s2sConfig.defaultTtl||60,requestTimestamp:l,s2sBidRequest:{...e,ortb2Fragments:(0,E.premergeFpd)(e.ortb2Fragments,i)},requestedBidders:i,actualBidderRequests:t,nativeRequest:e.s2sConfig.ortbNative,getRedactor:v,transmitTids:(0,b.isActivityAllowed)(y.ACTIVITY_TRANSMIT_TID,p)}});return R(e,T,a.config.getConfig("appDataConfig")),T},t.convertDynamicAliasToOriginalBidder=w,t.createBidUsingDynamicAlias=x,t.interpretPBSResponse=function(e,t){return w(e),C.fromORTB({response:e,request:t})},t.setAppData=R,t.setConfigToApp=D;var n=r(8256),o=r(7750),a=r(4321),s=r(8878),d=r(6956),l=r(5253),c=r(6400),u=r(3520),p=r(5177),g=r(9961),f=r(6553),m=r(958),h=r(4767),b=r(5110),y=r(2276),v=r(1398),A=r(1720),I=r(1860),E=r(1446),S=r(4030);let _=new Set(["bidderCode","bidderRequestId","uniquePbsTid","bids","timeout"]),T={},O=(i=(0,A.minimum)((0,v.currencyCompare)(e=>[e.bidfloor,e.bidfloorcur])),function(e){let t;for(let r of e){if(r?.bidfloorcur==null||r?.bidfloor==null)return null;t=null==t?r:i(t,r)}return t}),C=(0,n.ortbConverter)({processors:l.pbsExtensions,context:{netRevenue:!0},imp(e,t,r){Object.assign(r,t.pbsData);let i=e(t,r);if(i.tagid=t.adUnitCode,(t.bids||[]).forEach(e=>{e.ortb2Imp&&Object.keys(e.ortb2Imp).length>0&&(0,o.deepSetValue)(i,`ext.prebid.imp.${e.bidder}`,e.ortb2Imp)}),Object.values(u.SUPPORTED_MEDIA_TYPES).some(e=>i[e]))return i.secure=t.ortb2Imp?.secure??1,i},request(e,t,r,i){if(t.length){let{s2sBidRequest:n}=i,a=e(t,r,i);return a.tmax=Math.floor((r?.adUnitsS2SCopy?.length&&r.adUnitsS2SCopy[0].refresh&&n.s2sConfig.refreshTimeout||n.s2sConfig.timeout)??Math.min(.75*n.requestBidsTimeout,n.s2sConfig.maxTimeout??I.s2sDefaultConfig.maxTimeout)),a.ext.tmaxmax=a.ext.tmaxmax||n.requestBidsTimeout,[a.app,a.dooh,a.site].forEach(e=>{e&&!e.publisher?.id&&(0,o.deepSetValue)(e,"publisher.id",n.s2sConfig.accountId)}),i.transmitTids||(0,o.deepSetValue)(a,"ext.prebid.createtids",!1),a}(0,o.logError)("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")},bidResponse(e,t,r){let i=r.actualBidRequests.get(r.seatbid.seat);null==i&&(i=r.actualBidRequests.get(null)),i&&Object.assign(r,{bidRequest:i,bidderRequest:r.actualBidderRequests.find(e=>e.bidderCode===i.bidder)});let n=e(t,r);return n.requestBidder=i?.bidder,n.native?.ortb&&(n.adm=n.native.ortb),n.requestTimestamp=r.requestTimestamp,{bid:Object.assign((0,d.createBid)(s.STATUS.GOOD,{src:s.S2S.SRC,bidId:i?i.bidId||i.bid_Id:null,transactionId:r.adUnit.transactionId,adUnitId:r.adUnit.adUnitId,auctionId:r.bidderRequest.auctionId}),n,{deferRendering:!!r.adUnit.deferBilling,deferBilling:!!r.adUnit.deferBilling}),adUnit:r.adUnit.code}},overrides:{[p.IMP]:{id(e,t,r,i){t.id=i.impId},params(e,t,r,i){let n=i.s2sBidRequest.s2sConfig.adapterOptions;for(let e of i.actualBidRequests.values())(0,c.setImpBidParams)(t,e,i,i),n&&n[e.bidder]&&Object.assign(t.ext.prebid.bidder[e.bidder],n[e.bidder])},bidfloor(e,t,r,i){let n=O(function*(){for(let t of i.actualBidRequests.values()){let r={};e(r,t,i),yield r}}());null!=n&&Object.assign(t,n)},extBidfloor(e,t,r,i){function n(e,t){null!=t&&((0,o.deepSetValue)(e,"ext.bidfloor",t.bidfloor),(0,o.deepSetValue)(e,"ext.bidfloorcur",t.bidfloorcur))}let a=Array.from(i.actualBidRequests.values()).map(r=>{let n=(0,o.deepClone)(t);return e(n,r,i),n});Object.values(S.ALL_MEDIATYPES).forEach(e=>{n(t[e],O(a.map(t=>t[e]?.ext)))}),(t[S.BANNER]?.format||[]).forEach((e,t)=>{n(e,O(a.map(e=>e[S.BANNER].format[t]?.ext)))})}},[p.REQUEST]:{fpd(e,t,r,i){i.transmitTids&&(0,o.deepSetValue)(t,"source.tid",r.auctionId),(0,o.mergeDeep)(t,i.s2sBidRequest.ortb2Fragments?.global),i.s2sBidRequest?.s2sConfig?.ortb2&&"object"==typeof i.s2sBidRequest.s2sConfig.ortb2&&(0,o.mergeDeep)(t,i.s2sBidRequest.s2sConfig.ortb2),i.s2sBidRequest.s2sConfig.extPrebid&&"object"==typeof i.s2sBidRequest.s2sConfig.extPrebid&&(0,o.deepSetValue)(t,"ext.prebid",(0,o.mergeDeep)(t.ext?.prebid||{},i.s2sBidRequest.s2sConfig.extPrebid)),i.getRedactor().ortb2(t);let n=Object.entries(i.s2sBidRequest.ortb2Fragments?.bidder||{}).filter(e=>{let[t]=e,r=i.s2sBidRequest.s2sConfig,n=r.bidders,o=r.syncBidders;return r.allowUnknownBidderCodes||n?.includes(t)||o?.includes(t)}).map(e=>{let[t,r]=e;return{bidders:[t],config:{ortb2:i.getRedactor(t).ortb2(r)}}});n.length&&(0,o.deepSetValue)(t,"ext.prebid.bidderconfig",(0,o.deepClone)(n))},extPrebidAliases(e,t,r,i){i.actualBidderRequests.forEach(r=>{e(t,r,i)})},sourceExtSchain(e,t,r,i){let n=t?.ext?.prebid?.schains||[],a=new Set(n.flatMap(e=>e.bidders));(n=Object.values(n.concat(i.actualBidderRequests.filter(e=>!a.has(e.bidderCode)).map(e=>({bidders:[e.bidderCode],schain:e?.bids?.[0]?.schain}))).filter(e=>{let{bidders:t,schain:r}=e;return t?.length>0&&r}).reduce((e,t)=>{let{bidders:r,schain:i}=t,n=JSON.stringify(i);return e.hasOwnProperty(n)||(e[n]={bidders:new Set,schain:i}),r.forEach(t=>e[n].bidders.add(t)),e},{})).map(e=>{let{bidders:t,schain:r}=e;return{bidders:Array.from(t),schain:r}})).length&&(0,o.deepSetValue)(t,"ext.prebid.schains",n)}},[p.RESPONSE]:{serverSideStats(e,t,r,i){i.actualBidderRequests.forEach(n=>e(t,r,{...i,bidderRequest:n,bidRequests:n.bids}))},paapiConfigs(e,t,r,i){let n=Object.values(i.impContext).flatMap(e=>(e.paapiConfigs||[]).map(t=>{let r=e.actualBidderRequests.find(e=>e.bidderCode===t.bidder),i=e.actualBidRequests.get(t.bidder);return{adUnitCode:e.adUnit.code,ortb2:r?.ortb2,ortb2Imp:i?.ortb2Imp,bidder:t.bidder,config:t.config}}));n.length>0&&(t.paapi=n)}}}});function w(e){e.seatbid&&e.seatbid.map(e=>{let t=e.seat;for(let r in T)(T[r].bidders||[]).indexOf(t)>-1&&(e.seat=r);return e})}function x(e,t,r,i,n,o){let a={...e},s=T[a.bidder]=T[a.bidder]||{};s.bidders=s.bidders||[],s.next=s.next||{};let d=s.next[e.auctionId]||1;s.next[e.auctionId]=d+1;let l=`${a.bidder}${d}`;a.bidder=l,s.bidders.includes(l)||s.bidders.push(l),t.bidder=l,i.set(l,t);let c=r.s2sConfig,u=c.extPrebid=c.extPrebid||{},p=u.aliases=u.aliases||{},g=u.aliases[e.bidder]||o[e.bidder]||e.bidder;p[l]=g,n.push(l)}function R(e,t,r){let i=e?.s2sConfig?.appData,n=r?.bseat||[],o=Object.keys(t?.imp&&t.imp.length&&t.imp[0].ext?.prebid?.bidder||{}).some(e=>r?.bidders?.includes(e));i&&t&&o&&(t.app=i,t.app.ext=t?.site?.ext,t.app.publisher=t?.site?.publisher,n.length&&(t.bseat=n),delete t.site,D(t),t.imp=t.imp.map(e=>{let t=e.ext?.prebid?.bidder;return t&&(e.ext.prebid.bidder=Object.keys(t).reduce((e,i)=>(r?.bidders?.includes(i)&&(e[i]={...t[i]}),e),{})),e}))}function D(e){e?.ext?.prebid?.bidderconfig?.length>0&&e.ext.prebid.bidderconfig.forEach((t,r)=>{t.config&&t.config.ortb2&&t.config.ortb2.site&&(e.ext.prebid.bidderconfig[r].config.ortb2.app={...t.config.ortb2.site},delete e.ext.prebid.bidderconfig[r].config.ortb2.site)})}},3682:function(e,t,r){"use strict";let i;var n=r(3800),o=r(7750),a=r(4321),s=r(7581),d=I(r(2506)),l=r(8878),c=r(1620),u=r(783),p=r(1928),g=r(1171),f=r(5177),m=r(7557),h=r(5815),b=r(5767),y=r(1398),v=r(1375),A=r(4030);function I(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(I=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let E={NOT_FOUND:"not_found",RANDOM:"random",LAZY:"lazy",SESSION:"session"},S="Price Floors",_=(0,s.ajaxBuilder)(1e4),T=Symbol(),O=[T,"gptSlot","adUnitCode","size","domain","mediaType"],C=!1,w=!1,x={},R=(0,v.timeoutQueue)(),D={};function P(e,t){let{index:r=g.auctionManager.index}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e?.adUnitCode||r.getAdUnit(t).code}let k={[T]:()=>"*",size:(e,t)=>(0,o.parseGPTSingleSizeArray)(t.size)||"*",mediaType:(e,t)=>t.mediaType||"banner",gptSlot:(e,t)=>(function(e){let{index:t=g.auctionManager.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getAdUnit({adUnitId:e});return"gam"===(0,o.deepAccess)(r,"ortb2Imp.ext.data.adserver.name")&&r.ortb2Imp.ext.data.adserver.adslot})((e||t).adUnitId)||(0,b.getGptSlotInfoForAdUnitCode)(P(e,t)).gptSlot,domain:function(){return null==i&&(i=(0,o.parseUrl)((0,u.getRefererInfo)().topmostLocation,{noDecodeWholeURL:!0}).hostname),i},adUnitCode:(e,t)=>P(e,t)};function N(e,t){var r,i,n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(r=(0,o.deepAccess)(e,"schema.fields")||[],r.length?r.reduce((e,r)=>{let i=k[r](t,a)||"*";return e.push("*"===i?["*"]:[i.toLowerCase(),"*"]),e},[]):[]);if(!s.length)return{matchingFloor:void 0};let d=s.map(e=>e[0]).join("-"),l=(0,o.deepAccess)(e,`matchingInputs.${d}`);if(l)return{...l};let c=(i=s,n=(0,o.deepAccess)(e,"schema.delimiter")||"|",i.reduce((e,t)=>{let r=[];return e.map(e=>{t.map(t=>{r.push(e+n+t)})}),r}).sort((e,t)=>e.split("*").length-t.split("*").length)),u=(c||[]).find(t=>e.values.hasOwnProperty(t)),p={floorMin:e.floorMin||0,floorRuleValue:e.values[u],matchingData:c[0],matchingRule:u===e.meta?.defaultRule?void 0:u},g=(0,o.deepAccess)(t,"ortb2Imp.ext.prebid.floors.floorMin");return"number"==typeof g&&(p.floorMin=g),p.matchingFloor=Math.max(p.floorMin,p.floorRuleValue),(0,o.deepSetValue)(e,`matchingInputs.${d}`,{...p}),p}function B(e,t,r){return parseFloat((0,h.adjustCpm)(e,{...t,cpm:e},r))}let U={banner:e=>(0,o.deepAccess)(e,"mediaTypes.banner.sizes")||[],video:e=>(0,o.deepAccess)(e,"mediaTypes.video.playerSize")||[],native:e=>(0,o.deepAccess)(e,"mediaTypes.native.image.sizes")?[(0,o.deepAccess)(e,"mediaTypes.native.image.sizes")]:[]};function j(){var e,t,r;let i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currency:"USD",mediaType:"*",size:"*"},s=D[this.auctionId];if(!s||s.skipped)return{};e=a,i=Object.keys(this.mediaTypes||{}),"*"===e.mediaType&&1===i.length&&(e.mediaType=i[0]),"*"===e.size&&-1!==i.indexOf(e.mediaType)&&U[e.mediaType]&&1===U[e.mediaType](this).length&&(e.size=U[e.mediaType](this)[0]),a=e;let d=N(s.data,{...this},{mediaType:a.mediaType,size:a.size}),l=a.currency||s.data.currency;if(d.matchingFloor&&l!==s.data.currency)try{d.matchingFloor=(0,n.getGlobal)().convertCurrency(d.matchingFloor,s.data.currency,l)}catch(e){(0,o.logWarn)(`${S}: Unable to get currency conversion for getFloor for bidder ${this.bidder}. You must have currency module enabled with defaultRates in your currency config`),l=s.data.currency}if(s.enforcement.bidAdjustment&&d.matchingFloor){let e=p.bidderSettings.get(this.bidder,"inverseBidAdjustment");if(e){let t=Object.fromEntries(Object.entries(a).filter(e=>{let[t,r]=e;return"*"!==r&&["mediaType","size"].includes(t)}));d.matchingFloor=e(d.matchingFloor,this,t)}else{let e=B(d.matchingFloor,null,this);d.matchingFloor=e?(r=d.matchingFloor,1e10*r/(1e10*e)*(1e10*r)/1e10):d.matchingFloor}}return null===d.floorRuleValue?null:d.matchingFloor?{floor:(t=d.matchingFloor,Math.ceil((1e4*parseFloat(t)).toFixed(1))/1e4),currency:l}:{}}function M(e,t){var r,i;let n,a,s,d=(0,o.deepClone)(e);return d.schema.delimiter=e.schema.delimiter||"|",r=d,i=t,n=r.schema.fields,a=r.schema.delimiter,s=i&&-1===n.indexOf("adUnitCode")&&n.unshift("adUnitCode"),d.values=Object.keys(r.values).reduce((e,t)=>(e[(s?`${i}${a}${t}`:t).toLowerCase()]=r.values[t],e),{}),d.currency=d.currency||"USD",d}function V(e){if(!e.hasExited){e.reqBidsConfigObj.auctionId=e.reqBidsConfigObj.auctionId||(0,o.generateUUID)();let t=(e.reqBidsConfigObj.adUnits||(0,n.getGlobal)().adUnits).filter(t=>!e.reqBidsConfigObj.adUnitCodes?.length||e.reqBidsConfigObj.adUnitCodes.includes(t.code));D[e.reqBidsConfigObj.auctionId]=function(e,t){var r,i,n,a;let s,d,l=(0,o.deepClone)(x);if(2===(0,o.deepAccess)(l,"data.floorsSchemaVersion")){let{modelGroups:e,...t}=l.data;l.data=Object.assign(t,function(e,t){let r=Math.floor(Math.random()*t+1);for(let t=0;t<e.length;t++)if((r-=e[t].modelWeight)<=0)return e[t]}(e,t.modelWeightSum))}if(0===Object.keys((0,o.deepAccess)(l,"data.values")||{}).length?(s=(r=e).find(e=>e.floors?.schema!=null),l.data=r.reduce((e,t)=>{if(t.floors?.schema!=null&&!(0,o.deepEqual)(t.floors.schema,s?.floors?.schema))return(0,o.logError)(`${S}: adUnit '${t.code}' declares a different schema from one previously declared by adUnit '${s.code}'. Floor config for '${t.code}' will be ignored.`),e;let r=Object.assign({},s?.floors,{values:void 0},t.floors);if(L(r))if(e.values){let i=M(r,t.code).values;Object.assign(e.values,i)}else(e=M(r,t.code)).location="adUnit";else null!=t.floors&&(0,o.logWarn)(`adUnit '${t.code}' provides an invalid \`floor\` definition, it will be ignored for floor calculations`,t);return e},{})):l.data=M(l.data),0===Object.keys((0,o.deepAccess)(l,"data.values")||{}).length)l.skipped=!0,l.skippedReason=E.NOT_FOUND;else{let e=100*Math.random()<parseFloat((0,o.getParameterByName)("pbjs_skipRate")||((0,o.deepAccess)(l,"data.skipRate")??l.skipRate));if(l.skipped=e,e){let e=(0,o.deepAccess)(l,"data.floorProviderType")?.toUpperCase();l.skippedReason=E[e]??E.RANDOM}}return l.hasOwnProperty("floorMin")&&(l.data.floorMin=l.floorMin),i=e,n=l,a=t,d=function(e){let{data:t,enforcement:r}=e;return t?.noFloorSignalBidders?.length>0?t.noFloorSignalBidders:r?.noFloorSignalBidders?.length>0?r.noFloorSignalBidders:[]}(n),i.forEach(e=>{e.bids.forEach(e=>{let t=d.some(t=>t===e.bidder);n.skipped||t?(t&&(0,o.logInfo)(`noFloorSignal to ${e.bidder}`),delete e.getFloor):e.getFloor=j,e.auctionId=a,e.floorData={noFloorSignaled:t,skipped:n.skipped,skipRate:(0,o.deepAccess)(n,"data.skipRate")??n.skipRate,skippedReason:n.skippedReason,floorMin:n.floorMin,modelVersion:(0,o.deepAccess)(n,"data.modelVersion"),modelWeight:(0,o.deepAccess)(n,"data.modelWeight"),modelTimestamp:(0,o.deepAccess)(n,"data.modelTimestamp"),location:(0,o.deepAccess)(n,"data.location","noData"),floorProvider:n.floorProvider,fetchStatus:x.fetchStatus}})}),l}(t,e.reqBidsConfigObj.auctionId),e.nextFn.apply(e.context,[e.reqBidsConfigObj]),e.hasExited=!0}}function $(e){var t,r,i;return e=function(e){if((0,o.isNumber)(e.default)){let t="*",r=(e.schema?.fields||[]).length;r?t=Array(r).fill("*").join(e.schema?.delimiter||"|"):(0,o.deepSetValue)(e,"schema.fields",[T]),e.values=e.values||{},null==e.values[t]&&(e.values[t]=e.default,e.meta={defaultRule:t})}return e}(e),!!function(e){if(Array.isArray(e)&&e.length>0)if(e.every(e=>O.includes(e)))return!0;else(0,o.logError)(`${S}: Fields received do not match allowed fields`);return!1}((0,o.deepAccess)(e,"schema.fields"))&&(t=e,r=e.schema.fields.length,i=e.schema.delimiter||"|","object"==typeof t.values&&(t.values=Object.keys(t.values).reduce((e,n)=>{var o;return o=t.values[n],"string"==typeof n&&n.split(i).length===r&&("number"==typeof o||null===o)&&(e[n]=t.values[n]),e},{}),Object.keys(t.values).length>0))}let q={1:e=>$(e),2:e=>!!Array.isArray(e.modelGroups)&&0!==e.modelGroups.length&&(e.modelWeightSum=0,e.modelGroups.every(t=>!!("number"==typeof t.modelWeight&&$(t))&&(e.modelWeightSum+=t.modelWeight,!0)))};function L(e){return"object"==typeof e&&((e.floorsSchemaVersion=e.floorsSchemaVersion||1,"function"!=typeof q[e.floorsSchemaVersion])?((0,o.logError)(`${S}: Unknown floorsSchemaVersion: `,e.floorsSchemaVersion),!1):q[e.floorsSchemaVersion](e))}function F(e,t){if(e&&"object"==typeof e&&L(e))return(0,o.logInfo)(`${S}: A ${t} set the auction floor data set to `,e),{...e,location:t};(0,o.logError)(`${S}: The floors data did not contain correct values`,e)}let W=(0,m.timedAuctionHook)("priceFloors",function(e,t){let r={reqBidsConfigObj:t,context:this,nextFn:e,hasExited:!1,timer:null};x.auctionDelay>0&&C?R.submit(x.auctionDelay,()=>V(r),()=>{(0,o.logWarn)(`${S}: Fetch attempt did not return in time for auction`),x.fetchStatus="timeout",V(r)}):V(r)});function G(e){let t;C=!1,x.fetchStatus="success";try{t=JSON.parse(e)}catch(r){t=e}let r=F(t,"fetch");r&&(x.data=r,x.skipRate=(0,o.isNumber)(r.skipRate)?r.skipRate:x.skipRate,x.floorProvider=r.floorProvider||x.floorProvider),R.resume()}function z(e){C=!1,x.fetchStatus="error",(0,o.logError)(`${S}: Fetch errored with: `,e),R.resume()}let H=(0,m.timedBidResponseHook)("priceFloors",function(e,t,r,i){var a;let s,d,c,u,p=D[r.auctionId];if(!p||!r||p.skipped)return e.call(this,t,r,i);let f=g.auctionManager.index.getBidRequest(r),m=N(p.data,f,{...r,size:[r.width,r.height]});if(!m.matchingFloor)return 0!==m.matchingFloor&&(0,o.logWarn)(`${S}: unable to determine a matching price floor for bidResponse`,r),e.call(this,t,r,i);let h=p.data.currency.toUpperCase(),b=r.currency||"USD";if(h===b.toUpperCase())u=r.cpm;else if(r.originalCurrency&&h===r.originalCurrency.toUpperCase())u=r.originalCpm;else try{u=(0,n.getGlobal)().convertCurrency(r.cpm,b.toUpperCase(),h)}catch(n){return(0,o.logError)(`${S}: Unable do get currency conversion for bidResponse to Floor Currency. Do you have Currency module enabled? ${r}`),e.call(this,t,r,i)}if(u=B(u,r,f),a=u,r.floorData={floorValue:m.matchingFloor,floorRule:m.matchingRule,floorRuleValue:m.floorRuleValue,floorCurrency:p.data.currency,cpmAfterAdjustments:a,enforcements:{...p.enforcement},matchedFields:{}},p.data.schema.fields.forEach((e,t)=>{let i=m.matchingData.split(p.data.schema.delimiter)[t];r.floorData.matchedFields[e]=i}),s=!1!==(0,o.deepAccess)(p,"enforcement.enforceJS"),d=!0===(0,o.deepAccess)(p,"enforcement.floorDeals")||!r.dealId,c=r.floorData.cpmAfterAdjustments<m.matchingFloor,s&&c&&d){i(l.REJECTION_REASON.FLOOR_NOT_MET),(0,o.logWarn)(`${S}: ${r.bidderCode}'s Bid Response for ${t} was rejected due to floor not met (adjusted cpm: ${r?.floorData?.cpmAfterAdjustments}, floor: ${m?.matchingFloor})`,r);return}return e.call(this,t,r,i)});function Y(e,t,r){let{currency:i=a.config.getConfig("currency.adServerCurrency")||"USD",mediaType:n="*",size:s="*"}=t;if("function"==typeof e.getFloor){let t;try{t=e.getFloor({currency:i,mediaType:n,size:s})||{}}catch(t){(0,o.logWarn)("Cannot compute floor for bid",e);return}t.floor=parseFloat(t.floor),null!=t.currency&&t.floor&&!isNaN(t.floor)&&r(t.floor,t.currency)}}a.config.getConfig("floors",e=>{var t,r;return t=e.floors,void((x=(0,o.pick)(t,["floorMin","enabled",e=>!1!==e,"auctionDelay",e=>e||0,"floorProvider",e=>(0,o.deepAccess)(t,"data.floorProvider",e),"endpoint",e=>e||{},"skipRate",()=>isNaN((0,o.deepAccess)(t,"data.skipRate"))?t.skipRate||0:t.data.skipRate,"enforcement",e=>(0,o.pick)(e||{},["enforceJS",e=>!1!==e,"enforcePBS",e=>!0===e,"floorDeals",e=>!0===e,"bidAdjustment",e=>!1!==e,"noFloorSignalBidders",e=>e||[]]),"additionalSchemaFields",e=>"object"==typeof e&&Object.keys(e).length>0?void Object.keys(e).forEach(t=>{-1===O.indexOf(t)&&"function"==typeof e[t]&&(O.push(t),k[t]=e[t])}):void 0,"data",e=>e&&F(e,"setConfig")||void 0])).enabled?((r=x.endpoint).url&&!C?"GET"!==(r.method||"GET")?(0,o.logError)(`${S}: 'GET' is the only request method supported at this time!`):(_(r.url,{success:G,error:z},null,{method:"GET"}),C=!0):C&&(0,o.logWarn)(`${S}: A fetch is already occurring. Skipping.`),w||(d.on(l.EVENTS.AUCTION_END,e=>{setTimeout(()=>delete D[e.auctionId],3e3)}),(0,n.getGlobal)().requestBids.before(W,50),(0,c.getHook)("addBidResponse").before(H,(0,o.debugTurnedOn)()?4:50),w=!0)):((0,o.logInfo)(`${S}: Turning off module`),x={},D={},(0,c.getHook)("addBidResponse").getHooks({hook:H}).remove(),(0,n.getGlobal)().requestBids.getHooks({hook:W}).remove(),w=!1))}),(0,f.registerOrtbProcessor)({type:f.IMP,name:"bidfloor",fn:function(e,t,r){Y(t,{currency:r.currency,mediaType:r.mediaType||"*",size:"*"},(t,r)=>{Object.assign(e,{bidfloor:t,bidfloorcur:r})})}}),(0,f.registerOrtbProcessor)({type:f.IMP,name:"extBidfloor",fn:function(e,t,r){function i(t,r){(t!==e.bidfloor||r!==e.bidfloorcur)&&((0,o.deepSetValue)(this,"ext.bidfloor",t),(0,o.deepSetValue)(this,"ext.bidfloorcur",r))}Object.values(A.ALL_MEDIATYPES).filter(t=>null!=e[t]).forEach(n=>{Y(t,{currency:e.bidfloorcur||r?.currency,mediaType:n},i.bind(e[n]))}),(e[A.BANNER]?.format||[]).filter(e=>{let{w:t,h:r}=e;return null!=t&&null!=r}).forEach(n=>{Y(t,{currency:e.bidfloorcur||r?.currency,mediaType:A.BANNER,size:[n.w,n.h]},i.bind(n))})},priority:-10}),(0,f.registerOrtbProcessor)({type:f.IMP,name:"extPrebidFloors",fn:function(e,t,r){if(null!=e.bidfloor){let{floorMinCur:t,floorMin:i}=r.reqContext.floorMin||{};null==t&&(t=e.bidfloorcur);let n=e.ext?.prebid?.floors?.floorMinCur||e.ext?.prebid?.floorMinCur||t,a=e.ext?.prebid?.floors?.floorMin||e.ext?.prebid?.floorMin,s=(0,y.convertCurrency)(e.bidfloor,e.bidfloorcur,t),d=!!a&&!!n&&(0,y.convertCurrency)(a,n,t),l=d&&d<s?d:s;(0,o.deepSetValue)(e,"ext.prebid.floors.floorMin",l),(null==i||i>l)&&(i=l),r.reqContext.floorMin={floorMin:i,floorMinCur:t}}},dialects:[f.PBS],priority:-1}),(0,f.registerOrtbProcessor)({type:f.REQUEST,name:"extPrebidFloors",fn:function(e,t,r){w&&(0,o.deepSetValue)(e,"ext.prebid.floors.enabled",e.ext?.prebid?.floors?.enabled||!1),r?.floorMin&&(0,o.mergeDeep)(e,{ext:{prebid:{floors:r.floorMin}}})},dialects:[f.PBS]}),(0,n.registerModule)("priceFloors")},2703:function(e,t,r){"use strict";let i;var n=r(3800),o=r(7750),a=r(256),s=r(4030),d=r(4321),l=r(836),c=r(8401),u=r(1928),p=r(8256),g=r(8878);let f="PubMatic: ",m,h="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),b=Object.values(g.PREBID_NATIVE_DATA_KEYS_TO_ORTB),y={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:""},v={1:"PMP",5:"PREF",6:"PMPG"},A={banner:360,video:1800,native:1800},I={},E=[],S=[],_=0,T=(0,p.ortbConverter)({context:{netRevenue:!0,ttl:360},imp(e,t,r){let{kadfloor:i,currency:n,adSlot:o="",deals:a,dctr:s,pmzoneid:d,hashedKey:l}=t.params,{adUnitCode:c,mediaTypes:u,rtd:p}=t,g=e(t,r);return g.hasOwnProperty("banner")||g.hasOwnProperty("video")||g.hasOwnProperty("native")?(a&&B(g,a),s&&N(g,s),p?.jwplayer&&k(g,p.jwplayer),g.bidfloor=z("kadfloor",i),g.bidfloorcur=n?z("currency",n):"USD",w(g,t),g.hasOwnProperty("banner")&&x(g.banner,o),g.hasOwnProperty("video")&&P(u?.video,c,g),g.hasOwnProperty("native")&&D(g,u?.native),(g.hasOwnProperty("banner")||g.hasOwnProperty("video"))&&Y(g,c,t?.sizes),d&&(g.ext.pmZoneId=d),R(g,o.trim(),l),C(g),["banner","video","native"].forEach(e=>{g[e]?.battr&&!Array.isArray(g[e].battr)&&delete g[e].battr}),g):null},request(e,t,r,i){let n=e(t,r,i);if(E.length||n.bcat){let e=F([...E||[],...n.bcat||[]]);e.length&&(n.bcat=e)}if(S.length||n.acat){let e=L([...S||[],...n.acat||[]]);e.length&&(n.acat=e)}return j(n),M(n,i?.bidRequests),$(n),(r?.bidderCode?u.bidderSettings.get(r.bidderCode,"allowAlternateBidderCodes"):void 0)&&U(n,r),r?.ortb2?.ext?.prebid?.previousauctioninfo&&(0,o.deepSetValue)(n,"ext.previousAuctionInfo",r.ortb2.ext.prebid.previousauctioninfo),n},bidResponse(e,t,r){let i=e(t,r);i.meta&&(i.meta.mediaType=i.mediaType),V(i,t,r);let{mediaType:n,playerWidth:a,playerHeight:d}=i,{params:l,adUnitCode:c,mediaTypes:u}=r?.bidRequest;if(n===s.VIDEO){i.width||(i.width=a),i.height||(i.height=d);let{context:e,maxduration:t}=u[n];"outstream"===e&&l.outstreamAU&&c&&(i.rendererCode=l.outstreamAU,i.renderer=G.newRenderer(i.rendererCode,c)),q(i,e,t)}if(n===s.NATIVE&&t.adm){try{i.native={ortb:{...JSON.parse(t.adm.replace(/\\/g,"")).native}}}catch(e){(0,o.logWarn)(`${f}Error: Cannot parse native response for ad response: ${t.adm}`);return}i.width=t.w||0,i.height=t.h||0}return i},response:(e,t,r,i)=>e(t,r,i),overrides:{imp:{bidfloor:!1,extBidfloor:!1},bidResponse:{native:!1}}}),O=e=>{let t={};if(e.aspect_ratios&&(0,o.isArray)(e.aspect_ratios)&&e.aspect_ratios.length){let{min_width:r,min_height:i}=e.aspect_ratios[0];(0,o.isInteger)(r)&&(0,o.isInteger)(i)&&(t.wmin=r,t.hmin=i),t.ext={aspectratios:e.aspect_ratios.filter(e=>{let{ratio_width:t,ratio_height:r}=e;return t&&r}).map(e=>{let{ratio_width:t,ratio_height:r}=e;return`${t}:${r}`})}}return t.w=e.w||e.width,t.h=e.h||e.height,e.sizes&&2===e.sizes.length&&(0,o.isInteger)(e.sizes[0])&&(0,o.isInteger)(e.sizes[1])&&(t.w=e.sizes[0],t.h=e.sizes[1],delete t.wmin,delete t.hmin),e.ext&&(t.ext=e.ext),e.mimes&&(t.mimes=e.mimes),t},C=e=>{e.displaymanager||="Prebid.js",e.displaymanagerver||="9.53.2";let t=e.ext?.data?.adserver?.adslot;t&&(e.ext.dfp_ad_unit_code=t),e.ext?.data&&0===Object.keys(e.ext.data).length&&delete e.ext.data},w=(e,t)=>{let r=-1,i=Object.keys(t.mediaTypes),n=i.length>1;"function"!=typeof t.getFloor||d.config.getConfig("pubmatic.disableFloors")||[s.BANNER,s.VIDEO,s.NATIVE].forEach(i=>{!e.hasOwnProperty(i)||((("banner"===i?e[i]?.format?.map(e=>{let{w:t,h:r}=e;return[t,r]}):["*"])||["*"]).forEach(a=>{let d=t.getFloor({currency:e.bidfloorcur,mediaType:i,size:a});if((0,o.logInfo)(f,"floor from floor module returned for mediatype:",i," and size:",a," is: currency",d.currency,"floor",d.floor),(0,o.isPlainObject)(d)&&d?.currency===e.bidfloorcur&&!isNaN(parseInt(d.floor))){let t=parseFloat(d.floor);n&&i!==s.BANNER&&((0,o.logInfo)(f,"floor from floor module returned for mediatype:",i,"is : ",t,"with currency :",e.bidfloorcur),e[i].ext={bidfloor:t,bidfloorcur:e.bidfloorcur}),(0,o.logInfo)(f,"floor from floor module:",t,"previous floor value",r,"Min:",Math.min(t,r)),r=-1===r?t:Math.min(t,r),(0,o.logInfo)(f,"new floor value:",r)}}),n&&i===s.BANNER&&(e[i].ext={bidfloor:r,bidfloorcur:e.bidfloorcur}))}),e.bidfloor&&((0,o.logInfo)(f,"Comparing floors:","from floor module:",r,"impObj.bidfloor:",e.bidfloor,"Max:",Math.max(r,e.bidfloor)),r=Math.max(r,e.bidfloor)),e.bidfloor=r>0?r:m,(0,o.logInfo)(f,"Updated imp.bidfloor:",e.bidfloor),n&&i.forEach(t=>{e[t]?.ext&&e[t].ext.bidfloor===e.bidfloor&&e[t].ext.bidfloorcur===e.bidfloorcur&&delete e[t].ext})},x=(e,t)=>{let r=t.split(":"),i=r[0]?.split("@");i=i?.length==2?i[1].split("x"):3==i.length?i[2].split("x"):[];let n=e.format[0];2!==i.length||0==parseInt(i[0])&&0==parseInt(i[1])?(e.w=n.w,e.h=n.h):(e.w=parseInt(i[0]),e.h=parseInt(i[1])),e.format=e.format.filter(t=>t.w!==e.w||t.h!==e.h),e.format?.length||delete e.format,e.pos??=0},R=(e,t,r)=>{let i=t.split(":")[0].split("@");e.tagid=r||i[0]},D=(e,t)=>{if(t?.ortb||(e.native.request=JSON.stringify((e=>{let t={ver:"1.2",assets:[]};for(let r in e){if(g.NATIVE_KEYS_THAT_ARE_NOT_ASSETS.includes(r))continue;if(!g.NATIVE_KEYS.hasOwnProperty(r)&&!b.includes(r)){(0,o.logWarn)(`${f}: Unrecognized asset: ${r}. Ignored.`);continue}let i=e[r],n=i.required&&(0,o.isBoolean)(i.required)?1:0,a={id:t.assets.length,required:n};r in g.PREBID_NATIVE_DATA_KEYS_TO_ORTB?a.data={type:g.NATIVE_ASSET_TYPES[g.PREBID_NATIVE_DATA_KEYS_TO_ORTB[r]],...i.len&&{len:i.len},...i.ext&&{ext:i.ext}}:"icon"===r||"image"===r?a.img={type:"icon"===r?g.NATIVE_IMAGE_TYPES.ICON:g.NATIVE_IMAGE_TYPES.MAIN,...O(i)}:"title"===r?a.title={len:i.len||140,...i.ext&&{ext:i.ext}}:"ext"===r&&(a.ext=i,delete a.required),t.assets.push(a)}return t})(t))),t?.ortb){let t=JSON.parse(e.native.request),{assets:r}=t;r?.some(e=>e.title||e.img||e.data||e.video)?e.native.request=JSON.stringify({ver:"1.2",...t}):((0,o.logWarn)(`${f}: Native assets object is empty or contains invalid objects`),delete e.native)}},P=(e,t,r)=>{let i=r.video;(0,o.deepAccess)(e,"plcmt")||(0,o.logWarn)("Video.plcmt param missing for "+t),e&&(i.w||i.h)||(delete r.video,(0,o.logWarn)(`${f}Error: Missing ${!e?"video config params":"video size params (playersize or w&h)"} for adunit: ${t} with mediaType set as video. Ignoring video impression in the adunit.`))},k=(e,t)=>{let r=t?.targeting;if(!r||!r.segments?.length)return;let i=`jw-id=${r.content.id}`,n=r.segments.map(e=>`jw-${e}=1`).join("|"),o=`${i}|${n}`;e.ext=e.ext||{},e.ext.key_val=e.ext.key_val?`${e.ext.key_val}|${o}`:o},N=(e,t)=>{(0,o.isStr)(t)&&t.length>0?(t=t.split("|").filter(e=>e.trim().length>0).map(e=>e.trim()).join("|"),e.ext.key_val=t):(0,o.logWarn)(f+"Ignoring param : dctr with value : "+t+", expects string-value, found empty or non-string value")},B=(e,t)=>{(0,o.isArray)(t)?t.forEach(t=>{"string"==typeof t&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):(0,o.logWarn)(`${f}Error: deal-id present in array bid.params.deals should be a string with more than 3 characters length, deal-id ignored: ${t}`)}):(0,o.logWarn)(`${f}Error: bid.params.deals should be an array of strings.`)},U=(e,t)=>{let r=["all"],i=u.bidderSettings.get(t.bidderCode,"allowedAlternateBidderCodes"),n=(0,o.isArray)(i)?i.map(e=>e.trim().toLowerCase()).filter(o.uniques):r;e.ext.marketplace={allowedbidders:n.includes("*")||n.includes("all")?r:[...new Set(["pubmatic",...n.filter(e=>e&&e.trim())])]}},j=e=>{(0,o.deepSetValue)(e,"at",1),(0,o.deepSetValue)(e,"cur",["USD"]),e.test=window.location.href.includes("pubmaticTest=true")?1:void 0,e.source&&!Object.keys(e.source).length&&delete e.source,e.app?.publisher&&(e.app.publisher.id=_)},M=(e,t)=>{let{gender:r,yob:i,pubId:n,refURL:a,kadpageurl:s}=I,{user:d}=e;e.device&&Object.assign(e.device,{js:1,connectiontype:W()}),e.user={...e.user,gender:d?.gender||r?.trim()||m,yob:d?.yob||z("yob",i)};let l=(0,o.deepAccess)(t,"0.userIdAsEids");t.length&&l?.length&&!e.user.ext?.eids&&(e.user.ext=e.user.ext||{},e.user.ext.eids=l),e.site?.publisher&&(e.site.ref=e.site.ref||a,e.site.publisher.id=n?.trim()),e.site?.page&&s&&(e.site.page=s.trim()),e.device.geo&&!e.user.geo?e.user.geo=e.device.geo:e.user.geo&&!e.device.geo&&(e.device.geo=e.user.geo)},V=(e,t,r)=>{let{ortbRequest:i,seatbid:n}=r;if(e.referrer=i.site?.ref||"",e.sspID=e.partnerImpId=t.id||"",e.ad=t.adm,e.pm_dspid=t.ext?.dspid?t.ext.dspid:null,e.pm_seat=n.seat,e.duration=t.dur||t.ext?.video?.duration,e.creativeId||(e.creativeId=t.id),360==e.ttl&&(e.ttl=A[e.mediaType]),t.dealid&&(e.dealChannel=t.ext?.deal_channel?v[t.ext.deal_channel]||null:"PMP"),n.ext?.buyid&&(e.adserverTargeting={hb_buyid_pubmatic:n.ext.buyid}),t.ext?.marketplace&&(e.bidderCode=t.ext.marketplace),t.ext){let{dspid:r,dchain:i,dsa:n,ibv:o}=t.ext;r&&(e.meta.networkId=e.meta.demandSource=r),i&&(e.meta.dchain=i),n&&Object.keys(n).length&&(e.meta.dsa=n),o&&(e.ext=e.ext||{},e.ext.ibv=o,e.meta.mediaType=s.VIDEO)}let o=n.seat||t.ext?.advid;o&&(e.meta.advertiserId=e.meta.agencyId=e.meta.buyerId=o),t?.attr&&Array.isArray(t.attr)&&(e.meta.isInBannerVideo=t.attr.includes(6)),H(t.adomain)&&(e.meta.clickUrl=e.meta.brandId=t.adomain[0]),t.cat&&H(t.cat)&&(e.meta.secondaryCatIds=t.cat,e.meta.primaryCatId=t.cat[0])},$=e=>{let{profId:t,verId:r,wiid:n,transactionId:o}=I;e.ext={epoch:new Date().getTime(),wrapper:{profile:t?parseInt(t):void 0,version:r?parseInt(r):void 0,wiid:n,wv:"prebid_prebid_9.53.2",transactionId:o,wp:"pbjs"},cpmAdjustment:i}},q=(e,t,r)=>{if(!e?.ext?.prebiddealpriority||t!=s.ADPOD)return;let i=e?.ext?.video?.duration||r;e.video={context:s.ADPOD,durationSeconds:i,dealTier:e.ext.prebiddealpriority}},L=e=>[...new Set(e.filter(e=>{if("string"==typeof e)return!0;(0,o.logWarn)(f+"acat: Each category should be a string, ignoring category: "+e)}).map(e=>e.trim()))],F=e=>{let t=(e=e.map(e=>"string"==typeof e?e.trim():e)).filter(e=>"string"!=typeof e||e.length<3);return(0,o.logWarn)(f+"bcat: Each category must be a string with a length greater than 3, ignoring "+t),[...new Set(e.filter(e=>"string"==typeof e&&e.length>=3))]},W=()=>{let e=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection);return({ethernet:1,wifi:2,"slow-2g":4,"2g":4,"3g":5,"4g":6})[e?.effectiveType]||0},G={bootstrapPlayer:function(e){let t={code:e.adUnitCode,vastXml:e.vastXml||null,vastUrl:e.vastUrl||null};if(!t.vastXml&&!t.vastUrl)return void(0,o.logWarn)(`${f}: No vastXml or vastUrl on bid, bailing...`);let r=G.getRendererId("pubmatic",e.rendererCode),i=document.getElementById(e.adUnitCode),n=window.bluebillywig.renderers.find(e=>e._id===r);n?n.bootstrap(t,i):(0,o.logWarn)(`${f}: Couldn't find a renderer with ${r}`)},newRenderer:function(e,t){let r=h.replace("$RENDERER",e),i=l.Renderer.install({url:r,loaded:!1,adUnitCode:t});try{i.setRender(G.outstreamRender)}catch(e){(0,o.logWarn)(`${f}: Error tying to setRender on renderer`,e)}return i},outstreamRender:function(e){e.renderer.push(()=>G.bootstrapPlayer(e))},getRendererId:function(e,t){return`${e}-${t}`}};function z(e,t){return(0,o.isStr)(t)?({pmzoneid:()=>t.split(",").slice(0,50).map(e=>e.trim()).join(),kadfloor:()=>parseFloat(t),lat:()=>parseFloat(t),lon:()=>parseFloat(t),yob:()=>parseInt(t)})[e]?.()||t:(t&&(0,o.logWarn)(f+"Ignoring param key: "+e+", expects string-value, found "+typeof t),m)}function H(e){return!0===(0,o.isArray)(e)&&!!(e.length>0)}let Y=(e,t,r)=>{let i={w:0,h:0};if(e.video?.w>0&&e.video?.h>0)i.w=e.video.w,i.h=e.video.h;else i=r&&r.length?r.reduce((e,t)=>t.h*t.w<e.h*e.w?t:e,r[0]):{w:0,h:0};let n=document.getElementById(t);if(!n)return;let a=(0,c.isViewabilityMeasurable)(n)?(0,c.getViewability)(n,(0,o.getWindowTop)(),i):"na";e.ext||(e.ext={}),e.ext.viewability={amount:isNaN(a)?a:Math.round(a)}},J={code:"pubmatic",gvlid:76,supportedMediaTypes:[s.BANNER,s.VIDEO,s.NATIVE],isBidRequestValid:e=>{if(!(e&&e.params))return!1;let{publisherId:t}=e.params,r=e.mediaTypes||{},i=r[s.VIDEO]||{};if(!(0,o.isStr)(t))return(0,o.logWarn)(f+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(r.hasOwnProperty(s.VIDEO)){let t=(0,o.deepAccess)(e,"mediaTypes.video.mimes"),n=(0,o.deepAccess)(e,"params.video.mimes");if(!H(t)&&!H(n))return(0,o.logWarn)(f+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!i.context)return(0,o.logError)(`${f}: No context specified in bid. Rejecting bid: `,e),!1;if("outstream"===i.context&&!(0,o.isStr)(e.params.outstreamAU)&&!e.renderer&&!i.renderer)return r.hasOwnProperty(s.BANNER)||r.hasOwnProperty(s.NATIVE)?(delete r[s.VIDEO],(0,o.logWarn)(`${f}: for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: `,e),!0):((0,o.logError)(`${f}: for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: `,e),!1)}return!0},buildRequests:(e,t)=>{let r,i,{page:n,ref:a}=t?.refererInfo||{},{publisherId:s,profId:d,verId:l}=t?.bids?.[0]?.params||{};_=s?.trim()||(Array.isArray(i=t?.bids)&&i.length>0&&i.find(e=>e.params?.publisherId?.trim())?.params.publisherId||null)?.trim();let c=(0,o.generateUUID)();E=[],S=[],I={pageURL:n||window.location.href,refURL:a||window.document.referrer,pubId:_,kadpageurl:n||window.location.href,profId:d,verId:l},e.forEach(e=>{var i,n;e.params.wiid=e.params.wiid||t.auctionId||c,i=(r=(0,o.deepClone)(e)).params,n=I,Object.keys(y).forEach(e=>{let t=i[e];t&&((0,o.isStr)(t)?n[e]=t:(0,o.logWarn)(`${f}Ignoring param: ${e} with value: ${y[e]}, expects string value, found ${typeof t}`))}),I.transactionId=r.ortb2Imp?.ext?.tid;let{bcat:a,acat:s}=r.params;a&&(E=E.concat(a)),s&&(S=S.concat(s))});let u=T.toORTB({validBidRequests:e,bidderRequest:t});return u?.imp?.length?{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:u,bidderRequest:t,options:{endpointCompression:!1}}:null},interpretResponse:(e,t)=>{let{bids:r}=T.fromORTB({response:e.body,request:t.data}),i=(0,o.deepAccess)(e.body,"ext.fledge_auction_configs");return i?{bids:r,paapi:Object.entries(i).map(e=>{let[t,r]=e;return{bidId:t,config:{auctionSignals:{},...r}}})}:r},getUserSyncs:(e,t,r,i,n)=>{let o=_;r&&(o+=`&gdpr=${+!!r.gdprApplies}&gdpr_consent=${encodeURIComponent(r.consentString||"")}`),i&&(o+=`&us_privacy=${encodeURIComponent(i)}`),n?.gppString&&n?.applicableSections?.length&&(o+=`&gpp=${encodeURIComponent(n.gppString)}&gpp_sid=${encodeURIComponent(n.applicableSections.join(","))}`),!0===d.config.getConfig("coppa")&&(o+="&coppa=1");let a=e.iframeEnabled?"iframe":"image",s=("iframe"===a?"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p=":"https://image8.pubmatic.com/AdServer/ImgSync?p=")+o;return[{type:a,url:s}]},onBidWon:e=>{!function(e){if(!e)return;let{originalCurrency:t,currency:r,cpm:n,originalCpm:a,meta:s}=e,d=t!==r&&(0,o.isFn)(e.getCpmInNewCurrency)?e.getCpmInNewCurrency(t):n,l=e.mediaType,c=s?.mediaType;i=i||{currency:r,originalCurrency:t,adjustment:[]};let u={cpmAdjustment:Number(((a-d)/a).toFixed(2)),mediaType:l,metaMediaType:c,cpm:d,originalCpm:a},p=i?.adjustment?.findIndex(e=>e?.mediaType===l&&e?.metaMediaType===c);-1!==p?i.adjustment.splice(p,1,u):i.adjustment.push(u)}(e)}};(0,a.registerBidder)(J),(0,n.registerModule)("pubmaticBidAdapter")},6985:function(e,t,r){"use strict";let i,n,o,a;var s=r(3800),d=r(4321),l=r(1620),c=r(7750),u=y(r(2506)),p=r(8878),g=y(r(6553)),f=r(7557),m=r(3029),h=r(4767),b=r(4558);function y(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(y=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let v=(0,r(8839).activityParamsBuilder)(e=>g.default.resolveAlias(e)),A=[],I=[],E=[],S=(o=!1,function(){o||(Object.entries({[p.EVENTS.AUCTION_INIT]:["onAuctionInitEvent"],[p.EVENTS.AUCTION_END]:["onAuctionEndEvent",C],[p.EVENTS.BID_RESPONSE]:["onBidResponseEvent"],[p.EVENTS.BID_REQUESTED]:["onBidRequestEvent"],[p.EVENTS.BID_ACCEPTED]:["onBidAcceptedEvent"]}).forEach(e=>{let[t,[r,i]]=e;u.on(t,e=>{i&&i(e),I.forEach(t=>{try{t[r]&&t[r](e,t.config,n)}catch(e){(0,c.logError)(`RTD provider '${t.name}': error in '${r}':`,e)}})})}),o=!0)});function _(){return{gdpr:g.gdprDataHandler.getConsentData(),usp:g.uspDataHandler.getConsentData(),gpp:g.gppDataHandler.getConsentData(),coppa:!!d.config.getConfig("coppa")}}function T(){n=_();let e=[];E.forEach(t=>{let r=(A||[]).find(e=>e.name===t.name);r&&r.init&&r.init(t,n)&&e.push(Object.assign(r,{config:t}))}),I=e,(0,c.logInfo)(`Real time data module enabled, using submodules: ${I.map(e=>e.name).join(", ")}`)}let O=(0,f.timedAuctionHook)("rtd",function(e,t){let r;n=_();let o=[],a=[];I.forEach(e=>{if("function"!=typeof e.getBidRequestData)return;o.push(e);let t=e.config;t&&t.waitForIt&&a.push(e)});let s=a.length&&i?.auctionDelay>0,d=a.length,l=!1,c=[];if(!o.length)return g();let u=s?i.auctionDelay:0;function p(){l||(this.config&&this.config.waitForIt&&d--,0===d&&setTimeout(g,0))}function g(){l||(l=!0,clearTimeout(r),c.forEach(e=>e()),e.call(this,t))}r=setTimeout(g,u),o.forEach(e=>{let r=(0,b.guardOrtb2Fragments)(t.ortb2Fragments||{},v(h.MODULE_TYPE_RTD,e.name));c.push(r.verify),t.ortb2Fragments=r.obj,e.getBidRequestData(t,p.bind(e),e.config,n,u)})});function C(e){let t=I.filter(e=>"function"==typeof e.getTargetingData);if(!t.length)return;let r=e.adUnitCodes;if(!r)return;let i=[];for(let o=t.length-1;o>=0;o--){let a=t[o].getTargetingData(r,t[o].config,n,e);a&&"object"==typeof a?i.push(a):(0,c.logWarn)("invalid getTargetingData response for sub module",t[o].name)}let o=(0,c.mergeDeep)({},...i);return e.adUnits.forEach(e=>{let t=e.code&&o[e.code];t&&((0,c.logInfo)("RTD set ad unit targeting of",t,"for",e),e[p.JSON_MAPPING.ADSERVER_TARGETING]=Object.assign(e[p.JSON_MAPPING.ADSERVER_TARGETING]||{},t))}),e.adUnits}function w(e){I.forEach(e=>{if("function"==typeof e.onDataDeletionRequest)try{e.onDataDeletionRequest(e.config)}catch(t){(0,c.logError)(`Error executing ${e.name}.onDataDeletionRequest`,t)}});for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];e.apply(this,r)}(0,l.module)("realTimeData",function(e){return A.push(e),m.GDPR_GVLIDS.register(h.MODULE_TYPE_RTD,e.name,e.gvlid),function(){let t=A.indexOf(e);t>=0&&(A.splice(t,1),T())}}),a=d.config.getConfig("realTimeData",e=>{let{realTimeData:t}=e;t.dataProviders?(a(),i=t,E=t.dataProviders,S(),(0,l.getHook)("startAuction").before(O,20),g.default.callDataDeletionRequest.before(w),T()):(0,c.logError)("missing parameters for real time module")}),(0,s.registerModule)("rtdModule")},7482:function(e,t,r){"use strict";var i=r(3800),n=r(8256),o=r(5253),a=r(256),s=r(4321),d=r(4030),l=r(836),c=r(7750),u=r(5743),p=m(r(2506)),g=r(8878),f=r(2473);function m(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(m=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let h=s.config.getConfig("rubicon")||{};s.config.getConfig("rubicon",e=>{(0,c.mergeDeep)(h,e.rubicon)});let b={};var y={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",484:"720x1280",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160",632:"1200x450",634:"340x450",680:"970x570",682:"300x240",684:"970x550",686:"300x210",688:"300x220",690:"970x170",710:"600x250",712:"340x430"};(0,c._each)(y,(e,t)=>y[e]=t);let v=(0,n.ortbConverter)({request(e,t,r,n){var o,a,d;let l,p,{bidRequests:g}=n,f=e(t,r,n);f.cur=["USD"],f.test=+!!s.config.getConfig("debug"),(0,c.deepSetValue)(f,"ext.prebid.cache",{vastxml:{returnCreative:!0===h.returnVast}}),(0,c.deepSetValue)(f,"ext.prebid.bidders",{rubicon:{integration:h.int_type||"pbjs"}}),(0,c.deepSetValue)(f,"ext.prebid.targeting.pricegranularity",function(e){return{ranges:({low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets})[e.getConfig("priceGranularity")]}}(s.config));let m=(0,i.getGlobal)().installedModules;return m&&(!m.length||-1!==m.indexOf("rubiconAnalyticsAdapter"))&&(0,c.deepSetValue)(f,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),o=f,a=g,d=r.ortb2,l={},p=(0,u.getAllOrtbKeywords)(d,...a.map(e=>e.params.keywords)),a.forEach(e=>{let t={user:{ext:{data:{...e.params.visitor}}},site:{ext:{data:{...e.params.inventory}}}},r=o.imp.find(e=>e.ext?.prebid?.bidder?.rubicon?.video?.language);r&&(t.site.content={language:r.ext?.prebid?.bidder?.rubicon?.video?.language}),l=(0,c.mergeDeep)(l,e.ortb2||{},t);let i=s.config.getConfig("user.id");l.user.id=l.user.id||i}),(0,c.mergeDeep)(o,l),p&&p.length&&(0,c.deepSetValue)(o,"site.keywords",p.join(",")),delete o?.ext?.prebid?.storedrequest,delete f?.ext?.prebid?.storedrequest,!0===h.disableFloors&&delete f.ext.prebid.floors,g.filter(e=>"object"==typeof e.floorData).length>0&&(f.ext.prebid.floors={enabled:!1}),f},imp(e,t,r){let i=T(t);if(i.includes(d.BANNER)&&1==i.length)return;let n=e(t,r);return n.id=t.adUnitCode,delete n.banner,"atf"===t.params.position&&n.video&&(n.video.pos=1),"btf"===t.params.position&&n.video&&(n.video.pos=3),delete n.ext?.prebid?.storedrequest,!0===t.params.bidonmultiformat&&i.length>1&&(0,c.deepSetValue)(n,"ext.prebid.bidder.rubicon.formats",i),function(e,t){if("USD"!=t.bidfloorcur&&(delete t.bidfloor,delete t.bidfloorcur),!t.bidfloor){let r=parseFloat((0,c.deepAccess)(e,"params.floor"));isNaN(r)||(t.bidfloor=r,t.bidfloorcur="USD")}}(t,n),n.id=b[n.id]?n.id+b[n.id]++:(b[n.id]=2,n.id),n},bidResponse(e,t,r){let i=e(t,r);i.meta.mediaType=(0,c.deepAccess)(t,"ext.prebid.type");let{bidRequest:n}=r,[o,a]=n.mediaTypes.video?.context==="outstream"?E(n,d.VIDEO):[void 0,void 0];return i.width=t.w||o||i.playerWidth||0,i.height=t.h||a||i.playerHeight||0,i.mediaType===d.VIDEO&&"outstream"===n.mediaTypes.video.context&&(i.renderer=function(e){let t=l.Renderer.install({id:e.adId,url:h.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:h.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(I)}catch(e){(0,c.logWarn)("Prebid Error calling setRender on renderer",e)}return t}(i)),(0,c.deepAccess)(t,"ext.bidder.rp.advid")&&(0,c.deepSetValue)(i,"meta.advertiserId",t.ext.bidder.rp.advid),i},context:{netRevenue:!1!==h.netRevenue,ttl:360},processors:o.pbsExtensions}),A={code:"rubicon",gvlid:52,supportedMediaTypes:[d.BANNER,d.VIDEO,d.NATIVE],isBidRequestValid:function(e){let t=!0;if("object"!=typeof e.params)return!1;for(let t=0,r=["accountId","siteId","zoneId"];t<r.length;t++)if(e.params[r[t]]=parseInt(e.params[r[t]]),isNaN(e.params[r[t]]))return(0,c.logError)("Rubicon: wrong format of accountId or siteId or zoneId."),!1;let r=T(e,!0);if(!r.length)return!1;r.includes(d.VIDEO)&&(t=function(e){let t=!0,r=Object.prototype.toString.call([]);var i={mimes:r,protocols:r,linearity:Object.prototype.toString.call(0)};return Object.keys(i).forEach(function(r){Object.prototype.toString.call((0,c.deepAccess)(e,"mediaTypes.video."+r))!==i[r]&&(t=!1,(0,c.logError)("Rubicon: mediaTypes.video."+r+" is required and must be of type: "+i[r]))}),t}(e));let i=[d.BANNER,d.NATIVE].filter(e=>r.includes(e)).length>0;return i?t&&i:t},buildRequests:function(e,t){let r,i=[],n=[];if((r=e.filter(e=>{let t=T(e)||[],{length:r}=t,{bidonmultiformat:i,video:n}=e.params||{};return 1===r&&(t.includes(d.VIDEO)||t.includes(d.NATIVE))||2===r&&!t.includes(d.BANNER)||n&&t.includes(d.VIDEO)||i&&(t.includes(d.VIDEO)||t.includes(d.NATIVE))}))&&r.length){let e=v.toORTB({bidRequests:r,bidderRequest:t});O(),n.push({method:"POST",url:`https://${h.videoHost||"prebid-server"}.rubiconproject.com/openrtb2/auction`,data:e,bidRequest:r})}let o=e.filter(e=>{let t=T(e)||[],{bidonmultiformat:r,video:i}=e.params||{};return t.includes(d.BANNER)&&(1===t.length||r||!r&&!i||!r&&i&&!t.includes(d.VIDEO))});if(!0!==h.singleRequest)i=n.concat(o.map(e=>{let r=A.createSlotParams(e,t);return{method:"GET",url:`https://${h.bannerHost||"fastlane"}.rubiconproject.com/a/api/fastlane.json`,data:A.getOrderedParams(r).reduce((e,t)=>{let i=r[t];return(0,c.isStr)(i)&&""!==i||(0,c.isNumber)(i)?`${e}${w(t,i)}&`:e},"")+`slots=1&rand=${Math.random()}`,bidRequest:e}}));else{let e=o.reduce((e,t)=>((e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e),{});i=n.concat(Object.keys(e).reduce((r,i)=>{var n,o;return(n=e[i],o=10,n.map((e,t)=>t%10==0?n.slice(t,t+10):null).filter(e=>e)).forEach(e=>{let i=A.combineSlotUrlParams(e.map(e=>A.createSlotParams(e,t)));r.push({method:"GET",url:`https://${h.bannerHost||"fastlane"}.rubiconproject.com/a/api/fastlane.json`,data:A.getOrderedParams(i).reduce((e,t)=>{let r=i[t];return(0,c.isStr)(r)&&""!==r||(0,c.isNumber)(r)?`${e}${w(t,r)}&`:e},"")+`slots=${e.length}&rand=${Math.random()}`,bidRequest:e})}),r},[]))}return i},getOrderedParams:function(e){let t=/^tg_v/,r=/^tg_i/,i=/^eid_|^tpid_/,n=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","gpp","gpp_sid","rp_schain"].concat(Object.keys(e).filter(e=>i.test(e))).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter(e=>t.test(e))).concat(Object.keys(e).filter(e=>r.test(e))).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","o_ae","o_cdep","rp_floor","rp_secure","tk_user_key"]);return n.concat(Object.keys(e).filter(e=>-1===n.indexOf(e)))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];let t=e.reduce(function(t,r,i){return Object.keys(r).forEach(function(n){t.hasOwnProperty(n)||(t[n]=Array(e.length)),t[n].splice(i,1,r[n])}),t},{}),r=RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach(function(e){let i=t[e].join(";"),n=i.match(r);t[e]=n?n[1]:i}),t},createSlotParams:function(e,t){var r,i;let n;e.startTime=new Date().getTime();let o=e.params,a=E(e,"banner"),[l,u]=o.latLong||[],p={account_id:o.accountId,site_id:o.siteId,zone_id:o.zoneId,size_id:a[0],alt_size_ids:a.slice(1).join(",")||void 0,rp_floor:(o.floor=parseFloat(o.floor))>=.01?o.floor:void 0,rp_secure:"1",tk_flint:`${h.int_type||"pbjs_lite"}_v9.53.2`,"x_source.tid":t.ortb2?.source?.tid,"x_imp.ext.tid":e.ortb2Imp?.ext?.tid,l_pb_bid_id:e.bidId,o_cdep:e.ortb2?.device?.ext?.cdep,ip:e.ortb2?.device?.ip,ipv6:e.ortb2?.device?.ipv6,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:o.userId,"p_geo.latitude":isNaN(parseFloat(l))?void 0:parseFloat(l).toFixed(4),"p_geo.longitude":isNaN(parseFloat(u))?void 0:parseFloat(u).toFixed(4),"tg_fl.eid":e.code,rf:(r=e,i=t,n=r.params.referrer?r.params.referrer:i.refererInfo.page,r.params.secure?n.replace(/^http:/i,"https:"):n)};if("function"==typeof e.getFloor&&!h.disableFloors){let t;try{t=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){(0,c.logError)("Rubicon: getFloor threw an error: ",e)}p.rp_hard_floor=(0,c.isPlainObject)(t)&&"USD"===t.currency&&!isNaN(parseInt(t.floor))?t.floor:void 0}!0===o.bidonmultiformat&&(0,c.deepAccess)(e,"mediaTypes")&&Object.keys(e.mediaTypes).length>1&&(p.p_formats=Object.keys(e.mediaTypes).join(","));let g={1:"atf",3:"btf"}[(0,c.deepAccess)(e,"mediaTypes.banner.pos")]||"";p.p_pos="atf"===o.position||"btf"===o.position?o.position:g;let f=s.config.getConfig("user.id");return f&&(p.ppuid=f),e?.ortb2Imp?.ext?.ae&&(p.o_ae=1),"number"==typeof e?.ortb2?.site?.mobile&&(p["p_site.mobile"]=e.ortb2.site.mobile),function(e,t){if(!1===h.readTopics)return;let r=[1,2,5,6,7,507].concat(h.sendSiteSegtax?.map(e=>Number(e))||[]),i=[4,508].concat(h.sendUserSegtax?.map(e=>Number(e))||[]),n=e.ortb2?.user?.data||[],o=e.ortb2?.site?.content?.data||[];n.forEach(S(t,"v",i)),o.forEach(S(t,"i",r))}(t,p),e?.ortb2?.user?.ext?.eids&&e.ortb2.user.ext.eids.forEach(e=>{let{source:t,uids:r=[],inserter:i,matcher:n,mm:o,ext:a={}}=e;try{let e=r[0];if(!e)return;let a=[e.id,e.atype||"","",i||"",n||"",o||"",e?.ext?.rtiPartner||e?.ext?.rtipartner||""].join("^");if(p[`eid_${t}`]=a,!p.ppuid){let e=r.find(e=>e.ext?.stype==="ppuid");e?.id&&(p.ppuid=e.id)}}catch(e){(0,c.logWarn)("Rubicon: error reading eid:",{source:t,uids:r},e)}}),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(p.gdpr=Number(t.gdprConsent.gdprApplies)),p.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(p.us_privacy=encodeURIComponent(t.uspConsent)),t.gppConsent?.gppString&&(p.gpp=t.gppConsent.gppString,p.gpp_sid=t.gppConsent?.applicableSections?.toString()),p.rp_maxbids=t.bidLimit,function(e,t,r){let i={user:{ext:{data:{...e.params.visitor}}},site:{ext:{data:{...e.params.inventory}}}};e.params.keywords&&(i.site.keywords=(0,c.isArray)(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);let n=(0,c.mergeDeep)({},e.ortb2||{},i),o=(0,c.deepAccess)(e.ortb2Imp,"ext")||{},a=(0,c.deepAccess)(e.ortb2Imp,"ext.data")||{},s=(0,c.deepAccess)(e,"ortb2Imp.ext.gpid"),l=(0,c.deepAccess)(n,"regs.ext.dsa"),u={user:[4],site:[1,2,5,6,7]},p={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},g=function(e,t,r){if("data"===t&&Array.isArray(e))return e.filter(e=>e.segment&&(0,c.deepAccess)(e,"ext.segtax")&&u[r]&&-1!==u[r].indexOf((0,c.deepAccess)(e,"ext.segtax"))).map(e=>{let t=e.segment.filter(e=>e.id).reduce((e,t)=>(e.push(t.id),e),[]);if(t.length>0)return t.toString()}).toString();if(("object"!=typeof e||Array.isArray(e))&&void 0!==e)return Array.isArray(e)?e.filter(e=>{if("object"!=typeof e&&void 0!==e)return e.toString();(0,c.logWarn)("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")}).toString():e.toString()},f=function(e,t,i){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],o=g(e,i,t),a=p[i]&&n?`${p[i]}`:"data"===i?`${p[t]}iab`:`${p[t]}${i}`;r[a]=r[a]?r[a].concat(",",o):o};if(t===d.BANNER){["site","user"].forEach(e=>{Object.keys(n[e]).forEach(t=>{"site"===e&&"content"===t&&n[e][t].data?f(n[e][t].data,e,"data"):"ext"!==t?f(n[e][t],e,t):n[e][t].data&&Object.keys(n[e].ext.data).forEach(t=>{f(n[e].ext.data[t],e,t,!1)})})}),Object.keys(a).forEach(e=>{"adserver"!==e?f(a[e],"site",e):"gam"===a[e].name&&f(a[e].adslot,name,e)}),s&&(r.p_gpid=s),l&&Object.keys(l).length&&(0,c.pick)(l,["dsainfo",e=>r.dsainfo=e,"dsarequired",e=>r.dsarequired=e,"pubrender",e=>r.dsapubrender=e,"datatopub",e=>r.dsadatatopubs=e,"transparency",e=>{Array.isArray(e)&&e.length&&(r.dsatransparency=e.reduce((e,t)=>{let r=t.domain||"";if(!r)return e;let i=t.dsaparams||t.params;return Array.isArray(i)&&0!==i.length?(e&&(e+="~~"),e+`${r}~${i.join("_")}`):e},""))}]),r["tg_i.pbadslot"]&&delete r["tg_i.dfp_ad_unit_code"];let e=(0,c.deepAccess)(n,"device.sua");e&&!1!==h.chEnabled&&(0,c.pick)(e,["architecture",e=>r.m_ch_arch=e,"bitness",e=>r.m_ch_bitness=e,"browsers",e=>{if(!Array.isArray(e))return;let[t,i]=e.reduce((e,t)=>(e[0].push(`"${t?.brand}"|v="${t?.version?.[0]}"`),t?.version?.length>1&&e[1].push(`"${t?.brand}"|v="${t?.version?.join?.(".")}"`),e),[[],[]]);r.m_ch_ua=t?.join?.(","),r.m_ch_full_ver=i?.join?.(",")},"mobile",e=>r.m_ch_mobile=`?${e}`,"model",e=>r.m_ch_model=e,"platform",e=>{r.m_ch_platform=e?.brand,r.m_ch_platform_ver=e?.version?.join?.(".")}])}else Object.keys(o).length&&(0,c.mergeDeep)(r.imp[0].ext,o),s&&(r.imp[0].ext.gpid=s),(0,c.mergeDeep)(r,n)}(e,d.BANNER,p),!0===s.config.getConfig("coppa")&&(p.coppa=1),e.schain&&C(e.schain)&&(p.rp_schain=A.serializeSupplyChain(e.schain)),p},serializeSupplyChain:function(e){if(!C(e))return"";let{ver:t,complete:r,nodes:i}=e;return`${t},${r}!${A.serializeSupplyChainNodes(i)}`},serializeSupplyChainNodes:function(e){let t=["asi","sid","hp","rid","name","domain"];return e.map(e=>t.map(t=>encodeURIComponent(e[t]||"")).join(",")).join("!")},interpretResponse:function(e,t){let r;e=e.body;let{data:i}=t;if(!e||"object"!=typeof e)return[];if(e.seatbid){let t=(0,c.deepAccess)(e,"ext.errors.rubicon");return Array.isArray(t)&&t.length>0&&(0,c.logWarn)("Rubicon: Error in video response"),v.fromORTB({request:i,response:e}).bids}let n=e.ads,o=0,{bidRequest:a,url:s}=t;if(s?.includes("fastlane")){let t=e?.error_code||(0,c.deepAccess)(n,"0.error_code"),r=a?.adUnitCode;t&&r&&p.emit(g.EVENTS.RUBICON_BID_ERROR,{errorCode:t,adUnitCode:r})}if("object"==typeof a&&!Array.isArray(a)&&T(a).includes(d.VIDEO)&&"object"==typeof n&&(n=n[a.adUnitCode]),!Array.isArray(n)||n.length<1)return[];let l=n.reduce((t,i,n)=>{if(i.impression_id&&r===i.impression_id?o++:r=i.impression_id,"ok"!==i.status)return t;let s=Array.isArray(a)?a[n-o]:a;if(s&&"object"==typeof s){var l,u;let e={requestId:s.bidId,currency:"USD",creativeId:i.creative_id||`${i.network||""}-${i.advertiser||""}`,cpm:i.cpm||0,dealId:i.deal,ttl:360,netRevenue:!1!==h.netRevenue,rubicon:{advertiserId:i.advertiser,networkId:i.network},meta:{advertiserId:i.advertiser,networkId:i.network,mediaType:d.BANNER}};i.creative_type&&(e.mediaType=i.creative_type),i.dsa&&Object.keys(i.dsa).length&&(e.meta.dsa=i.dsa),i.adomain&&(e.meta.advertiserDomains=Array.isArray(i.adomain)?i.adomain:[i.adomain]),i.emulated_format&&(e.meta.mediaType=i.emulated_format),i.creative_type===d.VIDEO?(e.width=s.params.video.playerWidth,e.height=s.params.video.playerHeight,e.vastUrl=i.creative_depot_url,e.impression_id=i.impression_id,e.videoCacheKey=i.impression_id):(l=i.script,u=i.impression_id,e.ad=`<html>
<head><script type='text/javascript'>inDapIF=true;</script></head>
<body style='margin : 0; padding: 0;'>
<!-- Rubicon Project Ad Tag -->
<div data-rp-impression-id='${u}'>
<script type='text/javascript'>${l}</script>
</div>
</body>
</html>`,[e.width,e.height]=y[i.size_id].split("x").map(e=>Number(e))),e.rubiconTargeting=(Array.isArray(i.targeting)?i.targeting:[]).reduce((e,t)=>(e[t.key]=t.values[0],e),{rpfl_elemid:s.adUnitCode}),t.push(e)}else(0,c.logError)(`Rubicon: bidRequest undefined at index position:${n}`,a,e);return t},[]).sort((e,t)=>(t.cpm||0)-(e.cpm||0)),u=e.component_auction_config?.map(e=>({config:e,bidId:e.bidId}));return u?{bids:l,paapi:u}:l},getUserSyncs:function(e,t,r,i,n){if(!x&&e.iframeEnabled){let e=(0,f.getUserSyncParams)(r,i,n);return e=Object.keys(e).length?`?${(0,c.formatQS)(e)}`:"",x=!0,{type:"iframe",url:`https://${h.syncHost||"eus"}.rubiconproject.com/usync.html`+e}}}};function I(e){let t,r,i,n=document.getElementById(e.adUnitCode);(t=n.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),(i=(r=n.querySelector("script[id^='sas_script']"))&&r.nextSibling)&&"iframe"===i.localName&&i.style.setProperty("display","none");let o={align:"center",position:"append",closeButton:!1,label:void 0,collapse:!0,...e.renderer.getConfig()};e.renderer.push(()=>{window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:`#${e.adUnitCode}`,align:o.align,position:o.position},closeButton:o.closeButton,label:o.label,collapse:o.collapse})})}function E(e,t){let r=e.params;if(t===d.VIDEO){let t=[];return r.video&&r.video.playerWidth&&r.video.playerHeight?t=[r.video.playerWidth,r.video.playerHeight]:Array.isArray((0,c.deepAccess)(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?t=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(t=e.sizes[0]),t}let i=[];return Array.isArray(r.sizes)?i=r.sizes:void 0!==(0,c.deepAccess)(e,"mediaTypes.banner.sizes")?i=_(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?i=_(e.sizes):(0,c.logWarn)("Rubicon: no sizes are setup or found"),function(e){let t=[15,2,9];return e.sort((e,r)=>{let i=t.indexOf(e),n=t.indexOf(r);return i>-1||n>-1?-1===i?1:-1===n?-1:i-n:e-r})}(i)}function S(e,t,r){return i=>{let n=Number(i.ext?.segtax);r.includes(n)&&(e[`tg_${t}.tax${n}`]=i.segment?.map(e=>e.id).join(","))}}function _(e){return(0,c.parseSizesInput)(e).reduce((e,t)=>{let r=parseInt(y[t],10);return r&&e.push(r),e},[])}function T(e){var t;let r,i,n,o,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=[];if(t=e,r=void 0!==(0,c.deepAccess)(t,`mediaTypes.${d.VIDEO}`),i=void 0!==(0,c.deepAccess)(t,`mediaTypes.${d.BANNER}`),n=void 0!==(0,c.deepAccess)(t,"params.bidonmultiformat"),o="object"!=typeof(0,c.deepAccess)(t,"params.video"),r&&n||(i&&o&&(r=!1),r&&o&&(0,c.deepSetValue)(t,"params.video",{}),r)){if(-1===["outstream","instream"].indexOf((0,c.deepAccess)(e,`mediaTypes.${d.VIDEO}.context`)))return a&&(0,c.logError)("Rubicon: mediaTypes.video.context must be outstream or instream"),s;if(E(e,d.VIDEO).length<2)return a&&(0,c.logError)("Rubicon: could not determine the playerSize of the video"),s;a&&(0,c.logMessage)("Rubicon: making video request for adUnit",e.adUnitCode),s.push(d.VIDEO)}if(void 0!==(0,c.deepAccess)(e,`mediaTypes.${d.NATIVE}`)&&s.push(d.NATIVE),void 0!==(0,c.deepAccess)(e,`mediaTypes.${d.BANNER}`)){if(0===E(e,d.BANNER).length)return a&&(0,c.logError)("Rubicon: could not determine the sizes for banner request"),s;a&&(0,c.logMessage)("Rubicon: making banner request for adUnit",e.adUnitCode),s.push(d.BANNER)}return s}let O=()=>b={};function C(e){let t=!1,r=["asi","sid","hp"];return e.nodes&&((t=e.nodes.reduce((e,t)=>e?r.every(e=>t.hasOwnProperty(e)):e,!0))||(0,c.logError)("Rubicon: required schain params missing")),t}function w(e,t){return"rp_schain"===e?`rp_schain=${t}`:`${e}=${encodeURIComponent(t)}`}var x=!1;(0,a.registerBidder)(A),(0,i.registerModule)("rubiconBidAdapter")},5016:function(e,t,r){"use strict";var i=r(5824),n=r(3800),o=r(4321),a=i(r(6553)),s=r(7750),d=r(5177);let l={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},c=[];function u(e,t){let r=o.config.getConfig("schain"),i=o.config.getBidderConfig();t.forEach(e=>{let t=e.bidderCode,n=i[t]&&i[t].schain||r;e.bids.forEach(e=>{let t=function(e,t){var r;let i=l.STRICT;if(void 0!==(r=e)&&((0,s.isPlainObject)(r)||((0,s.logError)("Invalid schain object found: the following schain config will not be used as schain is not an object.",r),0)))return((0,s.isStr)(e.validation)&&-1!=c.indexOf(e.validation)&&(i=e.validation),i===l.OFF)?e.config:(e.config,l.STRICT,e.config);return null}(n,0);t&&(e.schain=(0,s.deepClone)(t))})}),e(t)}(0,s._each)(l,e=>c.push(e));a.default.makeBidRequests.after(u),(0,d.registerOrtbProcessor)({type:d.REQUEST,name:"sourceExtSchain",fn:function(e,t,r){if(!(0,s.deepAccess)(e,"source.ext.schain")){let t=(0,s.deepAccess)(r,"bidRequests.0.schain");t&&(0,s.deepSetValue)(e,"source.ext.schain",t)}}}),(0,n.registerModule)("schain")},803:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(1620),a=r(9287),s=r(3029),d=r(4767),l=r(9246);let c=(0,a.getStorageManager)({moduleType:d.MODULE_TYPE_UID,moduleName:"sharedId"}),u="cookie",p="html5",g="_pubcid_optout",f="PublisherCommonId";function m(e,t){if(t===u)return c.getCookie(e);if(t===p&&c.hasLocalStorage()){let t=c.getDataFromLocalStorage(`${e}_exp`);if(!t||new Date(t).getTime()-Date.now()>0)return c.getDataFromLocalStorage(e)}}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;if(!e)return;let i=(0,n.parseUrl)(e);i.search.id=encodeURIComponent("pubcid:"+t);let o=(0,n.buildUrl)(i);return function(){(0,n.triggerPixel)(o,r)}}function b(){return!!(c.cookiesAreEnabled()&&m(g,u)||c.hasLocalStorage()&&m(g,p))}let y={name:"sharedId",aliasName:"pubCommonId",gvlid:s.VENDORLESS_GVLID,decode:(e,t)=>b()?void(0,n.logInfo)("PubCommonId decode: Has opted-out"):((0,n.logInfo)(" Decoded value PubCommonId "+e),{pubcid:e}),getId:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(b())return void(0,n.logInfo)("PubCommonId: Has opted-out");if(r?.coppa)return void(0,n.logInfo)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");let{params:{create:o=!0,pixelUrl:a}={}}=t,s=i;if(!s){try{"object"==typeof window[f]&&(s=window[f].getId())}catch(e){}s||(s=o&&(0,n.hasDeviceAccess)()?(0,n.generateUUID)():void 0)}return{id:s,callback:(e=s,function(t,r){a?h(a,e,()=>{t(r()||e)})():t(e)})}},extendId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if(b())return(0,n.logInfo)("PubCommonId: Has opted-out"),{id:void 0};if(t?.coppa)return void(0,n.logInfo)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");let{params:{extend:i=!1,pixelUrl:o}={}}=e;if(i)if(o)return{callback:h(o,r)};else return{id:r}},domainOverride:(0,l.domainOverrideToRootDomain)(c,"sharedId"),eids:{pubcid(e,t){let r={source:"pubcid.org",uids:e.map(e=>({id:e,atype:1}))};return t?.params?.inserter!=null&&(r.inserter=t.params.inserter),r}}};(0,o.submodule)("userId",y),(0,i.registerModule)("sharedIdSystem")},3252:function(e,t,r){"use strict";var i=r(3800),n=r(4030),o=r(4321),a=r(8256),s=r(2335),d=r(256),l=r(7750);let c={},u=null,p=function(){return window.location.protocol},g=(0,a.ortbConverter)({context:{netRevenue:!0,ttl:360}}),f={code:"sharethrough",supportedMediaTypes:[n.VIDEO,n.BANNER,n.NATIVE],gvlid:80,isBidRequestValid:e=>!!e.params.pkey,buildRequests:(e,t)=>{var r,i;let n=t.timeout,a=t.ortb2||{},d=0>p().indexOf("http")||p().indexOf("https")>-1,f={id:(0,l.generateUUID)(),at:1,cur:["USD"],tmax:n,site:{domain:(0,l.deepAccess)(t,"refererInfo.domain",window.location.hostname),page:(0,l.deepAccess)(t,"refererInfo.page",window.location.href),ref:(0,l.deepAccess)(t,"refererInfo.ref"),...a.site},device:{ua:navigator.userAgent,language:navigator.language,js:1,dnt:0,h:window.screen.height,w:window.screen.width,ext:{}},regs:{coppa:+(!0===o.config.getConfig("coppa")),ext:{}},source:{tid:t.ortb2?.source?.tid,ext:{version:"9.53.2",str:"4.3.0",schain:e[0].schain}},bcat:(0,l.deepAccess)(t.ortb2,"bcat")||e[0].params.bcat||[],badv:(0,l.deepAccess)(t.ortb2,"badv")||e[0].params.badv||[],test:0};if(e[0].params.equativNetworkId&&(u=!0,f.site.publisher={id:e[0].params.equativNetworkId,...f.site.publisher}),t.ortb2?.device?.ext?.cdep&&(f.device.ext.cdep=t.ortb2.device.ext.cdep),t?.ortb2?.device&&(0,l.mergeDeep)(f.device,t.ortb2.device),r=a.user,i={},f.user=null==r?i:r,f.user.ext||(f.user.ext={}),f.user.ext.eids=e[0].userIdAsEids||[],t.gdprConsent){let e=!0===t.gdprConsent.gdprApplies;f.regs.ext.gdpr=+!!e,e&&(f.user.ext.consent=t.gdprConsent.consentString)}t.uspConsent&&(f.regs.ext.us_privacy=t.uspConsent,f.regs.us_privacy=t.uspConsent),t?.gppConsent?.gppString?(f.regs.gpp=t.gppConsent.gppString,f.regs.gpp_sid=t.gppConsent.applicableSections):t?.ortb2?.regs?.gpp&&(f.regs.ext.gpp=t.ortb2.regs.gpp,f.regs.ext.gpp_sid=t.ortb2.regs.gpp_sid),t?.ortb2?.regs?.ext?.dsa&&(f.regs.ext.dsa=t.ortb2.regs.ext.dsa);let m=e.map(e=>{let r={ext:{}},i=(0,l.deepAccess)(e,"ortb2Imp.ext.tid");i&&(r.ext.tid=i);let n=(0,l.deepAccess)(e,"ortb2Imp.ext.gpid")||(0,l.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");n&&(r.ext.gpid=n);let o=(0,l.deepAccess)(e,"mediaTypes.native"),a=(0,l.deepAccess)(e,"mediaTypes.video");if(t.paapi?.enabled&&e.mediaTypes.banner&&(0,l.mergeDeep)(r,{ext:{ae:1}}),a){var s;let[e,t]=[640,360];a.playerSize&&a.playerSize[0]&&a.playerSize[0][0]&&a.playerSize[0][1]&&([e,t]=a.playerSize[0]),r.video={pos:null==(s=a.pos)?0:s,topframe:+!(0,l.inIframe)(),w:e,h:t};let i=["api","battr","companiontype","delivery","linearity","maxduration","mimes","minduration","placement","playbackmethod","plcmt","protocols","skip","skipafter","skipmin","startdelay"];u||i.push("companionad"),i.forEach(e=>{((e,t,r)=>{if(["api","battr","mimes","playbackmethod","protocols"].includes(e)&&(!Array.isArray(t[e])||0===t[e].length)&&t[e])return(0,l.logWarn)(`Sharethrough: Invalid video request property: "${e}" must be an array with at least 1 entry.  Value supplied: "${t[e]}".  This will not be added to the bid request.`);t[e]&&(r.video[e]=t[e])})(e,a,r)})}else if(u&&o)r.native={...g.toORTB({bidRequests:[e],bidderRequest:t}).imp[0].native};else{r.banner={pos:(0,l.deepAccess)(e,"mediaTypes.banner.pos",0),topframe:+!(0,l.inIframe)(),format:e.sizes.map(e=>({w:+e[0],h:+e[1]}))};let t=(0,l.deepAccess)(e,"mediaTypes.banner.battr",null)||(0,l.deepAccess)(e,"ortb2Imp.banner.battr");t&&(r.banner.battr=t)}let c=u?e.adUnitCode:String(e.params.pkey);return{id:e.bidId,tagid:c,secure:+!!d,bidfloor:function(e){let t=null;if("function"==typeof e.getFloor){let r=e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.video?"video":"banner",size:e.sizes.map(e=>({w:e[0],h:e[1]}))});(0,l.isPlainObject)(r)&&"USD"===r.currency&&!isNaN(parseFloat(r.floor))&&(t=parseFloat(r.floor))}return null!==t?t:0}(e),...r}}).filter(e=>!!e),h=[];if(u){let t=e[0],r=o.config.getConfig("currency.adServerCurrency")||"USD";h=(0,s.prepareSplitImps)(m,t,r,c,"stx")}return m.map(e=>({method:"POST",url:u?"https://ssb.smartadserver.com/api/bid?callerId=233":"https://btlr.sharethrough.com/universal/v1?supply_id=WYu2BXv1",data:{...f,imp:u?h:[e]}}))},interpretResponse:(e,t)=>{let{body:r}=e;if(!r||!r.seatbid||0===r.seatbid.length||!r.seatbid[0].bid||0===r.seatbid[0].bid.length)return[];let i=r.ext?.auctionConfigs,o=t.data.imp[0],a=r.seatbid[0].bid.map(e=>{let t={requestId:u?c[e.impid]:e.impid,width:+e.w,height:+e.h,cpm:+e.price,creativeId:e.crid,dealId:e.dealid||null,mediaType:o.video?n.VIDEO:o.native?n.NATIVE:n.BANNER,currency:r.cur||"USD",netRevenue:!0,ttl:"number"==typeof e.exp&&e.exp>0?e.exp:360,ad:e.adm,nurl:e.nurl,meta:{advertiserDomains:e.adomain||[],networkId:e.ext?.networkId||null,networkName:e.ext?.networkName||null,agencyId:e.ext?.agencyId||null,agencyName:e.ext?.agencyName||null,advertiserId:e.ext?.advertiserId||null,advertiserName:e.ext?.advertiserName||null,brandId:e.ext?.brandId||null,brandName:e.ext?.brandName||null,demandSource:e.ext?.demandSource||null,dchain:e.ext?.dchain||null,primaryCatId:e.ext?.primaryCatId||null,secondaryCatIds:e.ext?.secondaryCatIds||null,mediaType:e.ext?.mediaType||null}};return t.mediaType===n.VIDEO?(t.ttl=3600,t.vastXml=e.adm):t.mediaType===n.NATIVE&&(t.native={ortb:JSON.parse(e.adm)}),t});return i&&!u?{bids:a,paapi:r.ext?.auctionConfigs||{}}:a},getUserSyncs:(e,t)=>e.pixelEnabled&&void 0!==(0,l.deepAccess)(t,"0.body.cookieSyncUrls")?t[0].body.cookieSyncUrls.map(e=>({type:"image",url:e})):[],onTimeout:e=>{},onBidWon:e=>{},onSetTargeting:e=>{}};(0,d.registerBidder)(f),(0,i.registerModule)("sharethroughBidAdapter")},2265:function(e,t,r){"use strict";var i=r(3800),n=r(4321),o=r(7750),a=r(4030),s=r(6553);let d=[];function l(e,t){return e.labelAll?{labelAll:!0,labels:e.labelAll,activeLabels:t}:{labelAll:!1,labels:e.labelAny,activeLabels:t}}s.setupAdUnitMediaTypes.before((e,t,r)=>e(function(e,t){return e.reduce((e,r)=>{let{active:i,mediaTypes:n,filterResults:a}=u(l(r,t),r.mediaTypes);return i?(a&&(0,o.logInfo)(`Size mapping filtered adUnit "${r.code}" sizes from `,a.before,"to ",a.after),r.mediaTypes=n,r.bids=r.bids.reduce((e,i)=>{let{active:n,mediaTypes:a,filterResults:s}=u(l(i,t),r.mediaTypes);return n?(s&&((0,o.logInfo)(`Size mapping filtered adUnit "${r.code}" bidder "${i.bidder}" sizes from `,s.before,"to ",s.after),i.mediaTypes=a),e.push(i)):(0,o.logInfo)(`Size mapping deactivated adUnit "${r.code}" bidder "${i.bidder}"`),e},[]),e.push(r)):(0,o.logInfo)(`Size mapping disabled adUnit "${r.code}"`),e},[])}(t,r),r)),n.config.getConfig("sizeConfig",e=>{d=e.sizeConfig});let c={[a.BANNER]:"banner.sizes"};function u(){let{labels:e=[],labelAll:t=!1,activeLabels:r=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d,a=function(e){return e.reduce((e,t)=>{if("object"==typeof t&&"string"==typeof t.mediaQuery&&t.mediaQuery.length>0){let r=!1;try{r=(0,o.getWindowTop)().matchMedia(t.mediaQuery).matches}catch(e){(0,o.logWarn)("Unfriendly iFrame blocks sizeConfig from being correctly evaluated"),r=matchMedia(t.mediaQuery).matches}r&&(Array.isArray(t.sizesSupported)&&(e.shouldFilter=!0),["labels","sizesSupported"].forEach(r=>(t[r]||[]).forEach(t=>e[r][t]=!0)))}else(0,o.logWarn)('sizeConfig rule missing required property "mediaQuery"');return e},{labels:{},sizesSupported:{},shouldFilter:!1})}(n),s=!1,l=!1,u={before:{},after:{}};a.shouldFilter?Object.entries(c).forEach(e=>{let[t,r]=e,n=(0,o.deepAccess)(i,r);if(n){s||(i=(0,o.deepClone)(i),s=!0);let e=n.filter(e=>a.sizesSupported[e]);(0,o.deepSetValue)(i,r,e),l=l||e.length>0,n.length!==e.length&&(u.before[t]=n,u.after[t]=e)}}):l=null!=Object.values(c).find(e=>(0,o.deepAccess)(i,e)?.length);let p={active:!Object.keys(c).find(e=>i.hasOwnProperty(e))||l&&(0===e.length||!t&&(e.some(e=>a.labels[e])||e.some(e=>r.includes(e)))||t&&e.reduce((e,t)=>e?a.labels[t]||r.includes(t):e,!0)),mediaTypes:i};return Object.keys(u.before).length>0&&(p.filterResults=u),p}c[a.VIDEO]="video.playerSize",(0,i.registerModule)("sizeMapping")},4416:function(e,t,r){"use strict";var i=r(3800),n=r(256),o=r(8256),a=r(4030),s=r(7750),d=r(2473);let l="stackadapt",c=(0,o.ortbConverter)({context:{netRevenue:!0,ttl:300,currency:"USD"},request(e,t,r,i){let n=e(t,r,i),o=i.bidRequests[0];return n.id=r.bidderRequestId,(0,s.deepSetValue)(n,"site.publisher.id",o.params.publisherId),(0,s.deepSetValue)(n,"test",o.params.testMode),n},imp(e,t,r){let i=e(t,r);t.params.placementId&&(0,s.deepSetValue)(i,"tagid",t.params.placementId),t.params.banner?.expdir&&(0,s.deepSetValue)(i,"banner.expdir",t.params.banner.expdir);let n=function(e){if(e.params.bidfloor)return e.params.bidfloor;if((0,s.isFn)(e.getFloor)){let t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});if((0,s.isPlainObject)(t)&&!isNaN(t.floor)&&"USD"===t.currency)return t.floor}return null}(t);return n&&(i.bidfloor=parseFloat(n),i.bidfloorcur="USD"),(0,s.isNumber)(i.secure)||(i.secure=1),i},bidResponse(e,t,r){let{bidRequest:i}=r,n=Object.keys(i.mediaTypes);return 1===n.length?r.mediaType=n[0]:t.adm?.search(/^(<\?xml|<vast)/i)!==-1?r.mediaType=a.VIDEO:r.mediaType=a.BANNER,t.adm=(0,s.replaceAuctionPrice)(t.adm,t.price),e(t,r)}}),u={code:l,gvlid:238,supportedMediaTypes:[a.BANNER,a.VIDEO],isBidRequestValid:function(e){if(!e||!e.params)return(0,s.logWarn)("StackAdapt bidder adapter - Missing bid.params"),!1;if(!e.params.publisherId)return(0,s.logWarn)(l+"StackAdapt bidder adapter -  Missing required bid.params.publisherId"),!1;if(e.params.bidfloor&&isNaN(parseFloat(e.params.bidfloor)))return(0,s.logWarn)("StackAdapt bidder adapter -  bid.params.bidfloor must be a float"),!1;let t=e.mediaTypes?.banner,r=e.mediaTypes?.video;if(!t&&!r)return(0,s.logWarn)("StackAdapt bidder adapter - bid must contain bid.mediaTypes.banner or bid.mediaTypes.video"),!1;if(t){let e=t.sizes;if(!e||0==(0,s.parseSizesInput)(e).length)return(0,s.logWarn)("StackAdapt bidder adapter - banner bid requires bid.mediaTypes.banner.sizes of valid format"),!1}if(r){if(!r.plcmt)return(0,s.logWarn)("StackAdapt bidder adapter - video bid requires bid.mediaTypes.video.plcmt"),!1;if(!r.maxduration||!(0,s.isInteger)(r.maxduration))return(0,s.logWarn)("StackAdapt bidder adapter - video bid requires bid.mediaTypes.video.maxduration in seconds"),!1;if(!r.api||0===r.api.length)return(0,s.logWarn)("StackAdapt bidder adapter - video bid requires bid.mediaTypes.video.api to be an array of supported api frameworks. See ORTB spec for valid values"),!1;if(!r.mimes||0===r.mimes.length)return(0,s.logWarn)("StackAdapt bidder adapter - video bid requires bid.mediaTypes.video.mimes to be an array of supported mime types"),!1;if(!r.protocols)return(0,s.logWarn)("StackAdapt bidder adapter - video bid bid.mediaTypes.video.protocols to be an array of supported protocols. See the ORTB spec for valid values"),!1}return!0},buildRequests:function(e,t){if(!Array.isArray(e))throw TypeError("Expected bidRequests to be an array");return{method:"POST",url:"https://pjs.srv.stackadapt.com/br",data:c.toORTB({bidRequests:e,bidderRequest:t}),options:{withCredentials:!0}}},interpretResponse:function(e,t){return e&&e.body&&t&&t.data?c.fromORTB({response:e.body,request:t.data}).bids:[]},getUserSyncs:function(e,t,r,i,n){let o=[];if(e.pixelEnabled){let e=(0,d.getUserSyncParams)(r,i,n);e=Object.keys(e).length?`&${(0,s.formatQS)(e)}`:"",o.push({type:"image",url:"https://sync.srv.stackadapt.com/sync?nid=pjs"+e})}return o}};(0,n.registerBidder)(u),(0,i.registerModule)("stackadaptBidAdapter")},5461:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(256),a=r(9287),s=r(2572),d=r(5829),l=r(5909);let c="teads",u=(0,a.getStorageManager)({bidderCode:c});function p(e){var t,r;let i,o,a,s={},d=e.params.placementId,l=e.params.pageId,c=e?.ortb2Imp?.ext?.gpid,u=e?.mediaTypes?.video?.plcmt;return t=e,s.sizes=(0,n.parseSizesInput)((r=t,i=r?.mediaTypes?.video?.playerSize,o=r?.mediaTypes?.video?.sizes,a=r?.mediaTypes?.banner?.sizes,(0,n.isArray)(a)||(0,n.isArray)(i)||(0,n.isArray)(o)?[a,o,i].reduce(function(e,t){return(0,n.isArray)(t)&&((0,n.isArray)(t[0])?t.forEach(function(t){e.push(t)}):e.push(t)),e},[]):r.sizes)),s.bidId=(0,n.getBidIdParameter)("bidId",e),s.bidderRequestId=(0,n.getBidIdParameter)("bidderRequestId",e),s.placementId=parseInt(d,10),s.pageId=parseInt(l,10),s.adUnitCode=(0,n.getBidIdParameter)("adUnitCode",e),s.transactionId=e.ortb2Imp?.ext?.tid||"",c&&(s.gpid=c),u&&(s.videoPlcmt=u),s}function g(e){return parseInt(e)>0}(0,o.registerBidder)({code:c,gvlid:132,supportedMediaTypes:["video","banner"],isBidRequestValid:function(e){let t=!1;if(void 0!==e.params){let r=g(e.params.placementId),i=g(e.params.pageId);t=r&&i}return t||(0,n.logError)("Teads placementId and pageId parameters are required. Bid aborted."),t},buildRequests:function(e,t){var r,i,o,a,s,c,g;let f,m,h=e.map(p),b=window.top,y={referrer:(f="",(r=t)&&r.refererInfo&&r.refererInfo.page&&(f=r.refererInfo.page),f),pageReferrer:document.referrer,pageTitle:(function(){try{let e=window.top.document.querySelector('meta[property="og:title"]');return window.top.document.title||e&&e.content||""}catch(t){let e=document.querySelector('meta[property="og:title"]');return document.title||e&&e.content||""}})().slice(0,300),pageDescription:(function(){let e;try{e=window.top.document.querySelector('meta[name="description"]')||window.top.document.querySelector('meta[property="og:description"]')}catch(t){e=document.querySelector('meta[name="description"]')||document.querySelector('meta[property="og:description"]')}return e&&e.content||""})().slice(0,300),networkBandwidth:(i=window.navigator)&&i.connection&&i.connection.downlink>=0?i.connection.downlink.toString():"",networkQuality:(m=(o=window.navigator).connection||o.mozConnection||o.webkitConnection,m?.effectiveType??""),timeToFirstByte:(0,l.getTimeToFirstByte)(window),data:h,domComplexity:(a=document,a?.querySelectorAll("*")?.length??-1),device:t?.ortb2?.device||{},deviceWidth:screen.width,deviceHeight:screen.height,devicePixelRatio:b.devicePixelRatio,screenOrientation:(0,n.getScreenOrientation)(),historyLength:(0,d.getHLen)(),viewportHeight:(0,n.getWinDimensions)().visualViewport.height,viewportWidth:(0,n.getWinDimensions)().visualViewport.width,hardwareConcurrency:void 0,deviceMemory:void 0,hb_version:"9.53.2",eids:(s=e,s?.[0]?.userIdAsEids||[]),...function(e){let t={unifiedId2:"uidapi.com",liveRampId:"liveramp.com",lotamePanoramaId:"crwdcntrl.net",id5Id:"id5-sync.com",criteoId:"criteo.com",yahooConnectId:"yahoo.com",quantcastId:"quantcast.com",epsilonPublisherLinkId:"epsilon.com",publisherFirstPartyViewerId:"pubcid.org",merkleId:"merkleinc.com",kinessoId:"kpuid.com"},r={};for(let i in t){let n=t[i];e[0].userIdAsEids?.forEach(e=>{e.source===n&&e.uids?.[0].id&&(r[i]=e.uids[0].id)})}return r}(e),outbrainId:u.getDataFromLocalStorage("OB-USER-TOKEN"),...function(e){let t=e?.[0]?.userIdAsEids?.find(e=>"teads.com"===e.source)?.uids?.[0].id;if(t)return{firstPartyCookieTeadsId:t};if(u.cookiesAreEnabled(null)){let e=u.getCookie("_tfpvi",null);if(e)return{firstPartyCookieTeadsId:e}}return{}}(e)},v=e[0];v.schain&&(y.schain=v.schain);let A=t.gppConsent;if(t&&A){let e="string"==typeof A.gppString,t=Array.isArray(A.applicableSections)&&A.applicableSections.every(e=>"number"==typeof e);y.gpp={consentString:e?A.gppString:"",applicableSectionIds:t?A.applicableSections:[]}}let I=t.gdprConsent;if(t&&I){let e,t="boolean"==typeof I.gdprApplies,r="string"==typeof I.consentString,i=t?(c=I.gdprApplies,g=I.vendorData,e=12,c?g&&!g.isServiceSpecific&&(e=11):e=0,e):22;y.gdpr_iab={consent:r?I.consentString:"",status:i,apiVersion:I.apiVersion}}t&&t.uspConsent&&(y.us_privacy=t.uspConsent);let E=v?.ortb2?.device?.sua;E&&(y.userAgentClientHints=E);let S=t?.ortb2?.regs?.ext?.dsa;return S&&(y.dsa=S),{method:"POST",url:"https://a.teads.tv/hb/bid-request",data:JSON.stringify(y)}},interpretResponse:function(e,t){if(!(e=e.body).responses)return[];let r=(0,s.isAutoplayEnabled)();return e.responses.filter(e=>!e.needAutoplay||r).map(e=>{let t={cpm:e.cpm,width:e.width,height:e.height,currency:e.currency,netRevenue:!0,ttl:e.ttl,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]},ad:e.ad,requestId:e.bidId,creativeId:e.creativeId,placementId:e.placementId};return e.dealId&&(t.dealId=e.dealId),e?.ext?.dsa&&(t.meta.dsa=e.ext.dsa),t})}}),(0,i.registerModule)("teadsBidAdapter")},7067:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(7581),a=r(1620),s=r(9287),d=r(4767);let l="teadsId",c="_tfpvi",u=(0,s.getStorageManager)({moduleType:d.MODULE_TYPE_UID,moduleName:l});(0,a.submodule)("userId",{name:l,gvlid:132,decode:e=>({teadsId:e}),getId:(e,t)=>({callback:function(r){let i=function(e,t){let r,i=function(e){let t=e?.params?.pubId,r="PUB_";return(0,n.isNumber)(t)?r+t.toString():(0,n.isStr)(t)&&parseInt(t)?r+t:""}(e),o=(r=u.cookiesAreEnabled(null)?u.getCookie(c,null):null,(0,n.isStr)(r)?r:""),a=function(e){let t=e?.gdprApplies;return!0===t?12:22*(!1!==t)}(t?.gdpr),s=function(e){let t=e?.consentString;return(0,n.isStr)(t)?t:""}(t?.gdpr),d=function(e){return(0,n.isStr)(e)?e:""}(t?.usp),l=function(e){switch(e){case 0:return 0;case 22:return 220;case 12:return 120;default:return -1}}(a),p={analytics_tag_id:i,tfpvi:o,gdpr_consent:s,gdpr_status:a,gdpr_reason:l,ccpa_consent:d,sv:"prebid-v1"},g=new URLSearchParams;for(let e in p)g.append(e,p[e]);return"https://at.teads.tv/fpc?"+g.toString()}(e,t);(0,o.ajax)(i,{success:(e,t)=>{if(t&&200===t.status)if((0,n.isStr)(e)&&!(0,n.isEmpty)(e)){var i;let t=(i=31536e6,new Date((0,n.timestamp)()+i).toUTCString());u.setCookie(c,e,t),r(e)}else u.setCookie(c,"","Thu, 01 Jan 1970 00:00:01 GMT"),r();else(0,n.logInfo)(`${l}: Server error while fetching ID`),r()},error:e=>{(0,n.logError)(`${l}: ID fetch encountered an error`,e),r()}},void 0,{method:"GET"})}}),eids:{teadsId:{source:"teads.com",atype:1}}}),(0,i.registerModule)("teadsIdSystem")},5538:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(783),a=r(1620),s=r(7148),d=r(4321),l=r(9287),c=r(5110),u=r(2276),p=r(958),g=r(4767);let f=!1,m=[],h=(0,l.getCoreStorageManager)("topicsFpd"),b="prebid:topics",y="lastUpdated",v={1:600,2:601,3:602,4:603};function A(e,t){return t.reduce((t,r)=>{let i=r[e];return t.hasOwnProperty(i)||(t[i]=[]),t[i].push(r),t},{})}function I(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return Object.entries(A("taxonomyVersion",t)).filter(e=>{let[t]=e;return!!r.hasOwnProperty(t)||((0,n.logWarn)(`Unrecognized taxonomyVersion from Topics API: "${t}"; topic will be ignored`),!1)}).flatMap(t=>{let[i,n]=t;return Object.entries(A("modelVersion",n)).map(t=>{let[n,o]=t,a={ext:{segtax:r[i],segclass:n},segment:o.map(e=>({id:e.topic.toString()}))};return null!=e&&(a.name=e),a})})}function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return"browsingTopics"in e&&e.featurePolicy.allowsFeature("browsing-topics")}let S=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=null;try{E(e)&&(t=s.PbPromise.resolve(e.browsingTopics()))}catch(e){(0,n.logError)("Could not call topics API",e)}return null==t&&(t=s.PbPromise.resolve([])),t})().then(e=>I((0,o.getRefererInfo)().domain,e));function _(e){if(e&&e.data)try{let t=(0,n.safeJSONParse)(e.data);if(m.includes(e.origin)&&t&&t.segment&&!(0,n.isEmpty)(t.segment.topics)){let{domain:e,topics:r,bidder:i}=t.segment,n=I(e,r);n&&T(i,n)}}catch(e){}}function T(e,t){let r=new Map((0,n.safeJSONParse)(h.getDataFromLocalStorage(b))),i={[y]:new Date().getTime()};t.forEach(e=>{i[e.ext.segclass]=e}),r.set(e,i),h.setDataInLocalStorage(b,JSON.stringify([...r]))}function O(e,t){return Math.ceil((new Date().getTime()-e)/864e5)>t}(0,a.submodule)("firstPartyData",{name:"topics",queue:1,processFpd:function(e,t){let{global:r}=t,{data:i=S}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f||(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!E(e))return;let t=d.config.getConfig("userSync.topics");if(t){var r,i;window.addEventListener("message",_,!1);let o=(r=t.bidders||[],i=t.maxTopicCaller||1,[...r].sort(()=>.5-Math.random()).slice(0,i));o&&o.forEach(t=>{let{bidder:r,iframeURL:i,fetchUrl:o,fetchRate:a}=t;if(r&&i){var s;let t=e.createElement("iframe");t.name="ifrm_".concat(r),t.src="".concat(i,"?bidder=").concat(r),t.style.display="none",s=new URL(i).origin,m.push(s),i&&e.documentElement.appendChild(t)}if(r&&o){let e=new Map((0,n.safeJSONParse)(h.getDataFromLocalStorage(b))).get(r);(!e||e&&O(e[y],a||1))&&window.fetch(`${o}?bidder=${r}`,{browsingTopics:!0}).then(e=>e.json()).then(e=>{if(e&&e.segment&&!(0,n.isEmpty)(e.segment.topics)){let{domain:t,topics:r,bidder:i}=e.segment,n=I(t,r);n&&T(i,n)}})}})}else(0,n.logWarn)("Topics config not defined under userSync Object")}(),f=!0),i.then(e=>((e=[].concat(e,function(){let e=[],t=d.config.getConfig("userSync.topics"),r=t?.bidders||[],i=new Map((0,n.safeJSONParse)(h.getDataFromLocalStorage(b)));return i&&i.forEach((t,n)=>{let o=r.find(e=>{let{bidder:t}=e;return n===t});o&&(0,c.isActivityAllowed)(u.ACTIVITY_ENRICH_UFPD,(0,p.activityParams)(g.MODULE_TYPE_BIDDER,n))&&(O(t[y],o?.expiry||21)?(i.delete(n),h.setDataInLocalStorage(b,JSON.stringify([...i]))):Object.keys(t).forEach(r=>{r!==y&&e.push(t[r])}))}),e}())).length&&(0,n.mergeDeep)(r,{user:{data:e}}),{global:r}))}}),(0,i.registerModule)("topicsFpdModule")},4597:function(e,t,r){"use strict";var i=r(3800),n=c(r(7750)),o=r(4030),a=r(256),s=r(4321),d=r(9287),l=r(4891);function c(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(c=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let u="triplelift",p=null,g=null,f=(0,d.getStorageManager)({bidderCode:u}),m={gvlid:28,code:u,supportedMediaTypes:[o.BANNER,o.VIDEO],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){let r="https://tlx.3lift.com/header/auction?",i=function(e,t){var r,i;let o,a={},{schain:s}=e[0],d=function(e){let t={},r={},i={},o=e.ortb2||{},a=function(){let e=f.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return(0,n.logError)("Triplelift: error parsing JSON: ",e),null}}(),s=Object.assign({},o.site),d=Object.assign({},o.user);if(a){d.data=d.data||[];try{d.data.push({name:"www.1plusx.com",ext:a})}catch(e){(0,n.logError)("Triplelift: error adding 1plusX segments: ",e)}}return v(r,s),v(i,d),(0,n.isEmpty)(r)||(t.context=r),(0,n.isEmpty)(i)||(t.user=i),t}(t);a.imp=e.map(function(e,t){var r;let i,o,a={id:t,tagid:e.params.inventoryCode,floor:function(e){let t=null;if("function"==typeof e.getFloor)try{let r=e.getFloor({currency:"USD",mediaType:h(e)?"video":"banner",size:"*"});n.isPlainObject(r)&&"USD"===r.currency&&!isNaN(parseFloat(r.floor))&&(t=parseFloat(r.floor))}catch(e){(0,n.logError)("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}(e)};return h(e)&&(a.video=function(e){let t={...e.params.video,...e.mediaTypes.video};try{t.w||(t.w=t.playerSize[0][0]),t.h||(t.h=t.playerSize[0][1])}catch(e){(0,n.logWarn)("Video size not defined",e)}return t.playbackmethod&&Number.isInteger(t.playbackmethod)&&(t.playbackmethod=Array.from(String(t.playbackmethod),Number)),delete t.playerSize,t}(e)),e.mediaTypes.banner&&!b(e)&&(a.banner={format:e.sizes.filter(A).map(function(e){return{w:e[0],h:e[1]}})}),!(0,n.isEmpty)(e.ortb2Imp)&&(r=e.ortb2Imp,i={},v(o={},r.ext),(0,n.isEmpty)(o)||(i.context=o),a.fpd=i,(0,n.isEmpty)(e.ortb2Imp.ext)||(a.ext={...e.ortb2Imp.ext})),a});e[0].userIdAsEids&&(a.user={ext:{eids:n.deepAccess(e[0],"userIdAsEids")}});let l=(r=s,i=d,o={},(0,n.isEmpty)(r)||(o.schain={...r}),(0,n.isEmpty)(i)||(o.fpd={...i}),o);return(0,n.isEmpty)(l)||(a.ext=l),t?.ortb2?.regs?.gpp&&(a.regs=Object.assign({},t.ortb2.regs)),t?.ortb2&&(a.ext.ortb2=Object.assign({},t.ortb2)),a}(e,t);if(r=(0,l.tryAppendQueryString)(r,"lib","prebid"),r=(0,l.tryAppendQueryString)(r,"v","9.53.2"),t&&t.refererInfo){let e=t.refererInfo.page;r=(0,l.tryAppendQueryString)(r,"referrer",e)}return t&&t.timeout&&(r=(0,l.tryAppendQueryString)(r,"tmax",t.timeout)),t&&t.gdprConsent&&(p=void 0===t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies,r=(0,l.tryAppendQueryString)(r,"gdpr",p.toString()),void 0!==t.gdprConsent.consentString&&(g=t.gdprConsent.consentString,r=(0,l.tryAppendQueryString)(r,"cmp_cs",g))),t&&t.uspConsent&&(r=(0,l.tryAppendQueryString)(r,"us_privacy",t.uspConsent)),t?.paapi?.enabled&&(r=(0,l.tryAppendQueryString)(r,"fledge",t.paapi.enabled)),!0===s.config.getConfig("coppa")&&(r=(0,l.tryAppendQueryString)(r,"coppa",!0)),r.lastIndexOf("&")===r.length-1&&(r=r.substring(0,r.length-1)),(0,n.logMessage)("tlCall request built: "+r),{method:"POST",url:r,data:i,bidderRequest:t}},interpretResponse:function(e,t){let{bidderRequest:r}=t,i=e.body.bids||[],o=e.body.paapi||[];if(i=i.map(e=>{var t,i;let n,o,a,s,d,l;return t=r,n={},o=(i=e).width||1,a=i.height||1,s=i.deal_id||"",d=i.crid||"",l=t.bids[i.imp_id],0!=i.cpm&&i.ad&&(n={requestId:l.bidId,cpm:i.cpm,width:o,height:a,netRevenue:!0,ad:i.ad,creativeId:d,dealId:s,currency:"USD",ttl:300,tl_source:i.tl_source,meta:{}},h(l)&&"video"===i.media_type&&(n.vastXml=i.ad,n.mediaType="video",n.ttl=3600),i.advertiser_name&&(n.meta.advertiserName=i.advertiser_name),i.adomain&&i.adomain.length&&(n.meta.advertiserDomains=i.adomain),i.tl_source&&"hdx"==i.tl_source&&(h(l)&&"video"===i.media_type?n.meta.mediaType="video":n.meta.mediaType="banner"),i.tl_source&&"tlx"==i.tl_source&&(n.meta.mediaType="native"),d&&(n.meta.networkId=d.slice(0,d.indexOf("_")))),n}),!(o.length>0))return i;{let e=o.map(e=>({bidId:r.bids[e.imp_id].bidId,config:e.auctionConfig}));return(0,n.logMessage)("Response with FLEDGE:",{bids:i,fledgeAuctionConfigs:e}),{bids:i,paapi:e}}},getUserSyncs:function(e,t,r,i,n){let o=function(e){if(e){if(e.iframeEnabled)return"iframe";if(e.pixelEnabled)return"image"}}(e);if(!o)return;let a="https://eb2.3lift.com/sync?";return"image"===o&&(a=(0,l.tryAppendQueryString)(a,"px",1),a=(0,l.tryAppendQueryString)(a,"src","prebid")),(null!==g||p)&&(a=(0,l.tryAppendQueryString)(a,"gdpr",p),a=(0,l.tryAppendQueryString)(a,"cmp_cs",g)),i&&(a=(0,l.tryAppendQueryString)(a,"us_privacy",i)),n&&(n.gppString&&(a=(0,l.tryAppendQueryString)(a,"gpp",n.gppString)),n.applicableSections&&0!==n.applicableSections.length&&(a=(0,l.tryAppendQueryString)(a,"gpp_sid",n.applicableSections.filter(e=>Number.isInteger(e)).join(",")))),[{type:o,url:a}]}};function h(e){var t;return y(e)&&(b(e)||y(t=e)&&"outstream"===t.mediaTypes.video.context.toLowerCase())}function b(e){return y(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function y(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function v(e,t){(0,n.isEmpty)(t)||Object.keys(t).forEach(r=>{null!=t[r]&&(e[r]=t[r])})}function A(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}(0,a.registerBidder)(m),(0,i.registerModule)("tripleliftBidAdapter")},7674:function(e,t,r){"use strict";var i=r(3800),n=l(r(7750)),o=r(4321),a=r(256),s=r(4030),d=r(3870);function l(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(l=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}function c(e){if(e.params.bidfloor)return e.params.bidfloor;if(!n.isFn(e.getFloor))return null;let t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return n.isPlainObject(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}let u={code:"ttd",gvlid:21,aliases:["thetradedesk"],supportedMediaTypes:[s.BANNER,s.VIDEO],isBidRequestValid:function(e){if(!e||!e.params)return n.logWarn("ttd: Missing bid parameters"),!1;if(!e.params.supplySourceId)return n.logWarn("ttd: Missing required parameter params.supplySourceId"),!1;if(!/^[\w+]+$/.test(e.params.supplySourceId))return n.logWarn("ttd: supplySourceId must only contain alphabetic characters"),!1;if(!e.params.publisherId)return n.logWarn("ttd: Missing required parameter params.publisherId"),!1;if(e.params.publisherId.length>64)return n.logWarn("ttd: params.publisherId must be 64 characters or less"),!1;if(e.params.bidfloor&&isNaN(parseFloat(e.params.bidfloor)))return!1;let t=n.deepAccess(e,"ortb2Imp.ext.gpid");if(!e.params.placementId&&!t)return n.logWarn("ttd: one of params.placementId or gpid (via the GPT module https://docs.prebid.org/dev-docs/modules/gpt-pre-auction.html) must be passed"),!1;let r=n.deepAccess(e,"mediaTypes.banner"),i=n.deepAccess(e,"mediaTypes.video");if(!r&&!i)return n.logWarn("ttd: one of mediaTypes.banner or mediaTypes.video must be passed"),!1;if(i){if(!i.maxduration||!n.isInteger(i.maxduration))return n.logWarn("ttd: mediaTypes.video.maxduration must be set to the maximum video ad duration in seconds"),!1;if(!i.api||0===i.api.length)return n.logWarn("ttd: mediaTypes.video.api should be an array of supported api frameworks. See the Open RTB v2.5 spec for valid values"),!1;if(!i.mimes||0===i.mimes.length)return n.logWarn("ttd: mediaTypes.video.mimes should be an array of supported mime types"),!1;if(!i.protocols)return n.logWarn("ttd: mediaTypes.video.protocols should be an array of supported protocols. See the Open RTB v2.5 spec for valid values"),!1}return!0},buildRequests:function(e,t){var r,i;let a,l,u,p,g=t.ortb2||{},f=t.ortb2Imp||{},m={id:t.bidderRequestId,imp:e.map(e=>(function(e){var t,r;let i,o,a,d,l,u,p={id:e.bidId},g=n.deepAccess(e,"ortb2Imp.ext.gpid")||e.params.placementId;g&&(p.tagid=g);let f=n.deepAccess(e,"mediaTypes.video"),m=n.deepAccess(e,"mediaTypes.banner"),h={};m&&(h[s.BANNER]=(i=(r=(t=e).mediaTypes.banner.sizes,n.parseSizesInput(r).filter(e=>e).map(e=>e.split("x")).map(e=>({width:parseInt(e[0]),height:parseInt(e[1])}))).map(e=>({w:e.width,h:e.height})),o=parseInt(n.deepAccess(t,"mediaTypes.banner.pos")),a=n.deepAccess(t,"params.banner.expdir"),d={},o&&(d.pos=o),a&&Array.isArray(a)&&(d.expdir=a),l=Object.assign({w:i[0].w,h:i[0].h,format:i},d),(u=n.deepAccess(t,"ortb2Imp.banner.battr"))&&(l.battr=u),l)),f&&(h[s.VIDEO]=function(e){{let t=e?.mediaTypes?.video;if(!t)return;let{minduration:r=0,maxduration:i,playerSize:n,api:o,mimes:a,placement:s,plcmt:d,protocols:l,playbackmethod:c,pos:u,startdelay:p,skip:g,skipmin:f,skipafter:m,minbitrate:h,maxbitrate:b}=t,y={minduration:r,...void 0!==i&&{maxduration:i},...o&&{api:o},...a&&{mimes:a},...void 0!==s&&{placement:s},...void 0!==d&&{plcmt:d},...l&&{protocols:l},...void 0!==c&&{playbackmethod:c},...void 0!==u&&{pos:u},...void 0!==p&&{startdelay:p},...void 0!==g&&{skip:g},...void 0!==f&&{skipmin:f},...void 0!==m&&{skipafter:m},...void 0!==h&&{minbitrate:h},...void 0!==b&&{maxbitrate:b}};if(n){let[e,t]=Array.isArray(n[0])?n[0]:n;y.w=Number(e),y.h=Number(t)}let v=e?.ortb2Imp?.video?.battr;return v&&(y.battr=v),y}}(e)),Object.assign(p,h);let b=c(e);b&&(p.bidfloor=parseFloat(b),p.bidfloorcur="USD");let y=n.deepAccess(e,"ortb2Imp.secure");p.secure=(0,n.isNumber)(y)?y:1;let{video:v,...A}=e.ortb2Imp;return n.mergeDeep(p,A),p})(e)),site:(r=n.mergeDeep({page:n.deepAccess(t,"refererInfo.page"),ref:n.deepAccess(t,"refererInfo.ref"),publisher:{id:n.deepAccess(t,"bids.0.params.publisherId")}},g.site),(i=t.refererInfo.domain)&&n.deepSetValue(r,"publisher.domain",i),r),device:(a=navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage,l={ua:navigator.userAgent,dnt:+!!n.getDNT(),language:a,connectiontype:(0,d.getConnectionType)()},n.mergeDeep(l,g.device),l),user:function(e,t){let r={};e.gdprConsent&&n.deepSetValue(r,"ext.consent",e.gdprConsent.consentString);var i=n.deepAccess(e,"bids.0.userIdAsEids");if(i&&i.length){n.deepSetValue(r,"ext.eids",i);let e=i.find(e=>"adserver.org"==e.source)?.uids?.[0]?.id;e&&(r.buyeruid=e)}return n.mergeDeep(r,t.user),r}(t,g),at:1,tmax:Math.max(t.timeout||400,400),cur:["USD"],regs:(u={},t.gdprConsent&&"boolean"==typeof t.gdprConsent.gdprApplies&&n.deepSetValue(u,"ext.gdpr",+!!t.gdprConsent.gdprApplies),t.uspConsent&&n.deepSetValue(u,"ext.us_privacy",t.uspConsent),!0===o.config.getConfig("coppa")&&(u.coppa=1),t.ortb2?.regs&&n.mergeDeep(u,t.ortb2.regs),u),source:(p={tid:t?.ortb2?.source?.tid},e[0].schain&&n.deepSetValue(p,"ext.schain",e[0].schain),p),ext:{ttdprebid:{ver:"TTD-PREBID-2025.04.25",pbjs:"9.53.2",keywords:g.site?.keywords?g.site.keywords.split(",").map(e=>e.trim()):[]}}};if(g&&g.bcat&&(m.bcat=g.bcat),g&&g.badv&&(m.badv=g.badv),g&&g.app&&(m.app=g.app),g&&g.pmp&&g.pmp.deals&&g.pmp.deals.length){let r=t?.bids[0]?.mediaTypes,i=g.pmp.deals.filter(e=>r?.banner?!e.isVideo:e.isVideo).map(e=>({...e}));if(i.length){let t=c(e[0]),r={deals:i,...g.pmp.ext&&{ext:g.pmp.ext},...g.pmp.private_auction&&{private_auction:g.pmp.private_auction}};r.deals[0].bidfloor=Math.max(i[0].bidfloor,t),r.deals.forEach(e=>{delete e.isVideo}),m.imp.forEach(e=>{e.pmp={...r,...f?.pmp}})}}return{method:"POST",url:(t.bids[0].params.useHttp2?"https://d2.adsrvr.org/bid/bidder/":"https://direct.adsrvr.org/bid/bidder/")+t.bids[0].params.supplySourceId,data:m,options:{withCredentials:!0}}},interpretResponse:function(e,t){let r=n.deepAccess(e,"body.seatbid"),i=n.deepAccess(e,"body.cur");if(!r||0===r.length)return[];let o=[],a=n.deepAccess(t,"data.imp");return r.forEach(e=>{e.bid.forEach(t=>{let r=a.find(e=>e.id===t.impid),d=t.price||0,l={requestId:t.impid,cpm:d,creativeId:t.crid,dealId:t.dealid||null,currency:i||"USD",netRevenue:!0,ttl:t.ttl||360,meta:{}};t.adomain&&t.adomain.length>0&&(l.meta.advertiserDomains=t.adomain),e.seat&&(l.meta.seat=e.seat),1===t.ext.mediatype?Object.assign(l,{width:t.w,height:t.h,ad:n.replaceAuctionPrice(t.adm,d),mediaType:s.BANNER}):2===t.ext.mediatype&&(Object.assign(l,{width:r.video.w,height:r.video.h,mediaType:s.VIDEO}),(t.dur||t.duration)&&(l.duration=t.dur||t.duration),t.nurl?l.vastUrl=n.replaceAuctionPrice(t.nurl,d):l.vastXml=n.replaceAuctionPrice(t.adm,d)),o.push(l)})}),o},getUserSyncs:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=[],o=`&gdpr=${+!!r.gdprApplies}&gdpr_consent=${encodeURIComponent(r.consentString)}`,a=`https://match.adsrvr.org/track/usersync?us_privacy=${encodeURIComponent(i)}${o}`;return e.pixelEnabled?n.push({type:"image",url:a+"&ust=image"}):e.iframeEnabled&&n.push({type:"iframe",url:a+"&ust=iframe"}),n}};(0,a.registerBidder)(u),(0,i.registerModule)("ttdBidAdapter")},1054:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(1620),a=r(9287),s=r(4767),d=r(3350),l=r(2621);let c="uid2",u=d.Uid2CodeVersion,p=`PrebidJS-9.53.2-UID2Module-${u}`,g="UID2: ";function f(e,t){return function(){for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];e(t+" ",...i)}}let m=f(n.logInfo,g),h=f(n.logWarn,g),b=(0,a.getStorageManager)({moduleType:s.MODULE_TYPE_UID,moduleName:c}),y={name:c,decode(e){var t;let r="string"==typeof(t=e)?(m("Found server-only token. Refresh is unavailable for this token."),{uid2:{id:t}}):"optout"===t.latestToken?(m("Found optout token.  Refresh is unavailable for this token."),{uid2:{optout:!0}}):Date.now()<t.latestToken.identity_expires?{uid2:{id:t.latestToken.advertising_token}}:null;return m("UID2 decode returned",r),r},getId(e,t){if(t?.gdpr?.gdprApplies===!0)return void h("UID2 is not intended for use where GDPR applies. The UID2 module will not run.");let r={apiBaseUrl:e?.params?.uid2ApiBase??"https://prod.uidapi.com",paramToken:e?.params?.uid2Token,serverCookieName:e?.params?.uid2Cookie??e?.params?.uid2ServerCookie,storage:e?.params?.storage??"localStorage",clientId:p,internalStorage:"__uid2_advertising_token"};e?.params?.declareBridged&&(l.UID2_EIDS.uid2.bridged=!0),m("UID2 configuration loaded and mapped.",r);let i=(0,d.Uid2GetId)(r,b,m,h);return m("UID2 getId returned",i),i},eids:l.UID2_EIDS};(0,o.submodule)("userId",y),(0,i.registerModule)("uid2IdSystem")},3884:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(7105),a=r(1019),s=r(256),d=r(4030);function l(e){if(!e)return null;let t=e.gdprApplies?"1":"0",r=e.consentString?e.consentString:"";return`gdpr=${t}&gdprstr=${r}`}let c={code:"undertone",gvlid:677,supportedMediaTypes:[d.BANNER,d.VIDEO],isBidRequestValid:function(e){if(e&&e.params&&e.params.publisherId)return e.params.publisherId=parseInt(e.params.publisherId),!0},buildRequests:function(e,t){let r=(0,n.getWinDimensions)(),i=Math.max(r.document.documentElement.clientWidth,r.innerWidth||0),s=Math.max(r.document.documentElement.clientHeight,r.innerHeight||0),c={adapterVersion:"9.53.2",uids:e[0].userId,pageSize:0==i||0==s?null:[i,s]};e[0].schain&&(c.schain=e[0].schain);let u={"x-ut-hb-params":[],commons:c},p=t.refererInfo.topmostLocation,g=t.refererInfo.canonicalUrl;p&&(c.referrer=p),g&&(c.canonicalUrl=g);let f=(0,n.parseUrl)(p).hostname,m=(0,n.extractDomainFromHost)(f),h=g||p,b=e[0].params.publisherId,y=`https://hb.undertone.com/hb?pid=${b}&domain=${m}`,v=l(t.gdprConsent);if(v&&(y+=`&${v}`),t.uspConsent&&(y+=`&ccpa=${t.uspConsent}`),t.gppConsent){let e=t.gppConsent.gppString??"",r=t.gppConsent.applicableSections??"";y+=`&gpp=${e}&gpp_sid=${r}`}return e.map(e=>{let t={bidRequestId:e.bidId,coordinates:function(e){let t=document.getElementById(e);if(t){let{left:e,top:r}=(0,o.getBoundingClientRect)(t),i=(0,a.getViewportCoordinates)();return[Math.round(e+(i.left||0)),Math.round(r+(i.top||0))]}return null}(e.adUnitCode),hbadaptor:"prebid",url:h,domain:m,placementId:void 0!=e.params.placementId?e.params.placementId:null,publisherId:e.params.publisherId,gpid:(0,n.deepAccess)(e,"ortb2Imp.ext.gpid",(0,n.deepAccess)(e,"ortb2Imp.ext.data.pbadslot","")),sizes:e.params.size,params:e.params},r=(0,n.deepAccess)(e,"mediaTypes.video"),i=r?d.VIDEO:d.BANNER;t.mediaType=i,t.bidfloor=function(e,t){if("function"!=typeof e.getFloor)return 0;let r=e.getFloor({currency:"USD",mediaType:t,size:"*"});return r&&"USD"===r.currency&&r.floor||0}(e,i),r&&(t.video={playerSize:(0,n.deepAccess)(e,"mediaTypes.video.playerSize")||null,streamType:(0,n.deepAccess)(e,"mediaTypes.video.context")||null,playbackMethod:(0,n.deepAccess)(e,"params.video.playbackMethod")||null,maxDuration:(0,n.deepAccess)(e,"params.video.maxDuration")||null,skippable:(0,n.deepAccess)(e,"params.video.skippable")||null,placement:(0,n.deepAccess)(e,"mediaTypes.video.placement")||null,plcmt:(0,n.deepAccess)(e,"mediaTypes.video.plcmt")||null}),u["x-ut-hb-params"].push(t)}),{method:"POST",url:y,withCredentials:!0,data:JSON.stringify(u)}},interpretResponse:function(e,t){let r=[],i=e.body;return i&&Array.isArray(i)&&i.length>0&&i.forEach(e=>{if(e.ad&&e.cpm>0){let t={requestId:e.bidRequestId,cpm:e.cpm,width:e.width,height:e.height,creativeId:e.adId,currency:e.currency,netRevenue:e.netRevenue,ttl:e.ttl||360,meta:{advertiserDomains:e.adomain?e.adomain:[]}};e.mediaType&&"video"===e.mediaType?(t.vastXml=e.ad,t.mediaType=e.mediaType):t.ad=e.ad,r.push(t)}}),r},getUserSyncs:function(e,t,r,i){let n=[],o=l(r),a="",s="";return o&&(a+=`?${o}`,s+=`&${o}`),i&&(""!=a?a+="&":a+="?",a+=`ccpa=${i}`,s+=`&ccpa=${i}`),e.iframeEnabled?n.push({type:"iframe",url:"https://cdn.undertone.com/js/usersync.html"+a}):e.pixelEnabled&&n.push({type:"image",url:"https://usr.undertone.com/userPixel/syncOne?id=1&of=2"+s},{type:"image",url:"https://usr.undertone.com/userPixel/syncOne?id=2&of=2"+s}),n}};(0,s.registerBidder)(c),(0,i.registerModule)("undertoneBidAdapter")},4065:function(e,t,r){"use strict";var i=r(3800),n=r(7750),o=r(7581),a=r(1620),s=r(2043);let d="unifiedId",l={name:d,gvlid:21,decode:e=>e&&"string"==typeof e.TDID?{tdid:e.TDID}:void 0,getId(e){let t=e&&e.params||{};if(!t||"string"!=typeof t.partner&&"string"!=typeof t.url)return void(0,n.logError)("User ID - unifiedId submodule requires either partner or url to be defined");let r=t.url||`https://match.adsrvr.org/track/rid?ttd_pid=${t.partner}&fmt=json`;return{callback:function(e){(0,o.ajax)(r,{success:t=>{let r;if(t)try{r=JSON.parse(t)}catch(e){(0,n.logError)(e)}e(r)},error:t=>{(0,n.logError)(`${d}: ID fetch encountered an error`,t),e()}},void 0,{method:"GET",withCredentials:!0})}}},eids:{tdid:{...s.UID1_EIDS.tdid,mm:4,inserter:"adserver.org",matcher:"adserver.org"}}};(0,a.submodule)("userId",l),(0,i.registerModule)("unifiedIdSystem")},4372:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EID_CONFIG=void 0,t.createEidsArray=a,t.getEids=function(e){let t=new Map,r={};return Object.entries(e).forEach(e=>{let[i,n]=e,o=n();if(o){let e;r[i]=o.idObj[i];let n=o.submodule.eids?.[i];"function"==typeof n&&(e=n,n=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return e(...r,o.config)}),t.set(i,n)}}),a(r,t)};var i=r(7750),n=r(4321);let o=t.EID_CONFIG=new Map;function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r={};function a(e){let t=JSON.stringify([e.source?.toLowerCase(),...Object.keys(e).filter(e=>!["uids","source"].includes(e)).sort().map(t=>e[t])]);r.hasOwnProperty(t)?r[t].uids.push(...e.uids):r[t]=e}let s=n.config.getConfig("userSync")?.uid1Adsrvr;return Object.entries(e).forEach(e=>{let r,[n,o]=e;o=Array.isArray(o)?o:[o];let d=t.get(n);if("pubProvidedId"===n)r=(0,i.deepClone)(o);else if("function"==typeof d)try{r=d(o),Array.isArray(r)||(r=[r]),r.forEach(e=>e.uids=e.uids.filter(e=>{let{id:t}=e;return(0,i.isStr)(t)})),r=r.filter(e=>{let{uids:t}=e;return t?.length>0})}catch(e){(0,i.logError)(`Could not generate EID for "${n}"`,e)}else r=o.map(e=>(function(e,t,r){if(r&&e){let t={};t.source=(0,i.isFn)(r.getSource)?r.getSource(e):r.source;let n=(0,i.isFn)(r.getValue)?r.getValue(e):e;if((0,i.isStr)(n)){let o={id:n,atype:r.atype};if("uidapi.com"===r.source&&r.bridged&&(t.mm=5,t.inserter="cafemedia.com",t.matcher="cafemedia.com"),(0,i.isFn)(r.getUidExt)){let t=r.getUidExt(e);t&&(o.ext=t)}if(t.uids=[o],r.inserter||(0,i.isFn)(r.getInserter)){let n=(0,i.isFn)(r.getInserter)?r.getInserter(e):r.inserter;null!=n&&(t.inserter=n)}if(r.matcher||(0,i.isFn)(r.getMatcher)){let n=(0,i.isFn)(r.getMatcher)?r.getMatcher(e):r.matcher;null!=n&&(t.matcher=n)}if(null!=r.mm&&(t.mm=r.mm),(0,i.isFn)(r.getEidExt)){let i=r.getEidExt(e);i&&(t.ext=i)}return t}}return null})(e,0,d));if(Array.isArray(r)&&("tdid"===n&&"single"===s&&(r[0].source="adsrvr.org"),r.filter(e=>null!=e).forEach(a)),"tdid"===n&&"both"===s){let e=(0,i.deepClone)(r);e[0].source="adsrvr.org",e.filter(e=>null!=e).forEach(a)}}),Object.values(r)}},1263:function(e,t,r){"use strict";let i,n,o,a,s,d,l,c,u;var p=r(5824),g=r(3800),f=r(4321),m=k(r(2506)),h=p(r(6553)),b=r(8878),y=r(1620),v=r(4372),A=r(9287),I=r(7750),E=r(3645),S=r(7148),_=r(7557),T=r(7848),O=r(3029),C=r(4767),w=r(5110),x=r(2276),R=r(958),D=r(6907),P=r(9283);function k(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(k=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let N="User ID",B=A.STORAGE_TYPE_COOKIES,U=A.STORAGE_TYPE_LOCALSTORAGE,j="_pbjs_id_optout",M=(0,A.getCoreStorageManager)("userId"),V={isAllowed:w.isActivityAllowed},$=[],q=[],L={},F=[],W=()=>(null==u&&(u=(0,_.newMetrics)()),u);function G(e){return W().fork().renameWith(t=>[`userId.mod.${t}`,`userId.mods.${e}.${t}`])}function z(e,t){t=t||e.storageMgr;let r="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null,i=e.config.storage.name;return function(e,n,o){t.setCookie(i+(e||""),n,o,"Lax",r)}}function H(e,t){let r=e.config.storage;try{let i=new Date(Date.now()+864e5*r.expires).toUTCString(),n=(0,I.isPlainObject)(t)?JSON.stringify(t):t;e.enabledStorageTypes.forEach(t=>{switch(t){case B:let r,o;r=e.config.storage,(o=z(e))(null,n,i),o("_cst",eu(),i),"number"==typeof r.refreshInSeconds&&o("_last",new Date().toUTCString(),i);break;case U:let a,s;a=e.config.storage,(s=e.storageMgr).setDataInLocalStorage(`${a.name}_exp`,i),s.setDataInLocalStorage(`${a.name}_cst`,eu()),s.setDataInLocalStorage(a.name,encodeURIComponent(n)),"number"==typeof a.refreshInSeconds&&s.setDataInLocalStorage(`${a.name}_last`,new Date().toUTCString())}})}catch(e){(0,I.logError)(e)}}function Y(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=e.config.storage,n=r?`${i.name}_${r}`:i.name;try{e.enabledStorageTypes.find(r=>{switch(r){case B:t=e.storageMgr.getCookie(n);break;case U:let i,o,a;i=e.storageMgr,o=e.config.storage,a=i.getDataFromLocalStorage(`${o.name}_exp`),t=""===a?i.getDataFromLocalStorage(n):a&&new Date(a).getTime()-Date.now()>0?decodeURIComponent(i.getDataFromLocalStorage(n)):void 0}return!!t}),"string"==typeof t&&"{"===t.trim().charAt(0)&&(t=JSON.parse(t))}catch(e){(0,I.logError)(e)}return t}function J(e,t,r){t=W().fork().startTiming("userId.callbacks.total").stopBefore(t);let i=(0,I.delayExecution)(()=>{clearTimeout(n),t()},e.length);e.forEach(function(e){let t=G(e.submodule.name).startTiming("callback").stopBefore(i);try{e.callback(function(i){i?(e.config.storage&&H(e,i),e.idObj=e.submodule.decode(i,e.config),r.refresh(),ep(r)):(0,I.logInfo)(`${N}: ${e.submodule.name} - request id responded with an empty value`),t()},Y.bind(null,e))}catch(r){(0,I.logError)(`Error in userID module '${e.submodule.name}':`,r),t()}e.callback=void 0})}function K(e){return Object.fromEntries(Object.entries(e).map(e=>{let[t,r]=e;return[t,r()?.idObj?.[t]]}).filter(e=>{let[t,r]=e;return null!=r}))}function Q(e,t,r){let i={};return e.forEach(e=>{let n=r(e),o=function(e){if(e.primaryIds)return e.primaryIds;let t=Object.keys(e.eids??{});if(t.length>1)throw Error(`ID submodule ${e.name} can provide multiple IDs, but does not specify 'primaryIds'`);return t}(n);t(e).forEach(t=>{let r=i[t]=i[t]??[],a=L[t]?.indexOf(n.name)??(o.includes(t)?0:-1),s=r.findIndex(e=>{let[t]=e;return t<a});r.splice(-1===s?r.length:s,0,[a,e])})}),Object.fromEntries(Object.entries(i).map(e=>{let[t,r]=e;return[t,r.map(e=>{let[t,r]=e;return r})]}))}let X={};function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei()||[],t=o&&e.find(e=>e.source===o);if(t&&"string"==typeof t?.uids?.[0]?.id){let e=t.uids[0].id.replace(/[\W_]/g,"");if(e.length>=32&&e.length<=150)return e;(0,I.logWarn)(`User ID - Googletag Publisher Provided ID for ${o} is not between 32 and 150 characters - ${e}`)}}let ee=(0,_.timedAuctionHook)("userId",function(e,t){let{mkDelay:r=S.delay,getIds:n=ec}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S.PbPromise.race([n().catch(()=>null),r(c)]).then(()=>{(function(e){let{adUnits:t,ortb2Fragments:r}=e;if(function(e){let{global:t,bidder:r}=e,{global:n,bidder:o}=i,a=(0,v.getEids)(n);a.length>0&&(0,I.deepSetValue)(t,"user.ext.eids",(t.user?.ext?.eids??[]).concat(a)),Object.entries(o).forEach(e=>{let[t,i]=e,n=(0,v.getEids)(i);n.length>0&&(0,I.deepSetValue)(r,`${t}.user.ext.eids`,(r[t]?.user?.ext?.eids??[]).concat(n))})}(r=r??{global:{},bidder:{}}),t&&Array.isArray(t)&&t.length){let e=K(i.global);t.forEach(t=>{t.bids&&Array.isArray(t.bids)&&t.bids.forEach(t=>{let r=Object.assign({},e,K(i.bidder[t.bidder]??{}));Object.keys(r).length>0&&(t.userId=r)})})}})(t),W().join((0,_.useMetrics)(t.metrics),{propagate:!1,includeGroups:!0}),e.call(this,t)})});function et(e,t){t.forEach(e=>{e.bids.forEach(t=>Object.defineProperty(t,"userIdAsEids",{configurable:!0,get:()=>e.ortb2.user?.ext?.eids}))}),e(t)}function er(){return K(i.combined)}function ei(){return(0,v.getEids)(i.combined)}function en(e){return ei().filter(t=>t.source===e)[0]}function eo(e,t,r){return ed().then(()=>{let i={};if((0,I.isFn)(r)){(0,I.logInfo)(`${N} - Getting encrypted signal from custom function : ${r.name} & source : ${e} `);let t=r(e);i[e]=t?ea(t):null}else{let r=en(e);(0,I.logInfo)(`${N} - Getting encrypted signal for eids :${JSON.stringify(r)}`),(0,I.isEmpty)(r)||(i[r.source]=!0===t?ea(r):r.uids[0].id)}return(0,I.logInfo)(`${N} - Fetching encrypted eids: ${i[e]}`),i[e]})}function ea(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r="";return 1===t&&(r="object"==typeof e?window.btoa(JSON.stringify(e)):window.btoa(e)),`${t}||${r}`}function es(){if(!(0,I.isGptPubadsDefined)())return;window.googletag.secureSignalProviders=window.googletag.secureSignalProviders||[];let e=f.config.getConfig("userSync.encryptedSignalSources");e?setTimeout(()=>{e.sources&&e.sources.forEach(e=>{let{source:t,encrypt:r,customFunc:i}=e;t.forEach(e=>{window.googletag.secureSignalProviders.push({id:e,collectorFunction:()=>eo(e,r,i)})})})},e.registerDelay||0):(0,I.logWarn)(`${N} - ESP : encryptedSignalSources config not defined under userSync Object`)}function ed(e){return d(e).then(()=>er(),e=>e===X?Promise.resolve().then(ec):((0,I.logError)("Error initializing userId",e),S.PbPromise.reject(e)))}function el(){let{submoduleNames:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return ed({refresh:!0,submoduleNames:e}).then(e=>(t&&(0,I.isFn)(t)&&t(),e))}function ec(){return ed()}function eu(){let e=Number(O.allConsent.hash),t=[];for(;e>0;)t.push(String.fromCharCode(255&e)),e>>>=8;return btoa(t.join())}function ep(e){let t=(0,v.getEids)(e.combined);if(t.length&&o){let e=Z(t);e&&((0,I.isGptPubadsDefined)()?window.googletag.pubads().setPublisherProvidedId(e):(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){window.googletag.pubads().setPublisherProvidedId(e)})))}}function eg(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return W().fork().measureTime("userId.init.modules",function(){if(!t.length)return[];if(t.forEach(e=>eh(e)),!(t=t.filter(e=>(!e.config.storage||!!e.enabledStorageTypes.length)&&V.isAllowed(x.ACTIVITY_ENRICH_EIDS,(0,R.activityParams)(C.MODULE_TYPE_UID,e.config.name)))).length)return(0,I.logWarn)(`${N} - no ID module configured`),[];let i=t.reduce((e,t)=>G(t.submodule.name).measureTime("init",()=>{try{!function(e,t){let r=O.allConsent.getConsentData();if(e.config.storage){let i,n,o=Y(e),a=!1;if("number"==typeof e.config.storage.refreshInSeconds){let t=new Date(Y(e,"last"));a=t&&Date.now()-t.getTime()>1e3*e.config.storage.refreshInSeconds}if(o&&!a&&!t&&(i=Y(e,"cst"))&&i===eu())"function"==typeof e.submodule.extendId&&(n=e.submodule.extendId(e.config,r,o));else{let t=Object.assign({enabledStorageTypes:e.enabledStorageTypes},e.config);n=e.submodule.getId(t,r,o)}(0,I.isPlainObject)(n)&&(n.id&&(H(e,n.id),o=n.id),"function"==typeof n.callback&&(e.callback=n.callback)),o&&(e.idObj=e.submodule.decode(o,e.config))}else if(e.config.value)e.idObj=e.config.value;else{let t=e.submodule.getId(e.config,r);(0,I.isPlainObject)(t)&&("function"==typeof t.callback&&(e.callback=t.callback),t.id&&(e.idObj=e.submodule.decode(t.id,e.config)))}}(t,r),e.push(t)}catch(e){(0,I.logError)(`Error in userID module '${t.submodule.name}':`,e)}return e}),[]);return e.refresh(i),ep(e),i})}function ef(e){return e?.storage?.type?.trim().split(/\s*&\s*/)||[]}let em=new Set([U,B]);function eh(e){if(e.enabledStorageTypes)return;let t=ef(e.config);e.enabledStorageTypes=t.filter(t=>{switch(t){case U:return!!e.storageMgr.localStorageIsEnabled()&&(!M.getDataFromLocalStorage(j)||((0,I.logInfo)(`${N} - opt-out localStorage found, storage disabled`),!1));case B:return!!e.storageMgr.cookiesAreEnabled()&&(!M.getCookie(j)||((0,I.logInfo)(`${N} - opt-out cookie found, storage disabled`),!1))}return!1})}function eb(e){v.EID_CONFIG.clear(),Object.entries(Q(e,e=>Object.keys(e.eids||{}),e=>e)).forEach(e=>{let[t,r]=e;return v.EID_CONFIG.set(t,r[0].eids[t])})}function ey(){eb(F);let e=function(e){function t(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];(0,I.logWarn)(`Invalid userSync.userId config: ${e}`,...r)}return Array.isArray(e)?e.filter(e=>{if(!e?.name)return t('must specify "name"',e);if(e.storage){if(!e.storage.name||!e.storage.type)return t('must specify "storage.name" and "storage.type"',e);if(!ef(e).every(e=>em.has(e)))return t('invalid "storage.type"',e);["expires","refreshInSeconds"].forEach(r=>{let i=e.storage[r];null!=i&&"number"!=typeof i&&(isNaN(i=Number(i))?(t(`storage.${r} must be a number and will be ignored`,e),delete e.storage[r]):e.storage[r]=i)})}return!0}):(null!=e&&t("must be an array",e),[])}(q);if(!e.length)return;let t=F.filter(e=>!($||[]).find(t=>t.name===e.name));$.splice(0,$.length),t.map(t=>{let r=(e||[]).find(e=>e.name&&(e.name.toLowerCase()===t.name.toLowerCase()||t.aliasName&&e.name.toLowerCase()===t.aliasName.toLowerCase()));return r&&t.name!==r.name&&(r.name=t.name),r?{submodule:t,config:r,callback:void 0,idObj:void 0,storageMgr:(0,A.getStorageManager)({moduleType:C.MODULE_TYPE_UID,moduleName:r.name})}:null}).filter(e=>null!==e).forEach(e=>$.push(e)),$.length&&(P.startAuction.getHooks({hook:ee}).length||(P.startAuction.before(ee,100),h.default.callDataDeletionRequest.before(ev),E.getPPID.after(e=>e(Z()))),(0,I.logInfo)(`${N} - usersync config updated for ${$.length} submodules: `,$.map(e=>e.submodule.name)))}function ev(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];(0,I.logInfo)("UserID: received data deletion request; deleting all stored IDs..."),$.forEach(e=>{var t;if("function"==typeof e.submodule.onDataDeletionRequest)try{e.submodule.onDataDeletionRequest(e.config,e.idObj,...r)}catch(t){(0,I.logError)(`Error calling onDataDeletionRequest for ID submodule ${e.submodule.name}`,t)}eh(t=e),t.enabledStorageTypes.forEach(e=>{switch(e){case B:let r,i;r=z(t,M),i=new Date(Date.now()-864e5).toUTCString(),["","_last","_cst"].forEach(e=>{try{r(e,"",i)}catch(e){(0,I.logError)(e)}});break;case U:["","_last","_exp","_cst"].forEach(e=>{try{M.removeDataFromLocalStorage(t.config.storage.name+e)}catch(e){(0,I.logError)(e)}})}})}),e.apply(this,r)}function eA(e){return function(){return Promise.resolve(e.apply(this,arguments))}}(function(e){let t,{mkDelay:r=S.delay}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o=void 0,$=[],q=[],i=t={submodules:[],global:{},bidder:{},combined:{},refresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=new Set(e.map(e=>e.submodule));t.submodules=t.submodules.filter(e=>!r.has(e.submodule)).concat(e),function(){let e=Q(t.submodules,e=>Object.keys(e.idObj??{}),e=>e.submodule),r={},i={};function n(e,t,r){return function(){for(let{allowed:i,bidders:n,module:o}of r)if(V.isAllowed(x.ACTIVITY_ENRICH_EIDS,(0,R.activityParams)(C.MODULE_TYPE_UID,o?.config?.name,{init:!1}))&&null!=o.idObj?.[e]){if(i)return o;else if(t){let t=e=>e.map(e=>e.module.submodule.name).join(", ");(0,I.logWarn)(`userID modules ${t(r)} provide the same ID ('${e}'); ${o.submodule.name} is the preferred source, but it's configured only for some bidders, unlike ${t(r.filter(e=>null==e.bidders))}. Other bidders will not see the "${e}" ID.`);break}else if(null==n)break}return null}}Object.entries(e).forEach(e=>{let[t,o]=e,a=!0,s=new Set;o=o.map(e=>{let t=null;return Array.isArray(e.config.bidders)&&e.config.bidders.length>0?(t=e.config.bidders).forEach(e=>s.add(e)):a=!1,{module:e,bidders:t}}),a||(r[t]=n(t,!0,o.map(e=>{let{bidders:t,module:r}=e;return{allowed:null==t,bidders:t,module:r}}))),s.forEach(e=>{i[e]=i[e]??{},i[e][t]=n(t,!1,o.map(t=>{let{bidders:r,module:i}=t;return{allowed:r?.includes(e),bidders:r,module:i}}))})}),a&&!(0,I.isEmpty)(r)&&(r=function(e,t){let r=e[t];if(!r)return e;let i={};return i[t]=r,Object.entries(e).forEach(e=>{let[r,n]=e;r!==t&&(i[r]=n)}),i}(r,a));let o=Object.values(i).concat([r]).reduce((e,t)=>Object.assign(e,t),{});Object.assign(t,{global:r,bidder:i,combined:o})}()}},d=function(){let e,t,{mkDelay:r=S.delay}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,S.defer)(),o=(0,S.defer)(),a=!1;function s(r){return t=W().fork(),null!=e&&e.reject(X),e=(0,S.defer)(),S.PbPromise.race([r,e.promise]).finally(t.startTiming("userId.total"))}let d=i,u=$;function p(e){return function(){if(d===i&&u===$)return e(...arguments)}}function g(){return O.allConsent.promise.finally(t.startTiming("userId.init.consent"))}let f=s(S.PbPromise.all([y.ready,n.promise]).then(g).then(p(()=>{eg(d,u)})).then(()=>o.promise.finally(t.startTiming("userId.callbacks.pending"))).then(p(()=>{let e=d.submodules.filter(e=>(0,I.isFn)(e.callback));if(e.length)return new S.PbPromise(t=>J(e,t,d))})));return function(){let{refresh:e=!1,submoduleNames:t=null,ready:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i&&!a&&(a=!0,n.resolve(),c>0?o.resolve():m.on(b.EVENTS.AUCTION_END,function e(){m.off(b.EVENTS.AUCTION_END,e),r(l).then(o.resolve)})),e&&a&&(f=s(f.catch(()=>null).then(g).then(p(()=>{let e=eg(d,u.filter(e=>null==t||t.includes(e.submodule.name)),!0).filter(e=>null!=e.callback);if(e.length)return new S.PbPromise(t=>J(e,t,d))})))),f}}({mkDelay:r}),null!=s&&s(),F=[],s=e.getConfig("userSync",e=>{let t=e.userSync;if(t&&(o=t.ppid,a=t.firstEid,t.userIds)){q=t.userIds,l=(0,I.isNumber)(t.syncDelay)?t.syncDelay:D.USERSYNC_DEFAULT_CONFIG.syncDelay,c=(0,I.isNumber)(t.auctionDelay)?t.auctionDelay:D.USERSYNC_DEFAULT_CONFIG.auctionDelay,ey();var r=t.idPriority,n=F;if(r){let e={},t=new Map(n.map(e=>e.aliasName?[e.aliasName,e.name]:[]));Object.keys(r).forEach(i=>{let n=(0,I.isArray)(r[i])?[...r[i]].reverse():[];e[i]=n.map(e=>t.has(e)?t.get(e):e)}),L=e}else L={};i.refresh(),eb(n),d({ready:!0})}}),h.default.makeBidRequests.after(et),(0,g.getGlobal)().getUserIds=er,(0,g.getGlobal)().getUserIdsAsEids=ei,(0,g.getGlobal)().getEncryptedEidsForSource=eA(eo),(0,g.getGlobal)().registerSignalSources=es,(0,g.getGlobal)().refreshUserIds=eA(el),(0,g.getGlobal)().getUserIdsAsync=eA(ec),(0,g.getGlobal)().getUserIdsAsEidBySource=en})(f.config),(0,y.module)("userId",function(e){e.findRootDomain=T.findRootDomain,(F||[]).find(t=>t.name===e.name)||(F.push(e),O.GDPR_GVLIDS.register(C.MODULE_TYPE_UID,e.name,e.gvlid),ey(),d({refresh:!0,submoduleNames:[e.name]}))},{postInstallAllowed:!0}),(0,g.registerModule)("userId")},5470:function(e,t,r){"use strict";var i=r(3800),n=r(256),o=r(4030),a=r(7750),s=r(4321),d=r(836),l=r(3020);let c="9.53.2",u=["admixer.net","adserver.org","adsrvr.org","adtelligent.com","akamai.com","amxdt.net","audigent.com","britepool.com","criteo.com","crwdcntrl.net","deepintent.com","epsilon.com","hcn.health","id5-sync.com","idx.lat","intentiq.com","intimatemerger.com","liveintent.com","liveramp.com","mediawallahscript.com","merkleinc.com","netid.de","neustar.biz","nextroll.com","novatiq.com","pubcid.org","quantcast.com","tapad.com","uidapi.com","yahoo.com","zeotap.com"];function p(e,t){let r=e.bidder||e.bidderCode;return s.config.getConfig(`${r}.${t}`)}function g(e){return{w:parseInt(e[0]),h:parseInt(e[1])}}function f(e){return(0,a.isArray)(e)&&2===e.length&&!(0,a.isArray)(e[0])?[g(e)]:e.map(g)}function m(e){let t;return(0,a.deepAccess)(e,"params.pubId")?t=!0:(0,a.deepAccess)(e,"params.dcn")&&(0,a.deepAccess)(e,"params.pos")&&(t=!1),t}function h(e){let t=p(e,"mode");return void 0===(t=t?t.toLowerCase():void 0)||t===o.BANNER?o.BANNER:t===o.VIDEO?o.VIDEO:"all"===t?"*":void 0}function b(e){let t=h(e),r={currency:(0,a.deepAccess)(e,"params.bidOverride.cur")||"USD",mediaType:t,size:"*"};return!!(0,a.isFn)(e.getFloor)&&e.getFloor(r)}function y(e,t,r,i){let n={...i};for(let i in r)switch(e){case"string":-1!==t.indexOf(i)&&(0,a.isStr)(r[i])&&(n[i]=r[i]);break;case"number":-1!==t.indexOf(i)&&(0,a.isNumber)(r[i])&&(n[i]=r[i]);break;case"array":-1!==t.indexOf(i)&&(0,a.isArray)(r[i])&&(n[i]=r[i]);break;case"object":-1!==t.indexOf(i)&&(0,a.isPlainObject)(r[i])&&(n[i]=r[i]);break;case"objectAllKeys":(0,a.isPlainObject)(r)&&(n[i]=r[i])}return n}function v(e){return(0,a.isNumber)(e)&&e>0&&e<3600?e:300}function A(e){return(0,a.isStr)(e)&&e.length>0}function I(e,t){if(e){var r;let i,n,o,s,d,l,p,g,f={id:(0,a.generateUUID)(),cur:[b(e).currency||(0,a.deepAccess)(t,"params.bidOverride.cur")||"USD"],imp:[],site:{page:(0,a.deepAccess)(e,"refererInfo.page")},device:{dnt:0,ua:navigator.userAgent,ip:(0,a.deepAccess)(t,"params.bidOverride.device.ip")||(0,a.deepAccess)(t,"params.ext.ip")||void 0,w:window.screen.width,h:window.screen.height},regs:{ext:{us_privacy:e.uspConsent?e.uspConsent:"",gdpr:e.gdprConsent&&e.gdprConsent.gdprApplies?1:0,gpp:e.gppConsent?e.gppConsent.gppString:"",gpp_sid:e.gppConsent?e.gppConsent.applicableSections:[]}},source:{ext:{hb:1,adapterver:"1.1.0",prebidver:c,integration:{name:"prebid.js",ver:c}},fd:1},user:{ext:{consent:e.gdprConsent&&e.gdprConsent.gdprApplies?e.gdprConsent.consentString:"",eids:(0,a.isArray)((0,a.deepAccess)(t,"userIdAsEids"))?t.userIdAsEids.filter(e=>-1!==u.indexOf(e.source)):[]}}};!0===m(t)?(f.site.publisher={id:t.params.pubId},((0,a.deepAccess)(t,"params.bidOverride.site.id")||(0,a.deepAccess)(t,"params.siteId"))&&(f.site.id=(0,a.deepAccess)(t,"params.bidOverride.site.id")||t.params.siteId)):f.site.id=t.params.dcn,e.ortb2?.regs?.gpp&&(f.regs.ext.gpp=e.ortb2.regs.gpp,f.regs.ext.gpp_sid=e.ortb2.regs.gpp_sid),e.ortb2&&(r=f,i=t.ortb2,n=(0,a.deepAccess)(i,"site")||void 0,o=(0,a.deepAccess)(n,"content")||void 0,s=(0,a.deepAccess)(n,"publisher")||void 0,d=(0,a.deepAccess)(n,"content.data")||void 0,l=(0,a.deepAccess)(i,"app.content")||void 0,p=(0,a.deepAccess)(i,"app.content.data")||void 0,g=(0,a.deepAccess)(i,"user")||void 0,n&&(0,a.isPlainObject)(n)&&(r.site=y("string",["name","domain","page","ref","keywords","search"],n,r.site),r.site=y("array",["cat","sectioncat","pagecat"],n,r.site),r.site=y("object",["ext"],n,r.site)),s&&(0,a.isPlainObject)(s)&&(r.site.publisher=y("object",["ext"],s,r.site.publisher)),o&&(0,a.isPlainObject)(o)&&(r.site.content=y("string",["id","title","series","season","genre","contentrating","language"],o,r.site.content),r.site.content=y("number",["episode","prodq","context","livestream","len"],o,r.site.content),r.site.content=y("array",["cat"],o,r.site.content),r.site.content=y("object",["ext"],o,r.site.content),d&&(0,a.isArray)(d)&&d.every(e=>{let t={};t=y("string",["id","name"],e,t),t=y("array",["segment"],e,t),t=y("object",["ext"],e,t),r.site.content.data=[],r.site.content.data.push(t)})),l&&(0,a.isPlainObject)(l)&&p&&(0,a.isArray)(p)&&p.every(e=>{let t={};t=y("string",["id","name"],e,t),t=y("array",["segment"],e,t),t=y("object",["ext"],e,t),r.app={content:{data:[]}},r.app.content.data.push(t)}),g&&(0,a.isPlainObject)(g)&&(r.user=y("string",["id","buyeruid","gender","keywords","customdata"],g,r.user),r.user=y("number",["yob"],g,r.user),r.user=y("array",["data"],g,r.user),r.user.ext=y("object",["ext"],g,r.user.ext)),f=r);let h=(0,a.deepAccess)(t,"schain.nodes");return(0,a.isArray)(h)&&h.length>0&&(f.source.ext.schain=t.schain,f.source.ext.schain.nodes[0].rid=f.id),f}}function E(e,t){let r=h(e);if(t&&e){let i={id:e.bidId,secure:(0,a.deepAccess)(e,"params.bidOverride.imp.secure")??e.ortb2Imp?.secure??1,bidfloor:b(e)?.floor||(0,a.deepAccess)(e,"params.bidOverride.imp.bidfloor")};if(e.mediaTypes.banner&&(void 0===r||r===o.BANNER||"*"===r)&&(i.banner={mimes:e.mediaTypes.banner.mimes||["text/html","text/javascript","application/javascript","image/jpg"],format:f(e.sizes)},e.mediaTypes.banner.pos&&(i.banner.pos=e.mediaTypes.banner.pos)),e.mediaTypes.video&&(r===o.VIDEO||"*"===r)){let t=f(e.mediaTypes.video.playerSize);i.video={mimes:(0,a.deepAccess)(e,"params.bidOverride.imp.video.mimes")||e.mediaTypes.video.mimes||["video/mp4","application/javascript"],w:(0,a.deepAccess)(e,"params.bidOverride.imp.video.w")||t[0].w,h:(0,a.deepAccess)(e,"params.bidOverride.imp.video.h")||t[0].h,maxbitrate:(0,a.deepAccess)(e,"params.bidOverride.imp.video.maxbitrate")||e.mediaTypes.video.maxbitrate||void 0,maxduration:(0,a.deepAccess)(e,"params.bidOverride.imp.video.maxduration")||e.mediaTypes.video.maxduration||void 0,minduration:(0,a.deepAccess)(e,"params.bidOverride.imp.video.minduration")||e.mediaTypes.video.minduration||void 0,api:(0,a.deepAccess)(e,"params.bidOverride.imp.video.api")||e.mediaTypes.video.api||[2],delivery:(0,a.deepAccess)(e,"params.bidOverride.imp.video.delivery")||e.mediaTypes.video.delivery||void 0,pos:(0,a.deepAccess)(e,"params.bidOverride.imp.video.pos")||e.mediaTypes.video.pos||void 0,playbackmethod:(0,a.deepAccess)(e,"params.bidOverride.imp.video.playbackmethod")||e.mediaTypes.video.playbackmethod||void 0,placement:(0,a.deepAccess)(e,"params.bidOverride.imp.video.placement")||e.mediaTypes.video.placement||void 0,plcmt:(0,a.deepAccess)(e,"params.bidOverride.imp.video.plcmt")||e.mediaTypes.video.plcmt||void 0,linearity:(0,a.deepAccess)(e,"params.bidOverride.imp.video.linearity")||e.mediaTypes.video.linearity||1,protocols:(0,a.deepAccess)(e,"params.bidOverride.imp.video.protocols")||e.mediaTypes.video.protocols||[2,5],startdelay:(0,a.deepAccess)(e,"params.bidOverride.imp.video.startdelay")||e.mediaTypes.video.startdelay||0,rewarded:(0,a.deepAccess)(e,"params.bidOverride.imp.video.rewarded")||void 0}}if(i.ext={dfp_ad_unit_code:e.adUnitCode},(0,a.deepAccess)(e,"params.kvp")&&(0,a.isPlainObject)(e.params.kvp)){for(let t in i.ext.kvs={},e.params.kvp)if((0,a.isStr)(e.params.kvp[t])||(0,a.isNumber)(e.params.kvp[t]))i.ext.kvs[t]=e.params.kvp[t];else if((0,a.isArray)(e.params.kvp[t])){let r=e.params.kvp[t];(r.every(e=>(0,a.isStr)(e))||r.every(e=>(0,a.isNumber)(e)))&&(i.ext.kvs[t]=e.params.kvp[t])}}(0,a.deepAccess)(e,"ortb2Imp.ext.data")&&(0,a.isPlainObject)(e.ortb2Imp.ext.data)&&(i.ext.data=e.ortb2Imp.ext.data),(0,a.deepAccess)(e,"ortb2Imp.instl")&&(0,a.isNumber)(e.ortb2Imp.instl)&&1===e.ortb2Imp.instl&&(i.instl=e.ortb2Imp.instl),!1===m(e)?(i.tagid=e.params.pos,i.ext.pos=e.params.pos):(0,a.deepAccess)(e,"params.placementId")&&(i.tagid=e.params.placementId),t.imp.push(i)}}function S(e){let{payload:t,requestOptions:r,bidderRequest:i}=e,n=m(i),s=p(i,"endpoint"),d=s||"https://c2shb.pubgw.yahoo.com/bidRequest";if(!0===n&&(d=s||"https://c2shb.pubgw.yahoo.com/admax/bid/partners/PBJS"),!0===(0,a.deepAccess)(i,"params.testing.e2etest"))if((0,a.logInfo)("Adapter e2etest mode is active"),r.withCredentials=!1,!0===n)t.site.id="1234567";else{let e=h(i);t.site.id="8a969516017a7a396ec539d97f540011",t.imp.forEach(t=>{if(t.ext.e2eTestMode=!0,e===o.BANNER)t.tagid="8a969978017a7aaabab4ab0bc01a0009";else if(e===o.VIDEO)t.tagid="8a96958a017a7a57ac375d50c0c700cc";else{let e=i.bidderCode;(0,a.logWarn)(`e2etest mode does not support ${e}.mode="all". 
 Please specify either "banner" or "video"`),(0,a.logWarn)(`Adapter e2etest mode: Please make sure your adUnit matches the ${e}.mode video or banner`)}})}return{url:d,method:"POST",data:t,options:r,bidderRequest:i}}let _={code:"yahooAds",gvlid:25,aliases:[{code:"yahoossp",gvlid:25},{code:"yahooAdvertising",gvlid:25}],supportedMediaTypes:[o.BANNER,o.VIDEO],isBidRequestValid:function(e){let t=e.params;return!0===(0,a.deepAccess)(t,"testing.e2etest")||!!((0,a.isPlainObject)(t)&&(A(t.pubId)||A(t.dcn)&&A(t.pos)))||((0,a.logWarn)("Bidder params missing or incorrect, please pass object with either: dcn & pos OR pubId"),!1)},buildRequests:function(e,t){let r,i;if((0,a.isEmpty)(e)||(0,a.isEmpty)(t))return void(0,a.logWarn)('buildRequests called with either empty "validBidRequests" or "bidderRequest"');let n={contentType:"application/json",customHeaders:{"x-openrtb-version":"2.5"}};n.withCredentials=(0,l.hasPurpose1Consent)(t.gdprConsent);let s=(r=h(e[0]),i=[],r===o.BANNER?i=e.filter(e=>Object.keys(e.mediaTypes).some(e=>e===o.BANNER)):r===o.VIDEO?i=e.filter(e=>Object.keys(e.mediaTypes).some(e=>e===o.VIDEO)):"*"===r&&(i=e.filter(e=>Object.keys(e.mediaTypes).some(e=>e===o.BANNER||e===o.VIDEO))),i);if(!0===p(t,"singleRequestMode")){let e=I(t,s[0]);return s.forEach(t=>{E(t,e)}),[S({payload:e,requestOptions:n,bidderRequest:t})]}return s.map(e=>{let r=I(t,e);return E(e,r),S({payload:r,requestOptions:n,bidderRequest:e})})},interpretResponse:function(e,t){let{bidderRequest:r}=t,i=[];return e.body&&Array.isArray(e.body.seatbid)&&e.body.seatbid.forEach(e=>{let t,n,s;try{t=e.bid[0]}catch(e){return i}let l=t.ext&&t.ext.encp?t.ext.encp:t.price,c={adId:(0,a.deepAccess)(t,"adId")?t.adId:t.impid||t.crid,requestId:t.impid,cpm:l,width:t.w,height:t.h,creativeId:t.crid||0,currency:t.cur||"USD",dealId:t.dealid?t.dealid:null,netRevenue:!0,ttl:(n=p(r,"ttl"))?v(n):v((0,a.deepAccess)(r,"params.ttl")),meta:{advertiserDomains:t.adomain}},u=-1!==(s=t.adm).indexOf("o2playerSettings")||-1!==s.indexOf("YAHOO.VideoPlatform.VideoPlayer")||-1!==s.indexOf("AdPlacement")?o.BANNER:-1!==s.indexOf("VAST")?o.VIDEO:void 0;u===o.BANNER?(c.mediaType=o.BANNER,c.ad=t.adm,c.meta.mediaType=o.BANNER):u===o.VIDEO&&(c.mediaType=o.VIDEO,c.meta.mediaType=o.VIDEO,c.vastXml=t.adm),"outstream"!==(0,a.deepAccess)(r,"mediaTypes.video.context")||r.renderer||c.mediaType!==o.VIDEO||(c.renderer=function(e,t){let r=d.Renderer.install({url:"https://s.yimg.com/kp/prebid-outstream-renderer/renderer.js",loaded:!1,adUnitCode:e.adUnitCode});try{r.setRender(function(t){setTimeout(function(){o2PlayerRender(t)},(0,a.deepAccess)(e,"params.testing.renderer.setTimeout")||700)})}catch(e){(0,a.logWarn)("Renderer error: setRender() failed",e)}return r}(r,0)||void 0),i.push(c)}),i},getUserSyncs:function(e,t,r,i,n){let o=!(0,a.isEmpty)(t)&&t[0].body;if(o&&o.ext&&o.ext.pixels){let t=function(e,t){let r=/\w*(?=\s)/,i=/src=("|')(.*?)\1/,n=[];if(t){let o=t.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);o&&o.forEach(t=>{let o=t.match(r)[0],a=t.match(i)[2];if(o&&a){let t="img"===o.toLowerCase()?"image":"iframe";if(!e.iframeEnabled&&"iframe"===t||!e.pixelEnabled&&"image"===t)return;n.push({type:t,url:a})}})}return n}(e,o.ext.pixels);return t.forEach(e=>{e.url=function(e,t){let r={gdpr_consent:t.gdpr?t.gdpr.consentString:"",gdpr:t.gdpr&&t.gdpr.gdprApplies?"1":"0",us_privacy:t.uspConsent?t.uspConsent:"",gpp:t.gpp?t.gpp.gppString:"",gpp_sid:t.gpp&&Array.isArray(t.gpp.applicableSections)?t.gpp.applicableSections.join(","):""},i=new URL(e),n=i.searchParams;for(let[e,t]of Object.entries(r))n.set(e,t);return i.search=n.toString(),i.toString()}(e.url,{gpp:n,gdpr:r,uspConsent:i})}),t}return[]}};(0,n.registerBidder)(_),(0,i.registerModule)("yahooAdsBidAdapter")},836:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=d,t.executeRenderer=function(e,t,r){let i=null;e.config&&e.config.documentResolver&&(i=e.config.documentResolver(t,document,r)),i||(i=document),e.documentContext=i,e.render(t,e.documentContext)},t.isRendererRequired=function(e){return!!(e&&(e.url||e.renderNow))};var i=r(4389),n=r(7750),o=r(3800),a=r(4767);let s=(0,o.getGlobal)();function d(e){let{url:t,config:r,id:o,callback:d,loaded:l,adUnitCode:c,renderNow:u}=e;this.url=t,this.config=r,this.handlers={},this.id=o,this.renderNow=u,this.adUnitCode=c,this.loaded=l,this.cmd=[],this.push=e=>{"function"!=typeof e?(0,n.logError)("Commands given to Renderer.push must be wrapped in a function"):this.loaded?e.call():this.cmd.push(e)},this.callback=d||(()=>{this.loaded=!0,this.process()}),this.render=(function(){let e=arguments,r=()=>{this._render?this._render.apply(this,e):(0,n.logWarn)("No render function was provided, please use .setRender on the renderer")};!function(e){let t=s.adUnits.find(t=>t.code===e);if(!t)return!1;let r=t?.renderer,i=!!(r&&r.url&&r.render),n=t?.mediaTypes?.video?.renderer,o=!!(n&&n.url&&n.render);return!!(i&&!0!==r.backupOnly||o&&!0!==n.backupOnly)}(c)?u?r():(this.cmd.unshift(r),(0,i.loadExternalScript)(t,a.MODULE_TYPE_PREBID,"outstream",this.callback,this.documentContext)):((0,n.logWarn)(`External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ${c}`),r())}).bind(this)}d.install=function(e){let{url:t,config:r,id:i,callback:n,loaded:o,adUnitCode:a,renderNow:s}=e;return new d({url:t,config:r,id:i,callback:n,loaded:o,adUnitCode:a,renderNow:s})},d.prototype.getConfig=function(){return this.config},d.prototype.setRender=function(e){this._render=e},d.prototype.setEventHandlers=function(e){this.handlers=e},d.prototype.handleVideoEvent=function(e){let{id:t,eventName:r}=e;"function"==typeof this.handlers[r]&&this.handlers[r](),(0,n.logMessage)(`Prebid Renderer event for id ${t} type ${r}`)},d.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){(0,n.logError)(`Error processing Renderer command on ad unit '${this.adUnitCode}':`,e)}}},2276:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOAD_EXTERNAL_SCRIPT=t.ACTIVITY_TRANSMIT_UFPD=t.ACTIVITY_TRANSMIT_TID=t.ACTIVITY_TRANSMIT_PRECISE_GEO=t.ACTIVITY_TRANSMIT_EIDS=t.ACTIVITY_SYNC_USER=t.ACTIVITY_REPORT_ANALYTICS=t.ACTIVITY_FETCH_BIDS=t.ACTIVITY_ENRICH_UFPD=t.ACTIVITY_ENRICH_EIDS=t.ACTIVITY_ACCESS_DEVICE=void 0,t.ACTIVITY_ACCESS_DEVICE="accessDevice",t.ACTIVITY_SYNC_USER="syncUser",t.ACTIVITY_ENRICH_UFPD="enrichUfpd",t.ACTIVITY_ENRICH_EIDS="enrichEids",t.ACTIVITY_FETCH_BIDS="fetchBids",t.ACTIVITY_REPORT_ANALYTICS="reportAnalytics",t.ACTIVITY_TRANSMIT_EIDS="transmitEids",t.ACTIVITY_TRANSMIT_UFPD="transmitUfpd",t.ACTIVITY_TRANSMIT_PRECISE_GEO="transmitPreciseGeo",t.ACTIVITY_TRANSMIT_TID="transmitTid",t.LOAD_EXTERNAL_SCRIPT="loadExternalScript"},958:function(e,t,r){"use strict";var i=r(5824);Object.defineProperty(t,"__esModule",{value:!0}),t.activityParams=void 0;var n=i(r(6553));t.activityParams=(0,r(8839).activityParamsBuilder)(e=>n.default.resolveAlias(e))},4767:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_TYPE_UID=t.MODULE_TYPE_RTD=t.MODULE_TYPE_PREBID=t.MODULE_TYPE_BIDDER=t.MODULE_TYPE_ANALYTICS=void 0,t.MODULE_TYPE_PREBID="prebid",t.MODULE_TYPE_BIDDER="bidder",t.MODULE_TYPE_UID="userId",t.MODULE_TYPE_RTD="rtd",t.MODULE_TYPE_ANALYTICS="analytics"},8839:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ACTIVITY_PARAM_SYNC_URL=t.ACTIVITY_PARAM_SYNC_TYPE=t.ACTIVITY_PARAM_STORAGE_TYPE=t.ACTIVITY_PARAM_S2S_NAME=t.ACTIVITY_PARAM_COMPONENT_TYPE=t.ACTIVITY_PARAM_COMPONENT_NAME=t.ACTIVITY_PARAM_COMPONENT=t.ACTIVITY_PARAM_ANL_CONFIG=t.ACTIVITY_PARAM_ADAPTER_CODE=void 0,t.activityParamsBuilder=function(e){return function(t,r,n){let c={[a]:t,[s]:r,[o]:`${t}.${r}`};return t===i.MODULE_TYPE_BIDDER&&(c[d]=e(r)),l(Object.assign(c,n))}},t.buildActivityParams=void 0;var i=r(4767),n=r(1620);let o=t.ACTIVITY_PARAM_COMPONENT="component",a=t.ACTIVITY_PARAM_COMPONENT_TYPE=o+"Type",s=t.ACTIVITY_PARAM_COMPONENT_NAME=o+"Name",d=t.ACTIVITY_PARAM_ADAPTER_CODE="adapterCode";t.ACTIVITY_PARAM_STORAGE_TYPE="storageType",t.ACTIVITY_PARAM_S2S_NAME="configName",t.ACTIVITY_PARAM_SYNC_TYPE="syncType",t.ACTIVITY_PARAM_SYNC_URL="syncUrl",t.ACTIVITY_PARAM_ANL_CONFIG="_config";let l=t.buildActivityParams=(0,n.hook)("sync",e=>e)},9961:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ORTB_UFPD_PATHS=t.ORTB_IPV6_PATHS=t.ORTB_IPV4_PATHS=t.ORTB_GEO_PATHS=t.ORTB_EIDS_PATHS=void 0,t.appliesWhenActivityDenied=b,t.isData=h,t.objectTransformer=f,t.ortb2TransmitRules=y,t.redactRule=g,t.redactor=void 0,t.redactorFactory=v,t.sessionedApplies=m;var i=r(7750),n=r(4321),o=r(5110),a=r(2276),s=r(4391);let d=t.ORTB_UFPD_PATHS=["data","ext.data","yob","gender","keywords","kwarray","id","buyeruid","customdata"].map(e=>`user.${e}`).concat("device.ext.cdep"),l=t.ORTB_EIDS_PATHS=["user.eids","user.ext.eids"],c=t.ORTB_GEO_PATHS=["user.geo.lat","user.geo.lon","device.geo.lat","device.geo.lon"],u=t.ORTB_IPV4_PATHS=["device.ip"],p=t.ORTB_IPV6_PATHS=["device.ipv6"];function g(e){return Object.assign({get(){},run(e,t,r,i,n){let o=r&&r[i];if(h(o)&&n()){let e=this.get(o);void 0===e?delete r[i]:r[i]=e}}},e)}function f(e){return e.forEach(e=>{e.paths=e.paths.map(e=>{let t=e.split("."),r=t.pop();return[t.length>0?t.join("."):null,r]})}),function(t,r){let n=[];for(var o=arguments.length,a=Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];let d=m(t,...a);return e.forEach(e=>{if(!1!==t[e.name])for(let[o,a]of e.paths){let s=null==o?r:(0,i.deepAccess)(r,o);if(n.push(e.run(r,o,s,a,d.bind(null,e))),!1===t[e.name])return}}),n.filter(e=>null!=e)}}function m(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return function(t){return e.hasOwnProperty(t.name)||(e[t.name]=!!t.applies(...r)),e[t.name]}}function h(e){return null!=e&&("object"!=typeof e||Object.keys(e).length>0)}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.isActivityAllowed;return function(r){return!t(e,r)}}function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.isActivityAllowed;return[{name:a.ACTIVITY_TRANSMIT_UFPD,paths:d,applies:b(a.ACTIVITY_TRANSMIT_UFPD,e)},{name:a.ACTIVITY_TRANSMIT_EIDS,paths:l,applies:b(a.ACTIVITY_TRANSMIT_EIDS,e)},{name:a.ACTIVITY_TRANSMIT_PRECISE_GEO,paths:c,applies:b(a.ACTIVITY_TRANSMIT_PRECISE_GEO,e),get:e=>Math.round((e+Number.EPSILON)*100)/100},{name:a.ACTIVITY_TRANSMIT_PRECISE_GEO,paths:u,applies:b(a.ACTIVITY_TRANSMIT_PRECISE_GEO,e),get:e=>(0,s.scrubIPv4)(e)},{name:a.ACTIVITY_TRANSMIT_PRECISE_GEO,paths:p,applies:b(a.ACTIVITY_TRANSMIT_PRECISE_GEO,e),get:e=>(0,s.scrubIPv6)(e)},{name:a.ACTIVITY_TRANSMIT_TID,paths:["source.tid"],applies:b(a.ACTIVITY_TRANSMIT_TID,e)}].map(g)}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.isActivityAllowed,t=f(y(e)),r=f(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.isActivityAllowed;return[{name:a.ACTIVITY_TRANSMIT_EIDS,paths:["userId","userIdAsEids"],applies:b(a.ACTIVITY_TRANSMIT_EIDS,e)},{name:a.ACTIVITY_TRANSMIT_TID,paths:["ortb2Imp.ext.tid"],applies:b(a.ACTIVITY_TRANSMIT_TID,e)}].map(g)}(e));return function(e){let i={};return{ortb2:r=>(t(i,r,e),r),bidRequest:t=>(r(i,t,e),t)}}}t.redactor=v(),(0,o.registerActivityControl)(a.ACTIVITY_TRANSMIT_TID,"enableTIDs config",()=>{if(!n.config.getConfig("enableTIDs"))return{allow:!1,reason:"TIDs are disabled"}})},5110:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerActivityControl=t.isActivityAllowed=void 0,t.ruleRegistry=o;var i=r(7750),n=r(8839);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.prefixLog)("Activity control:"),t={};function r(e){return t[e]=t[e]||[]}let o={};function a(t){let{activity:r,name:i,allow:n,reason:a,component:s}=t,d=`${i} ${n?"allowed":"denied"} '${r}' for '${s}'${a?":":""}`,l=o.hasOwnProperty(d);if(l&&clearTimeout(o[d]),o[d]=setTimeout(()=>delete o[d],1e3),!l){let t=[d];a&&t.push(a),(n?e.logInfo:e.logWarn).apply(e,t)}}return[function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=r(e),a=o.findIndex(e=>{let[t]=e;return n<t}),s=[n,t,i];return o.splice(a<0?o.length:a,0,s),function(){let e=o.indexOf(s);e>=0&&o.splice(e,1)}},function(t,i){let o,s;for(let[d,l,c]of r(t)){if(o!==d&&s)break;o=d;let r=function(t,r,i,o){let a;try{a=i(o)}catch(i){e.logError(`Exception in rule ${r} for '${t}'`,i),a={allow:!1,reason:i}}return a&&Object.assign({activity:t,name:r,component:o[n.ACTIVITY_PARAM_COMPONENT]},a)}(t,l,c,i);if(r)if(!r.allow)return a(r),!1;else s=r}return s&&a(s),!0}]}let[a,s]=o();t.isActivityAllowed=s,t.registerActivityControl=a},6e3:function(e,t,r){"use strict";var i=r(5824);Object.defineProperty(t,"__esModule",{value:!0}),t.deferRendering=V,t.doRender=void 0,t.emitAdRenderFail=w,t.emitAdRenderSucceeded=x,t.getRenderingData=t.getBidToRender=void 0,t.handleCreativeEvent=R,t.handleNativeMessage=D,t.handleRender=B,t.insertLocatorFrame=function e(){if(!window.frames[a.PB_LOCATOR])if(document.body){let e=(0,n.createInvisibleIframe)();e.name=a.PB_LOCATOR,document.body.appendChild(e)}else window.requestAnimationFrame(e)},t.markBidAsRendered=U,t.markWinner=$,t.markWinningBid=void 0,t.renderAdDirect=function(e,t,r){var i;let o;function s(e,r){w(Object.assign({id:t,bid:o},{reason:e,message:r}))}function d(t,r){let i=e.defaultView?.frameElement;i&&(t&&(i.width=t,i.style.width&&(i.style.width=`${t}px`)),r&&(i.height=r,i.style.height&&(i.style.height=`${r}px`)))}let l=(i={resizeFn:d},function(e,t,r){P.hasOwnProperty(e)&&P[e](t,r,i)});function c(t){t.ad?(e.write(t.ad),e.close(),x({doc:e,bid:o,id:o.adId})):(0,u.getCreativeRenderer)(o).then(r=>r(t,{sendMessage:(e,t)=>l(e,t,o),mkFrame:n.createIframe},e.defaultView)).then(()=>x({doc:e,bid:o,id:o.adId}),e=>{s(e?.reason||a.AD_RENDER_FAILED_REASON.EXCEPTION,e?.message),e?.stack&&(0,n.logError)(e)});let r=document.createComment(`Creative ${o.creativeId} served by ${o.bidder} Prebid.js Header Bidding`);(0,n.insertElement)(r,e,"html")}try{t&&e?O(t).then(i=>{o=i,B({renderFn:c,resizeFn:d,adId:t,options:{clickUrl:r?.clickThrough},bidResponse:i,doc:e})}):s(a.AD_RENDER_FAILED_REASON.MISSING_DOC_OR_ADID,`missing ${t?"doc":"adId"}`)}catch(e){s(T,e.message)}},t.renderIfDeferred=q;var n=r(7750),o=v(r(2506)),a=r(8878),s=r(4321),d=r(836),l=r(4030),c=r(1171),u=r(5820),p=r(1620),g=r(6680),f=r(2442),m=i(r(6553)),h=r(7557),b=r(750),y=r(4576);function v(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(v=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let{AD_RENDER_FAILED:A,AD_RENDER_SUCCEEDED:I,STALE_RENDER:E,BID_WON:S,EXPIRED_RENDER:_}=a.EVENTS,{EXCEPTION:T}=a.AD_RENDER_FAILED_REASON,O=t.getBidToRender=(0,p.hook)("sync",function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.GreedyPromise.resolve();return t.then(t=>t??c.auctionManager.findBidByAdId(e)).catch(e=>{(0,n.logError)("Error getting bid to render:",e)})}),C=t.markWinningBid=(0,p.hook)("sync",function(e){((0,b.parseEventTrackers)(e.eventtrackers)[b.EVENT_TYPE_WIN]?.[b.TRACKER_METHOD_IMG]||[]).forEach(e=>(0,n.triggerPixel)(e)),o.emit(S,e),c.auctionManager.addWinningBid(e)});function w(e){let{reason:t,message:r,bid:i,id:a}=e,s={reason:t,message:r};i&&(s.bid=i,s.adId=i.adId),a&&(s.adId=a),(0,n.logError)(`Error rendering ad (id: ${a}): ${r}`),o.emit(A,s)}function x(e){let{doc:t,bid:r,id:i}=e,n={doc:t};r&&(n.bid=r),i&&(n.adId=i),m.default.callAdRenderSucceededBidder(r.adapterCode||r.bidder,r),o.emit(I,n)}function R(e,t){switch(e.event){case a.EVENTS.AD_RENDER_FAILED:w({bid:t,id:t.adId,reason:e.info.reason,message:e.info.message});break;case a.EVENTS.AD_RENDER_SUCCEEDED:x({doc:null,bid:t,id:t.adId});break;default:(0,n.logError)(`Received event request for unsupported event: '${e.event}' (adId: '${t.adId}')`)}}function D(e,t,r){let{resizeFn:i,fireTrackers:n=g.fireNativeTrackers}=r;"resizeNativeHeight"===e.action?i(e.width,e.height):n(e,t)}let P={[a.MESSAGES.EVENT]:R};P[a.MESSAGES.NATIVE]=D;let k=t.getRenderingData=(0,p.hook)("sync",function(e,t){let{ad:r,adUrl:i,cpm:o,originalCpm:a,width:s,height:d,instl:l}=e,c={AUCTION_PRICE:a||o,CLICKTHROUGH:t?.clickUrl||""};return{ad:(0,n.replaceMacros)(r,c),adUrl:(0,n.replaceMacros)(i,c),width:s,height:d,instl:l}}),N=t.doRender=(0,p.hook)("sync",function(e){let{renderFn:t,resizeFn:r,bidResponse:i,options:o,doc:s,isMainDocument:d=s===document&&!(0,n.inIframe)()}=e,c=i.mediaType===l.VIDEO;if(d||c)return void w({reason:a.AD_RENDER_FAILED_REASON.PREVENT_WRITING_ON_MAIN_DOCUMENT,message:c?"Cannot render video ad without a renderer":"renderAd was prevented from writing to the main document.",bid:i,id:i.adId});let u=k(i,o);t(Object.assign({adId:i.adId},u));let{width:p,height:g}=u;(p??g)!=null&&r(p,g)});function B(e){let{renderFn:t,resizeFn:r,adId:i,options:d,bidResponse:l,doc:c}=e;V(l,()=>{if(null==l)return void w({reason:a.AD_RENDER_FAILED_REASON.CANNOT_FIND_AD,message:`Cannot find ad '${i}'`,id:i});if(!(l.status===a.BID_STATUS.RENDERED&&((0,n.logWarn)(`Ad id ${i} has been rendered before`),o.emit(E,l),s.config.getConfig("auctionOptions")?.suppressStaleRender))){if(!(!y.filters.isBidNotExpired(l)&&((0,n.logWarn)(`Ad id ${i} has been expired`),o.emit(_,l),s.config.getConfig("auctionOptions")?.suppressExpiredRender)))try{N({renderFn:t,resizeFn:r,bidResponse:l,options:d,doc:c})}catch(e){w({reason:a.AD_RENDER_FAILED_REASON.EXCEPTION,message:e.message,id:i,bid:l})}}})}function U(e){let t=(0,h.useMetrics)(e.metrics);t.checkpoint("bidRender"),t.timeBetween("bidWon","bidRender","render.deferred"),t.timeBetween("auctionEnd","bidRender","render.pending"),t.timeBetween("requestBids","bidRender","render.e2e"),e.status=a.BID_STATUS.RENDERED}N.before(function(e,t){let{bidResponse:r,doc:i}=t;(0,d.isRendererRequired)(r.renderer)?((0,d.executeRenderer)(r.renderer,r,i),x({doc:i,bid:r,id:r.adId}),e.bail()):e(t)},100);let j=new WeakMap,M=new WeakSet;function V(e,t){null==e?t():(j.set(e,t),e.deferRendering||q(e),$(e))}function $(e){M.has(e)||(M.add(e),C(e))}function q(e){let t=j.get(e);t&&(t(),U(e),j.delete(e))}},9186:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerVideoSupport=function(e,t){o.adServers=o.adServers||{},o.adServers[e]=o.adServers[e]||{},Object.keys(t).forEach(r=>{o.adServers[e][r]?(0,n.logWarn)(`Attempting to add an already registered function property ${r} for AdServer ${e}.`):o.adServers[e][r]=t[r]})};var i=r(3800),n=r(7750);let o=(0,i.getGlobal)()},4979:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAuctionsCounter=function(e){return r?.[e]?.auctionsCounter||0},t.getBidderRequestsCounter=function(e,t){return r?.[e]?.bidders?.[t]?.requestsCounter||0},t.getBidderWinsCounter=function(e,t){return r?.[e]?.bidders?.[t]?.winsCounter||0},t.getRequestsCounter=function(e){return r?.[e]?.requestsCounter||0},t.incrementAuctionsCounter=function(e){return i(e,"auctionsCounter")},t.incrementBidderRequestsCounter=function(e,t){return i(e,"requestsCounter",t)},t.incrementBidderWinsCounter=function(e,t){return i(e,"winsCounter",t)},t.incrementRequestsCounter=function(e){return i(e,"requestsCounter")},t.reset=function(){r={}};let r={};function i(e,t,i){let n,o=(n=r[e]=r[e]||{bidders:{}},i?n.bidders[i]=n.bidders[i]||{}:n);return o[t]=(o[t]||0)+1,o[t]}},7292:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}},6553:function(e,t,r){"use strict";let i;Object.defineProperty(t,"__esModule",{value:!0}),t.PBS_ADAPTER_NAME=t.PARTITIONS=void 0,t._filterBidsForAdUnit=U,t._partitionBidders=$,Object.defineProperty(t,"coppaDataHandler",{enumerable:!0,get:function(){return p.coppaDataHandler}}),t.filterBidsForAdUnit=t.dep=t.default=void 0,Object.defineProperty(t,"gdprDataHandler",{enumerable:!0,get:function(){return p.gdprDataHandler}}),t.getS2SBidderSet=V,Object.defineProperty(t,"gppDataHandler",{enumerable:!0,get:function(){return p.gppDataHandler}}),t.partitionBidders=void 0,t.s2sActivityParams=N,t.setupAdUnitMediaTypes=void 0,Object.defineProperty(t,"uspDataHandler",{enumerable:!0,get:function(){return p.uspDataHandler}});var n=r(7750),o=r(6680),a=r(256),s=r(7581),d=r(4321),l=r(1620),c=r(4979),u=r(783),p=r(3029),g=S(r(2506)),f=r(8878),m=r(7557),h=r(1171),b=r(4767),y=r(5110),v=r(2276),A=r(8839),I=r(9961),E=r(750);function S(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(S=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let _=t.PBS_ADAPTER_NAME="pbsBidAdapter",T=t.PARTITIONS={CLIENT:"client",SERVER:"server"},O=t.dep={isAllowed:y.isActivityAllowed,redact:I.redactor},C={},w=C.bidderRegistry={},x=C.aliasRegistry={},R=[];d.config.getConfig("s2sConfig",e=>{e&&e.s2sConfig&&(R=(0,n.isArray)(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])});var D={};let P=(0,A.activityParamsBuilder)(e=>C.resolveAlias(e));function k(e){return e.configName??e.name}function N(e){return P(b.MODULE_TYPE_PREBID,_,{[A.ACTIVITY_PARAM_S2S_NAME]:k(e)})}let B=(0,l.hook)("sync",function(e){let{bidderCode:t,auctionId:r,bidderRequestId:i,adUnits:o,src:a,metrics:s}=e;return o.reduce((e,o)=>{let d=o.bids.filter(e=>e.bidder===t);return null==t&&0===d.length&&null!=o.s2sBid&&d.push({bidder:null}),e.push(d.reduce((e,d)=>{let l=null==(d=Object.assign({},d,{ortb2Imp:(0,n.mergeDeep)({},o.ortb2Imp,d.ortb2Imp)},(0,n.getDefinedParams)(o,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?o.mediaTypes:d.mediaTypes;return(0,n.isValidMediaTypes)(l)?d=Object.assign({},d,{mediaTypes:l}):(0,n.logError)(`mediaTypes is not correctly configured for adunit ${o.code}`),"client"===a&&(0,c.incrementBidderRequestsCounter)(o.code,t),e.push(Object.assign({},d,{adUnitCode:o.code,transactionId:o.transactionId,adUnitId:o.adUnitId,sizes:l?.banner?.sizes||l?.video?.playerSize||[],bidId:d.bid_id||(0,n.getUniqueIdentifierStr)(),bidderRequestId:i,auctionId:r,src:a,metrics:s,auctionsCount:(0,c.getAuctionsCounter)(o.code),bidRequestsCount:(0,c.getRequestsCounter)(o.code),bidderRequestsCount:(0,c.getBidderRequestsCounter)(o.code,d.bidder),bidderWinsCount:(0,c.getBidderWinsCounter)(o.code,d.bidder),deferBilling:!!o.deferBilling,viewability:o.viewability||0})),e},[])),e},[]).reduce(n.flatten,[]).filter(e=>""!==e)},"getBids");function U(e,t){let{getS2SBidders:r=V}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==t)return e;{let i=r(t);return e.filter(e=>{if(!i.has(e.pbsHost??e.bidder))return!1;if(null==e.s2sConfigName)return!0;let r=k(t);return(Array.isArray(e.s2sConfigName)?e.s2sConfigName:[e.s2sConfigName]).includes(r)})}}let j=t.filterBidsForAdUnit=(0,l.hook)("sync",U,"filterBidsForAdUnit"),M=t.setupAdUnitMediaTypes=(0,l.hook)("sync",(e,t)=>e,"setupAdUnitMediaTypes");function V(e){(0,n.isArray)(e)||(e=[e]);let t=new Set([null]);return e.filter(e=>e&&e.enabled).flatMap(e=>e.bidders).forEach(e=>t.add(e)),t}function $(e,t){let{getS2SBidders:r=V}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r(t);return(0,n.getBidderCodes)(e).reduce((e,t)=>{let{bidder:r,pbsHost:n}=t;return e[i.has(n||r)?T.SERVER:T.CLIENT].push(r),e},{[T.CLIENT]:[],[T.SERVER]:[]})}let q=t.partitionBidders=(0,l.hook)("sync",$,"partitionBidders");function L(e,t){let r=w[e],i=r?.getSpec&&r.getSpec();if(i&&i[t]&&"function"==typeof i[t])return[i,i[t]]}function F(e,t,r,i){try{(0,n.logInfo)(`Invoking ${e}.${t}`);for(var o=arguments.length,a=Array(o>4?o-4:0),s=4;s<o;s++)a[s-4]=arguments[s];d.config.runWithBidder(e,i.bind(r,...a))}catch(r){(0,n.logWarn)(`Error calling ${t} of ${e}`)}}function W(e,t,r){if(r?.source!==f.S2S.SRC){let i=L(e,t);null!=i&&F(e,t,...i,r)}}C.makeBidRequests=(0,l.hook)("sync",function(e,t,r,i,a){var s;let l,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},y=arguments.length>6?arguments[6]:void 0;y=(0,m.useMetrics)(y),g.emit(f.EVENTS.BEFORE_REQUEST_BIDS,e),(0,o.decorateAdUnitsWithNativeParams)(e),e.map(e=>e.code).filter(n.uniques).forEach(c.incrementAuctionsCounter),e.forEach(e=>{(0,n.isPlainObject)(e.mediaTypes)||(e.mediaTypes={}),e.bids=e.bids.filter(e=>!e.bidder||O.isAllowed(v.ACTIVITY_FETCH_BIDS,P(b.MODULE_TYPE_BIDDER,e.bidder))),(0,c.incrementRequestsCounter)(e.code)});let{[T.CLIENT]:A,[T.SERVER]:I}=q(e=M(e,a),R);d.config.getConfig("bidderSequence")===d.RANDOM&&(A=(0,n.shuffle)(A));let E=(0,u.getRefererInfo)(),S=[],C=h.global||{},x=h.bidder||{};function D(e,t){let i,o=O.redact(null!=t?t:P(b.MODULE_TYPE_BIDDER,e.bidderCode)),a=(0,n.mergeDeep)({source:{tid:r}},C,x[e.bidderCode]);Array.isArray(i=a.user?.eids)&&i.length&&(a.user.ext=a.user.ext||{},a.user.ext.eids=[...a.user.ext.eids||[],...i],delete a.user.eids);let s=Object.freeze(o.ortb2(a));return e.ortb2=s,e.bids=e.bids.map(e=>(e.ortb2=s,o.bidRequest(e))),e}R.forEach(i=>{let o=N(i);if(i&&i.enabled&&O.isAllowed(v.ACTIVITY_FETCH_BIDS,o)){var a;let s,d,{adUnits:l,hasModuleBids:c}=(a=e,s=(0,n.deepClone)(a),d=!1,s.forEach(e=>{let t=e.bids.filter(e=>e.module===_&&e.params?.configName===k(i));1===t.length?(e.s2sBid=t[0],d=!0,e.ortb2Imp=(0,n.mergeDeep)({},e.s2sBid.ortb2Imp,e.ortb2Imp)):t.length>1&&(0,n.logWarn)('Multiple "module" bids for the same s2s configuration; all will be ignored',t),e.bids=j(e.bids,i).map(e=>(e.bid_id=(0,n.getUniqueIdentifierStr)(),e))}),{adUnits:s=s.filter(e=>(!i.filterBidderlessCalls||1!==e.bids.length||null!=e.bids[0].bidder)&&(0!==e.bids.length||null!=e.s2sBid)),hasModuleBids:d}),u=(0,n.generateUUID)();(0===I.length&&c?[null]:I).forEach(e=>{let a=(0,n.getUniqueIdentifierStr)(),s=y.fork(),d=B({bidderCode:e,auctionId:r,bidderRequestId:a,adUnits:(0,n.deepClone)(l),src:f.S2S.SRC,metrics:s}),c=d?.find(e=>e.pbsHost)?.pbsHost,p=D({bidderCode:e,auctionId:r,bidderRequestId:a,uniquePbsTid:u,bids:d,auctionStart:t,pbsHost:c,timeout:i.timeout,src:f.S2S.SRC,refererInfo:E,metrics:s},o);0!==p.bids.length&&S.push(p)}),l.forEach(e=>{let t=e.bids.filter(e=>S.find(t=>t.bids.find(t=>t.bidId===e.bid_id)));e.bids=t}),S.forEach(e=>{void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=l.filter(e=>e.bids.length>0||null!=e.s2sBid)),e.adUnitsS2SCopy[0]?.bidPoolId&&(e.bidPoolId=e.adUnitsS2SCopy[0].bidPoolId),e.adUnitsS2SCopy[0]?.passiveBidPoolId&&(e.passiveBidPoolId=e.adUnitsS2SCopy[0].passiveBidPoolId)})}});let U=(s=e,(l=(0,n.deepClone)(s)).forEach(e=>{e.bids=j(e.bids,null)}),l=l.filter(e=>0!==e.bids.length));return A.forEach(e=>{let o=(0,n.getUniqueIdentifierStr)(),s=y.fork(),d=D({bidderCode:e,auctionId:r,bidderRequestId:o,bids:B({bidderCode:e,auctionId:r,bidderRequestId:o,adUnits:(0,n.deepClone)(U),labels:a,src:"client",metrics:s}),auctionStart:t,timeout:i,refererInfo:E,metrics:s}),l=w[e];l||(0,n.logError)(`Trying to make a request for bidder that does not exist: ${e}`),l&&d.bids&&0!==d.bids.length&&(U[0]?.bidPoolId&&(d.bidPoolId=U[0].bidPoolId),U[0]?.passiveBidPoolId&&(d.passiveBidPoolId=U[0].passiveBidPoolId),S.push(d))}),S.forEach(e=>{p.gdprDataHandler.getConsentData()&&(e.gdprConsent=p.gdprDataHandler.getConsentData()),p.uspDataHandler.getConsentData()&&(e.uspConsent=p.uspDataHandler.getConsentData()),p.gppDataHandler.getConsentData()&&(e.gppConsent=p.gppDataHandler.getConsentData())}),S},"makeBidRequests"),C.callBids=function(e,t,r,i,o,a,l){let c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(!t.length)return void(0,n.logWarn)("callBids executed with no bidRequests.  Were they filtered by labels or sizing?");let[u,p]=t.reduce((e,t)=>(e[Number(void 0!==t.src&&t.src===f.S2S.SRC)].push(t),e),[[],[]]);var m=[];p.forEach(e=>{for(var t=-1,r=0;r<m.length;++r)if(e.uniquePbsTid===m[r].uniquePbsTid){t=r;break}t<=-1&&m.push(e)});let h=0;R.forEach(e=>{let t=m[h];if(e&&t&&V(e).has(t.pbsHost||t.bidderCode)){let d=(0,s.ajaxBuilder)(a,o?{request:o.request.bind(null,"s2s"),done:o.done}:void 0),u=e.bidders,m=w[e.adapter],b=t.uniquePbsTid,y=t.adUnitsS2SCopy,v=p.filter(e=>e.uniquePbsTid===b);if(m){let t={ad_units:y,s2sConfig:e,ortb2Fragments:c,requestBidsTimeout:a};if(t.ad_units.length){let e=v.map(e=>(e.start=(0,n.timestamp)(),function(t){t||l(e.bidderRequestId),i.apply(e,arguments)})),o=(0,n.getBidderCodes)(t.ad_units).filter(e=>{let{bidder:t,pbsHost:r}=e;return u.includes(r)||u.includes(t)});(0,n.logMessage)(`CALLING S2S HEADER BIDDERS ==== ${o.length>0?o.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only'}`),v.forEach(e=>{g.emit(f.EVENTS.BID_REQUESTED,{...e,tid:e.auctionId})}),m.callBids(t,p,r,t=>e.forEach(e=>e(t)),d)}}else(0,n.logError)("missing "+e.adapter);h++}}),u.forEach(e=>{e.start=(0,n.timestamp)();let t=w[e.bidderCode];d.config.runWithBidder(e.bidderCode,()=>{(0,n.logMessage)("CALLING BIDDER"),g.emit(f.EVENTS.BID_REQUESTED,e)});let c=(0,s.ajaxBuilder)(a,o?{request:o.request.bind(null,e.bidderCode),done:o.done}:void 0),u=i.bind(e);try{d.config.runWithBidder(e.bidderCode,t.callBids.bind(t,e,r,u,c,()=>l(e.bidderRequestId),d.config.callbackWithBidder(e.bidderCode)))}catch(t){(0,n.logError)(`${e.bidderCode} Bid Adapter emitted an uncaught error when parsing their bidRequest`,{e:t,bidRequest:e}),u()}})},C.videoAdapters=[],C.registerBidAdapter=function(e,t){let{supportedMediaTypes:r=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&t?"function"==typeof e.callBids?(w[t]=e,p.GDPR_GVLIDS.register(b.MODULE_TYPE_BIDDER,t,e.getSpec?.().gvlid),r.includes("video")&&C.videoAdapters.push(t),r.includes("native")&&o.nativeAdapters.push(t)):(0,n.logError)("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):(0,n.logError)("bidAdapter or bidderCode not specified")},C.aliasBidAdapter=function(e,t,r){if(void 0===w[t]){let i=w[e];if(void 0===i){let r=[];R.forEach(i=>{if(i.bidders&&i.bidders.length){let n=i&&i.bidders;i&&n.includes(t)?x[t]=e:r.push(e)}}),r.forEach(e=>{(0,n.logError)('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")})}else try{let s,d,l=(s=[],C.videoAdapters.includes(e)&&s.push("video"),o.nativeAdapters.includes(e)&&s.push("native"),s);if(i.constructor.prototype!=Object.prototype)(d=new i.constructor).setBidderCode(t);else{let{useBaseGvlid:o=!1}=r||{},s=i.getSpec(),l=o?s.gvlid:r?.gvlid;null==l&&null!=s.gvlid&&(0,n.logWarn)(`Alias '${t}' will NOT re-use the GVL ID of the original adapter ('${s.code}', gvlid: ${s.gvlid}). Functionality that requires TCF consent may not work as expected.`);let c=r&&r.skipPbsAliasing;d=(0,a.newBidder)(Object.assign({},s,{code:t,gvlid:l,skipPbsAliasing:c})),x[t]=e}C.registerBidAdapter(d,t,{supportedMediaTypes:l})}catch(t){(0,n.logError)(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else(0,n.logMessage)('alias name "'+t+'" has been already specified.')},C.resolveAlias=function(e){let t,r=e;for(;x[r]&&(!t||!t.has(r));)r=x[r],(t=t||new Set).add(r);return r},C.registerAnalyticsAdapter=function(e){let{adapter:t,code:r,gvlid:i}=e;t&&r?"function"==typeof t.enableAnalytics?(t.code=r,D[r]={adapter:t,gvlid:i},p.GDPR_GVLIDS.register(b.MODULE_TYPE_ANALYTICS,r,i)):(0,n.logError)(`Prebid Error: Analytics adaptor error for analytics "${r}"
        analytics adapter must implement an enableAnalytics() function`):(0,n.logError)("Prebid Error: analyticsAdapter or analyticsCode not specified")},C.enableAnalytics=function(e){(0,n.isArray)(e)||(e=[e]),e.forEach(e=>{let t=D[e.provider];t&&t.adapter?O.isAllowed(v.ACTIVITY_REPORT_ANALYTICS,P(b.MODULE_TYPE_ANALYTICS,e.provider,{[A.ACTIVITY_PARAM_ANL_CONFIG]:e}))&&t.adapter.enableAnalytics(e):(0,n.logError)(`Prebid Error: no analytics adapter found in registry for '${e.provider}'.`)})},C.getBidAdapter=function(e){return w[e]},C.getAnalyticsAdapter=function(e){return D[e]},C.callTimedOutBidders=function(e,t,r){t=t.map(t=>(t.params=(0,n.getUserConfiguredParams)(e,t.adUnitCode,t.bidder),t.timeout=r,t)),Object.keys(t=(0,n.groupBy)(t,"bidder")).forEach(e=>{W(e,"onTimeout",t[e])})},C.callBidWonBidder=function(e,t,r){t.params=(0,n.getUserConfiguredParams)(r,t.adUnitCode,t.bidder),(0,c.incrementBidderWinsCounter)(t.adUnitCode,t.bidder),W(e,"onBidWon",t)},i=new WeakSet,C.triggerBilling=e=>{i.has(e)||(i.add(e),((0,E.parseEventTrackers)(e.eventtrackers)[E.EVENT_TYPE_IMPRESSION]?.[E.TRACKER_METHOD_IMG]||[]).forEach(e=>n.internal.triggerPixel(e)),W(e.bidder,"onBidBillable",e))},C.callSetTargetingBidder=function(e,t){W(e,"onSetTargeting",t)},C.callBidViewableBidder=function(e,t){W(e,"onBidViewable",t)},C.callBidderError=function(e,t,r){W(e,"onBidderError",{error:t,bidderRequest:r})},C.callAdRenderSucceededBidder=function(e,t){W(e,"onAdRenderSucceeded",t)},C.callDataDeletionRequest=(0,l.hook)("sync",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let i="onDataDeletionRequest";Object.keys(w).filter(e=>!x.hasOwnProperty(e)).forEach(e=>{let r=L(e,i);if(null!=r){let n=h.auctionManager.getBidsRequested().filter(t=>(function(e){let t=new Set;for(;x.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=x[e];return e})(t.bidderCode)===e);F(e,i,...r,n,...t)}}),Object.entries(D).forEach(e=>{let[r,o]=e,a=o?.adapter?.[i];if("function"==typeof a)try{a.apply(o.adapter,t)}catch(e){(0,n.logError)(`error calling ${i} of ${r}`,e)}})}),t.default=C},256:function(e,t,r){"use strict";var i=r(5824);Object.defineProperty(t,"__esModule",{value:!0}),t.adapterMetrics=N,t.addPaapiConfig=void 0,t.duplicateRequest=w,t.guardTids=void 0,t.isValid=k,t.newBidder=O,t.prepareRequestWithOrtbData=C,t.processBidderRequests=void 0,t.registerBidder=function(e){let t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function r(e){let r=O(e);o.default.registerBidAdapter(r,e.code,t)}r(e),Array.isArray(e.aliases)&&e.aliases.forEach(t=>{let i,n,a=t;(0,g.isPlainObject)(t)&&(a=t.code,i=t.gvlid,n=t.skipPbsAliasing),o.default.aliasRegistry[a]=e.code,r(Object.assign({},e,{code:a,gvlid:i,skipPbsAliasing:n}))})},t.registerSyncInner=void 0;var n=i(r(7292)),o=i(r(6553)),a=r(4321),s=r(6956),d=r(6907),l=r(6680),c=r(4312),u=r(8878),p=E(r(2506)),g=r(7750),f=r(1620),m=r(1171),h=r(1928),b=r(7557),y=r(5110),v=r(958),A=r(4767),I=r(2276);function E(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(E=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let S=["cpm","ttl","creativeId","netRevenue","currency"],_=["auctionId","transactionId"],T=t.guardTids=(0,g.memoize)(e=>{let{bidderCode:t}=e;if((0,y.isActivityAllowed)(I.ACTIVITY_TRANSMIT_TID,(0,v.activityParams)(A.MODULE_TYPE_BIDDER,t)))return{bidRequest:e=>e,bidderRequest:e=>e};function r(e,t,r){return _.includes(t)?null:Reflect.get(e,t,r)}function i(e,t){let r=new Proxy(e,t);return Object.entries(e).filter(e=>{let[t,r]=e;return"function"==typeof r}).forEach(t=>{let[i,n]=t;return r[i]=n.bind(e)}),r}let n=(0,g.memoize)(e=>i(e,{get:r}),e=>e.bidId);return{bidRequest:n,bidderRequest:e=>i(e,{get:(t,i,o)=>"bids"===i?e.bids.map(n):r(t,i,o)})}});function O(e){return Object.assign(new n.default(e.code),{getSpec:function(){return Object.freeze(Object.assign({},e))},registerSyncs:t,callBids:function(r,i,n,d,l,c){if(!Array.isArray(r.bids))return;let f=T(r),m={},y=[];function v(){n(),a.config.runWithBidder(e.code,()=>{p.emit(u.EVENTS.BIDDER_DONE,r),t(y,r.gdprConsent,r.uspConsent,r.gppConsent)})}let A=N(r).measureTime("validate",()=>r.bids.filter(t=>{var r;return r=f.bidRequest(t),!!e.isBidRequestValid(r)||((0,g.logWarn)(`Invalid bid sent to bidder ${e.code}: ${JSON.stringify(r)}`),!1)}));if(0===A.length)return void v();let I={};A.forEach(e=>{I[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)}),R(e,A,r,d,c,{onRequest:e=>p.emit(u.EVENTS.BEFORE_BIDDER_HTTP,r,e),onResponse:t=>{l(e.code),y.push(t)},onPaapi:e=>{let t=I[e.bidId];t?P(t,e):(0,g.logWarn)("Received fledge auction configuration for an unknown bidId",e)},onError:(t,i)=>{i.timedOut||l(e.code),o.default.callBidderError(e.code,i,r),p.emit(u.EVENTS.BIDDER_ERROR,{error:i,bidderRequest:r}),(0,g.logError)(`Server call for ${e.code} failed: ${t} ${i.status}. Continuing without bids.`,{bidRequests:A})},onBid:t=>{let r=I[t.requestId];if(r){var n,o,a;let d,l,c;if(t.adapterCode=r.bidder,o=t.bidderCode,a=r.bidder,l=h.bidderSettings.get(a,"allowAlternateBidderCodes")||!1,c=h.bidderSettings.get(a,"allowedAlternateBidderCodes"),o&&a&&a!==o&&(c=(0,g.isArray)(c)?c.map(e=>e.trim().toLowerCase()).filter(e=>!!e).filter(g.uniques):c,!l||(0,g.isArray)(c)&&"*"!==c[0]&&!c.includes(o))||0){(0,g.logWarn)(`${t.bidderCode} is not a registered partner or known bidder of ${r.bidder}, hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.`),i.reject(r.adUnitCode,t,u.REJECTION_REASON.BIDDER_DISALLOWED);return}t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[r.bidder]),t.deferBilling=r.deferBilling,t.deferRendering=t.deferBilling&&(t.deferRendering??"function"!=typeof e.onBidBillable);let p=Object.assign((0,s.createBid)(u.STATUS.GOOD,r),t,(0,g.pick)(r,_));n=r.adUnitCode,(d=(0,b.useMetrics)(p.metrics)).checkpoint("addBidResponse"),m[n]=!0,d.measureTime("addBidResponse.validate",()=>k(n,p))?i(n,p):i.reject(n,p,u.REJECTION_REASON.INVALID)}else(0,g.logWarn)(`Bidder ${e.code} made bid for unknown request ID: ${t.requestId}. Ignoring.`),i.reject(null,t,u.REJECTION_REASON.INVALID_REQUEST_ID)},onCompletion:v})}});function t(t,r,i,n){D(e,t,r,i,n)}}function C(e,t){let r=(0,g.deepClone)(e);return r.ortb2.app=t?.appData||{},r.ortb2.app.ext=e?.site?.ext,r.ortb2.app.publisher=e?.site?.publisher,t?.bseat&&(r.ortb2.bseat=t.bseat),delete r.ortb2.site,r}function w(e){let t=[];return e&&!Array.isArray(e)?(delete e.data.site,t.push(e),t):e&&Array.isArray(e)?t=[...t,...e]:[]}let x=["bids","paapi"],R=t.processBidderRequests=(0,f.hook)("async",function(e,t,r,i,n,o){let{onRequest:s,onResponse:d,onPaapi:l,onError:c,onBid:p,onCompletion:f}=o,m=N(r);f=m.startTiming("total").stopBefore(f);let h=T(r),b=m.measureTime("buildRequests",()=>e.buildRequests(t.map(h.bidRequest),h.bidderRequest(r))),y=r,v=a.config.getConfig("appDataConfig"),A=[];if(v?.bidders?.includes(r.bidderCode)&&v.appData){y=C(r,v);let i=m.measureTime("buildRequests",()=>e.buildRequests(t,y));i&&(A=w(i))}if(!b||0===b.length)return void f();Array.isArray(b)||(b=[b]),b=[...b,...A];let I=(0,g.delayExecution)(f,b.length);b.forEach(t=>{let r=m.fork();function o(e){null!=e&&(e.metrics=r.fork().renameWith()),p(e)}let a=n(function(i,n){var a;let s,c;h();try{i=JSON.parse(i)}catch(e){}d(i={body:i,headers:(a=0,{get:n.getResponseHeader.bind(n)})});try{i=r.measureTime("interpretResponse",()=>e.interpretResponse(i,t))}catch(t){(0,g.logError)(`Bidder ${e.code} failed to interpret the server's response. Continuing without bids`,null,t),I();return}i&&!Object.keys(i).some(e=>!x.includes(e))?(s=i.bids,c=i.paapi):s=i,(0,g.isArray)(c)&&c.forEach(l),s&&((0,g.isArray)(s)?s.forEach(o):o(s)),I()}),f=n(function(e,t){h(),c(e,t),I()});s(t);let h=r.startTiming("net"),b="TRUE"===(0,g.getParameterByName)(u.DEBUG_MODE).toUpperCase()||(0,g.debugTurnedOn)();switch(t.method){case"GET":var y;i(`${t.url}${(y=t.data)?`?${"object"==typeof y?(0,g.parseQueryStringParameters)(y):y}`:""}`,{success:a,error:f},void 0,Object.assign({method:"GET",withCredentials:!0},t.options));break;case"POST":let v=t.options?.endpointCompression,A=e=>{let{url:r,payload:n}=e;i(r,{success:a,error:f},n,Object.assign({method:"POST",contentType:"text/plain",withCredentials:!0},t.options))};v&&b&&(0,g.logWarn)(`Skipping GZIP compression for ${e.code} as debug mode is enabled`),v&&!b&&(0,g.isGzipCompressionSupported)()?(0,g.compressDataWithGZip)(t.data).then(e=>{let r=new URL(t.url,window.location.origin);r.searchParams.has("gzip")||r.searchParams.set("gzip","1"),A({url:r.href,payload:e})}):A({url:t.url,payload:"string"==typeof t.data?t.data:JSON.stringify(t.data)});break;default:(0,g.logWarn)(`Skipping invalid request from ${e.code}. Request type ${t.type} must be GET or POST`),I()}})},"processBidderRequests"),D=t.registerSyncInner=(0,f.hook)("async",function(e,t,r,i,n){let s=a.config.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(s||!o.default.aliasRegistry[e.code])){let o=e.getUserSyncs({iframeEnabled:d.userSync.canBidderRegisterSync("iframe",e.code),pixelEnabled:d.userSync.canBidderRegisterSync("image",e.code)},t,r,i,n);o&&(Array.isArray(o)||(o=[o]),o.forEach(t=>{d.userSync.registerSync(t.type,e.code,t.url)}),d.userSync.bidderDone(e.code))}},"registerSyncs"),P=t.addPaapiConfig=(0,f.hook)("sync",(e,t)=>{},"addPaapiConfig");function k(e,t){let r,{index:i=m.auctionManager.index}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function n(e){return`Invalid bid from ${t.bidderCode}. Ignoring bid: ${e}`}return e?t?(r=Object.keys(t),S.every(e=>r.includes(e)&&![void 0,null].includes(t[e])))?"native"!==t.mediaType||(0,l.nativeBidIsValid)(t,{index:i})?"video"!==t.mediaType||(0,c.isValidVideoBid)(t,{index:i})?"banner"!==t.mediaType||!!function(e,t){let{index:r=m.auctionManager.index}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;if(null!=t.wratio&&null!=t.hratio)return t.wratio=parseInt(t.wratio,10),t.hratio=parseInt(t.hratio,10),!0;let i=r.getBidRequest(t),n=r.getMediaTypes(t),o=i&&i.sizes||n&&n.banner&&n.banner.sizes,a=(0,g.parseSizesInput)(o);if(1===a.length){let[e,r]=a[0].split("x");return t.width=parseInt(e,10),t.height=parseInt(r,10),!0}return!1}(e,t,{index:i})||((0,g.logError)(n("Banner bids require a width and height")),!1):((0,g.logError)(n("Video bid does not have required vastUrl or renderer property")),!1):((0,g.logError)(n("Native bid missing some required properties.")),!1):((0,g.logError)(n(`Bidder ${t.bidderCode} is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params.`)),!1):((0,g.logWarn)(`Some adapter tried to add an undefined bid for ${e}.`),!1):((0,g.logWarn)("No adUnitCode was supplied to addBidResponse."),!1)}function N(e){return(0,b.useMetrics)(e.metrics).renameWith(t=>[`adapter.client.${t}`,`adapters.client.${e.bidderCode}.${t}`])}},4389:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadExternalScript=function(e,t,r,l,c,u){var p,g,f,m,h;let b;if(!(0,o.isActivityAllowed)(i.LOAD_EXTERNAL_SCRIPT,(0,n.activityParams)(t,r)))return;if(!r||!e)return void(0,a.logError)("cannot load external script without url and moduleCode");if(!d.includes(r))return void(0,a.logError)(`${r} not whitelisted for loading external JavaScript`);c||(c=document);let y=I(c,e);if(y)return l&&"function"==typeof l&&(y.loaded?l():y.callbacks.push(l)),y.tag;let v=s.get(c)||{},A={loaded:!1,tag:null,callbacks:[]};return v[e]=A,s.set(c,v),l&&"function"==typeof l&&A.callbacks.push(l),(0,a.logWarn)(`module ${r} is loading external JavaScript`),p=e,g=function(){A.loaded=!0;try{for(let e=0;e<A.callbacks.length;e++)A.callbacks[e]()}catch(e){(0,a.logError)("Error executing callback","adloader.js:loadExternalScript",e)}},f=c,m=u,f||(f=document),(h=f.createElement("script")).type="text/javascript",h.async=!0,(b=I(f,e))&&(b.tag=h),h.readyState?h.onreadystatechange=function(){("loaded"===h.readyState||"complete"===h.readyState)&&(h.onreadystatechange=null,g())}:h.onload=function(){g()},h.src=p,m&&(0,a.setScriptAttributes)(h,m),(0,a.insertElement)(h,f),h;function I(e,t){let r=s.get(e);return r&&r[t]?r[t]:null}};var i=r(2276),n=r(958),o=r(5110),a=r(7750);let s=new WeakMap,d=["debugging","outstream","aaxBlockmeter","adagio","adloox","akamaidap","arcspan","airgrid","browsi","brandmetrics","clean.io","humansecurity","confiant","contxtful","hadron","mediafilter","medianet","azerionedge","a1Media","geoedge","qortex","dynamicAdBoost","51Degrees","symitridap","wurfl","nodalsAi","anonymised","optable","justtag","tncId","ftrackId","id5"]},3645:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPPID=void 0,t.getPPID=(0,r(1620).hook)("sync",()=>void 0)},7581:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0,t.ajaxBuilder=s,t.fetch=t.dep=void 0,t.fetcherFactory=a,t.sendBeacon=function(e,t){return!!window.navigator&&!!window.navigator.sendBeacon&&window.navigator.sendBeacon(e,t)};var i=r(4321),n=r(7750);let o=t.dep={fetch:window.fetch.bind(window),makeRequest:(e,t)=>new Request(e,t),timeout(e,t){let r=new AbortController,i=setTimeout(()=>{r.abort(),(0,n.logError)(`Request timeout after ${e}ms`,t),i=null},e);return{signal:r.signal,done(){i&&clearTimeout(i)}}}};function a(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,{request:r,done:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(e,r)=>{let n;null==t||r?.signal!=null||i.config.getConfig("disableAjaxTimeout")||(r=Object.assign({signal:(n=o.timeout(t,e)).signal},r));let a=o.fetch(e,r);return n?.done!=null&&(a=a.finally(n.done)),a};return(null!=r||null!=n)&&(e=a,a=function(t,i){let o=new URL(t?.url==null?t:t.url,document.location).origin,a=e(t,i);return r&&r(o),n&&(a=a.finally(()=>n(o))),a}),a}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,{request:t,done:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(o,a,s){let d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{let l,c=d.method||(s?"POST":"GET"),u=document.createElement("a");u.href=o;let p="object"==typeof a&&null!==a?a:{success:function(){(0,n.logMessage)("xhr success")},error:function(e){(0,n.logError)("xhr error",null,e)}};if("function"==typeof a&&(p.success=a),(l=new window.XMLHttpRequest).onreadystatechange=function(){if(4===l.readyState){"function"==typeof r&&r(u.origin);let e=l.status;e>=200&&e<300||304===e?p.success(l.responseText,l):p.error(l.statusText,l)}},i.config.getConfig("disableAjaxTimeout")||(l.ontimeout=function(){(0,n.logError)("  xhr timeout after ",l.timeout,"ms")}),"GET"===c&&s){let e=(0,n.parseUrl)(o,d);Object.assign(e.search,s),o=(0,n.buildUrl)(e)}l.open(c,o,!0),i.config.getConfig("disableAjaxTimeout")||(l.timeout=e),d.withCredentials&&(l.withCredentials=!0),(0,n._each)(d.customHeaders,(e,t)=>{l.setRequestHeader(t,e)}),d.preflight&&l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.setRequestHeader("Content-Type",d.contentType||"text/plain"),"function"==typeof t&&t(u.origin),"POST"===c&&s?l.send(s):l.send()}catch(e){(0,n.logError)("xhr construction",e),"object"==typeof a&&null!==a&&a.error(e)}}}t.fetch=a(),t.ajax=s()},6446:function(e,t,r){"use strict";var i=r(5824);Object.defineProperty(t,"__esModule",{value:!0}),t.addBidResponse=t.addAppDataToBidResponse=t.AUCTION_STARTED=t.AUCTION_IN_PROGRESS=t.AUCTION_COMPLETED=void 0,t.addBidToAuction=V,t.addBidderRequests=void 0,t.adjustBids=Z,t.auctionCallbacks=M,t.getDSP=t.getCreativeId=t.getAdvertiserDomain=t.callPrebidCache=t.bidsBackCallback=void 0,t.getKeyValueTargetingPairs=Q,t.getMediaTypeGranularity=L,t.getPrimaryCatId=t.getPriceGranularity=t.getPriceByGranularity=void 0,t.getStandardBidderSettings=K,t.newAuction=function(e){let t,r,i,o,{adUnits:a,adUnitCodes:s,callback:d,cbTimeout:c,labels:u,auctionId:p,ortb2Fragments:g,metrics:f}=e;f=(0,A.useMetrics)(f);let m=p||(0,n.generateUUID)(),I=new Set,E=(0,v.defer)(),T=(0,v.defer)(),N=[],B=d,V=[],$=new Map,q=(0,S.ttlCollection)({startTime:e=>e.responseTimestamp,ttl:e=>null==(0,_.getMinBidCacheTTL)()?null:1e3*Math.max((0,_.getMinBidCacheTTL)(),e.ttl)}),L=[],F=[],W=[];function G(){return{auctionId:m,timestamp:t,auctionEnd:r,auctionStatus:o,adUnits:a,adUnitCodes:s,labels:u,bidderRequests:V,noBids:L,bidsReceived:q.toArray(),bidsRejected:N,winningBids:F,timeout:c,metrics:f,seatNonBids:W}}function z(e){if(e?h.emit(y.EVENTS.AUCTION_TIMEOUT,G()):clearTimeout(i),void 0===r){let t=[];e&&((0,n.logMessage)(`Auction ${m} timedOut`),(t=V.filter(e=>!I.has(e.bidderRequestId)).flatMap(e=>e.bids)).length&&h.emit(y.EVENTS.BID_TIMEOUT,t)),o=x,r=Date.now(),f.checkpoint("auctionEnd"),f.timeBetween("requestBids","auctionEnd","requestBids.total"),f.timeBetween("callBids","auctionEnd","requestBids.callBids"),E.resolve();let i=G();if(0===I.size&&t.length>0){let e=t[0].adUnitCode;i.adUnits.forEach(t=>{t.code===e&&(t.noBidReason="ato")})}h.emit(y.EVENTS.AUCTION_END,G()),j(a,function(){try{if(null!=B){let t=q.toArray().filter(e=>s.includes(e.adUnitCode)).reduce(ee,{});B.apply(k,[t,e,m]),B=null}}catch(e){(0,n.logError)("Error executing bidsBackHandler",null,e)}finally{t.length&&b.default.callTimedOutBidders(a,t,c);let e=l.config.getConfig("userSync")||{};e.enableOverride||O(e.syncDelay)}})}}function H(){l.config.resetBidder(),(0,n.logInfo)(`Bids Received for Auction with id: ${m}`,q.toArray()),o=x,z(!1)}function Y(e){I.add(e)}function J(e){e.forEach(e=>{V=V.concat(e),e?.bids?.forEach(e=>{e?.bidId&&$.set(e.bidId,e)})});let t={},r={bidRequests:e,run:()=>{i=setTimeout(()=>z(!0),c),o=w,h.emit(y.EVENTS.AUCTION_INIT,G());let r=M(H,this);b.default.callBids(a,e,r.addBidResponse,r.adapterDone,{request(e,r){d(R,r),d(t,e),D[e]||(D[e]={SRA:!0,origin:r}),t[e]>1&&(D[e].SRA=!1)},done(e){R[e]--,P[0]&&s(P[0])&&P.shift()}},c,Y,g),T.resolve()}};function s(e){let t=!0,r=l.config.getConfig("maxRequestsPerOrigin")||4;return e.bidRequests.some(e=>{let i=1,n=void 0!==e.src&&e.src===y.S2S.SRC?"s2s":e.bidderCode;return D[n]&&(!1===D[n].SRA&&(i=Math.min(e.bids.length,r)),R[D[n].origin]+i>r&&(t=!1)),!t}),t&&e.run(),t}function d(e,t){void 0===e[t]?e[t]=1:e[t]++}s(r)||((0,n.logWarn)("queueing auction due to limited endpoint capacity"),P.push(r))}return(0,_.onMinBidCacheTTLChange)(()=>q.refresh()),h.on(y.EVENTS.SEAT_NON_BID,e=>{var t;e.auctionId===m&&(t=e.seatnonbid,W=W.concat(t))}),{addBidReceived:function(e){q.add(e)},addBidRejected:function(e){N=N.concat(e)},addNoBid:function(e){L=L.concat(e)},callBids:function(){o=C,t=Date.now();let e=f.measureTime("requestBids.makeRequests",()=>b.default.makeBidRequests(a,t,m,c,u,g,f));(0,n.logInfo)(`Bids Requested for Auction with id: ${m}`,e),f.checkpoint("callBids"),e.length<1?((0,n.logWarn)("No valid bid requests returned for auction"),H()):U.call({dispatch:J,context:this},e)},addWinningBid:function(e){F=F.concat(e),b.default.callBidWonBidder(e.adapterCode||e.bidder,e,a),e.deferBilling||b.default.triggerBilling(e)},removeUnusedExpiredBids:function(){return q.toArray().forEach(e=>{"rendered"!==e.status&&e.sharedBidInUse||q.clearItem(e)}),q.toArray()},removeBidReceived:function(e){q.clearItem(e)},setBidTargeting:function(e){b.default.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:()=>F,getAuctionStart:()=>t,getAuctionEnd:()=>r,getTimeout:()=>c,getAuctionId:()=>m,getAuctionStatus:()=>o,getAdUnits:()=>a,getAdUnitCodes:()=>s,getBidRequests:()=>V,getBidRequestMap:()=>$,getBidsReceived:()=>q.toArray(),getNoBids:()=>L,getNonBids:()=>W,getFPD:()=>g,getMetrics:()=>f,end:E.promise,requestsDone:T.promise,getProperties:G}},t.resetAuctionState=function(){P.length=0,[R,D].forEach(e=>Object.keys(e).forEach(t=>{delete e[t]}))},t.responsesReady=void 0;var n=r(7750),o=r(6856),a=r(6680),s=r(2948),d=r(836),l=r(4321),c=r(6907),u=r(1620),p=r(4312),g=r(4030),f=r(1171),m=r(1928),h=T(r(2506)),b=i(r(6553)),y=r(8878),v=r(7148),A=r(7557),I=r(5815),E=r(3800),S=r(5217),_=r(5502);function T(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(T=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let{syncUsers:O}=c.userSync,C=t.AUCTION_STARTED="started",w=t.AUCTION_IN_PROGRESS="inProgress",x=t.AUCTION_COMPLETED="completed";h.on(y.EVENTS.BID_ADJUSTMENT,function(e){Z(e)});let R={},D={},P=[],k=(0,E.getGlobal)(),N=t.addBidResponse=(0,u.ignoreCallbackArg)((0,u.hook)("async",function(e,t,r){var i;let n;(i=t,!(!(n=l.config.getConfig("maxBid"))||!i.cpm||n>=Number(i.cpm)))?r(y.REJECTION_REASON.PRICE_TOO_HIGH):this.dispatch.call(null,e,t)},"addBidResponse")),B=t.responsesReady=(0,u.hook)("sync",e=>e,"responsesReady"),U=t.addBidderRequests=(0,u.hook)("sync",function(e){this.dispatch.call(this.context,e)},"addBidderRequests"),j=t.bidsBackCallback=(0,u.hook)("async",function(e,t){t&&t()},"bidsBackCallback");function M(e,t){let{index:r=f.auctionManager.index}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=0,c=!1,u=new Set,m={};function b(){i--,c&&0===i&&e()}function A(e,t,r){return m[t.requestId]=!0,function(e,t){let{index:r=f.auctionManager.index}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.getBidderRequest(e);q(i,e);let o=r.getAdUnit(e),a=i&&i.start||e.requestTimestamp;Object.assign(e,{responseTimestamp:e.responseTimestamp||(0,n.timestamp)(),requestTimestamp:e.requestTimestamp||a,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t,...i?.bidPoolId&&{bidPoolId:i.bidPoolId},...i?.passiveBidPoolId&&{passiveBidPoolId:i.passiveBidPoolId}}),o?.ttlBuffer!=null&&(e.ttlBuffer=o.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}(t,e),i++,r(b)}function I(e,i){A(e,i,e=>{let c=function(e){let{index:t=f.auctionManager.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getAdUnit(e);r.viewability&&(e.viewability=r.viewability),h.emit(y.EVENTS.BID_ADJUSTMENT,e),e.instl=r?.ortb2Imp?.instl===1;let i=t.getBidRequest(e)?.renderer||r.renderer,n=e.mediaType,a=t.getMediaTypes(e),s=a&&a[n];var c=s&&s.renderer,u=null;c&&c.render&&!(!0===c.backupOnly&&e.renderer)?u=c:i&&i.render&&!(!0===i.backupOnly&&e.renderer)&&(u=i),u&&(e.renderer=d.Renderer.install({url:u.url,config:u.options,renderNow:null==u.url}),e.renderer.setRender(u.render));let p=L(e.mediaType,a,l.config.getConfig("mediaTypePriceGranularity")),g=(0,o.getPriceBucketString)(e.cpm,"object"==typeof p?p:l.config.getConfig("customPriceBucket"),l.config.getConfig("currency.granularityMultiplier"));return e.pbLg=g.low,e.pbMg=g.med,e.pbHg=g.high,e.pbAg=g.auto,e.pbDg=g.dense,e.pbCg=g.custom,e}(i);h.emit(y.EVENTS.BID_ACCEPTED,c),c.mediaType===g.VIDEO?function(e,t,r){let{index:i=f.auctionManager.index}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=!0,a=i.getMediaTypes({requestId:t.originalRequestId||t.requestId,adUnitId:t.adUnitId})?.video,d=a&&a?.context,c=a&&a?.useCacheKey,{useLocal:u,url:g,ignoreBidderCacheKey:m}=l.config.getConfig("cache")||{};u?(0,s.storeLocally)(t):g&&(c||d!==p.OUTSTREAM)&&(!t.videoCacheKey||m?(o=!1,$(e,t,r,a)):t.vastUrl||((0,n.logError)("videoCacheKey specified but not required vastUrl for video bid"),o=!1)),o&&(V(e,t),r())}(t,c,e):((0,a.isNativeResponse)(c)&&(0,a.setNativeResponseProperties)(c,r.getAdUnit(c)),V(t,c),e())})}function E(e,r,i){return A(e,r,e=>{r.rejectionReason=i,(0,n.logWarn)(`Bid from ${r.bidder||"unknown bidder"} was rejected: ${i}`,r),h.emit(y.EVENTS.BID_REJECTED,r),t.addBidRejected(r),e()})}function S(){let r=t.getBidRequests(),o=l.config.getConfig("auctionOptions");if(u.add(this),o&&!(0,n.isEmpty)(o)){let e=o.secondaryBidders;e&&!r.every(t=>e.includes(t.bidderCode))&&(r=r.filter(t=>!e.includes(t.bidderCode)))}c=r.every(e=>u.has(e)),this.bids.forEach(e=>{m[e.bidId]||(t.addNoBid(e),h.emit(y.EVENTS.NO_BID,e))}),c&&0===i&&e()}return{addBidResponse:function(){function e(e,t){let r;N.call({dispatch:I},e,t,(r=!1,i=>{r||(E(e,t,i),r=!0)}))}return e.reject=E,e}(),adapterDone:function(){B(v.PbPromise.resolve()).finally(()=>S.call(this))}}}function V(e,t){var r;let i,n;r=t,n=!0===m.bidderSettings.get(r.bidderCode,"allowZeroCpmBids")?r.cpm>=0:r.cpm>0,r.bidderCode&&(n||r.dealId)&&(i=Q(r.bidderCode,r)),r.adserverTargeting=Object.assign(r.adserverTargeting||{},i),(0,A.useMetrics)(t.metrics).timeSince("addBidResponse","addBidResponse.total"),e.addBidReceived(t),h.emit(y.EVENTS.BID_RESPONSE,t)}let $=t.callPrebidCache=(0,u.hook)("async",function(e,t,r,i){(0,s.batchAndStore)(e,t,r)},"callPrebidCache"),q=(e,t)=>{e?.app&&t&&(t.app=!0)};function L(e,t,r){if(e&&r){if(e===g.VIDEO){let e=t?.[g.VIDEO]?.context??"instream";if(r[`${g.VIDEO}-${e}`])return r[`${g.VIDEO}-${e}`]}return r[e]}}t.addAppDataToBidResponse=q;let F=function(e){let{index:t=f.auctionManager.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=L(e.mediaType,t.getMediaTypes(e),l.config.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&r?"string"==typeof r?r:"custom":l.config.getConfig("priceGranularity")};t.getPriceGranularity=F;let W=e=>t=>{let r=e||F(t);if(r===y.GRANULARITY_OPTIONS.AUTO)return t.pbAg;if(r===y.GRANULARITY_OPTIONS.DENSE)return t.pbDg;if(r===y.GRANULARITY_OPTIONS.LOW)return t.pbLg;if(r===y.GRANULARITY_OPTIONS.MEDIUM)return t.pbMg;if(r===y.GRANULARITY_OPTIONS.HIGH)return t.pbHg;else if(r===y.GRANULARITY_OPTIONS.CUSTOM)return t.pbCg};t.getPriceByGranularity=W;let G=()=>e=>e.creativeId?e.creativeId:"";t.getCreativeId=G;let z=()=>e=>e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:"";t.getAdvertiserDomain=z;let H=()=>e=>e.meta&&(e.meta.networkId||e.meta.networkName)?e?.meta?.networkName||e?.meta?.networkId:"";t.getDSP=H;let Y=()=>e=>{let t=e?.meta?.primaryCatId;return Array.isArray(t)?t[0]||"":t||""};function J(e,t){return{key:e,val:"function"==typeof t?function(e,r){return t(e,r)}:function(e){return e[t]}}}function K(e,t){let r=Object.assign({},m.bidderSettings.settingsFor(null));if(r[y.JSON_MAPPING.ADSERVER_TARGETING]||(r[y.JSON_MAPPING.ADSERVER_TARGETING]=[J(y.TARGETING_KEYS.BIDDER,"bidderCode"),J(y.TARGETING_KEYS.AD_ID,"adId"),J(y.TARGETING_KEYS.PRICE_BUCKET,W()),J(y.TARGETING_KEYS.SIZE,"size"),J(y.TARGETING_KEYS.DEAL,"dealId"),J(y.TARGETING_KEYS.SOURCE,"source"),J(y.TARGETING_KEYS.FORMAT,"mediaType"),J(y.TARGETING_KEYS.ADOMAIN,z()),J(y.TARGETING_KEYS.ACAT,Y()),J(y.TARGETING_KEYS.DSP,H()),J(y.TARGETING_KEYS.CRID,G())]),"video"===e){let e=r[y.JSON_MAPPING.ADSERVER_TARGETING].slice();if(r[y.JSON_MAPPING.ADSERVER_TARGETING]=e,[y.TARGETING_KEYS.UUID,y.TARGETING_KEYS.CACHE_ID].forEach(t=>{void 0===e.find(e=>e.key===t)&&e.push(J(t,"videoCacheKey"))}),l.config.getConfig("cache.url")&&(!t||!1!==m.bidderSettings.get(t,"sendStandardTargeting"))){let t=(0,n.parseUrl)(l.config.getConfig("cache.url"));void 0===e.find(e=>e.key===y.TARGETING_KEYS.CACHE_HOST)&&e.push(J(y.TARGETING_KEYS.CACHE_HOST,function(e){return e?.adserverTargeting?.[y.TARGETING_KEYS.CACHE_HOST]||t.hostname}))}}return r}function Q(e,t){let{index:r=f.auctionManager.index}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return{};let i=r.getBidRequest(t);var n={};return X(n,K(t.mediaType,e),t,i),i&&i.ortb2Imp&&i.ortb2Imp.instl&&(n[y.TARGETING_KEYS.INTERSTITIAL]=i.ortb2Imp.instl),e&&m.bidderSettings.getOwn(e,y.JSON_MAPPING.ADSERVER_TARGETING)&&(X(n,m.bidderSettings.ownSettingsFor(e),t,i),t.sendStandardTargeting=m.bidderSettings.get(e,"sendStandardTargeting")),t.native&&(n=Object.assign({},n,(0,a.getNativeTargeting)(t))),n}function X(e,t,r,i){var o=t[y.JSON_MAPPING.ADSERVER_TARGETING];return r.size=r.getSize(),(o||[]).forEach(function(o){var a=o.key,s=o.val;if(e[a]&&(0,n.logWarn)("The key: "+a+" is being overwritten"),(0,n.isFn)(s))try{s=s(r,i)}catch(e){(0,n.logError)("bidmanager","ERROR",e)}(void 0!==t.suppressEmptyKeys&&!0===t.suppressEmptyKeys||a===y.TARGETING_KEYS.DEAL||a===y.TARGETING_KEYS.ACAT||a===y.TARGETING_KEYS.DSP||a===y.TARGETING_KEYS.CRID)&&((0,n.isEmptyStr)(s)||null==s)?(0,n.logInfo)("suppressing empty key '"+a+"' from adserver targeting"):e[a]=s}),e}function Z(e){e.responseCpm=e.cpm;let t=(0,I.adjustCpm)(e.cpm,e);t>=0&&(e.cpm=t)}function ee(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}t.getPrimaryCatId=Y},6440:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuctionIndex=function(e){Object.assign(this,{getAuction(t){let{auctionId:r}=t;if(null!=r)return e().find(e=>e.getAuctionId()===r)},getAdUnit(t){let{adUnitId:r}=t;if(null!=r)return e().flatMap(e=>e.getAdUnits()).find(e=>e.adUnitId===r)},getMediaTypes(e){let{adUnitId:t,requestId:r}=e;if(null!=r){let e=this.getBidRequest({requestId:r});if(null!=e&&(null==t||e.adUnitId===t))return e.mediaTypes}else if(null!=t){let e=this.getAdUnit({adUnitId:t});if(null!=e)return e.mediaTypes}},getBidderRequest(t){let{requestId:r,bidderRequestId:i}=t;if(null!=r||null!=i){let t=e().flatMap(e=>e.getBidRequests());return(null!=i&&(t=t.filter(e=>e.bidderRequestId===i)),null==r)?t[0]:t.find(e=>e.bids&&null!=e.bids.find(e=>e.bidId===r))}},getBidRequest(t){let{requestId:r}=t;if(!r)return;let i=e()||[];for(let e=0;e<i.length;e++){let t=i[e]?.getBidRequestMap?.();if(t?.has(r))return t.get(r)}},getOrtb2(e){return this.getBidderRequest(e)?.ortb2||this.getAuction(e)?.getFPD()?.global?.ortb2}})}},1171:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.auctionManager=void 0,t.newAuctionManager=c;var i=r(7750),n=r(6446),o=r(6440),a=r(8878),s=r(7557),d=r(5217),l=r(5502);function c(){let e,t=(0,d.ttlCollection)({startTime:e=>e.end.then(()=>e.getAuctionEnd()),ttl:e=>null==(0,l.getMinBidCacheTTL)()?null:e.end.then(()=>1e3*Math.max((0,l.getMinBidCacheTTL)(),...e.getBidsReceived().map(e=>e.ttl)))});(0,l.onMinBidCacheTTLChange)(()=>t.refresh());let r={onExpiry:t.onExpiry};function c(e){for(let r of t)if(r.getAuctionId()===e)return r}function u(){return t.toArray().flatMap(e=>e.getBidsReceived())}function p(e,t){let r=e=>{let t=c(e.auctionId);t&&t.removeBidReceived(e)},i=e.filter(e=>(e&&e.status&&e.status===a.BID_STATUS.RENDERED&&r(e),!(e&&e.status&&(e.status===a.BID_STATUS.BID_TARGETING_SET||e.sharedBidInUse))));i.length>t&&i.sort((e,t)=>t.cpm-e.cpm).slice(t).forEach(e=>r(e))}return r.addWinningBid=function(e){let t=(0,s.useMetrics)(e.metrics);t.checkpoint("bidWon"),t.timeBetween("auctionEnd","bidWon","adserver.pending"),t.timeBetween("requestBids","bidWon","adserver.e2e");let r=c(e.auctionId);r?r.addWinningBid(e):(0,i.logWarn)("Auction not found when adding winning bid")},Object.entries({getAllWinningBids:{name:"getWinningBids"},getBidsRequested:{name:"getBidRequests"},getNoBids:{},getAdUnits:{},getBidsReceived:{pre:e=>e.getAuctionStatus()===n.AUCTION_COMPLETED,post:function(t){return e?e(t):t}},getAdUnitCodes:{post:i.uniques}}).forEach(e=>{let[i,{name:n=i,pre:o,post:a}]=e,s=null==o?e=>e[n]():e=>o(e)?e[n]():[],d=null==a?e=>e:e=>e.filter(a);r[i]=()=>d(t.toArray().flatMap(s))}),r.setBidsReceivedFilter=function(t){e=t},r.getAllBidsForAdUnitCode=function(e){return u().filter(t=>t&&t.adUnitCode===e)},r.createAuction=function(e){var r;let i=(0,n.newAuction)(e);return r=i,t.add(r),i},r.findBidByAdId=function(e){return u().find(t=>t.adId===e)},r.getStandardBidderAdServerTargeting=function(){return(0,n.getStandardBidderSettings)()[a.JSON_MAPPING.ADSERVER_TARGETING]},r.setStatusForBids=function(e,t){let i=r.findBidByAdId(e);if(i&&(i.status=t),i&&t===a.BID_STATUS.BID_TARGETING_SET){let e=c(i.auctionId);e&&e.setBidTargeting(i)}},r.getLastAuctionId=function(){let e=t.toArray();return e.length&&e[e.length-1].getAuctionId()},r.clearAuctionBids=function(e){let r=t.toArray(),i=[];return r.forEach(t=>{t.getAuctionId()===e&&(i=[...i,...t.removeUnusedExpiredBids()])}),i},r.clearAllAuctions=function(){t.clear()},r.trimAdUnitBidCache=function(e,t){p(u().filter(t=>t.adUnitCode===e),t)},r.trimBidPool=function(e,t){p(u().filter(t=>t.bidPoolId===e||t.passiveBidPoolId===e),t)},r.index=new o.AuctionIndex(()=>t.toArray()),r}t.auctionManager=c()},3817:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ORTB_BANNER_PARAMS=void 0;var i=r(7750);t.ORTB_BANNER_PARAMS=new Map([["format",e=>Array.isArray(e)&&e.length>0&&e.every(e=>"object"==typeof e)],["btype",i.isArrayOfNums],["battr",i.isArrayOfNums],["pos",i.isInteger],["mimes",e=>Array.isArray(e)&&e.length>0&&e.every(e=>"string"==typeof e)],["topframe",e=>[1,0].includes(e)],["expdir",i.isArrayOfNums],["api",i.isArrayOfNums],["id",i.isStr],["vcm",e=>[1,0].includes(e)]])},5502:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBufferedTTL=function(e){return e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:a)},t.getMinBidCacheTTL=function(){return s},t.onMinBidCacheTTLChange=function(e){d.push(e)};var i=r(4321),n=r(7750);let o="minBidCacheTTL",a=1,s=null,d=[];i.config.getConfig("ttlBuffer",e=>{"number"==typeof e.ttlBuffer?a=e.ttlBuffer:(0,n.logError)("Invalid value for ttlBuffer",e.ttlBuffer)}),i.config.getConfig(o,e=>{s!==(s="number"==typeof(s=e?.[o])?s:null)&&d.forEach(e=>e(s))})},1928:function(e,t,r){"use strict";function i(e,t,r){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return r}Object.defineProperty(t,"__esModule",{value:!0}),t.bidderSettings=t.ScopedSettings=void 0;var n=r(7750),o=r(3800),a=r(8878),s=new WeakSet;class d{get(e,t){let r=this.getOwn(e,t);return void 0===r&&(r=this.getOwn(null,t)),r}getOwn(e,t){return e=i(this,s,l).call(this,e),(0,n.deepAccess)(this.getSettings(),`${e}.${t}`)}getScopes(){return Object.keys(this.getSettings()).filter(e=>e!==this.defaultScope)}settingsFor(e){return(0,n.mergeDeep)({},this.ownSettingsFor(null),this.ownSettingsFor(e))}ownSettingsFor(e){return e=i(this,s,l).call(this,e),this.getSettings()[e]||{}}constructor(e,t){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,s),this.getSettings=e,this.defaultScope=t}}function l(e){return null==e?this.defaultScope:e}t.ScopedSettings=d,t.bidderSettings=new d(()=>(0,o.getGlobal)().bidderSettings||{},a.JSON_MAPPING.BD_SETTING_STANDARD)},6956:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBid=function(e,t){return new n(e,t)};var i=r(7750);function n(e){let{src:t="client",bidder:r="",bidId:n,transactionId:o,adUnitId:a,auctionId:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var d=e||0;Object.assign(this,{bidderCode:r,width:0,height:0,statusMessage:function(){switch(d){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),adId:(0,i.getUniqueIdentifierStr)(),requestId:n,transactionId:o,adUnitId:a,auctionId:s,mediaType:"banner",source:t}),this.getStatusCode=function(){return d},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,adUnitId:this.adUnitId,auctionId:this.auctionId}}}},4321:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.RANDOM=void 0,t.newConfig=p;var i=r(6856),n=r(7750),o=r(8878);let a="TRUE"===(0,n.getParameterByName)(o.DEBUG_MODE).toUpperCase(),s={},d=t.RANDOM="random",l={};l[d]=!0,l.fixed=!0;let c={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"};function u(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=t?{priceGranularity:c.MEDIUM,customPriceBucket:{},mediaTypePriceGranularity:{},bidderSequence:d,auctionOptions:{}}:{};function o(e){return r[e]}function a(t,i){r.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0}),r[t]=i}return Object.defineProperties(e,Object.fromEntries(Object.entries({publisherDomain:{set(e){null!=e&&(0,n.logWarn)("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),a("publisherDomain",e)}},priceGranularity:{set(e){u(e)&&("string"==typeof e?a("priceGranularity",s(e)?e:c.MEDIUM):(0,n.isPlainObject)(e)&&(a("customPriceBucket",e),a("priceGranularity",c.CUSTOM),(0,n.logMessage)("Using custom price granularity")))}},customPriceBucket:{},mediaTypePriceGranularity:{set(e){null!=e&&a("mediaTypePriceGranularity",Object.keys(e).reduce((t,i)=>(u(e[i])?"string"==typeof e?t[i]=s(e[i])?e[i]:r.priceGranularity:(0,n.isPlainObject)(e)&&(t[i]=e[i],(0,n.logMessage)(`Using custom price granularity for ${i}`)):(0,n.logWarn)(`Invalid price granularity for media type: ${i}`),t),{}))}},bidderSequence:{set(e){l[e]?a("bidderSequence",e):(0,n.logWarn)(`Invalid order: ${e}. Bidder Sequence was not set.`)}},auctionOptions:{set(e){(function(e){if(!(0,n.isPlainObject)(e))return(0,n.logWarn)("Auction Options must be an object"),!1;for(let t of Object.keys(e)){if("secondaryBidders"!==t&&"suppressStaleRender"!==t&&"suppressExpiredRender"!==t)return(0,n.logWarn)(`Auction Options given an incorrect param: ${t}`),!1;if("secondaryBidders"===t){if(!(0,n.isArray)(e[t]))return(0,n.logWarn)(`Auction Options ${t} must be of type Array`),!1;else if(!e[t].every(n.isStr))return(0,n.logWarn)(`Auction Options ${t} must be only string`),!1}else if(("suppressStaleRender"===t||"suppressExpiredRender"===t)&&!(0,n.isBoolean)(e[t]))return(0,n.logWarn)(`Auction Options ${t} must be of type boolean`),!1}return!0})(e)&&a("auctionOptions",e)}}}).map(e=>{let[t,i]=e;return[t,Object.assign({get:o.bind(null,t),set:a.bind(null,t),enumerable:r.hasOwnProperty(t),configurable:!r.hasOwnProperty(t)},i)]}))),e;function s(e){return Object.keys(c).find(t=>e===c[t])}function u(e){if(!e)return(0,n.logError)("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)s(e)||(0,n.logWarn)("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if((0,n.isPlainObject)(e)&&!(0,i.isValidPriceConfig)(e))return(0,n.logError)("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}}function p(){let e,t,r,i=[],o=null;function d(){e={};let i=u({debug:a,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,disableAjaxTimeout:!1,maxNestedIframes:10,maxBid:5e3,userSync:{topics:s}});t&&h(Object.keys(t).reduce((e,r)=>(t[r]!==i[r]&&(e[r]=i[r]||{}),e),{})),t=i,r={}}function l(){if(o&&r&&(0,n.isPlainObject)(r[o])){let e=r[o],i=new Set([...Object.keys(t),...Object.keys(e)]),a={};for(let r of i){let i=t[r],o=e[r];a[r]=void 0===o?i:void 0===i?o:(0,n.isPlainObject)(o)?(0,n.mergeDeep)({},i,o):o}return a}return{...t}}let[c,p]=[l,function(){let e=l();return Object.defineProperty(e,"ortb2",{get:function(){throw Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map(e=>function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){let t=arguments.length<=0?void 0:arguments[0];return t?(0,n.deepAccess)(e(),t):l()}return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t;if("string"!=typeof e&&(o=e,e="*",r=t||{}),"function"!=typeof o)return void(0,n.logError)("listener must be a function");let a={topic:e,callback:o};return i.push(a),r.init&&o("*"===e?p():{[e]:p(e)}),function(){i.splice(i.indexOf(a),1)}}(...arguments)}),[g,f]=[p,c].map(e=>function(){let t=e(...arguments);return t&&"object"==typeof t&&(t=(0,n.deepClone)(t)),t});function m(r){if(!(0,n.isPlainObject)(r))return void(0,n.logError)("setConfig options must be an object");let i=Object.keys(r),o={};i.forEach(i=>{let a=r[i];(0,n.isPlainObject)(e[i])&&(0,n.isPlainObject)(a)&&(a=Object.assign({},e[i],a));try{o[i]=t[i]=a}catch(e){(0,n.logWarn)(`Cannot set config for property ${i} : `,e)}}),h(o)}function h(e){let t=Object.keys(e);i.filter(e=>t.includes(e.topic)).forEach(t=>{t.callback({[t.topic]:e[t.topic]})}),i.filter(e=>"*"===e.topic).forEach(t=>t.callback(e))}function b(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{(function(e){if(!(0,n.isPlainObject)(e))throw"setBidderConfig bidder options must be an object";if(!(Array.isArray(e.bidders)&&e.bidders.length))throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!(0,n.isPlainObject)(e.config))throw"setBidderConfig bidder options must contain a config object"})(e),e.bidders.forEach(i=>{r[i]||(r[i]=u({},!1)),Object.keys(e.config).forEach(o=>{let a=e.config[o],s=r[i][o];if((0,n.isPlainObject)(a)&&(null==s||(0,n.isPlainObject)(s))){let e=t?n.mergeDeep:Object.assign;r[i][o]=e({},s||{},a)}else r[i][o]=a})})}catch(e){(0,n.logError)(e)}}function y(e,t){o=e;try{return t()}finally{v()}}function v(){o=null}return d(),{getCurrentBidder:function(){return o},resetBidder:v,getConfig:p,getAnyConfig:c,readConfig:g,readAnyConfig:f,setConfig:m,mergeConfig:function(e){if(!(0,n.isPlainObject)(e))return void(0,n.logError)("mergeConfig input must be an object");let t=(0,n.mergeDeep)(l(),e);return m({...t}),t},setDefaults:function(r){(0,n.isPlainObject)(e)?(Object.assign(e,r),Object.assign(t,r)):(0,n.logError)("defaults must be an object")},resetConfig:d,runWithBidder:y,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return y(e,t.bind(this,...i))}(0,n.logWarn)("config.callbackWithBidder callback is not a function")}}},setBidderConfig:b,getBidderConfig:function(){return r},mergeBidderConfig:function(e){return b(e,!0)}}}t.config=p()},3029:function(e,t,r){"use strict";function i(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function n(e,t,r){if(!t.has(e))throw TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function o(e,t){var r=n(e,t,"get");return r.get?r.get.call(e):r.value}function a(e,t,r){i(e,t),t.set(e,r)}function s(e,t,r){var i=n(e,t,"set");if(i.set)i.set.call(e,r);else{if(!i.writable)throw TypeError("attempted to set read only private field");i.value=r}return r}function d(e,t,r){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.gppDataHandler=t.gdprDataHandler=t.coppaDataHandler=t.allConsent=t.VENDORLESS_GVLID=t.GDPR_GVLIDS=t.ConsentHandler=void 0,t.gvlidRegistry=E,t.multiHandler=w,t.uspDataHandler=void 0;var c=r(7750),u=r(7148),p=r(4321);t.VENDORLESS_GVLID=Object.freeze({});var g=new WeakMap,f=new WeakMap,m=new WeakMap,h=new WeakMap,b=new WeakMap,y=new WeakMap,v=new WeakSet;class A{reset(){s(this,m,(0,u.defer)()),s(this,g,!1),s(this,f,null),s(this,h,!1),this.generatedTime=null}enable(){s(this,g,!0)}get enabled(){return o(this,g)}get ready(){return o(this,h)}get promise(){return o(this,h)?u.PbPromise.resolve(o(this,f)):(o(this,g)||d(this,v,I).call(this,null),o(this,m).promise)}setConsentData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,c.timestamp)();this.generatedTime=t,s(this,b,!0),d(this,v,I).call(this,e)}getConsentData(){return o(this,f)}get hash(){return o(this,b)&&(s(this,y,(0,c.cyrb53Hash)(JSON.stringify(o(this,f)&&this.hashFields?this.hashFields.map(e=>o(this,f)[e]):o(this,f)))),s(this,b,!1)),o(this,y)}constructor(){!function(e,t){i(e,t),t.add(e)}(this,v),a(this,g,{writable:!0,value:void 0}),a(this,f,{writable:!0,value:void 0}),a(this,m,{writable:!0,value:void 0}),a(this,h,{writable:!0,value:void 0}),a(this,b,{writable:!0,value:!0}),a(this,y,{writable:!0,value:void 0}),l(this,"generatedTime",void 0),l(this,"hashFields",void 0),this.reset()}}function I(e){s(this,h,!0),s(this,f,e),o(this,m).resolve(e)}function E(){let e={},t={},r={};return{register(i,n,o){o&&((e[n]=e[n]||{})[i]=o,t.hasOwnProperty(n)?t[n]!==o&&(t[n]=r):t[n]=o)},get(i){let n={modules:e[i]||{}};return t.hasOwnProperty(i)&&t[i]!==r&&(n.gvlid=t[i]),n}}}t.ConsentHandler=A;let S=t.gdprDataHandler=new class extends A{getConsentMeta(){let e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:(0,c.isStr)(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}constructor(...e){super(...e),l(this,"hashFields",["gdprApplies","consentString"])}},_=t.uspDataHandler=new class extends A{getConsentMeta(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}},T=t.gppDataHandler=new class extends A{getConsentMeta(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}constructor(...e){super(...e),l(this,"hashFields",["applicableSections","gppString"])}},O=t.coppaDataHandler=(()=>{function e(){return!!p.config.getConfig("coppa")}return{getCoppa:e,getConsentData:e,getConsentMeta:e,reset(){},get promise(){return u.PbPromise.resolve(e())},get hash(){return e()?"1":"0"}}})();t.GDPR_GVLIDS=E();let C={gdpr:S,usp:_,gpp:T,coppa:O};function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return e=Object.entries(e),Object.assign({get promise(){return u.PbPromise.all(e.map(e=>{let[t,r]=e;return r.promise.then(e=>[t,e])})).then(e=>Object.fromEntries(e))},get hash(){return(0,c.cyrb53Hash)(e.map(e=>{let[t,r]=e;return r.hash}).join(":"))}},Object.fromEntries(["getConsentData","getConsentMeta","reset"].map(t=>[t,function(){return Object.fromEntries(e.map(e=>{let[r,i]=e;return[r,i[t]()]}))}])))}t.allConsent=w()},8878:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TARGETING_KEYS=t.STATUS=t.S2S=t.REJECTION_REASON=t.PREBID_NATIVE_DATA_KEYS_TO_ORTB=t.PB_LOCATOR=t.NATIVE_KEYS_THAT_ARE_NOT_ASSETS=t.NATIVE_KEYS=t.NATIVE_IMAGE_TYPES=t.NATIVE_ASSET_TYPES=t.MESSAGES=t.JSON_MAPPING=t.GRANULARITY_OPTIONS=t.EVENT_ID_PATHS=t.EVENTS=t.DEFAULT_TARGETING_KEYS=t.DEBUG_MODE=t.BID_STATUS=t.AD_RENDER_FAILED_REASON=void 0,t.JSON_MAPPING={PL_CODE:"code",PL_SIZE:"sizes",PL_BIDS:"bids",BD_BIDDER:"bidder",BD_ID:"paramsd",BD_PL_ID:"placementId",ADSERVER_TARGETING:"adserverTargeting",BD_SETTING_STANDARD:"standard"},t.DEBUG_MODE="pbjs_debug",t.STATUS={GOOD:1},t.EVENTS={AUCTION_INIT:"auctionInit",AUCTION_TIMEOUT:"auctionTimeout",AUCTION_END:"auctionEnd",BID_ADJUSTMENT:"bidAdjustment",BID_TIMEOUT:"bidTimeout",BID_REQUESTED:"bidRequested",BID_RESPONSE:"bidResponse",BID_REJECTED:"bidRejected",NO_BID:"noBid",SEAT_NON_BID:"seatNonBid",BID_WON:"bidWon",BIDDER_DONE:"bidderDone",BIDDER_ERROR:"bidderError",SET_TARGETING:"setTargeting",BEFORE_REQUEST_BIDS:"beforeRequestBids",BEFORE_BIDDER_HTTP:"beforeBidderHttp",REQUEST_BIDS:"requestBids",ADD_AD_UNITS:"addAdUnits",AD_RENDER_FAILED:"adRenderFailed",AD_RENDER_SUCCEEDED:"adRenderSucceeded",TCF2_ENFORCEMENT:"tcf2Enforcement",AUCTION_DEBUG:"auctionDebug",BID_VIEWABLE:"bidViewable",STALE_RENDER:"staleRender",EXPIRED_RENDER:"expiredRender",BILLABLE_EVENT:"billableEvent",VAST_EXCEEDED_LIMIT:"vastExceededLimit",BID_ACCEPTED:"bidAccepted",RUN_PAAPI_AUCTION:"paapiRunAuction",PBS_ANALYTICS:"pbsAnalytics",PAAPI_BID:"paapiBid",PAAPI_NO_BID:"paapiNoBid",PAAPI_ERROR:"paapiError",RUBICON_BID_ERROR:"rubiconBidError",LIVEINTENT_RESOLVED:"liveIntentResolved",ID5_RESOLVED:"id5Resolved",BEFORE_PBS_HTTP:"beforePBSHttp",BROWSI_INIT:"browsiInit",BROWSI_DATA:"browsiData"},t.AD_RENDER_FAILED_REASON={PREVENT_WRITING_ON_MAIN_DOCUMENT:"preventWritingOnMainDocument",NO_AD:"noAd",EXCEPTION:"exception",CANNOT_FIND_AD:"cannotFindAd",MISSING_DOC_OR_ADID:"missingDocOrAdid"},t.EVENT_ID_PATHS={bidWon:"adUnitCode"},t.GRANULARITY_OPTIONS={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},t.TARGETING_KEYS={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",SOURCE:"hb_source",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_ID:"hb_cache_id",CACHE_HOST:"hb_cache_host",ADOMAIN:"hb_adomain",ACAT:"hb_acat",CRID:"hb_crid",DSP:"hb_dsp",INTERSTITIAL:"hb_instl",ATTR:"hb_attr"},t.DEFAULT_TARGETING_KEYS={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_HOST:"hb_cache_host"},t.NATIVE_KEYS={title:"hb_native_title",body:"hb_native_body",body2:"hb_native_body2",privacyLink:"hb_native_privacy",privacyIcon:"hb_native_privicon",sponsoredBy:"hb_native_brand",image:"hb_native_image",icon:"hb_native_icon",clickUrl:"hb_native_linkurl",displayUrl:"hb_native_displayurl",cta:"hb_native_cta",rating:"hb_native_rating",address:"hb_native_address",downloads:"hb_native_downloads",likes:"hb_native_likes",phone:"hb_native_phone",price:"hb_native_price",salePrice:"hb_native_saleprice",rendererUrl:"hb_renderer_url",adTemplate:"hb_adTemplate"},t.S2S={SRC:"s2s",DEFAULT_ENDPOINT:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",SYNCED_BIDDERS_KEY:"pbjsSyncs"},t.BID_STATUS={BID_TARGETING_SET:"targetingSet",RENDERED:"rendered",BID_REJECTED:"bidRejected"},t.REJECTION_REASON={INVALID:"Bid has missing or invalid properties",INVALID_REQUEST_ID:"Invalid request ID",BIDDER_DISALLOWED:"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes",FLOOR_NOT_MET:"Bid does not meet price floor",CANNOT_CONVERT_CURRENCY:"Unable to convert currency",DSA_REQUIRED:"Bid does not provide required DSA transparency info",DSA_MISMATCH:"Bid indicates inappropriate DSA rendering method",PRICE_TOO_HIGH:"Bid price exceeds maximum value"},t.PREBID_NATIVE_DATA_KEYS_TO_ORTB={body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl"},t.NATIVE_ASSET_TYPES={sponsored:1,desc:2,rating:3,likes:4,downloads:5,price:6,saleprice:7,phone:8,address:9,desc2:10,displayurl:11,ctatext:12},t.NATIVE_IMAGE_TYPES={ICON:1,MAIN:3},t.NATIVE_KEYS_THAT_ARE_NOT_ASSETS=["privacyIcon","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"],t.MESSAGES={REQUEST:"Prebid Request",RESPONSE:"Prebid Response",NATIVE:"Prebid Native",EVENT:"Prebid Event"},t.PB_LOCATOR="__pb_locator__"},6856:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPriceBucketString=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=parseFloat(e);return isNaN(i)&&(i=""),{low:""===i?"":c(e,o,r),med:""===i?"":c(e,a,r),high:""===i?"":c(e,s,r),auto:""===i?"":c(e,l,r),dense:""===i?"":c(e,d,r),custom:""===i?"":c(e,t,r)}},t.isValidPriceConfig=u;var i=r(7750),n=r(4321);let o={buckets:[{max:5,increment:.5}]},a={buckets:[{max:20,increment:.1}]},s={buckets:[{max:20,increment:.01}]},d={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},l={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function c(e,t,r){let o="";if(!u(t))return o;let a=t.buckets.reduce((e,t)=>e.max>t.max?e:t,{max:0}),s=0,d=t.buckets.find(t=>{if(e>a.max*r){let e=t.precision;void 0===e&&(e=2),o=(t.max*r).toFixed(e)}else{if(e<=t.max*r&&e>=s*r)return t.min=s,t;s=t.max}});return d&&(o=function(e,t,r){let o,a,s=void 0!==t.precision?t.precision:2,d=t.increment*r,l=t.min*r,c=Math.floor,u=n.config.getConfig("cpmRoundingFunction");"function"==typeof u&&(c=u);let p=Math.pow(10,s+2),g=(e*p-l*p)/(d*p);try{o=c(g)*d+l}catch(e){a=!0}return(a||"number"!=typeof o)&&((0,i.logWarn)("Invalid rounding function passed in config"),o=Math.floor(g)*d+l),(o=Number(o.toFixed(10))).toFixed(s)}(e,d,r)),o}function u(e){if((0,i.isEmpty)(e)||!e.buckets||!Array.isArray(e.buckets))return!1;let t=!0;return e.buckets.forEach(e=>{e.max&&e.increment||(t=!1)}),t}},5820:function(e,t,r){"use strict";let i;Object.defineProperty(t,"__esModule",{value:!0}),t.getCreativeRendererSource=t.getCreativeRenderer=t.PUC_MIN_VERSION=void 0;var n=r(7148),o=r(7750),a=r(2954),s=r(1620);t.PUC_MIN_VERSION=3;let d=t.getCreativeRendererSource=(0,s.hook)("sync",function(e){return a.RENDERER});i={},t.getCreativeRenderer=function(e){let t=d(e);return i.hasOwnProperty(t)||(i[t]=new n.PbPromise(e=>{let r=(0,o.createInvisibleIframe)();r.srcdoc=`<script>${t}</script>`,r.onload=()=>e(r.contentWindow.render),document.body.appendChild(r)})),i[t]}},4063:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEBUG_KEY=void 0,t.debuggingControls=m,t.debuggingModuleLoader=f,t.loadSession=function(){let e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){let t=null;try{t=e.getItem(u)}catch(e){}null!==t&&h.enable()}},t.reset=void 0;var i=r(4321),n=r(1620),o=r(3800),a=r(7750),s=r(6956),d=r(4389),l=r(7148),c=r(4767);let u=t.DEBUG_KEY="__pbjs_debugging__";function p(){return(0,o.getGlobal)().installedModules.includes("debugging")}function g(e){return new l.PbPromise(t=>{(0,d.loadExternalScript)(e,c.MODULE_TYPE_PREBID,"debugging",t)})}function f(){let{alreadyInstalled:e=p,script:t=g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null;return function(){return null==r&&(r=new l.PbPromise((r,d)=>{setTimeout(()=>{if(e())r();else{let e="https://cdn.jsdelivr.net/npm/prebid.js@9.53.2/dist/debugging-standalone.js";(0,a.logMessage)(`Debugging module not installed, loading it from "${e}"...`),(0,o.getGlobal)()._installDebugging=!0,t(e).then(()=>{(0,o.getGlobal)()._installDebugging({DEBUG_KEY:u,hook:n.hook,config:i.config,createBid:s.createBid,logger:(0,a.prefixLog)("DEBUG:")})}).then(r,d)}})})),r}}function m(){let{load:e=f(),hook:t=(0,n.getHook)("requestBids")}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null,i=!1;function o(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return(r||l.PbPromise.resolve()).then(()=>e.apply(this,i))}function a(){t.getHooks({hook:o}).remove(),i=!1}return{enable:function(){i||(r=e(),t.before(o,99),i=!0)},disable:a,reset:function(){r=null,a()}}}let h=m();t.reset=h.reset,i.config.getConfig("debugging",function(e){let{debugging:t}=e;t?.enabled?h.enable():h.disable()})},750:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRACKER_METHOD_JS=t.TRACKER_METHOD_IMG=t.EVENT_TYPE_WIN=t.EVENT_TYPE_IMPRESSION=void 0,t.parseEventTrackers=function(e){return(e??[]).reduce((e,t)=>{let{event:r,method:i,url:n}=t,o=e[r]=e[r]??{};return(o[i]=o[i]??[]).push(n),e},{})},t.TRACKER_METHOD_IMG=1,t.TRACKER_METHOD_JS=2,t.EVENT_TYPE_IMPRESSION=1,t.EVENT_TYPE_WIN=500},2506:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addEvents=void 0,t.clearEvents=function(){c.clear()},t.on=t.off=t.has=t.getEvents=t.get=t.emit=void 0;var i=s(r(7750)),n=r(8878),o=r(5217),a=r(4321);function s(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(s=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let d="eventHistoryTTL",l=null,c=(0,o.ttlCollection)({monotonic:!0,ttl:()=>l});a.config.getConfig(d,e=>{l!==(l="number"==typeof(e=e?.[d])?1e3*e:null)&&c.refresh()});let u=Array.prototype.slice,p=Array.prototype.push,g=Object.values(n.EVENTS),f=n.EVENT_ID_PATHS,m=function(){let e={},t={};function r(e){return g.includes(e)}return t.has=r,t.on=function(t,n,o){if(r(t)){let r=e[t]||{que:[]};o?(r[o]=r[o]||{que:[]},r[o].que.push(n)):r.que.push(n),e[t]=r}else i.logError("Wrong event name : "+t+" Valid event names :"+g)},t.emit=function(t){var r;let n,o,a,s,d=u.call(arguments,1);i.logMessage("Emitting event for: "+t),o=(n=d[0]||{})[f[t]],r=Object.keys(a=e[t]||{que:[]}),s=[],c.add({eventType:t,args:n,id:o,elapsedTime:i.getPerformanceNow()}),o&&r.includes(o)&&p.apply(s,a[o].que),p.apply(s,a.que),(s||[]).forEach(function(e){if(e)try{e.apply(null,d)}catch(e){i.logError("Error executing handler:","events.js",e,t)}})},t.off=function(t,r,n){let o=e[t];i.isEmpty(o)||i.isEmpty(o.que)&&i.isEmpty(o[n])||n&&(i.isEmpty(o[n])||i.isEmpty(o[n].que))||(n?(o[n].que||[]).forEach(function(e){let t=o[n].que;e===r&&t.splice(t.indexOf(e),1)}):(o.que||[]).forEach(function(e){let t=o.que;e===r&&t.splice(t.indexOf(e),1)}),e[t]=o)},t.get=function(){return e},t.addEvents=function(e){g=g.concat(e)},t.getEvents=function(){return c.toArray().map(e=>Object.assign({},e))},t}();i._setEventEmitter(m.emit.bind(m));let{on:h,off:b,get:y,getEvents:v,emit:A,addEvents:I,has:E}=m;t.has=E,t.addEvents=I,t.emit=A,t.getEvents=v,t.get=y,t.off=b,t.on=h},5189:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enrichFPD=t.dep=void 0;var i=r(1620),n=r(783),o=r(7848),a=r(7750),s=r(4321),d=r(2965),l=r(7148),c=r(6565),u=r(5110),p=r(958),g=r(2276),f=r(4767),m=r(1019);let h=t.dep={getRefererInfo:n.getRefererInfo,findRootDomain:o.findRootDomain,getWindowTop:a.getWindowTop,getWindowSelf:a.getWindowSelf,getHighEntropySUA:d.getHighEntropySUA,getLowEntropySUA:d.getLowEntropySUA,getDocument:a.getDocument},b=(0,c.clientSectionChecker)("FPD");function y(e){try{return e(h.getWindowTop())}catch(t){return e(h.getWindowSelf())}}function v(e){return(0,a.getDefinedParams)(e,Object.keys(e))}t.enrichFPD=(0,i.hook)("sync",e=>{let t,r=[e,(Array.isArray(t=s.config.getConfig("firstPartyData.uaHints"))&&0!==t.length?h.getHighEntropySUA(t):l.PbPromise.resolve(h.getLowEntropySUA())).catch(()=>null),l.PbPromise.resolve("cookieDeprecationLabel"in navigator&&(0,u.isActivityAllowed)(g.ACTIVITY_ACCESS_DEVICE,(0,p.activityParams)(f.MODULE_TYPE_PREBID,"cdep"))&&navigator.cookieDeprecationLabel.getValue()).catch(()=>null)];return l.PbPromise.all(r).then(e=>{let[t,r,i]=e,o=h.getRefererInfo();Object.entries(A).forEach(e=>{let[r,i]=e,n=i(t,o);n&&Object.keys(n).length>0&&(t[r]=(0,a.mergeDeep)({},n,t[r]))}),r&&(0,a.deepSetValue)(t,"device.sua",Object.assign({},r,t.device.sua)),i&&(0,a.deepSetValue)(t,"device.ext",Object.assign({},{cdep:i},t.device.ext));let s=h.getDocument().documentElement.lang;if(s&&((0,a.deepSetValue)(t,"site.ext.data.documentLang",s),!(0,a.deepAccess)(t,"site.content.language"))){let e=s.split("-")[0];(0,a.deepSetValue)(t,"site.content.language",e)}for(let e of(t=b(t),c.CLIENT_SECTIONS))if((0,c.hasSection)(t,e)){t[e]=(0,a.mergeDeep)({},function(e,t){let r=(0,n.parseDomain)(t.page,{noLeadingWww:!0});return v({domain:r,keywords:y(e=>e.document.querySelector("meta[name='keywords']"))?.content?.replace?.(/\s/g,""),publisher:v({domain:h.findRootDomain(r)})})}(0,o),t[e]);break}return t})});let A={site(e,t){if(!c.CLIENT_SECTIONS.filter(e=>"site"!==e).some(c.hasSection.bind(null,e)))return v({page:t.page,ref:t.ref})},device:()=>y(e=>{let t=(0,a.getWinDimensions)().screen.width,r=(0,a.getWinDimensions)().screen.height,{width:i,height:n}=(0,m.getViewportSize)();return{w:t,h:r,dnt:+!!(0,a.getDNT)(),ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift(),ext:{vpw:i,vph:n}}}),regs(){let e={};y(e=>e.navigator.globalPrivacyControl)&&(0,a.deepSetValue)(e,"ext.gpc","1");let t=s.config.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=+!!t),e}}},6565:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLIENT_SECTIONS=void 0,t.clientSectionChecker=function(e){return function(t){return n.reduce((r,n)=>(o(t,n)&&(null!=r?((0,i.logWarn)(`${e} specifies both '${r}' and '${n}'; dropping the latter.`),delete t[n]):r=n),r),null),t}},t.hasSection=o;var i=r(7750);let n=t.CLIENT_SECTIONS=["dooh","app","site"];function o(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}},7848:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findRootDomain=t.coreStorage=void 0;var i=r(7750);let n=t.coreStorage=(0,r(9287).getCoreStorageManager)("fpdEnrichment");t.findRootDomain=(0,i.memoize)(function(){let e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!n.cookiesAreEnabled())return r;let o=r.split(".");if(2===o.length)return r;let a=-2,s=`_rdc${Date.now()}`,d="writeable";do{e=o.slice(a).join(".");let r=new Date((0,i.timestamp)()+1e4).toUTCString();n.setCookie(s,d,r,"Lax",e,void 0),n.getCookie(s,void 0)===d?(t=!1,n.setCookie(s,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,e,void 0)):(a+=-1,t=Math.abs(a)<=o.length)}while(t)return e})},2965:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLowEntropySUA=t.getHighEntropySUA=t.SUA_SOURCE_UNKNOWN=t.SUA_SOURCE_UA_HEADER=t.SUA_SOURCE_LOW_ENTROPY=t.SUA_SOURCE_HIGH_ENTROPY=t.LOW_ENTROPY_HINTS=t.HIGH_ENTROPY_HINTS=void 0,t.highEntropySUAAccessor=c,t.lowEntropySUAAccessor=l,t.uaDataToSUA=u;var i=r(7750),n=r(7148);t.SUA_SOURCE_UNKNOWN=0;let o=t.SUA_SOURCE_LOW_ENTROPY=1,a=t.SUA_SOURCE_HIGH_ENTROPY=2;t.SUA_SOURCE_UA_HEADER=3;let s=t.HIGH_ENTROPY_HINTS=["architecture","bitness","model","platformVersion","fullVersionList"],d=t.LOW_ENTROPY_HINTS=["brands","mobile","platform"];function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator?.userAgentData,t=e&&d.some(t=>void 0!==e[t])?Object.freeze(u(o,e)):null;return function(){return t}}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator?.userAgentData,t={},r=new WeakMap;return function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;if(!r.has(o)){let e=Array.from(o);e.sort(),r.set(o,e.join("|"))}let d=r.get(o);if(!t.hasOwnProperty(d))try{t[d]=e.getHighEntropyValues(o).then(e=>(0,i.isEmpty)(e)?null:Object.freeze(u(a,e))).catch(()=>null)}catch(e){t[d]=n.PbPromise.resolve(null)}return t[d]}}function u(e,t){function r(e,t){let r={brand:e};return(0,i.isStr)(t)&&!(0,i.isEmptyStr)(t)&&(r.version=t.split(".")),r}let n={source:e};return t.platform&&(n.platform=r(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(n.browsers=(t.fullVersionList||t.brands).map(e=>{let{brand:t,version:i}=e;return r(t,i)})),void 0!==t.mobile&&(n.mobile=+!!t.mobile),["model","bitness","architecture"].forEach(e=>{let r=t[e];(0,i.isStr)(r)&&(n[e]=r)}),n}t.getLowEntropySUA=l(),t.getHighEntropySUA=c()},1620:function(e,t,r){"use strict";let i;var n=r(5824);Object.defineProperty(t,"__esModule",{value:!0}),t.hook=t.getHook=void 0,t.ignoreCallbackArg=function(e){return u(e,function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return r.push(function(){}),e.apply(this,r)})},t.module=function(e,t){let{postInstallAllowed:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s("async",function(i){i.forEach(e=>t(...e)),r&&(c[e]=t)},e)([])},t.ready=void 0,t.setupBeforeHookFnOnce=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;0===e.getHooks({hook:t}).length&&e.before(t,r)},t.submodule=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];let n=c[e];if(n)return n(...r);l(e).before((e,t)=>{t.push(r),e(t)})},t.wrapHook=u;var o=n(r(3936)),a=r(7148);let s=t.hook=(0,o.default)({ready:o.default.SYNC|o.default.ASYNC|o.default.QUEUE}),d=(0,a.defer)();i=s.ready,s.ready=function(){try{return i.apply(s,arguments)}finally{d.resolve()}},t.ready=d.promise;let l=t.getHook=s.get,c={};function u(e,t){return Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map(t=>[t,{get:()=>e[t]}]))),t}},4030:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEO=t.NATIVE=t.BANNER=t.ALL_MEDIATYPES=t.ADPOD=void 0;let r=t.NATIVE="native",i=t.VIDEO="video",n=t.BANNER="banner";t.ADPOD="adpod",t.ALL_MEDIATYPES=[r,i,n]},6680:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NATIVE_TARGETING_KEYS=t.IMAGE=void 0,t.convertOrtbRequestToProprietaryNative=function(e){{if(!e||!(0,i.isArray)(e)||!e.some(e=>(e?.mediaTypes||{})[a.NATIVE]?.ortb))return e;let t=(0,i.deepClone)(e);for(let e of t)e.mediaTypes&&e.mediaTypes[a.NATIVE]&&e.mediaTypes[a.NATIVE].ortb&&(e.mediaTypes[a.NATIVE]=Object.assign((0,i.pick)(e.mediaTypes[a.NATIVE],o.NATIVE_KEYS_THAT_ARE_NOT_ASSETS),T(e.mediaTypes[a.NATIVE].ortb)),e.nativeParams=f(e.mediaTypes[a.NATIVE]));return t}},t.decorateAdUnitsWithNativeParams=function(e){e.forEach(e=>{let t=e.nativeParams||e?.mediaTypes?.native;t&&(e.nativeParams=f(t)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||_(e.nativeParams))})},t.fireClickTrackers=v,t.fireImpressionTrackers=y,t.fireNativeTrackers=function(e,t){let r=t.native.ortb||O(t.native);return"click"===e.action?v(r,e?.assetId):y(r),e.action},t.fromOrtbNativeRequest=T,t.getAllAssetsMessage=function(e,t){return I(e,t,null)},t.getAssetMessage=function(e,t){let r=e.assets.map(e=>E[e]);return I(e,t,r)},t.getNativeRenderingData=A,t.getNativeTargeting=function(e){var t;let r,{index:i=n.auctionManager.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={},s=i.getAdUnit(e),d=s?.nativeParams?.ortb==null&&s?.nativeParams?.sendTargetingKeys!==!1,l=(t=s,r={},t?.nativeParams?.ext&&Object.keys(t.nativeParams.ext).forEach(e=>{r[e]=`hb_native_${e}`}),{...o.NATIVE_KEYS,...r}),c={...e.native,...e.native.ext};return delete c.ext,Object.keys(c).forEach(t=>{let r=l[t],i=S(e.native[t])||S(e?.native?.ext?.[t]);if("adTemplate"===t||!r||!i)return;let n=s?.nativeParams?.[t]?.sendId;"boolean"!=typeof n&&(n=s?.nativeParams?.ext?.[t]?.sendId),n&&(i=`${r}:${e.adId}`);let o=s?.nativeParams?.[t]?.sendTargetingKeys;"boolean"!=typeof o&&(o=s?.nativeParams?.ext?.[t]?.sendTargetingKeys),("boolean"==typeof o?o:d)&&(a[r]=i)}),a},t.hasNonNativeBidder=void 0,t.isNativeOpenRTBBidValid=b,t.isNativeResponse=function(e){return e.native&&"object"==typeof e.native},t.isOpenRTBBidRequestValid=m,t.legacyPropertiesToOrtbNative=O,t.nativeAdapters=t.nativeAdUnit=void 0,t.nativeBidIsValid=function(e){let{index:t=n.auctionManager.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getAdUnit(e);if(!r)return!1;let i=r.nativeOrtbRequest;return b(e.native?.ortb||C(e.native,i),i)},t.nativeBidder=void 0,t.processNativeAdUnitParams=f,t.setNativeResponseProperties=function(e,t){let r=t?.nativeOrtbRequest,i=e.native?.ortb;if(r&&i){let t=w(i,r);Object.assign(e.native,t)}["rendererUrl","adTemplate"].forEach(r=>{let i=t?.nativeParams?.[r];i&&(e.native[r]=S(i))})},t.toLegacyResponse=w,t.toOrtbNativeRequest=_,t.toOrtbNativeResponse=C;var i=r(7750),n=r(1171),o=r(8878),a=r(4030),s=r(6e3),d=r(5820),l=r(750);let c=t.nativeAdapters=[];t.NATIVE_TARGETING_KEYS=Object.keys(o.NATIVE_KEYS).map(e=>o.NATIVE_KEYS[e]);let u={image:t.IMAGE={ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},p=x(o.PREBID_NATIVE_DATA_KEYS_TO_ORTB),g=x(o.NATIVE_ASSET_TYPES);function f(e){var t;if(e&&e.type&&((t=e.type)&&Object.keys(u).includes(t)||((0,i.logError)(`${t} nativeParam is not supported`),0))&&(e=u[e.type]),!e||!e.ortb||m(e.ortb))return e}function m(e){let t=e.assets;if(!Array.isArray(t)||0===t.length)return(0,i.logError)("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;let r=t.map(e=>e.id);return t.length!==new Set(r).size||r.some(e=>e!==parseInt(e,10))?((0,i.logError)("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?((0,i.logError)("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every(e=>(function(e){if(!(0,i.isPlainObject)(e))return(0,i.logError)("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!(0,i.isNumber)(e.img.w)&&!(0,i.isNumber)(e.img.wmin))return(0,i.logError)("for img asset there must be 'w' or 'wmin' property"),!1;if(!(0,i.isNumber)(e.img.h)&&!(0,i.isNumber)(e.img.hmin))return(0,i.logError)("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!(0,i.isNumber)(e.title.len))return(0,i.logError)("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!(0,i.isNumber)(e.data.type))return(0,i.logError)("for data asset 'type' property must be a number"),!1}else if(e.video&&(!Array.isArray(e.video.mimes)||!Array.isArray(e.video.protocols)||!(0,i.isNumber)(e.video.minduration)||!(0,i.isNumber)(e.video.maxduration)))return(0,i.logError)("video asset is not properly configured"),!1;return!0})(e))}t.nativeAdUnit=e=>{let t="native"===e.mediaType,r=e?.mediaTypes?.native;return t||r};let h=e=>c.includes(e.bidder);function b(e,t){if(!e?.link?.url)return(0,i.logError)("native response doesn't have 'link' property. Ortb response: ",e),!1;let r=t.assets.filter(e=>1===e.required).map(e=>e.id),n=e.assets.map(e=>e.id),o=r.every(e=>n.includes(e));return o||(0,i.logError)(`didn't receive a bid with all required assets. Required ids: ${r}, but received ids in response: ${n}`),o}function y(e){let{runMarkup:t=e=>(0,i.insertHtmlIntoIframe)(e),fetchURL:r=i.triggerPixel}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{[l.TRACKER_METHOD_IMG]:n=[],[l.TRACKER_METHOD_JS]:o=[]}=(0,l.parseEventTrackers)(e.eventtrackers||[])[l.EVENT_TYPE_IMPRESSION]||{};e.imptrackers&&(n=n.concat(e.imptrackers)),n.forEach(e=>r(e)),o=o.map(e=>`<script async src="${e}"></script>`),e.jstracker&&(o=o.concat([e.jstracker])),o.length&&t(o.join("\n"))}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{fetchURL:r=i.triggerPixel}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t){let i=(e.assets||[]).filter(e=>e.link).reduce((e,t)=>(e[t.id]=t.link,e),{}),n=e.link?.clicktrackers||[],o=i[t],a=n;o&&(a=o.clicktrackers||[]),a.forEach(e=>r(e))}else(e.link?.clicktrackers||[]).forEach(e=>r(e))}function A(e,t,r){let n={...(0,i.getDefinedParams)(e.native,["rendererUrl","adTemplate"]),assets:function e(t,r){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];return Object.entries(t).filter(e=>{let[t,n]=e;return n&&(!1===i&&"ext"===t||null==r||r.includes(t))}).forEach(t=>{let[a,s]=t;!1===i&&"ext"===a?n.push(...e(s,r,!0)):(i||o.NATIVE_KEYS.hasOwnProperty(a))&&n.push({key:a,value:S(s)})}),n}(e.native,r),nativeKeys:o.NATIVE_KEYS};return e.native.ortb?n.ortb=e.native.ortb:t.mediaTypes?.native?.ortb&&(n.ortb=C(e.native,t.nativeOrtbRequest)),n}function I(e,t,r){let{index:i=n.auctionManager.index}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o={message:"assetResponse",adId:e.adId},a=(0,s.getRenderingData)(t).native;return a?(o.native=Object.assign({},a),o.renderer=(0,d.getCreativeRendererSource)(t),o.rendererVersion=d.PUC_MIN_VERSION,null!=r&&(a.assets=a.assets.filter(e=>{let{key:t}=e;return r.includes(t)}))):a=A(t,i.getAdUnit(t),r),Object.assign(o,a)}t.nativeBidder=h,t.hasNonNativeBidder=e=>e.bids.filter(e=>!h(e)).length;let E=Object.fromEntries(Object.entries(o.NATIVE_KEYS).map(e=>{let[t,r]=e;return[r,t]}));function S(e){return e?.url||e}function _(e){if(!e&&!(0,i.isPlainObject)(e))return void(0,i.logError)("Native assets object is empty or not an object: ",e);let t={ver:"1.2",assets:[]};for(let r in e){if(o.NATIVE_KEYS_THAT_ARE_NOT_ASSETS.includes(r))continue;if(!o.NATIVE_KEYS.hasOwnProperty(r)){(0,i.logError)(`Unrecognized native asset code: ${r}. Asset will be ignored.`);continue}if("privacyLink"===r){t.privacy=1;continue}let n=e[r],a=0;n.required&&(0,i.isBoolean)(n.required)&&(a=Number(n.required));let s={id:t.assets.length,required:a};if(r in o.PREBID_NATIVE_DATA_KEYS_TO_ORTB)s.data={type:o.NATIVE_ASSET_TYPES[o.PREBID_NATIVE_DATA_KEYS_TO_ORTB[r]]},n.len&&(s.data.len=n.len);else if("icon"===r||"image"===r){if(s.img={type:"icon"===r?o.NATIVE_IMAGE_TYPES.ICON:o.NATIVE_IMAGE_TYPES.MAIN},n.aspect_ratios)if((0,i.isArray)(n.aspect_ratios))if(n.aspect_ratios.length){let{min_width:e,min_height:t}=n.aspect_ratios[0];(0,i.isInteger)(e)&&(0,i.isInteger)(t)?(s.img.wmin=e,s.img.hmin=t):(0,i.logError)("image.aspect_ratios min_width or min_height are invalid: ",e,t);let r=n.aspect_ratios.filter(e=>e.ratio_width&&e.ratio_height).map(e=>`${e.ratio_width}:${e.ratio_height}`);r.length>0&&(s.img.ext={aspectratios:r})}else(0,i.logError)("image.aspect_ratios was passed, but it's empty:",n.aspect_ratios);else(0,i.logError)("image.aspect_ratios was passed, but it's not a an array:",n.aspect_ratios);n.sizes&&(2===n.sizes.length&&(0,i.isInteger)(n.sizes[0])&&(0,i.isInteger)(n.sizes[1])?(s.img.w=n.sizes[0],s.img.h=n.sizes[1],delete s.img.hmin,delete s.img.wmin):(0,i.logError)("image.sizes was passed, but its value is not an array of integers:",n.sizes))}else"title"===r?s.title={len:n.len||140}:"ext"===r&&(s.ext=n,delete s.required);t.assets.push(s)}return t}function T(e){if(!m(e))return;let t={};for(let r of e.assets){if(r.title)t.title={required:!!r.required&&!!r.required,len:r.title.len};else if(r.img){let e={required:!!r.required&&!!r.required};if(r.img.w&&r.img.h)e.sizes=[r.img.w,r.img.h];else if(r.img.wmin&&r.img.hmin){let t=function(e,t){for(;e&&t&&e!==t;)e>t?e-=t:t-=e;return e||t}(r.img.wmin,r.img.hmin);e.aspect_ratios=[{min_width:r.img.wmin,min_height:r.img.hmin,ratio_width:r.img.wmin/t,ratio_height:r.img.hmin/t}]}r.img.type===o.NATIVE_IMAGE_TYPES.MAIN?t.image=e:t.icon=e}else if(r.data){let e=Object.keys(o.NATIVE_ASSET_TYPES).find(e=>o.NATIVE_ASSET_TYPES[e]===r.data.type),i=Object.keys(o.PREBID_NATIVE_DATA_KEYS_TO_ORTB).find(t=>o.PREBID_NATIVE_DATA_KEYS_TO_ORTB[t]===e);t[i]={required:!!r.required&&!!r.required},r.data.len&&(t[i].len=r.data.len)}e.privacy&&(t.privacyLink={required:!1})}return t}function O(e){let t={link:{},eventtrackers:[]};return Object.entries(e).forEach(e=>{let[r,i]=e;switch(r){case"clickUrl":t.link.url=i;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(i)?i:[i];break;case"impressionTrackers":(Array.isArray(i)?i:[i]).forEach(e=>{t.eventtrackers.push({event:l.EVENT_TYPE_IMPRESSION,method:l.TRACKER_METHOD_IMG,url:e})});break;case"javascriptTrackers":t.jstracker=Array.isArray(i)?i.join(""):i;break;case"privacyLink":t.privacy=i}}),t}function C(e,t){let r={...O(e),assets:[]};function n(e,n){let o=t.assets.find(e);null!=o&&(n(o=(0,i.deepClone)(o)),r.assets.push(o))}return Object.keys(e).filter(t=>!!e[t]).forEach(t=>{let r=S(e[t]);switch(t){case"title":n(e=>null!=e.title,e=>{e.title={text:r}});break;case"image":case"icon":let i="image"===t?o.NATIVE_IMAGE_TYPES.MAIN:o.NATIVE_IMAGE_TYPES.ICON;n(e=>null!=e.img&&e.img.type===i,e=>{e.img={url:r}});break;default:t in o.PREBID_NATIVE_DATA_KEYS_TO_ORTB&&n(e=>null!=e.data&&e.data.type===o.NATIVE_ASSET_TYPES[o.PREBID_NATIVE_DATA_KEYS_TO_ORTB[t]],e=>{e.data={value:r}})}}),r}function w(e,t){let r={},i=t?.assets||[];for(let t of(r.clickUrl=e.link?.url,r.privacyLink=e.privacy,e?.assets||[])){let e=i.find(e=>t.id===e.id);t.title?r.title=t.title.text:t.img?r[e?.img?.type===o.NATIVE_IMAGE_TYPES.MAIN?"image":"icon"]={url:t.img.url,width:t.img.w,height:t.img.h}:t.data&&(r[p[g[e?.data?.type]]]=t.data.value)}r.impressionTrackers=[];let n=[];for(let t of(e.imptrackers&&r.impressionTrackers.push(...e.imptrackers),e?.eventtrackers||[]))t.event===l.EVENT_TYPE_IMPRESSION&&t.method===l.TRACKER_METHOD_IMG&&r.impressionTrackers.push(t.url),t.event===l.EVENT_TYPE_IMPRESSION&&t.method===l.TRACKER_METHOD_JS&&n.push(t.url);return n=n.map(e=>`<script async src="${e}"></script>`),e?.jstracker&&n.push(e.jstracker),n.length&&(r.javascriptTrackers=n.join("\n")),r}function x(e){var t={};for(var r in e)t[e[r]]=r;return t}},5177:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProcessors=t.RESPONSE=t.REQUEST=t.PROCESSOR_TYPES=t.PROCESSOR_DIALECTS=t.PBS=t.IMP=t.DEFAULT=t.BID_RESPONSE=void 0,t.processorRegistry=u,t.registerOrtbProcessor=void 0;let r=t.PROCESSOR_TYPES=["request","imp","bidResponse","response"],i=t.PROCESSOR_DIALECTS=["default","pbs"],[n,o,a,s]=r;t.RESPONSE=s,t.BID_RESPONSE=a,t.IMP=o,t.REQUEST=n;let[d,l]=i;t.PBS=l,t.DEFAULT=d;let c=new Set(r);function u(){let e={};return{registerOrtbProcessor(t){let{type:i,name:n,fn:o,priority:a=0,dialects:s=[d]}=t;if(!c.has(i))throw Error(`ORTB processor type must be one of: ${r.join(", ")}`);s.forEach(t=>{e.hasOwnProperty(t)||(e[t]={}),e[t].hasOwnProperty(i)||(e[t][i]={}),e[t][i][n]={priority:a,fn:o}})},getProcessors:t=>e[t]||{}}}let{registerOrtbProcessor:p,getProcessors:g}=u();t.getProcessors=g,t.registerOrtbProcessor=p},9283:function(e,t,r){"use strict";let i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.checkAdUnitSetup=t.adUnitSetupChecks=void 0,t.executeCallbacks=K,t.startAuction=void 0,t.syncOrtb2=$;var o=r(3800),a=r(7750),s=r(2582),d=r(6907),l=r(4321),c=r(1171),u=r(9204),p=r(1620),g=r(4063),f=r(6956),m=r(9287),h=D(r(6553)),b=r(8878),y=D(r(2506)),v=r(7557),A=r(7148),I=r(5189),E=r(3029),S=r(6e3),_=r(1720),T=r(4312),O=r(3817),C=r(4030),w=r(4134),x=r(256),R=r(4576);function D(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(D=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let P=(0,o.getGlobal)(),{triggerUserSyncs:k}=d.userSync,N=[],{ADD_AD_UNITS:B,REQUEST_BIDS:U,SET_TARGETING:j}=b.EVENTS,M={bidWon:function(e){return!!c.auctionManager.getBidsRequested().map(e=>e.bids.map(e=>e.adUnitCode)).reduce(a.flatten).filter(a.uniques).includes(e)||void(0,a.logError)('The "'+e+'" placement is not defined.')}};function V(e,t){let r=[];return(0,a.isArray)(e)&&(t?e.length===t:e.length>0)&&(e.every(e=>(0,a.isArrayOfNums)(e,2))?r=e:(0,a.isArrayOfNums)(e,2)&&r.push(e)),r}function $(e,t){let r=(0,a.deepAccess)(e,`ortb2Imp.${t}`),i=(0,a.deepAccess)(e,`mediaTypes.${t}`);if(!r&&!i)return;let n={[C.VIDEO]:T.ORTB_VIDEO_PARAMS,[C.BANNER]:O.ORTB_BANNER_PARAMS}[t];n&&[...n].forEach(r=>{let[i,n]=r,o=(0,a.deepAccess)(e,`mediaTypes.${t}.${i}`),s=(0,a.deepAccess)(e,`ortb2Imp.${t}.${i}`);void 0==o&&void 0==s||(void 0==o?(0,a.deepSetValue)(e,`mediaTypes.${t}.${i}`,s):void 0==s?(0,a.deepSetValue)(e,`ortb2Imp.${t}.${i}`,o):((0,a.logWarn)(`adUnit ${e.code}: specifies conflicting ortb2Imp.${t}.${i} and mediaTypes.${t}.${i}, the latter will be ignored`,e),(0,a.deepSetValue)(e,`mediaTypes.${t}.${i}`,s)))})}function q(e){let t,r=(0,a.deepClone)(e),i=r.mediaTypes.banner,n=null==i.sizes?null:V(i.sizes),o=e.ortb2Imp?.banner?.format??i?.format;if(null!=o){(0,a.deepSetValue)(r,"ortb2Imp.banner.format",o),i.format=o;try{t=o.filter(t=>{let{w:r,h:i,wratio:n,hratio:o}=t;return(r??i)!=null&&(n??o)!=null?((0,a.logWarn)("Ad unit banner.format specifies both w/h and wratio/hratio",e),!1):null!=r&&null!=i||null!=n&&null!=o}).map(e=>{let{w:t,h:r,wratio:i,hratio:n}=e;return[t??i,r??n]})}catch(t){(0,a.logError)(`Invalid format definition on ad unit ${e.code}`,o)}null==t||null==n||(0,a.deepEqual)(n,t)||(0,a.logWarn)(`Ad unit ${e.code} has conflicting sizes and format definitions`,e)}let s=t??n??[],d=e.ortb2Imp?.banner?.expdir??i.expdir;return null!=d&&(i.expdir=d,(0,a.deepSetValue)(r,"ortb2Imp.banner.expdir",d)),s.length>0?(i.sizes=s,r.sizes=s):((0,a.logError)("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete r.mediaTypes.banner),$(r,"banner"),r}function L(e){let t=(0,a.deepClone)(e),r=t.mediaTypes.video;if(r.playerSize){let e="number"==typeof r.playerSize[0]?2:1,i=V(r.playerSize,e);i.length>0?(2===e&&(0,a.logInfo)("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),r.playerSize=i,t.sizes=i):((0,a.logError)("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return(0,T.validateOrtbVideoFields)(t),$(t,"video"),t}function F(e){function t(t){return(0,a.logError)(`Error in adUnit "${e.code}": ${t}. Removing native request from ad unit`,e),delete i.mediaTypes.native,i}function r(e){for(let t of["sendTargetingKeys","types"])if(n.hasOwnProperty(t)){let r=e(t);if(r)return r}}let i=(0,a.deepClone)(e),n=i.mediaTypes.native;if(n.ortb){if(n.ortb.assets?.some(e=>!(0,a.isNumber)(e.id)||e.id<0||e.id%1!=0))return t("native asset ID must be a nonnegative integer");if(r(e=>t(`ORTB native requests cannot specify "${e}"`)))return i;let e=Object.keys(b.NATIVE_KEYS).filter(e=>b.NATIVE_KEYS[e].includes("hb_native_")),o=Object.keys(n).filter(t=>e.includes(t));o.length>0&&((0,a.logError)(`when using native OpenRTB format, you cannot use legacy native properties. Deleting ${o} keys from request.`),o.forEach(e=>delete i.mediaTypes.native[e]))}else r(e=>`mediaTypes.native.${e} is deprecated, consider using native ORTB instead`,e);return n.image&&n.image.sizes&&!Array.isArray(n.image.sizes)&&((0,a.logError)("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete i.mediaTypes.native.image.sizes),n.image&&n.image.aspect_ratios&&!Array.isArray(n.image.aspect_ratios)&&((0,a.logError)("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete i.mediaTypes.native.image.aspect_ratios),n.icon&&n.icon.sizes&&!Array.isArray(n.icon.sizes)&&((0,a.logError)("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete i.mediaTypes.native.icon.sizes),i}function W(e,t){let r=e?.mediaTypes?.[t]?.pos;if(!(0,a.isNumber)(r)||isNaN(r)||!isFinite(r)){let r=`Value of property 'pos' on ad unit ${e.code} should be of type: Number`;(0,a.logWarn)(r),delete e.mediaTypes[t].pos}return e}function G(e){let t=t=>`adUnit.code '${e.code}' ${t}`,r=e.mediaTypes,i=e.bids;return null==i||(0,a.isArray)(i)?null==i&&null==e.ortb2Imp?((0,a.logError)(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):r&&0!==Object.keys(r).length?(null!=e.ortb2Imp&&(null==i||0===i.length)&&(e.bids=[{bidder:null}],(0,a.logMessage)(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):((0,a.logError)(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):((0,a.logError)(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}(0,g.loadSession)(),P.bidderSettings=P.bidderSettings||{},P.libLoaded=!0,P.version="v9.53.2",(0,a.logInfo)("Prebid.js v9.53.2 loaded"),P.installedModules=P.installedModules||[],P.adUnits=P.adUnits||[],P.triggerUserSyncs=k;let z=t.adUnitSetupChecks={validateAdUnit:G,validateBannerMediaType:q,validateSizes:V};Object.assign(z,{validateNativeMediaType:F}),Object.assign(z,{validateVideoMediaType:L});let H=t.checkAdUnitSetup=(0,p.hook)("sync",function(e){let t=[];return e.forEach(e=>{let r,i,n;if(null==(e=G(e)))return;let o=e.mediaTypes;o.banner&&(r=q(e),o.banner.hasOwnProperty("pos")&&(r=W(r,"banner"))),o.video&&(i=r?L(r):L(e),o.video.hasOwnProperty("pos")&&(i=W(i,"video"))),o.native&&(n=i?F(i):r?F(r):F(e));let a=Object.assign({},r,i,n);t.push(a)}),t},"checkAdUnitSetup");function Y(e){let t=c.auctionManager[e]().filter(e=>c.auctionManager.getAdUnitCodes().includes(e.adUnitCode)),r=c.auctionManager.getLastAuctionId();return t.map(e=>e.adUnitCode).filter(a.uniques).map(e=>t.filter(t=>t.auctionId===r&&t.adUnitCode===e)).filter(e=>e&&e[0]&&e[0].adUnitCode).map(e=>({[e[0].adUnitCode]:{bids:e}})).reduce((e,t)=>Object.assign(e,t),{})}P.getAdserverTargetingForAdUnitCodeStr=function(e){if((0,a.logInfo)("Invoking pbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e){var t=P.getAdserverTargetingForAdUnitCode(e);return(0,a.transformAdServerTargetingObj)(t)}(0,a.logMessage)("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},P.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){let t=c.auctionManager.getAllBidsForAdUnitCode(e).filter(R.isBidUsable);return t.length?t.reduce(_.getHighestCpm):{}}(0,a.logMessage)("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},P.trimAdUnitBidCache=function(e,t){e&&t&&c.auctionManager.trimAdUnitBidCache(e,t)},P.trimBidPool=function(e,t){e&&t&&c.auctionManager.trimBidPool(e,t)},P.getAdserverTargetingForAdUnitCode=function(e,t){return P.getAdserverTargeting(e,t)[e]},P.getAdserverTargeting=function(e,t){return(0,a.logInfo)("Invoking pbjs.getAdserverTargeting",arguments),u.targeting.getAllTargeting(e,t)},P.getConsentMetadata=function(){return(0,a.logInfo)("Invoking pbjs.getConsentMetadata"),E.allConsent.getConsentMeta()},P.getNoBids=function(){return(0,a.logInfo)("Invoking pbjs.getNoBids",arguments),Y("getNoBids")},P.getNoBidsForAdUnitCode=function(e){return{bids:c.auctionManager.getNoBids().filter(t=>t.adUnitCode===e)}},P.getBidResponses=function(){return(0,a.logInfo)("Invoking pbjs.getBidResponses",arguments),Y("getBidsReceived")},P.getBidResponsesForAdUnitCode=function(e){let t=(P?.adUnits||[]).filter(t=>t.code===e),r=t.length&&t[0].bidPoolId,i=l.config.getConfig("bidPooling")?.excludedBidders||[];return{bids:c.auctionManager.getBidsReceived().filter(t=>{let n=t.adUnitCode===e,o=!i.includes(t.bidderCode),a=r&&o&&(t.bidPoolId===r||t.passiveBidPoolId===r),s=!t.sharedBidInUse||t.sharedBidInUse===e;return(n||a)&&s})}},P.getBidResponsesForBidPoolId=function(e){let t=l.config.getConfig("bidPooling")?.excludedBidders||[];return{bids:c.auctionManager.getBidsReceived().filter(r=>{let i=r.bidPoolId===e||r.passiveBidPoolId===e,n=!t.includes(r.bidderCode);return i&&n})}},P.clearAllAuctions=function(){(0,a.logInfo)("Invoking pbjs.clearBidResponsesFromBidPool",arguments),c.auctionManager.clearAllAuctions()},P.setTargetingForGPTAsync=function(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_.getHighestCpm,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a.sortByHighestCpm;((0,a.logInfo)("Invoking pbjs.setTargetingForGPTAsync",arguments),(0,a.isGptPubadsDefined)())?u.targeting.setTargetingForGPT(e,t,r,i,n,o):(0,a.logError)("window.googletag is not defined on the page")},P.setTargetingForAst=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];((0,a.logInfo)("Invoking pbjs.setTargetingForAn",arguments),u.targeting.isApntagDefined())?(u.targeting.setTargetingForAst(e,t),y.emit(j,u.targeting.getAllTargeting())):(0,a.logError)("window.apntag is not defined on the page")},P.clearTargetingForSharedBidPool=function(e){(0,a.logInfo)("Invoking pbjs.clearTargetingForSharedBidPool",arguments),u.targeting.clearTargetingForSharedBidPool(e)},P.renderAd=(0,p.hook)("async",function(e,t,r){(0,a.logInfo)("Invoking pbjs.renderAd",arguments),(0,a.logMessage)("Calling renderAd with adId :"+t),(0,S.renderAdDirect)(e,t,r)}),P.removeAdUnit=function(e){if((0,a.logInfo)("Invoking pbjs.removeAdUnit",arguments),!e){P.adUnits=[];return}((0,a.isArray)(e)?e:[e]).forEach(e=>{for(let t=P.adUnits.length-1;t>=0;t--)P.adUnits[t].code===e&&P.adUnits.splice(t,1)})},i=(0,p.hook)("async",function(){let{bidsBackHandler:e,timeout:t,adUnits:r,adUnitCodes:i,labels:n,auctionId:o,ttlBuffer:s,ortb2:d,metrics:c,defer:u,resolve:p}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y.emit(U);let g=t||l.config.getConfig("bidderTimeout");(0,a.logInfo)("Invoking pbjs.requestBids",arguments),null==i||Array.isArray(i)||(i=[i]),i&&i.length?r=r.filter(e=>i.includes(e.code)):i=r&&r.map(e=>e.code),i=i.filter(a.uniques);let f={global:(0,a.mergeDeep)({},l.config.getAnyConfig("ortb2")||{},d||{}),bidder:Object.fromEntries(Object.entries(l.config.getBidderConfig()).map(e=>{let[t,r]=e;return[t,(0,a.deepClone)(r.ortb2)]}).filter(e=>{let[t,r]=e;return null!=r}))};return(0,I.enrichFPD)(A.PbPromise.resolve(f.global)).then(t=>(f.global=t,J({bidsBackHandler:e,timeout:g,adUnits:r,adUnitCodes:i,labels:n,auctionId:o,ttlBuffer:s,ortb2Fragments:f,metrics:c,defer:u,resolve:p})))},"requestBids"),n=async(e,t)=>{e.queue&&await e.queue,i.call(t,e)},P.requestBids=(0,p.wrapHook)(i,(0,w.delayIfPrerendering)(()=>!l.config.getConfig("allowPrerendering"),function(){let e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{enabled:i,timeout:o}=l.config.getConfig("requestQueue")||{},s=new Promise(t=>{e=t});if(i){let e;t=i&&N.length&&Promise.race([(e=o||50,new Promise(t=>setTimeout(t,e))),N.shift()]),N.push(s)}let d=r.adUnits||P.adUnits;return r.adUnits=(0,a.isArray)(d)?d.slice():[d],r.metrics=(0,v.newMetrics)(),r.metrics.checkpoint("requestBids"),r.defer=(0,A.defer)({promiseFactory:e=>new Promise(e)}),r.resolver=e,r.queue=t,n(r,this),r.defer.promise}));let J=t.startAuction=(0,p.hook)("async",function(){let{bidsBackHandler:e,timeout:t,adUnits:r,ttlBuffer:i,adUnitCodes:n,labels:o,auctionId:s,ortb2Fragments:d,metrics:p,defer:g,resolve:f}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=(0,h.getS2SBidderSet)(l.config.getConfig("s2sConfig")||[]);function b(t,r,i){if("function"==typeof e)try{e(t,r,i)}catch(e){(0,a.logError)("Error executing bidsBackHandler",null,e)}g.resolve({bids:t,timedOut:r,auctionId:i})}r.forEach(e=>(0,T.fillVideoDefaults)(e));let y={};if((r=(0,v.useMetrics)(p).measureTime("requestBids.validate",()=>H(r))).forEach(e=>{let t=Object.keys(e.mediaTypes||{banner:"banner"}),r=e.bids.map(e=>e.pbsHost||e.bidder).filter(e=>e),n=h.default.bidderRegistry,o=r.filter(e=>!m.has(e));e.adUnitId=(0,a.generateUUID)();let s=e.ortb2Imp?.ext?.tid;s&&(y.hasOwnProperty(e.code)?(0,a.logWarn)(`Multiple distinct ortb2Imp.ext.tid were provided for twin ad units '${e.code}'`):y[e.code]=s),null==i||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=i),o.forEach(r=>{let i=n[r],o=i&&i.getSpec&&i.getSpec(),s=o&&o.supportedMediaTypes||["banner"];t.some(e=>s.includes(e))||((0,a.logWarn)((0,a.unsupportedBidderMessage)(e,r)),e.bids=e.bids.filter(e=>e.bidder!==r))})}),r&&0!==r.length){r.forEach(e=>{let t=e.ortb2Imp?.ext?.tid||y[e.code]||(0,a.generateUUID)();y.hasOwnProperty(e.code)||(y[e.code]=t),e.transactionId=t,(0,a.deepSetValue)(e,"ortb2Imp.ext.tid",t)});let e=c.auctionManager.createAuction({adUnits:r,adUnitCodes:n,callback:b,cbTimeout:t,labels:o,auctionId:s,ortb2Fragments:d,metrics:p}),i=r.length;i>15&&(0,a.logInfo)(`Current auction ${e.getAuctionId()} contains ${i} adUnits.`,r),n.forEach(t=>u.targeting.setLatestAuctionForAdUnit(t,e.getAuctionId())),e.callBids(),f&&f()}else(0,a.logMessage)("No adUnits configured. No bids requested."),b()},"startAuction");function K(e,t){function r(e){for(var t;t=e.shift();)t()}r(m.storageCallbacks),r(Q),e.call(this,t)}P.requestBids.before(K,49),P.addAdUnits=function(e){(0,a.logInfo)("Invoking pbjs.addAdUnits",arguments),P.adUnits.push.apply(P.adUnits,(0,a.isArray)(e)?e:[e]),y.emit(B)},P.onEvent=function(e,t,r){((0,a.logInfo)("Invoking pbjs.onEvent",arguments),(0,a.isFn)(t))?r&&!M[e].call(null,r)?(0,a.logError)('The id provided is not valid for event "'+e+'" and no handler was set.'):y.on(e,t,r):(0,a.logError)('The event handler provided is not a function and was not set on event "'+e+'".')},P.offEvent=function(e,t,r){(0,a.logInfo)("Invoking pbjs.offEvent",arguments),(!r||M[e].call(null,r))&&y.off(e,t,r)},P.getEvents=function(){return(0,a.logInfo)("Invoking pbjs.getEvents"),y.getEvents()},P.registerBidAdapter=function(e,t,r){(0,a.logInfo)("Invoking pbjs.registerBidAdapter",arguments);try{let i=r?(0,x.newBidder)(r):e();h.default.registerBidAdapter(i,t)}catch(e){(0,a.logError)("Error registering bidder adapter : "+e.message)}},P.registerAnalyticsAdapter=function(e){(0,a.logInfo)("Invoking pbjs.registerAnalyticsAdapter",arguments);try{h.default.registerAnalyticsAdapter(e)}catch(e){(0,a.logError)("Error registering analytics adapter : "+e.message)}},P.createBid=function(e){return(0,a.logInfo)("Invoking pbjs.createBid",arguments),(0,f.createBid)(e)};let Q=[],X=(0,p.hook)("async",function(e){e&&!(0,a.isEmpty)(e)?((0,a.logInfo)("Invoking pbjs.enableAnalytics for: ",e),h.default.enableAnalytics(e)):(0,a.logError)("pbjs.enableAnalytics should be called with option {}")},"enableAnalyticsCb");function Z(e){if("function"==typeof e)try{e.call()}catch(e){(0,a.logError)("Error processing command :",e.message,e.stack)}else(0,a.logError)("Commands written into pbjs.cmd.push must be wrapped in a function")}function ee(e){e.forEach(function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){(0,a.logError)("Error processing command :","prebid.js",e)}})}P.enableAnalytics=function(e){Q.push(X.bind(this,e))},P.aliasBidder=function(e,t,r){(0,a.logInfo)("Invoking pbjs.aliasBidder",arguments),e&&t?h.default.aliasBidAdapter(e,t,r):(0,a.logError)("bidderCode and alias must be passed as arguments","pbjs.aliasBidder")},P.aliasRegistry=h.default.aliasRegistry,l.config.getConfig("aliasRegistry",e=>{"private"===e.aliasRegistry&&delete P.aliasRegistry}),P.clearAuctionBids=function(e){return(0,a.logInfo)("Invoking pbjs.clearAuctionBids",arguments),c.auctionManager.clearAuctionBids(e)},P.setBidsReceivedFilter=function(e){return c.auctionManager.setBidsReceivedFilter(e)},P.getAllWinningBids=function(){return c.auctionManager.getAllWinningBids()},P.getAllPrebidWinningBids=function(){return(0,a.logWarn)("getAllPrebidWinningBids may be removed or renamed in a future version. This function returns bids that have won in prebid and have had targeting set but have not (yet?) won in the ad server. It excludes bids that have been rendered."),c.auctionManager.getBidsReceived().filter(e=>e.status===b.BID_STATUS.BID_TARGETING_SET)},P.getHighestCpmBids=function(e){return u.targeting.getWinningBids(e)},P.clearSlotTargeting=function(e){u.targeting.clearTargeting(e)},P.clearAllAuctions=function(){c.auctionManager.clearAllAuctions()},P.getHighestCpmBidsForPoolId=function(e){return u.targeting.getWinningPoolIdBids(e)},P.markWinningBidAsUsed=function(e){let t,{adId:r,adUnitCode:i,analytics:n=!1,bidPoolId:o,passiveBidPoolId:s,events:d=!1}=e;i&&null==r?t=u.targeting.getWinningBids(i):(o||s)&&r?t=c.auctionManager.getBidsReceived().filter(e=>e.adId===r&&(e.bidPoolId===o||e.passiveBidPoolId===s)):r?t=c.auctionManager.getBidsReceived().filter(e=>e.adId===r):o||s?t=u.targeting.getWinningPoolIdBids(o||s):(0,a.logWarn)("Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function."),t.length>0&&(n||d?(0,S.markWinningBid)(t[0]):c.auctionManager.addWinningBid(t[0]),(0,S.markBidAsRendered)(t[0]))},P.getConfig=l.config.getAnyConfig,P.readConfig=l.config.readAnyConfig,P.mergeConfig=l.config.mergeConfig,P.mergeBidderConfig=l.config.mergeBidderConfig,P.setConfig=l.config.setConfig,P.setBidderConfig=l.config.setBidderConfig,P.que.push(()=>(0,s.listenMessagesFromCreative)()),P.processQueue=(0,w.delayIfPrerendering)(()=>(0,o.getGlobal)().delayPrerendering,function(){P.que.push=P.cmd.push=Z,(0,S.insertLocatorFrame)(),p.hook.ready(),ee(P.que),ee(P.cmd)}),P.triggerBilling=e=>{let{adId:t,adUnitCode:r}=e;c.auctionManager.getAllWinningBids().filter(e=>e.adId===t||null==t&&e.adUnitCode===r).forEach(e=>{h.default.triggerBilling(e),(0,S.renderIfDeferred)(e)})},t.default=P},1980:function(e,t,r){"use strict";var i=r(5824);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.default}});var n=i(r(9283))},3800:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobal=function(){return i},t.registerModule=function(e){i.installedModules.push(e)};let r=window,i=r.pbjs=r.pbjs||{};i.cmd=i.cmd||[],i.que=i.que||[],r===window&&(r._pbjsGlobals=r._pbjsGlobals||[],r._pbjsGlobals.push("pbjs"))},783:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cacheWithLocation=l,t.detectReferer=d,t.ensureProtocol=o,t.getRefererInfo=void 0,t.parseDomain=a;var i=r(4321),n=r(7750);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e||/\w+:\/\//.exec(e))return e;let r=t.location.protocol;try{r=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?r+e:`${r}//${e}`}function a(e){let{noLeadingWww:t=!1,noPort:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{e=new URL(o(e))}catch(e){return}return e=r?e.hostname:e.host,t&&e.startsWith("www.")&&(e=e.substring(4)),e}function s(e){try{let t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}function d(e){return function(){let t,r,d,l,c=[],u=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(e),p=i.config.getConfig("maxNestedIframes"),g=!1,f=0,m=!1,h=!1,b=!1;do{let i,o=t,a=h,l=!1,p=null;h=!1,t=t?t.parent:e;try{i=t.location.href||null}catch(e){l=!0}if(l)if(a){let i=o.context;try{r=p=i.sourceUrl,b=!0,m=!0,t===e.top&&(g=!0),i.canonicalUrl&&(d=i.canonicalUrl)}catch(e){}}else{(0,n.logWarn)("Trying to access cross domain iframe. Continuing without referrer and location");try{let r=o.document.referrer;r&&(p=r,t===e.top&&(g=!0))}catch(e){}!p&&u&&u[f-1]&&(p=u[f-1],t===e.top&&(b=!0)),p&&!m&&(r=p)}else{if(i&&(r=p=i,m=!1,t===e.top)){g=!0;let e=s(t.document);e&&(d=e)}t.context&&t.context.sourceUrl&&(h=!0)}c.push(p),f++}while(t!==e.top&&f<p)c.reverse();try{l=e.top.document.referrer}catch(e){}let y=g||b?r:null,v=i.config.getConfig("pageUrl")||d||null,A=i.config.getConfig("pageUrl")||y||o(v,e);return y&&y.indexOf("?")>-1&&-1===A.indexOf("?")&&(A=`${A}${y.substring(y.indexOf("?"))}`),{reachedTop:g,isAmp:m,numIframes:f-1,stack:c,topmostLocation:r||null,location:y,canonicalUrl:v,page:A,domain:a(A)||null,ref:l||null,legacy:{reachedTop:g,isAmp:m,numIframes:f-1,stack:c,referer:r||null,canonicalUrl:v}}}}function l(e){let t,r,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return n.top!==n?e:function(){let o=s(n.document),a=n.location.href;return(t!==o||a!==r)&&(t=o,r=a,i=e()),i}}t.getRefererInfo=l(d(window))},2582:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReplier=g,t.listenMessagesFromCreative=function(){window.addEventListener("message",function(e){f(e)},!1)},t.receiveMessage=f,t.resizeRemoteCreative=h;var i=r(6680),n=r(8878),o=r(7750),a=r(6e3),s=r(5820);let{REQUEST:d,RESPONSE:l,NATIVE:c,EVENT:u}=n.MESSAGES,p={[d]:function(e,t,r){(0,a.handleRender)({renderFn(t){e(Object.assign({message:l,renderer:(0,s.getCreativeRendererSource)(r),rendererVersion:s.PUC_MIN_VERSION},t))},resizeFn:m(t.adId,r),options:t.options,adId:t.adId,bidResponse:r})},[u]:function(e,t,r){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3],null==r)return void(0,o.logError)(`Cannot find ad '${t.adId}' for x-origin event request`);if(r.status!==n.BID_STATUS.RENDERED){(0,a.emitAdRenderFail)({bid:r,id:t.adId,reason:n.AD_RENDER_FAILED_REASON.EXCEPTION,message:t.info&&t.info.message}),(0,o.logWarn)(`Received x-origin event request without corresponding render request for ad '${r.adId}'`);return}return(0,a.handleCreativeEvent)(t,r)}};function g(e){return null==e.origin&&0===e.ports.length?function(){let e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw(0,o.logError)(e),Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}function f(e){let t="request_ad"===e.data.message;var r=e.message?"message":"data",i={};try{i=t?{adId:e.data.adId||e.data.id,message:"Prebid Request"}:JSON.parse(e[r])}catch(e){return}if(i&&i.adId&&i.message&&p.hasOwnProperty(i.message))return(0,a.getBidToRender)(i.adId,i.message===n.MESSAGES.REQUEST).then(t=>{var r,n;p[i.message]((r=i.adId,n=g(e),function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return n(Object.assign({},e,{adId:r}),...i)}),i,t)})}function m(e,t){return function(r,i){h({...t,width:r,height:i,adId:e})}}function h(e){let{instl:t,adId:r,adUnitCode:i,width:n,height:a,sharedBidInUse:s}=e,d=s||i;function l(e){return e?e+"px":"100%"}t||["div","iframe"].forEach(e=>{var t,s,c,u,p,g;let f,m,h,b,y=(t=e+':not([style*="display: none"])',h=(s=r,c=d,(0,o.isGptPubadsDefined)()?(u=s,p=c,(f=window.googletag.pubads().getSlots().find(e=>p&&e.getSlotElementId()===p||e.getTargetingKeys().find(t=>e.getTargeting(t).includes(u))))?f.getSlotElementId():null):(0,o.isApnGetTagDefined)()?(g=i,(m=window.apntag.getTag(g))&&m.targetId):c),(b=document.getElementById(h))&&b.querySelector(t));if(y){let e=function(e){if(window.googletag)return find(window.googletag.pubads().getSlots(),t=>t.getTargeting("hb_instl").includes("1")&&t.getTargeting("hb_adid").includes(e))}(r),t=y.style;t.width=e?"100vw":l(n),t.height=e?"100vh":l(a)}else(0,o.logError)(`Unable to locate matching page element for adUnitCode ${d}.  Can't resize it to ad's dimensions.  Please review setup.`)})}Object.assign(p,{[c]:function(e,t,r){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3],null==r)return void(0,o.logError)(`Cannot find ad for x-origin event request: '${t.adId}'`);switch(t.action){case"assetRequest":(0,a.deferRendering)(r,()=>e((0,i.getAssetMessage)(t,r)));break;case"allAssetRequest":(0,a.deferRendering)(r,()=>e((0,i.getAllAssetsMessage)(t,r)));break;default:(0,a.handleNativeMessage)(t,r,{resizeFn:m(t.adId,r)}),(0,a.markWinner)(r)}}})},9287:function(e,t,r){"use strict";var i=r(5824);Object.defineProperty(t,"__esModule",{value:!0}),t.STORAGE_TYPE_LOCALSTORAGE=t.STORAGE_TYPE_COOKIES=void 0,t.deviceAccessRule=b,t.getCoreStorageManager=function(e){return h({moduleName:e,moduleType:a.MODULE_TYPE_PREBID})},t.getStorageManager=function(){let{moduleType:e,moduleName:t,bidderCode:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function i(){throw Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}return r?((e&&e!==a.MODULE_TYPE_BIDDER||t)&&i(),e=a.MODULE_TYPE_BIDDER,t=r):t&&e||i(),h({moduleType:e,moduleName:t})},t.newStorageManager=h,t.resetData=function(){t.storageCallbacks=m=[]},t.storageAllowedRule=y,t.storageCallbacks=void 0;var n=r(7750),o=r(1928),a=r(4767),s=r(5110),d=r(8839),l=r(2276),c=r(4321),u=i(r(6553)),p=r(958);let g=t.STORAGE_TYPE_LOCALSTORAGE="html5",f=t.STORAGE_TYPE_COOKIES="cookie",m=t.storageCallbacks=[];function h(){let{moduleName:e,moduleType:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isAllowed:r=s.isActivityAllowed}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function i(i,n){let o=e,s=c.config.getCurrentBidder();return s&&t===a.MODULE_TYPE_BIDDER&&u.default.aliasRegistry[s]===e&&(o=s),i({valid:r(l.ACTIVITY_ACCESS_DEVICE,(0,p.activityParams)(t,o,{[d.ACTIVITY_PARAM_STORAGE_TYPE]:n}))})}function o(e,t,r){if(!r||"function"!=typeof r)return i(e,t);m.push(function(){r(i(e,t))})}function h(e){let t=e.charAt(0).toUpperCase()+e.substring(1),r=()=>window[e],i=function(t){return o(function(t){if(t&&t.valid)try{return!!r()}catch(t){(0,n.logError)(`${e} api disabled`)}return!1},g,t)};return{[`has${t}`]:i,[`${e}IsEnabled`]:e=>o(function(e){if(e&&e.valid)try{return r().setItem("prebid.cookieTest","1"),"1"===r().getItem("prebid.cookieTest")}catch(e){}finally{try{r().removeItem("prebid.cookieTest")}catch(e){}}return!1},g,e),[`setDataIn${t}`]:(e,t,n)=>o(function(n){n&&n.valid&&i()&&r().setItem(e,t)},g,n),[`getDataFrom${t}`]:(e,t)=>o(function(t){return t&&t.valid&&i()?r().getItem(e):null},g,t),[`removeDataFrom${t}`]:(e,t)=>o(function(t){t&&t.valid&&i()&&r().removeItem(e)},g,t)}}return{setCookie:function(e,t,r,i,n,a){return o(function(o){if(o&&o.valid){let o=n&&""!==n?` ;domain=${encodeURIComponent(n)}`:"",a=r&&""!==r?` ;expires=${r}`:"",s=null!=i&&"none"==i.toLowerCase();document.cookie=`${e}=${encodeURIComponent(t)}${a}; path=/${o}${i?`; SameSite=${i}`:""}${s?"; Secure":""}`}},f,a)},getCookie:function(e,t){return o(function(t){if(t&&t.valid){let t=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return t?decodeURIComponent(t[2]):null}return null},f,t)},cookiesAreEnabled:function(e){return o(function(e){return!!e&&!!e.valid&&(0,n.checkCookieSupport)()},f,e)},...h("localStorage"),...h("sessionStorage"),findSimilarCookies:function(e,t){return o(function(t){if(t&&t.valid){let t=[];if((0,n.hasDeviceAccess)()){let r=document.cookie.split(";");for(;r.length;){let i=r.pop(),n=i.indexOf("=");n=n<0?i.length:n,decodeURIComponent(i.slice(0,n).replace(/^\s+/,"")).indexOf(e)>=0&&t.push(decodeURIComponent(i.slice(n+1)))}}return t}},f,t)}}}function b(){if(!(0,n.hasDeviceAccess)())return{allow:!1}}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.bidderSettings;if(e[d.ACTIVITY_PARAM_COMPONENT_TYPE]!==a.MODULE_TYPE_BIDDER)return;let r=t.get(e[d.ACTIVITY_PARAM_ADAPTER_CODE],"storageAllowed");if(r&&!0!==r){let t=e[d.ACTIVITY_PARAM_STORAGE_TYPE];r=Array.isArray(r)?r.some(e=>e===t):r===t}else r=!!r;if(!r)return{allow:r}}(0,s.registerActivityControl)(l.ACTIVITY_ACCESS_DEVICE,"deviceAccess config",b),(0,s.registerActivityControl)(l.ACTIVITY_ACCESS_DEVICE,"bidderSettings.*.storageAllowed",y)},9204:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TARGETING_KEYS_ARR=void 0,t.getGPTSlotsForAdUnits=T,t.getHighestCpmBidsFromBidPool=void 0,t.newTargeting=O,t.sortByDealAndPriceBucketOrCpm=_,t.targeting=void 0;var i=r(1171),n=r(1928),o=r(4321),a=r(8878),s=m(r(2506)),d=r(1620),l=r(4030),c=r(6680),u=r(7750),p=r(1720),g=r(3800),f=r(4576);function m(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(m=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}var h=[],b=(0,g.getGlobal)();let y="targetingControls.allowTargetingKeys",v="targetingControls.addTargetingKeys",A=`Only one of "${y}" or "${v}" can be set`,I=t.TARGETING_KEYS_ARR=Object.keys(a.TARGETING_KEYS).map(e=>a.TARGETING_KEYS[e]),E=function(e){i.auctionManager.getBidsReceived().filter(function(t){return t.status!==a.BID_STATUS.RENDERED&&t.sharedBidInUse===e}).forEach(e=>{delete e.sharedBidInUse})};s.on(a.EVENTS.BEFORE_REQUEST_BIDS,function(e){e.forEach(e=>{var t=e.code;b.adUnits.filter(e=>e.code===t).length&&E(t)})}),s.on(a.EVENTS.BID_WON,function(e){var t=e.sharedBidInUse;setTimeout(()=>{E(t)},1e3)});let S=t.getHighestCpmBidsFromBidPool=(0,d.hook)("sync",function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.sortByHighestCpm;if(!n){let n=[],s=o.config.getConfig("sendBidsControl.dealPrioritization"),d=Object.keys(i),l=(0,u.groupBy)(e,"adUnitCode");return d.length&&(l=Object.keys(l).reduce((e,t)=>{var r=!1;return d.forEach(n=>{if(i[n].codes.includes(t)){var o=i[n].adUnit;e[o]||(e[o]=[]),e[o]=e[o].concat(l[t]),r=!0}}),r||(e[t]=l[t]),e},{})),Object.keys(l).forEach(e=>{let i=[],o=(0,u.groupBy)(l[e],"bidderCode");Object.keys(o).forEach(e=>i.push(o[e].reduce(t))),r?(i=s?i.sort(_(!0,a)):i.sort(a),n.push(...i.slice(0,r))):(i=i.sort(a),n.push(...i))}),n}return e});function _(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.sortByHighestCpm;return function(r,i){return void 0!==r.adserverTargeting.hb_deal&&void 0===i.adserverTargeting.hb_deal?-1:void 0===r.adserverTargeting.hb_deal&&void 0!==i.adserverTargeting.hb_deal?1:e?t(r,i):i.adserverTargeting.hb_pb-r.adserverTargeting.hb_pb}}function T(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>window.googletag.pubads().getSlots();return r().reduce((e,r)=>{let i=(0,u.isFn)(t)&&t(r);return Object.keys(e).filter((0,u.isFn)(i)?i:(0,u.isAdUnitCodeMatchingSlot)(r)).forEach(t=>e[t].push(r)),e},Object.fromEntries(e.map(e=>[e,[]])))}function O(e){let t={},r={};function i(t){return"string"==typeof t?[t]:(0,u.isArray)(t)?t:e.getAdUnitCodes()||[]}function g(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.getOldestHighestCpmBid,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return S(e.getBidsReceived().reduce((e,t)=>{let i=o.config.getConfig("useBidCache"),n=o.config.getConfig("bidCacheFilterFunction"),a=r[t.adUnitCode]===t.auctionId,s=!i||!!a||"function"!=typeof n||!!n(t);return(i||a)&&s&&t?.video?.context!==l.ADPOD&&(0,f.isBidUsable)(t)&&(t.latestTargetedAuctionId=r[t.adUnitCode],e.push(t)),e},[]),t,void 0,void 0,void 0,i)}function m(e){return e&&"string"==typeof e?[e]:(0,u.isArray)(e)?e:[]}function O(){return e.getStandardBidderAdServerTargeting().map(e=>e.key).concat(I).filter(u.uniques)}return t.setLatestAuctionForAdUnit=function(e,t){r[e]=t},t.resetPresetTargeting=function(e,r){(0,u.isGptPubadsDefined)()&&Object.values(T(i(e),r)).forEach(e=>{e.forEach(e=>{t.clearTargeting(e)})})},t.resetPresetTargetingAST=function(e){i(e).forEach(function(e){let t=window.apntag.getTag(e);if(t&&t.keywords){let r=Object.keys(t.keywords),i={};r.forEach(e=>{h.includes(e.toLowerCase())||(i[e]=t.keywords[e])}),window.apntag.modifyTag(e,{keywords:i})}})},t.getAllTargeting=function(t,r,s){var d,l,f;let E,T,C,w,x,R,D,P,k,N=arguments.length>3&&void 0!==arguments[3]&&arguments[3],B=arguments.length>4?arguments[4]:void 0,U=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p.getHighestCpm,j=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u.sortByHighestCpm;B||=g(U,j);let M=i(t),V=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];var i={};return(e||[]).forEach(e=>{e?.passiveBidPoolId&&r.includes(e?.passiveBidPoolId)&&(i[e?.passiveBidPoolId]=i[e?.passiveBidPoolId]||{codes:[],adUnit:[]},i[e?.passiveBidPoolId].codes.push(e.code),t.includes(e.code)&&!i[e?.passiveBidPoolId]?.adUnit?.includes(e.code)&&i[e?.passiveBidPoolId].adUnit.push(e.code)),e?.bidPoolId&&r.includes(e.bidPoolId)&&(i[e.bidPoolId]=i[e.bidPoolId]||{codes:[],adUnit:[]},i[e.bidPoolId].codes.push(e.code),t.includes(e.code)&&!i[e.bidPoolId].adUnit.includes(e.code)&&i[e.bidPoolId].adUnit.push(e.code))}),i=Object.keys(i).reduce((e,t)=>(1===i[t].adUnit.length&&(e[t]={codes:i[t].codes,adUnit:i[t].adUnit[0]}),e),{})}(b.adUnits,M,m(r)),$=Object.keys(V),q=o.config.getConfig("enableSendAllBids"),L=o.config.getConfig("sendBidsControl.bidLimit"),{customKeysByUnit:F,filteredBids:W}=(d=B,T=[],C={},w=o.config.getConfig("targetingControls.alwaysIncludeDeals"),x=o.config.getConfig("bidPooling")?.excludedBidders||[],d.forEach(e=>{let t,r=!x.includes(e.bidderCode),i=!!$.length&&$.some(t=>t===e.bidPoolId||t===e.passiveBidPoolId)&&r||M.includes(e.adUnitCode),o=!0===n.bidderSettings.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0,a=w&&e.dealId;i&&(a||o)&&(T.push(e),Object.keys(e.adserverTargeting).filter((t=(t=O()).concat(c.NATIVE_TARGETING_KEYS),function(e){return -1===t.indexOf(e)})).forEach(t=>{let r=t.substring(0,20),i=C[e.adUnitCode]||{},n=[e.adserverTargeting[t]];i[r]?i[r]=i[r].concat(n).filter(u.uniques):i[r]=n,C[e.adUnitCode]=i}))}),{filteredBids:T,customKeysByUnit:C}),G=function(t,r,i,n,s){var d,l;let p,g,f,m=!1!==o.config.getConfig("targetingControls.allBidsCustomTargeting"),b=(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[],n=e.reduce((e,t)=>(i.includes(t.adUnitCode)||(e.push(t),i.push(t.adUnitCode)),e),[]),o=O();return n.map(e=>{if(r){let r=e.bidPoolId||e.passiveBidPoolId;e.sharedBidInUse=t[r]?t[r].adUnit:e.adUnitCode}return{[e.adUnitCode]:Object.keys(e.adserverTargeting).filter(t=>{let r=-1===o.indexOf(t)||!Object.values(a.TARGETING_KEYS).includes(t);return void 0===e.sendStandardTargeting||e.sendStandardTargeting||r}).reduce((t,r)=>{let i=[e.adserverTargeting[r]],n={[r.substring(0,20)]:i};return r===a.TARGETING_KEYS.DEAL?[...t,n,{[`${r}_${e.bidderCode}`.substring(0,20)]:i}]:[...t,n]},[])}})})(t,s,n).concat((p=o.config.getConfig("targetingControls.alwaysIncludeDeals"),function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=I.concat(c.NATIVE_TARGETING_KEYS),n=o.config.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),s=n?n.map(e=>a.TARGETING_KEYS[e]):i;return e.reduce((e,n)=>{if(t||r&&n.dealId){var o;let t=(o=n,i.filter(e=>void 0!==n.adserverTargeting[e]&&(r||-1!==s.indexOf(e))).reduce((e,t)=>(o.adserverTargeting[t]&&e.push({[`${t}_${o.bidderCode}`.substring(0,20)]:[o.adserverTargeting[t]]}),e),[]));t&&e.push({[n.adUnitCode]:t})}return e},[])}(t,o.config.getConfig("enableSendAllBids"),p))).concat(function(t){function r(e){return e?.[a.JSON_MAPPING.ADSERVER_TARGETING]}return e.getAdUnits().filter(e=>t.includes(e.code)&&r(e)).reduce((e,t)=>{let i,n=Object.keys(i=r(t)).map(function(e){return(0,u.isStr)(i[e])&&(i[e]=i[e].split(",").map(e=>e.trim())),(0,u.isArray)(i[e])||(i[e]=[i[e]]),{[e]:i[e]}});return n&&e.push({[t.code]:n}),e},[])}(i));return m&&b.push(...(d=t,l=r,d.reduce((e,t)=>{let r=Object.assign({},t),i=l[r.adUnitCode],n=[];return i&&Object.keys(i).forEach(e=>{e&&i[e]&&n.push({[e]:i[e]})}),e.push({[r.adUnitCode]:n}),e},[]))),b.forEach(e=>{Object.keys(e).forEach(t=>{e[t].forEach(e=>{let t=Object.keys(e);-1===h.indexOf(t[0])&&(h=t.concat(h))})})}),g=[],f=Object.keys(s),b.reduce((e,t)=>{var r=Object.keys(t)[0],i=f.reduce((e,t)=>{if(s[t].codes.includes(r))return s[t]},{});if(r&&f.length){var n={[i.adUnit]:t[r]};g.push(n)}else e.push(t);return e},[]).concat(g)}(S(W,U,q&&(s||L)||0,V,void 0,j),F,M,N,V),z=Object.keys(Object.assign({},a.DEFAULT_TARGETING_KEYS,a.NATIVE_KEYS)),H=o.config.getConfig(y),Y=o.config.getConfig(v);if(null!=Y&&null!=H)throw Error(A);Array.isArray(H=null!=Y?z.concat(Y):H||z)&&H.length>0&&(l=G,f=H,D=Object.keys(R=Object.assign({},a.TARGETING_KEYS,a.NATIVE_KEYS)),P={},(0,u.logInfo)(`allowTargetingKeys - allowed keys [ ${f.map(e=>R[e]).join(", ")} ]`),l.map(e=>{let t=Object.keys(e)[0],r=e[t].filter(e=>{let t=Object.keys(e)[0],r=0===D.filter(e=>0===t.indexOf(R[e])).length||f.find(e=>{let r=R[e];return 0===t.indexOf(r)});return P[t]=!r,r});e[t]=r}),k=Object.keys(P).filter(e=>P[e]),(0,u.logInfo)(`allowTargetingKeys - removed keys [ ${k.join(", ")} ]`),G=l.filter(e=>{let t=Object.keys(e)[0];return e[t].length>0})),G=(E=G.map(e=>({[Object.keys(e)[0]]:e[Object.keys(e)[0]].map(e=>({[Object.keys(e)[0]]:e[Object.keys(e)[0]].join(",")})).reduce((e,t)=>Object.assign(t,e),{})}))).reduce(function(e,t){var r=Object.keys(t)[0];return e[r]=Object.assign({},e[r],t[r]),e},{});let J=o.config.getConfig("targetingControls.auctionKeyMaxChars");return J&&((0,u.logInfo)(`Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ${J} characters.  Running checks on auction keys...`),G=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.sortByHighestCpm,i=(0,u.deepClone)(e);return Object.keys(i).map(e=>({adUnitCode:e,adserverTargeting:i[e]})).sort(_(void 0,r)).reduce(function(e,r,n,o){var a;let s=Object.keys(a=r.adserverTargeting).reduce(function(e,t){return e+`${t}%3d${encodeURIComponent(a[t])}%26`},"");n+1===o.length&&(s=s.slice(0,-3));let d=r.adUnitCode,l=s.length;return l<=t?(t-=l,(0,u.logInfo)(`AdUnit '${d}' auction keys comprised of ${l} characters.  Deducted from running threshold; new limit is ${t}`,i[d]),e[d]=i[d]):(0,u.logWarn)(`The following keys for adUnitCode '${d}' exceeded the current limit of the 'auctionKeyMaxChars' setting.
The key-set size was ${l}, the current allotted amount was ${t}.
`,i[d]),n+1===o.length&&0===Object.keys(e).length&&(0,u.logError)("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e},{})}(G,J,j)),M.forEach(e=>{G[e]||(G[e]={})}),G},o.config.getConfig("targetingControls",function(e){null!=(0,u.deepAccess)(e,y)&&null!=(0,u.deepAccess)(e,v)&&(0,u.logError)(A)}),t.setTargetingForGPT=(0,d.hook)("sync",function(r,i,n,o){let d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:p.getHighestCpm,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.sortByHighestCpm,c=t.getAllTargeting(r,n,o,!0,void 0,d,l),g=Object.fromEntries(h.map(e=>[e,null]));Object.entries(T(Object.keys(c),i)).forEach(e=>{let[t,r]=e;r.length>1&&(0,u.logWarn)(`Multiple slots found matching: ${t}. Targeting will be set on all matching slots, which can lead to duplicate impressions if more than one are requested from GAM. To resolve this, ensure the arguments to setTargetingForGPTAsync resolve to a single slot by explicitly matching the desired slotElementID.`),r.forEach(e=>{Object.keys(c[t]).forEach(e=>{let r=c[t][e];"string"==typeof r&&-1!==r.indexOf(",")&&(r=r.split(",")),c[t][e]=r}),(0,u.logMessage)(`Attempting to set targeting-map for slot: ${e.getSlotElementId()} with targeting-map:`,c[t]),e.updateTargetingFromMap(Object.assign({},g,c[t]))})}),Object.keys(c).forEach(t=>{Object.keys(c[t]).forEach(r=>{"hb_adid"===r&&e.setStatusForBids(c[t][r],a.BID_STATUS.BID_TARGETING_SET)})}),t.targetingDone(c),s.emit(a.EVENTS.SET_TARGETING,c)},"setTargetingForGPT"),t.targetingDone=(0,d.hook)("sync",function(e){return e},"targetingDone"),t.clearTargeting=function(e){h.forEach(t=>{e.getTargeting(t)&&e.clearTargeting(t)})},t.getWinningBids=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.getHighestCpm,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.sortByHighestCpm,s=[],d=t||g(r,a),l=i(e);return d.reduce((e,t)=>{let r=t.adUnitCode,i=!0===n.bidderSettings.get(r,"allowZeroCpmBids")?t.cpm>=0:t.cpm>0,a=o.config.getConfig("targetingControls.alwaysIncludeDeals")&&t.dealId;return l.includes(r)&&!s.includes(r)&&(a||i)&&(e.push(t),s.push(r)),e},[])},t.getWinningPoolIdBids=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.getHighestCpm,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.sortByHighestCpm,o=t||g(r,i),a=m(e),s=a.length>0;return o.filter(e=>a.includes(e.bidPoolId)||a.includes(e.passiveBidPoolId)).filter(e=>!0===n.bidderSettings.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0).map(e=>s?e.bidPoolId||e.passiveBidPoolId:e.adUnitCode).filter(u.uniques).map(e=>o.filter(t=>s?t.bidPoolId===e||t.passiveBidPoolId===e?t:null:t.adUnitCode===e?t:null).reduce(r))},t.setTargetingForAst=function(e,r){let i=t.getAllTargeting(e,r);try{t.resetPresetTargetingAST(e)}catch(e){(0,u.logError)("unable to reset targeting for AST"+e)}Object.keys(i).forEach(e=>Object.keys(i[e]).forEach(t=>{if((0,u.logMessage)(`Attempting to set targeting for targetId: ${e} key: ${t} value: ${i[e][t]}`),(0,u.isStr)(i[e][t])||(0,u.isArray)(i[e][t])){let r={};0>t.search(/pt[0-9]/)?r[t.toUpperCase()]=i[e][t]:r[t]=i[e][t],window.apntag.setKeywords(e,r,{overrideKeyValue:!0})}}))},t.clearTargetingForSharedBidPool=function(e){E(e)},t.isApntagDefined=function(){if(window.apntag&&(0,u.isFn)(window.apntag.setKeywords))return!0},t}t.targeting=O(i.auctionManager)},6907:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USERSYNC_DEFAULT_CONFIG=void 0,t.newUserSync=g,t.userSync=void 0;var i=r(7750),n=r(4321),o=r(9287),a=r(5110),s=r(2276),d=r(8839),l=r(4767),c=r(958);let u=t.USERSYNC_DEFAULT_CONFIG={syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:500};n.config.setDefaults({userSync:(0,i.deepClone)(u)});let p=(0,o.getCoreStorageManager)("usersync");function g(e){let t={},r=g(),o=new Set,a={},u={image:!0,iframe:!1},p=e.config;function g(){return{image:[],iframe:[]}}function f(){if(p.syncEnabled&&e.browserSupportsCookies){try{u.iframe&&m(r.iframe,e=>{var t,n;let[o,a]=e;(0,i.logMessage)(`Invoking iframe user sync for bidder: ${o}`),(0,i.insertUserSyncIframe)(a),t=r,n=o,t.image=t.image.filter(e=>e[0]!==n)}),u.image&&m(r.image,e=>{let[t,r]=e;(0,i.logMessage)(`Invoking image pixel user sync for bidder: ${t}`),(0,i.triggerPixel)(r)})}catch(e){return(0,i.logError)("Error firing user syncs",e)}r=g()}}function m(e,t){(0,i.shuffle)(e).forEach(t)}return n.config.getConfig("userSync",e=>{if(e.userSync){let t=e.userSync.filterSettings;!(0,i.isPlainObject)(t)||t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"})}p=Object.assign(p,e.userSync)}),e.regRule(s.ACTIVITY_SYNC_USER,"userSync config",e=>{if(!p.syncEnabled)return{allow:!1,reason:"syncs are disabled"};if(e[d.ACTIVITY_PARAM_COMPONENT_TYPE]===l.MODULE_TYPE_BIDDER){let r=e[d.ACTIVITY_PARAM_SYNC_TYPE],i=e[d.ACTIVITY_PARAM_COMPONENT_NAME];if(!t.canBidderRegisterSync(r,i))return{allow:!1,reason:`${r} syncs are not enabled for ${i}`}}}),t.registerSync=(t,n,u)=>{if(o.has(n))return(0,i.logMessage)(`already fired syncs for "${n}", ignoring registerSync call`);if(!p.syncEnabled||!(0,i.isArray)(r[t]))return(0,i.logWarn)(`User sync type "${t}" not supported`);if(!n)return(0,i.logWarn)("Bidder is required for registering sync");if(0!==p.syncsPerBidder&&Number(a[n])>=p.syncsPerBidder)return(0,i.logWarn)(`Number of user syncs exceeded for "${n}"`);if(e.isAllowed(s.ACTIVITY_SYNC_USER,(0,c.activityParams)(l.MODULE_TYPE_BIDDER,n,{[d.ACTIVITY_PARAM_SYNC_TYPE]:t,[d.ACTIVITY_PARAM_SYNC_URL]:u}))){var g;r[t].push([n,u]),(g=a)[n]?g[n]+=1:g[n]=1,a=g}},t.bidderDone=o.add.bind(o),t.syncUsers=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(f,Number(e));f()},t.triggerUserSyncs=()=>{p.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=(e,t)=>!(p.filterSettings&&function(e,t){let r=p.filterSettings;if(function(e,t){if(e.all&&e[t])return(0,i.logWarn)(`Detected presence of the "filterSettings.all" and "filterSettings.${t}" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.`),!1;let r=e.all?e.all:e[t],n=e.all?"all":t;if(!r)return!1;let o=r.filter,a=r.bidders;return o&&"include"!==o&&"exclude"!==o?((0,i.logWarn)(`UserSync "filterSettings.${n}.filter" setting '${o}' is not a valid option; use either 'include' or 'exclude'.`),!1):"*"===a||!!(Array.isArray(a)&&a.length>0&&a.every(e=>(0,i.isStr)(e)&&"*"!==e))||((0,i.logWarn)(`Detected an invalid setup in userSync "filterSettings.${n}.bidders"; use either '*' (to represent all bidders) or an array of bidders.`),!1)}(r,e)){u[e]=!0;let i=r.all?r.all:r[e],n="*"===i.bidders?[t]:i.bidders;return({include:(e,t)=>!e.includes(t),exclude:(e,t)=>e.includes(t)})[i.filter||"include"](n,t)}return!u[e]}(e,t)),t}t.userSync=g(Object.defineProperties({config:n.config.getConfig("userSync"),isAllowed:a.isActivityAllowed,regRule:a.registerActivityControl},{browserSupportsCookies:{get:function(){return!(0,i.isSafariBrowser)()&&p.cookiesAreEnabled()}}}))},7750:function(e,t,r){"use strict";let i,n,o;var a,s=r(5824);Object.defineProperty(t,"__esModule",{value:!0}),t._each=function(e,t){if(G(e?.forEach))return e.forEach(t,this);Object.entries(e||{}).forEach(e=>{let[r,i]=e;return t.call(this,i,r)})},t._map=function(e,t){return G(e?.map)?e.map(t):Object.entries(e||{}).map(r=>{let[i,n]=r;return t(n,i,e)})},t._setEventEmitter=function(e){i=e},t.binarySearch=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e,i=0,n=e.length&&e.length-1,o=r(t);for(;n-i>1;){let t=i+Math.round((n-i)/2);o>r(e[t])?i=t:n=t}for(;e.length>i&&o>r(e[i]);)i++;return i},t.buildUrl=function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?`:${e.port}`:""))+(e.pathname||"")+(e.search?`?${_.formatQS(e.search||"")}`:"")+(e.hash?`#${e.hash}`:"")},t.canAccessWindowTop=B,t.checkCookieSupport=ei,t.cleanObj=function(e){return Object.fromEntries(Object.entries(e).filter(e=>{let[t,r]=e;return void 0!==r}))},t.compareCodeAndSlot=void 0,t.compressDataWithGZip=el,t.contains=function(e,t){return G(e?.includes)&&e.includes(t)},t.convertObjectToArray=function(e){return Object.keys(e).map(t=>({[t]:e[t]}))},t.createIframe=void 0,t.createInvisibleIframe=F,t.createTrackPixelHtml=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:encodeURI;if(!e)return"";let r=t(e),i='<div style="position:absolute;left:0px;top:0px;visibility:hidden;">';return i+('<img src="'+r+'"></div>')},t.createTrackPixelIframeHtml=Z,t.cyrb53Hash=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=function(e,t){if(G(Math.imul))return Math.imul(e,t);var r=(4194303&e)*(t|=0);return 0xffc00000&e&&(r+=(0xffc00000&e)*t|0),0|r},i=0xdeadbeef^t,n=0x41c6ce57^t;for(let t=0,o;t<e.length;t++)i=r(i^(o=e.charCodeAt(t)),0x9e3779b1),n=r(n^o,0x5f356495);return i=r(i^i>>>16,0x85ebca6b)^r(n^n>>>13,0xc2b2ae35),(0x100000000*(2097151&(n=r(n^n>>>16,0x85ebca6b)^r(i^i>>>13,0xc2b2ae35)))+(i>>>0)).toString()},t.debugTurnedOn=q,Object.defineProperty(t,"deepAccess",{enumerable:!0,get:function(){return g.default}}),t.deepClone=function(e){return(0,l.klona)(e)||{}},t.deepEqual=ed,Object.defineProperty(t,"deepSetValue",{enumerable:!0,get:function(){return f.dset}}),t.delayExecution=function(e,t){if(t<1)throw Error(`numRequiredCalls must be a positive number. Got ${t}`);let r=0;return function(){++r===t&&e.apply(this,arguments)}},t.encodeMacroURI=function(e){return Array.from(e.matchAll(/\$({[^}]+})/g)).map(e=>e[1]).reduce((e,t)=>e.replace("$"+encodeURIComponent(t),"$"+t),encodeURI(e))},t.extractDomainFromHost=function(e){let t=null;try{let r=/[-\w]+\.([-\w]+|[-\w]{3,}|[-\w]{1,3}\.[-\w]{2})$/i.exec(e);if(null!=r&&r.length>0){t=r[0];for(let e=1;e<r.length;e++)r[e].length>t.length&&(t=r[e])}}catch(e){t=null}return t},t.flatten=function(e,t){return e.concat(t)},t.formatQS=es,t.generateUUID=function e(t){return t?(t^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>t/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e)},t.getBidIdParameter=function(e,t){return t?.[e]||""},t.getBidRequest=function(e,t){if(e)return t.flatMap(e=>e.bids).find(t=>["bidId","adId","bid_id"].some(r=>t[r]===e))},t.getBidderCodes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.adUnits,t=new Set;return e.reduce((e,r)=>(r.bids.forEach(r=>{let{bidder:i,pbsHost:n}=r;if(void 0!==i){let r=`${i}-${n||""}`;t.has(r)||(t.add(r),e.push({bidder:i,pbsHost:n}))}}),e),[])},t.getDNT=function(){return!1},t.getDefinedParams=function(e,t){return t.filter(t=>e[t]).reduce((t,r)=>Object.assign(t,{[r]:e[r]}),{})},t.getDocument=function(){return document},t.getDomLoadingDuration=function(e){let t=-1,r=(e=e||k()).performance;if(e.performance?.timing&&e.performance.timing.navigationStart>0){let e=r.timing.domLoading-r.timing.navigationStart;e>0&&(t=e)}return t},t.getOldestHighestCpmBid=t.getLatestHighestCpmBid=t.getHighestCpm=void 0,t.getParameterByName=function(e){return ea(N().search)[e]||""},t.getPerformanceNow=function(){return window.performance&&window.performance.now&&window.performance.now()||0},t.getPrebidInternal=function(){return T},t.getSafeframeGeometry=function(){try{let e=k();return"function"==typeof e.$sf.ext.geom?e.$sf.ext.geom():void 0}catch(e){V("Error getting SafeFrame geometry",e);return}},Object.defineProperty(t,"getScreenOrientation",{enumerable:!0,get:function(){return m.getScreenOrientation}}),t.getUniqueIdentifierStr=C,t.getUnixTimestampFromNow=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d";if(0>["m","d"].indexOf(t))return Date.now();let r=e/("m"===t?1440:1);return Date.now()+(e&&e>0?864e5*r:0)},t.getUserConfiguredParams=function(e,t,r){return e.filter(e=>e.code===t).flatMap(e=>e.bids).filter(e=>e.bidder===r).map(e=>e.params||{})},t.getValue=function(e,t){return e[t]},Object.defineProperty(t,"getWinDimensions",{enumerable:!0,get:function(){return m.getWinDimensions}}),t.getWindowLocation=N,t.getWindowSelf=k,t.getWindowTop=P,t.groupBy=function(e,t){return e.reduce(function(e,r){return(e[r[t]]=e[r[t]]||[]).push(r),e},{})},t.hasConsoleLogger=function(){return y},t.hasDeviceAccess=function(){return!1!==d.config.getConfig("deviceAccess")},t.hasNonSerializableProperty=function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(let i in t){let n=t[i],o=typeof n;if(void 0===n||"function"===o||"symbol"===o||n instanceof RegExp||n instanceof Map||n instanceof Set||n instanceof Date||null!==n&&"object"===o&&n.hasOwnProperty("toJSON"))return!0;if(null!==n&&"object"===o&&n.constructor===Object&&(r.has(n)||(r.add(n),e(n,r))))return!0}return!1},t.inIframe=et,t.insertElement=J,t.insertHtmlIntoIframe=function(e){var t;if(!e)return;let r=F();_.insertElement(r,document,"body"),(t=r.contentWindow.document).open(),t.write(e),t.close()},t.insertUserSyncIframe=X,t.internal=void 0,t.isA=W,t.isAdUnitCodeMatchingSlot=function(e){return t=>en(e,t)},t.isApnGetTagDefined=function(){if(window.apntag&&G(window.apntag.getTag))return!0},t.isArray=void 0,t.isArrayOfNums=function(e,t){return H(e)&&(!t||e.length===t)&&e.every(e=>eo(e))},t.isBoolean=function(e){return W(e,"Boolean")},t.isEmpty=function(e){return!e||(H(e)||z(e)?!(e.length>0):Object.keys(e).length<=0)},t.isEmptyStr=function(e){return z(e)&&(!e||0===e.length)},t.isFn=G,t.isGptPubadsDefined=function(){if(window.googletag&&G(window.googletag.pubads)&&G(window.googletag.pubads().getSlots))return!0},t.isInteger=t.isGzipCompressionSupported=void 0,t.isNumber=function(e){return W(e,"Number")},t.isPlainObject=Y,t.isSafariBrowser=function(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)},t.isSafeFrameWindow=function(){if(!et())return!1;let e=_.getWindowSelf();return!!(e.$sf&&e.$sf.ext)},t.isStr=z,t.isValidMediaTypes=function(e){let t=["banner","native","video"];return!!Object.keys(e).every(e=>t.includes(e))&&(!e.video||!e.video.context||["instream","outstream","adpod"].includes(e.video.context))},t.logError=V,t.logInfo=j,t.logMessage=U,t.logWarn=M,t.memoize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=new Map,i=function(){let i=t.apply(this,arguments);return r.has(i)||r.set(i,e.apply(this,arguments)),r.get(i)};return i.clear=r.clear.bind(r),i},t.mergeDeep=function(e){for(let t=0;t<(arguments.length<=1?0:arguments.length-1);t++){let r=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];Y(r)&&function e(t,r){if(!Y(t)||!Y(r))return;let i=Object.keys(r);for(let n=0;n<i.length;n++){let o=i[n];if("__proto__"===o||"constructor"===o)continue;let a=r[o];Y(a)?(t[o]||(t[o]={}),e(t[o],a)):Array.isArray(a)?Array.isArray(t[o])?a.forEach(e=>{t[o].some(t=>ed(t,e))||t[o].push(e)}):t[o]=[...a]:t[o]=a}}(e,r)}return e},t.parseGPTSingleSizeArray=function(e){if(D(e))return x(e)},t.parseGPTSingleSizeArrayToRtbSize=function(e){if(D(e))return R(e)},t.parseQS=ea,t.parseQueryStringParameters=function(e){let t="";for(var r in e)e.hasOwnProperty(r)&&(t+=r+"="+encodeURIComponent(e[r])+"&");return t.replace(/&$/,"")},t.parseSizesInput=function(e){return w(e).map(x)},t.parseUrl=function(e,t){let r=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?r.href=e:r.href=decodeURIComponent(e);let i=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:r.href,protocol:(r.protocol||"").replace(/:$/,""),hostname:r.hostname,port:+r.port,pathname:r.pathname.replace(/^(?!\/)/,"/"),search:i?r.search:_.parseQS(r.search||""),hash:(r.hash||"").replace(/^#/,""),host:r.host||window.location.host}},t.pick=function(e,t){return"object"!=typeof e?{}:t.reduce((r,i,n)=>{if("function"==typeof i)return r;let o=i,a=i.match(/^(.+?)\sas\s(.+?)$/i);a&&(i=a[1],o=a[2]);let s=e[i];return"function"==typeof t[n+1]&&(s=t[n+1](s,r)),void 0!==s&&(r[o]=s),r},{})},t.prefixLog=function(e){function t(t){return function(){for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];t(e,...i)}}return{logError:t(V),logWarn:t(M),logMessage:t(U),logInfo:t(j)}},t.replaceAuctionPrice=function(e,t){return er(e,{AUCTION_PRICE:t})},t.replaceClickThrough=function(e,t){if(e&&t&&"string"==typeof t)return e.replace(/\${CLICKTHROUGH}/g,t)},t.replaceMacros=er,Object.defineProperty(t,"resetWinDimensions",{enumerable:!0,get:function(){return m.resetWinDimensions}}),t.safeJSONEncode=function(e){try{return JSON.stringify(e)}catch(e){return""}},t.safeJSONParse=function(e){try{return JSON.parse(e)}catch(e){}},t.setOnAny=function(e,t){for(let r=0,i;r<e.length;r++)if(i=(0,g.default)(e[r],t))return i},t.setScriptAttributes=function(e,t){Object.entries(t).forEach(t=>{let[r,i]=t;return e.setAttribute(r,i)})},t.shuffle=function(e){let t=e.length;for(;t>0;){let r=Math.floor(Math.random()*t),i=e[--t];e[t]=e[r],e[r]=i}return e},t.sizeTupleToRtbSize=R,t.sizeTupleToSizeString=x,t.sizesToSizeTuples=w,t.sortByHighestCpm=void 0,t.timestamp=function(){return new Date().getTime()},t.transformAdServerTargetingObj=function(e){return e&&Object.getOwnPropertyNames(e).length>0?Object.keys(e).map(t=>`${t}=${encodeURIComponent(e[t])}`).join("&"):""},t.triggerNurlWithCpm=function(e,t){z(e.nurl)&&""!==e.nurl&&(e.nurl=e.nurl.replace(/\${AUCTION_PRICE}/,t),Q(e.nurl))},t.triggerPixel=Q,t.uniques=function(e,t,r){return r.indexOf(e)===t},t.unsupportedBidderMessage=function(e,t){let r=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return`
    ${e.code} is a ${r} ad unit
    containing bidders that don't support ${r}: ${t}.
    This bidder won't fetch demand.
  `},t.waitForElementToLoad=K;var d=r(4321),l=r(8600),c=r(8878),u=r(7148),p=r(3800),g=s(r(4760)),f=r(2742),m=r(7246),h=Object.prototype.toString;let b=!!window.console,y=!!(b&&window.console.log),v=!!(b&&window.console.info),A=!!(b&&window.console.warn),I=!!(b&&window.console.error),E=(0,p.getGlobal)();function S(){null!=i&&i(...arguments)}let _=t.internal={checkCookieSupport:ei,createTrackPixelIframeHtml:Z,getWindowSelf:k,getWindowTop:P,canAccessWindowTop:B,getWindowLocation:N,insertUserSyncIframe:X,insertElement:J,isFn:G,triggerPixel:Q,logError:V,logWarn:M,logMessage:U,logInfo:j,parseQS:ea,formatQS:es,deepEqual:ed},T={};var O=(a=0,function(){return++a});function C(){return O()+Math.random().toString(16).substr(2)}function w(e){return"string"==typeof e?e.split(/\s*,\s*/).map(e=>e.match(/^(\d+)x(\d+)$/i)).filter(e=>e).map(e=>{let[t,r,i]=e;return[parseInt(r,10),parseInt(i,10)]}):Array.isArray(e)?D(e)?[e]:e.filter(D):[]}function x(e){return e[0]+"x"+e[1]}function R(e){return{w:e[0],h:e[1]}}function D(e){return H(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function P(){return window.top}function k(){return window.self}function N(){return window.location}function B(){try{if(_.getWindowTop().location.href)return!0}catch(e){return!1}}function U(){q()&&y&&console.log.apply(console,$(arguments,"MESSAGE:"))}function j(){q()&&v&&console.info.apply(console,$(arguments,"INFO:"))}function M(){q()&&A&&console.warn.apply(console,$(arguments,"WARNING:")),S(c.EVENTS.AUCTION_DEBUG,{type:"WARNING",arguments:arguments})}function V(){q()&&I&&console.error.apply(console,$(arguments,"ERROR:")),S(c.EVENTS.AUCTION_DEBUG,{type:"ERROR",arguments:arguments})}function $(e,t){e=[].slice.call(e);let r=d.config.getCurrentBidder();return t&&e.unshift(t),r&&e.unshift(i("#aaa")),e.unshift(i("#3b88c3")),e.unshift("%cPrebid"+(r?`%c${r}`:"")),e;function i(e){return`display: inline-block; color: #fff; background: ${e}; padding: 1px 4px; border-radius: 3px;`}}function q(){return!!d.config.getConfig("debug")}let L=(n={border:"0px",hspace:"0",vspace:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",frameBorder:"0",allowtransparency:"true"},t.createIframe=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.createElement("iframe");return Object.assign(i,Object.assign({},n,t)),Object.assign(i.style,r),i});function F(){return L(document,{id:C(),width:0,height:0,src:"about:blank"},{display:"none",height:"0px",width:"0px",border:"0px"})}function W(e,t){return h.call(e)==="[object "+t+"]"}function G(e){return W(e,"Function")}function z(e){return W(e,"String")}let H=t.isArray=Array.isArray.bind(Array);function Y(e){return W(e,"Object")}function J(e,t,r,i){let n;t=t||document,n=r?t.getElementsByTagName(r):t.getElementsByTagName("head");try{if((n=n.length?n:t.getElementsByTagName("body")).length){n=n[0];let t=i?null:n.firstChild;return n.insertBefore(e,t)}}catch(e){}}function K(e,t){let r=null;return new u.PbPromise(i=>{let n=function(){e.removeEventListener("load",n),e.removeEventListener("error",n),null!=r&&window.clearTimeout(r),i()};e.addEventListener("load",n),e.addEventListener("error",n),null!=t&&(r=window.setTimeout(n,t))})}function Q(e,t,r){let i=new Image;t&&_.isFn(t)&&K(i,r).then(t),i.src=e}function X(e,t,r){let i=_.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),n=document.createElement("div");n.innerHTML=i;let o=n.firstChild;t&&_.isFn(t)&&K(o,r).then(t),_.insertElement(o,document,"html",!0)}function Z(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?(t&&(e=encodeURI(e)),r&&(r=`sandbox="${r}"`),`<iframe ${r} id="${C()}"
      frameborder="0"
      allowtransparency="true"
      marginheight="0" marginwidth="0"
      width="0" hspace="0" vspace="0" height="0"
      style="height:0px;width:0px;display:none;"
      scrolling="no"
      src="${e}">
    </iframe>`):""}function ee(e,t){return(r,i)=>r.cpm===i.cpm?t(r[e],i[e])?i:r:r.cpm<i.cpm?i:r}function et(){try{return _.getWindowSelf()!==_.getWindowTop()}catch(e){return!0}}function er(e,t){if(e)return Object.entries(t).reduce((e,t)=>{let[r,i]=t;return e.replace(RegExp("\\$\\{"+r+"\\}","g"),i||"")},e)}function ei(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}t.getHighestCpm=ee("timeToRespond",(e,t)=>e>t),t.getOldestHighestCpmBid=ee("responseTimestamp",(e,t)=>e>t),t.getLatestHighestCpmBid=ee("responseTimestamp",(e,t)=>e<t),t.sortByHighestCpm=(e,t)=>t.cpm-e.cpm;let en=(e,t)=>e.getAdUnitPath()===t||e.getSlotElementId()===t;t.compareCodeAndSlot=en;let eo=t.isInteger=Number.isInteger.bind(Number);function ea(e){return e?e.replace(/^\?/,"").split("&").reduce((e,t)=>{let[r,i]=t.split("=");return/\[\]$/.test(r)?(e[r=r.replace("[]","")]=e[r]||[],e[r].push(i)):e[r]=i||"",e},{}):{}}function es(e){return Object.keys(e).map(t=>Array.isArray(e[t])?e[t].map(e=>`${t}[]=${e}`).join("&"):`${t}=${e[t]}`).join("&")}function ed(e,t){let{checkTypes:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let i=Array.isArray(e),n=Array.isArray(t);if(i&&n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!ed(e[i],t[i],{checkTypes:r}))return!1;return!0}if(i||n||r&&e.constructor!==t.constructor)return!1;let o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(let i of o)if(!Object.prototype.hasOwnProperty.call(t,i)||!ed(e[i],t[i],{checkTypes:r}))return!1;return!0}async function el(e){"string"!=typeof e&&(e=JSON.stringify(e));let t=new Blob([new TextEncoder().encode(e)]).stream().pipeThrough(new window.CompressionStream("gzip")),r=await new Response(t).blob();return new Uint8Array(await r.arrayBuffer())}t.isGzipCompressionSupported=function(){if(void 0!==o)return o;try{void 0===window.CompressionStream?o=!1:(new window.CompressionStream("gzip"),o=!0)}catch(e){o=!1}return o}},5815:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adjustCpm=function(e,t,r){let{index:a=i.auctionManager.index,bs:s=n.bidderSettings}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r=r||a.getBidRequest(t);let d=t?.adapterCode,l=t?.bidderCode||r?.bidder,c=s.get(t?.adapterCode,"adjustAlternateBids"),u=s.getOwn(l,"bidCpmAdjustment")||s.get(c?d:l,"bidCpmAdjustment");if(u&&"function"==typeof u)try{return u(e,Object.assign({},t),r)}catch(e){(0,o.logError)("Error during bid adjustment",e)}return e};var i=r(1171),n=r(1928),o=r(7750)},8910:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reset=function(){r=null,i=0,n=[],document.removeEventListener("visibilitychange",o),document.addEventListener("visibilitychange",o)},t.setFocusTimeout=a;let r=null,i=0,n=[];function o(){document.hidden?r=Date.now():(i+=Date.now()-(r??0),r=null,n.forEach(e=>{let{callback:t,startTime:r,setTimerId:n}=e;return n(a(t,i-r)())}),n=[])}function a(e,t){let o=i,s=setTimeout(()=>{i===o&&null==r?e():null!=r?n.push({callback:e,startTime:o,setTimerId(e){s=e}}):s=a(e,i-o)()},t);return()=>s}document.addEventListener("visibilitychange",o)},3020:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasPurpose1Consent=function(e){return!e?.gdprApplies||e?.vendorData?.purpose?.consents?.[1]===!0}},4391:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scrubIPv4=function(e){if(!e)return null;let t=e.split(".").map(Number);if(4!=t.length)return null;let r=[];for(let e=0;e<4;e++){let t=Math.max(0,Math.min(8,24-8*e));r.push(255<<8-t&255)}return t.map((e,t)=>e&r[t]).join(".")},t.scrubIPv6=function(e){if(!e)return null;let t=e.split(":").map(e=>parseInt(e,16));for(t=t.map(e=>isNaN(e)?0:e);t.length<8;)t.push(0);if(8!=t.length)return null;let r=[];for(let e=0;e<8;e++){let t=Math.max(0,Math.min(16,64-16*e));r.push(65535<<16-t&65535)}return t.map((e,t)=>e&r[t]).map(e=>e.toString(16)).join(":")}},4576:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filters=void 0,t.isBidUsable=function(e){return!Object.values(a).some(t=>!t(e))};var i=r(5502),n=r(8878),o=r(7750);let a=t.filters={isActualBid:e=>e.getStatusCode()===n.STATUS.GOOD,isBidNotExpired:e=>e.responseTimestamp+1e3*(0,i.getBufferedTTL)(e)>(0,o.timestamp)(),isUnusedBid:e=>e&&!e.sharedBidInUse&&(e.status&&![n.BID_STATUS.RENDERED].includes(e.status)||!e.status)}},7557:function(e,t,r){"use strict";let i,n,o,a,s,d;Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG_TOGGLE=void 0,t.hookTimer=v,t.metricsFactory=g,t.timedBidResponseHook=t.timedAuctionHook=t.newMetrics=void 0,t.useMetrics=y;var l=r(4321);let c=t.CONFIG_TOGGLE="performanceMetrics",u=window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now(),p=new WeakMap;function g(){let{now:e=u,mkNode:t=function e(t){return{metrics:{},timestamps:{},groups:{},addParent(e,r){t.push([e,r])},newSibling:()=>e(t.slice()),dfWalk(){let e,{visit:r,follow:i=()=>!0,visited:n=new Set,inEdge:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!n.has(this)){if(n.add(this),null!=(e=r(o,this)))return e;for(let[a,s]of t)if(i(o,s)&&null!=(e=a.dfWalk({visit:r,follow:i,visited:n,inEdge:s})))return e}}}},mkTimer:r=m,mkRenamer:i=e=>e,nodes:n=p}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){return function o(a){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>({forEach(t){t(e)}});s=i(s);let d=function(e){return a.dfWalk({visit(t,r){let i=r.timestamps;if(i.hasOwnProperty(e))return i[e]}})};function l(e,t){let r=s(e);a.dfWalk({follow:(e,t)=>t.propagate&&(!e||!e.stopPropagation),visit(e,i){r.forEach(r=>{null==e?i.metrics[r]=t:(i.groups.hasOwnProperty(r)||(i.groups[r]=[]),i.groups[r].push(t))})}})}function c(t){return r(e,e=>l(t,e))}function u(){let e={};return a.dfWalk({visit(t,r){e=Object.assign({},!t||t.includeGroups?r.groups:null,r.metrics,e)}}),e}let p={startTiming:c,measureTime:function(e,t){return c(e).stopAfter(t)()},measureHookTime:function(e,t,r){let i,n=c(e);return r(((i=n.stopBefore(t)).bail=t.bail&&n.stopBefore(t.bail),i.stopTiming=n,i.untimed=t,i))},checkpoint:function(t){a.timestamps[t]=e()},timeSince:function(t,r){let i=d(t),n=null!=i?e()-i:null;return null!=r&&l(r,n),n},timeBetween:function(e,t,r){let i=d(e),n=d(t),o=null!=i&&null!=n?n-i:null;return null!=r&&l(r,o),o},setMetric:l,getMetrics:u,fork:function(){let{propagate:e=!0,stopPropagation:r=!1,includeGroups:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(t([[a,{propagate:e,stopPropagation:r,includeGroups:i}]]),s)},join:function(e){let{propagate:t=!0,stopPropagation:r=!1,includeGroups:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.get(e);null!=o&&o.addParent(a,{propagate:t,stopPropagation:r,includeGroups:i})},newMetrics:function(){return o(a.newSibling(),s)},renameWith:function(e){return o(a,e)},toJSON:()=>u()};return n.set(p,a),p}(t([]))}}function f(e,t,r){return function(){t&&t();try{return e.apply(this,arguments)}finally{r&&r()}}}function m(e,t){let r=e(),i=!1;function n(){i||(t(e()-r),i=!0)}return n.stopBefore=e=>f(e,n),n.stopAfter=e=>f(e,null,n),n}let h=(n=()=>({}),o={forEach:i=function(){}},(a=()=>null).stopBefore=e=>e,a.stopAfter=e=>e,s=Object.defineProperties({dfWalk:i,newSibling:()=>s,addParent:i},Object.fromEntries(["metrics","timestamps","groups"].map(e=>[e,{get:n}]))),g({now:()=>0,mkNode:()=>s,mkRenamer:()=>()=>o,mkTimer:()=>a,nodes:{get:i,set:i}})()),b=!0;function y(e){return b&&e||h}function v(e,t){return function(r,i){return function(n){for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];let d=this;return y(t.apply(d,a)).measureHookTime(e+r,n,function(e){return i.call(d,e,...a)})}}}l.config.getConfig(c,e=>{b=!!e[c]}),d=g(),t.newMetrics=function(){return b?d():h},t.timedAuctionHook=v("requestBids.",e=>e.metrics),t.timedBidResponseHook=v("addBidResponse.",(e,t)=>t.metrics)},4134:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delayIfPrerendering=function(e,t){return function(){if(!(document.prerendering&&e()))return Promise.resolve(t.apply(this,arguments));{let e=this,r=Array.from(arguments);return new Promise(n=>{document.addEventListener("prerenderingchange",()=>{(0,i.logInfo)("Auctions were suspended while page was prerendering"),n(t.apply(e,r))},{once:!0})})}}};var i=r(7750)},7148:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PbPromise=void 0,t.defer=function(){var e,t;let r,i,{promiseFactory:n=e=>new o(e)}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{promise:n((e,t)=>{r=e,i=t}),resolve:(e=r,t=>e(t)),reject:(t=i,e=>t(e))}},t.delay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new o(t=>{n(t,e)})},t.pbSetTimeout=void 0,r(2442);var i=r(3800);let n=t.pbSetTimeout=(0,i.getGlobal)().setTimeout??setTimeout,o=t.PbPromise=(0,i.getGlobal)().Promise??Promise},1720:function(e,t){"use strict";function r(e,t){return e===t?0:e<t?-1:1}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e;return(t,i)=>r(e(t),e(i))}function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return(t,r)=>-e(t,r)||0}function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){for(let i of t){let t=i(e,r);if(0!==t)return t}return 0}}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return(t,r)=>0>e(r,t)?r:t}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return a(n(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.getOldestHighestCpmBid=t.getLatestHighestCpmBid=t.getHighestCpm=void 0,t.keyCompare=i,t.maximum=s,t.minimum=a,t.reverseCompare=n,t.simpleCompare=r,t.tiebreakCompare=o;let d=i(e=>e.cpm),l=i(e=>e.responseTimestamp);t.getHighestCpm=s(o(d,n(i(e=>e.timeToRespond)))),t.getOldestHighestCpmBid=s(o(d,n(l))),t.getLatestHighestCpmBid=s(o(d,l))},5217:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ttlCollection=function(){let e,t,{startTime:r=n.timestamp,ttl:a=()=>null,monotonic:s=!1,slack:d=5e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=new Map,c=[],u=[],p=s?e=>u.push(e):e=>u.splice((0,n.binarySearch)(u,e,e=>e.expiry),0,e);function g(){if(t&&clearTimeout(t),u.length>0){let r=(0,n.timestamp)();e=Math.max(r,u[0].expiry+d),t=(0,o.setFocusTimeout)(()=>{let e=(0,n.timestamp)(),r=0;for(let t of u){if(t.expiry>e)break;c.forEach(e=>{try{e(t.item)}catch(e){(0,n.logError)(e)}}),l.delete(t.item),r++}u.splice(0,r),t=null,g()},e-r)}else t=null}let f={};return{[Symbol.iterator]:()=>l.keys(),add(n){l.has(n)||l.set(n,function(n){let o,s={},l=f,[c,u]=Object.entries({start:r,delta:a}).map(r=>{let a,[c,u]=r;return function(){let r=a={};i.PbPromise.resolve(u(n)).then(i=>{r===a&&(s[c]=i,l===f&&null!=s.start&&null!=s.delta&&(o=s.start+s.delta,p(m),(null==t||e>o+d)&&g()))})}}),m={item:n,refresh:u,get expiry(){return o}};return c(),u(),m}(n))},clear(){u.length=0,g(),l.clear(),f={}},clearItem(e){l.has(e)&&l.delete(e)},toArray:()=>Array.from(l.keys()),refresh(){for(let e of(u.length=0,g(),l.values()))e.refresh()},onExpiry:e=>(c.push(e),()=>{let t=c.indexOf(e);t>=0&&c.splice(t,1)})}};var i=r(7148),n=r(7750),o=r(8910)},7246:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cachedGetter=n,t.getScreenOrientation=function(e){let t=e??((0,i.canAccessWindowTop)()?i.internal.getWindowTop():i.internal.getWindowSelf()),r=t?.screen??i.internal.getWindowSelf()?.screen??window?.screen,n=Number(r?.width),o=Number(r?.height);if(Number.isFinite(n)&&Number.isFinite(o))return o>=n?"portrait":"landscape"},t.internal=t.getWinDimensions=void 0,t.resetWinDimensions=function(){o.resetters.forEach(e=>e())};var i=r(7750);function n(e){let t,r;return{get:function(){return(!t||!r||Date.now()-r>20)&&(t=e(),r=Date.now()),t},reset:function(){t=e()}}}let o=t.internal={fetchWinDimensions:function(){let e=(0,i.canAccessWindowTop)()?i.internal.getWindowTop():i.internal.getWindowSelf();return{screen:{width:e.screen?.width,height:e.screen?.height},innerHeight:e.innerHeight,innerWidth:e.innerWidth,visualViewport:{height:e.visualViewport?.height,width:e.visualViewport?.width},document:{documentElement:{clientWidth:e.document?.documentElement?.clientWidth,clientHeight:e.document?.documentElement?.clientHeight,scrollTop:e.document?.documentElement?.scrollTop,scrollLeft:e.document?.documentElement?.scrollLeft},body:{scrollTop:document.body?.scrollTop,scrollLeft:document.body?.scrollLeft,clientWidth:document.body?.clientWidth,clientHeight:document.body?.clientHeight}}}},resetters:[]},a=n(()=>o.fetchWinDimensions());t.getWinDimensions=a.get,o.resetters.push(a.reset)},4312:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkVideoBidSetup=t.OUTSTREAM=t.ORTB_VIDEO_PARAMS=t.INSTREAM=void 0,t.fillVideoDefaults=function(e){let t=e?.mediaTypes?.video;null!=t&&null==t.plcmt&&(t.context===s||[2,3,4].includes(t.placement)?t.plcmt=4:t.context!==s&&[2,6].includes(t.playbackmethod)&&(t.plcmt=2))},t.isValidVideoBid=function(e){let{index:t=a.auctionManager.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getMediaTypes(e)?.video,i=r&&r?.context,n=r&&r?.useCacheKey,o=t.getAdUnit(e);return l(e,o,r,i,n)},t.validateOrtbVideoFields=function(e,t){let r=e?.mediaTypes?.video;(0,i.isPlainObject)(r)?null!=r&&Object.entries(r).forEach(n=>{let[o,a]=n;!d.has(o)||d.get(o)(a)||("function"==typeof t?t(o,a,e):(delete r[o],(0,i.logWarn)(`Invalid prop in adUnit "${e.code}": Invalid value for mediaTypes.video.${o} ORTB property. The property has been removed.`)))}):(0,i.logWarn)("validateOrtbVideoFields: videoParams must be an object.")};var i=r(7750),n=r(4321),o=r(1620),a=r(1171);let s=t.OUTSTREAM="outstream";t.INSTREAM="instream";let d=t.ORTB_VIDEO_PARAMS=new Map([["mimes",e=>Array.isArray(e)&&e.length>0&&e.every(e=>"string"==typeof e)],["minduration",i.isInteger],["maxduration",i.isInteger],["startdelay",i.isInteger],["maxseq",i.isInteger],["poddur",i.isInteger],["protocols",i.isArrayOfNums],["w",i.isInteger],["h",i.isInteger],["podid",i.isStr],["podseq",i.isInteger],["rqddurs",i.isArrayOfNums],["placement",i.isInteger],["plcmt",i.isInteger],["linearity",i.isInteger],["skip",e=>[1,0].includes(e)],["skipmin",i.isInteger],["skipafter",i.isInteger],["sequence",i.isInteger],["slotinpod",i.isInteger],["mincpmpersec",i.isNumber],["battr",i.isArrayOfNums],["maxextended",i.isInteger],["minbitrate",i.isInteger],["maxbitrate",i.isInteger],["boxingallowed",i.isInteger],["playbackmethod",i.isArrayOfNums],["playbackend",i.isInteger],["delivery",i.isArrayOfNums],["pos",i.isInteger],["api",i.isArrayOfNums],["companiontype",i.isArrayOfNums],["poddedupe",i.isArrayOfNums]]),l=t.checkVideoBidSetup=(0,o.hook)("sync",function(e,t,r,o,a){if(r&&(a||o!==s)){let{url:t,useLocal:r}=n.config.getConfig("cache")||{};return t||r||!e.vastXml||e.vastUrl?!!(e.vastUrl||e.vastXml):((0,i.logError)(`
        This bid contains only vastXml and will not work when a prebid cache url is not specified.
        Try enabling either prebid cache with pbjs.setConfig({ cache: {url: "..."} });
        or local cache with pbjs.setConfig({ cache: { useLocal: true }});
      `),!1)}return o!==s||!!a||!!(e.renderer||t&&t.renderer||r.renderer)},"checkVideoBidSetup")},2948:function(e,t,r){"use strict";let i,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.batchingCache=t.batchAndStore=t._internal=void 0,t.getCacheUrl=y,t.store=b,t.storeBatch=I,t.vastLocalCache=t.storeLocally=void 0;var a=r(7581),s=r(4321),d=r(1171),l=g(r(2506)),c=g(r(8878)),u=r(7750),p=r(6446);function g(e,t){if("function"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(g=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?i:r){if(n.has(e))return n.get(e);n.set(e,a)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(a,t,o):a[t]=e[t]);return a})(e,t)}let f=t.vastLocalCache=new Map;function m(e){let{index:t=d.auctionManager.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=h(e),i=t.getAuction(e),n={type:"xml",value:r,ttlseconds:Number(e.ttl)+15};return s.config.getConfig("cache.vasttrack")&&(n.bidder=e.bidder,n.bidid=e.requestId,n.aid=e.auctionId),null!=i&&(n.timestamp=i.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(n.key=e.customCacheKey),n}function h(e){var t,r;let i;return e.vastXml?e.vastXml:(t=e.vastUrl,i=(r=(r=e.vastImpUrl)&&(Array.isArray(r)?r:[r]))?r.map(e=>`<Impression><![CDATA[${e}]]></Impression>`).join(""):"",`<VAST version="3.0">
    <Ad>
      <Wrapper>
        <AdSystem>prebid.org wrapper</AdSystem>
        <VASTAdTagURI><![CDATA[${t}]]></VASTAdTagURI>
        ${i}
        <Creatives></Creatives>
      </Wrapper>
    </Ad>
  </VAST>`)}function b(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.ajaxBuilder,i={puts:e.map(m)};r(s.config.getConfig("cache.timeout"))(s.config.getConfig("cache.url"),{success:function(e){let r;try{r=JSON.parse(e).responses}catch(e){t(e,[]);return}r?t(null,r):t(Error("The cache server didn't respond with a responses property."),[])},error:function(r,i){(function(e,t){let r=e.responseText;if(!r.match(/cache element.\d+ exceeded max size: Payload size .\d+ exceeded max.\d+/))return;let i=r.match(/(\d+)/g),n={bids:t,responseSize:i[1],maxSizeAllowed:i[2]};l.emit(c.EVENTS.VAST_EXCEEDED_LIMIT,n)})(i,e),t(Error(`Error storing video ad in the cache: ${r}: ${JSON.stringify(i)}`),[])}},JSON.stringify(i),{contentType:"text/plain",withCredentials:!0})}function y(e){return`${s.config.getConfig("cache.url")}?uuid=${e}`}t.storeLocally=e=>{let t=h(e),r=URL.createObjectURL(new Blob([t],{type:"text/xml"}));v(e,r),f.set(e.videoCacheKey,r)};let v=(e,t,r)=>{e.videoCacheKey=r||(0,u.generateUUID)(),e.vastUrl||(e.vastUrl=t)},A=t._internal={store:b};function I(e){let t=e.map(e=>e.bidResponse);A.store(t,function(r,i){if(r)(0,u.logError)(`Failed to save to the video cache: ${r}. Video bids will be discarded:`,t);else e.length!==i.length?(0,u.logError)(`expected ${e.length} cache IDs, got ${i.length} instead`):i.forEach((t,r)=>{let{auctionInstance:i,bidResponse:n,afterBidAdded:o}=e[r];""===t.uuid?(0,u.logWarn)("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."):(v(n,y(t.uuid),t.uuid),(0,p.addBidToAuction)(i,n),o())})})}s.config.getConfig("cache",e=>{let{cache:t}=e;i="number"==typeof t.batchSize&&t.batchSize>0?t.batchSize:1,n="number"==typeof t.batchTimeout&&t.batchTimeout>0?t.batchTimeout:0,t.useLocal&&!o&&(o=d.auctionManager.onExpiry(e=>{e.getBidsReceived().forEach(e=>{let t=f.get(e.videoCacheKey);t&&t.startsWith("blob")&&URL.revokeObjectURL(t),f.delete(e.videoCacheKey)})}))});let E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setTimeout,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,r=[[]],o=!1,a=e=>e();return function(s,d,l){let c=n>0?e:a;r[r.length-1].length>=i&&r.push([]),r[r.length-1].push({auctionInstance:s,bidResponse:d,afterBidAdded:l}),o||(o=!0,c(()=>{r.forEach(t),r=[[]],o=!1},n))}};t.batchingCache=E,t.batchAndStore=E()},7336:function(e,t,r){var i,n,o,a,s,d,l,c,u,p,g,f,m,h,b;i=r(6124),r(4623),r(4779),r(7303),r(4426),n=i.lib.BlockCipher,o=i.algo,a=[],s=[],d=[],l=[],c=[],u=[],p=[],g=[],f=[],m=[],function(){for(var e=[],t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var r=0,i=0,t=0;t<256;t++){var n=i^i<<1^i<<2^i<<3^i<<4;n=n>>>8^255&n^99,a[r]=n,s[n]=r;var o=e[r],h=e[o],b=e[h],y=257*e[n]^0x1010100*n;d[r]=y<<24|y>>>8,l[r]=y<<16|y>>>16,c[r]=y<<8|y>>>24,u[r]=y;var y=0x1010101*b^65537*h^257*o^0x1010100*r;p[n]=y<<24|y>>>8,g[n]=y<<16|y>>>16,f[n]=y<<8|y>>>24,m[n]=y,r?(r=o^e[e[e[b^o]]],i^=e[e[i]]):r=i=1}}(),h=[0,1,2,4,8,16,32,64,128,27,54],b=o.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e,t=this._keyPriorReset=this._key,r=t.words,i=t.sigBytes/4,n=((this._nRounds=i+6)+1)*4,o=this._keySchedule=[],s=0;s<n;s++)s<i?o[s]=r[s]:(e=o[s-1],s%i?i>6&&s%i==4&&(e=a[e>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e]):e=(a[(e=e<<8|e>>>24)>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e])^h[s/i|0]<<24,o[s]=o[s-i]^e);for(var d=this._invKeySchedule=[],l=0;l<n;l++){var s=n-l;if(l%4)var e=o[s];else var e=o[s-4];l<4||s<=4?d[l]=e:d[l]=p[a[e>>>24]]^g[a[e>>>16&255]]^f[a[e>>>8&255]]^m[a[255&e]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,d,l,c,u,a)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,p,g,f,m,s);var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,i,n,o,a,s){for(var d=this._nRounds,l=e[t]^r[0],c=e[t+1]^r[1],u=e[t+2]^r[2],p=e[t+3]^r[3],g=4,f=1;f<d;f++){var m=i[l>>>24]^n[c>>>16&255]^o[u>>>8&255]^a[255&p]^r[g++],h=i[c>>>24]^n[u>>>16&255]^o[p>>>8&255]^a[255&l]^r[g++],b=i[u>>>24]^n[p>>>16&255]^o[l>>>8&255]^a[255&c]^r[g++],y=i[p>>>24]^n[l>>>16&255]^o[c>>>8&255]^a[255&u]^r[g++];l=m,c=h,u=b,p=y}var m=(s[l>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&p])^r[g++],h=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[p>>>8&255]<<8|s[255&l])^r[g++],b=(s[u>>>24]<<24|s[p>>>16&255]<<16|s[l>>>8&255]<<8|s[255&c])^r[g++],y=(s[p>>>24]<<24|s[l>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^r[g++];e[t]=m,e[t+1]=h,e[t+2]=b,e[t+3]=y},keySize:8}),i.AES=n._createHelper(b),e.exports=i.AES},4426:function(e,t,r){var i,n,o,a,s,d,l,c,u,p,g,f,m,h,b,y,v,A;i=r(6124),r(7303),e.exports=void(i.lib.Cipher||(o=(n=i.lib).Base,a=n.WordArray,s=n.BufferedBlockAlgorithm,(d=i.enc).Utf8,l=d.Base64,c=i.algo.EvpKDF,u=n.Cipher=s.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?A:y}return function(t){return{encrypt:function(r,i,n){return e(i).encrypt(t,r,i,n)},decrypt:function(r,i,n){return e(i).decrypt(t,r,i,n)}}}}()}),n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),p=i.mode={},g=n.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=p.CBC=function(){var e=g.extend();function t(e,t,r){var i,n=this._iv;n?(i=n,this._iv=void 0):i=this._prevBlock;for(var o=0;o<r;o++)e[t+o]^=i[o]}return e.Encryptor=e.extend({processBlock:function(e,r){var i=this._cipher,n=i.blockSize;t.call(this,e,r,n),i.encryptBlock(e,r),this._prevBlock=e.slice(r,r+n)}}),e.Decryptor=e.extend({processBlock:function(e,r){var i=this._cipher,n=i.blockSize,o=e.slice(r,r+n);i.decryptBlock(e,r),t.call(this,e,r,n),this._prevBlock=o}}),e}(),m=(i.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,i=r-e.sigBytes%r,n=i<<24|i<<16|i<<8|i,o=[],s=0;s<i;s+=4)o.push(n);var d=a.create(o,i);e.concat(d)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:m}),reset:function(){u.reset.call(this);var e,t=this.cfg,r=t.iv,i=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(i,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),h=n.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),b=(i.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?a.create([0x53616c74,0x65645f5f]).concat(r).concat(t):t).toString(l)},parse:function(e){var t,r=l.parse(e),i=r.words;return 0x53616c74==i[0]&&0x65645f5f==i[1]&&(t=a.create(i.slice(2,4)),i.splice(0,4),r.sigBytes-=16),h.create({ciphertext:r,salt:t})}},y=n.SerializableCipher=o.extend({cfg:o.extend({format:b}),encrypt:function(e,t,r,i){i=this.cfg.extend(i);var n=e.createEncryptor(r,i),o=n.finalize(t),a=n.cfg;return h.create({ciphertext:o,key:r,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,r,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(r,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(i.kdf={}).OpenSSL={execute:function(e,t,r,i,n){if(i||(i=a.random(8)),n)var o=c.create({keySize:t+r,hasher:n}).compute(e,i);else var o=c.create({keySize:t+r}).compute(e,i);var s=a.create(o.words.slice(t),4*r);return o.sigBytes=4*t,h.create({key:o,iv:s,salt:i})}},A=n.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:v}),encrypt:function(e,t,r,i){var n=(i=this.cfg.extend(i)).kdf.execute(r,e.keySize,e.ivSize,i.salt,i.hasher);i.iv=n.iv;var o=y.encrypt.call(this,e,t,n.key,i);return o.mixIn(n),o},decrypt:function(e,t,r,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var n=i.kdf.execute(r,e.keySize,e.ivSize,t.salt,i.hasher);return i.iv=n.iv,y.decrypt.call(this,e,t,n.key,i)}})))},6124:function(e,t,r){var i;e.exports=i||function(e,t){if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==r.g&&r.g.crypto&&(i=r.g.crypto),!i)try{i=r(7602)}catch(e){}var i,n=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),a={},s=a.lib={},d=s.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=s.WordArray=d.extend({init:function(e,r){e=this.words=e||[],t!=r?this.sigBytes=r:this.sigBytes=4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<n;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=a<<24-(i+o)%4*8}else for(var s=0;s<n;s+=4)t[i+s>>>2]=r[s>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=0xffffffff<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=d.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(n());return new l.init(t,e)}}),c=a.enc={},u=c.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new l.init(r,t/2)}},p=c.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new l.init(r,t)}},g=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},f=s.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=g.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,i=this._data,n=i.words,o=i.sigBytes,a=this.blockSize,s=o/(4*a),d=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,c=e.min(4*d,o);if(d){for(var u=0;u<d;u+=a)this._doProcessBlock(n,u);r=n.splice(0,d),i.sigBytes-=c}return new l.init(r,c)},clone:function(){var e=d.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});s.Hasher=f.extend({cfg:d.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new m.HMAC.init(e,r).finalize(t)}}});var m=a.algo={};return a}(Math)},4623:function(e,t,r){var i,n;n=(i=r(6124)).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,i=this._map;e.clamp();for(var n=[],o=0;o<r;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<r;s++)n.push(i.charAt(a>>>6*(3-s)&63));var d=i.charAt(64);if(d)for(;n.length%4;)n.push(d);return n.join("")},parse:function(e){var t=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var a=r.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}for(var d=e,l=t,c=i,u=[],p=0,g=0;g<l;g++)if(g%4){var f=c[d.charCodeAt(g-1)]<<g%4*2|c[d.charCodeAt(g)]>>>6-g%4*2;u[p>>>2]|=f<<24-p%4*8,p++}return n.create(u,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.exports=i.enc.Base64},9271:function(e,t,r){e.exports=r(6124).enc.Utf8},7303:function(e,t,r){var i,n,o,a,s,d,l;i=r(6124),r(390),r(5640),o=(n=i.lib).Base,a=n.WordArray,d=(s=i.algo).MD5,l=s.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:d,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,i=this.cfg,n=i.hasher.create(),o=a.create(),s=o.words,d=i.keySize,l=i.iterations;s.length<d;){r&&n.update(r),r=n.update(e).finalize(t),n.reset();for(var c=1;c<l;c++)r=n.finalize(r),n.reset();o.concat(r)}return o.sigBytes=4*d,o}}),i.EvpKDF=function(e,t,r){return l.create(r).compute(e,t)},e.exports=i.EvpKDF},5640:function(e,t,r){var i,n,o;e.exports=void(n=(i=r(6124)).lib.Base,o=i.enc.Utf8,i.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var r=e.blockSize,i=4*r;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var n=this._oKey=t.clone(),a=this._iKey=t.clone(),s=n.words,d=a.words,l=0;l<r;l++)s[l]^=0x5c5c5c5c,d[l]^=0x36363636;n.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}}))},4779:function(e,t,r){var i;i=r(6124),function(e){for(var t=i.lib,r=t.WordArray,n=t.Hasher,o=i.algo,a=[],s=0;s<64;s++)a[s]=0x100000000*e.abs(e.sin(s+1))|0;var d=o.MD5=n.extend({_doReset:function(){this._hash=new r.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var i=t+r,n=e[i];e[i]=(n<<8|n>>>24)&0xff00ff|(n<<24|n>>>8)&0xff00ff00}var o=this._hash.words,s=e[t+0],d=e[t+1],g=e[t+2],f=e[t+3],m=e[t+4],h=e[t+5],b=e[t+6],y=e[t+7],v=e[t+8],A=e[t+9],I=e[t+10],E=e[t+11],S=e[t+12],_=e[t+13],T=e[t+14],O=e[t+15],C=o[0],w=o[1],x=o[2],R=o[3];C=l(C,w,x,R,s,7,a[0]),R=l(R,C,w,x,d,12,a[1]),x=l(x,R,C,w,g,17,a[2]),w=l(w,x,R,C,f,22,a[3]),C=l(C,w,x,R,m,7,a[4]),R=l(R,C,w,x,h,12,a[5]),x=l(x,R,C,w,b,17,a[6]),w=l(w,x,R,C,y,22,a[7]),C=l(C,w,x,R,v,7,a[8]),R=l(R,C,w,x,A,12,a[9]),x=l(x,R,C,w,I,17,a[10]),w=l(w,x,R,C,E,22,a[11]),C=l(C,w,x,R,S,7,a[12]),R=l(R,C,w,x,_,12,a[13]),x=l(x,R,C,w,T,17,a[14]),w=l(w,x,R,C,O,22,a[15]),C=c(C,w,x,R,d,5,a[16]),R=c(R,C,w,x,b,9,a[17]),x=c(x,R,C,w,E,14,a[18]),w=c(w,x,R,C,s,20,a[19]),C=c(C,w,x,R,h,5,a[20]),R=c(R,C,w,x,I,9,a[21]),x=c(x,R,C,w,O,14,a[22]),w=c(w,x,R,C,m,20,a[23]),C=c(C,w,x,R,A,5,a[24]),R=c(R,C,w,x,T,9,a[25]),x=c(x,R,C,w,f,14,a[26]),w=c(w,x,R,C,v,20,a[27]),C=c(C,w,x,R,_,5,a[28]),R=c(R,C,w,x,g,9,a[29]),x=c(x,R,C,w,y,14,a[30]),w=c(w,x,R,C,S,20,a[31]),C=u(C,w,x,R,h,4,a[32]),R=u(R,C,w,x,v,11,a[33]),x=u(x,R,C,w,E,16,a[34]),w=u(w,x,R,C,T,23,a[35]),C=u(C,w,x,R,d,4,a[36]),R=u(R,C,w,x,m,11,a[37]),x=u(x,R,C,w,y,16,a[38]),w=u(w,x,R,C,I,23,a[39]),C=u(C,w,x,R,_,4,a[40]),R=u(R,C,w,x,s,11,a[41]),x=u(x,R,C,w,f,16,a[42]),w=u(w,x,R,C,b,23,a[43]),C=u(C,w,x,R,A,4,a[44]),R=u(R,C,w,x,S,11,a[45]),x=u(x,R,C,w,O,16,a[46]),w=u(w,x,R,C,g,23,a[47]),C=p(C,w,x,R,s,6,a[48]),R=p(R,C,w,x,y,10,a[49]),x=p(x,R,C,w,T,15,a[50]),w=p(w,x,R,C,h,21,a[51]),C=p(C,w,x,R,S,6,a[52]),R=p(R,C,w,x,f,10,a[53]),x=p(x,R,C,w,I,15,a[54]),w=p(w,x,R,C,d,21,a[55]),C=p(C,w,x,R,v,6,a[56]),R=p(R,C,w,x,O,10,a[57]),x=p(x,R,C,w,b,15,a[58]),w=p(w,x,R,C,_,21,a[59]),C=p(C,w,x,R,m,6,a[60]),R=p(R,C,w,x,E,10,a[61]),x=p(x,R,C,w,g,15,a[62]),w=p(w,x,R,C,A,21,a[63]),o[0]=o[0]+C|0,o[1]=o[1]+w|0,o[2]=o[2]+x|0,o[3]=o[3]+R|0},_doFinalize:function(){var t=this._data,r=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;r[n>>>5]|=128<<24-n%32;var o=e.floor(i/0x100000000);r[(n+64>>>9<<4)+15]=(o<<8|o>>>24)&0xff00ff|(o<<24|o>>>8)&0xff00ff00,r[(n+64>>>9<<4)+14]=(i<<8|i>>>24)&0xff00ff|(i<<24|i>>>8)&0xff00ff00,t.sigBytes=(r.length+1)*4,this._process();for(var a=this._hash,s=a.words,d=0;d<4;d++){var l=s[d];s[d]=(l<<8|l>>>24)&0xff00ff|(l<<24|l>>>8)&0xff00ff00}return a},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,r,i,n,o,a){var s=e+(t&r|~t&i)+n+a;return(s<<o|s>>>32-o)+t}function c(e,t,r,i,n,o,a){var s=e+(t&i|r&~i)+n+a;return(s<<o|s>>>32-o)+t}function u(e,t,r,i,n,o,a){var s=e+(t^r^i)+n+a;return(s<<o|s>>>32-o)+t}function p(e,t,r,i,n,o,a){var s=e+(r^(t|~i))+n+a;return(s<<o|s>>>32-o)+t}i.MD5=n._createHelper(d),i.HmacMD5=n._createHmacHelper(d)}(Math),e.exports=i.MD5},390:function(e,t,r){var i,n,o,a,s,d,l;o=(n=(i=r(6124)).lib).WordArray,a=n.Hasher,s=i.algo,d=[],l=s.SHA1=a.extend({_doReset:function(){this._hash=new o.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],o=r[2],a=r[3],s=r[4],l=0;l<80;l++){if(l<16)d[l]=0|e[t+l];else{var c=d[l-3]^d[l-8]^d[l-14]^d[l-16];d[l]=c<<1|c>>>31}var u=(i<<5|i>>>27)+s+d[l];l<20?u+=(n&o|~n&a)+0x5a827999:l<40?u+=(n^o^a)+0x6ed9eba1:l<60?u+=(n&o|n&a|o&a)-0x70e44324:u+=(n^o^a)-0x359d3e2a,s=a,a=o,o=n<<30|n>>>2,n=i,i=u}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[(i+64>>>9<<4)+14]=Math.floor(r/0x100000000),t[(i+64>>>9<<4)+15]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),i.SHA1=a._createHelper(l),i.HmacSHA1=a._createHmacHelper(l),e.exports=i.SHA1},4760:function(e,t,r){"use strict";function i(e,t,r,i,n){for(i=0,t=t.split?t.split("."):t;i<t.length;i++)e=e?e[t[i]]:n;return e===n?r:e}r.r(t),r.d(t,{default:()=>i})},2742:function(e,t){t.dset=function(e,t,r){t.split&&(t=t.split("."));for(var i,n,o=0,a=t.length,s=e;o<a&&"__proto__"!=(n=""+t[o++])&&"constructor"!==n&&"prototype"!==n;)s=s[n]=o===a?r:typeof(i=s[n])==typeof t?i:0*t[o]!=0||~(""+t[o]).indexOf(".")?{}:[]}},3936:function(e){o.SYNC=1,o.ASYNC=2,o.QUEUE=4;var t="fun-hooks",r=Object.freeze({ready:0}),i=new WeakMap;function n(e,t){return Array.prototype.slice.call(e,t)}function o(e){var a,s={},d=[];function l(e,t){return"function"==typeof e?g.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?g.apply(null,arguments):"object"==typeof e?c.apply(null,arguments):void 0}function c(e,t,r){var i=!0;void 0===t&&(t=Object.getOwnPropertyNames(e).filter(e=>!e.match(/^_/)),i=!1);var n={},o=["constructor"];do t.forEach(function(t){var i=t.match(/(?:(sync|async):)?(.+)/),a=i[1]||"sync",s=i[2];if(!n[s]&&"function"==typeof e[s]&&-1===o.indexOf(s)){var d=e[s];n[s]=e[s]=g(a,d,r?[r,s]:void 0)}}),e=Object.getPrototypeOf(e);while(i&&e)return n}function u(e){var r=Array.isArray(e)?e:e.split(".");return r.reduce(function(i,n,o){var s=i[n],l=!1;return s||(o===r.length-1?(a||d.push(function(){l||console.warn(t+": referenced '"+e+"' but it was never created")}),i[n]=p(function(e){i[n]=e,l=!0})):i[n]={})},s)}function p(e){var t=[],r=[],n=function(){},o={before:function(e,r){return a.call(this,t,"before",e,r)},after:function(e,t){return a.call(this,r,"after",e,t)},getHooks:function(e){var i=t.concat(r);"object"==typeof e&&(i=i.filter(function(t){return Object.keys(e).every(function(r){return t[r]===e[r]})}));try{Object.assign(i,{remove:function(){return i.forEach(function(e){e.remove()}),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return i},removeAll:function(){return this.getHooks().remove()}};return i.set(o.after,{install:function(i,o,a){this.type=i,n=a,a(t,r),e&&e(o)}}),o;function a(e,i,o,a){var s={hook:o,type:i,priority:a||10,remove:function(){var i=e.indexOf(s);-1!==i&&(e.splice(i,1),n(t,r))}};return e.push(s),e.sort(function(e,t){return t.priority-e.priority}),n(t,r),this}}function g(r,s,l){var c,g=s.after&&i.get(s.after);if(g)if(g.type===r)return s;else throw t+": recreated hookable with different type";var f=l?u(l):p(),m={get:function(e,t){return f[t]||Reflect.get.apply(Reflect,arguments)}};a||d.push(b);var h=new Proxy(s,m);return i.get(h.after).install(r,h,function(e,t){var i,o=[];function a(e){o.push(e.hook)}e.length||t.length?(e.forEach(a),i=o.push(void 0)-1,t.forEach(a),c=function(e,t,a){var s,d=o.slice(),l=0,c="async"===r&&"function"==typeof a[a.length-1]&&a.pop();function u(e){"sync"===r?s=e:c&&c.apply(null,arguments)}function p(e){if(d[l]){var i=n(arguments);return p.bail=u,i.unshift(p),d[l++].apply(t,i)}"sync"===r?s=e:c&&c.apply(null,arguments)}return d[i]=function(){var i=n(arguments,1);"async"===r&&c&&(delete p.bail,i.push(p));var o=e.apply(t,i);"sync"===r&&p(o)},p.apply(null,a),s}):c=void 0,b()}),h;function b(){!a&&("sync"!==r||e.ready&o.SYNC)&&("async"!==r||e.ready&o.ASYNC)?"sync"!==r&&e.ready&o.QUEUE?m.apply=function(){var e=arguments;d.push(function(){h.apply(e[1],e[2])})}:m.apply=function(){throw t+": hooked function not ready"}:m.apply=c}}return(e=Object.assign({},r,e)).ready?l.ready=function(){a=!0;for(var e;e=d.shift();)e()}:a=!0,l.get=u,l}e.exports=o},8600:function(e,t){t.klona=function e(t){var r,i,n;if(Array.isArray(t)){for(i=Array(r=t.length);r--;)i[r]=(n=t[r])&&"object"==typeof n?e(n):n;return i}if("[object Object]"===Object.prototype.toString.call(t)){for(r in i={},t)"__proto__"===r?Object.defineProperty(i,r,{value:e(t[r]),configurable:!0,enumerable:!0,writable:!0}):i[r]=(n=t[r])&&"object"==typeof n?e(n):n;return i}return t}},7602:function(){},5824:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6805:function(e,t){"use strict";let r="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",i=RegExp(`^${r}$`,"i"),n=!!String.prototype.trim;function o(e){return null!=e}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e){return n?(""+e).trim():(""+e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function d(e){return"string"==typeof e}function l(e){return!!e&&"object"==typeof e&&!a(e)}function c(e,t){return new Date(new Date().getTime()+e*t)}function u(e,t,r){if(l(t)){let i;return(i="message"in t&&"string"==typeof t.message?Error(r||t.message):Error(r)).name=e,"stack"in t&&"string"==typeof t.stack&&(i.stack=t.stack),"lineNumber"in t&&"number"==typeof t.lineNumber&&(i.lineNumber=t.lineNumber),"columnNumber"in t&&"number"==typeof t.columnNumber&&(i.columnNumber=t.columnNumber),i}{let t=Error(r);return t.name=e,t}}let p="li_errors";t.ERRORS_CHANNEL=p,t.ReplayEmitter=class{on(e,t,r){let i={callback:t.bind(r),unbound:t};return this.data={...this.data,h:{...this.data.h,[e]:[...this.data.h[e]||[],i]}},(this.data.q[e]||[]).forEach(e=>t.call(r,e)),this}once(e,t,r){let i=this.data.q[e]||[];if(i.length>0)return t.call(r,i[0]),this;{let i=n=>{this.off(e,i),t.call(r,n)};return i._=t,this.on(e,i,r)}}emit(e,t){(this.data.h[e]||[]).forEach(e=>e.callback(t));let r=this.data.q[e]||[];return this.data={...this.data,q:{...this.data.q,[e]:[...r.length<this.data.size?r:r.slice(1),t]}},this}off(e,t){let r=this.data.h[e],i=r&&t&&r.filter(e=>e.unbound!==t)||[];if(i.length)this.data={...this.data,h:{...this.data.h,[e]:i}};else{let{[e]:t,...r}=this.data.h;this.data={...this.data,h:r}}return this}emitErrorWithMessage(e,t,r){let i=u(e,r,t);return this.emit(p,i)}emitError(e,t){let r=u(e,t);return this.emit(p,r)}constructor(e){!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"data",void 0);const t=parseInt(e.toString())||5;this.data={h:{},q:{},size:t}}},t.UUID=r,t.expiresInDays=function(e){return c(e,864e5)},t.expiresInHours=function(e){return c(e,36e5)},t.isArray=a,t.isFunction=function(e){return!!e&&"function"==typeof e},t.isNonEmpty=function(e){return o(e)&&s(e).length>0},t.isObject=l,t.isRecord=function(e){return l(e)},t.isString=d,t.isUUID=function(e){return!!e&&i.test(s(e))},t.nonNull=o,t.onNonNull=function(e,t){return null!=e?t(e):e},t.safeToString=function(e){return"object"==typeof e?JSON.stringify(e):""+e},t.strEqualsIgnoreCase=function(e,t){return d(e)&&d(t)&&s(e.toLowerCase())===s(t.toLowerCase())},t.trim=s,t.wrapError=u},9749:function(e,t,r){"use strict";var i=r(6325);r(6805),r(3612);let n=i.LiveConnect,o=i.StandardLiveConnect,a=i.MinimalLiveConnect;t.consts=i.consts,t.eventBus=i.eventBus,t.LiveConnect=n,t.MinimalLiveConnect=a,t.StandardLiveConnect=o},6325:function(e,t,r){"use strict";let i,n;function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(6805),s=r(3612);class d{callBakers(e){try{let t=JSON.parse(e).bakers;if(a.isArray(t))for(let e=0;e<t.length;e++)this.calls.pixelGet(`${t[e]}?dtstmp=${Date.now()}`)}catch(t){this.eventBus.emitErrorWithMessage("CallBakers",`Error while calling bakers with ${e}`,t)}}sendState(e,t,r,i){if(e.sendsPixel()){i&&a.isFunction(i)&&i();let n=e.asQuery().add("dtstmp",Date.now(),{prepend:!0}).toQueryString();r(`${this.url}/${t}${n}`)}}sendAjax(e,t={}){this.sendState(e,"j",r=>{let i=n=>{let o=e.asHeaders();this.calls.ajaxGet(r,e=>{t.onLoad&&a.isFunction(t.onLoad)&&t.onLoad(),this.callBakers(e)},r=>{n<=0?(this.sendPixel(e,t),this.eventBus.emitError("AjaxFailed",r)):i(n-1)},this.timeout,o)};i(this.retries)},t.onPreSend)}sendPixel(e,t={}){this.sendState(e,"p",e=>this.calls.pixelGet(e,t.onLoad),t.onPreSend)}constructor(e){o(this,"url",void 0),o(this,"timeout",void 0),o(this,"calls",void 0),o(this,"eventBus",void 0),o(this,"retries",void 0),this.url=e.collectorUrl??"https://rp.liadm.com",this.timeout=e.ajaxTimeout??0,this.calls=e.callHandler,this.eventBus=e.eventBus,this.retries=e.ajaxRetries??3}}let l="__li__evt_bus",c=a.ERRORS_CHANNEL,u="lips",p="pre_lips",g="_li_duid",f="https://idx.liadm.com/idex",m=[];var h=Object.freeze({__proto__:null,DEFAULT_IDEX_AJAX_TIMEOUT:5e3,DEFAULT_IDEX_URL:f,DEFAULT_REQUESTED_ATTRIBUTES:m,ERRORS_PREFIX:c,EVENT_BUS_NAMESPACE:l,PEOPLE_VERIFIED_LS_ENTRY:g,PIXEL_SENT_PREFIX:u,PRELOAD_PIXEL:p});function b(e){return function(e){e=`${e}`;for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let t="";for(let i=0;i<e.length;i+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(i)>>2,n[1]=(3&e.charCodeAt(i))<<4,e.length>i+2?(n[1]|=e.charCodeAt(i+1)>>4,n[2]=(15&e.charCodeAt(i+1))<<2,n[2]|=e.charCodeAt(i+2)>>6,n[3]=63&e.charCodeAt(i+2)):e.length>i+1&&(n[1]|=e.charCodeAt(i+1)>>4,n[2]=(15&e.charCodeAt(i+1))<<2);for(let e=0;e<n.length;e++){var r;let i=n[e];void 0===i?t+="=":t+=(r=i)>=0&&r<64?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[r]:void 0}}return t}(e)||""}let y=/[+/]|=+$/g,v={"+":"-","/":"_"};function A(e){return v[e]||""}function I(e){let t=null,r=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(parseInt("0x"+t,16)));try{t=window&&a.isFunction(window.btoa)?window.btoa:b}catch(e){t=b}return t(r).replace(y,A)}let E=new Map([[32,"md5"],[40,"sha1"],[64,"sha256"]]);function S(e){let t=e.match(/(\s+)?[a-f0-9]{32,64}(\s+)?/gi);return t&&t.map(a.trim)[0]}function _(e){let t=e.toLowerCase();return{md5:s.md5(t),sha1:s.sha1(t),sha256:s.sha256(t)}}function T(e){return/\S+(@|%40)\S+\.\S+/.test(e)}function O(e){let t=function(e){let t=[],r=RegExp("([\\w\\d.+-]+(@|%40)[\\w\\d-]+.[\\w\\d.-]+)","g"),i=r.exec(e);for(;i;)t.push(a.trim(i[1])),i=r.exec(e);return t}(e),r=[],i=e;for(let e=0;e<t.length;e++){let n=t[e],o=_(n);i=i.replace(n,o.md5),r.push(o)}return{stringWithoutRawEmails:i,hashesFromOriginalString:r}}function C(e,t){return"string"==typeof t&&T(a.trim(t))?"*********":t}function w(e){var t,r;return"false"!==(r="null"===(t=isNaN(+e)?e:+e)||"undefined"===t?null:t)&&("true"===r||r)}function x(e,t){if(t in e){let r=e[t];return a.isArray(r)?r.map(e=>w(D(e))):w(D(r))}}function R(e){let t,r,i,n={};return e&&-1!==(t=e.indexOf("?"))&&(r=e.slice(t+1))&&(-1===(i=r.indexOf("#"))||(r=r.slice(0,i)))&&r.split("&").forEach(function(e){if(e){let t,r=e.split("=");t=r[0];let i=2===r.length?r[1]:"true";if("[]"===t.slice(-2)&&(t=t.slice(0,-2)),t in n){let e=n[t];a.isArray(e)?e.push(i):n[t]=[e,i]}else n[t]=i}}),n}function D(e){return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)}class P{toString(){return`${this.protocol}${this.host}${this.pathname}${this.search}${this.hash}`}constructor(e){o(this,"hash",void 0),o(this,"host",void 0),o(this,"hostname",void 0),o(this,"pathname",void 0),o(this,"port",void 0),o(this,"protocol",void 0),o(this,"search",void 0);const t=e.match(/^(https?\:\/\/)?(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(null===t)throw TypeError(`Failed to parse URL: ${e}`);this.protocol=t[1]||"",this.host=t[2]||"",this.hostname=t[3]||"",this.port=t[4]||"",this.pathname=t[5]||"",this.search=t[6]||"",this.hash=t[7]||""}}let k=["items","itemids"],N=["email","emailhash","hash","hashedemail"];class B{add(e,t,r={}){let{stripEmpty:i=!0,prepend:n=!1}=r;return""===e||i&&""===t?this:n?(this.tuples.unshift([e,t]),this):(this.tuples.push([e,t]),this)}addOptional(e,t,r={}){return a.nonNull(t)?this.add(e,t,r):this}addParamsMap(e){return Object.keys(e).forEach(t=>{let r=e[t];a.nonNull(r)&&(a.isArray(r)?r.forEach(e=>this.add(t,e)):this.add(t,r))}),this}copy(){return new B(this.tuples.slice())}filteredCopy(e){return new B(this.tuples.filter(([t,r])=>e(t,r)))}toQueryString(){let e="";return this.tuples.forEach(([t,r])=>{let i=0===e.length?"?":"&";e=`${e}${i}${encodeURIComponent(t)}=${encodeURIComponent(r)}`}),e}constructor(e=[]){o(this,"tuples",void 0),this.tuples=e}}function U(e){return null===e?"":e}function j(e){if(0!==e.length){let t=new P(e);return t.pathname="",t.search="",t.toString()}}let M=["setemail","setemailhash","sethashedemail"];class V{static safeFiddle(e,t,r){try{return function(e,t){let r={};function i(e){return a.isObject(e)?e:{}}function n(e){return Object.keys(e)}let o=i(e),s=i(t);return n(o).forEach(e=>{r[e]=o[e]}),n(s).forEach(e=>{r[e]=s[e]}),r}(e,function(e){if(!a.isRecord(e))return{};{let t;return{...function(e){let t={eventSource:e};for(let r of Object.keys(e)){let i=r.toLowerCase();if(N.indexOf(i)>-1){let i=a.trim(a.safeToString(e[r])),n=function(e){let t=e.match(/\S+(@|%40)\S+\.\S+/);return t&&t.map(a.trim)[0]}(i),o=S(i);if(n){let e=_(D(n));t.hashedEmail=[e.md5,e.sha1,e.sha256];break}if(o&&function(e){let t=S(e);return!!t&&E.has(t.length)}(o)){t.hashedEmail=[o.toLowerCase()];break}}}return"string"==typeof e.userAgent&&(t.providedUserAgent=e.userAgent),"string"==typeof e.ipv4&&(t.providedIPV4=e.ipv4),"string"==typeof e.ipv6&&(t.providedIPV6=e.ipv6),t}(e),eventSource:(t={},Object.keys(e).forEach(r=>{let i=r.toLowerCase(),n=e[r];k.indexOf(i)>-1&&a.isArray(n)&&n.length>10?t[r]=n.slice(0,10):t[r]=n}),t)}}}(JSON.parse(JSON.stringify(t))))}catch(e){return console.error(e),null!=r&&r.emitErrorWithMessage("StateCombineWith","Error while extracting event data",e),{}}}static fromEvent(e,t,r){return new V(e,t,void 0,r)}static fromError(e,t,r){return new V(e,{},t,r)}setHashedEmail(e){this.data.hashedEmail=e}getHashedEmail(){return this.data.hashedEmail||[]}sendsPixel(){let e=a.isObject(this.data.eventSource)?this.data.eventSource:{},t=Object.keys(e).filter(e=>"eventname"===e.toLowerCase()||"event"===e.toLowerCase()),r=t&&t.length>=1&&t[0],i=r&&a.trim(e[r]);return!i||-1===M.indexOf(i.toLowerCase())}asHeaders(){return this.data.providedUserAgent?{"X-LI-Provided-User-Agent":this.data.providedUserAgent}:{}}asQuery(){let e=this.data,t=new B().addOptional("aid",e.appId).addOptional("did",e.distributorId).addOptional("se",a.onNonNull(e.eventSource,e=>I(JSON.stringify(e,C)))).addOptional("duid",e.liveConnectId).addOptional("tv",e.trackerVersion);if(a.nonNull(e.pageUrl)){let[r,i,n]=function(e){var t,r,i,n;let o,a,s;if(void 0===e.pageUrl||0===e.pageUrl.length)return["",!1,[]];if((void 0===(t=e).urlCollectionMode||"full"===t.urlCollectionMode)&&(void 0===t.queryParametersFilter||""===t.queryParametersFilter))return[e.pageUrl,!1,[]];let d=new P(e.pageUrl),l=(o=R(d.search),a=[],Object.keys(o).forEach(e=>{a.push([e,x(o,e)])}),a),c=(r=d,"no_path"===e.urlCollectionMode&&r.pathname.length>1),u=function(e,t){if(void 0===t.queryParametersFilter||""===t.queryParametersFilter)return[];let r=new RegExp(t.queryParametersFilter);return e.map(e=>e[0]).filter(e=>r.test(e))}(l,e);return c&&(d.pathname="/"),u.length>0&&(i=l,n=u,d.search=(s=i.filter(e=>-1===n.indexOf(e[0])).map(e=>`${e[0]}=${e[1]}`)).length>0?`?${s.join("&")}`:""),[d.toString(),c,u]}(e);t.add("pu",r).addOptional("pu_rp",i?"1":void 0).add("pu_rqp",n.join(","))}return t.addOptional("ae",a.onNonNull(e.errorDetails,e=>I(JSON.stringify(e)))),a.isArray(e.retrievedIdentifiers)&&e.retrievedIdentifiers.forEach(e=>t.add(`ext_${e.name}`,e.value)),a.isArray(e.hashesFromIdentifiers)&&e.hashesFromIdentifiers.forEach(e=>t.add("scre",`${e.md5},${e.sha1},${e.sha256}`)),t.addOptional("li_did",e.decisionIds?.join(",")).addOptional("e",e.hashedEmail?.join(",")).addOptional("us_privacy",e.usPrivacyString).addOptional("wpn",e.wrapperName).addOptional("gdpr",a.onNonNull(e.gdprApplies,e=>e?"1":"0")).addOptional("gdpr_consent",e.gdprConsent).addOptional("refr",e.referrer).addOptional("gpp_s",e.gppString).addOptional("gpp_as",e.gppApplicableSections?.join(",")).addOptional("cd",e.cookieDomain).addOptional("ic",U(e.resolvedIdCookie),{stripEmpty:!1}).addOptional("c",e.contextElements).addOptional("pip",a.onNonNull(e.providedIPV4,e=>I(e))).addOptional("pip6",a.onNonNull(e.providedIPV6,e=>I(e))),t}constructor(e,t,r,i){o(this,"data",void 0);const n=V.safeFiddle(e,t,i);r&&(n.errorDetails=r),this.data=n}}function $(e){try{return e()}catch(e){return}}let q=e=>({...e,privacyMode:!!e.gdprApplies||(e.gppApplicableSections??[]).indexOf(2)>-1});function L(e,t){if(e&&e.appId&&e.distributorId){let r=e.distributorId;delete e.distributorId,t.emitError("AppIdAndDistributorIdPresent",Error(`Event contains both appId: ${e.appId} and distributorId: ${r}. Ignoring distributorId`))}return e}let F="idCookie";class W{attributeResolutionAllowed(e){return"uid2"===e?!this.privacyMode:e!==F}filterParams(e){return e.filteredCopy((e,t)=>"resolve"!==e||!!a.isString(t)&&this.attributeResolutionAllowed(t))}enrichExtraIdentifiers(e,t){let r=t.tuples.filter(([e])=>"resolve"===e).map(([,e])=>e),i={...e};return r.indexOf(F)>-1&&(this.generateIdCookie&&this.peopleVerifiedId?i[F]=this.peopleVerifiedId:this.resolvedIdCookie&&(i[F]=this.resolvedIdCookie)),i}responseReceived(e,t){return(r,i)=>{let n={};if(r)try{let e=JSON.parse(r);a.isObject(e)&&(n=e)}catch(e){console.error("Error parsing response",e),this.eventBus.emitError("IdentityResolverParser",e)}let o=function(e){if(a.isObject(e)&&"getResponseHeader"in e&&a.isFunction(e.getResponseHeader)){let t=e.getResponseHeader("expires");if(t)return new Date(t)}}(i);e(this.enrichExtraIdentifiers(n,t),{expiresAt:o})}}buildUrl(e){return`${this.url}/${this.source}/${this.publisherId}${this.filterParams(e).toQueryString()}`}getUrl(e){let t=this.query.copy().addParamsMap(e??{});return this.buildUrl(t)}resolve(e,t,r){try{let i=this.query.copy().addParamsMap(r??{});this.calls.ajaxGet(this.buildUrl(i),this.responseReceived(e,i),t,this.timeout)}catch(e){console.error("IdentityResolve",e),t&&a.isFunction(t)&&t(e),this.eventBus&&this.eventBus.emitError("IdentityResolve",e)}}constructor(e,t,r){o(this,"eventBus",void 0),o(this,"calls",void 0),o(this,"idexConfig",void 0),o(this,"externalIds",void 0),o(this,"source",void 0),o(this,"publisherId",void 0),o(this,"url",void 0),o(this,"timeout",void 0),o(this,"extraAttributes",void 0),o(this,"requestedAttributes",void 0),o(this,"query",void 0),o(this,"privacyMode",void 0),o(this,"resolvedIdCookie",void 0),o(this,"generateIdCookie",void 0),o(this,"peopleVerifiedId",void 0),o(this,"pageUrl",void 0);const i=e||{identityResolutionConfig:{}};this.eventBus=r,this.calls=t,this.idexConfig=i.identityResolutionConfig||{},this.extraAttributes=this.idexConfig.extraAttributes||{},this.externalIds=i.retrievedIdentifiers||[],this.source=this.idexConfig.source||"unknown",this.publisherId=this.idexConfig.publisherId||"any",this.url=this.idexConfig.url||f,this.timeout=this.idexConfig.ajaxTimeout||i.ajaxTimeout||5e3,this.requestedAttributes=this.idexConfig.requestedAttributes||m,this.privacyMode=i.privacyMode??!1,this.resolvedIdCookie=i.resolvedIdCookie,this.generateIdCookie="generated"===this.idexConfig.idCookieMode,this.peopleVerifiedId=i.peopleVerifiedId,this.pageUrl=i.pageUrl,this.query=new B().addOptional("duid",i.peopleVerifiedId).addOptional("us_privacy",i.usPrivacyString).addOptional("gdpr",a.onNonNull(i.gdprApplies,e=>+!!e)).addOptional("gdpr_consent",i.gdprConsent).addOptional("did",i.distributorId).addOptional("gpp_s",i.gppString).addOptional("gpp_as",i.gppApplicableSections?.join(",")).addOptional("cd",i.cookieDomain).addOptional("ic",U(i.resolvedIdCookie),{stripEmpty:!1}).addOptional("pu",a.onNonNull(i.pageUrl,j)).addOptional("pip",a.onNonNull(this.extraAttributes.ipv4,e=>I(e))).addOptional("pip6",a.onNonNull(this.extraAttributes.ipv6,e=>I(e))),this.externalIds.forEach(e=>{this.query.add(e.name,e.value)}),this.requestedAttributes.forEach(e=>{this.query.add("resolve",e)})}}function G(e){return new a.ReplayEmitter("number"==typeof e&&e>=0?e:5)}function z(e){a.isFunction(e.emitErrorWithMessage)&&a.isFunction(e.emitError)||(e.emitErrorWithMessage=function(t,r,i={}){let n=a.wrapError(t,r,i);return e.emit(a.ERRORS_CHANNEL,n)},e.emitError=function(t,r){return e.emitErrorWithMessage(t,r.message,r)})}function H(e=5){return G(e)}function Y(e){let t=window[e].eventBus||window[l];return z(t),t}var J=Object.freeze({__proto__:null,GlobalEventBus:function(e,t,r){try{return window||r(Error("Bus can only be attached to the window, which is not present")),window&&!window[e]&&(window[e]=G(t)),z(window[e]),window[e]}catch(e){console.error("events.bus.init",e),r(e)}},LocalEventBus:H,getAvailableBus:Y});let K="_li_dcdm_c",Q="disabled",X=e=>{let t=e.privacyMode?Q:e.storageStrategy||"cookie";return{...e,storageStrategy:t}},Z=a.expiresInDays(30),ee="lidids.",et=(e,t,r)=>r.indexOf(e)===t,er=e=>e&&a.trim(e).length>0,ei="0123456789ABCDEFGHJKMNPQRSTVWXYZ",en=ei.length,eo=(n=(i="undefined"!=typeof window?window:null)&&(i.crypto||i.msCrypto))?()=>{let e=new Uint8Array(1);return n.getRandomValues(e),e[0]/255}:()=>Math.random(),ea="_lc2_fpi";function es(e){try{let t=+e;return isNaN(t)?void 0:t}catch{}}function ed(e){try{if(a.isString(e)&&e.length&&e.length>120)return`${e.substr(0,120)}...`;return`${e}`}catch{}}let el=()=>void 0;class ec{wrap(e){if(a.isObject(this.obj)){let t=this.obj[e];if(a.isFunction(t))return(...r)=>{try{return t.call(this.obj,...r)}catch(t){this.eventBus.emitErrorWithMessage(this.name,`Failed calling ${e}`,t)}}}return this.errors.push(e),el}reportErrors(){this.errors.length>0&&this.eventBus.emitErrorWithMessage(this.name,`The functions '${JSON.stringify(this.errors)}' were not provided`)}constructor(e,t,r){o(this,"obj",void 0),o(this,"name",void 0),o(this,"errors",void 0),o(this,"eventBus",void 0),this.obj=e,this.name=t,this.errors=[],this.eventBus=r}}let eu=()=>void 0;function ep(e,t,r){return a.strEqualsIgnoreCase(t,Q)?eu:e.wrap(r)}function eg(e,t,r){return a.strEqualsIgnoreCase(t,"none")?eu:ep(e,t,r)}class ef{static make(e,t,r){let i=new ec(t,"ReadOnlyStorageHandler",r),n=new ef(e,i);return i.reportErrors(),n}localStorageIsEnabled(){return!!this.minimalFunctions.localStorageIsEnabled()}getCookie(e){return this.minimalFunctions.getCookie(e)||null}getDataFromLocalStorage(e){return this.minimalFunctions.getDataFromLocalStorage(e)||null}constructor(e,t){o(this,"minimalFunctions",void 0),this.minimalFunctions={getCookie:ep(t,e,"getCookie"),getDataFromLocalStorage:ep(t,e,"getDataFromLocalStorage"),localStorageIsEnabled:eg(t,e,"localStorageIsEnabled")}}}class em extends ef{static make(e,t,r){let i=new ec(t,"StorageHandler",r),n=new em(e,i);return i.reportErrors(),n}setCookie(e,t,r,i,n){this.functions.setCookie(e,t,r,i,n)}setDataInLocalStorage(e,t){this.functions.setDataInLocalStorage(e,t)}removeDataFromLocalStorage(e){this.functions.removeDataFromLocalStorage(e)}findSimilarCookies(e){return this.functions.findSimilarCookies(e)||[]}constructor(e,t){super(e,t),o(this,"storageStrategy",void 0),o(this,"functions",void 0),this.storageStrategy=e,this.functions={setCookie:eg(t,e,"setCookie"),removeDataFromLocalStorage:eg(t,e,"removeDataFromLocalStorage"),setDataInLocalStorage:eg(t,e,"setDataInLocalStorage"),findSimilarCookies:ep(t,e,"findSimilarCookies")}}}class eh extends Error{constructor(e){super(e),this.name="ParseError"}}class eb{deleteCookie(e){this.handler.setCookie(e,"",new Date(0),"Lax",this.cookieDomain)}parseMetaRecord(e){let t,r=JSON.parse(e);if(!a.isObject(r))throw new eh("Meta record is not an object");if("e"in r&&isNaN((t=new Date(r.e)).getTime()))throw new eh("Invalid expiresAt");if(!("w"in r))throw new eh("Missing writtenAt");let i=new Date(r.w);if(isNaN(i.getTime()))throw new eh("Invalid writtenAt");return{expiresAt:t,writtenAt:i}}serializeMetaRecord(e){let t;return e.expiresAt&&(t=e.expiresAt.getTime()),JSON.stringify({w:e.writtenAt.getTime(),e:t})}getCookieRecord(e,t){let r,i=this.handler.getCookie(t);if(!i||0===i.length)return null;try{r=this.parseMetaRecord(i)}catch(r){return this.eventBus.emitErrorWithMessage("Cache","Failed reading meta from cookies",r),this.deleteCookie(e),this.deleteCookie(t),null}let n=r.expiresAt;if(n&&n.getTime()<=Date.now())return null;let o=this.handler.getCookie(e);return o?{data:o,meta:r}:null}getLSRecord(e,t){let r,i=this.handler.getDataFromLocalStorage(t);if(!i||0===i.length)return null;try{r=this.parseMetaRecord(i)}catch(r){return this.eventBus.emitErrorWithMessage("Cache","Failed reading meta from ls",r),this.handler.removeDataFromLocalStorage(e),this.handler.removeDataFromLocalStorage(t),null}let n=r.expiresAt;if(n&&n.getTime()<=Date.now())return this.handler.removeDataFromLocalStorage(e),this.handler.removeDataFromLocalStorage(t),null;let o=this.handler.getDataFromLocalStorage(e);return o?{data:o,meta:r}:null}get(e){var t;let r=(t=e,`${t}_meta`),i=this.getCookieRecord(e,r),n=this.getLSRecord(e,r);if(i&&n)if(i.meta.writtenAt.getTime()===n.meta.writtenAt.getTime())return i;else if(i.meta.writtenAt>n.meta.writtenAt)return this.handler.setDataInLocalStorage(e,i.data),this.handler.setDataInLocalStorage(r,this.serializeMetaRecord(i.meta)),i;else return this.handler.setCookie(e,n.data,n.meta.expiresAt,"Lax",this.cookieDomain),this.handler.setCookie(r,this.serializeMetaRecord(n.meta),n.meta.expiresAt,"Lax",this.cookieDomain),n;return i?(this.handler.setDataInLocalStorage(e,i.data),this.handler.setDataInLocalStorage(r,this.serializeMetaRecord(i.meta)),i):n?(this.handler.setCookie(e,n.data,n.meta.expiresAt,"Lax",this.cookieDomain),this.handler.setCookie(r,this.serializeMetaRecord(n.meta),n.meta.expiresAt,"Lax",this.cookieDomain),n):null}set(e,t,r){var i;let n=(i=e,`${i}_meta`),o=this.serializeMetaRecord({writtenAt:new Date,expiresAt:r});this.handler.setDataInLocalStorage(e,t),this.handler.setDataInLocalStorage(n,o);let s=r||a.expiresInDays(730);this.handler.setCookie(e,t,s,"Lax",this.cookieDomain),this.handler.setCookie(n,o,s,"Lax",this.cookieDomain)}constructor(e){o(this,"handler",void 0),o(this,"cookieDomain",void 0),o(this,"eventBus",void 0),this.handler=e.storageHandler,this.cookieDomain=e.cookieDomain,this.eventBus=e.eventBus}}let ey=()=>void 0;class ev{ajaxGet(e,t,r,i,n){this.functions.ajaxGet(e,t,r,i,n)}pixelGet(e,t){this.functions.pixelGet(e,t)}constructor(e,t,r){o(this,"functions",void 0);const i=new ec(e,"CallHandler",t);this.functions={ajaxGet:r?ey:i.wrap("ajaxGet"),pixelGet:r?ey:i.wrap("pixelGet")},i.reportErrors()}}function eA(e){return t=>t.idCookie?.strategy==="cookie"&&"string"==typeof t.idCookie?.name?{...t,resolvedIdCookie:e.getCookie(t.idCookie.name)}:t.idCookie?.strategy==="localStorage"&&"string"==typeof t.idCookie?.name?{...t,resolvedIdCookie:e.getDataFromLocalStorage(t.idCookie.name)}:t}let eI={};function eE(e,t,r,i){if(e&&a.isObject(e))if("config"in e)i.emitErrorWithMessage("StrayConfig","Received a config after LC has already been initialised",Error(JSON.stringify(e)));else{let n=V.fromEvent(r,e,i);n.getHashedEmail().length>0?eI.hashedEmail=n.getHashedEmail():eI.hashedEmail&&n.setHashedEmail(eI.hashedEmail),t.sendAjax(n,{onPreSend:()=>i.emit(p,"0"),onLoad:()=>i.emit(u,r)})}else i.emitErrorWithMessage("EventNotAnObject","Received event was not an object",Error(e))}function eS(e,t,r,i){try{var n,o,l,c;let u={...L(e,i),identifiersToResolve:e.identifiersToResolve||[],contextSelectors:e.contextSelectors||"",contextElementsLength:e.contextElementsLength||0},p={...n=X(q(u)),pageUrl:function(e=window){let t,r=$(()=>e.location.ancestorOrigins)||[],i=[],n=e;for(;n!==top;)i.push(n),n=n.parent;i.push(n);for(let e=i.length-1;e>=0&&!t;e--)t=$(()=>i[e].location.href),0!==e&&(t||(t=$(()=>i[e-1].document.referrer)),t||(t=r[e-1]));return t}(),referrer:function(e=window){return $(()=>e.top.document.referrer)}(),contextElements:(o=n.privacyMode,l=n.contextSelectors,c=n.contextElementsLength,!o&&l&&""!==l&&c?I(function(e,t){let r=window.document.querySelectorAll(e),i="";for(let e=0;e<r.length;e++){var n;let o=i+O(r[e].outerHTML).stringWithoutRawEmails;if(n=o,Math.ceil(4*new Blob([n]).size/3)<=t)i=o;else break}return i}(l,c)):"")},f=new ev(r,i,p.privacyMode),m=em.make(p.storageStrategy,t,i),h=(e=>({...e,cookieDomain:function(e){let t=e.getCookie(K);if(t)return t;let r=document.domain||document.location&&document.location.host||window&&window.location&&window.location.host||"localhost",i=r.split(".");for(let t=i.length;t>0;t--){let r=`.${i.slice(t-1,i.length).join(".")}`;if(e.setCookie(K,r,void 0,"Lax",r),e.getCookie(K))return r}return`.${r}`}(m)}))(p),b=new eb({storageHandler:m,eventBus:i,cookieDomain:h.cookieDomain}),y=eA(m)((e=>{let t,r=b.get(ea);if(r)t=r.data;else{let r=m.getCookie(ea);if(r)b.set(ea,r),t=r;else{let r=`${(function(e,t=12){return s.sha1(e.replace(/^\./,"")).substring(0,t)})(e.cookieDomain)}--${(function(e,t){let r;if(e>0xffffffffffff){let e;throw(e=Error("cannot encode time greater than 281474976710655")).source="Ulid",e}let i="";for(;t>0;t--)r=e%en,i=ei.charAt(r)+i,e=(e-r)/en;return i})(Date.now(),10)+function(e){let t="";for(;e>0;e--)t=function(){let e=Math.floor(eo()*en);return e===en&&(e=en-1),ei.charAt(e)}()+t;return t}(16)}`.toLocaleLowerCase();b.set(ea,r),t=b.get(ea)?.data}}return t&&m.setDataInLocalStorage(g,t),{...e,liveConnectId:t,peopleVerifiedId:t}})((e=>{function t(e,t){try{return t()}catch(t){return i.emitErrorWithMessage("DecisionsResolve",e,t),[]}}let r=t("Error while extracting new decision ids",()=>{var t;return[].concat(e.pageUrl&&(t=e.pageUrl,x(R(t),"li_did"))||[]).map(a.trim).filter(er).filter(a.isUUID).filter(et)}),n=t("Error while retrieving stored decision ids",()=>m.findSimilarCookies(ee).map(a.trim).filter(er).filter(a.isUUID));return r.forEach(t=>{try{t&&m.setCookie(`${ee}${t}`,t,Z,"Lax",e.cookieDomain)}catch(e){i.emitErrorWithMessage("DecisionsResolve","Error while storing new decision id",e)}}),{...e,decisionIds:r.concat(n).filter(et)}})((e=>{try{return{...e,...function(e,t){let r=[],i=[];for(let n=0;n<e.length;n++){let o=e[n],s=t.getCookie(o)||t.getDataFromLocalStorage(o);if(s){let e=O(a.safeToString(s));r.push({name:o,value:e.stringWithoutRawEmails}),i=i.concat(e.hashesFromOriginalString)}}return{retrievedIdentifiers:r,hashesFromIdentifiers:function(e){let t=new Set,r=[];for(let i=0;i<e.length;i++)t.has(e[i].md5)||(r.push(e[i]),t.add(e[i].md5));return r}(i)}}(function(e){let t=[];e&&(a.isArray(e)?t=e:a.isString(e)&&(t=e.split(",")));for(let e=0;e<t.length;e++)t[e]=t[e].trim();return t}(e.identifiersToResolve),m)}}catch(t){return i.emitError("IdentifiersEnricher",t),{...e,retrievedIdentifiers:[],hashesFromIdentifiers:[]}}})(h)))),v=new d({collectorUrl:u.collectorUrl,ajaxTimeout:u.ajaxTimeout,eventBus:i,callHandler:f});try{i.on(a.ERRORS_CHANNEL,e=>{let t=V.fromError(y,a.isRecord(e)?{message:ed(e.message)||"",name:ed(e.name)||"",stackTrace:ed(e.stack),lineNumber:es(e.lineNumber),columnNumber:es(e.columnNumber),fileName:ed(e.fileName)}:{message:"Unknown message",name:"Unknown name"},i);v.sendPixel(t)})}catch(e){console.error("handlers.error.register",e)}let A=new W(y,f,i),E=(...e)=>(function(e,t,r,i){try{e.forEach(e=>{a.isArray(e)?e.forEach(e=>eE(e,t,r,i)):eE(e,t,r,i)})}catch(e){console.error("Error sending events",e),i.emitErrorWithMessage("LCPush","Failed sending an event",e)}})(e,v,y,i);return{push:E,fire:()=>E({}),peopleVerifiedId:y.peopleVerifiedId,ready:!0,resolve:A.resolve.bind(A),resolutionCallUrl:A.getUrl.bind(A),config:u,eventBus:i,storageHandler:m,cache:b}}catch(e){console.error(e),i.emitErrorWithMessage("LCConstruction","Failed to build LC",e)}}function e_(e,t,r,i){let n,o=a.isObject(e)&&e||{},s=i||H();try{let e;n=o.globalVarName?function(e,t,r,i){let n=window[e.globalVarName]||[],o=function(e){try{if(window&&window[e.globalVarName]&&window[e.globalVarName].ready){let t=window[e.globalVarName].config&&function(e,t){if(e.appId!==t.appId||e.wrapperName!==t.wrapperName||e.collectorUrl!==t.collectorUrl)return{appId:[e.appId,t.appId],wrapperName:[e.wrapperName,t.wrapperName],collectorUrl:[e.collectorUrl,t.collectorUrl]}}(window[e.globalVarName].config,e);if(t){let r=Error();r.name="ConfigSent",r.message="Additional configuration received";let i=Y(e.globalVarName);window[e.globalVarName].eventBus=i,i.emitErrorWithMessage("LCDuplication",JSON.stringify(t),r)}return window[e.globalVarName]}}catch(e){console.error("Could not initialize error bus")}}(e)||eS(e,t,r,i)||n;if(a.isArray(n))for(let e=0;e<n.length;e++)o.push(n[e]);return window[o.config.globalVarName]=o,window.liQ_instances=window.liQ_instances||[],0===window.liQ_instances.filter(e=>e.config.globalVarName===o.config.globalVarName).length&&window.liQ_instances.push(o),o}(o,t,r,s):(e=eS(o,t,r,s),window.liQ_instances=window.liQ_instances||[],window.liQ_instances.push(e),e)}catch(e){console.error(e),s.emitErrorWithMessage("LCConstruction","Failed to build LC",e)}return n}function eT(e,t,r,i,n){try{let o={...L(e,i),identifiersToResolve:e.identifiersToResolve||[]},s=X(q(o)),d=ef.make(s.storageStrategy,t,i),l=new ev(r,i,s.privacyMode),c=(e=>{try{return{...e,retrievedIdentifiers:function(e,t){let r=a.isArray(e)?e:a.safeToString(e).split(","),i=[];for(let e=0;e<r.length;e++){var n;let o=a.trim(r[e]),s=t.getCookie(o)||t.getDataFromLocalStorage(o);!s||(n=a.safeToString(s),/\S+(@|%40)\S+\.\S+/.test(n))||T(a.safeToString(s))||i.push({name:o,value:a.safeToString(s)})}return i}(e.identifiersToResolve,d)}}catch(t){return i.emitError("IdentifiersEnrich",t),{...e,retrievedIdentifiers:[]}}})(eA(d)((e=>{try{return{...e,peopleVerifiedId:e.peopleVerifiedId||d.getDataFromLocalStorage(g)||void 0}}catch(t){return i.emitError("PeopleVerifiedEnrich",t),e}})(s))),u=new W(c,l,i);return{push:e=>n(e),fire:()=>n({}),peopleVerifiedId:c.peopleVerifiedId,ready:!0,resolve:u.resolve.bind(u),resolutionCallUrl:u.getUrl.bind(u),config:o,eventBus:i,storageHandler:d}}catch(e){console.error(e)}}function eO(e,t,r,i){let n=a.isObject(e)&&e||{},o=i||H();try{let e,i,a;return n.globalVarName?(e=window[n.globalVarName]=window[n.globalVarName]||[],i=eT(n,t,r,o,e.push.bind(e)),window.liQ_instances=window.liQ_instances||[],0===window.liQ_instances.filter(e=>e.config.globalVarName===i.config.globalVarName).length&&window.liQ_instances.push(i),i):(a=eT(n,t,r,o,()=>{}),window.liQ_instances=window.liQ_instances||[],window.liQ_instances.push(a),a)}catch(e){console.error(e)}return{}}t.LiveConnect=function(e,t,r,i,n){let o=n||H();return("minimal"===i?eO:e_)(a.isObject(e)&&e||{},t,r,o)},t.MinimalLiveConnect=eO,t.QueryBuilder=B,t.StandardLiveConnect=e_,t.StorageHandlerBackedCache=eb,t.WrappedStorageHandler=em,t.consts=h,t.encodeIdCookie=U,t.eventBus=J},3612:function(e,t,r){"use strict";r.r(t),r.d(t,{md5:()=>o,sha1:()=>a,sha256:()=>g});for(var i=[],n=0;n<64;)i[n]=0|0x100000000*Math.sin(++n%Math.PI);function o(e){var t,r,o,a=[t=0x67452301,r=0xefcdab89,~t,~r],s=[],d=unescape(encodeURI(e))+"",l=d.length;for(e=--l/4+2|15,s[--e]=8*l;~l;)s[l>>2]|=d.charCodeAt(l)<<8*l--;for(n=d=0;n<e;n+=16){for(l=a;d<64;l=[o=l[3],t+((o=l[0]+[t&r|~t&o,o&t|~o&r,t^r^o,r^(t|~o)][l=d>>4]+i[d]+~~s[n|15&[d,5*d+1,3*d+5,7*d][l]])<<(l=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*l+d++%4])|o>>>-l),t,r])t=0|l[1],r=l[2];for(d=4;d;)a[--d]+=l[d]}for(e="";d<32;)e+=(a[d>>3]>>4*(1^d++)&15).toString(16);return e}function a(e){var t,r,i,n,o,a=[],s=[r=0x67452301,i=0xefcdab89,~r,~i,0xc3d2e1f0],d=[],l=unescape(encodeURI(e))+"",c=l.length;for(d[e=--c/4+2|15]=8*c;~c;)d[c>>2]|=l.charCodeAt(c)<<8*~c--;for(t=c=0;t<e;t+=16){for(r=s;c<80;r=[r[4]+(a[c]=c<16?~~d[t+c]:2*l|l<0)+0x5a827999+[i&n|~i&o,l=0x14577208+(i^n^o),0x34994343+(i&n|i&o|n&o),l+0x5b88d635][c++/5>>2]+((l=r[0])<<5|l>>>27),l,i<<30|i>>>2,n,o])l=a[c-3]^a[c-8]^a[c-14]^a[c-16],i=r[1],n=r[2],o=r[3];for(c=5;c;)s[--c]+=r[c]}for(l="";c<40;)l+=(s[c>>3]>>4*(7-c++)&15).toString(16);return l}for(var s,d=18,l=[],c=[];d>1;d--)for(s=d;s<320;)l[s+=d]=1;function u(e,t){return 0x100000000*Math.pow(e,1/t)|0}for(s=0;s<64;)l[++d]||(c[s]=u(d,2),l[s++]=u(d,3));function p(e,t){return e>>>t|e<<-t}function g(e){var t=c.slice(d=s=0,8),r=[],i=unescape(encodeURI(e))+"",n=i.length;for(r[e=--n/4+2|15]=8*n;~n;)r[n>>2]|=i.charCodeAt(n)<<8*~n--;for(n=[];d<e;d+=16){for(u=t.slice();s<64;u.unshift(i+(p(i=u[0],2)^p(i,13)^p(i,22))+(i&u[1]^u[1]&u[2]^u[2]&i)))u[3]+=i=0|(n[s]=s<16?~~r[s+d]:(p(i=n[s-2],17)^p(i,19)^i>>>10)+n[s-7]+(p(i=n[s-15],7)^p(i,18)^i>>>3)+n[s-16])+u.pop()+(p(i=u[4],6)^p(i,11)^p(i,25))+(i&u[5]^~i&u[6])+l[s++];for(s=8;s;)t[--s]+=u[s]}for(i="";s<64;)i+=(t[s>>3]>>4*(7-s++)&15).toString(16);return i}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.rv=()=>"1.5.8",r.ruid="bundler=rspack@1.5.8",(()=>{"use strict";var e=r(1980);r(6586),r(4272),r(9172),r(7162),r(7101),r(2958),r(9461),r(4378),r(8001),r(1860),r(2703),r(7482),r(3252),r(4416),r(5461),r(7067),r(4597),r(7674),r(3884),r(5470),r(2177),r(4290),r(9222),r(3638),r(6583),r(8268),r(9228),r(9750),r(7376),r(9606),r(6033),r(3173),r(8316),r(9530),r(803),r(4065),r(1054),r(1263),r(1753),r(6577),r(6985),r(4784),r(9121),r(2917),r(6129),r(1757),r(2355),r(3682),r(5016),r(2265),r(2253),r(5538),r(3793),e.default.processQueue()})()})();