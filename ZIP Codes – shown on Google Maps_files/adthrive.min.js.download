window.adthrive.core = {"partners":[{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"33across","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.995},{"name":"pmp","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.72},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_amazon","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.7},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_appnexus","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.5},{"name":"stickyOutstream","type":"percent","value":0.6},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_blis","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.98},{"name":"stickyOutstream","type":"percent","value":0.45},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_cadent","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.96},{"name":"stickyOutstream","type":"percent","value":0.65},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_gumgum","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.98},{"name":"stickyOutstream","type":"percent","value":0.51},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_ix","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.99},{"name":"stickyOutstream","type":"percent","value":0.6},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_medianet","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.85}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_ogury","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.99},{"name":"stickyOutstream","type":"percent","value":0.6},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_openx","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.98},{"name":"stickyOutstream","type":"percent","value":0.15},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_pubmatic","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.67},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_rubicon","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_seedtag","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.98},{"name":"stickyOutstream","type":"percent","value":0.6},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_sharethrough","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.99},{"name":"stickyOutstream","type":"percent","value":0.59},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_triplelift","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.95},{"name":"stickyOutstream","type":"percent","value":0.55},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_unruly","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.99},{"name":"stickyOutstream","type":"percent","value":0.25},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_verizon","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.99},{"name":"stickyOutstream","type":"percent","value":1},{"name":"instream","type":"percent","value":0.9}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_verve","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.6},{"name":"instream","type":"percent","value":0.97}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"a_yieldmo","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.85},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"amx","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.8},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"appnexus","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"blis","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.92}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"chicory","enabled":true},{"secondary":false,"cpm":[{"name":"stickyOutstream","type":"percent","value":0.01},{"name":"instream","type":"percent","value":0.01}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"connatix","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.98}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"conversant","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.955},{"name":"stickyOutstream","type":"percent","value":0.8},{"name":"instream","type":"percent","value":0.98}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"crit_ss","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.965},{"name":"stickyOutstream","type":"percent","value":0.8},{"name":"instream","type":"percent","value":0.975}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"criteo","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.01}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"flipp","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"pmp","type":"percent","value":1,"deals":[{"name":"G-TRUSTX-b827d08da2714822","type":"percent","value":0.8}]},{"name":"stickyOutstream","type":"percent","value":0.64}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"grid","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.4},{"name":"pmp","type":"percent","value":1,"deals":[{"name":"g-trustx-69dcdccd456a4d4a","type":"percent","value":1}]}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"gridvid","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"gumgum","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.965},{"name":"pmp","type":"percent","value":1,"deals":[{"name":"9311192021991","type":"percent","value":0.97},{"name":"9311192021992","type":"percent","value":0.97},{"name":"20701262024997","type":"flat","value":1},{"name":"20701262024998","type":"flat","value":1},{"name":"502908152024991","type":"percent","value":0.95},{"name":"502908152024992","type":"percent","value":0.95},{"name":"502908152024993","type":"percent","value":0.95},{"name":"502908152024994","type":"percent","value":0.95},{"name":"PAN57412092024991","type":"flat","value":2.5},{"name":"PAN57412092024992","type":"flat","value":2.5},{"name":"6411202024991","type":"percent","value":0.95},{"name":"6411202024992","type":"percent","value":0.95},{"name":"1611202024993","type":"percent","value":0.95},{"name":"1611202024994","type":"percent","value":0.95},{"name":"391601082025992","type":"percent","value":0.95},{"name":"391601082025994","type":"percent","value":0.95},{"name":"323801102025991","type":"percent","value":0.95},{"name":"323801102025992","type":"percent","value":0.95},{"name":"260301102025991","type":"percent","value":0.95},{"name":"260301092025991","type":"percent","value":0.95},{"name":"260301092025992","type":"percent","value":0.95},{"name":"260301092025993","type":"percent","value":0.95},{"name":"260301092025994","type":"percent","value":0.95},{"name":"504501092025992","type":"percent","value":0.95},{"name":"504501092025991","type":"percent","value":0.95},{"name":"504501092025993","type":"percent","value":0.95},{"name":"504501092025994","type":"percent","value":0.95},{"name":"504501102025991","type":"percent","value":0.95},{"name":"795301152025991","type":"percent","value":0.95},{"name":"795301152025992","type":"percent","value":0.95},{"name":"260301212025991","type":"percent","value":0.95},{"name":"260301212025992","type":"percent","value":0.95},{"name":"260301212025993","type":"percent","value":0.95},{"name":"260301212025994","type":"percent","value":0.95},{"name":"260301212025995","type":"percent","value":0.95},{"name":"504501212025991","type":"percent","value":0.95},{"name":"504501212025992","type":"percent","value":0.95},{"name":"504501212025993","type":"percent","value":0.95},{"name":"504501212025994","type":"percent","value":0.95},{"name":"504501212025995","type":"percent","value":0.95},{"name":"795301232025991","type":"percent","value":0.95},{"name":"795301232025992","type":"percent","value":0.95},{"name":"303207242023993","type":"percent","value":1},{"name":"825204302025991","type":"percent","value":0.95},{"name":"9904092025995","type":"flat","value":0.05},{"name":"9904092025996","type":"flat","value":0.05},{"name":"9904092025991","type":"flat","value":0.05},{"name":"9904092025992","type":"flat","value":0.05},{"name":"9904092025993","type":"flat","value":0.05},{"name":"9904092025994","type":"flat","value":0.05},{"name":"9906032025991","type":"flat","value":0.05},{"name":"9906032025992","type":"flat","value":0.05},{"name":"1609032025991","type":"percent","value":0.95},{"name":"VDR515110152025991","type":"flat","value":3.5},{"name":"154510202025991","type":"percent","value":0.9},{"name":"154510202025992","type":"percent","value":0.9},{"name":"482510202025993","type":"percent","value":0.9},{"name":"482410202025994","type":"percent","value":0.9},{"name":"9910202025995","type":"percent","value":0.9},{"name":"9910202025996","type":"percent","value":0.9},{"name":"BB217911172025991","type":"flat","value":3.5},{"name":"BB217911172025992","type":"flat","value":3.5},{"name":"TWV217911172025993","type":"flat","value":3.5},{"name":"VDR217911172025994","type":"flat","value":3.5}]},{"name":"stickyOutstream","type":"percent","value":0.7},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"ix","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.95},{"name":"pmp","type":"percent","value":1,"deals":[{"name":"323801102025991","type":"percent","value":0.95},{"name":"323801102025992","type":"percent","value":0.95},{"name":"504501092025992","type":"percent","value":0.95},{"name":"504501092025991","type":"percent","value":0.95},{"name":"504501092025993","type":"percent","value":0.95},{"name":"504501092025994","type":"percent","value":0.95},{"name":"504501102025991","type":"percent","value":0.95},{"name":"795301152025991","type":"percent","value":0.95},{"name":"795301152025992","type":"percent","value":0.95},{"name":"504501212025991","type":"percent","value":0.95},{"name":"504501212025992","type":"percent","value":0.95},{"name":"504501212025993","type":"percent","value":0.95},{"name":"504501212025994","type":"percent","value":0.95},{"name":"504501212025995","type":"percent","value":0.95},{"name":"795301232025991","type":"percent","value":0.95},{"name":"795301232025992","type":"percent","value":0.95},{"name":"BB913503072025991","type":"flat","value":3.6},{"name":"BB913503072025992","type":"flat","value":3.6},{"name":"PAN913503072025993","type":"flat","value":2.6},{"name":"PAN913503072025994","type":"flat","value":2.6},{"name":"9910202025995","type":"percent","value":0.9},{"name":"9910202025996","type":"percent","value":0.9},{"name":"BB217911172025991","type":"flat","value":3.5},{"name":"BB217911172025992","type":"flat","value":3.5},{"name":"TWV217911172025993","type":"flat","value":3.5},{"name":"VDR217911172025994","type":"flat","value":3.5}]},{"name":"stickyOutstream","type":"percent","value":0.7},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"ix_ss","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"kargo","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.01},{"name":"instream","type":"percent","value":0.01}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"krgo_ss","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.9},{"name":"stickyOutstream","type":"percent","value":0.6},{"name":"instream","type":"percent","value":0.975}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"medianet","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.98},{"name":"stickyOutstream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"nativo","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.45},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"ntvo_ss","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.86}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"ogury","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"pmp","type":"percent","value":1,"deals":[{"name":"OX-caf-ypSBrR","type":"flat","value":1}]},{"name":"stickyOutstream","type":"percent","value":0.5},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"openx","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.995},{"name":"pmp","type":"percent","value":1,"deals":[{"name":"OX-caf-ypSBrR","type":"flat","value":1}]},{"name":"stickyOutstream","type":"percent","value":0.6},{"name":"instream","type":"percent","value":0.95}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"opnx_ss","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.6},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"ozone","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.9},{"name":"pmp","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.6},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"pubm_ss","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.9},{"name":"pmp","type":"percent","value":1,"deals":[{"name":"PM-WBUD-7484","type":"percent","value":0.95},{"name":"PM-RDZV-6197","type":"percent","value":0.95},{"name":"PM-PZJT-8450","type":"percent","value":0.95},{"name":"PM-KHSU-8994","type":"percent","value":0.95}]},{"name":"stickyOutstream","type":"percent","value":0.6},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"pubmatic","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.01}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"rise","enabled":false},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.99},{"name":"pmp","type":"percent","value":1,"deals":[{"name":"1509070","type":"percent","value":0.85},{"name":"1509072","type":"percent","value":0.85},{"name":"1623874","type":"percent","value":0.85},{"name":"1751662","type":"percent","value":0.85},{"name":"1751664","type":"percent","value":0.85},{"name":"1751666","type":"percent","value":0.85},{"name":"1751668","type":"percent","value":0.85},{"name":"1751670","type":"percent","value":0.85},{"name":"1751672","type":"percent","value":0.85},{"name":"1751674","type":"percent","value":0.85},{"name":"1751676","type":"percent","value":0.85},{"name":"1751678","type":"percent","value":0.85},{"name":"1751680","type":"percent","value":0.85},{"name":"1751682","type":"percent","value":0.85},{"name":"1751684","type":"percent","value":0.88},{"name":"1751686","type":"percent","value":0.85},{"name":"1751688","type":"percent","value":0.88},{"name":"1751690","type":"percent","value":0.85},{"name":"1751692","type":"percent","value":0.88},{"name":"1751694","type":"percent","value":0.85},{"name":"1751696","type":"percent","value":0.88},{"name":"1751698","type":"percent","value":0.85},{"name":"1751700","type":"percent","value":0.88},{"name":"1751702","type":"percent","value":0.88},{"name":"1751706","type":"percent","value":0.88},{"name":"1751708","type":"percent","value":0.85},{"name":"1751710","type":"percent","value":0.88},{"name":"1751712","type":"percent","value":0.85},{"name":"1751714","type":"percent","value":0.88},{"name":"1751716","type":"percent","value":0.85},{"name":"1751718","type":"percent","value":0.85},{"name":"1792390","type":"percent","value":0.85},{"name":"1909612","type":"percent","value":0.9},{"name":"1910078","type":"percent","value":0.9},{"name":"1913794","type":"percent","value":0.9},{"name":"1914770","type":"percent","value":0.9},{"name":"1915132","type":"percent","value":0.9},{"name":"1915136","type":"percent","value":0.9},{"name":"1915534","type":"percent","value":0.9},{"name":"1915928","type":"percent","value":0.9},{"name":"1915930","type":"percent","value":0.9},{"name":"1916326","type":"percent","value":0.9},{"name":"1916722","type":"percent","value":0.9},{"name":"1917116","type":"percent","value":0.9},{"name":"1917120","type":"percent","value":0.9},{"name":"1917122","type":"percent","value":0.9},{"name":"1917124","type":"percent","value":0.9},{"name":"1917126","type":"percent","value":0.9},{"name":"1917128","type":"percent","value":0.9},{"name":"1917130","type":"percent","value":0.9},{"name":"1917136","type":"percent","value":0.88},{"name":"1917138","type":"percent","value":0.88},{"name":"1917142","type":"percent","value":0.9},{"name":"1917144","type":"percent","value":0.9},{"name":"2076190","type":"percent","value":0.9},{"name":"2256280","type":"percent","value":0.9},{"name":"2256286","type":"percent","value":0.9},{"name":"2356286","type":"percent","value":0.9},{"name":"2394816","type":"percent","value":0.9},{"name":"2394818","type":"percent","value":0.9},{"name":"2734898","type":"percent","value":0.9},{"name":"2734902","type":"percent","value":0.9},{"name":"2734904","type":"percent","value":0.9},{"name":"2734908","type":"percent","value":0.9},{"name":"2734910","type":"percent","value":0.9},{"name":"2734914","type":"percent","value":0.9},{"name":"2734918","type":"percent","value":0.9},{"name":"2734920","type":"percent","value":0.9},{"name":"2734922","type":"percent","value":0.9},{"name":"2734924","type":"percent","value":0.9},{"name":"2734926","type":"percent","value":0.9},{"name":"2734928","type":"percent","value":0.9},{"name":"2734930","type":"percent","value":0.9},{"name":"2734932","type":"percent","value":0.9},{"name":"2734934","type":"percent","value":0.9},{"name":"2734936","type":"percent","value":0.9},{"name":"2734938","type":"percent","value":0.9},{"name":"2734940","type":"percent","value":0.9},{"name":"2734942","type":"percent","value":0.9},{"name":"2734944","type":"percent","value":0.9},{"name":"2734946","type":"percent","value":0.9},{"name":"2734948","type":"percent","value":0.9},{"name":"2734950","type":"percent","value":0.9},{"name":"2734952","type":"percent","value":0.9},{"name":"2734954","type":"percent","value":0.9},{"name":"2734956","type":"percent","value":0.9},{"name":"2734958","type":"percent","value":0.9},{"name":"2734960","type":"percent","value":0.9},{"name":"2734962","type":"percent","value":0.9},{"name":"2734964","type":"percent","value":0.9},{"name":"2734966","type":"percent","value":0.9},{"name":"2734968","type":"percent","value":0.9},{"name":"2734970","type":"percent","value":0.9},{"name":"2734972","type":"percent","value":0.9},{"name":"2734974","type":"percent","value":0.9},{"name":"2734976","type":"percent","value":0.9},{"name":"3331634","type":"percent","value":0.85},{"name":"3494148","type":"percent","value":0.9},{"name":"3494152","type":"percent","value":0.9},{"name":"3548098","type":"percent","value":0.85},{"name":"3561446","type":"percent","value":0.9},{"name":"3561448","type":"percent","value":0.9},{"name":"3766690","type":"percent","value":0.85},{"name":"3769100","type":"percent","value":0.95},{"name":"3769114","type":"percent","value":0.95},{"name":"3771346","type":"flat","value":2.6},{"name":"3771346","type":"percent","value":0.85},{"name":"3773930","type":"percent","value":0.95},{"name":"3773940","type":"percent","value":0.95},{"name":"3775844","type":"percent","value":0.95},{"name":"3775846","type":"percent","value":0.95},{"name":"3777796","type":"percent","value":0.95},{"name":"3777798","type":"percent","value":0.95},{"name":"3781560","type":"percent","value":0.85},{"name":"3782740","type":"percent","value":0.85},{"name":"3785356","type":"percent","value":0.85},{"name":"3785372","type":"percent","value":0.98},{"name":"3785374","type":"percent","value":0.98},{"name":"3786320","type":"percent","value":0.7},{"name":"3788982","type":"percent","value":0.85},{"name":"3789904","type":"percent","value":0.95},{"name":"3789906","type":"percent","value":0.95},{"name":"3789908","type":"percent","value":0.95},{"name":"3789910","type":"percent","value":0.95},{"name":"3789912","type":"percent","value":0.95},{"name":"3791994","type":"percent","value":0.9},{"name":"3791996","type":"percent","value":0.9},{"name":"3795840","type":"percent","value":0.85},{"name":"3795842","type":"percent","value":0.85},{"name":"3795846","type":"percent","value":0.85},{"name":"3795848","type":"percent","value":0.85},{"name":"3796850","type":"percent","value":0.85},{"name":"3796852","type":"percent","value":0.85},{"name":"3796856","type":"percent","value":0.85},{"name":"3796858","type":"percent","value":0.85},{"name":"3804310","type":"flat","value":2.6},{"name":"3804310","type":"percent","value":0.85},{"name":"3804318","type":"flat","value":2.6},{"name":"3804318","type":"percent","value":0.85},{"name":"3804322","type":"flat","value":2.6},{"name":"3804322","type":"percent","value":0.85},{"name":"3804346","type":"percent","value":0.85},{"name":"3806000","type":"percent","value":0.85},{"name":"3806898","type":"percent","value":0.9},{"name":"3806910","type":"percent","value":0.9},{"name":"3806912","type":"percent","value":0.9},{"name":"3806914","type":"percent","value":0.9},{"name":"3806916","type":"percent","value":0.9},{"name":"3806918","type":"percent","value":0.9},{"name":"3806920","type":"percent","value":0.9},{"name":"3806922","type":"percent","value":0.9},{"name":"3806924","type":"percent","value":0.9},{"name":"3806926","type":"percent","value":0.9},{"name":"3806928","type":"percent","value":0.9},{"name":"3806932","type":"percent","value":0.9},{"name":"3806934","type":"percent","value":0.9},{"name":"3806936","type":"percent","value":0.9},{"name":"3806938","type":"percent","value":0.9},{"name":"3806944","type":"percent","value":0.9},{"name":"3806950","type":"percent","value":0.9},{"name":"3806954","type":"percent","value":0.9},{"name":"3808872","type":"percent","value":0.95},{"name":"3809720","type":"percent","value":0.95},{"name":"3809726","type":"percent","value":0.95},{"name":"3809728","type":"percent","value":0.95},{"name":"3809730","type":"percent","value":0.95},{"name":"3809758","type":"percent","value":0.95},{"name":"3809760","type":"percent","value":0.95},{"name":"3809762","type":"percent","value":0.95},{"name":"3809764","type":"percent","value":0.95},{"name":"3809766","type":"percent","value":0.95},{"name":"3809768","type":"percent","value":0.95},{"name":"3810612","type":"percent","value":0.95},{"name":"3810614","type":"percent","value":0.95},{"name":"3810616","type":"percent","value":0.95},{"name":"3810618","type":"percent","value":0.95},{"name":"3810840","type":"percent","value":0.9},{"name":"3810842","type":"percent","value":0.9},{"name":"3812436","type":"percent","value":0.85},{"name":"3815642","type":"percent","value":0.85},{"name":"3815646","type":"percent","value":0.85},{"name":"3815652","type":"percent","value":0.85},{"name":"3815654","type":"percent","value":0.85},{"name":"3815656","type":"percent","value":0.85},{"name":"3815658","type":"percent","value":0.85},{"name":"3815660","type":"percent","value":0.85},{"name":"3819099","type":"percent","value":0.85},{"name":"3819105","type":"percent","value":0.85},{"name":"3822045","type":"percent","value":0.9},{"name":"3822047","type":"percent","value":0.9}]},{"name":"stickyOutstream","type":"percent","value":0.7},{"name":"instream","type":"percent","value":0.985}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"rubi_ss","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.99},{"name":"pmp","type":"percent","value":1,"deals":[{"name":"1509070","type":"percent","value":0.85},{"name":"1509072","type":"percent","value":0.85},{"name":"1623874","type":"percent","value":0.85},{"name":"1688128","type":"percent","value":0.98},{"name":"1751440","type":"percent","value":0.85},{"name":"1751442","type":"percent","value":0.85},{"name":"1751444","type":"percent","value":0.85},{"name":"1751448","type":"percent","value":0.85},{"name":"1751450","type":"percent","value":0.85},{"name":"1751452","type":"percent","value":0.85},{"name":"1751454","type":"percent","value":0.85},{"name":"1751456","type":"percent","value":0.85},{"name":"1751472","type":"percent","value":0.85},{"name":"1751474","type":"percent","value":0.85},{"name":"1751476","type":"percent","value":0.85},{"name":"1751478","type":"percent","value":0.85},{"name":"1751480","type":"percent","value":0.85},{"name":"1751482","type":"percent","value":0.85},{"name":"1751632","type":"percent","value":0.85},{"name":"1751634","type":"percent","value":0.85},{"name":"1751636","type":"percent","value":0.85},{"name":"1751638","type":"percent","value":0.88},{"name":"1751640","type":"percent","value":0.85},{"name":"1751642","type":"percent","value":0.85},{"name":"1751644","type":"percent","value":0.85},{"name":"1751646","type":"percent","value":0.85},{"name":"1751648","type":"percent","value":0.85},{"name":"1751650","type":"percent","value":0.85},{"name":"1751652","type":"percent","value":0.85},{"name":"1751654","type":"percent","value":0.85},{"name":"1751656","type":"percent","value":0.85},{"name":"1751660","type":"percent","value":0.85},{"name":"1751662","type":"percent","value":0.85},{"name":"1751664","type":"percent","value":0.85},{"name":"1751666","type":"percent","value":0.85},{"name":"1751668","type":"percent","value":0.85},{"name":"1751670","type":"percent","value":0.85},{"name":"1751672","type":"percent","value":0.85},{"name":"1751674","type":"percent","value":0.85},{"name":"1751676","type":"percent","value":0.85},{"name":"1751678","type":"percent","value":0.85},{"name":"1751680","type":"percent","value":0.85},{"name":"1751682","type":"percent","value":0.85},{"name":"1751684","type":"percent","value":0.88},{"name":"1751686","type":"percent","value":0.85},{"name":"1751688","type":"percent","value":0.88},{"name":"1751690","type":"percent","value":0.85},{"name":"1751692","type":"percent","value":0.88},{"name":"1751694","type":"percent","value":0.85},{"name":"1751696","type":"percent","value":0.88},{"name":"1751698","type":"percent","value":0.85},{"name":"1751700","type":"percent","value":0.88},{"name":"1751702","type":"percent","value":0.88},{"name":"1751706","type":"percent","value":0.88},{"name":"1751708","type":"percent","value":0.85},{"name":"1751710","type":"percent","value":0.88},{"name":"1751712","type":"percent","value":0.85},{"name":"1751714","type":"percent","value":0.88},{"name":"1751716","type":"percent","value":0.85},{"name":"1751718","type":"percent","value":0.85},{"name":"1792390","type":"percent","value":0.85},{"name":"1813144","type":"percent","value":0.85},{"name":"1909612","type":"percent","value":0.9},{"name":"1910078","type":"percent","value":0.9},{"name":"1913794","type":"percent","value":0.9},{"name":"1914770","type":"percent","value":0.9},{"name":"1915132","type":"percent","value":0.9},{"name":"1915136","type":"percent","value":0.9},{"name":"1915534","type":"percent","value":0.9},{"name":"1915928","type":"percent","value":0.9},{"name":"1915930","type":"percent","value":0.9},{"name":"1916326","type":"percent","value":0.9},{"name":"1916722","type":"percent","value":0.9},{"name":"1917116","type":"percent","value":0.9},{"name":"1917120","type":"percent","value":0.9},{"name":"1917122","type":"percent","value":0.9},{"name":"1917124","type":"percent","value":0.9},{"name":"1917126","type":"percent","value":0.9},{"name":"1917128","type":"percent","value":0.9},{"name":"1917130","type":"percent","value":0.9},{"name":"1917132","type":"percent","value":0.88},{"name":"1917134","type":"percent","value":0.88},{"name":"1917136","type":"percent","value":0.88},{"name":"1917138","type":"percent","value":0.88},{"name":"1917142","type":"percent","value":0.9},{"name":"1917144","type":"percent","value":0.9},{"name":"2076190","type":"percent","value":0.9},{"name":"2256280","type":"percent","value":0.9},{"name":"2256286","type":"percent","value":0.9},{"name":"2270364","type":"percent","value":0.98},{"name":"2270368","type":"percent","value":0.98},{"name":"2270374","type":"percent","value":0.98},{"name":"2302618","type":"percent","value":0.88},{"name":"2302620","type":"percent","value":0.88},{"name":"2302622","type":"percent","value":0.88},{"name":"2356286","type":"percent","value":0.9},{"name":"2394816","type":"percent","value":0.9},{"name":"2394818","type":"percent","value":0.9},{"name":"2569122","type":"percent","value":0.85},{"name":"2734898","type":"percent","value":0.9},{"name":"2734902","type":"percent","value":0.9},{"name":"2734904","type":"percent","value":0.9},{"name":"2734908","type":"percent","value":0.9},{"name":"2734910","type":"percent","value":0.9},{"name":"2734914","type":"percent","value":0.9},{"name":"2734918","type":"percent","value":0.9},{"name":"2734920","type":"percent","value":0.9},{"name":"2734922","type":"percent","value":0.9},{"name":"2734924","type":"percent","value":0.9},{"name":"2734926","type":"percent","value":0.9},{"name":"2734928","type":"percent","value":0.9},{"name":"2734930","type":"percent","value":0.9},{"name":"2734932","type":"percent","value":0.9},{"name":"2734934","type":"percent","value":0.9},{"name":"2734936","type":"percent","value":0.9},{"name":"2734938","type":"percent","value":0.9},{"name":"2734940","type":"percent","value":0.9},{"name":"2734942","type":"percent","value":0.9},{"name":"2734944","type":"percent","value":0.9},{"name":"2734946","type":"percent","value":0.9},{"name":"2734948","type":"percent","value":0.9},{"name":"2734950","type":"percent","value":0.9},{"name":"2734952","type":"percent","value":0.9},{"name":"2734954","type":"percent","value":0.9},{"name":"2734956","type":"percent","value":0.9},{"name":"2734958","type":"percent","value":0.9},{"name":"2734960","type":"percent","value":0.9},{"name":"2734962","type":"percent","value":0.9},{"name":"2734964","type":"percent","value":0.9},{"name":"2734966","type":"percent","value":0.9},{"name":"2734968","type":"percent","value":0.9},{"name":"2734970","type":"percent","value":0.9},{"name":"2734972","type":"percent","value":0.9},{"name":"2734974","type":"percent","value":0.9},{"name":"2734976","type":"percent","value":0.9},{"name":"2735402","type":"percent","value":0.85},{"name":"2735404","type":"percent","value":0.85},{"name":"3286020","type":"percent","value":0.85},{"name":"3317338","type":"percent","value":0.95},{"name":"3317342","type":"percent","value":0.95},{"name":"3331634","type":"percent","value":0.85},{"name":"3494148","type":"percent","value":0.9},{"name":"3494152","type":"percent","value":0.9},{"name":"3548098","type":"percent","value":0.85},{"name":"3561446","type":"percent","value":0.9},{"name":"3561448","type":"percent","value":0.9},{"name":"3577514","type":"percent","value":0.95},{"name":"3578846","type":"percent","value":0.95},{"name":"3652906","type":"percent","value":0.95},{"name":"3766690","type":"percent","value":0.85},{"name":"3769100","type":"percent","value":0.95},{"name":"3769110","type":"percent","value":0.95},{"name":"3769114","type":"percent","value":0.95},{"name":"3769116","type":"percent","value":0.95},{"name":"3771346","type":"flat","value":2.6},{"name":"3771346","type":"percent","value":0.85},{"name":"3772884","type":"percent","value":0.95},{"name":"3772888","type":"percent","value":0.95},{"name":"3773468","type":"percent","value":0.85},{"name":"3773470","type":"percent","value":0.85},{"name":"3773474","type":"percent","value":0.85},{"name":"3773476","type":"percent","value":0.85},{"name":"3773494","type":"percent","value":0.95},{"name":"3773496","type":"percent","value":0.95},{"name":"3773498","type":"percent","value":0.95},{"name":"3773500","type":"percent","value":0.95},{"name":"3773502","type":"percent","value":0.95},{"name":"3773504","type":"percent","value":0.95},{"name":"3773506","type":"percent","value":0.95},{"name":"3773508","type":"percent","value":0.95},{"name":"3773510","type":"percent","value":0.95},{"name":"3773516","type":"percent","value":0.95},{"name":"3773930","type":"percent","value":0.95},{"name":"3773940","type":"percent","value":0.95},{"name":"3773944","type":"percent","value":0.95},{"name":"3775844","type":"percent","value":0.95},{"name":"3775846","type":"percent","value":0.95},{"name":"3777796","type":"percent","value":0.95},{"name":"3777798","type":"percent","value":0.95},{"name":"3779114","type":"percent","value":0.85},{"name":"3779118","type":"percent","value":0.85},{"name":"3779120","type":"percent","value":0.85},{"name":"3779122","type":"percent","value":0.85},{"name":"3781560","type":"percent","value":0.85},{"name":"3782740","type":"percent","value":0.85},{"name":"3783588","type":"percent","value":0.85},{"name":"3784862","type":"percent","value":0.85},{"name":"3785356","type":"percent","value":0.85},{"name":"3785372","type":"percent","value":0.98},{"name":"3785374","type":"percent","value":0.98},{"name":"3786320","type":"percent","value":0.7},{"name":"3786326","type":"percent","value":0.85},{"name":"3786328","type":"flat","value":2.6},{"name":"3786328","type":"percent","value":0.85},{"name":"3786482","type":"percent","value":0.85},{"name":"3786484","type":"percent","value":0.85},{"name":"3788980","type":"percent","value":0.85},{"name":"3788982","type":"percent","value":0.85},{"name":"3789904","type":"percent","value":0.95},{"name":"3789906","type":"percent","value":0.95},{"name":"3789908","type":"percent","value":0.95},{"name":"3789910","type":"percent","value":0.95},{"name":"3789912","type":"percent","value":0.95},{"name":"3791994","type":"percent","value":0.9},{"name":"3791996","type":"percent","value":0.9},{"name":"3793184","type":"percent","value":0.85},{"name":"3794974","type":"flat","value":2.6},{"name":"3794974","type":"percent","value":0.85},{"name":"3794976","type":"flat","value":2.6},{"name":"3794976","type":"percent","value":0.85},{"name":"3794978","type":"percent","value":0.85},{"name":"3794980","type":"percent","value":0.85},{"name":"3795380","type":"flat","value":0.5},{"name":"3795382","type":"flat","value":0.75},{"name":"3795838","type":"percent","value":0.85},{"name":"3795840","type":"percent","value":0.85},{"name":"3795842","type":"percent","value":0.85},{"name":"3795844","type":"percent","value":0.85},{"name":"3795846","type":"percent","value":0.85},{"name":"3795848","type":"percent","value":0.85},{"name":"3799340","type":"percent","value":0.85},{"name":"3800300","type":"flat","value":0.5},{"name":"3800338","type":"flat","value":0.5},{"name":"3800340","type":"flat","value":0.5},{"name":"3800344","type":"flat","value":0.5},{"name":"3800346","type":"flat","value":0.5},{"name":"3800748","type":"percent","value":0.85},{"name":"3801546","type":"percent","value":0.85},{"name":"3801548","type":"percent","value":0.85},{"name":"3804310","type":"flat","value":2.6},{"name":"3804310","type":"percent","value":0.85},{"name":"3804318","type":"flat","value":2.6},{"name":"3804318","type":"percent","value":0.85},{"name":"3804322","type":"flat","value":2.6},{"name":"3804322","type":"percent","value":0.85},{"name":"3804346","type":"percent","value":0.85},{"name":"3805186","type":"flat","value":2.6},{"name":"3805186","type":"percent","value":0.85},{"name":"3806000","type":"percent","value":0.85},{"name":"3806898","type":"percent","value":0.9},{"name":"3806910","type":"percent","value":0.9},{"name":"3806912","type":"percent","value":0.9},{"name":"3806914","type":"percent","value":0.9},{"name":"3806916","type":"percent","value":0.9},{"name":"3806918","type":"percent","value":0.9},{"name":"3806920","type":"percent","value":0.9},{"name":"3806922","type":"percent","value":0.9},{"name":"3806924","type":"percent","value":0.9},{"name":"3806926","type":"percent","value":0.9},{"name":"3806928","type":"percent","value":0.9},{"name":"3806932","type":"percent","value":0.9},{"name":"3806934","type":"percent","value":0.9},{"name":"3806936","type":"percent","value":0.9},{"name":"3806938","type":"percent","value":0.9},{"name":"3806944","type":"percent","value":0.9},{"name":"3806950","type":"percent","value":0.9},{"name":"3806954","type":"percent","value":0.9},{"name":"3808872","type":"percent","value":0.95},{"name":"3809720","type":"percent","value":0.95},{"name":"3809726","type":"percent","value":0.95},{"name":"3809728","type":"percent","value":0.95},{"name":"3809730","type":"percent","value":0.95},{"name":"3809758","type":"percent","value":0.95},{"name":"3809760","type":"percent","value":0.95},{"name":"3809762","type":"percent","value":0.95},{"name":"3809764","type":"percent","value":0.95},{"name":"3809766","type":"percent","value":0.95},{"name":"3809768","type":"percent","value":0.95},{"name":"3810612","type":"percent","value":0.95},{"name":"3810614","type":"percent","value":0.95},{"name":"3810616","type":"percent","value":0.95},{"name":"3810618","type":"percent","value":0.95},{"name":"3810840","type":"percent","value":0.9},{"name":"3810842","type":"percent","value":0.9},{"name":"3812436","type":"percent","value":0.85},{"name":"3815642","type":"percent","value":0.85},{"name":"3815646","type":"percent","value":0.85},{"name":"3815652","type":"percent","value":0.85},{"name":"3815654","type":"percent","value":0.85},{"name":"3815656","type":"percent","value":0.85},{"name":"3815658","type":"percent","value":0.85},{"name":"3815660","type":"percent","value":0.85},{"name":"3819099","type":"percent","value":0.85},{"name":"3819105","type":"percent","value":0.85},{"name":"3822045","type":"percent","value":0.9},{"name":"3822047","type":"percent","value":0.9},{"name":"3823535","type":"percent","value":0.85},{"name":"3824583","type":"percent","value":0.85}]},{"name":"stickyOutstream","type":"percent","value":0.7},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"rubicon","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.8},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"seedtag","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.7},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"share_ss","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.75},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"sharethrough","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.95},{"name":"stickyOutstream","type":"percent","value":0.8},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"stackadapt","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.95}],"s2s":[],"bidder_name":"teads","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.7},{"name":"instream","type":"percent","value":0.99}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"tripl_ss","enabled":true},{"secondary":true,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.7},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"triplelift","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.945},{"name":"pmp","type":"percent","value":1,"deals":[{"name":"opath-192-1-1xp5kjuyqd","type":"flat","value":0.05},{"name":"opath-192-1-0wnry1o4v7","type":"flat","value":0.05},{"name":"opath-192-1-zg76pd36n7","type":"flat","value":0.05},{"name":"opath-192-1-94bwcov1yw","type":"flat","value":0.05},{"name":"opath-192-1-b39525vs4e","type":"flat","value":0.05},{"name":"opath-192-1-bmrt132xdj","type":"flat","value":0.05},{"name":"opath-192-1-dk4u379mru","type":"flat","value":0.05},{"name":"opath-192-1-ldm7nks9tq","type":"flat","value":0.05}]},{"name":"stickyOutstream","type":"percent","value":0.5},{"name":"instream","type":"percent","value":0.95}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"ttd","enabled":true},{"secondary":false,"cpm":[{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"under_ss","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"undertone","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"unruly","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.75},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"yah_ss","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":1},{"name":"stickyOutstream","type":"percent","value":0.75},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"yahoossp","enabled":true},{"secondary":false,"cpm":[{"name":"default","type":"percent","value":0.99},{"name":"stickyOutstream","type":"percent","value":0.75},{"name":"instream","type":"percent","value":1}],"s2s":[{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"display"},{"s2s_value":0,"endpoint_value":null,"endpoint":null,"media_type":"video"}],"bidder_name":"yieldmo","enabled":true}],"predictiveAnalysis":[{"mobile":"1","error_rate":"0.9707389651182013","hb_crid":"hos8f4c1","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9041554097517046","hb_crid":"7p13xdyo","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"jrj3nppy","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9460134196112463","hb_crid":"6smspbyv","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9194718043078255","hb_crid":"5mfz5f7t","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"ez88ig73","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9070763697905648","hb_crid":"2179:584126999128663346","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9026345933562429","hb_crid":"vmc100jo","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9830908675451291","hb_crid":"kqrt09v5","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9904381505688695","hb_crid":"5510:58t5bs2a","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9887626872885452","hb_crid":"5510:58t5bs2a","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9307983682983683","hb_crid":"4804:139132-430778","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9494724327537524","hb_crid":"4804:139132-430778","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9021021476815664","hb_crid":"z27mq88u","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.907841926520531","hb_crid":"689295667","chrome":"0","bidder":"opnx_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9793207784425255","hb_crid":"z27mq88u","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9266044734180061","hb_crid":"8000199","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"cjhz7wws","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9808803912850156","hb_crid":"4804:139132-430718","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.962478184991274","hb_crid":"4804:139132-430718","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9248800397109922","hb_crid":"2nfzx8b8","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9184906520747834","hb_crid":"rvev53yp","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9980718667835232","hb_crid":"4804:139132-430812","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9885416666666667","hb_crid":"4804:139132-430812","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9168029178719658","hb_crid":"682603099","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"ez88ig73","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9680961566998071","hb_crid":"682601675","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9022957821676455","hb_crid":"4118480118","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9647887323943662","hb_crid":"kqrt09v5","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.940014571359184","hb_crid":"4804:139132-430730","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9225847728726807","hb_crid":"7917671","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9826054865297085","hb_crid":"9v6g51k7","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.90381662940717","hb_crid":"hkx806z8","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9207459207459208","hb_crid":"4804:139132-430832","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9162941893539212","hb_crid":"vmc100jo","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9201973613643677","hb_crid":"8g3q2ti5","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9489613865171403","hb_crid":"7918709","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9544614816183262","hb_crid":"4804:139132-430730","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9277249057281379","hb_crid":"4804:139132-430730","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9187139323990107","hb_crid":"4804:139132-430730","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9356605065023956","hb_crid":"4804:139132-430850","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9448175712470502","hb_crid":"km-crea-191055","chrome":"1","bidder":"kargo","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.943010922906443","hb_crid":"4804:139132-430748","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9075258988421694","hb_crid":"4804:139132-430748","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9843875100080064","hb_crid":"y7is7avg","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.993942453306411","hb_crid":"686167654","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9988562573789846","hb_crid":"682602152","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"jrj3nppy","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9219008044323691","hb_crid":"fkhskzpq","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9685518586848187","hb_crid":"24551181","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9385153197614641","hb_crid":"v5jxx2tf","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.98676399026764","hb_crid":"4804:139132-430808","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9912499388962214","hb_crid":"4804:139132-430808","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.993896484375","hb_crid":"684030284","chrome":"1","bidder":"opnx_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9400531045751634","hb_crid":"hno8raxm","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9994878098750256","hb_crid":"51174757","chrome":"0","bidder":"ix_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9873274068469832","hb_crid":"4804:139132-430740","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9285094568800971","hb_crid":"2249:691019077","chrome":"0","bidder":"rubi_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9802422082528998","hb_crid":"fkhskzpq","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"cjhz7wws","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9990174404323262","hb_crid":"682602449","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.979995320542817","hb_crid":"fmhedavf","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9683190458442043","hb_crid":"fkhskzpq","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9998243251156527","hb_crid":"682602531","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"km3st5x8","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9409991386735572","hb_crid":"unut6guj","chrome":"1","bidder":"share_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9855606306173567","hb_crid":"2249:683730647","chrome":"1","bidder":"rubi_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9532136105860114","hb_crid":"1psgq2mi","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9903153419156726","hb_crid":"682601675","chrome":"0","bidder":"pubmatic","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9832621082621082","hb_crid":"5989_30516_t22587689","chrome":"0","bidder":"triplelift","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9985533453887884","hb_crid":"5989_30516_t22587689","chrome":"0","bidder":"triplelift","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9248916092833461","hb_crid":"nyv24oy0","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9159077109896782","hb_crid":"4804:139132-430814","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9253644314868804","hb_crid":"x5zb637s","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9574934268185802","hb_crid":"hhlzu777","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9837533156498673","hb_crid":"py1esdhp","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9899760489665572","hb_crid":"5510:58t5bs2a","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9886605244507441","hb_crid":"5510:58t5bs2a","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9284560723514211","hb_crid":"cf8qwrkb","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.98187985361064","hb_crid":"xmhlbydi","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9148796857096088","hb_crid":"4804:139132-430754","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9615213720785568","hb_crid":"9v6g51k7","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9828490718321227","hb_crid":"682602449","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9896006292056279","hb_crid":"2307:7w3pmfau","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.995691550162666","hb_crid":"2307:7w3pmfau","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.921026814911707","hb_crid":"4804:139132-430784","chrome":"0","bidder":"rubi_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9905530642750374","hb_crid":"5510:58t5bs2a","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9888975108935713","hb_crid":"5510:58t5bs2a","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9155045118949959","hb_crid":"n1dfcsqh","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9904711884753902","hb_crid":"682603680","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.988708651399491","hb_crid":"wpv9sub4","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9863557036331906","hb_crid":"wpv9sub4","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"69v5cv3c","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9922722544211622","hb_crid":"1609896988","chrome":"0","bidder":"opnx_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9934533551554828","hb_crid":"1609896988","chrome":"0","bidder":"opnx_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9071119356833642","hb_crid":"4804:139132-430832","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9412217659137577","hb_crid":"4804:139132-430832","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9098316858135186","hb_crid":"bhagvdv8","chrome":"1","bidder":"gumgum","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9875308104973177","hb_crid":"bhagvdv8","chrome":"1","bidder":"gumgum","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9287527193618564","hb_crid":"5989_30516_t24207302","chrome":"0","bidder":"tripl_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9009995149832146","hb_crid":"677492185","chrome":"0","bidder":"appnexus","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9996054189135868","hb_crid":"682602531","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9215986099044309","hb_crid":"5mfz5f7t","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9487079600051941","hb_crid":"5989_30516_t23913912","chrome":"0","bidder":"triplelift","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9955223880597015","hb_crid":"5989_30516_t22587590","chrome":"0","bidder":"triplelift","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9810626953484096","hb_crid":"5989_30516_t22587590","chrome":"0","bidder":"triplelift","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.984286523216308","hb_crid":"cr-9cp24m5y1eriw1","chrome":"0","bidder":"unruly","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9901737396753062","hb_crid":"cr-9cp24m5y1eriw1","chrome":"0","bidder":"unruly","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9129183806505271","hb_crid":"1e65i6iq","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9510331163317294","hb_crid":"ib4oijtd","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9112817231819151","hb_crid":"x5zb637s","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"27ltgbnv","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9913648940375202","hb_crid":"5510:0pji6him","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9886294724075197","hb_crid":"5510:0pji6him","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"69v5cv3c","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.954708413001912","hb_crid":"682602531","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9778900043111413","hb_crid":"682603391","chrome":"0","bidder":"pubmatic","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9103535353535354","hb_crid":"km-crea-187653","chrome":"1","bidder":"kargo","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9701706811293668","hb_crid":"5989_30516_t22588970","chrome":"0","bidder":"triplelift","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9716199869731088","hb_crid":"f3agisuo","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.964172304293801","hb_crid":"7916366","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9060756821950852","hb_crid":"8066481","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9462820852077269","hb_crid":"682603105","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9146628948609147","hb_crid":"9v6g51k7","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.965074782469225","hb_crid":"3658_149669_t25642511","chrome":"0","bidder":"triplelift","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9851297919889977","hb_crid":"6vcc3vsk","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9894493227145872","hb_crid":"682602531","chrome":"0","bidder":"pubmatic","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9602649006622517","hb_crid":"6smspbyv","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.920963936636333","hb_crid":"4804:139132-430778","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9328167138906907","hb_crid":"wjnfp1dl","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9661664392905867","hb_crid":"5jsk8kf6","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9818700722733246","hb_crid":"xot35rca","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9114570614570614","hb_crid":"m4112of8","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9204213858252139","hb_crid":"9nrx4lzs","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9531355036973015","hb_crid":"684449814","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9230157327205233","hb_crid":"7955257","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9239441092410289","hb_crid":"7918709","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9016907361747094","hb_crid":"unut6guj","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9636491228070175","hb_crid":"km-crea-191145","chrome":"0","bidder":"kargo","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9839738066517318","hb_crid":"5510:yvbz809y","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9855022437003798","hb_crid":"5510:yvbz809y","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.97435025173493","hb_crid":"4804:139132-430724","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9817645849043669","hb_crid":"4804:139132-430724","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9595767769940314","hb_crid":"4804:139132-430766","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9329992086520706","hb_crid":"4804:139132-430766","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9821998320738875","hb_crid":"xkpgypcx","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"cjhz7wws","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"69v5cv3c","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9900598546387345","hb_crid":"5510:yvbz809y","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9910131593024499","hb_crid":"5510:yvbz809y","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.989147530670022","hb_crid":"5510:58t5bs2a","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9944655281467426","hb_crid":"5510:58t5bs2a","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9830255946363008","hb_crid":"xdfrr9m6","chrome":"1","bidder":"gumgum","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9793348401679044","hb_crid":"4804:139132-430808","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.986303728216998","hb_crid":"4804:139132-430808","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9876938436662362","hb_crid":"5510:0pji6him","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9912112565616084","hb_crid":"5510:0pji6him","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9141145892191208","hb_crid":"682602994","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9097826086956522","hb_crid":"656510750","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9858900422914264","hb_crid":"4804:139132-430808","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9859279480179938","hb_crid":"4804:139132-430808","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9632541445906683","hb_crid":"4804:139132-430718","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9291130893504781","hb_crid":"4804:139132-430718","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9755007153075823","hb_crid":"cn7bqrtn","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9086503648415306","hb_crid":"8dko5tai","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9301003130790365","hb_crid":"202490","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9567294929652244","hb_crid":"4804:139132-430844","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9744491009868865","hb_crid":"4804:139132-430844","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9653349394365255","hb_crid":"5510:7w3pmfau","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9868646097010331","hb_crid":"5510:7w3pmfau","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.993283776734481","hb_crid":"5510:yvbz809y","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9892843226393038","hb_crid":"5510:yvbz809y","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9597523219814241","hb_crid":"xot35rca","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9529534762153685","hb_crid":"693189299","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9214596003475239","hb_crid":"7916366","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9885502609866981","hb_crid":"2307:7w3pmfau","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.994747543205693","hb_crid":"2307:7w3pmfau","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9554123019070642","hb_crid":"km-crea-190383","chrome":"0","bidder":"kargo","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9721823168342693","hb_crid":"hos8f4c1","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9914187109411435","hb_crid":"4804:139132-430736","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9856268545994066","hb_crid":"4804:139132-430736","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9884914463452567","hb_crid":"5510:7w3pmfau","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9957031599677737","hb_crid":"5510:7w3pmfau","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.964756140975436","hb_crid":"7916397","chrome":"1","bidder":"yah_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9816922896373665","hb_crid":"8g3q2ti5","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9619492184737252","hb_crid":"7955257","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9997863019553371","hb_crid":"682603391","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9980842911877394","hb_crid":"nrv3bxbr","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9793820224719101","hb_crid":"4804:139132-430808","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9794370470251138","hb_crid":"4804:139132-430808","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9593047901653243","hb_crid":"4804:139132-430784","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9637168895324077","hb_crid":"4804:139132-430784","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9811244248783556","hb_crid":"x5zb637s","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9456489308801591","hb_crid":"4804:139132-430724","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9092757703738464","hb_crid":"4804:139132-430790","chrome":"0","bidder":"rubi_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9859713759387841","hb_crid":"640230665","chrome":"0","bidder":"pubmatic","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.988374273392087","hb_crid":"684030284","chrome":"0","bidder":"opnx_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9271189723065005","hb_crid":"202491","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.972664633457585","hb_crid":"683485345","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9879167198875974","hb_crid":"5510:7w3pmfau","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.960341702053689","hb_crid":"5510:7w3pmfau","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9948728754038488","hb_crid":"y7is7avg","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9693580891340976","hb_crid":"5510:7w3pmfau","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9887615838247683","hb_crid":"5510:7w3pmfau","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.98862758087667","hb_crid":"5510:yvbz809y","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9819059107358263","hb_crid":"5510:yvbz809y","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9917384426085428","hb_crid":"682602449","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9055982436882547","hb_crid":"4go6dobt","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9635426608131322","hb_crid":"x5zb637s","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9052598392097104","hb_crid":"25_dcrrzl2y","chrome":"0","bidder":"kargo","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9331859911594695","hb_crid":"7640023","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9711551934663811","hb_crid":"4804:139132-430724","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9878845879741809","hb_crid":"4804:139132-430724","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9422658829213302","hb_crid":"4804:139132-430856","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9332138784818375","hb_crid":"cf8qwrkb","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9904148074698397","hb_crid":"5510:0pji6him","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9796485492439722","hb_crid":"5510:0pji6him","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9900291120815138","hb_crid":"682604223","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9984834719407366","hb_crid":"y7is7avg","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9038986650485437","hb_crid":"4804:139132-430718","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9833579317013589","hb_crid":"f3agisuo","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9733832807570978","hb_crid":"yesv785c","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9271716876279614","hb_crid":"rcoihog0","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9263552225650066","hb_crid":"4804:139132-430778","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9460773281721204","hb_crid":"4804:139132-430778","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9232029292734631","hb_crid":"4804:139132-430724","chrome":"0","bidder":"rubi_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.988502024291498","hb_crid":"5510:0pji6him","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9848735428179581","hb_crid":"5510:0pji6him","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"69v5cv3c","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9085730165346673","hb_crid":"55762968","chrome":"1","bidder":"ix_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9892221344240959","hb_crid":"5510:7w3pmfau","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9960976808406076","hb_crid":"5510:7w3pmfau","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9989314336598397","hb_crid":"682604223","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9690693921463153","hb_crid":"5510:7w3pmfau","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.988477366255144","hb_crid":"5510:7w3pmfau","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"ez88ig73","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.999475982532751","hb_crid":"682603680","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9675477885307526","hb_crid":"4804:139132-430856","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9390581717451524","hb_crid":"687765002","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"jrj3nppy","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.911272648071766","hb_crid":"knec23u2","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9722966934763181","hb_crid":"4oz75ge1","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9247424480530819","hb_crid":"691579759","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9893057431740964","hb_crid":"5510:0pji6him","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9906033528712547","hb_crid":"5510:0pji6him","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9377044305679453","hb_crid":"4804:139132-430748","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9097906819716408","hb_crid":"xdfrr9m6","chrome":"1","bidder":"gumgum","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9855178466939731","hb_crid":"xdfrr9m6","chrome":"1","bidder":"gumgum","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9732353218358307","hb_crid":"y7is7avg","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9035026269702277","hb_crid":"691579759","chrome":"1","bidder":"opnx_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9099660868613937","hb_crid":"fkhskzpq","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9638876504681231","hb_crid":"8027702","chrome":"0","bidder":"yah_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.948107001900307","hb_crid":"8027702","chrome":"0","bidder":"yah_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9041681768756796","hb_crid":"xot35rca","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9918493362148811","hb_crid":"683485345","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9713197872421843","hb_crid":"684030284","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9027545909849749","hb_crid":"4804:139132-430784","chrome":"0","bidder":"rubi_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"km3st5x8","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9100933676754669","hb_crid":"682603099","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9619234691950289","hb_crid":"687765002","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"urweondi","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"27ltgbnv","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9246845108914075","hb_crid":"8028125","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9583157103247333","hb_crid":"z27mq88u","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9480553043028815","hb_crid":"682601675","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9927018879898462","hb_crid":"686167654","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.960635593220339","hb_crid":"3658_149669_t25642306","chrome":"0","bidder":"triplelift","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9180708890180128","hb_crid":"7918708","chrome":"0","bidder":"yah_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9679932260795936","hb_crid":"h4u6sp7z","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9611747851002865","hb_crid":"km-crea-191146","chrome":"0","bidder":"kargo","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9139800387736052","hb_crid":"4804:139132-430778","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.970805458376808","hb_crid":"62126260","chrome":"0","bidder":"ix_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9586649965655178","hb_crid":"62126260","chrome":"0","bidder":"ix_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9882646011326703","hb_crid":"684030284","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9190319310694374","hb_crid":"8000193","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9625891881468149","hb_crid":"8028125","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9902820777433781","hb_crid":"5510:58t5bs2a","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9890062698617195","hb_crid":"5510:58t5bs2a","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9012521794262165","hb_crid":"8066481","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9309396264659041","hb_crid":"4804:139132-430736","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9240551042034617","hb_crid":"2179:584126999128663346","chrome":"1","bidder":"rubi_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9898785425101214","hb_crid":"2307:0pji6him","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9950822452094286","hb_crid":"2307:0pji6him","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9713785599394456","hb_crid":"kkrehd7p","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9414613378745144","hb_crid":"682602152","chrome":"0","bidder":"pubmatic","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9821188852494227","hb_crid":"bhagvdv8","chrome":"1","bidder":"gumgum","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"urweondi","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.981021897810219","hb_crid":"j17l47ej","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9471975393028025","hb_crid":"2974:7998215","chrome":"0","bidder":"rubi_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9851870879356109","hb_crid":"6vcc3vsk","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9770433784494715","hb_crid":"4804:139132-430784","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9795732438264205","hb_crid":"4804:139132-430784","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9002367540207364","hb_crid":"4804:139132-430724","chrome":"0","bidder":"rubi_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"jrj3nppy","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9198382824480692","hb_crid":"2974:7998212","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.994304791830322","hb_crid":"5510:0pji6him","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9878542510121457","hb_crid":"5510:0pji6him","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9966006683675303","hb_crid":"5510:7w3pmfau","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9886147331199339","hb_crid":"5510:7w3pmfau","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9809435277713223","hb_crid":"33996294","chrome":"1","bidder":"ix_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9827706635622817","hb_crid":"33996294","chrome":"1","bidder":"ix_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9585306540381415","hb_crid":"682602531","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.965425057921939","hb_crid":"689295666","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9305861309851403","hb_crid":"8gwseezg","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9684501544966662","hb_crid":"uk7k77jn","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9717868338557993","hb_crid":"ur8q3hfn","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9781370567701635","hb_crid":"2307:7w3pmfau","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9908803275637447","hb_crid":"2307:7w3pmfau","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9629683627350926","hb_crid":"ulpa4gfz","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9307144673277397","hb_crid":"682601675","chrome":"1","bidder":"openx","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9145503666538016","hb_crid":"9v6g51k7","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9861899703285835","hb_crid":"4804:139132-430724","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.990216271884655","hb_crid":"4804:139132-430724","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9271176867153763","hb_crid":"rc0stcfs","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9983761953006814","hb_crid":"f3agisuo","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9635458039030464","hb_crid":"4804:139132-430718","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9848155706229565","hb_crid":"4804:139132-430718","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9899321514554608","hb_crid":"4804:139132-430736","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9914511179307322","hb_crid":"4804:139132-430736","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9140060965827049","hb_crid":"srcbuth8","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9464754241735176","hb_crid":"5b2r6res","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9763609122690194","hb_crid":"cr-9cqtxk3yv8riw1","chrome":"0","bidder":"unruly","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9260083449235049","hb_crid":"x0epom9s","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9906581383605454","hb_crid":"cr-9cp24m5y1eriw1","chrome":"0","bidder":"unruly","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9941722972972973","hb_crid":"cr-9cp24m5y1eriw1","chrome":"0","bidder":"unruly","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.999873625679262","hb_crid":"2249:683721984","chrome":"0","bidder":"rubi_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9229998887281629","hb_crid":"fmhedavf","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9835992512701667","hb_crid":"4804:139132-430736","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9726751873071838","hb_crid":"4804:139132-430736","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9503870513722731","hb_crid":"689295667","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9580054035005287","hb_crid":"7916407","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.926159793814433","hb_crid":"202489","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9488493618731786","hb_crid":"5989_30516_t24207302","chrome":"0","bidder":"triplelift","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9894943431078272","hb_crid":"682601675","chrome":"1","bidder":"pubmatic","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"urweondi","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9063016285107387","hb_crid":"691580306","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9767584097859328","hb_crid":"682604223","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.932753029527223","hb_crid":"683484862","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9137708213670305","hb_crid":"eem0w91u","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9266343390804598","hb_crid":"1psgq2mi","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9909941115344648","hb_crid":"1609896988","chrome":"0","bidder":"opnx_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9923690600069373","hb_crid":"1609896988","chrome":"0","bidder":"opnx_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9144281807945954","hb_crid":"7640023","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9537627118644068","hb_crid":"km-crea-190183","chrome":"0","bidder":"kargo","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"km3st5x8","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9748207171314741","hb_crid":"682603680","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.989510170573748","hb_crid":"5510:7w3pmfau","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9961432506887052","hb_crid":"5510:7w3pmfau","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"27ltgbnv","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9872461433313806","hb_crid":"5510:0pji6him","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9887908273029532","hb_crid":"5510:0pji6him","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"ez88ig73","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9158739595719382","hb_crid":"4804:139132-430718","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9639169882156637","hb_crid":"4804:139132-430718","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.970569874253099","hb_crid":"4804:139132-430784","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.936494277600895","hb_crid":"4804:139132-430784","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9538525913085062","hb_crid":"nyv24oy0","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.917494910789127","hb_crid":"8000189","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9836120063008512","hb_crid":"5510:0pji6him","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9882822709452592","hb_crid":"5510:0pji6him","chrome":"1","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9954244685344221","hb_crid":"f3agisuo","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9713711702661979","hb_crid":"k3mcu6d3","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9476964769647697","hb_crid":"683484862","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.915178876804159","hb_crid":"xot35rca","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9015492529894231","hb_crid":"2662_193870_t24983064","chrome":"0","bidder":"tripl_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9869634779860549","hb_crid":"4804:139132-430784","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9713080496860603","hb_crid":"4804:139132-430784","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9743300952649115","hb_crid":"jxjj2dy3","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"27ltgbnv","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9276215134753443","hb_crid":"61396493","chrome":"0","bidder":"ix_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"km3st5x8","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"1.0","hb_crid":"urweondi","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9432526814666999","hb_crid":"2974:7998212","chrome":"0","bidder":"rubi_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9873077668363662","hb_crid":"4804:139132-430724","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9947199346869232","hb_crid":"4804:139132-430724","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9038406420177701","hb_crid":"4804:139132-430850","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9706063404124345","hb_crid":"4804:139132-430850","chrome":"0","bidder":"rubicon","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9852497485752598","hb_crid":"684030284","chrome":"1","bidder":"opnx_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9452003023431594","hb_crid":"682602531","chrome":"1","bidder":"opnx_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9008359285363056","hb_crid":"4804:139132-430778","chrome":"0","bidder":"rubi_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9141367959034382","hb_crid":"rd79cg9b","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9364817865641589","hb_crid":"7916380","chrome":"0","bidder":"openx","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9611066311022889","hb_crid":"683485345","chrome":"0","bidder":"opnx_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9958129797627355","hb_crid":"682602152","chrome":"1","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9606057155869293","hb_crid":"iglkyd9m","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9164733178654292","hb_crid":"rd79cg9b","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9722708547888774","hb_crid":"684030284","chrome":"0","bidder":"opnx_ss","report_date":"2025-11-24"},{"mobile":"0","error_rate":"0.9121566047047212","hb_crid":"682601671","chrome":"0","bidder":"pubm_ss","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9982971960494949","hb_crid":"iq0twhux","chrome":"0","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"0","error_rate":"1.0","hb_crid":"cjhz7wws","chrome":"1","bidder":"ttd","report_date":"2025-11-24"},{"mobile":"1","error_rate":"0.9005539095710421","hb_crid":"xjlvo5up","chrome":"0","bidder":"ttd","report_date":"2025-11-24"}],"country":"US","region":"FL","coreExperiments":[{"variants":[{"value":"off","weight":100},{"value":"extrashort","weight":0},{"value":"short","weight":0},{"value":"medium","weight":0},{"value":"long","weight":0},{"value":"mix","weight":0}],"type":"weightedChoice","lookupKey":"ADC","key":"AdDurationControl","abgroup":"adc"},{"variants":[{"value":"b","weight":0},{"value":"w","weight":100},{"value":"g25","weight":0}],"type":"weightedChoice","lookupKey":"TCMB2","key":"TopCenterMobileBackground","abgroup":"tcmb2"},{"variants":[{"value":46,"weight":50,"abvalue":"60s"},{"value":61,"weight":0,"abvalue":"75s"},{"value":76,"weight":50,"abvalue":"90s"}],"type":"weightedChoice","lookupKey":"ACPOD","key":"AccompanyingContentAdPodDuration","abgroup":"acpod"},{"label":"BDPL","variants":[{"weight":99}],"type":"bernoulliTrial","lookupKey":"KGSPLT","key":"KargoSpotlightExperiment","abgroup":"ksp"},{"variants":[{"value":"ay","weight":50},{"value":"rpbs","weight":50}],"type":"weightedChoice","lookupKey":"NMSE","key":"NonMultiServerEligible","abgroup":"nmse"},{"variants":[{"value":"animatedFooter","weight":50},{"value":"expandableFooter","weight":50},{"value":"inRecipeRecommendationDesktop","weight":50},{"value":"inRecipeRecommendationMobile","weight":50},{"value":"largeFormatsDesktop","weight":50},{"value":"largeFormatsMobile","weight":50},{"value":"nativeDesktopContent","weight":50},{"value":"nativeDesktopRecipe","weight":50},{"value":"nativeDesktopSidebar","weight":50},{"value":"nativeMobileContent","weight":50},{"value":"nativeMobileRecipe","weight":50},{"value":"nativeDesktopHeader","weight":50},{"value":"nativeDesktopBelowPost","weight":50},{"value":"nativeMobileHeader","weight":50},{"value":"nativeMobileBelowPost","weight":50},{"value":"outstreamDesktop","weight":50},{"value":"outstreamMobile","weight":50},{"value":"sponsorTileDesktop","weight":50},{"value":"sponsorTileMobile","weight":50},{"value":"expandableCatalogAdsDesktop","weight":50},{"value":"expandableCatalogAdsMobile","weight":50},{"value":"miniscroller","weight":50},{"value":"interscroller","weight":50}],"type":"multivalueBernoulliTrial","lookupKey":"AT1","key":"AdType","abgroup":"at1"},{"variants":[{"value":0.5,"weight":90},{"value":1,"weight":10}],"type":"weightedChoice","lookupKey":"RRAV2","key":"ReduceRenderAboveViewport","abgroup":"rrav2"},{"variants":[{"value":"5,9","weight":0},{"value":"","weight":100}],"type":"weightedChoice","lookupKey":"ATD2","key":"AdTypeDays","abgroup":"atd2"},{"variants":[{"value":50,"weight":34},{"value":250,"weight":33},{"value":500,"weight":33}],"type":"weightedChoice","lookupKey":"MDLE1","key":"mdle","abgroup":"mdle1"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"RVPS","key":"ReducedVideoPlayerSize","abgroup":"rvps"},{"variants":[{"weight":90}],"type":"bernoulliTrial","lookupKey":"WL","key":"WakeLock","abgroup":"wl"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"PLFX","key":"PlaylistFix","abgroup":"plfx"},{"variants":[{"weight":95}],"type":"bernoulliTrial","lookupKey":"DELLOAD","key":"EnableDelayLoading","abgroup":"delload"},{"variants":[{"weight":99.5}],"type":"bernoulliTrial","lookupKey":"AMZN","key":"Amazon","abgroup":"amzn1"},{"variants":[{"value":1.5,"weight":25},{"value":2,"weight":25},{"value":3,"weight":25},{"value":4,"weight":25}],"type":"weightedChoice","lookupKey":"FTO","key":"FloorBootstrap","abgroup":"fto"},{"variants":[{"value":1.5,"weight":25},{"value":2,"weight":25},{"value":3,"weight":25},{"value":4,"weight":25}],"type":"weightedChoice","lookupKey":"MTO","key":"MarmaladeBootstrap","abgroup":"mto"},{"variants":[{"weight":99}],"type":"bernoulliTrial","lookupKey":"OWSO","key":"OutstreamWithSOExperiment","abgroup":"owso"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"PBM","key":"Playbackmethod","abgroup":"pbm"},{"variants":[{"value":30,"weight":100},{"value":15,"weight":0},{"value":10,"weight":0}],"type":"weightedChoice","lookupKey":"VMAXDUR","key":"VideoDuration","abgroup":"vmaxdur"},{"variants":[{"value":"all","weight":0},{"value":"adx","weight":90},{"value":"off","weight":10}],"type":"weightedChoice","lookupKey":"INTERS5","key":"InterstitialAlt","abgroup":"inters5"},{"variants":[{"value":"off","weight":50},{"value":"45","weight":45},{"value":"4","weight":4},{"value":"1","weight":1}],"type":"weightedChoice","lookupKey":"AYP","key":"ayp","abgroup":"ayp"},{"variants":[{"value":"none","weight":98.9},{"value":"roxot","weight":0},{"value":"ay","weight":1},{"value":"generic","weight":0.1}],"type":"weightedChoice","lookupKey":"PBA2","key":"Analytics2","abgroup":"pba2"},{"variants":[{"value":0,"weight":20},{"value":5,"weight":20},{"value":10,"weight":20},{"value":25,"weight":20},{"value":50,"weight":20}],"type":"weightedChoice","lookupKey":"KWL","key":"KeywordLength","abgroup":"kwl"},{"variants":[{"value":1,"weight":34},{"value":2,"weight":33},{"value":3,"weight":33}],"type":"weightedChoice","lookupKey":"KPML","key":"KeywordPhraseMaxLength","abgroup":"kpml"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"RCB","key":"RaptiveCreativeBlock","abgroup":"rcb"},{"variants":[{"value":"both","weight":50},{"value":"client","weight":0},{"value":"server","weight":50}],"type":"weightedChoice","lookupKey":"YAHOODR","key":"YahooSSP","abgroup":"yahoodr"},{"variants":[{"value":"both","weight":99},{"value":"server","weight":0},{"value":"client","weight":1}],"type":"weightedChoice","lookupKey":"IXDR","key":"IndexExchangeDoubleRequest","abgroup":"ixdr"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"LOGFLTR","key":"LoggerFilter","abgroup":"logfltr"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"RPM","key":"RaptivePlayerMobile","abgroup":"rpm"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"RPD","key":"RaptivePlayerDesktop","abgroup":"rpd"},{"variants":[{"value":10,"weight":85},{"value":15,"weight":5},{"value":20,"weight":5},{"value":25,"weight":5}],"type":"weightedChoice","lookupKey":"RPSPDBT","key":"staleBufferTime","abgroup":"rpspdbt"},{"variants":[{"value":"tc","weight":0},{"value":"bl","weight":0},{"value":"br","weight":0},{"value":"off","weight":100}],"type":"weightedChoice","lookupKey":"SPLTV2","key":"VideoCollapsedLocations","abgroup":"spltv2"},{"variants":[{"value":900000,"weight":0,"abvalue":"900"},{"value":600000,"weight":0,"abvalue":"600"},{"value":300000,"weight":0,"abvalue":"300"},{"value":10000,"weight":0,"abvalue":"10"},{"value":-1,"weight":0,"abvalue":"tdoc"},{"value":0,"weight":100}],"type":"weightedChoice","lookupKey":"RPTD","key":"RaptiveTearDownPlayer","abgroup":"rptd"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"RPM_TEST","key":"RaptivePlayerMobile_test","abgroup":"rpm_test"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"RPD_TEST","key":"RaptivePlayerDesktop_test","abgroup":"rpd_test"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"RPM_TEST2","key":"RaptivePlayerMobile_test2","abgroup":"rpm_test2"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"RPD_TEST2","key":"RaptivePlayerDesktop_test2","abgroup":"rpd_test2"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"FLDG","key":"FledgeGPT","abgroup":"fldg"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"FLDGLOG","key":"FledgeLogging","abgroup":"fldglog"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"AED1","key":"AdExpansion","abgroup":"aed1"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"ESSA","key":"EnhancedStickySidebarAds","abgroup":"essa"},{"variants":[{"value":50,"weight":40},{"value":1000,"weight":20},{"value":3000,"weight":20},{"value":5000,"weight":20}],"type":"weightedChoice","lookupKey":"DEFTIMER3","key":"DelayLoading","abgroup":"deftimer3"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"WVTLS","key":"WebVitals","abgroup":"wvtls"},{"variants":[{"weight":1}],"type":"bernoulliTrial","lookupKey":"SENS_OFF","key":"SensOff","abgroup":"sens_off"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"SAB","key":"BidLimit","abgroup":"sab"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"DGC","key":"DelayGamCall","abgroup":"dgc"},{"variants":[{"weight":95}],"type":"bernoulliTrial","lookupKey":"JWB","key":"JwBoost","abgroup":"jwb"},{"variants":[{"weight":10}],"type":"bernoulliTrial","lookupKey":"LOGCLS","key":"LayoutShift","abgroup":"logcls"},{"variants":[{"value":5000,"weight":40,"abvalue":"5s"},{"value":10000,"weight":40,"abvalue":"10s"},{"value":15000,"weight":20,"abvalue":"15s"}],"type":"weightedChoice","lookupKey":"VAST_TO","key":"VastTimeout","abgroup":"vast_to"},{"variants":[{"value":15000,"weight":60,"abvalue":"15s"},{"value":18000,"weight":20,"abvalue":"18s"},{"value":20000,"weight":20,"abvalue":"20s"}],"type":"weightedChoice","lookupKey":"VASTTOISV","key":"VastTimeoutISV","abgroup":"vasttoisv"},{"variants":[{"value":"mOinGM9MTu5v-Lto835XLhlrSPY","weight":85,"abvalue":"main"},{"value":"HNS5BPofqNhjJ0uaex6oavjNklg","weight":5,"abvalue":"1"},{"value":"8bGsXqcT6wQIoFOgjoW97C-Xeb8","weight":5,"abvalue":"2"},{"value":"wyN88rwU6FImxcXgha7IWE-FzsE","weight":5,"abvalue":"test"}],"type":"weightedChoice","lookupKey":"CNFTP","key":"ConfiantProperty","abgroup":"cnftp"},{"variants":[{"value":"ct","weight":1},{"value":"rt","weight":98},{"value":"both","weight":1}],"type":"weightedChoice","lookupKey":"CB","key":"CreativeBlocking","abgroup":"cb10"},{"variants":[{"value":0,"weight":25},{"value":1000,"weight":25},{"value":2000,"weight":25},{"value":3000,"weight":25}],"type":"weightedChoice","lookupKey":"HBTT","key":"HBTTracking","abgroup":"hbtt"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"RRF","key":"RaptiveRefreshFloors","abgroup":"rrf"},{"variants":[{"value":1500,"weight":25},{"value":2000,"weight":25},{"value":2500,"weight":25},{"value":3000,"weight":25}],"type":"weightedChoice","lookupKey":"FRET","key":"FloorsRefreshEndpointTimeout","abgroup":"fret"},{"variants":[{"value":3000,"weight":80,"abvalue":"3s"},{"value":2000,"weight":10,"abvalue":"2s"},{"value":1000,"weight":10,"abvalue":"1s"}],"type":"weightedChoice","lookupKey":"VASTTOOSV","key":"VastTimeoutOSV","abgroup":"vasttoosv"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"SRE","key":"SlotResize","abgroup":"sre"},{"variants":[{"weight":25}],"type":"bernoulliTrial","lookupKey":"ADDENS","key":"AdDensity","abgroup":"addens"},{"variants":[{"weight":99}],"type":"bernoulliTrial","lookupKey":"BMETRICS","key":"BrandMetrics","abgroup":"bmetrics"},{"variants":[{"weight":95}],"type":"bernoulliTrial","lookupKey":"REBUILDSLOT","key":"RefreshRebuild","abgroup":"rebuildslot"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"VADV","key":"AdvancePlaylistExperiment","abgroup":"vadv"},{"variants":[{"weight":95}],"type":"bernoulliTrial","lookupKey":"TPCAPI","key":"TopicsAPI","abgroup":"tpcapi"},{"variants":[{"weight":10}],"type":"bernoulliTrial","lookupKey":"CRTVMON","key":"CreativeMonitoring","abgroup":"crtvmon"},{"variants":[{"value":700,"weight":50},{"value":500,"weight":50}],"type":"weightedChoice","lookupKey":"ESSAM","key":"EnhancedStickySidebarAdsMargin","abgroup":"essam"},{"variants":[{"value":"rubi","weight":0},{"value":"rapml","weight":1},{"value":"cm","weight":0},{"value":"fbmag","weight":0},{"value":"fbrap","weight":98},{"value":"none","weight":1}],"type":"weightedChoice","lookupKey":"FLRML1","key":"Floors","abgroup":"flrml1"},{"variants":[{"value":"rubi","weight":0},{"value":"rapml","weight":33},{"value":"cm","weight":0},{"value":"fbmag","weight":0},{"value":"fbrap","weight":34},{"value":"none","weight":33}],"type":"weightedChoice","lookupKey":"FLRML2","key":"Floors2","abgroup":"flrml2"},{"variants":[{"value":"1_1","weight":19},{"value":"1_2","weight":19},{"value":"1_3","weight":19},{"value":"1_4","weight":19},{"value":"1_5","weight":19},{"value":"off","weight":5}],"type":"weightedChoice","lookupKey":"TTDDEALFLR","key":"TTDDealFloor","abgroup":"ttddealflr"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"AMZN_HOLD_LOAD","key":"AmazonHoldLoad","abgroup":"amzn_hold_load"},{"variants":[{"value":"off","weight":20},{"weight":80,"value":{"ntvo_ss":"rpbs","unruly":"ay","33across":"rpbs","connatix":"ay","ogury":"ay","crit_ss":"rpbs","share_ss":"rpbs","conversant":"ay","amx":"rpbs","yieldmo":"rpbs"},"abvalue":"distribute"}],"type":"weightedChoice","lookupKey":"DSBBBS","key":"DistributeServerBiddersByBestServer","abgroup":"dsbbbs"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"RMOS1","key":"OneVideoStream","abgroup":"rmos1"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"AMZN_HOLD_DISP","key":"AmazonHoldDisplay","abgroup":"amzn_hold_disp"},{"variants":[{"weight":95}],"type":"bernoulliTrial","lookupKey":"HCGP","key":"HemCaptureGatedPrint","abgroup":"hcgp"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"DAJTO","key":"DisableAjaxTimeout","abgroup":"dajto"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"VDE","key":"VideoDeliveryExperiment","abgroup":"vde"},{"variants":[{"value":0,"weight":85,"abvalue":"0s"},{"value":1000,"weight":5,"abvalue":"1s"},{"value":2000,"weight":5,"abvalue":"2s"},{"value":3000,"weight":5,"abvalue":"3s"}],"type":"weightedChoice","lookupKey":"SOCBDE","key":"StickyOutstreamCloseButtonTimeout","abgroup":"socbde"},{"variants":[{"weight":3}],"type":"bernoulliTrial","lookupKey":"ADDUR","key":"LogAdDuration","abgroup":"addur"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"RBSC","key":"RaptiveBlockSendCrid","abgroup":"rbsc"},{"variants":[{"value":"ix","weight":99.5},{"value":"mn","weight":96},{"value":"ox","weight":90},{"value":"pu","weight":95},{"value":"un","weight":90},{"value":"ma","weight":99},{"value":"sh","weight":90},{"value":"st","weight":90},{"value":"sb","weight":99},{"value":"sv","weight":75},{"value":"tl","weight":99},{"value":"yh","weight":0},{"value":"mg","weight":99},{"value":"xr","weight":99},{"value":"ot","weight":75},{"value":"ax","weight":100},{"value":"ch","weight":100},{"value":"cr","weight":100},{"value":"gg","weight":100},{"value":"kg","weight":100},{"value":"td","weight":100},{"value":"ym","weight":90},{"value":"im","weight":95},{"value":"nt","weight":90}],"type":"multivalueBernoulliTrial","lookupKey":"DOBA","key":"DisplayOpenBidderExperiment","abgroup":"doba"},{"variants":[{"value":"ax","weight":100},{"value":"ix","weight":95},{"value":"mn","weight":80},{"value":"ox","weight":90},{"value":"pu","weight":75},{"value":"un","weight":85},{"value":"ma","weight":85},{"value":"sx","weight":100},{"value":"tl","weight":99},{"value":"yh","weight":80},{"value":"sh","weight":40},{"value":"ym","weight":55},{"value":"mg","weight":99},{"value":"xr","weight":99},{"value":"gg","weight":95},{"value":"ot","weight":75},{"value":"sv","weight":75},{"value":"im","weight":95},{"value":"nt","weight":80}],"type":"multivalueBernoulliTrial","lookupKey":"VOBA","key":"VideoOpenBidderExperiment","abgroup":"voba1"},{"variants":[{"value":"ix","weight":80},{"value":"ma","weight":80},{"value":"mn","weight":90},{"value":"ox","weight":80},{"value":"pu","weight":80},{"value":"sh","weight":90},{"value":"tl","weight":90},{"value":"ts","weight":90}],"type":"multivalueBernoulliTrial","lookupKey":"UID1BS","key":"UID1BidderSupression","abgroup":"uid1bs"},{"variants":[{"weight":95}],"type":"bernoulliTrial","lookupKey":"TTDUID1BS","key":"TTDUID1BidderSupression","abgroup":"ttduid1bs"},{"variants":[{"value":2,"weight":97},{"value":3,"weight":3}],"type":"weightedChoice","lookupKey":"OSP","key":"OutstreamPlacementExperiment","abgroup":"osp"},{"variants":[{"value":2,"weight":0},{"value":3,"weight":100}],"type":"weightedChoice","lookupKey":"OSP2","key":"OutstreamPlacementExperiment2","abgroup":"osp2"},{"variants":[{"value":0.8,"weight":25},{"value":1,"weight":25},{"value":1.2,"weight":25},{"value":1.4,"weight":25}],"type":"weightedChoice","lookupKey":"FLRMLTP","key":"SingleFloorMultiplier","abgroup":"flrmltp"},{"variants":[{"value":1.15,"weight":5},{"value":1.2,"weight":15},{"value":1.25,"weight":59},{"value":1.3,"weight":15},{"value":1.35,"weight":5},{"value":"off","weight":1}],"type":"weightedChoice","lookupKey":"BPFLMULT2","key":"LazyFloorMultiplier","abgroup":"bpflmult4"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"MGNCRBN","key":"MagniteCarbon","abgroup":"mgncrbn"},{"variants":[{"weight":98}],"type":"bernoulliTrial","lookupKey":"TS","key":"TrafficShaping","abgroup":"ts"},{"variants":[{"weight":10}],"type":"bernoulliTrial","lookupKey":"ADLIFECYC","key":"LogAdLifeCycle","abgroup":"adlifecyc"},{"variants":[{"value":0.2,"weight":25},{"value":0.5,"weight":25},{"value":0.8,"weight":25},{"value":"off","weight":25}],"label":"RPBS","type":"weightedChoice","lookupKey":"FPB","key":"RPBSFloorPushingBidders","abgroup":"fpb"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"SOFC","key":"StickyOutstreamFooterCollision","abgroup":"sofc"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"NOSVP","key":"OutstreamRendererExperiment","abgroup":"nosvp"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"SOSPP","key":"StickyOutstreamOnStickyPlayerPages","abgroup":"sospp"},{"variants":[{"value":60000,"weight":34},{"value":90000,"weight":33},{"value":120000,"weight":33}],"type":"weightedChoice","lookupKey":"OPR","key":"OutstreamPlayerRefreshFailsafe","abgroup":"opr"},{"variants":[{"weight":1}],"type":"bernoulliTrial","lookupKey":"SIDP","key":"SharedIdPlugin","abgroup":"sidp"},{"variants":[{"weight":1}],"type":"bernoulliTrial","lookupKey":"DOFRE","key":"DisplayBackupRenderer","abgroup":"dofre"},{"variants":[{"value":"strict","weight":0},{"value":"relaxed","weight":100},{"value":"off","weight":0}],"type":"weightedChoice","lookupKey":"DCO","key":"DemandChain","abgroup":"dco"},{"variants":[{"value":100,"weight":25},{"value":200,"weight":50,"abvalue":"off"},{"value":300,"weight":25}],"type":"weightedChoice","lookupKey":"S2SBUFF","key":"S2SBuffer","abgroup":"s2sbuff"},{"variants":[{"value":400,"weight":100}],"type":"weightedChoice","lookupKey":"ADT3","key":"AuctionDelay_2","abgroup":"adt4"},{"variants":[{"weight":25,"value":"on5"},{"weight":25,"value":"on7"},{"weight":25,"value":"on10"},{"weight":25,"value":"off"}],"type":"weightedChoice","lookupKey":"TCKSCROLL","key":"TrackScrollExperiment","abgroup":"tckscroll"},{"variants":[{"weight":90,"value":[5,7,10]},{"weight":10,"value":"off"}],"type":"weightedChoice","lookupKey":"TCKSCROLL2","key":"TrackScrollExperiment2","abgroup":"tckscroll2"},{"variants":[{"value":1,"weight":97},{"value":1.1,"weight":1},{"value":1.2,"weight":1},{"value":1.3,"weight":1}],"type":"weightedChoice","lookupKey":"REFVIDFLR","key":"FloorsInstreamRefresh","abgroup":"refvidflr"},{"variants":[{"value":0.4,"weight":25},{"value":0.5,"weight":25},{"value":0.6,"weight":25},{"value":0.7,"weight":25}],"type":"weightedChoice","lookupKey":"SESFLRSO","key":"SessionFloorStickyOutstreamPercentileExperiment","abgroup":"sesflrso"},{"variants":[{"value":0.3,"weight":10},{"value":0.4,"weight":25},{"value":0.5,"weight":30},{"value":0.6,"weight":25},{"value":0.7,"weight":10}],"type":"weightedChoice","lookupKey":"SESFLRDIS","key":"SessionFloorDisplayPercentileExperiment","abgroup":"sesflrdis1"},{"variants":[{"value":0.6,"weight":20},{"value":0.7,"weight":60},{"value":0.8,"weight":20}],"type":"weightedChoice","lookupKey":"SESFLRVID2","key":"SessionFloorVideoPercentileExperiment","abgroup":"sesflrvid2"},{"variants":[{"value":0,"weight":5},{"value":1.1,"weight":10},{"value":1.2,"weight":10},{"value":1.3,"weight":10},{"value":1.4,"weight":10},{"value":"ml","weight":55}],"type":"weightedChoice","lookupKey":"REFSOFLR","key":"FloorsStickyOutstreamRefresh","abgroup":"refsoflr"},{"variants":[{"value":0,"weight":33},{"value":1,"weight":33},{"value":1.5,"weight":34}],"type":"weightedChoice","lookupKey":"SOCON","key":"SuppressOutreamSlowConnection","abgroup":"socon"},{"variants":[{"weight":25}],"type":"bernoulliTrial","lookupKey":"UPL","key":"UserPageDataLogging","abgroup":"upl"},{"variants":[{"weight":1}],"type":"bernoulliTrial","lookupKey":"AOS","key":"AdditionalOutstreamUnitsExperiment","abgroup":"aos"},{"variants":[{"weight":10}],"type":"bernoulliTrial","lookupKey":"DATAPRIV","key":"UserPageDataPrivacyLogging","abgroup":"datapriv"},{"variants":[{"value":2000,"weight":10},{"value":2100,"weight":15},{"value":2200,"weight":50},{"value":2300,"weight":15},{"value":2400,"weight":10}],"type":"weightedChoice","lookupKey":"ITO_DF","key":"InitialTimeoutDesktopFastExperiment","abgroup":"ito_df"},{"variants":[{"value":2600,"weight":10},{"value":2700,"weight":15},{"value":2800,"weight":50},{"value":2900,"weight":15},{"value":3000,"weight":10}],"type":"weightedChoice","lookupKey":"ITO_DS","key":"InitialTimeoutDesktopSlowExperiment","abgroup":"ito_ds"},{"variants":[{"value":2400,"weight":10},{"value":2500,"weight":15},{"value":2600,"weight":50},{"value":2700,"weight":15},{"value":2800,"weight":10}],"type":"weightedChoice","lookupKey":"ITO_DN","key":"InitialTimeoutDesktopUnknownExperiment","abgroup":"ito_dn"},{"variants":[{"value":"off","weight":90},{"value":"nobid","weight":5},{"value":"always","weight":4},{"value":"bid","weight":1}],"label":"RPBS","type":"weightedChoice","lookupKey":"RRB","key":"RPBSReRequestBidders","abgroup":"rrb"},{"variants":[{"value":2400,"weight":10},{"value":2500,"weight":15},{"value":2600,"weight":50},{"value":2700,"weight":15},{"value":2800,"weight":10}],"type":"weightedChoice","lookupKey":"ITO_MF","key":"InitialTimeoutMobileFastExperiment","abgroup":"ito_mf"},{"variants":[{"value":2600,"weight":10},{"value":2700,"weight":15},{"value":2800,"weight":50},{"value":2900,"weight":15},{"value":3000,"weight":10}],"type":"weightedChoice","lookupKey":"ITO_MS","key":"InitialTimeoutMobileSlowExperiment","abgroup":"ito_ms"},{"variants":[{"value":2600,"weight":10},{"value":2700,"weight":15},{"value":2800,"weight":50},{"value":2900,"weight":15},{"value":3000,"weight":10}],"type":"weightedChoice","lookupKey":"ITO_MN","key":"InitialTimeoutMobileUnknownExperiment","abgroup":"ito_mn"},{"label":"RPBS","variants":[{"value":0.75,"weight":33},{"value":1.25,"weight":33},{"value":"off","weight":34}],"type":"weightedChoice","lookupKey":"NCF","key":"RPBSNCF","abgroup":"ncf"},{"variants":[{"value":"on","weight":0},{"value":"off","weight":60},{"value":"vpr","weight":30},{"value":"dbc","weight":10}],"type":"weightedChoice","lookupKey":"IROE","key":"InstreamRerequestOnError","abgroup":"iroe"},{"variants":[{"value":"on","weight":0},{"value":"off","weight":5},{"value":"vpr","weight":0},{"value":"vpr2","weight":95}],"type":"weightedChoice","lookupKey":"RIROE","key":"RaptiveInstreamRerequestOnError","abgroup":"riroe"},{"variants":[{"value":"on","weight":0},{"value":"off","weight":5},{"value":"vpr","weight":0},{"value":"vpr2","weight":95},{"value":"dbc","weight":0}],"type":"weightedChoice","lookupKey":"IROE2","key":"InstreamRerequestOnError2","abgroup":"iroe2"},{"variants":[{"value":"id5Id","weight":5},{"value":"identityLink","weight":1},{"value":"pairId","weight":1},{"value":"unifiedId","weight":90},{"value":"unifiedId2","weight":1},{"value":"sharedId","weight":1},{"value":"criteo","weight":5},{"value":"connectId","weight":5},{"value":"fabrickId","weight":99},{"value":"FTrackId","weight":95},{"value":"33acrossId","weight":5},{"value":"liveIntentId","weight":1},{"value":"linkedInAdsId","weight":10},{"value":"lotamePanoramaId","weight":5},{"value":"raptiveDcn1Uid1Id","weight":5},{"value":"merkleId","weight":25},{"value":"merkuryId","weight":5},{"value":"teadsId","weight":10}],"type":"multivalueBernoulliTrial","lookupKey":"IDHO","key":"IDHO","abgroup":"idho"},{"label":"RPBS","variants":[{"value":1.05,"weight":25},{"value":1.1,"weight":25},{"value":1.15,"weight":25},{"value":"off","weight":25}],"type":"weightedChoice","lookupKey":"OFM","key":"RPBSOpenXFloorMultiplier","abgroup":"ofm3"},{"variants":[{"value":"all","weight":95},{"value":"li_iiq","weight":1},{"value":"li_id5","weight":1},{"value":"li_only","weight":0.5},{"value":"iiq_id5","weight":1},{"value":"iiq_only","weight":0.5},{"value":"id5_only","weight":0.5},{"value":"none","weight":0.5}],"type":"weightedChoice","lookupKey":"AUDT","key":"AudienceTargeting","abgroup":"audt"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"AYIIQ_OFF","key":"AYIIQEnrich","abgroup":"ayiiq_off"},{"label":"RPBS","variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"PDA","key":"RPBSPartialDutchAuction","abgroup":"pda3"},{"variants":[{"weight":95}],"type":"bernoulliTrial","lookupKey":"IDGUID3","key":"IdGraphUid2","abgroup":"idguid3"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"3pgaun","key":"3pgaun","abgroup":"3pgaun"},{"variants":[{"weight":98}],"type":"bernoulliTrial","lookupKey":"IDGLR","key":"IdGraphLiveRamp","abgroup":"idglr"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"AYUSRMC","key":"AYUserSyncReplaceMacro","abgroup":"ayusrmc"},{"variants":[{"value":"amx","weight":1},{"value":"appnexus","weight":1},{"value":"blis","weight":1},{"value":"connatix","weight":100},{"value":"conversant","weight":1},{"value":"criteo","weight":1},{"value":"gridvid","weight":1},{"value":"gumgum","weight":50},{"value":"ix","weight":0.25},{"value":"medianet","weight":1},{"value":"openx","weight":0.25},{"value":"ozone","weight":1},{"value":"pubmatic","weight":0.25},{"value":"resetdigital","weight":100},{"value":"rubicon","weight":0.25},{"value":"seedtag","weight":50},{"value":"sharethrough","weight":0.25},{"value":"stackadapt","weight":10},{"value":"triplelift","weight":0.25},{"value":"ttd","weight":0.25},{"value":"unruly","weight":1},{"value":"undertone","weight":10},{"value":"yahoossp","weight":30},{"value":"kargo","weight":1},{"value":"33across","weight":100},{"value":"onetag","weight":10},{"value":"adform","weight":95},{"value":"nativo","weight":1}],"type":"multivalueBernoulliTrial","lookupKey":"VBHO2","key":"VBHO2","abgroup":"vbho5"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"VBHORISE","key":"VBHORise","abgroup":"vbhorise"},{"variants":[{"value":"33across","weight":25},{"value":"amx","weight":20},{"value":"appnexus","weight":1},{"value":"blis","weight":1},{"value":"chicory","weight":100},{"value":"connatix","weight":100},{"value":"conversant","weight":10},{"value":"criteo","weight":1},{"value":"grid","weight":10},{"value":"gumgum","weight":5},{"value":"kargo","weight":1},{"value":"ix","weight":0.25},{"value":"medianet","weight":1},{"value":"nativo","weight":1},{"value":"openx","weight":0.25},{"value":"ozone","weight":1},{"value":"pubmatic","weight":0.25},{"value":"resetdigital","weight":100},{"value":"rubicon","weight":0.25},{"value":"seedtag","weight":50},{"value":"sharethrough","weight":0.25},{"value":"stackadapt","weight":40},{"value":"teads","weight":1},{"value":"triplelift","weight":0.25},{"value":"ttd","weight":0.25},{"value":"undertone","weight":1},{"value":"unruly","weight":1},{"value":"yahoossp","weight":1},{"value":"yieldmo","weight":1},{"value":"adform","weight":95},{"value":"flipp","weight":100},{"value":"ogury","weight":10}],"type":"multivalueBernoulliTrial","lookupKey":"HBHO2","key":"HBHO2","abgroup":"hbho8"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"HBHORISE","key":"HBHORise","abgroup":"hbhorise"},{"variants":[{"value":"af","weight":6},{"value":"ef","weight":6},{"value":"inrr","weight":6},{"value":"lf","weight":6},{"value":"ntvs","weight":6},{"value":"ntvc","weight":6},{"value":"ntvr","weight":6},{"value":"ntvh","weight":6},{"value":"ntvbp","weight":6},{"value":"osv","weight":6},{"value":"st","weight":6},{"value":"eca","weight":6},{"value":"msr","weight":6},{"value":"intr","weight":6},{"value":"slh","weight":6},{"value":"control","weight":10}],"type":"weightedChoice","lookupKey":"ATDH2","key":"AdTypeDaysHoldout2","abgroup":"atdh2"},{"variants":[{"value":["animatedFooter"],"weight":6},{"value":["expandableFooter"],"weight":6},{"value":["inRecipeRecommendationDesktop","inRecipeRecommendationMobile"],"weight":6},{"value":["largeFormatsDesktop","largeFormatsMobile"],"weight":6},{"value":["nativeDesktopSidebar"],"weight":6},{"value":["nativeDesktopContent","nativeMobileContent"],"weight":6},{"value":["nativeDesktopRecipe","nativeMobileRecipe"],"weight":6},{"value":["nativeDesktopHeader","nativeMobileHeader"],"weight":6},{"value":["nativeDesktopBelowPost","nativeMobileBelowPost"],"weight":6},{"value":["outstreamDesktop","outstreamMobile"],"weight":6},{"value":["sponsorTileDesktop","sponsorTileMobile"],"weight":6},{"value":["expandableCatalogAdsDesktop","expandableCatalogAdsMobile"],"weight":6},{"value":["miniscroller"],"weight":6},{"value":["interscroller"],"weight":6},{"value":["skylineHeader"],"weight":6},{"value":["control"],"weight":10}],"type":"weightedChoice","lookupKey":"ATDH","key":"AdTypeDaysHoldout","abgroup":"atdh"},{"variants":[{"value":"animatedFooter","weight":0},{"value":"expandableFooter","weight":0},{"value":"miniscroller","weight":0},{"value":"interscroller","weight":0}],"type":"multivalueBernoulliTrial","lookupKey":"ATHMB","key":"AdTypeHoldout","abgroup":"athmb"},{"variants":[{"value":"33across","weight":0},{"value":"appnexus","weight":0},{"value":"blis","weight":0},{"value":"chicory","weight":0},{"value":"conversant","weight":0},{"value":"criteo","weight":0},{"value":"grid","weight":0},{"value":"gridvid","weight":0},{"value":"gumgum","weight":0},{"value":"kargo","weight":0},{"value":"ix","weight":0},{"value":"medianet","weight":0},{"value":"nativo","weight":0},{"value":"openx","weight":0},{"value":"ogury","weight":0},{"value":"pubmatic","weight":0},{"value":"resetdigital","weight":0},{"value":"rubicon","weight":0},{"value":"seedtag","weight":0},{"value":"sharethrough","weight":0},{"value":"teads","weight":0},{"value":"triplelift","weight":0},{"value":"ttd","weight":0},{"value":"undertone","weight":0},{"value":"unruly","weight":0},{"value":"yahoossp","weight":0},{"value":"yieldmo","weight":0},{"value":"onetag","weight":0}],"type":"multivalueBernoulliTrial","lookupKey":"ALLBHO","key":"AllBidderHO","abgroup":"allbho"},{"variants":[{"value":"33across","weight":100},{"value":"appnexus","weight":5},{"value":"amx","weight":100},{"value":"blis","weight":100},{"value":"chicory","weight":100},{"value":"connatix","weight":100},{"value":"conversant","weight":100},{"value":"grid","weight":100},{"value":"gumgum","weight":2},{"value":"pubm_ss","weight":100},{"value":"resetdigital","weight":100},{"value":"seedtag","weight":100},{"value":"under_ss","weight":100},{"value":"unruly","weight":100},{"value":"yieldmo","weight":100},{"value":"adform","weight":100},{"value":"gridnat","weight":100},{"value":"rubi_ss","weight":100},{"value":"flipp","weight":100},{"value":"rise","weight":100},{"value":"tripl_ss","weight":100},{"value":"rubiv_ss","weight":100},{"value":"opnx_ss","weight":100},{"value":"share_ss","weight":100},{"value":"crit_ss","weight":100},{"value":"ntvo_ss","weight":100},{"value":"ogury","weight":100},{"value":"medianet","weight":100}],"type":"multivalueBernoulliTrial","lookupKey":"PBS2S","key":"S2S","abgroup":"pbs2s"},{"variants":[{"value":60000,"weight":90},{"value":"off","weight":10}],"type":"weightedChoice","lookupKey":"RSV","key":"RestartStickyVideo","abgroup":"rsv"},{"variants":[{"value":"33across","weight":100},{"value":"appnexus","weight":5},{"value":"amx","weight":100},{"value":"blis","weight":100},{"value":"chicory","weight":100},{"value":"connatix","weight":100},{"value":"conversant","weight":100},{"value":"grid","weight":100},{"value":"gumgum","weight":2},{"value":"pubm_ss","weight":100},{"value":"resetdigital","weight":100},{"value":"seedtag","weight":100},{"value":"under_ss","weight":100},{"value":"unruly","weight":100},{"value":"yieldmo","weight":100},{"value":"adform","weight":100},{"value":"gridnat","weight":100},{"value":"rubi_ss","weight":100},{"value":"flipp","weight":100},{"value":"rise","weight":100},{"value":"tripl_ss","weight":100},{"value":"rubiv_ss","weight":100},{"value":"openx","weight":100},{"value":"opnx_ss","weight":100},{"value":"share_ss","weight":100},{"value":"crit_ss","weight":100},{"value":"ntvo_ss","weight":100},{"value":"ogury","weight":100},{"value":"medianet","weight":100}],"type":"multivalueBernoulliTrial","lookupKey":"PBS2S5","key":"S2S5","abgroup":"pbs2s5"},{"variants":[{"value":"33across","weight":100},{"value":"appnexus","weight":5},{"value":"connatix","weight":100},{"value":"conversant","weight":100},{"value":"grid","weight":100},{"value":"gumgum","weight":2},{"value":"pubm_ss","weight":100},{"value":"resetdigital","weight":100},{"value":"under_ss","weight":100},{"value":"unruly","weight":100},{"value":"yieldmo","weight":100},{"value":"adform","weight":100},{"value":"gridnat","weight":100},{"value":"rubi_ss","weight":100},{"value":"flipp","weight":100},{"value":"rise","weight":100},{"value":"amx","weight":100},{"value":"tripl_ss","weight":100},{"value":"rubiv_ss","weight":100},{"value":"opnx_ss","weight":100},{"value":"sharethrough","weight":100},{"value":"share_ss","weight":100},{"value":"crit_ss","weight":100},{"value":"ntvo_ss","weight":100},{"value":"ogury","weight":100}],"type":"multivalueBernoulliTrial","lookupKey":"PBS2S4","key":"S2S4","abgroup":"pbs2s4"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"EUE","key":"EUEndpoint","abgroup":"eue"},{"variants":[{"value":0,"weight":25},{"value":3,"weight":25},{"value":4,"weight":25},{"value":5,"weight":25}],"type":"weightedChoice","lookupKey":"IABRT","key":"InitialAuctionBidResponseThreshold","abgroup":"iabrt"},{"variants":[{"value":"s1","weight":50},{"value":"s2","weight":50}],"type":"weightedChoice","lookupKey":"MXB","key":"MutuallyExclusiveBidders","abgroup":"mxb"},{"variants":[{"value":2,"weight":50},{"value":3,"weight":50}],"type":"weightedChoice","lookupKey":"USYNCTRIG","key":"UserSyncTrigger","abgroup":"usynctrig"},{"variants":[{"value":1,"weight":25},{"value":3,"weight":25},{"value":5,"weight":25},{"value":7,"weight":25}],"type":"weightedChoice","lookupKey":"CSYNC_LIM","key":"UserSyncLimit","abgroup":"csync_lim"},{"variants":[{"value":100,"weight":33},{"value":150,"weight":34},{"value":200,"weight":33}],"type":"weightedChoice","lookupKey":"REFDEB","key":"RefreshUserIdsDebounce","abgroup":"refdeb"},{"variants":[{"weight":5}],"type":"bernoulliTrial","lookupKey":"FOREX","key":"CurrencyConversion","abgroup":"forex"},{"variants":[{"weight":5}],"type":"bernoulliTrial","lookupKey":"CFIP_BRHO","key":"CFIpBidReqHoldout","abgroup":"cfip_brho_2"},{"variants":[{"weight":95}],"type":"bernoulliTrial","lookupKey":"CFIP_IDPHO","key":"CFIdParHoldout","abgroup":"cfip_idpho"},{"variants":[{"weight":20}],"type":"bernoulliTrial","lookupKey":"LRSS","key":"LiverampSecureSignals","abgroup":"lrss"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"OTKE","key":"OptTknEndpoint","abgroup":"otke"},{"variants":[{"value":"US","weight":100},{"value":"CA","weight":100},{"value":"GB","weight":100},{"value":"UK","weight":100},{"value":"AU","weight":100}],"type":"multivalueBernoulliTrial","lookupKey":"OPTCA","key":"OptableCountryAllowlist","abgroup":"optca"},{"variants":[{"value":"US-VT","weight":100},{"value":"US-NE","weight":100},{"value":"US-LA","weight":100},{"value":"CA-QC","weight":100}],"type":"multivalueBernoulliTrial","lookupKey":"OPTCRB","key":"OptableCountryRegionBlocklist","abgroup":"optcrb"},{"variants":[{"weight":99}],"type":"bernoulliTrial","lookupKey":"ROGID5HEM","key":"OptableId5ResolveHems","abgroup":"rog_id5hem"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"OPTID5RRT","key":"OptableId5ResolveRouteTest","abgroup":"optid5rrt"},{"variants":[{"weight":99}],"type":"bernoulliTrial","lookupKey":"SDKLI","key":"LiveIntentHem","abgroup":"sdkli"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"SDKLIR","key":"LiveIntentUid2Hem","abgroup":"sdklir"},{"variants":[{"weight":99}],"type":"bernoulliTrial","lookupKey":"LIMAID","key":"LiveIntentMaid","abgroup":"limaid"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"SPA","key":"SinglePageAppSupport","abgroup":"spa"},{"variants":[{"weight":99}],"type":"bernoulliTrial","lookupKey":"S2SPARAM","key":"OrtbEnrich","abgroup":"s2sparam"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"JTTE","key":"JumpToTracker","abgroup":"jtte"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"SPA_636BB77B4A063E2C3E3686FB","key":"SinglePageAppSupport_636bb77b4a063e2c3e3686fb","abgroup":"spa_636bb77b4a063e2c3e3686fb"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"SPA_62A8F1D2540A6E420AB16977","key":"SinglePageAppSupport_62a8f1d2540a6e420ab16977","abgroup":"spa_62a8f1d2540a6e420ab16977"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"SCATCVE","key":"StickyContainerAdsTopCenterVideoDependency","abgroup":"scatcve"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"SSAU","key":"SlickstreamAdUnits","abgroup":"ssau"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"SSFF","key":"StickySidebarFeatureFlag","abgroup":"ssff"},{"variants":[{"value":"10s1","weight":2},{"value":"10s2","weight":2},{"value":"off","weight":96}],"type":"weightedChoice","lookupKey":"MULTIREFAUCV2","key":"MultistagePrebidAuctionV2","abgroup":"multirefaucv2"},{"variants":[{"value":"10s1","weight":0},{"value":"10s2","weight":100},{"value":"off","weight":0}],"type":"weightedChoice","lookupKey":"MVIOS","key":"MultistagePrebidAuctionVideoNonIosExperiment","abgroup":"mvios"},{"variants":[{"value":"a1","weight":0},{"value":"a2","weight":0},{"value":"b1","weight":0},{"value":"b2","weight":100}],"type":"weightedChoice","lookupKey":"ARS","key":"AYRPBSStages","abgroup":"ars"},{"variants":[{"value":20,"weight":25},{"value":30,"weight":25},{"value":40,"weight":25},{"value":"off","weight":25}],"type":"weightedChoice","lookupKey":"LCBPE","key":"LimitContentBidPoolExperiment","abgroup":"lcbpe"},{"variants":[{"value":5,"weight":25},{"value":10,"weight":25},{"value":15,"weight":25},{"value":20,"weight":25}],"type":"weightedChoice","lookupKey":"LVBPE","key":"LimitVideoBidPoolExperiment","abgroup":"lvbpe"},{"variants":[{"value":"none","weight":1},{"value":"8.30.0","weight":99}],"type":"weightedChoice","lookupKey":"JWPV","key":"JWPVersionExperiment","abgroup":"jwpv"},{"variants":[{"value":10000,"weight":70},{"value":15000,"weight":7},{"value":20000,"weight":7},{"value":25000,"weight":10},{"value":1000,"weight":3},{"value":2000,"weight":3}],"type":"weightedChoice","lookupKey":"AINV","key":"AdInViewExperiment","abgroup":"ainv"},{"variants":[{"value":1000,"weight":100}],"type":"weightedChoice","lookupKey":"AINV2","key":"AdInViewExperiment_2","abgroup":"ainv2"},{"variants":[{"value":800,"weight":25},{"value":1000,"weight":25},{"value":1200,"weight":25},{"value":1400,"weight":25}],"type":"weightedChoice","lookupKey":"AIV","key":"AdInViewV3Experiment","abgroup":"aiv"},{"variants":[{"value":"noref","weight":25},{"value":20,"weight":25},{"value":30,"weight":25},{"value":"off","weight":25}],"type":"weightedChoice","lookupKey":"ASR_RE","key":"ASRInViewRefreshExperiment","abgroup":"asr_re"},{"variants":[{"weight":1}],"type":"bernoulliTrial","lookupKey":"DOVH","key":"DetectOverlappingHeader","abgroup":"dovh"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"EW","key":"EastWest","abgroup":"ew"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"VCSU","key":"VideoCollapseScrollUp","abgroup":"vcsu"},{"variants":[{"value":"off","weight":0},{"value":"1","weight":100},{"value":"2","weight":0}],"type":"weightedChoice","lookupKey":"COSUFTC","key":"VideoCollapseScrollUpTopCenter","abgroup":"cosuftc"},{"variants":[{"weight":90}],"type":"bernoulliTrial","lookupKey":"INTCFG","key":"InterstitialConfig","abgroup":"intcfg"},{"variants":[{"value":"off","weight":10},{"value":"unh","weight":30},{"value":"bn","weight":30},{"value":"b","weight":30}],"type":"weightedChoice","lookupKey":"INTCFG2","key":"InterstitialConfig2","abgroup":"intcfg2"},{"variants":[{"value":"off","weight":60},{"value":"unh","weight":20},{"value":"bn","weight":20},{"value":"eoa","weight":0},{"value":"ia","weight":0},{"value":"bw","weight":0}],"type":"weightedChoice","lookupKey":"INTCFG3","key":"InterstitialConfig3","abgroup":"intcfg3"},{"variants":[{"value":"Continuing without bids","weight":99},{"value":"xhr timeout after","weight":99},{"value":"marmaladeResponseLoaded","weight":90},{"value":"_initializeHls","weight":90},{"value":"_logAuctionDebug","weight":75},{"value":"_hasBids","weight":75},{"value":"_resolveHemFromExternalSourceDCN","weight":50},{"value":"_markPrebidBidAsUsed","weight":50},{"value":"_logCoverage","weight":100}],"type":"multivalueBernoulliTrial","lookupKey":"DSLE","key":"DialDownLogsExperiment","abgroup":"dsle"},{"variants":[{"value":"Continuing without bids","weight":100},{"value":"xhr timeout after","weight":100},{"value":"SlotRenderEnded::adImpression","weight":99},{"value":"RaptivePlayer::_initializeHls","weight":100},{"value":"RaptivePlayer::_initializeHlsOrMp4","weight":100},{"value":"in response for appnexus adapter: unknown","weight":100}],"type":"multivalueBernoulliTrial","lookupKey":"DSLE2","key":"DialDownLogsExperiment2","abgroup":"dsle2"},{"variants":[{"value":"Continuing without bids","weight":100},{"value":"xhr timeout after","weight":100},{"value":"SlotRenderEnded::adImpression","weight":90},{"value":"RaptivePlayer::_initializeHls","weight":100},{"value":"RaptivePlayer::_initializeHlsOrMp4","weight":100},{"value":"in response for appnexus adapter: unknown","weight":100}],"type":"multivalueBernoulliTrial","lookupKey":"DSLE3","key":"DialDownLogsExperiment3","abgroup":"dsle3"},{"variants":[{"weight":90}],"type":"bernoulliTrial","lookupKey":"IPLIN","key":"IOSPlayInline","abgroup":"iplin"},{"variants":[{"weight":1}],"type":"bernoulliTrial","lookupKey":"CSL","key":"ContentSizeLogging","abgroup":"csl"},{"variants":[{"value":0.9,"weight":96},{"value":0.85,"weight":1},{"value":0.8,"weight":1},{"value":0.75,"weight":1},{"value":0,"weight":1}],"type":"weightedChoice","lookupKey":"VPRED_1","key":"PredictiveAnalysis","abgroup":"vpred_1"},{"variants":[{"value":0.6,"weight":95},{"value":"off","weight":5}],"type":"weightedChoice","lookupKey":"DSLLV","key":"DynamicSlotLazyLoadViewability","abgroup":"dsllv"},{"variants":[{"value":"off","weight":25},{"value":"ingredients","weight":25},{"value":"seeRecipe","weight":25},{"value":"quickView","weight":25}],"type":"weightedChoice","lookupKey":"RQV","key":"RecipeQuickView","abgroup":"rqv"},{"variants":[{"value":{"protocols":[1,2,3,4,5,6,7,8],"value":"all","scope":"all"},"weight":55},{"value":{"protocols":[2,3,5,6,7,8],"value":"nv1","scope":"all"},"weight":15},{"value":{"protocols":[1,2,3,5,6,7,8],"value":"allr","scope":"limited"},"weight":15},{"value":{"protocols":[2,3,5,6,7,8],"value":"nv1r","scope":"limited"},"weight":15}],"type":"weightedChoice","lookupKey":"PROTO","key":"Protocols","abgroup":"proto"},{"variants":[{"value":"off","weight":30},{"value":"7.30","weight":50},{"value":"5.10","weight":10},{"value":"3.00","weight":5},{"value":"1.40","weight":5}],"type":"weightedChoice","lookupKey":"DCSLL_SS2","key":"DCSLLSiteSpecific","abgroup":"dcsll_ss2"},{"variants":[{"value":"5","weight":100}],"type":"weightedChoice","lookupKey":"DCSLL_MED","key":"DCSLLMediumCPMTarget","abgroup":"dcsll_med"},{"variants":[{"value":{"cpm":3,"blastRadius":4},"weight":10,"abvalue":"1"},{"value":{"cpm":4,"blastRadius":4},"weight":10,"abvalue":"2"},{"value":{"cpm":5,"blastRadius":4},"weight":10,"abvalue":"3"},{"value":{"cpm":3,"blastRadius":8},"weight":10,"abvalue":"4"},{"value":{"cpm":4,"blastRadius":8},"weight":10,"abvalue":"5"},{"value":{"cpm":5,"blastRadius":8},"weight":10,"abvalue":"6"},{"value":{"cpm":3,"blastRadius":10},"weight":10,"abvalue":"7"},{"value":{"cpm":4,"blastRadius":10},"weight":10,"abvalue":"8"},{"value":{"cpm":5,"blastRadius":10},"weight":10,"abvalue":"9"},{"value":"off","weight":10,"abvalue":"off"}],"type":"weightedChoice","lookupKey":"DCSLLCFG","key":"DCSLLConfig","abgroup":"dcsllcfg"},{"variants":[{"weight":5}],"type":"bernoulliTrial","lookupKey":"SOBLP","key":"StickyOutstreamBottomLeftExperiment","abgroup":"soblp"},{"variants":[{"weight":25}],"type":"bernoulliTrial","lookupKey":"ATCRL","key":"AdsToContentRatioLogging","abgroup":"atcrl"},{"variants":[{"weight":80}],"type":"bernoulliTrial","lookupKey":"SHTLI","key":"SharethroughLiveIntent","abgroup":"shtli"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"PALE","key":"ParallaxAdLogError","abgroup":"pale"},{"variants":[{"value":1800,"weight":10},{"value":2100,"weight":10},{"value":2400,"weight":10},{"value":2700,"weight":60},{"value":3000,"weight":10}],"type":"weightedChoice","lookupKey":"DSSMH","key":"DynamicSidebarSlotsMinHeight","abgroup":"dssmh"},{"variants":[{"value":[640,360],"weight":20},{"value":[854,480],"weight":20},{"value":[960,540],"weight":20},{"value":[1280,720],"weight":20},{"value":[1920,1080],"weight":20}],"type":"weightedChoice","lookupKey":"ISV","key":"InstreamSizeValue","abgroup":"isv"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"ISR","key":"InstreamSizeRefresh","abgroup":"isr"},{"variants":[{"value":3,"weight":25},{"value":4,"weight":25},{"value":6,"weight":25},{"value":8,"weight":25}],"type":"weightedChoice","lookupKey":"DSSC2","key":"DynamicSidebarSlotsCap","abgroup":"dssc3"},{"variants":[{"value":29000,"weight":25},{"value":28000,"weight":25},{"value":25000,"weight":25},{"value":"off","weight":25}],"type":"weightedChoice","lookupKey":"RNTTD","key":"RefreshNonTtdBidders","abgroup":"rnttd"},{"variants":[{"value":"iaba","weight":50},{"value":"iabc","weight":50}],"type":"multivalueBernoulliTrial","lookupKey":"ITHO","key":"ITHO","abgroup":"itho"},{"variants":[{"value":"ats","weight":1},{"value":"cmscr","weight":1},{"value":"mrk","weight":1},{"value":"nlsn","weight":1},{"value":"conf","weight":1},{"value":"hawk","weight":1},{"value":"tgtaff","weight":1},{"value":"amz","weight":1},{"value":"pbmss","weight":1}],"type":"multivalueBernoulliTrial","lookupKey":"TKHO_2","key":"TKHO","abgroup":"tkho_2"},{"label":"RPBS","variants":[{"value":"msp","weight":0},{"value":"mat","weight":1},{"value":"drb","weight":0},{"value":"btt","weight":0},{"value":"rrb","weight":0},{"value":"nbr","weight":0},{"value":"bdd","weight":0},{"value":"lue","weight":0},{"value":"ncnb","weight":50}],"type":"multivalueBernoulliTrial","lookupKey":"RFF","key":"RPBSFeatureFlags","abgroup":"rff"},{"variants":[{"value":"control","weight":0},{"value":"topLeft","weight":100},{"value":"topLeftAboveAd","weight":0}],"type":"weightedChoice","lookupKey":"FCP","key":"FooterCloseButtonLocation","abgroup":"fcp"},{"label":"RPBS","variants":[{"value":0.7,"weight":33},{"value":1,"weight":33},{"value":"off","weight":34}],"type":"weightedChoice","lookupKey":"SB2","key":"RPBSSplitBidders2","abgroup":"sb2"},{"label":"RPBS","variants":[{"value":1,"weight":33},{"value":1.15,"weight":33},{"value":1.3,"weight":34}],"type":"weightedChoice","lookupKey":"DFI","key":"RPBSDutchAuctionFirstStageInflator","abgroup":"dfi"},{"label":"RPBS","variants":[{"value":0.7,"weight":33},{"value":0.85,"weight":33},{"value":1,"weight":34}],"type":"weightedChoice","lookupKey":"DNI","key":"RPBSDutchAuctionSecondStageNoBidInflator","abgroup":"dni"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"RPBSP","key":"RaptivePrebidServerProxyExperiment","abgroup":"rpbsp"},{"variants":[{"value":"orcl","weight":0},{"value":"east","weight":0},{"value":"west","weight":50},{"value":"mag","weight":0},{"value":"ay","weight":50}],"type":"weightedChoice","lookupKey":"RRPBS68","key":"RaptiveRegionalPrebidServerExperiment3","abgroup":"rrpbs68"},{"variants":[{"value":"off","weight":10},{"value":"control","weight":10},{"weight":20,"value":{"kargo":0.8,"ttd":0.8,"appnexus":0.8,"pubmatic":0.8,"sharethrough":0.8,"triplelift":0.8,"openx":0.8,"ix":0.8,"yieldmo":1.2},"abvalue":"test1"},{"weight":20,"value":{"kargo":0.8,"ttd":0.8,"appnexus":0.8,"pubmatic":0.8,"sharethrough":0.8,"triplelift":0.8,"rubicon":0.8,"openx":0.8,"ix":0.8,"yieldmo":1.2},"abvalue":"test2"},{"weight":20,"value":{"kargo":1.2,"ttd":1.2,"appnexus":1.2,"pubmatic":1.2,"sharethrough":1.2,"triplelift":1.2,"rubicon":0.8,"openx":1.2,"ix":1.2,"yieldmo":0.8},"abvalue":"test3"},{"weight":20,"value":{"kargo":1.2,"ttd":1.2,"appnexus":1.2,"pubmatic":1.2,"sharethrough":1.2,"rubicon":0.8,"openx":1.2,"ix":1.2,"yieldmo":0.8},"abvalue":"test4"}],"type":"weightedChoice","lookupKey":"ODFDB","key":"OptimizedDifferentFloorsDifferentBidders","abgroup":"odfdb"},{"variants":[{"value":"off","weight":10},{"value":"control","weight":10},{"weight":20,"value":{"tripl_ss":1.2,"appnexus":1.2,"grid":1.2,"rubi_ss":0.8,"pubm_ss":0.8,"share_ss":0.8,"opnx_ss":1.2,"yah_ss":1.2,"ix_ss":0.8,"yieldmo":0.8},"abvalue":"test1"},{"weight":20,"value":{"tripl_ss":1.2,"appnexus":1.2,"grid":1.2,"rubi_ss":0.8,"pubm_ss":0.8,"share_ss":0.8,"yah_ss":1.2,"ix_ss":0.8,"yieldmo":0.8},"abvalue":"test2"},{"weight":20,"value":{"tripl_ss":0.8,"appnexus":0.8,"grid":0.8,"rubi_ss":1.2,"pubm_ss":1.2,"share_ss":1.2,"opnx_ss":0.8,"yah_ss":0.8,"ix_ss":1.2,"yieldmo":1.2},"abvalue":"test3"},{"weight":20,"value":{"tripl_ss":1.2,"appnexus":1.2,"grid":1.2,"rubi_ss":0.8,"pubm_ss":0.8,"share_ss":0.8,"opnx_ss":1.2,"ix_ss":0.8,"yieldmo":0.8},"abvalue":"test4"}],"type":"weightedChoice","lookupKey":"ODFDSB","key":"OptimizedDifferentFloorsDifferentServerBidders","abgroup":"odfdsb"},{"variants":[{"weight":25,"value":0},{"weight":25,"value":2},{"weight":25,"value":3},{"weight":25,"value":4}],"type":"weightedChoice","lookupKey":"MB","key":"MultiBid","abgroup":"mb"},{"variants":[{"value":"all","weight":99},{"value":"west","weight":1},{"value":"ay","weight":0}],"type":"weightedChoice","lookupKey":"PBSMC","key":"PrebidServerMultiCall","abgroup":"pbsmc2"},{"label":"RPBS","variants":[{"weight":90}],"type":"bernoulliTrial","lookupKey":"CCF","key":"RPBSChoseCorrectFloor","abgroup":"ccf"},{"variants":[{"value":"off","weight":0},{"value":"20s","weight":100}],"type":"weightedChoice","lookupKey":"MULTISERVERAUC","key":"RaptivePBSMultistageAuctionExperiment","abgroup":"multiserverauc"},{"variants":[{"value":0,"weight":20},{"value":2,"weight":20},{"value":4,"weight":20},{"value":6,"weight":20},{"value":8,"weight":20}],"label":"RPBS","type":"weightedChoice","lookupKey":"R_DR","key":"RPBSDoubleRequestExperiment","abgroup":"r_dr"},{"label":"RPBS","variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"FDFA","key":"RPBSFixedDynamicFloorAdjustment","abgroup":"fdfa"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"MRBF","key":"MidrollBugFixExperiment","abgroup":"mrbf"},{"variants":[{"value":0,"weight":25},{"value":1000,"weight":25},{"value":2500,"weight":25},{"value":5000,"weight":25}],"type":"weightedChoice","lookupKey":"LITO","key":"LiveIntentTimeOutExperiment","abgroup":"lito"},{"variants":[{"value":"ss","weight":100},{"value":"g_td","weight":100},{"value":"g_mw","weight":100},{"value":"g_td:pubm","weight":100},{"value":"g_mw:pubm","weight":100},{"value":"g_mw:id5id","weight":100},{"value":"g_td:id5id","weight":100},{"value":"g_td-pubm","weight":100},{"value":"g_mw-pubm","weight":100},{"value":"g_mw-id5id","weight":100},{"value":"g_td-id5id","weight":100},{"value":"ra_gpid","weight":100},{"value":"ra_shid","weight":100},{"value":"ra_lpid","weight":100},{"value":"ra_rcid","weight":100},{"value":"nl","weight":100},{"value":"url","weight":100},{"value":"urlh","weight":100},{"value":"api","weight":100},{"value":"grwm","weight":100},{"value":"cki","weight":100},{"value":"l","weight":100},{"value":"o","weight":100},{"value":"c","weight":100},{"value":"l_i","weight":100},{"value":"ot","weight":100},{"value":"slickstream","weight":100},{"value":"unknown","weight":100},{"value":"undefined","weight":100},{"value":"urlhck","weight":100},{"value":"sdkli","weight":100},{"value":"sdklir","weight":100}],"type":"multivalueBernoulliTrial","lookupKey":"HEMSA","key":"hemSourceAllowlist","abgroup":"hemsa"},{"variants":[{"value":"11","weight":1},{"value":"1911","weight":25},{"value":"21","weight":1},{"value":"169","weight":72},{"value":"43","weight":1}],"type":"weightedChoice","lookupKey":"NTVRAT","key":"NativeRatio","abgroup":"ntvrat"},{"label":"RPBS","variants":[{"value":0.1,"weight":85},{"value":0.2,"weight":5},{"value":0.3,"weight":5},{"value":"off","weight":5}],"type":"weightedChoice","lookupKey":"FFI","key":"RPBSFixedFloorIncreaser","abgroup":"ffi3"},{"variants":[{"value":20,"weight":20},{"value":23,"weight":20},{"value":25,"weight":20},{"value":28,"weight":20},{"value":30,"weight":20}],"type":"weightedChoice","lookupKey":"NTVRTL","key":"NativeRecipeTitleLength","abgroup":"ntvrtl"},{"variants":[{"weight":90}],"type":"bernoulliTrial","lookupKey":"SSPUS","key":"SSPUserSync","abgroup":"sspus"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"PAAPI","key":"PaapiExperiment","abgroup":"paapi"},{"variants":[{"value":500,"weight":100}],"type":"weightedChoice","lookupKey":"PAAPIBTO","key":"PaapiBuyerTimeout","abgroup":"paapi_bto"},{"variants":[{"value":500,"weight":100}],"type":"weightedChoice","lookupKey":"PAAPISTO","key":"PaapiSellerTimeout","abgroup":"paapi_sto"},{"variants":[{"value":500,"weight":100}],"type":"weightedChoice","lookupKey":"PAAPIRTO","key":"PaapiReportingTimeout","abgroup":"paapi_rto"},{"variants":[{"value":"ec3","weight":90},{"value":"arl","weight":5},{"value":"off","weight":5}],"type":"weightedChoice","lookupKey":"IXNT","key":"IxNativeExperiment","abgroup":"ixnt"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"MGBTFF","key":"MagniteBotTraffic","abgroup":"mgbtff"},{"variants":[{"value":"none","weight":40},{"value":"idl","weight":20},{"value":"li_uid2","weight":20},{"value":"lpid","weight":20}],"type":"weightedChoice","lookupKey":"1ST_EID2","key":"FirstEidExperiment","abgroup":"1st_eid2"},{"variants":[{"value":"er3","weight":33},{"value":"arl","weight":33},{"value":"off","weight":34}],"type":"weightedChoice","lookupKey":"IXNTR","key":"IxNativeExperimentRecipe","abgroup":"ixntr"},{"variants":[{"value":1000,"weight":5},{"value":1250,"weight":45},{"value":1500,"weight":45},{"value":1750,"weight":5}],"type":"weightedChoice","lookupKey":"S2STO","key":"S2STimeOutExperiment","abgroup":"s2sto"},{"label":"BDPL","variants":[{"value":"er3","weight":33},{"value":"arl","weight":33},{"value":"off","weight":34}],"type":"weightedChoice","lookupKey":"IXNR2","key":"IxNativeExperimentRecipe2","abgroup":"ixntr2"},{"label":"BDPL","variants":[{"value":"ec3","weight":90},{"value":"arl","weight":5},{"value":"off","weight":5}],"type":"weightedChoice","lookupKey":"IXNC2","key":"IxNativeExperiment2","abgroup":"ixnt2"},{"variants":[{"value":1500,"weight":85},{"value":2000,"weight":5},{"value":3000,"weight":5},{"value":4000,"weight":5}],"type":"weightedChoice","lookupKey":"S2STORE","key":"S2SRefreshTimeout","abgroup":"s2store"},{"variants":[{"weight":99}],"type":"bernoulliTrial","lookupKey":"OPLI","key":"OpenPathLiveIntent","abgroup":"opli"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"SSPTRM","key":"SspTakeRateMonitor","abgroup":"ssptrm"},{"variants":[{"value":0,"weight":20},{"value":75,"weight":5},{"value":100,"weight":20},{"value":120,"weight":20},{"value":140,"weight":35}],"type":"weightedChoice","lookupKey":"NTVDL","key":"NativeDescriptionLength","abgroup":"ntvdl"},{"label":"RPBS","variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"FTM2","key":"RPBSFixTmaxMax","abgroup":"ftm2"},{"label":"RPBS","variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"DIN2","key":"RPBSDowngradeIX2","abgroup":"din2"},{"variants":[{"weight":50}],"label":"RPBS","type":"bernoulliTrial","lookupKey":"BCB","key":"RPBSBidderConfigBcat","abgroup":"bcb"},{"variants":[{"weight":1}],"type":"bernoulliTrial","lookupKey":"CDIL","key":"CrossDomainIDsLog","abgroup":"cdil"},{"variants":[{"weight":90}],"label":"RPBS","type":"bernoulliTrial","lookupKey":"REF","key":"RPBSRespectEmptyFloors","abgroup":"ref"},{"variants":[{"value":"20sf1","weight":0},{"value":"20sf2","weight":100},{"value":"off","weight":0},{"value":"crr","weight":0}],"type":"weightedChoice","lookupKey":"MULTIREFAUCD3","key":"MultistagePrebidAuctionDisplay3","abgroup":"multirefaucd3"},{"variants":[{"weight":5}],"type":"bernoulliTrial","lookupKey":"APPRQ","key":"AppRequests","abgroup":"apprq"},{"variants":[{"weight":50}],"label":"RPBS","type":"bernoulliTrial","lookupKey":"BSR","key":"RPBSBidderSpecificRegs","abgroup":"bsr"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"MR4","key":"DisableMultistageRefresh","abgroup":"mr4"},{"variants":[{"weight":99}],"type":"bernoulliTrial","lookupKey":"GMAIDHO","key":"GraphMaidHoldout","abgroup":"gmaidho"},{"variants":[{"weight":50}],"label":"RPBS","type":"bernoulliTrial","lookupKey":"RAS","key":"RPBSAsyncStages","abgroup":"ras"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"MNR","key":"MissingNativeParams","abgroup":"mnr"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"DBUID2","key":"DeclareBridgedUid2","abgroup":"dbuid2"},{"variants":[{"weight":99}],"type":"bernoulliTrial","lookupKey":"YCBD","key":"YahooConnectBridgingDeclaration","abgroup":"ycbd"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"DBGPID","key":"DeclareBridgedGPID","abgroup":"dbgpid"},{"variants":[{"weight":99,"value":"rubi_ss"},{"weight":5,"value":"tripl_ss"}],"type":"multivalueBernoulliTrial","lookupKey":"APPRQB","key":"AppBiddersList","abgroup":"apprqb"},{"variants":[{"value":1000,"weight":20},{"value":2000,"weight":20},{"value":3000,"weight":20},{"value":4000,"weight":20},{"value":5000,"weight":20}],"type":"weightedChoice","lookupKey":"PBFS","key":"PrebidFailsafeTimeout","abgroup":"pbfs"},{"variants":[{"value":500,"weight":20},{"value":750,"weight":20},{"value":1000,"weight":20},{"value":1250,"weight":20},{"value":1500,"weight":20}],"type":"weightedChoice","lookupKey":"AMZFS","key":"AmazonFailsafeTimeout","abgroup":"amzfs"},{"variants":[{"weight":1}],"type":"bernoulliTrial","lookupKey":"NTVHO","key":"NativeHoldout","abgroup":"ntvho"},{"variants":[{"value":0,"weight":34},{"value":2,"weight":33},{"value":3,"weight":33}],"type":"weightedChoice","lookupKey":"DRB","key":"DisplayRequestBatch","abgroup":"drb"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"GBSR","key":"GAMBatchSRARequest","abgroup":"gbsr"},{"variants":[{"value":5,"weight":20},{"value":3,"weight":20},{"value":7,"weight":20},{"value":10,"weight":20},{"value":"off","weight":20}],"type":"weightedChoice","lookupKey":"LBPE","key":"LimitBidPoolExperiment","abgroup":"lbpe"},{"variants":[{"value":100,"weight":20},{"value":200,"weight":20},{"value":300,"weight":20},{"value":400,"weight":20},{"value":500,"weight":20}],"type":"weightedChoice","lookupKey":"VSE","key":"VideoScrollExperiment","abgroup":"vse"},{"variants":[{"value":0,"weight":25},{"value":250,"weight":25},{"value":500,"weight":25},{"value":1000,"weight":25}],"type":"weightedChoice","lookupKey":"IISW","key":"IdentityIframeSyncWait","abgroup":"iisw"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"ADXISO","key":"AdxStickyOutstream","abgroup":"adxiso"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"ADXISO2","key":"AdxStickyOutstreamV2","abgroup":"adxiso2"},{"variants":[{"value":-1,"weight":4},{"value":500,"weight":95},{"value":1024,"weight":1}],"type":"weightedChoice","lookupKey":"IMABR","key":"IMABitrate","abgroup":"imabr"},{"variants":[{"value":0,"weight":20},{"value":20,"weight":20},{"value":35,"weight":20},{"value":50,"weight":20},{"value":"off","weight":20}],"type":"weightedChoice","lookupKey":"RPBBL","key":"RaptivePlayerBackBufferLength","abgroup":"rpbbl"},{"variants":[{"weight":80}],"type":"bernoulliTrial","lookupKey":"UID1VOV","key":"Uid1ValueOverride","abgroup":"uid1vov"},{"variants":[{"weight":10}],"type":"bernoulliTrial","lookupKey":"ESE","key":"EventStreamerExperiment","abgroup":"ese"},{"variants":[{"value":10,"weight":20},{"value":20,"weight":20},{"value":30,"weight":20},{"value":60,"weight":20},{"value":"off","weight":20}],"type":"weightedChoice","lookupKey":"RPFBT","key":"RaptivePlayerFrontBufferThreshold","abgroup":"rpfbt"},{"variants":[{"value":1,"weight":20},{"value":5,"weight":20},{"value":10,"weight":20},{"value":20,"weight":20},{"value":30,"weight":20}],"type":"weightedChoice","lookupKey":"RPMBL","key":"RaptivePlayerMaxBufferLength","abgroup":"rpmbl"},{"variants":[{"value":10,"weight":20},{"value":50,"weight":20},{"value":100,"weight":20},{"value":250,"weight":20},{"value":600,"weight":20}],"type":"weightedChoice","lookupKey":"RPMMBL","key":"RaptivePlayerMaxMaxBufferLength","abgroup":"rpmmbl"},{"variants":[{"value":5,"weight":20},{"value":20,"weight":20},{"value":35,"weight":20},{"value":50,"weight":20},{"value":60,"weight":20}],"type":"weightedChoice","lookupKey":"RPMBS","key":"RaptivePlayerMaxBufferSize","abgroup":"rpmbs"},{"variants":[{"value":20,"weight":20},{"value":25,"weight":20},{"value":30,"weight":20},{"value":35,"weight":20},{"value":40,"weight":20}],"type":"weightedChoice","lookupKey":"RPSLT","key":"RaptivePlayerStaleLoadThreshold","abgroup":"rpslt"},{"variants":[{"value":"d","weight":90},{"value":"7","weight":10}],"type":"weightedChoice","lookupKey":"LIFPI","key":"LiveIntentFpiExpiration","abgroup":"lifpi"},{"variants":[{"weight":90}],"type":"bernoulliTrial","lookupKey":"IVD","key":"InnovidLog","abgroup":"ivd"},{"variants":[{"value":50,"weight":10},{"value":100,"weight":30},{"value":150,"weight":30},{"value":200,"weight":20},{"value":250,"weight":10}],"type":"weightedChoice","lookupKey":"PBRQT","key":"PrebidRequestQueueTimeout","abgroup":"pbrqt"},{"variants":[{"weight":1}],"type":"bernoulliTrial","lookupKey":"GAAM","key":"GenericAnalyticsAdMarkup","abgroup":"gaam"},{"variants":[{"weight":65}],"type":"bernoulliTrial","lookupKey":"IIQA","key":"IntentIqAnalytics","abgroup":"iiqa"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"IIQAL","key":"IntentIqAnalyticsLogs","abgroup":"iiqal"},{"variants":[{"value":"bc","weight":50},{"value":"nobc","weight":0},{"value":"off","weight":50}],"type":"weightedChoice","lookupKey":"PUBBCAT","key":"PubmaticBCats","abgroup":"pubbcat"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"RPEP","key":"RaptivePlayerEnablePreloading","abgroup":"rpep"},{"variants":[{"value":4000,"weight":20},{"value":6000,"weight":20},{"value":8000,"weight":20},{"value":10000,"weight":20},{"value":15000,"weight":20}],"type":"weightedChoice","lookupKey":"RPLVTO","key":"RaptivePlayerLoadVideoTimeout","abgroup":"rplvto"},{"variants":[{"value":0,"weight":25},{"value":2,"weight":25},{"value":3,"weight":25},{"value":4,"weight":25}],"type":"weightedChoice","lookupKey":"CBS","key":"CacheBatchSize","abgroup":"cbs"},{"variants":[{"value":100,"weight":20,"abvalue":"100ms"},{"value":200,"weight":20,"abvalue":"200ms"},{"value":300,"weight":20,"abvalue":"300ms"},{"value":400,"weight":20,"abvalue":"400ms"},{"value":500,"weight":20,"abvalue":"500ms"}],"type":"weightedChoice","lookupKey":"CBT","key":"CacheBatchTimeout","abgroup":"cbt"},{"variants":[{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"33across","abvalue":"33"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"adform","abvalue":"af"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"appnexus","abvalue":"an"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"conversant","abvalue":"cv"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"criteo","abvalue":"cr"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"flipp","abvalue":"fl"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"gridvid","abvalue":"gv"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"gumgum","abvalue":"gg"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"ix","abvalue":"ix"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"kargo","abvalue":"kg"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"nativo","abvalue":"nt"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"openx","abvalue":"ox"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"ozone","abvalue":"oz"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"pubmatic","abvalue":"pm"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"resetdigital","abvalue":"rd"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"rise","abvalue":"ri"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"rubicon","abvalue":"rb"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"sharethrough","abvalue":"sh"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"teads","abvalue":"te"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"triplelift","abvalue":"tl"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"ttd","abvalue":"td"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"undertone","abvalue":"ut"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"unruly","abvalue":"ur"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"yahoossp","abvalue":"yh"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"yieldmo","abvalue":"ym"}],"type":"multivalueWeightedChoice","lookupKey":"DFDB","key":"DifferentFloorDifferentBidder","abgroup":"dfdb"},{"variants":[{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"33across","abvalue":"33"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"adform","abvalue":"af"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"appnexus","abvalue":"an"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"conversant","abvalue":"cv"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"crit_ss","abvalue":"cr"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"flipp","abvalue":"fl"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"grid","abvalue":"gs"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"gumgum","abvalue":"gg"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"ix_ss","abvalue":"ix"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"ntvo_ss","abvalue":"nt"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"opnx_ss","abvalue":"ox"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"pubm_ss","abvalue":"pm"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"resetdigital","abvalue":"rd"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"rise","abvalue":"ri"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"rubi_ss","abvalue":"rb"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"share_ss","abvalue":"sh"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"tripl_ss","abvalue":"tl"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"under_ss","abvalue":"ut"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"unruly","abvalue":"ur"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"yah_ss","abvalue":"yh"},{"choices":[{"value":0.8,"weight":10},{"value":1,"weight":80},{"value":1.2,"weight":10}],"value":"yieldmo","abvalue":"ym"}],"type":"multivalueWeightedChoice","lookupKey":"DFDSB","key":"DifferentFloorDifferentServerBidder","abgroup":"dfdsb"},{"variants":[{"value":50,"weight":25},{"value":100,"weight":25},{"value":200,"weight":25},{"value":400,"weight":25}],"type":"weightedChoice","lookupKey":"ECHDE","key":"EmailCaptureHandlerDebounceExperiment","abgroup":"echde"},{"variants":[{"value":1,"weight":0},{"value":"off","weight":100}],"label":"RPBS","type":"weightedChoice","lookupKey":"ASF","key":"RPBSAvoidSameFloor","abgroup":"asf"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"MMBR","key":"MaxMaxBufferReset","abgroup":"mmbr"},{"variants":[{"value":0,"weight":25},{"value":1,"weight":5},{"value":2,"weight":25},{"value":3,"weight":20},{"value":4,"weight":25}],"type":"weightedChoice","lookupKey":"ICFT","key":"InstreamCreativeFailureThreshold","abgroup":"icft"},{"variants":[{"value":0,"weight":25},{"value":1,"weight":5},{"value":2,"weight":25},{"value":3,"weight":20},{"value":4,"weight":25}],"type":"weightedChoice","lookupKey":"OCFT","key":"OutstreamCreativeFailureThreshold","abgroup":"ocft"},{"variants":[{"value":1.1,"weight":49},{"value":1.2,"weight":49},{"value":"off","weight":2}],"label":"RPBS","type":"weightedChoice","lookupKey":"R_INFMLT","key":"RPBSInflatorMultiplier","abgroup":"r_infmlt"},{"variants":[{"value":1.1,"weight":33},{"value":1.2,"weight":33},{"value":"off","weight":34}],"label":"RPBS","type":"weightedChoice","lookupKey":"MFM","key":"RPBSMultistageFloorMultiplier","abgroup":"mfm"},{"label":"RPBS","variants":[{"value":1,"weight":33},{"value":1.25,"weight":33},{"value":1.5,"weight":34}],"type":"weightedChoice","lookupKey":"DBI","key":"RPBSDutchAuctionSecondStageBidInflator","abgroup":"dbi"},{"variants":[{"weight":5}],"type":"bernoulliTrial","lookupKey":"IXNR","key":"IXRefresh","abgroup":"ixnr"},{"variants":[{"value":0,"weight":20},{"value":50,"weight":20},{"value":100,"weight":20},{"value":200,"weight":20},{"value":400,"weight":20}],"type":"weightedChoice","lookupKey":"ECHDE2","key":"EmailCaptureHandlerDebounceExperiment_2","abgroup":"echde2"},{"variants":[{"weight":1}],"type":"bernoulliTrial","lookupKey":"VPSM","key":"ViewportSampling","abgroup":"vpsm"},{"variants":[{"value":0,"weight":25},{"value":0.5,"weight":25},{"value":1,"weight":25},{"value":2,"weight":25}],"type":"weightedChoice","lookupKey":"RFAVT","key":"RefreshAuctionViewportThreshold","abgroup":"rfavt"},{"label":"RPBS","variants":[{"value":2,"weight":100}],"type":"weightedChoice","lookupKey":"SCA","key":"StagesCountAdjustment","abgroup":"sca"},{"variants":[{"value":"off","weight":2},{"value":"bg","weight":0},{"value":"sm","weight":98},{"value":"rv","weight":0}],"type":"weightedChoice","lookupKey":"SO2","key":"SizeOrder2","abgroup":"so2"},{"variants":[{"value":"off","weight":20},{"value":"bg","weight":20},{"value":"sm","weight":20},{"value":"sm1","weight":20},{"value":"rv","weight":20}],"type":"weightedChoice","lookupKey":"BWH","key":"BannerWidthHeight","abgroup":"bwh"},{"variants":[{"value":"off","weight":2},{"value":"sm","weight":98}],"type":"weightedChoice","lookupKey":"SO","key":"SizeOrder","abgroup":"so"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"RP","key":"RaptivePlayerOverride","abgroup":"rp"},{"variants":[{"value":"off","weight":34},{"value":1,"weight":33},{"value":2,"weight":33}],"label":"RPBS","type":"weightedChoice","lookupKey":"RDR","key":"RPBSRegionalDoubleRequest","abgroup":"rdr"},{"variants":[{"value":15,"weight":0},{"value":25,"weight":100}],"type":"weightedChoice","lookupKey":"ADVD","key":"AdvancePlaylistDelay","abgroup":"advd"},{"label":"RPBS","variants":[{"value":"off","weight":100},{"value":1,"weight":0},{"value":2,"weight":0}],"type":"weightedChoice","lookupKey":"BFC","key":"RPBSBidFloorAdjustAlgorithm","abgroup":"bfc"},{"variants":[{"weight":98}],"type":"bernoulliTrial","lookupKey":"VADF","key":"VideoAuctionDurationFallbackExperiment","abgroup":"vadf"},{"label":"RPBS","variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"BSB","key":"RPBSBackOffSlowBidders","abgroup":"bsb"},{"label":"RPBS","variants":[{"value":0.85,"weight":25},{"value":0.9,"weight":25},{"value":0.95,"weight":25},{"value":"off","weight":25}],"type":"weightedChoice","lookupKey":"DFA","key":"RPBSDynamicFloorAdjustment","abgroup":"dfa3"},{"variants":[{"value":0,"weight":100},{"value":1,"weight":0}],"type":"weightedChoice","lookupKey":"VRE","key":"VideoPreloadRetriesExperiment","abgroup":"vre"},{"label":"RPBS","variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"DEF","key":"RPBSDryExtFields","abgroup":"def2"},{"variants":[{"value":"rpbs","weight":100},{"value":"mag","weight":0}],"type":"weightedChoice","lookupKey":"PBSGR","key":"PrebidServerGDPRRouting","abgroup":"pbsgr"},{"label":"RPBS","variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"BPS2","key":"RPBSBiddersPerStage2","abgroup":"bps3"},{"label":"RPBS","variants":[{"value":1,"weight":0},{"value":"off","weight":100}],"type":"weightedChoice","lookupKey":"SBO","key":"ServerBackoff","abgroup":"sbo"},{"label":"RPBS","variants":[{"value":1,"weight":34},{"value":2,"weight":33},{"value":3,"weight":33},{"value":"off","weight":0}],"type":"weightedChoice","lookupKey":"SBO2","key":"RPBSServerBackoff2","abgroup":"sbo2"},{"variants":[{"value":"default","weight":90},{"value":"single","weight":5},{"value":"both","weight":5}],"type":"weightedChoice","lookupKey":"UID1SRC","key":"Uid1AdserverExperiment","abgroup":"uid1src"},{"variants":[{"value":15000,"weight":25},{"value":10000,"weight":25},{"value":5000,"weight":25},{"value":2000,"weight":25}],"type":"weightedChoice","lookupKey":"IMAIV","key":"IOSMobileAdInViewExperiment","abgroup":"imaiv"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"AYSSEWOLI","key":"AyServerSideEnrichmentWithoutLiveIntent","abgroup":"ayssewoli"},{"variants":[{"weight":50}],"label":"RPBS","type":"bernoulliTrial","lookupKey":"UGI","key":"RPBSUnrulyGPID","abgroup":"ugi"},{"variants":[{"weight":95}],"type":"bernoulliTrial","lookupKey":"AYSSEWLI","key":"AyServerSideEnrichmentWithLiveIntent","abgroup":"ayssewli"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"ARF","key":"AdditiveRefreshFloors","abgroup":"arf"},{"variants":[{"value":500,"weight":50},{"value":200,"weight":50}],"type":"weightedChoice","lookupKey":"FMBDT0","key":"FetchMarginWithMinBidCacheTTLAt0","abgroup":"fmbdt0"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"AMZNTS","key":"AmazonTrafficShaping","abgroup":"amznts"},{"variants":[{"weight":0}],"type":"bernoulliTrial","lookupKey":"OBTS","key":"OpenBiddingTrafficShaping","abgroup":"obts"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"MULTISOSD","key":"MultiStageStickyOutstreamShorterDuration","abgroup":"multisosd"},{"variants":[{"value":3,"weight":25},{"value":7,"weight":25},{"value":10,"weight":25},{"value":15,"weight":25}],"type":"weightedChoice","lookupKey":"LRBPE","key":"LimitRecipeBidPoolExperiment","abgroup":"lrbpe"},{"variants":[{"weight":100}],"type":"bernoulliTrial","lookupKey":"SBH","key":"SlotBidHeight","abgroup":"sbh"},{"variants":[{"weight":50}],"type":"bernoulliTrial","lookupKey":"DDLGCWV","key":"DisableDelayLoadingGoodCWV","abgroup":"ddlgcwv"},{"variants":[{"value":1,"weight":2},{"value":0.75,"weight":2},{"value":0.66,"weight":2},{"value":0.5,"weight":92},{"value":0.33,"weight":2}],"type":"weightedChoice","lookupKey":"ADVT","key":"AdvancePlaylistTimer","abgroup":"advt"},{"variants":[{"value":1,"weight":10},{"value":3,"weight":90}],"type":"weightedChoice","lookupKey":"WLDM","key":"WakeLockDurationMultiplier","abgroup":"wldm"},{"variants":[{"weight":6}],"type":"bernoulliTrial","lookupKey":"ACS","key":"AmazonCompetitiveSeparation","abgroup":"acs"},{"variants":[{"value":"11-10,11-19|11-26,11-28|12-23,12-26","weight":100}],"type":"weightedChoice","lookupKey":"LLIDR","key":"LLIDateRanges","abgroup":"llidr"},{"variants":[{"value":"","weight":100}],"type":"weightedChoice","lookupKey":"ACSD","key":"ACSDateRanges","abgroup":"acsd"},{"variants":[{"value":1,"weight":0},{"value":2,"weight":50},{"value":3,"weight":0},{"value":"off","weight":50}],"type":"weightedChoice","lookupKey":"LLIDRW","key":"LLIDateRangeWeights","abgroup":"llidrw"},{"variants":[{"value":1,"weight":2},{"value":2,"weight":2},{"value":3,"weight":2},{"value":"off","weight":94}],"type":"weightedChoice","lookupKey":"LLI","key":"LazyLoadWithIntersectionObservers","abgroup":"lli"},{"variants":[{"value":2.5,"weight":30},{"value":2,"weight":50},{"value":1.5,"weight":0},{"value":1,"weight":20}],"type":"weightedChoice","lookupKey":"LLRV","key":"LazyLoadRenderViewport","abgroup":"llrv"},{"variants":[{"value":1,"weight":25},{"value":2.5,"weight":25},{"value":5,"weight":25},{"value":10,"weight":25}],"type":"weightedChoice","lookupKey":"VSR","key":"ViewportThresholdSlotRemoval","abgroup":"vsr"},{"variants":[{"value":30000,"weight":100},{"value":5000,"weight":0},{"value":"off","weight":0}],"type":"weightedChoice","lookupKey":"RSVI","key":"RestartStickyVideoInactive","abgroup":"rsvi"},{"variants":[{"value":2.5,"weight":33,"abvalue":"2.5"},{"value":5,"weight":34,"abvalue":"5"},{"value":10,"weight":33,"abvalue":"10"}],"type":"weightedChoice","lookupKey":"SVI","key":"ScrollVelocityInsertion","abgroup":"svi"}]};

    
(function() {
  let css = ".adthrive-act25-modal{z-index:2147483647;background-color:#0006;width:100%;height:100%;display:none;position:fixed;top:0;left:0;overflow:auto}.adthrive-act25-modal.show{display:block}.adthrive-act25-modal-content{background-color:#fefefe;border:1px solid #888;border-radius:10px;width:80%;max-width:592px;margin:auto;padding:20px 24px 24px;font-family:Verdana,Geneva,Tahoma,sans-serif;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:0 0 10px #00000080}.adthrive-act25-modal-close{color:#000;font-size:28px;font-weight:700;position:fixed;top:-10px;right:3px}.adthrive-act25-modal-close:hover,.adthrive-act25-modal-close:focus{color:#000;cursor:pointer;text-decoration:none}.adthrive-act25-modal-header{padding:2px 16px}.adthrive-act25-modal-header h1{color:#000000de;font-size:20px;line-height:26px}.adthrive-act25-modal-body{max-height:50vh;margin-bottom:10px;padding:10px 16px;position:relative;overflow-y:auto}.adthrive-act25-modal-body p{font-size:14px;line-height:20px}.adthrive-act25-modal-footer{color:#fff;flex-direction:column;justify-content:space-between;padding:2px 16px;display:flex}.adthrive-act25-modal-accept,.adthrive-act25-modal-decline{color:#fff;cursor:pointer;border:none;border-radius:10px}.adthrive-act25-modal-accept{background-color:#010044}.adthrive-act25-modal-decline{color:#000;background-color:#fff}.adthrive-act25-modal-accept,.adthrive-act25-modal-decline{text-transform:uppercase;flex:1;margin:0 10px 10px 0}.adthrive-act25-modal-accept:hover,.adthrive-act25-modal-accept:focus{color:#c4c4c4;background-color:#010044}.adthrive-act25-modal-decline:hover,.adthrive-act25-modal-decline:focus{color:#000;background-color:#fff}@media (width<=600px){.adthrive-act25-modal-content{width:90%}.adthrive-act25-modal-body{border-bottom:1px solid #c4c4c4;box-shadow:inset 0 -100px 30px -100px #0000001a}.adthrive-act25-modal-accept,.adthrive-act25-modal-decline{font-size:14px;line-height:14px}}@media (width>=600px){.adthrive-act25-modal-footer{flex-direction:row}.adthrive-act25-modal-accept,.adthrive-act25-modal-decline{flex:none;margin:0}}.adthrive-act25-footer{margin-bottom:30px}.adthrive-act25-footer-text{color:#a9a9a9;font-size:14px}.adthrive-act25-footer-text p{color:#a9a9a9;text-decoration:underline}.adthrive-act25-footer-link{cursor:pointer;font-size:14px;text-decoration:underline}.adthrive-ad{text-align:center;clear:both;margin-top:10px;margin-bottom:10px;line-height:0;overflow-x:visible}.adthrive-ad-cls{flex-wrap:wrap;justify-content:center;align-items:center;display:flex}.adthrive-ad-cls>div,.adthrive-ad-cls>iframe{flex-basis:100%}.adthrive-interstitial{margin-top:0;margin-bottom:0}.adthrive-native-recipe{display:inline-block}.adthrive-recipe{z-index:1;min-width:300px;position:relative}.adthrive-footer-mobile,.adthrive-header-mobile,.adthrive-footer-phone,.adthrive-header-phone{min-height:50px}.adthrive-footer-desktop,.adthrive-header-desktop,.adthrive-header-tablet,.adthrive-footer-tablet{min-height:90px}.adthrive-content,.adthrive-recipe,.adthrive-sidebar,.adthrive-below-post{min-height:250px}.adthrive-sidebar9-fallback{flex-direction:column;justify-content:flex-start;align-items:center;margin:10px 0;display:flex}.adthrive-sidebar9-fallback>div{flex-basis:unset;top:5px;position:sticky!important}.adthrive-fit-content .adthrive-content{min-height:250px;width:fit-content!important;min-width:300px!important;max-width:fit-content!important;margin-left:auto!important;margin-right:auto!important}.adthrive-fit-content .adthrive-ad.adthrive-content:has(.raptive-sales-mural){width:100%!important;max-width:100%!important}.adthrive-device-desktop .adthrive-recipe,.adthrive-device-tablet .adthrive-recipe{max-width:320px}.adthrive-stuck.adthrive-sticky.adthrive-sidebar,.adthrive-stuck.adthrive-sticky.adthrive-header{z-index:9999;position:fixed;top:0}.adthrive-stuck.adthrive-header{margin-top:0}.adthrive-stuck.adthrive-sticky-outstream{z-index:2147483644;display:none;position:fixed}.adthrive-sticky.adthrive-footer{text-align:center;z-index:1000001;box-sizing:content-box;background-color:#fffc;border-top:2px solid #e1e1e1cc;width:100%;max-height:100px;margin:0;position:fixed;bottom:0;left:0;overflow:hidden}.adthrive-sticky.adthrive-footer>.adthrive-close{cursor:pointer;color:#b2b2b2;background:#fff;border:1px solid #b2b2b2;border-radius:20px;padding:0 5px;font-family:Arial,sans-serif;font-size:20px;line-height:20px;display:inline-block;position:absolute;top:5px;right:5px}.adthrive-device-desktop .adthrive-sticky.adthrive-footer>.adthrive-close{top:10px;right:10px}.adthrive-footer-message,.adthrive-privacy-preferences,.adthrive-ccpa-link{text-align:center;margin-top:5px}.adthrive-footer>div,.adthrive-header>div{max-width:1200px}.raptive-player-reset>*{box-sizing:border-box;float:none;clear:both;box-shadow:none;font-variant:normal;letter-spacing:normal;overflow-wrap:normal;text-align:left;text-transform:none;word-spacing:normal;white-space:normal;color:inherit;direction:ltr;background-color:#0000;border:0;margin:0;padding:0;font-family:Arial,Helvetica,sans-serif;font-size:16px;font-style:normal;font-weight:400;font-stretch:100%;line-height:1.2;text-decoration:none;display:block}#next-video,#stay-video{opacity:.9;text-align:center;cursor:pointer;color:#fff;text-transform:capitalize;background-color:#333;width:100px;height:40px;margin:5px;line-height:40px;position:relative}.adthrive-collapse-mobile #next-video,.adthrive-collapse-mobile #stay-video,.adthrive-player-position-mobile #next-video,.adthrive-player-position-mobile #stay-video,.raptive-player-container-mobile #next-video,.raptive-player-container-mobile #stay-video{width:75px;height:30px;line-height:30px}#next-stay-container{z-index:1;flex-flow:column;justify-content:center;margin:12px;display:flex;position:absolute;top:0;bottom:0;right:0}.adthrive-collapse-mobile #next-stay-container,.adthrive-player-position-mobile #next-stay-container,.raptive-player-container-mobile #next-stay-container{margin:0}#next-video:before{content:\"\";z-index:1;will-change:transform,opacity;transform-origin:0;background-color:red;width:100%;height:100%;display:block;position:absolute}#next-stay-container.active>#next-video:before{animation:5s linear scaleInFromLeft}#next-video span{z-index:2;position:relative}@keyframes scaleInFromLeft{0%{opacity:0;transform:scaleX(0)}to{opacity:1;transform:scaleX(1)}}.video-box-shadow{box-shadow:0 0 10px #00000080}.adthrive-wrapper-bar{background-color:#595959;border-top-left-radius:5px;border-top-right-radius:5px;height:36px;font-family:Arial,Helvetica,sans-serif;display:none}.adthrive-video-title{color:#fff;font-size:13px;font-weight:700;text-decoration:none}.adthrive-wrapper-title-wrapper{min-width:0;box-shadow:none;border:none;justify-content:center;align-items:center;margin-left:10px;margin-right:10px;display:inline-flex}.adthrive-wrapper-title-wrapper>a>svg,.adthrive-wrapper-title-wrapper>div>svg{vertical-align:middle;fill:#fff;margin-right:5px}.adthrive-wrapper-title-wrapper>a{text-decoration:none}.adthrive-video-text-cutoff{text-overflow:ellipsis;white-space:nowrap;color:#fff;overflow:hidden}.adthrive-collapse-player{border-top:1px solid #dbdbdb;border-bottom:1px solid #dbdbdb;width:90%;margin-left:auto;margin-right:auto;padding:8px!important}.adthrive-outstream-container{margin:0 auto;position:relative;flex-basis:unset!important}.adthrive-player-idle{transition:all .5s ease-out .5s;display:none}.raptive-player-ad-container-idle{display:none}.adthrive-player-playing{transition:all .5s ease-in .5s;display:block}.adthrive-sticky-outstream-active.adthrive-new-outstream-player{opacity:1;animation-name:adthrive-fade-in;animation-duration:.5s;animation-timing-function:ease-in;animation-iteration-count:1}.adthrive-sticky-outstream-idle.adthrive-new-outstream-player{opacity:0;animation-name:adthrive-fade-out;animation-duration:.5s;animation-timing-function:ease-out;animation-iteration-count:1;display:block}@keyframes adthrive-fade-in{0%{opacity:0}to{opacity:1}}@keyframes adthrive-fade-out{0%{opacity:1}to{opacity:0}}.adthrive-player-ad-controls-play{z-index:1001;margin:-5px 4px}.adthrive-player-icon-play>svg{margin-left:4px}.adthrive-player-ad-controls-pause{justify-content:center;display:flex}.adthrive-player-ad-controls-volume-container{z-index:1001;border-radius:36px;flex-direction:column-reverse;height:36px;display:flex;position:relative}.adthrive-player-ad-controls-volume-container-with-bar{top:-5px}.adthrive-player-ad-controls-volume-container>.adthrive-player-ad-controls-volume{flex-direction:column-reverse;height:55px;display:flex;position:relative}.adthrive-player-ad-controls>.adthrive-player-ad-controls-volume-container,.adthrive-player-ad-controls-volume>.adthrive-player-icon-volume-muted,.adthrive-player-ad-controls-volume>.adthrive-player-icon.adthrive-player-icon-volume-unmuted,.adthrive-player-ad-controls-play>.adthrive-player-icon.adthrive-player-icon-pause,.adthrive-player-ad-controls-volume>.adthrive-player-volume-control{margin-block-start:0}.adthrive-player-icon-volume-muted,.adthrive-player-icon-volume-unmuted{z-index:2}.adthrive-player-volume-control{z-index:1}.adthrive-player-ad-controls-play,.adthrive-player-ad-controls-volume{border-radius:36px;width:36px;height:36px;display:inline-block}.adthrive-player-ad-controls-play:hover,.adthrive-player-ad-controls-volume-container:hover,.adthrive-player-icon-fullscreen:hover,.adthrive-player-icon-fullscreen:focus{background:#0000004d}.adthrive-player-ad-controls-volume-container-with-slider:hover{background:0 0}.adthrive-player-ad-controls-volume-container.active{z-index:1001}.adthrive-player-icon{cursor:pointer;background:0 0;border:none;border-radius:100%;justify-content:center;align-items:center;width:36px;height:36px;margin-right:4px;padding:0;display:flex}.adthrive-hidden{display:none!important}.adthrive-count-down{z-index:1;pointer-events:none;color:#fff;text-shadow:0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000;background:#00000080;border-bottom-right-radius:4px;outline:none;width:auto;height:auto;padding:4px;font-size:12px;line-height:1.2;position:absolute;top:0;left:0}.adthrive-collapse-medium>.adthrive-count-down,.adthrive-collapse-small>.adthrive-count-down{padding:2px}.adthrive-player-icon svg{pointer-events:none;filter:drop-shadow(3px 5px 3px #00000080)}.adthrive-player-ad-container{margin:0;position:absolute;bottom:0}.adthrive-player-ad-container-loading{background-color:#000;justify-content:center;align-items:center;height:100%;display:flex}.adthrive-player-ad-container{overflow:hidden}.adthrive-loading-spinner-container{z-index:2147483647;justify-content:center;align-items:center;position:absolute;inset:0}.adthrive-loading-spinner{border:3px solid #ffffff4d;border-top-color:#fff;border-radius:50%;width:50px;height:50px;-webkit-animation:1s ease-in-out infinite spin;animation:1s ease-in-out infinite spin}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg)}}@keyframes spin{to{-webkit-transform:rotate(360deg)}}.adthrive-title-overlay{box-sizing:border-box;z-index:1;color:#fff;background:#0006;border-radius:0;flex-direction:row;justify-content:flex-start;align-items:center;height:0;transition:background .3s ease-out;display:flex;position:absolute;top:0;left:0;right:0}.adthrive-title-overlay.active{height:36px}.adthrive-title-overlay>.adthrive-wrapper-title-wrapper{flex-direction:row-reverse;align-items:center;width:100%;height:100%;text-decoration:none;display:none;overflow:hidden}.adthrive-title-overlay.active>.adthrive-wrapper-title-wrapper{display:flex}.raptive-player-ad-loading>.adthrive-title-overlay,.adthrive-title-overlay.active>.adthrive-wrapper-title-wrapper:after{display:none}.adthrive-wrapper-bar a[target=_blank]:after{display:none!important}.adthrive-no-pointer-events{pointer-events:none}.adthrive-display-none{display:none}.adthrive-small-text{font-size:13px}.adthrive-video-title-description-container{flex-direction:column;flex:1;height:100%;font-size:1.2em;line-height:1.1em;display:flex}#adthrive-video-title-text{flex:1;align-items:center;display:flex}.adthrive-player-position-mobile #adthrive-video-title-text,.raptive-player-container-mobile #adthrive-video-title-text{font-size:.85em}#adthrive-video-description-text{text-overflow:ellipsis;white-space:nowrap;flex:1;align-items:center;margin:-4px 0 0;font-size:1vw;display:flex;overflow:hidden}.adthrive-video-play-button{cursor:pointer;z-index:1;border-top:30px solid #0000;border-bottom:30px solid #0000;border-left:60px solid #fff;width:0;height:0}.raptive-player-position{clear:both;background-color:#000;width:100%;padding-top:56.25%;position:relative}.raptive-player-container{z-index:1;height:100%;position:absolute;inset:0}.raptive-player-hidden{display:none}.raptive-player-video{width:100%;height:100%;margin-block:0!important}.raptive-player-collapse{z-index:2147483644;background-color:#000;max-height:169px}.adthrive-video-overlay{cursor:pointer;z-index:4;background-color:#00000080;justify-content:center;align-items:center;margin-block-start:unset;display:flex;position:absolute;inset:0}.adthrive-player-big-play-button{color:#6b65ff;font-size:48px}@media (width<=480px){.adthrive-player-big-play-button{font-size:44px}}@media (width>=481px) and (width<=768px){.adthrive-player-big-play-button{font-size:77px}}@media (width>=769px){.adthrive-player-big-play-button{font-size:88px}}.adthrive-sticky-outstream.adthrive-sticky-outstream-mobile .adthrive-player-ad-container{margin-top:2px;margin-bottom:2px}.adthrive-player-ad-controls.adthrive-player-ad-controls-hidden{pointer-events:none;opacity:0!important;transition:opacity .5s!important}.adthrive-player-ad-controls{text-align:left;z-index:1000000;opacity:1;width:100%;height:50px;padding:0;line-height:18px;transition:opacity .5s ease-out,transform .2s ease-out;display:flex;position:absolute;bottom:0;left:0;transform:translateY(12px)}.adthrive-full-width{width:100%}.adthrive-player-ad-controls.adthrive-player-progress-bar-visible{transform:translateY(0)}.adthrive-player-progress-bar-container{cursor:pointer;z-index:1000;pointer-events:all;width:96%;height:20px;display:none;position:absolute;bottom:0;left:2%}.adthrive-collapse-mobile .adthrive-player-progress-bar-container{width:94%;left:3%}.adthrive-player-progress-bar-container.active{display:initial}.adthrive-player-progress-bar{background-color:#ccc;border-radius:36px;width:100%;height:6px;margin:auto 0;position:absolute;top:0;bottom:0;overflow:hidden}.adthrive-player-progress-bar div{transform-origin:0;content:\"\";background-color:#6b65ff;width:100%;height:100%;display:block}.adthrive-player-progress-bar-handle{touch-action:none;z-index:1001;background-color:#6b65ff;border-radius:50%;width:12px;height:12px;position:absolute;top:50%;left:0;transform:translate(-50%,-50%)scale(1);box-shadow:0 0 10px #0006}.adthrive-player-progress-bar-handle:before{content:\"\";width:20px;height:20px;display:block;transform:translate(-4px,-4px)}.adthrive-player-volume-control{opacity:0;z-index:1;transform-origin:18px;background:#00000080;border-radius:36px;justify-content:center;align-items:center;width:120px;height:36px;margin:auto;padding-left:30px;display:flex;position:absolute;transform:rotate(270deg)}.adthrive-player-volume-control.adPlaying{top:20px}.adthrive-player-volume-control input[type=range]{-webkit-appearance:none;vertical-align:bottom;cursor:pointer;width:65px;height:10px;box-shadow:none;z-index:1001;background-color:#777;border:0;border-radius:20px;outline:0;margin:0;padding:0;position:relative;overflow:hidden}.adthrive-player-volume-control input[type=range]::-webkit-slider-runnable-track{-webkit-appearance:none;color:#777;height:10px;margin-top:-1px}.adthrive-player-volume-control input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;cursor:pointer;background:#fff;border-radius:50%;width:10px;height:10px;position:relative;top:.5px;box-shadow:-325px 0 0 320px #6b65ff,inset 0 0 0 40px #fff}.adthrive-player-volume-control input[type=range]:active::-webkit-slider-thumb{background:#fff;box-shadow:-325px 0 0 320px #6b65ff,inset 0 0 0 3px #fff}.adthrive-player-volume-control input[type=range]::-moz-range-thumb{width:10px;height:10px}.adthrive-player-volume-control input[type=range]::-moz-range-progress{background-color:#ddd;box-shadow:-325px 0 0 320px #6b65ff,inset 0 0 0 3px #6b65ff}.adthrive-player-volume-control input[type=range]::-moz-range-track{background-color:#777}.adthrive-player-volume-control input[type=range]::-ms-fill-lower{background-color:#ddd;box-shadow:-325px 0 0 320px #6b65ff,inset 0 0 0 3px #6b65ff}.adthrive-player-volume-control input[type=range]::-ms-fill-upper{background-color:#777}.adthrive-jw-player-collapse{z-index:2147483644}.adthrive-player-position.adthrive-collapse-float,.raptive-player-container.adthrive-collapse-float{position:fixed;width:300px!important}.adthrive-player-position.adthrive-collapse-float #adthrive-video-description-text,.raptive-player-container.adthrive-collapse-float #adthrive-video-description-text{display:none}.adthrive-player-position.adthrive-collapse-float.adthrive-collapse-right,.raptive-player-container.adthrive-collapse-float.adthrive-collapse-right{inset:0 5px auto auto}.adthrive-player-position.adthrive-collapse-float.adthrive-collapse-bottom-right,.raptive-player-container.adthrive-collapse-float.adthrive-collapse-bottom-right{inset:auto 5px 100px auto}.adthrive-player-position.adthrive-collapse-float.adthrive-collapse-bottom-left,.raptive-player-container.adthrive-collapse-float.adthrive-collapse-bottom-left{top:auto;bottom:100px;left:auto}.adthrive-player-position.adthrive-collapse-float>.adthrive-player-title,.raptive-player-container.adthrive-collapse-float>.adthrive-player-title{display:none}.adthrive-player-position.adthrive-collapse-sticky,.raptive-player-container.adthrive-collapse-sticky{z-index:9999;padding-top:20px;padding-bottom:20px;position:fixed}.adthrive-player-position.adthrive-collapse-sticky>.adthrive-player-title,.raptive-player-container.adthrive-collapse-sticky>.adthrive-player-title{display:none}.adthrive-sticky-outstream.adthrive-sticky-outstream-top-center.adthrive-sticky-outstream-mobile{top:0;bottom:auto!important;transform:translate(0)!important}body.adthrive-device-phone .adthrive-sticky-outstream.adthrive-sticky-outstream-active.adthrive-sticky-outstream-top-center{bottom:auto!important}.adthrive-collapse-mobile-background{z-index:99990;position:fixed;top:0;left:0}.adthrive-collapse-mobile-background.extra-height{height:163px!important}.adthrive-top-collapse-close{z-index:1;position:fixed;top:5px;left:-30px}.adthrive-sticky-outstream-top-center>.adthrive-top-collapse-close{position:fixed;top:48px;left:10px}.adthrive-sticky-outstream-top-center.adthrive-sticky-outstream-mobile>.adthrive-top-collapse-close{top:10px}.adthrive-top-collapse-wrapper-bar>* .adthrive-top-collapse-close{position:relative;top:0;left:0}.adthrive-top-collapse-wrapper-bar>* .adthrive-wrapper-float-close{float:none;margin-bottom:0;display:none}.adthrive-top-collapse-close-spacer{line-height:1.2}.adthrive-player-position.adthrive-collapse-mobile,.raptive-player-container.adthrive-collapse-mobile{z-index:99998;width:300px;position:fixed}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-small,.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-medium{width:178px}.raptive-player-container.adthrive-collapse-mobile.adthrive-collapse-small,.raptive-player-container.adthrive-collapse-mobile.adthrive-collapse-medium{width:178px;height:101px;left:unset;right:unset;bottom:unset;top:unset}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-top-right,.raptive-player-container.adthrive-collapse-mobile.adthrive-collapse-top-right{top:26px;right:10px}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-top-left,.raptive-player-container.adthrive-collapse-mobile.adthrive-collapse-top-left{top:26px;left:5px}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-bottom-left,.raptive-player-container.adthrive-collapse-mobile.adthrive-collapse-bottom-left{bottom:52px;left:5px}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-bottom-right,.raptive-player-container.adthrive-collapse-mobile.adthrive-collapse-bottom-right{bottom:52px;right:10px}.adthrive-player-position.adthrive-collapse-mobile>.adthrive-player-title,.raptive-player-container.adthrive-collapse-mobile>.adthrive-player-title{display:none}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-top-center>.adthrive-wrapper-bar,.raptive-player-container.adthrive-collapse-mobile.adthrive-collapse-top-center>.adthrive-wrapper-bar{display:none!important}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-top-center>.adthrive-top-collapse-wrapper-bar,.raptive-player-container.adthrive-collapse-mobile.adthrive-collapse-top-center>.adthrive-top-collapse-wrapper-bar{display:block}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-top-center.adthrive-player-without-wrapper-text,.raptive-player-container.adthrive-collapse-mobile.adthrive-collapse-top-center.adthrive-player-without-wrapper-text{inset:0 auto auto 50%;transform:translate(-50%);padding-top:0!important;padding-bottom:1px!important}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-top-center.adthrive-player-with-wrapper-text,.raptive-player-container.adthrive-collapse-mobile.adthrive-collapse-top-center.adthrive-player-with-wrapper-text{inset:0 5px auto auto;padding-top:0!important;padding-bottom:1px!important}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-top-center,.raptive-player-container.adthrive-collapse-mobile.adthrive-collapse-top-center{transition:none!important}.adthrive-top-collapse-wrapper-bar{color:#fff;z-index:99998;width:-webkit-calc(100% - 178px - 10px);width:-moz-calc(100% - 178px - 10px);width:calc(100% - 188px);padding-top:5px;padding-bottom:5px;display:none;position:fixed;top:0;left:5px}.adthrive-top-collapse-wrapper-video-title{color:#fff;text-overflow:ellipsis;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;font-size:13px;font-weight:700;text-decoration:none;display:-webkit-box;overflow:hidden}.adthrive-top-collapse-wrapper-bar a a.adthrive-learn-more-link{font-size:13px;display:inline-block}.adthrive-top-collapse-wrapper-bar a a.raptive-player-learn-more-link{display:none}.adthrive-top-collapse-wrapper-bar a a.raptive-player-learn-more-link.raptive-player-learn-more-link-active{display:inline-block}h3.adthrive-player-title{margin:10px 0}.adthrive-wrapper-close{color:#fff;justify-content:center;align-items:center;min-width:36px;height:36px;margin-left:auto;margin-right:0;font-size:36px}.adthrive-wrapper-float-close{float:right;cursor:pointer;margin-bottom:5px;display:none}.adthrive-top-left-outer{width:78px;height:78px;position:absolute;top:-55px;left:-30px}.adthrive-top-right-outer{width:78px;height:78px;position:absolute;top:-55px;right:-30px}.adthrive-top-left-outer>svg{position:absolute;bottom:30px;left:30px}.adthrive-top-right-outer>svg{position:absolute;bottom:30px;right:30px}.adthrive-top-left-inner{position:absolute;top:0}.adthrive-top-left-inner.adthrive-wrapper-float-close{color:#fff;pointer-events:none;z-index:99;background:#00000080;width:100%;padding:2px}.adthrive-new-outstream-player .adthrive-top-left-inner.adthrive-wrapper-float-close{z-index:10000}.adthrive-new-outstream-player .adthrive-ad{margin-top:0;margin-bottom:0}.adthrive-top-left-inner-wrapper.adthrive-wrapper-float-close{color:#fff;pointer-events:none;z-index:10000;background:#00000080;width:100%;padding:2px;position:absolute;top:36px}.adthrive-sticky-outstream>.adthrive-wrapper-float-close.adthrive-wrapper-close-outside-left{left:2px}.adthrive-sticky-outstream>.adthrive-wrapper-float-close.adthrive-wrapper-close-bkgd-50{color:#fff;pointer-events:none;background:#00000080;padding:2px 0;top:0;left:0}.adthrive-new-outstream-player{margin-bottom:20px;padding:0!important}.adthrive-new-outstream-player>.adthrive-wrapper-float-close.adthrive-wrapper-close-bkgd-50{top:0}.adthrive-close-in-container{line-height:0;position:relative}#adthrive-sticky-outstream-close.adthrive-top-collapse-close{position:inherit}.adthrive-sticky-outstream-idle>.adthrive-close-in-container{pointer-events:none}.adthrive-sticky-outstream-active>.adthrive-close-in-container{pointer-events:all}.adthrive-wrapper-close-bkgd-50>.adthrive-close-in-container{pointer-events:all;padding:2px 0 0 4px}.adthrive-sticky-outstream.adthrive-sticky-outstream-mobile,.raptive-player-container.raptive-player-collapse.raptive-player-sticky-bottom-right,.raptive-player-container.raptive-player-collapse.raptive-player-sticky-bottom-left{transition-property:transform;transition-duration:.25s;transition-delay:0s;bottom:52px}.adthrive-sticky-outstream.adthrive-sticky-outstream-mobile-right,.raptive-player-container.raptive-player-collapse.raptive-player-sticky-bottom-right{right:10px}.adthrive-sticky-outstream.adthrive-sticky-outstream-mobile-left,.raptive-player-container.raptive-player-collapse.raptive-player-sticky-bottom-left{left:10px;transform:none!important}.adthrive-sticky-outstream.adthrive-sticky-outstream-active.adthrive-sticky-outstream-top-center{background:#000;inset:0 0 auto;transform:none}.adthrive-sticky-outstream.adthrive-sticky-outstream-desktop{bottom:100px;right:5px}.adthrive-sticky-outstream.adthrive-sticky-outstream-top-center.adthrive-sticky-outstream-desktop,.adthrive-sticky-outstream.adthrive-sticky-outstream-top-center.adthrive-sticky-outstream-mobile{bottom:auto}.adthrive-sticky-outstream.adthrive-sticky-outstream-top-center.adthrive-sticky-outstream-mobile .adthrive-stickyoutstream-container{background-color:#000;margin:0 auto}.adthrive-sticky-outstream.adthrive-sticky-outstream-active{display:block}.adthrive-video-stickyoutstream{z-index:1;margin-top:0;position:relative}.adthrive-video-stickyoutstream div:first-of-type{margin:-1px}.adthrive-video-stickyoutstream-new-player div:first-of-type{margin:0}.adthrive-video-stickyoutstream-new-player>div:first-child{position:absolute}.adthrive-video-close{pointer-events:all}.adthrive-video-close-float-left{float:left}.adthrive-video-close-float-right{float:right}.adthrive-footer-message span,.adthrive-privacy-preferences a,.adthrive-ccpa-link,.adthrive-ccpa-link span{color:#a9a9a9;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-size:13px}.adthrive-ccpa-link a{cursor:pointer;text-decoration:underline}.adthrive-device-phone .adthrive-footer-message{margin-bottom:60px}.adthrive-footer-message{margin-bottom:100px}.adthrive-footer-message>span{text-transform:uppercase;border-top:1px solid #b2b2b2;padding-top:5px}.adthrive-parallax-slot{height:400px;padding-top:5px;overflow:hidden}.adthrive-parallax-ad{transition:transform .3s ease-out;transform:translateY(0)}.adthrive-sticky-container.adthrive-parallax-slot{flex-direction:row;justify-content:center;padding-top:10px}#_inv_voicefive___{display:none}.adthrive-ad-debug{background-color:#ff000080!important;outline:1px solid red!important}.adthrive-ad-debug:hover{cursor:pointer;background-color:#f00c!important;outline:1px solid red!important}.adthrive-player-ad-controls-volume:hover>.adthrive-player-volume-control,.adthrive-player-volume-control:focus{opacity:1}@media print{div[data-gg-moat],body[data-gg-moat],iframe[data-gg-moat-ifr],div[class*=kargo-ad],#ogy-ad-slot,.adthrive-sticky-outstream,.adthrive-ad,.adthrive-comscore,.adthrive-native-recipe,.raptive-sales{visibility:hidden;width:0;height:0;display:none!important}}.raptive-player-captions{text-align:center;color:#fff;--raptive-player-captions-font-opacity:100%;--raptive-player-captions-background-opacity:0%;--raptive-player-captions-window-opacity:0%;border-radius:5px;width:90%;margin:0 auto;line-height:1.5;transition:transform .5s;display:none;position:absolute;bottom:60px;left:0;right:0;font-size:16px!important}.raptive-player-captions span{white-space:pre-wrap;background:#00000080;border-radius:5px;padding:2px 4px}.raptive-player-captions-button{border-style:unset;color:#fff;cursor:pointer;background-color:#0000;border-radius:9999px;width:36px;height:36px;margin:-5px 4px -5px auto;padding:0;font-size:.75em;font-weight:700;display:none}.raptive-player-captions-button:hover{background:#0000004d}.adthrive-full-width .raptive-player-captions-button.raptive-player-captions-button--visible{display:block}.adthrive-player-ad-controls-hidden+.raptive-player-captions{transform:translateY(40px)}.raptive-player-container-mobile .raptive-player-captions,.raptive-player-collapse .raptive-player-captions{font-size:10px!important}.raptive-player-container-mobile.raptive-player-collapse .raptive-player-captions{font-size:6px!important}.raptive-player-container-mobile.raptive-player-collapse .raptive-player-captions-button{display:none}.raptive-player-settings{color:#fff;z-index:999999999;background:#000;border-radius:5px;width:288px;height:192px;font-size:14px;display:none;position:absolute;bottom:60px;right:2%;text-transform:none!important;font-family:Arial,sans-serif!important;font-weight:400!important}.raptive-player-settings--active{display:block}.raptive-player-settings-header{box-sizing:content-box;background:#404040;border-radius:5px 5px 0 0;align-items:center;gap:4px;height:40px;padding:4px;display:flex}.raptive-player-settings-header>button{color:#fff;cursor:pointer;background:0 0;border:none;border-radius:5px;justify-content:center;align-items:center;width:40px;height:40px;padding:0;font-weight:700;position:relative}.raptive-player-settings-header>button.active{border-radius:5px 5px 0 0}.raptive-player-settings-header>button.active:after{content:\"\";background-color:#fff;width:100%;height:4px;position:absolute;bottom:-4px;left:0}.raptive-player-settings-header>button:hover{background:#000}.raptive-player-settings-header-title{margin-left:8px;font-weight:700}.raptive-player-settings--nested .raptive-player-settings-header-title{margin-left:0}.raptive-player-settings-body{scrollbar-color:#fff #646464;height:144px;overflow:scroll}.raptive-player-settings-body>div{display:none}.raptive-player-settings-body>div.raptive-player-settings-page--active{display:block}.raptive-player-settings-body::-webkit-scrollbar-thumb{background:#fff!important}.raptive-player-settings-close{margin:0 0 0 auto;display:flex}.raptive-player-settings-back{display:none}.raptive-player-settings-back>svg{margin-right:2px}.raptive-player-settings--nested .raptive-player-settings-back{display:flex}.raptive-player-settings-page{padding:4px}.raptive-player-settings-page>button:hover{background:#404040}.raptive-player-settings-page-item{cursor:pointer;background:unset;text-align:left;border:none;border-radius:5px;align-items:center;width:100%;margin:4px 0;padding:4px 8px;display:flex;color:#fff!important;letter-spacing:normal!important;text-transform:none!important;font-family:Arial,sans-serif!important;font-weight:400!important;line-height:1!important}.raptive-player-settings-page-item>span:nth-child(2){text-transform:capitalize;margin-left:auto}.raptive-player-settings-page-item>span:nth-child(3){display:flex}.raptive-player-settings-page-item--selected{background:#6b65ff!important}.raptive-player-settings-page-item--unavailable{display:none}.raptive-player-container-mobile .raptive-player-settings,.raptive-player-collapse .raptive-player-settings{border-radius:0;width:100%;height:100%;position:absolute;inset:0}.raptive-player-container-mobile .raptive-player-settings-body,.raptive-player-collapse .raptive-player-settings-body{height:auto;position:absolute;inset:48px 0 0}.raptive-player-container-mobile .raptive-player-settings-header,.raptive-player-collapse .raptive-player-settings-header{border-radius:0}.raptive-player-container-mobile.raptive-player-collapse .raptive-player-settings{display:none}.adthrive-player-icon-fullscreen .raptive-player-primary-icon,.raptive-player-fullscreen .adthrive-player-icon-fullscreen .raptive-player-secondary-icon{display:block}.adthrive-player-icon-fullscreen .raptive-player-secondary-icon,.raptive-player-fullscreen .adthrive-player-icon-fullscreen .raptive-player-primary-icon,.raptive-player-ios .adthrive-player-icon-fullscreen{display:none}.raptive-player-ios .adthrive-full-width .adthrive-player-icon-fullscreen{display:flex}.adthrive-player-ad-controls>.adthrive-player-icon-fullscreen,.adthrive-player-ad-controls.adthrive-full-width .raptive-player-captions-button.raptive-player-captions-button--visible+.adthrive-player-icon-fullscreen{margin:-5px 4px}.raptive-player-container-mobile .adthrive-player-ad-controls.adthrive-full-width>.adthrive-player-icon-fullscreen,.adthrive-player-ad-controls.adthrive-full-width .raptive-player-captions-button+.adthrive-player-icon-fullscreen{margin:-5px 4px -5px auto}.raptive-content-terms-footer-link{cursor:pointer;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-size:13px;text-decoration:underline}.raptive-content-terms-modal{background:0 0;border:none;max-width:none;max-height:none;padding:0;overflow:visible}.raptive-content-terms-modal[open]{justify-content:center;align-items:center;margin:auto;display:flex;position:fixed;inset:0}.raptive-content-terms-modal:focus{outline:none}.raptive-content-terms-modal::backdrop{background-color:#00000080}.raptive-content-terms-modal-content{background-color:#fff;border-radius:8px;flex-direction:column;width:50vw;min-width:300px;max-width:800px;max-height:85vh;display:flex}.raptive-content-terms-modal-header{border-bottom:1px solid #e0e0e0;flex-shrink:0;justify-content:space-between;align-items:center;padding:16px 24px;display:flex}.raptive-content-terms-modal-title{color:#333;margin:0;font-size:20px;font-weight:600}.raptive-content-terms-modal-close{color:#757575;cursor:pointer;background:0 0;border:none;padding:0;font-size:24px}.raptive-content-terms-modal-close:hover{color:#000}.raptive-content-terms-modal-body{color:#555;padding:24px;overflow-y:auto}.raptive-content-terms-modal-body p{margin-top:0;margin-bottom:1em}.raptive-content-terms-modal-body p:last-child{margin-bottom:0}.raptive-content-terms-modal-body a{color:#007bff;text-decoration:none}.raptive-content-terms-modal-body a:hover{text-decoration:underline}@media (width<=768px){.raptive-content-terms-modal-content{width:90vw}}.raptive-player--native.adthrive-stickyoutstream-container{box-sizing:content-box;background:#fff;border:1px solid #000}.raptive-player--native #adthrive-stickyoutstream-ad-container{position:absolute;top:41px}.adthrive-ccpa-modal{z-index:2147483647;background-color:#0006;width:100%;height:100%;display:none;position:fixed;top:0;left:0;overflow:auto}.adthrive-ccpa-modal-content{background-color:#fefefe;border:1px solid #888;border-radius:10px;width:80%;max-width:592px;margin:0 auto;padding:20px 24px 24px;font-family:Verdana,Geneva,Tahoma,sans-serif;position:relative;top:50%;transform:translateY(-50%);box-shadow:0 0 10px #00000080}#adthrive-ccpa-modal-title{color:#000000de;font-size:20px;line-height:26px}.adthrive-ccpa-modal-btn:hover,.adthrive-ccpa-modal-btn:focus{color:#000;cursor:pointer;text-decoration:none}#adthrive-ccpa-modal-language{color:#000000de;margin:16px 0 32px;font-size:14px;line-height:20px;display:block}#adthrive-ccpa-modal-close-btn-container:hover,#adthrive-ccpa-modal-close-btn-container:focus,#adthrive-ccpa-modal-cancel-btn:hover,#adthrive-ccpa-modal-cancel-btn:focus{color:#000c;cursor:pointer;text-decoration:none}#adthrive-ccpa-modal-continue-btn:hover,#adthrive-ccpa-modal-continue-btn:focus{color:#fffc;cursor:pointer;text-decoration:none}#adthrive-ccpa-modal-close-btn-container{color:#000;font-size:20px;font-weight:700;line-height:20px;position:absolute;top:8px;right:8px}.adthrive-ccpa-lower-buttons-container{color:#000;font-size:18px}#adthrive-ccpa-modal-cancel-btn{text-align:left;width:calc(100% - 150px);display:inline-block}#adthrive-ccpa-modal-continue-btn{color:#fff;text-align:center;background-color:#010044;border-radius:10px;width:150px;height:44px;line-height:44px;display:inline-block}@media screen and (width<=896px){.adthrive-ccpa-modal-content{width:calc(100% - 80px);margin:0 auto;position:relative}#adthrive-ccpa-modal-title{font-size:16px;line-height:24px}#adthrive-ccpa-modal-language{text-align:left;font-size:12px;line-height:16px}.adthrive-ccpa-lower-buttons-container{font-size:14px}#adthrive-ccpa-modal-close-btn-container{font-size:14px;line-height:14px}}@media screen and (width<=350px){#adthrive-ccpa-modal-title{font-size:14px;line-height:24px}#adthrive-ccpa-modal-language{text-align:left;font-size:10px;line-height:14px}.adthrive-ccpa-lower-buttons-container{text-align:center;width:100%;font-size:12px;display:block}#adthrive-ccpa-modal-close-btn-container{font-size:12px;line-height:12px;display:block}#adthrive-ccpa-modal-continue-btn{text-align:center;width:100%;display:block}#adthrive-ccpa-modal-cancel-btn{text-align:center;width:100%;margin-bottom:10px;display:block}}.raptive-gated-print-modal-container{--raptive-gated-print-primary-color:#6e55f2;--raptive-gated-print-primary-hover-color:#5a45d6;--raptive-gated-print-disabled-color:#c5c5c5;--raptive-gated-print-border-color:#c5c5c5;--raptive-gated-print-placeholder-color:#c5c5c5;--raptive-gated-print-text-color:#333;--raptive-gated-print-title-color:#000;--raptive-gated-print-background-color:#fff;--raptive-gated-print-overlay-color:#000000b3;--raptive-gated-print-checkbox-check-color:#fff;background-color:var(--raptive-gated-print-overlay-color);z-index:999;overscroll-behavior:contain;width:100vw;height:100vh;display:none;position:fixed;top:0;left:0;overflow:hidden}.raptive-gated-print-modal-container .raptive-gated-print-modal-content{text-align:start;background-color:var(--raptive-gated-print-background-color);z-index:1000;border-radius:12px;flex-direction:column;align-items:start;gap:24px;width:550px;max-width:550px;padding:24px;display:flex;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:0 4px 12px #00000026}.raptive-gated-print-modal-close{color:var(--raptive-gated-print-text-color);cursor:pointer;z-index:1001;text-align:center;border-radius:50%;justify-content:center;align-items:center;width:32px;height:32px;font-size:24px;font-weight:700;transition:background-color .2s;display:flex;position:absolute;top:12px;right:12px}.raptive-gated-print-modal-close:hover,.raptive-gated-print-modal-close:focus{color:var(--raptive-gated-print-text-color);background-color:#0000001a;outline:none;text-decoration:none}.raptive-gated-print-modal-container #raptive-gated-print-modal-form{flex-direction:column;gap:16px;width:100%;display:flex}.raptive-gated-print-modal-container .raptive-gated-print-modal-title{color:var(--raptive-gated-print-title-color);font-size:1.5rem;font-weight:700}.raptive-gated-print-modal-container .raptive-gated-print-modal-body{color:var(--raptive-gated-print-text-color);font-size:1.1rem}.raptive-gated-print-modal-container label.raptive-gated-print-modal-body{color:var(--raptive-gated-print-text-color);cursor:pointer;font-size:1.1rem}.raptive-gated-print-modal-container .raptive-gated-print-modal-input{box-sizing:border-box;border:1px solid var(--raptive-gated-print-border-color);border-radius:5px;outline:none;width:100%;padding:12px;font-size:1.1rem}.raptive-gated-print-modal-container .raptive-gated-print-modal-input::placeholder{color:var(--raptive-gated-print-placeholder-color)}.raptive-gated-print-modal-container .raptive-gated-print-modal-input:focus{border:1px solid var(--raptive-gated-print-primary-color);box-shadow:0 0 2px var(--raptive-gated-print-primary-hover-color)}.raptive-gated-print-modal-container .raptive-gated-print-modal-actions{justify-content:space-between;align-items:center;width:100%;margin-top:8px;display:flex}.raptive-gated-print-modal-container .raptive-gated-print-modal-checkbox-container{align-items:center;display:flex}.raptive-gated-print-modal-container .raptive-gated-print-modal-checkbox{-webkit-appearance:none;appearance:none;border:2px solid var(--raptive-gated-print-border-color);cursor:pointer;background-color:var(--raptive-gated-print-background-color);border-radius:4px;outline:none;width:20px;height:20px;margin-right:8px;position:relative}.raptive-gated-print-modal-container .raptive-gated-print-modal-checkbox:checked{background-color:var(--raptive-gated-print-primary-color);border-color:var(--raptive-gated-print-primary-color)}.raptive-gated-print-modal-container .raptive-gated-print-modal-checkbox:checked:after{content:\"\";color:var(--raptive-gated-print-checkbox-check-color);font-size:14px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.raptive-gated-print-modal-container .raptive-gated-print-modal-button{width:auto;color:var(--raptive-gated-print-checkbox-check-color);cursor:pointer;background-color:var(--raptive-gated-print-primary-color);border:none;border-radius:12px;padding:12px 24px;font-size:1.1rem;font-weight:700;transition:background-color .3s}.raptive-gated-print-modal-container .raptive-gated-print-modal-button:hover{background-color:var(--raptive-gated-print-primary-hover-color)}.raptive-gated-print-modal-container .raptive-gated-print-modal-button:disabled{background-color:var(--raptive-gated-print-disabled-color);cursor:not-allowed}@media screen and (width<=896px){.raptive-gated-print-modal-container .raptive-gated-print-modal-content{width:90%;padding:16px}}@media screen and (width<=350px){.raptive-gated-print-modal-container .raptive-gated-print-modal-content{width:95%;padding:12px}}@media print{.raptive-gated-print-modal-container .raptive-gated-print-modal-content{display:none!important}}.adthrive-us-cmp-modal{z-index:2147483647;background-color:#0006;width:100%;height:100%;display:none;position:fixed;top:0;left:0;overflow:auto}.adthrive-us-cmp-modal.show{display:block}.adthrive-us-cmp-modal-content{background-color:#fefefe;border:1px solid #888;border-radius:10px;width:80%;max-width:592px;margin:auto;padding:20px 24px 24px;font-family:Verdana,Geneva,Tahoma,sans-serif;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:0 0 10px #00000080}.adthrive-us-cmp-modal-close{color:#000;font-size:28px;font-weight:700;position:fixed;top:-10px;right:3px}.adthrive-us-cmp-modal-close:hover,.adthrive-us-cmp-modal-close:focus{color:#000;cursor:pointer;text-decoration:none}.adthrive-us-cmp-modal-header{padding:2px 16px}.adthrive-us-cmp-modal-header h1{color:#000000de;font-size:20px;line-height:26px}.adthrive-us-cmp-modal-body{max-height:50vh;margin-bottom:10px;padding:10px 16px;position:relative;overflow-y:auto}.adthrive-us-cmp-modal-body p{font-size:14px;line-height:20px}.adthrive-us-cmp-modal-footer{color:#fff;flex-direction:column;justify-content:space-between;padding:2px 16px;display:flex}.adthrive-us-cmp-modal-accept,.adthrive-us-cmp-modal-decline{color:#fff;cursor:pointer;border:none;border-radius:10px}.adthrive-us-cmp-modal-accept{background-color:#010044}.adthrive-us-cmp-modal-accept.adthrive-us-cmp-modal-accept-strict-mode{align-self:flex-end;margin:0 0 10px auto;padding:12px 36px;background-color:green!important;font-size:18px!important}.adthrive-us-cmp-modal-decline{color:#000;background-color:#fff}.adthrive-us-cmp-modal-accept,.adthrive-us-cmp-modal-decline{text-transform:uppercase;flex:1;margin:0 10px 10px 0}.adthrive-us-cmp-modal-accept:hover,.adthrive-us-cmp-modal-accept:focus{color:#c4c4c4;background-color:#010044}.adthrive-us-cmp-modal-decline:hover,.adthrive-us-cmp-modal-decline:focus{color:#000;background-color:#fff}@media (width<=600px){.adthrive-us-cmp-modal-content{width:90%}.adthrive-us-cmp-modal-body{border-bottom:1px solid #c4c4c4;box-shadow:inset 0 -100px 30px -100px #0000001a}.adthrive-us-cmp-modal-accept,.adthrive-us-cmp-modal-decline{font-size:14px;line-height:14px}.adthrive-us-cmp-modal-accept.adthrive-us-cmp-modal-accept-strict-mode{align-self:center;margin:10px auto}}@media (width>=600px){.adthrive-us-cmp-modal-footer{flex-direction:row}.adthrive-us-cmp-modal-accept,.adthrive-us-cmp-modal-decline{flex:none;margin:0}}.adthrive-us-cmp-footer{margin-bottom:30px}.adthrive-us-cmp-footer-text{color:#a9a9a9;font-size:14px}.adthrive-us-cmp-footer-text p{color:#a9a9a9;text-decoration:underline}.adthrive-us-cmp-footer-link{cursor:pointer;font-size:14px;text-decoration:underline}";
  let style = document.createElement('style');
  style.textContent = css;
  document.head.appendChild(style);
})();

var adtpm=Math.random()<.02&&{startTime:Date.now(),name:`adt-iife-start`,duration:null};window.adthrive.branch=window.adthrive.branch||`HEAD 7d034d8`,window.adthrive.bucket=window.adthrive.bucket||`flex`,window.adthrive.gdpr=`false`,window.adthrive.deployment=window.adthrive.deployment||`X`;var adthrive=(function(){window.adthrive.buildDate=`2025-11-24`;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));let l=new WeakMap;function u(e,t,n,r){return e.reverse().forEach(e=>{r=e(t,n,r)||r}),r}function d(e,t){return e.reverse().forEach(e=>{let n=e(t);n&&(t=n)}),t}function f(e,t,n,r){if(!Array.isArray(e)||e.length===0)throw TypeError();if(n!==void 0)return u(e,t,n,r);if(typeof t==`function`)return d(e,t)}function p(e,t){return l.get(e)&&l.get(e).get(t)}function m(e,t,n){if(t===void 0)throw TypeError();let r=p(t,n);return r&&r.get(e)}function h(e,t){let n=l.get(e)||new Map;l.set(e,n);let r=n.get(t)||new Map;return n.set(t,r),r}function g(e,t,n,r){if(r&&![`string`,`symbol`].includes(typeof r))throw TypeError();(p(n,r)||h(n,r)).set(e,t)}function _(e,t,n){return m(e,t,n)?m(e,t,n):Object.getPrototypeOf(t)?_(e,Object.getPrototypeOf(t),n):void 0}function v(e,t){return function(n,r){g(e,t,n,r)}}function ee(e,t,n){return _(e,t,n)}function te(e,t,n){return m(e,t,n)}function ne(e,t,n){return!!m(e,t,n)}function re(e,t,n){return!!_(e,t,n)}function ie(e,t,n,r){g(e,t,n,r)}let ae={decorate:f,defineMetadata:ie,getMetadata:ee,getOwnMetadata:te,hasMetadata:re,hasOwnMetadata:ne,metadata:v};Object.assign(Reflect,ae);var oe;(function(e){e[e.Transient=0]=`Transient`,e[e.Singleton=1]=`Singleton`,e[e.ResolutionScoped=2]=`ResolutionScoped`,e[e.ContainerScoped=3]=`ContainerScoped`})(oe||={});var se=oe,ce=function(e,t){return ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},ce(e,t)};function le(e,t){ce(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function ue(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}function de(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function fe(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)}function pe(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function me(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(pe(arguments[t]));return e}var he=`injectionTokens`;function ge(e){var t=Reflect.getMetadata(`design:paramtypes`,e)||[],n=Reflect.getOwnMetadata(he,e)||{};return Object.keys(n).forEach(function(e){t[+e]=n[e]}),t}function _e(e,t){return function(n,r,i){var a=Reflect.getOwnMetadata(he,n)||{};a[i]=t?{token:e,transform:t.transformToken,transformArgs:t.args||[]}:e,Reflect.defineMetadata(he,a,n)}}function ve(e){return!!e.useClass}function ye(e){return!!e.useFactory}var be=function(){function e(e){this.wrap=e,this.reflectMethods=[`get`,`getPrototypeOf`,`setPrototypeOf`,`getOwnPropertyDescriptor`,`defineProperty`,`has`,`set`,`deleteProperty`,`apply`,`construct`,`ownKeys`]}return e.prototype.createProxy=function(e){var t=this,n={},r=!1,i;return new Proxy(n,this.createHandler(function(){return r||=(i=e(t.wrap()),!0),i}))},e.prototype.createHandler=function(e){var t={};return this.reflectMethods.forEach(function(n){t[n]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t[0]=e(),Reflect[n].apply(void 0,me(t))}}),t},e}();function xe(e){return typeof e==`string`||typeof e==`symbol`}function Se(e){return typeof e==`object`&&`token`in e&&`multiple`in e}function Ce(e){return typeof e==`object`&&`token`in e&&`transform`in e}function we(e){return typeof e==`function`||e instanceof be}function Te(e){return!!e.useToken}function Ee(e){return e.useValue!=null}function De(e){return ve(e)||Ee(e)||Te(e)||ye(e)}var Oe=function(){function e(){this._registryMap=new Map}return e.prototype.entries=function(){return this._registryMap.entries()},e.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},e.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},e.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},e.prototype.setAll=function(e,t){this._registryMap.set(e,t)},e.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},e.prototype.clear=function(){this._registryMap.clear()},e.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},e}(),ke=function(e){le(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Oe),Ae=function(){function e(){this.scopedResolutions=new Map}return e}();function je(e,t){return e===null?`at position #`+t:`"`+e.split(`,`)[t].trim()+`" at position #`+t}function Me(e,t,n){return n===void 0&&(n=`    `),me([e],t.message.split(`
`).map(function(e){return n+e})).join(`
`)}function Ne(e,t,n){var r=pe(e.toString().match(/constructor\(([\w, ]+)\)/)||[],2),i=r[1],a=je(i===void 0?null:i,t);return Me(`Cannot inject the dependency `+a+` of "`+e.name+`" constructor. Reason:`,n)}function Pe(e){return!(typeof e.dispose!=`function`||e.dispose.length>0)}var Fe=function(e){le(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Oe),Ie=function(e){le(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Oe),Le=function(){function e(){this.preResolution=new Fe,this.postResolution=new Ie}return e}(),Re=new Map,y=new(function(){function e(e){this.parent=e,this._registry=new ke,this.interceptors=new Le,this.disposed=!1,this.disposables=new Set}return e.prototype.register=function(e,t,n){n===void 0&&(n={lifecycle:se.Transient}),this.ensureNotDisposed();var r=De(t)?t:{useClass:t};if(Te(r))for(var i=[e],a=r;a!=null;){var o=a.useToken;if(i.includes(o))throw Error(`Token registration cycle detected! `+me(i,[o]).join(` -> `));i.push(o);var s=this._registry.get(o);a=s&&Te(s.provider)?s.provider:null}if((n.lifecycle===se.Singleton||n.lifecycle==se.ContainerScoped||n.lifecycle==se.ResolutionScoped)&&(Ee(r)||ye(r)))throw Error(`Cannot use lifecycle "`+se[n.lifecycle]+`" with ValueProviders or FactoryProviders`);return this._registry.set(e,{provider:r,options:n}),this},e.prototype.registerType=function(e,t){return this.ensureNotDisposed(),xe(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},e.prototype.registerInstance=function(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})},e.prototype.registerSingleton=function(e,t){if(this.ensureNotDisposed(),xe(e)){if(xe(t))return this.register(e,{useToken:t},{lifecycle:se.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:se.Singleton});throw Error(`Cannot register a type name as a singleton without a "to" token`)}var n=e;return t&&!xe(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:se.Singleton})},e.prototype.resolve=function(e,t){t===void 0&&(t=new Ae),this.ensureNotDisposed();var n=this.getRegistration(e);if(!n&&xe(e))throw Error(`Attempted to resolve unregistered dependency token: "`+e.toString()+`"`);if(this.executePreResolutionInterceptor(e,`Single`),n){var r=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,r,`Single`),r}if(we(e)){var r=this.construct(e,t);return this.executePostResolutionInterceptor(e,r,`Single`),r}throw Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},e.prototype.executePreResolutionInterceptor=function(e,t){var n,r;if(this.interceptors.preResolution.has(e)){var i=[];try{for(var a=fe(this.interceptors.preResolution.getAll(e)),o=a.next();!o.done;o=a.next()){var s=o.value;s.options.frequency!=`Once`&&i.push(s),s.callback(e,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,i)}},e.prototype.executePostResolutionInterceptor=function(e,t,n){var r,i;if(this.interceptors.postResolution.has(e)){var a=[];try{for(var o=fe(this.interceptors.postResolution.getAll(e)),s=o.next();!s.done;s=o.next()){var c=s.value;c.options.frequency!=`Once`&&a.push(c),c.callback(e,t,n)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,a)}},e.prototype.resolveRegistration=function(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===se.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n=e.options.lifecycle===se.Singleton,r=e.options.lifecycle===se.ContainerScoped,i=n||r,a=Ee(e.provider)?e.provider.useValue:Te(e.provider)?i?e.instance||=this.resolve(e.provider.useToken,t):this.resolve(e.provider.useToken,t):ve(e.provider)?i?e.instance||=this.construct(e.provider.useClass,t):this.construct(e.provider.useClass,t):ye(e.provider)?e.provider.useFactory(this):this.construct(e.provider,t);return e.options.lifecycle===se.ResolutionScoped&&t.scopedResolutions.set(e,a),a},e.prototype.resolveAll=function(e,t){var n=this;t===void 0&&(t=new Ae),this.ensureNotDisposed();var r=this.getAllRegistrations(e);if(!r&&xe(e))throw Error(`Attempted to resolve unregistered dependency token: "`+e.toString()+`"`);if(this.executePreResolutionInterceptor(e,`All`),r){var i=r.map(function(e){return n.resolveRegistration(e,t)});return this.executePostResolutionInterceptor(e,i,`All`),i}var a=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,a,`All`),a},e.prototype.isRegistered=function(e,t){return t===void 0&&(t=!1),this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},e.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},e.prototype.clearInstances=function(){var e,t;this.ensureNotDisposed();try{for(var n=fe(this._registry.entries()),r=n.next();!r.done;r=n.next()){var i=pe(r.value,2),a=i[0],o=i[1];this._registry.setAll(a,o.filter(function(e){return!Ee(e.provider)}).map(function(e){return e.instance=void 0,e}))}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.createChildContainer=function(){var t,n;this.ensureNotDisposed();var r=new e(this);try{for(var i=fe(this._registry.entries()),a=i.next();!a.done;a=i.next()){var o=pe(a.value,2),s=o[0],c=o[1];c.some(function(e){return e.options.lifecycle===se.ContainerScoped})&&r._registry.setAll(s,c.map(function(e){return e.options.lifecycle===se.ContainerScoped?{provider:e.provider,options:e.options}:e}))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.beforeResolution=function(e,t,n){n===void 0&&(n={frequency:`Always`}),this.interceptors.preResolution.set(e,{callback:t,options:n})},e.prototype.afterResolution=function(e,t,n){n===void 0&&(n={frequency:`Always`}),this.interceptors.postResolution.set(e,{callback:t,options:n})},e.prototype.dispose=function(){return ue(this,void 0,void 0,function(){var e;return de(this,function(t){switch(t.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach(function(t){var n=t.dispose();n&&e.push(n)}),[4,Promise.all(e)];case 1:return t.sent(),[2]}})})},e.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},e.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},e.prototype.construct=function(e,t){var n=this;if(e instanceof be)return e.createProxy(function(e){return n.resolve(e,t)});var r=(function(){var r=Re.get(e);if(!r||r.length===0){if(e.length===0)return new e;throw Error(`TypeInfo not known for "`+e.name+`"`)}var i=r.map(n.resolveParams(t,e));return new(e.bind.apply(e,me([void 0],i)))})();return Pe(r)&&this.disposables.add(r),r},e.prototype.resolveParams=function(e,t){var n=this;return function(r,i){var a,o,s;try{return Se(r)?Ce(r)?r.multiple?(a=n.resolve(r.transform)).transform.apply(a,me([n.resolveAll(r.token)],r.transformArgs)):(o=n.resolve(r.transform)).transform.apply(o,me([n.resolve(r.token,e)],r.transformArgs)):r.multiple?n.resolveAll(r.token):n.resolve(r.token,e):Ce(r)?(s=n.resolve(r.transform,e)).transform.apply(s,me([n.resolve(r.token,e)],r.transformArgs)):n.resolve(r,e)}catch(e){throw Error(Ne(t,i,e))}}},e.prototype.ensureNotDisposed=function(){if(this.disposed)throw Error(`This container has been disposed, you cannot interact with a disposed container`)},e}());function ze(e){return _e(e)}var b=ze;function Be(){return function(e){Re.set(e,ge(e))}}var x=Be;function Ve(){return function(e){x()(e),y.registerSingleton(e)}}var S=Ve;if(typeof Reflect>`u`||!Reflect.getMetadata)throw Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);function He(e){"@babel/helpers - typeof";return He=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},He(e)}function Ue(e,t){if(He(e)!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||`default`);if(He(r)!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}function We(e){var t=Ue(e,`string`);return He(t)==`symbol`?t:t+``}function C(e,t,n){return(t=We(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}let Ge=class{constructor(){C(this,`emitters`,new Set)}};Ge=w([S()],Ge);let Ke=y.resolve(Ge).emitters;var T=class{constructor(){C(this,`_listeners`,new Set),C(this,`_emitted`,0),C(this,`_onces`,new Set),C(this,`_shouldTrackDefault`,void 0),this._shouldTrackDefault=window?.adthrive?.siteAds?.adOptions?.spa===!0}on(e){return this._listeners.add(e),()=>{this.off(e)}}off(e){this._listeners.delete(e)}once(e,t=this._shouldTrackDefault){let n=t=>{this.off(n),e(t)};this._listeners.add(n),t&&(this._onces.add(e),this._trackStatefulEmitter())}legacyOnce(){return new Promise(e=>{let t=this.on((...n)=>(t(),e(...n)))})}_trackStatefulEmitter(){Ke.add(this)}async legacyEmit(e){return Promise.all([...this._listeners].map(async t=>await t(e))).then(e=>(this._emitted++,e))}emit(e){[...this._listeners].forEach(t=>t(e)),this._emitted++,this._trackStatefulEmitter()}clear(){this._listeners.clear()}resetEmitted(){this._emitted=0}resetOnces(){for(let e of this._onces)this.once(e,!1)}get count(){return this._listeners.size}get emitted(){return this._emitted}get onces(){return this._onces}};let qe=class{};qe=w([S()],qe);let Je=class extends qe{constructor(...e){super(...e),C(this,`dialDownLogs`,new T),C(this,`newContextDataEncodingSize`,new T)}};Je=w([S()],Je);var Ye=class{constructor(){C(this,`name`,void 0),C(this,`disable`,void 0),C(this,`gdprPurposes`,void 0)}};let Xe=class extends Ye{constructor(){super(),C(this,`name`,`Logger`),C(this,`gdprPurposes`,[7]),C(this,`disable`,!1),C(this,`siteId`,void 0),C(this,`siteName`,void 0),C(this,`bucket`,void 0),C(this,`branch`,void 0),C(this,`deployment`,void 0),C(this,`debug`,void 0),C(this,`_gamAccountId`,void 0),C(this,`_gamAccountIdSetPromise`,new Promise(e=>e())),C(this,`_gdpr`,void 0),C(this,`_shouldQueue`,!1),C(this,`_dialDownLogsExperimentResult`,void 0),C(this,`_dialDownLogsExperimentChoices`,void 0),C(this,`_data`,{abgroup:{key:`adslogger-err`},abgroupMulti:{key:`adslogger-err`},pubab:{key:`adslogger-err`},sess:`adslogger-err`,pvk:`adslogger-err`,hbho:[`adslogger-err`],vbho:[`adslogger-err`],spa:!1}),C(this,`_uniqueLogLimit`,100),C(this,`_uniqueLogMap`,new Map),C(this,`_uniqueLogExclusionList`,[`SlotRenderEnded::adImpression`,`ImpressionLogComponent::bidWon`]),C(this,`sending`,new T),C(this,`logQueue`,[]),C(this,`logFilter`,void 0),C(this,`suppressedEventLogNames`,new Map([[`SlotRenderEnded`,`adImpression`],[`VideoUtils`,`getPlacementElement`],[`PrebidAuctionManager`,`_logAuctionDebug`],[`PrebidAuctionManager`,`init`]])),C(this,`defaultDataFilterList`,new Map([[`SlotRenderEnded:adImpression`,[`abgroup`,`abgroupMulti`]]])),C(this,`maxCloudFrontUrlSize`,8192),C(this,`loggerEventBus`,void 0),this.loggerEventBus=y.resolve(Je)}init(e){this.logFilter=e.loggerFilters||[],this.siteId=e.siteAds.siteId,this.siteName=e.siteAds.siteName,this.bucket=e.bucket,this.branch=e.branch,this.deployment=e.deployment,this.debug=e.debug,this._gdpr=e.gdpr===`true`,this._shouldQueue=this._gdpr,this._setLoggerExperiments()}set gamAccountId(e){this._gamAccountId=e,this._gamAccountIdSetPromise=Promise.resolve()}_setLoggerExperiments(){this.loggerEventBus.dialDownLogs.on(({result:e,choices:t})=>{this._dialDownLogsExperimentResult=e,this._dialDownLogsExperimentChoices=t})}_isDialedDownLog(e){let t=this._dialDownLogsExperimentResult||[];return e.some(e=>typeof e==`string`&&t.some(t=>e.toLowerCase().indexOf(t.toLowerCase())>-1))}_dialedDownChoice(e){return this._dialDownLogsExperimentChoices?.filter(({choice:t})=>typeof t==`string`&&e.some(e=>typeof e==`string`&&e.toLowerCase().indexOf(t.toLowerCase())>-1)).map(({weight:e})=>e)}log(e,t,...n){this.call(console.log,e,t,...n)}info(e,t,...n){this.call(console.info,e,t,...n)}warn(e,t,...n){this.call(console.warn,e,t,...n)}_getLogToCheck(e){let t=e&&e[1]&&e[1].arguments&&e[1].arguments[0];return t?[t]:e}error(e,t,...n){this._request(`error`,e,t,n)}event(e,t,...n){this._request(`event`,e,t,n)}_request(e,t,n,r){this.shouldLog(t,n)&&this.call(console.error,t,n,...r);let i=`${t}::${n}`,a=r.concat([i]),o=this._getLogToCheck(a),s=this._uniqueLogMap.get(i)||0;if(!(!this._uniqueLogExclusionList.includes(i)&&s>this._uniqueLogLimit)&&!this._isDialedDownLog(o)){let a=this._dialedDownChoice(o);a&&a.length&&r.push(`Sampled at ${100-a[0]} percent`),this.makeRequest(`send`,e,t,n,...r).catch(e=>{console.error(e)}),this._uniqueLogMap.set(i,++s)}}shouldLog(e,t){return!!this.debug&&!this.suppressedEventLogNames.has(e)&&this.suppressedEventLogNames.get(e)!==t}fetchEvent(e,t,...n){this.debug&&this.call(console.log,e,t,...n),this.makeRequest(`fetch`,`event`,e,t,...n).catch(e=>{console.error(e)})}getBlockedLogCategories(){if(typeof window<`u`&&window.location){let e=new URLSearchParams(window.location.search).get(`at_block_logs`);if(e)return e.split(`,`).map(e=>e.trim().toLowerCase())}return[]}getLimitedLogCategories(){if(typeof window<`u`&&window.location){let e=new URLSearchParams(window.location.search).get(`at_limit_logs`);if(e)return e.split(`,`).map(e=>e.trim().toLowerCase())}return[]}call(e,t,n,...r){let i=this.logFilter;if(i&&i.length&&i.includes(t))return;let a=t.toLowerCase();if(this.getBlockedLogCategories().includes(a))return;let o=this.getLimitedLogCategories();if(o.length>0&&!o.includes(a))return;let s=[`%c${t}::${n} `],c=[`color: #999; font-weight: bold;`];r.length>0&&typeof r[0]==`string`&&s.push(r.shift()),c.push(...r);try{Function.prototype.apply.call(e,console,[s.join(``),...c])}catch(e){console.error(e);return}}buildRequestUrl(e,t,n,r){let i=`https://logger.adthrive.com/${e}`,a=[`${t}::${n} `];r.length>0&&typeof r[0]==`string`&&a.push(r.shift());let o=r.map(e=>(e&&e.error&&(e=e.error),e instanceof Error&&(e={name:e.name,message:e.message,stack:e.stack}),e)),s=this._addDefaultData(t,n);s&&o.push(s);let c=[`gamAcctId=${encodeURIComponent(this._gamAccountId||``)}`,`siteId=${encodeURIComponent(this.siteId||``)}`,`siteName=${encodeURIComponent(this.siteName||``)}`,`bucket=${encodeURIComponent(this.bucket||``)}`,`branch=${encodeURIComponent(this.branch||``)}`,`deployment=${encodeURIComponent(this.deployment||``)}`,`message=${encodeURIComponent(a.join(``).trim())}`,`pageurl=${encodeURIComponent(window.location.origin+window.location.pathname)}`,`body=${encodeURIComponent(JSON.stringify(o))}`];return`${i}?${c.join(`&`)}`}_addDefaultData(e,t){if(!this._data)return;let n={...this._data},r=this.defaultDataFilterList.get(`${e}:${t}`);return r&&Object.keys(n).forEach(e=>{r.includes(e)&&delete n[e]}),n}clearQueue(e){e&&(this._shouldQueue=!1,this.logQueue.forEach(e=>{e.action===`send`&&this.sendRequest(e.type,e.className,e.methodName,...e.args).catch(()=>{}),e.action===`fetch`&&this.fetchRequest(e.type,e.className,e.methodName,...e.args).catch(()=>{})})),this.logQueue=[]}async makeRequest(e,t,n,r,...i){if(this.disable)return Promise.resolve(!1);if(this._gdpr&&this._shouldQueue){let a={action:e,type:t,className:n,methodName:r,args:i};return this.logQueue.push(a),Promise.resolve(!0)}return this._gamAccountId||await this._gamAccountIdSetPromise,e===`send`?this.sendRequest(t,n,r,...i):this.fetchRequest(t,n,r,...i)}truncateRequestUrl(e,t,n,r,i){let a=[...r[0].arguments],o={...r[0],arguments:a},s=`${n}Truncated`,c=0;for(;i.length>this.maxCloudFrontUrlSize&&a.length>0&&c<10;)a.pop(),i=this.buildRequestUrl(e,t,s,[o]),c++;return i}async sendRequest(e,t,n,...r){this.sending.emit();let i=this.buildRequestUrl(e,t,n,r);return i.length>this.maxCloudFrontUrlSize&&(this._isTruncatableRequest(e,t,n,r[0]?.arguments)&&(i=this.truncateRequestUrl(e,t,n,r,i)),i.length>this.maxCloudFrontUrlSize)?this.sendRequest(e,t,n,`Payload too large. Logger cannot send`).catch(e=>{console.error(e)}):new Promise((e,a)=>{let o=new XMLHttpRequest;o.open(`get`,i);let s=t===`logger`&&n===`sendRequest`;o.addEventListener(`load`,()=>o.status===200?e(o.responseText):(s||this.error(`logger`,`sendRequest`,...r,{className:t,methodName:n}),a(Error(`Logger send request failed ${o.status}`)))),o.addEventListener(`error`,()=>(s||this.error(`logger`,`sendRequest`,...r,{className:t,methodName:n}),a(Error(`Logger send request failed`)))),o.send()})}_isTruncatableRequest(e,t,n,r){return[{type:`error`,className:`PrebidAuctionManager`,methodName:`_logAuctionDebug`},{type:`event`,className:`SlotManager`,methodName:`requestBids`}].some(r=>r.type===e&&r.className===t&&r.methodName===n)&&!!r}async fetchRequest(e,t,n,...r){this.sending.emit();let i=this.buildRequestUrl(e,t,n,r);return fetch(i,{method:`GET`,keepalive:!0,referrerPolicy:`no-referrer-when-downgrade`})}get data(){return this._data}set data(e){this._data=e,this.loggerEventBus.newContextDataEncodingSize.emit(encodeURIComponent(JSON.stringify(this._data)).length)}};Xe=w([x()],Xe);let E=new Xe;var Ze=class{constructor(){C(this,`_timeOrigin`,void 0),this._timeOrigin=0}resetTimeOrigin(){this._timeOrigin=window.performance?.now()}now(){try{return Math.round(window.performance?.now()-this._timeOrigin)}catch{return 0}}};window.adthrive.windowPerformance=window.adthrive.windowPerformance||new Ze;let Qe=window.adthrive.windowPerformance,$e=Qe.now.bind(Qe),et=window.location.search.includes(`allLogs=true`),tt=(e,t,n,r,i,a)=>{let o=Math.round(a-i),s=[],c=[];s.push(`(`,n.map(()=>`%o`).join(`, `),`)`),c.push(...n),r!==void 0&&(s.push(` => %o`),c.push(r)),s.push(` %c(${o}ms)`),c.push(`color: #999;`)},nt=(e,t,n)=>{let r=n.get===void 0?n.value:n.get;return function(...n){try{let i=et&&$e(),a=r.apply(this,n);if(a instanceof Promise)return a.then(r=>{let a=i&&$e();return i&&a&&tt(e,t,n,r,i,a),Promise.resolve(r)}).catch(n=>{throw n.logged||=(E.error(e,t,n),!0),n});{let r=i&&$e();return i&&r&&et&&tt(e,t,n,a,i,r),a}}catch(n){throw n.logged||=(E.error(e,t,n),!0),n}}},D=(e,t=!1)=>n=>{let r=Object.getOwnPropertyNames(n.prototype).filter(e=>t||e.indexOf(`_`)!==0).map(e=>[e,Object.getOwnPropertyDescriptor(n.prototype,e)]);for(let[t,i]of r)i!==void 0&&typeof i.value==`function`?n.prototype[t]=nt(e,t,i):i!==void 0&&i.get!==void 0&&typeof i.get==`function`&&Object.defineProperty(n.prototype,t,{...i,get:nt(e,t,i)})},rt=class{getBidWithBsidForSlot(e,t=[]){let n=t.filter(e=>e.meta&&e.meta.dchain),r=RegExp(`${e.location}_${e.sequence}(?!\d)`,`i`);for(let e=t.length-1;e>=0;e--){let{adUnitCode:i,meta:a}=t[e];if(r.test(i)&&this.getLastBsid(a))return n[e]}}getLastBsid(e={}){let{dchain:t}=e,n=t&&t.nodes||[];for(let e=n.length-1;e>=0;e--)if(n[e].bsid)return n[e].bsid}};rt=w([D(`DemandChain`),x()],rt);let it={GAM:`gam`,Marmalade:`marmalade`,CMP:`cmp`},at={Prebid:`prebid`,Amazon:`amazon`,Floors:`floors`,Optable:`optable`,TrafficShaping:`trafficShaping`,cridBlock:`cridBlock`,GAM:`gam`,Marmalade:`marmalade`},ot={...it,...at};var O=class extends T{constructor(...e){super(...e),C(this,`_pastEvents`,[])}on(e,t){return this._listeners.add(e),t?.handleEventsAlreadyEmitted&&this._pastEvents.forEach(e),()=>{this.off(e)}}async legacyEmit(e){return this._pastEvents.push(e),Promise.all([...this._listeners].map(async t=>await t(e))).then(e=>(this._emitted++,e))}emit(e){this._pastEvents.push(e),[...this._listeners].forEach(t=>t(e)),this._emitted++,this._trackStatefulEmitter()}_trackStatefulEmitter(){Ke.add(this)}};let st=class extends qe{constructor(...e){super(...e),C(this,`libraryLoadFailed`,new O),C(this,`amazonLibraryLoadComplete`,new O),C(this,`floorsLibraryLoadComplete`,new O),C(this,`optableLibraryLoadComplete`,new O),C(this,`prebidLibraryLoadComplete`,new O),C(this,`trafficShapingLibraryLoadComplete`,new O),C(this,`cridBlockLibraryLoadComplete`,new O),C(this,`gamLibraryLoadComplete`,new O),C(this,`marmaladeLibraryLoadComplete`,new O)}};st=w([S()],st);let ct={AD_BREAK_READY:`adBreakReady`,AD_BUFFERING:`adBuffering`,AD_ERROR:`adError`,AD_CAN_PLAY:`adCanPlay`,ADS_MANAGER_LOADED:`adsManagerLoaded`,AD_METADATA:`adMetadata`,AD_PROGRESS:`adProgress`,ALL_ADS_COMPLETED:`allAdsCompleted`,CLICK:`click`,COMPLETE:`complete`,CONTENT_PAUSE_REQUESTED:`contentPauseRequested`,CONTENT_RESUME_REQUESTED:`contentResumeRequested`,DURATION_CHANGE:`durationChange`,EXPANDED_CHANGED:`expandedChanged`,FIRST_QUARTILE:`firstQuartile`,IMPRESSION:`impression`,INTERACTION:`interaction`,LINEAR_CHANGED:`linearChanged`,LOADED:`loaded`,LOG:`log`,MIDPOINT:`midpoint`,PAUSED:`pause`,RESUMED:`resume`,SKIPPABLE_STATE_CHANGED:`skippableStateChanged`,SKIPPED:`skip`,STARTED:`start`,THIRD_QUARTILE:`thirdQuartile`,USER_CLOSE:`userClose`,VIDEO_CLICKED:`videoClicked`,VIDEO_ICON_CLICKED:`videoIconClicked`,VIEWABLE_IMPRESSION:`viewable_impression`,VOLUME_CHANGED:`volumeChange`,VOLUME_MUTED:`mute`},k={AutoInjected:`auto-injected`,EmbeddedStationary:`embedded-stationary`,Outstream:`outstream`,Playlist:`playlist`,Related:`related`,RelatedSticky:`related-sticky`,StickyOutstream:`stickyoutstream`},lt={ADSLOT_NOT_VISIBLE:-1,ADS_REQUEST_NETWORK_ERROR:1012,ASSET_FALLBACK_FAILED:1021,AUTOPLAY_DISALLOWED:1205,COMPANION_AD_LOADING_FAILED:-1,COMPANION_REQUIRED_ERROR:602,CONSENT_MANAGEMENT_PROVIDER_NOT_READY:1300,DEPRECATED_ERROR_CODE:-1,FAILED_TO_REQUEST_ADS:1005,INVALID_AD_TAG:1013,INVALID_ARGUMENTS:1101,NATIVE_MESSAGE_ERROR:1204,NONLINEAR_DIMENSIONS_ERROR:501,OVERLAY_AD_LOADING_FAILED:-1,OVERLAY_AD_PLAYING_FAILED:500,Rh:2002,STREAM_INITIALIZATION_FAILED:1020,UNKNOWN_AD_RESPONSE:1010,UNKNOWN_ERROR:900,UNSUPPORTED_LOCALE:1011,VAST_ASSET_NOT_FOUND:1007,VAST_EMPTY_RESPONSE:1009,VAST_LINEAR_ASSET_MISMATCH:403,VAST_LOAD_TIMEOUT:301,VAST_MALFORMED_RESPONSE:-1,VAST_MEDIA_ERROR:-1,VAST_MEDIA_LOAD_TIMEOUT:402,VAST_NONLINEAR_ASSET_MISMATCH:503,VAST_NO_ADS_AFTER_WRAPPER:303,VAST_PROBLEM_DISPLAYING_MEDIA_FILE:405,VAST_SCHEMA_VALIDATION_ERROR:101,VAST_TOO_MANY_REDIRECTS:302,VAST_TRAFFICKING_ERROR:200,VAST_UNEXPECTED_DURATION_ERROR:202,VAST_UNEXPECTED_LINEARITY:201,VAST_UNSUPPORTED_VERSION:102,VAST_WRAPPER_ERROR:300,VIDEO_ELEMENT_REQUIRED:-1,VIDEO_ELEMENT_USED:-1,VIDEO_PLAY_ERROR:400,VPAID_ERROR:901},ut={NORMAL:`normal`,FULLSCREEN:`fullscreen`},A={Video_Collapse_Autoplay_SoundOff:`Video_Collapse_Autoplay_SoundOff`,Video_Individual_Autoplay_SOff:`Video_Individual_Autoplay_SOff`,Video_Coll_SOff_Smartphone:`Video_Coll_SOff_Smartphone`,Video_In_Post_ClicktoPlay_SoundOn:`Video_In-Post_ClicktoPlay_SoundOn`,Video_Collapse_Autoplay_SoundOff_15s:`Video_Collapse_Autoplay_SoundOff_15s`,Video_Individual_Autoplay_SOff_15s:`Video_Individual_Autoplay_SOff_15s`,Video_Coll_SOff_Smartphone_15s:`Video_Coll_SOff_Smartphone_15s`,Video_In_Post_ClicktoPlay_SoundOn_15s:`Video_In-Post_ClicktoPlay_SoundOn_15s`},dt={Float:`adthrive-collapse-float`,Mobile:`adthrive-collapse-mobile`},ft={Small:`adthrive-collapse-small`,Medium:`adthrive-collapse-medium`},pt={BottomLeft:`adthrive-collapse-bottom-left`,BottomRight:`adthrive-collapse-bottom-right`,StickyOutstreamBottomLeft:`raptive-player-sticky-bottom-left`,StickyOutstreamBottomRight:`raptive-player-sticky-bottom-right`,TopCenter:`adthrive-collapse-top-center`},j={Unstarted:1,UncollapsedPlay:2,CollapsedPlay:3,UserPauseUncollapsed:4,UserPauseCollapsed:5,PausedNotVisible:6,Overlapped:7,Closed:8,NonLinearAdPlay:9,NonLinearAdPaused:10,NonLinearAdOverlapped:11,UserUnPaused:12},M={Play:1,UserClick:2,PageSwitch:3,OutOfView:4,InView:5,Close:6,Overlapping:7,OtherVideoPlaying:8},mt={"":`Off`,"ar-SA":`Arabic`,"zh-CN":`Chinese`,"en-US":`English`,"fr-FR":`French`,"de-DE":`German`,"hi-IN":`Hindi`,"pt-PT":`Portuguese`,"es-US":`Spanish`};function N(e,t){return function(n,r){t(n,r,e)}}let P=class{constructor(e){this._bootstrapEventBus=e,C(this,`_queueRan`,!1),C(this,`_loadedFinished`,!1),C(this,`_prebidLibraryPromise`,void 0),window.pbjs?.que||(window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[]),this.addToQueue(()=>{this._queueRan=!0,this._loadedFinished=!0}),this._bootstrapEventBus.prebidLibraryLoadComplete.on(()=>{this._loadedFinished=!0}),this._bootstrapEventBus.libraryLoadFailed.on(e=>{e.bootstrapType===`prebid`&&(this._loadedFinished=!0)})}addAdUnits(e){this.addToQueue(()=>{window.pbjs.addAdUnits(e)})}getPrebidAdUnits(){return window.pbjs&&window.pbjs.adUnits}addToQueue(e){if(this._queueRan)try{e()}catch(e){E.error(`PrebidMethods`,`Method in command queue failed to run`,e)}else window.pbjs.que.push(e)}enableAnalytics(e){this.addToQueue(()=>{window.pbjs.enableAnalytics(e)})}isPrebidLoaded(){return window.pbjs&&window.pbjs.libLoaded}getVersion(){return window.pbjs&&window.pbjs.version||`nl`}markWinningBidAsUsed(e){this.addToQueue(()=>{window.pbjs.markWinningBidAsUsed(e)})}offEvent(e,t){this.addToQueue(()=>{window.pbjs.offEvent(e,t)})}onEvent(e,t){this.addToQueue(()=>{window.pbjs.onEvent(e,t)})}refreshUserIds(e,t){return new Promise((n,r)=>{this.addToQueue(()=>{window.pbjs.refreshUserIds(e,t).then(n).catch(r)})})}requestBids(e){this.addToQueue(()=>{window.pbjs.requestBids(e)})}setAliasBidder(e,t,n){this.addToQueue(()=>{n?window.pbjs.aliasBidder(e,t,n):window.pbjs.aliasBidder(e,t)})}setBidderConfig(e,t=!1){this.addToQueue(()=>{window.pbjs.setBidderConfig(e,t)})}setBidderSettings(e){this.addToQueue(()=>{window.pbjs.bidderSettings=e})}setBidsReceivedFilter(e){this.addToQueue(()=>{window.pbjs.setBidsReceivedFilter(e)})}setConfig(e,t=!0){this.addToQueue(()=>{let n=t?Object.keys(e).reduce((t,n)=>{let r=n,i=e[r],a=window.pbjs.getConfig(n);return!a||typeof i!=`object`||typeof i!=typeof a?t[r]=i:t[r]=Array.isArray(i)?[...a??[],...i]:{...a??{},...i},t},{}):e;window.pbjs.setConfig({...n})})}mergeConfig(e){this.addToQueue(()=>{window.pbjs.mergeConfig(e)})}setTargetingForGPTAsync(e,t=null,n=``,r,i,a,o){o?this.addToQueue(()=>{window.pbjs.setTargetingForGPTAsync(e,t,n,r,i,a)}):window.pbjs.setTargetingForGPTAsync(e,t,n,r,i,a)}triggerUserSyncs(){this.addToQueue(()=>{window.pbjs.triggerUserSyncs()})}registerSignalSources(){this.addToQueue(()=>{window.pbjs.registerSignalSources()})}clearTargetingForSharedBidPool(e){this.addToQueue(()=>{window.pbjs.clearTargetingForSharedBidPool(e)})}renderAd(e,t){this.addToQueue(()=>{window.pbjs.renderAd(e,t)})}clearAllAuctions(){this.addToQueue(()=>{window.pbjs.clearAllAuctions()})}clearSlotTargeting(e){this.addToQueue(()=>{let t=e.googleTagSlot;t&&window.pbjs.clearSlotTargeting(t)})}async waitForQueue(){return await this._waitForPrebidLibraryLoaded(),new Promise(e=>{this._queueRan?e(!0):this._loadedFinished&&!this.isPrebidLoaded()?e(!1):window.pbjs.que.push(()=>{e(!0)})})}getBidResponsesForAdUnitCode(e){return window.pbjs.getBidResponsesForAdUnitCode(e)}clearAuctionBids(e){return window.pbjs.clearAuctionBids(e)}trimAdUnitBidCache(e,t){return window.pbjs.trimAdUnitBidCache(e,t)}trimBidPool(e,t){return window.pbjs.trimBidPool(e,t)}getUserIdsAsEids(){return window.pbjs.getUserIdsAsEids?.()??[]}getUserIdsAsEidBySource(e){return window.pbjs.getUserIdsAsEidBySource?.(e)}getBidResponsesForBidPoolId(e){return pbjs.getBidResponsesForBidPoolId?.(e)??{}}getAdserverTargetingForAdUnitCode(e,t){return window.pbjs.getAdserverTargetingForAdUnitCode?.(e,t)??{}}getAllPrebidWinningBids(){return window.pbjs.getAllPrebidWinningBids()}getAllWinningBids(){return window.pbjs.getAllWinningBids()}getConfig(e,t){return t?window.pbjs.getConfig(e,t):window.pbjs.getConfig(e)}getHighestCpmBids(e){return window.pbjs?.getHighestCpmBids(e)??[]}getHighestCpmBidsForPoolId(e){return window.pbjs?.getHighestCpmBidsForPoolId(e)??[]}getUserIds(){return window.pbjs.getUserIds()}async getUserIdsAsync(){return await this._waitForPrebidLibraryLoaded(),new Promise(e=>{this.isPrebidLoaded()||e(!1),window.pbjs.getUserIdsAsync().then(t=>e(t)).catch(()=>{})})}removeAdUnit(e){return window.pbjs.removeAdUnit(e)}removeAllAdUnits(e=!0){if(e){let e=[...pbjs.adUnits??[]];return window.pbjs.adUnits=[],e}else{let e=[],t=[];return(pbjs.adUnits??[]).forEach(n=>{Object.values(A).includes(n.code)?e.push(n):t.push(n)}),window.pbjs.adUnits=e,t}}updateAdUnit(e,t){let n=this.getAdUnit(e);n&&Object.assign(n,t)}getAdUnit(e){return window.pbjs.adUnits?.find(t=>t.code===e)}setPAAPIConfigForGPT(e){return window.pbjs.setPAAPIConfigForGPT(e)}buildVideoURL(e,t,n){return window.pbjs.adServers?.dfp?.buildVideoUrl?.({adUnit:e,params:{...t,cust_params:n}})}async _waitForPrebidLibraryLoaded(){this._prebidLibraryPromise&&await this._prebidLibraryPromise}setupPrebidWindow(e){this._prebidLibraryPromise=e,window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[]}};P=w([S(),N(0,b(st))],P);let ht=e=>{let t={};return function(...n){let r=JSON.stringify(n);if(t[r])return t[r];let i=e.apply(this,n);return t[r]=i,i}},gt=navigator.vendor,_t=navigator.userAgent,vt=ht(e=>/Edge\/|Edg\/|EdgiOS/.test(e||_t)),yt=ht(e=>/YaBrowser/.test(e||_t)),bt=ht(e=>/Firefox/.test(e||_t)),xt=ht(e=>/Trident|MSIE/.test(e||_t)),St=ht(e=>/Opera|OPR/.test(e||_t)),Ct=ht((e,t)=>(/Chrom/.test(e||_t)&&/Google/.test(t||gt)||/CriOS/.test(e||_t))&&!vt(e)&&!St(e)&&!yt(e)),wt=ht(e=>/Chrom|Applechromium/.test(e||_t)),Tt=ht((e,t)=>/Safari/.test(e||_t)&&/Apple Computer/.test(t||gt)&&!vt(e)&&!St(e)&&!yt(e)),Et=ht(()=>/WebKit/.test(_t)),Dt=e=>{let t=e.indexOf(`Version/`);if(t!==-1){let n=t+8,r=e.indexOf(` `,n);return e.substring(n,r)}let n=e.indexOf(`Safari/`);if(n!==-1){let t=n+7,r=e.indexOf(` `,t);return e.substring(t,r)}return null},Ot=e=>{let t=e.indexOf(`Firefox/`);if(t!==-1){let n=t+8,r=e.indexOf(` `,n);return r===-1&&(r=e.length),e.substring(n,r)}return null},kt=e=>{let t=e.indexOf(`Edg/`),n=4;if(t===-1&&(t=e.indexOf(`EdgiOS/`),n=7),t===-1&&(t=e.indexOf(`Edge/`),n=5),t!==-1){let r=t+n,i=e.indexOf(` `,r);return i===-1&&(i=e.length),e.substring(r,i)}return null},At=e=>{let t=e.indexOf(`MSIE `);if(t!==-1){let n=t+5,r=e.indexOf(`;`,n);return r===-1&&(r=e.length),e.substring(n,r)}},jt=e=>{let t=e.indexOf(`OPR/`);if(t!==-1){let n=t+4,r=e.indexOf(` `,n);return e.substring(n,r)}return`Unknown`},Mt=e=>{let t=e.indexOf(`Chrom`)===-1?e.indexOf(`CriOS`):e.indexOf(`Chrom`);if(t!==-1){let n=t+7,r=e.indexOf(` `,n);return e.substring(n,r)}return null},Nt=ht((e,t)=>Ct(e,t)?`Chrome`:Tt(e,t)?`Safari`:vt(e)?`Edge`:bt(e)?`Firefox`:St(e)?`Opera`:xt(e)?`IE`:`Others`),Pt=ht((e,t)=>{let n=Nt(e||_t,t||gt);if(n===`Chrome`)return Mt(e||_t);if(n===`Safari`)return Dt(e||_t);if(n===`Firefox`)return Ot(e||_t);if(n===`Edge`)return kt(e||_t);if(n===`IE`)return At(e||_t);if(n===`Opera`)return jt(e||_t)}),Ft=ht(()=>wt()?`chromium`:Et()?`webkit`:`other`),It=ht((e=navigator.userAgent)=>/Windows NT|Macintosh/i.test(e)),Lt=(e=navigator.userAgent)=>/iP(hone|od|ad)/i.test(e),Rt=(e=navigator.userAgent)=>e.includes(`android`)||e.includes(`Android`),zt=(e,t=navigator.userAgent)=>parseInt(e.split(`.`)[0],10)>=26?e.includes(`.`)?RegExp(`Version/${e}(?=\\s|$)`,`i`).test(t):RegExp(`Version/${e}(?=\\s|$|\\.)`,`i`).test(t):RegExp(`OS ${e.replace(`.`,`_`)}`,`i`).test(t),Bt=(e,t=navigator.userAgent)=>Lt(t)&&zt(e,t),Vt=(e=window.location.search)=>{let t=e.indexOf(`?`)===0?1:0;return e.slice(t).split(`&`).reduce((e,t)=>{let[n,r]=t.split(`=`);return e.set(n,r),e},new Map)},Ht=e=>e.split(`&`).reduce((e,t)=>{let[n,r]=t&&t.split(`=`);return n&&r&&(e[n]=r),e},{}),Ut=e=>Object.keys(e).map(t=>`${t}=${encodeURIComponent(e[t])}`).join(`&`),Wt=class{constructor(){C(this,`_map`,void 0),C(this,`_multiMap`,void 0),C(this,`setAbGroup`,void 0),this._map=new Map,this._multiMap=new Map,this.setAbGroup=!Vt().has(`at_features`)}set(e,t,n=`singular`){this.setAbGroup&&n===`singular`?this._map.set(e,t):this.setAbGroup&&n===`multi`&&this._multiMap.set(e,t)}get(e){let t=this._map.get(e),n=this._multiMap.get(e);return t||n}get groups(){return this.getMapGroups(`singular`)}get groupsAsObject(){return this.getMapGroupsAsObject(`singular`)}get multiGroups(){return this.getMapGroups(`multi`)}get multiGroupsAsObject(){return this.getMapGroupsAsObject(`multi`)}getMapGroups(e){let t=[],n=e===`singular`?this._map:this._multiMap;for(let[e,r]of n)Array.isArray(r)?r.forEach(n=>{t.push(`${e}:${n}`)}):t.push(`${e}:${r}`);return t}getMapGroupsAsObject(e){let t={},n=e===`singular`?this._map:this._multiMap;for(let e of n.keys()){let r=n.get(e);r&&(t[e]=r)}return t}};Wt=w([S()],Wt);let Gt=e=>e.length===1,Kt=e=>{let t=0;return e.forEach(e=>{e.weight&&(t+=e.weight)}),e.length>0&&e.every(e=>!!(Object.prototype.hasOwnProperty.call(e,`value`)&&Object.prototype.hasOwnProperty.call(e,`weight`)))&&t===100},qt=e=>e.length>0&&e.every(e=>!!(Object.prototype.hasOwnProperty.call(e,`value`)&&Object.prototype.hasOwnProperty.call(e,`weight`))),Jt=e=>e.length>0&&e.every(e=>{let t=0,n=!!(e.value&&e.choices);for(let r of e.choices||[]){if(!Object.prototype.hasOwnProperty.call(r,`weight`)||!Object.prototype.hasOwnProperty.call(r,`value`)){n=!1;break}t+=r.weight}return!!(n&&t===100)}),Yt=class{constructor(e){C(this,`_validExperiments`,void 0),C(this,`coreExperiments`,void 0),this._validExperiments=this._getValidExperiments(e).map(e=>({...e,_expConfigABGroup:e.abgroup})),this.coreExperiments=this._validExperiments.map(({variants:e,abgroup:t,key:n})=>({variants:e,abgroup:t,key:n}))}getCoreExperimentButMutateWeights(e,t){let n=this.getCoreExperiment(e,t);return n?.type===`bernoulliTrial`&&(n.variants[0].weight=n.variants[0].weight/100),n}getCoreExperiment(e,t){let n=t?this._validExperiments.find(e=>e.lookupKey===t):null;return n||=this._validExperiments.find(({key:t})=>t===e),n}getAllMatchingCoreExperiments(e){return this._validExperiments.filter(({label:t})=>t?.includes(e))}getWeightedChoiceVariants(e,t){let n=this.getCoreExperimentButMutateWeights(e,t);return n&&n.type===`weightedChoice`?n.variants.map(e=>({choice:e.value,weight:e.weight,...e.abvalue?{abvalue:e.abvalue}:{}})):null}getMultivalueBernoulliVariants(e,t){let n=this.getCoreExperimentButMutateWeights(e,t);return n&&n.type===`multivalueBernoulliTrial`?n.variants.map(e=>({choice:e.value,weight:e.weight})):null}getMultivalueWeightedChoiceVariants(e,t){let n=this.getCoreExperimentButMutateWeights(e,t);return n&&n.type===`multivalueWeightedChoice`?n.variants.map(e=>({choice:e.value,options:e.choices.map(e=>({choice:e.value,weight:e.weight,abvalue:e.abvalue})),keyABValue:e.abvalue})):null}_getValidExperiments(e=[]){return e.filter(({type:e,variants:t,key:n})=>e===`weightedChoice`?this._isValidWeightedChoice(t,n):e===`bernoulliTrial`?this._isValidBernoulliTrial(t,n):e===`multivalueBernoulliTrial`?this._isValidMultivalueBernoulliTrial(t,n):e===`multivalueWeightedChoice`?this._isValidMultivalueWeightChoiceTrial(t,n):!1)}_isValidWeightedChoice(e,t){let n=Kt(e);return n||this._invalidExperiment(t),n}_isValidBernoulliTrial(e,t){let n=Gt(e);return n||this._invalidExperiment(t),n}_isValidMultivalueBernoulliTrial(e,t){let n=qt(e);return n||this._invalidExperiment(t),n}_isValidMultivalueWeightChoiceTrial(e,t){let n=Jt(e);return n||this._invalidExperiment(t),n}_invalidExperiment(e){E.error(`CoreExperimentConfig`,`_invalidExperiment`,`Experiment Validation failed for key: `,e)}};Yt=w([S(),N(0,b(`CoreExperimentValues`))],Yt);let Xt=e=>{let t={},n=Vt().get(e);if(n)try{let r=decodeURIComponent(n).replace(/\+/g,``);t=JSON.parse(r),E.event(`ExperimentOverridesUtil`,`getExperimentOverrides`,e,t)}catch(e){e instanceof URIError}return t},Zt=(e,t)=>typeof e==typeof t,Qt=class{constructor(){C(this,`adthriveExperimentOverrides`,void 0),this.adthriveExperimentOverrides=Xt(`at_features`)}hasValidOverride(e,t){if(e in this.adthriveExperimentOverrides){let n=this.adthriveExperimentOverrides[e];return this.isValidExperimentOverride(t,n)}return!1}useOverride(e){return this.adthriveExperimentOverrides[e]}isValidExperimentOverride(e,t){if(e.length===0)return!1;let n=Array.isArray(e[0])?`array`:typeof e[0];if(n===`array`){if(!Array.isArray(t)||t.some(t=>!e.includes(t))&&t.map(e=>`[`+JSON.stringify(e)+`]`).some(t=>!e.map(e=>JSON.stringify(e)).includes(t))&&!e.map(e=>JSON.stringify(e)).includes(JSON.stringify(t)))return!1}else if(n===`object`){if(!e.map(e=>JSON.stringify(e)).includes(JSON.stringify(t)))return!1}else if(typeof e[0]==typeof t&&!e.includes(t))return!1;return!0}};Qt=w([S()],Qt);var $t=class{constructor(){C(this,`shouldUseCoreExperimentsConfig`,!0),C(this,`_expConfigABGroup`,void 0),C(this,`abgroup`,void 0);let e=this.run.bind(this);this.run=()=>{let t=y.resolve(Qt),n=this._choices?.map(e=>e.choice),r=this._expConfigABGroup?this._expConfigABGroup:this.abgroup?this.abgroup:this.key;return n&&t.hasValidOverride(r,n)?t.useOverride(r):e()}}};let en=`You need to set "this._key" in the init method for this experiment. The code should look something like this:

  protected init() {
    this._key = 'my_key';
  }`;var tn=class extends $t{get _choices(){return null}get key(){if(!this._key)throw Error(en);return this._key}get lookup(){return this._lookup||``}constructor(e,t){super(),this.abgroupClass=e,this._coreExperimentConfig=t,C(this,`_type`,void 0),C(this,`_result`,void 0),C(this,`_stickyResult`,void 0),C(this,`_stickyWeight`,void 0),C(this,`_expConfigABGroup`,void 0),C(this,`_setAbGroup`,!0),C(this,`_abGroupType`,`singular`),C(this,`_autorun`,!0),C(this,`_experiment`,void 0),C(this,`_key`,void 0),C(this,`_lookup`,void 0),this.abgroupClass=y.resolve(Wt),this._coreExperimentConfig=y.resolve(Yt),this.init();let n=this._experiment=this._coreExperimentConfig.getCoreExperiment(this.key,this.lookup);this._type=n?.type||`Unknown`,this.isEnabled()&&(this._expConfigABGroup=n?.abgroup,this._autorun&&this._runAndSetABGroup())}_isMultiValueChoice(e){return this._type===`multivalueWeightedChoice`}_isGenericChoice(e){return this._type!==`multivalueWeightedChoice`}_isMultiValueResult(e){return this._type===`multivalueWeightedChoice`}_isGenericResult(e){return this._type!==`multivalueWeightedChoice`}_runAndSetABGroup(){let e=this._choices;if(e){let t=this._result=this.run();if(t===void 0)return;this._isMultiValueResult(t)&&this._isMultiValueChoice(e)?this._setMultivalueABGroup(e,t):this._isGenericResult(t)&&this._isGenericChoice(e)&&this._setStandardABGroup(e,t)}return this._result}_setStandardABGroup(e,t){let n=e.filter(({choice:e})=>e===t)[0],r=n?.abvalue||t;if(this._setAbGroup&&r!==void 0){let e=n?.weight??-1,t=this.getResultWeight(r,e);t!==100&&this.setABGroup(r,void 0,t)}}_setMultivalueABGroup(e,t){let n=[],r=this._experiment;if(!r)return;let i={};e.forEach(e=>{let t=`${e.choice}`;i[t]||(i[t]=[]),e.options.forEach(n=>{let r=Array.isArray(n.choice)?n.choice.join(`%7C`):`${n.choice}`;i[t].push({weight:n.weight,option:r,...n.abvalue&&{abvalue:n.abvalue},...e.keyABValue&&{keyABValue:e.keyABValue}})})}),t.forEach(e=>{if(i[e.choice])for(let t of i[e.choice])(Array.isArray(e.option)?e.option.join(`%7C`):`${e.option}`)===t.option&&t.weight!==100&&n.push(`${t.keyABValue??e.choice}_${t.abvalue??t.option}@${t.weight}`)}),n.length&&this.abgroupClass.set(r.abgroup,n,this._abGroupType)}getResultWeight(e,t=-1){let n=this._experiment;if(!n)return-1;if(n.type===`bernoulliTrial`){let t=n.variants[0].weight;return e?t:100-t}else if(n.type===`multivalueBernoulliTrial`){let e=new Map;return n.variants.forEach(t=>{e.set(t.value,t.weight)}),e}return t}setABGroup(e,t,n){let r=this._experiment,i=this._stickyWeight??n;if(r)if(Array.isArray(e)){let n=e.filter(e=>typeof i==`number`?i!==100:i&&i.get(e)!==100).map(e=>`${e}@${typeof i==`number`?i:i&&i.get(e)||0}`);n.length||n.push(`none`),this.abgroupClass.set(t||r.abgroup,n,this._abGroupType)}else this.abgroupClass.set(t||r.abgroup,`${e}@${i}`,this._abGroupType)}init(){throw Error(en)}get result(){return this._autorun===!1&&this._result===void 0&&this.abgroupClass.get(this.key)===void 0&&(this._result=this._runAndSetABGroup()),this._result}isEnabled(){return this.shouldUseCoreExperimentsConfig?!!(this._experiment=this._coreExperimentConfig.getCoreExperiment(this.key,this.lookup)):!0}},nn=class{},rn=class extends nn{constructor(e){super(),this._probability=e}get(){if(this._probability<0||this._probability>1)throw Error(`Invalid probability: ${this._probability}`);return Math.random()<this._probability}},F=class extends tn{constructor(...e){super(...e),C(this,`_stickyResult`,void 0),C(this,`_stickyWeight`,void 0)}get _choices(){let e=this._coreExperimentConfig.getCoreExperiment(this.key,this.lookup)?.variants;return e?[{choice:!0,weight:e[0].weight},{choice:!1,weight:100-e[0].weight}]:[{choice:!0,weight:-1},{choice:!1,weight:-1}]}run(){let e=this._coreExperimentConfig.getCoreExperiment(this.key,this.lookup);if(e){let t=e.variants[0];return new rn(t.weight/100).get()}}setABGroup(e,t){let n=this._coreExperimentConfig.getCoreExperiment(this.key,this.lookup),r,i;if(n){let a=n.variants[0];this._stickyResult!==void 0&&this._stickyWeight!==void 0?(r=this._stickyResult?`on`:`off`,i=this._stickyWeight):(r=e?`on`:`off`,i=e?a.weight:100-a.weight),i!==100&&i!==0&&this.abgroupClass.set(t||n.abgroup,`${r}@${i}`)}}get result(){return this._autorun===!1&&this._result===void 0&&this.abgroupClass.get(this.key)===void 0&&(this._result=this._runAndSetABGroup()),this._result??this._default}};let an=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`Amazon`,this._lookup=`AMZN`}};an=w([S()],an);let on=class{constructor(e,t){C(this,`amazonEnabled`,void 0),C(this,`bootstrapResult`,new Map),C(this,`webVitalsEnabled`,void 0),C(this,`gptLibFailedToLoad`,void 0),C(this,`prebidLibFailedToLoad`,void 0),C(this,`amazonLibFailedToLoad`,void 0),C(this,`bootstrapLoaders`,{}),C(this,`isAmazonPreloaded`,void 0),C(this,`isGPTPreloaded`,void 0),C(this,`isPrebidPreloaded`,void 0),C(this,`isCmpPreloaded`,void 0),C(this,`_host`,void 0),C(this,`_baseUrl`,void 0),C(this,`_targetPath`,void 0),C(this,`isGDPR`,void 0),this.webVitalsEnabled=Ct();let{gptLoad:n=!0,amazonLoad:r=!0,prebidLoad:i=!0}=e.preloadLibResults||{};this.gptLibFailedToLoad=!n,this.amazonLibFailedToLoad=!r,this.prebidLibFailedToLoad=!i,this.isGDPR=e.gdpr===`true`;let a=Lt()?`/s2s`:``;this._host=e.host,this._baseUrl=e.baseUrl,this._targetPath=`${e.targetPath}${a}`||`/es2018${a}`;let o=e.deliveryFeatures;this.isAmazonPreloaded=!!(o&&o.includes(`amazonLoad`)&&!this.amazonLibFailedToLoad),this.isGPTPreloaded=!!(o&&o.includes(`gptLoad`)&&!this.gptLibFailedToLoad),this.isPrebidPreloaded=!!(o&&o.includes(`prebidLoad`)&&!this.prebidLibFailedToLoad),this.isCmpPreloaded=!!(o&&o.includes(`consentManagerCMP`)),this.amazonEnabled=t.result}get host(){return this._host}get baseUrl(){return this._baseUrl}get targetPath(){return this._targetPath}};on=w([D(`BootstrapConfig`),S(),N(0,b(`AdThrive`)),N(1,b(an))],on);var I=class{get enabled(){return!0}},sn=class{constructor(){C(this,`_featureRollouts`,{}),C(this,`_checkedFeatureRollouts`,new Map),C(this,`_enabledFeatureRolloutIds`,[])}get siteFeatureRollouts(){return this._featureRollouts}_isRolloutEnabled(e){if(this._doesRolloutExist(e)){let t=this._featureRollouts[e],n=t.enabled,r=t.data;if(this._doesRolloutHaveConfig(e)&&this._isFeatureRolloutConfigType(r)){let e=r.pct_enabled?r.pct_enabled/100:1;n&&=new rn(e).get()}return n}return!1}isRolloutEnabled(e){let t=this._checkedFeatureRollouts.get(e)??this._isRolloutEnabled(e);return this._checkedFeatureRollouts.get(e)===void 0&&this._checkedFeatureRollouts.set(e,t),t}isRolloutAdministrativelyEnabled(e){return this._doesRolloutExist(e)&&this._featureRollouts[e].enabled}_doesRolloutExist(e){return this._featureRollouts&&!!this._featureRollouts[e]}_doesRolloutHaveConfig(e){return this._doesRolloutExist(e)&&`data`in this._featureRollouts[e]}_isFeatureRolloutConfigType(e){return typeof e==`object`&&!!e&&!!Object.keys(e).length}getSiteRolloutConfig(e){let t=this.isRolloutEnabled(e),n=this._featureRollouts[e]?.data;return t&&this._doesRolloutHaveConfig(e)&&this._isFeatureRolloutConfigType(n)?n:{}}get enabledFeatureRolloutIds(){return this._enabledFeatureRolloutIds}};let cn=new class extends sn{constructor(e){super(),this._featureRollouts=e,this._setEnabledFeatureRolloutIds()}_setEnabledFeatureRolloutIds(){Object.entries(this._featureRollouts).forEach(([e,t])=>{this.isRolloutEnabled(e)&&t.featureRolloutId!==void 0&&this._enabledFeatureRolloutIds.push(t.featureRolloutId)})}}(window.adthrive&&window.adthrive.siteAds&&`featureRollouts`in window.adthrive.siteAds?window.adthrive.siteAds.featureRollouts??{}:{}),ln=class extends Wt{};ln=w([S()],ln);let un=class extends qe{constructor(...e){super(...e),C(this,`act25consentCaptured`,new O),C(this,`usCmpConsentCaptured`,new O),C(this,`showCCPAModal`,new O)}};un=w([S()],un);let dn=[`mcmpfreqrec`],L=new class extends Ye{constructor(...e){super(...e),C(this,`name`,`BrowserStorage`),C(this,`disable`,!1),C(this,`gdprPurposes`,[1]),C(this,`_sessionStorageHandlerQueue`,[]),C(this,`_localStorageHandlerQueue`,[]),C(this,`_cookieHandlerQueue`,[]),C(this,`_gdpr`,void 0),C(this,`_shouldQueue`,!1)}init(e){this._gdpr=e.gdpr===`true`,this._shouldQueue=this._gdpr}clearQueue(e){this._gdpr&&this._hasStorageConsent()===!1||(e&&(this._shouldQueue=!1,this._sessionStorageHandlerQueue.forEach(e=>{this.setSessionStorage(e.key,e.value)}),this._localStorageHandlerQueue.forEach(e=>{if(e.key===`adthrive_abgroup`){let t=Object.keys(e.value)[0],n=e.value[t],r=e.value[`${t}_weight`];this.getOrSetABGroupLocalStorageValue(t,n,r,{value:24,unit:`hours`})}else e.expiry?e.type===`internal`?this.setExpirableInternalLocalStorage(e.key,e.value,{expiry:e.expiry,resetOnRead:e.resetOnRead}):this.setExpirableExternalLocalStorage(e.key,e.value,{expiry:e.expiry,resetOnRead:e.resetOnRead}):e.type===`internal`?this.setInternalLocalStorage(e.key,e.value):this.setExternalLocalStorage(e.key,e.value)}),this._cookieHandlerQueue.forEach(e=>{e.type===`internal`?this.setInternalCookie(e.key,e.value):this.setExternalCookie(e.key,e.value)})),this._sessionStorageHandlerQueue=[],this._localStorageHandlerQueue=[],this._cookieHandlerQueue=[])}readInternalCookie(e){return this._verifyInternalKey(e),this._readCookie(e)}readExternalCookie(e){return this._readCookie(e)}readExternalCookieList(e){return this._readCookieList(e)}getAllCookies(){return this._getCookies()}readInternalLocalStorage(e){return this._verifyInternalKey(e),this._readFromLocalStorage(e)}readExternalLocalStorage(e){return this._readFromLocalStorage(e)}readSessionStorage(e){let t=(window.sessionStorage.getItem(e));if(!t)return null;try{return JSON.parse(t)}catch{return t}}deleteCookie(e){document.cookie=`${e}=; SameSite=None; Secure; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/`}deleteLocalStorage(e){window.localStorage.removeItem(e)}deleteSessionStorage(e){window.sessionStorage.removeItem(e)}_hasStorageConsent(){if(typeof window.__cmp==`function`)try{let e=(window.__cmp(`getCMPData`));if(!e||!e.purposeConsents)return;let t=e.purposeConsents[1];return t===!0?!0:t===!1||t==null?!1:void 0}catch{return}}setInternalCookie(e,t,n){this.disable||(this._verifyInternalKey(e),this._setCookieValue(`internal`,e,t,n))}setExternalCookie(e,t,n){this.disable||this._setCookieValue(`external`,e,t,n)}setInternalLocalStorage(e,t){if(!this.disable)if(this._verifyInternalKey(e),this._gdpr&&this._shouldQueue){let n={key:e,value:t,type:`internal`};this._localStorageHandlerQueue.push(n)}else{let n=typeof t==`string`?t:JSON.stringify(t);window.localStorage.setItem(e,n)}}setExternalLocalStorage(e,t){if(!this.disable)if(this._gdpr&&this._shouldQueue){let n={key:e,value:t,type:`external`};this._localStorageHandlerQueue.push(n)}else{let n=typeof t==`string`?t:JSON.stringify(t);window.localStorage.setItem(e,n)}}setExpirableInternalLocalStorage(e,t,n){if(!this.disable){this._verifyInternalKey(e);try{let r=n?.expiry??{value:400,unit:`days`},i=n?.resetOnRead??!1;if(this._gdpr&&this._shouldQueue){let n={key:e,value:t,type:`internal`,expires:this._getExpiryDate(r),expiry:r,resetOnRead:i};this._localStorageHandlerQueue.push(n)}else{let n={value:t,type:`internal`,expires:this._getExpiryDate(r),expiry:r,resetOnRead:i};window.localStorage.setItem(e,JSON.stringify(n))}}catch(e){console.error(e)}}}setExpirableExternalLocalStorage(e,t,n){if(!this.disable)try{let r=n?.expiry??{value:400,unit:`days`},i=n?.resetOnRead??!1;if(this._gdpr&&this._shouldQueue){let n={key:e,value:JSON.stringify(t),type:`external`,expires:this._getExpiryDate(r),expiry:r,resetOnRead:i};this._localStorageHandlerQueue.push(n)}else{let n={value:t,type:`external`,expires:this._getExpiryDate(r),expiry:r,resetOnRead:i};window.localStorage.setItem(e,JSON.stringify(n))}}catch(e){console.error(e)}}setSessionStorage(e,t){if(!this.disable)if(this._gdpr&&this._shouldQueue){let n={key:e,value:t};this._sessionStorageHandlerQueue.push(n)}else{let n=typeof t==`string`?t:JSON.stringify(t);window.sessionStorage.setItem(e,n)}}getOrSetABGroupLocalStorageValue(e,t,n,r,i=!0){let a=`adthrive_abgroup`,o=(this.readInternalLocalStorage(a));if(o!==null){let t=o[e],n=o[`${e}_weight`]??null;if(this._isValidABGroupLocalStorageValue(t))return[t,n]}let s={...o,[e]:t,[`${e}_weight`]:n};return r?this.setExpirableInternalLocalStorage(a,s,{expiry:r,resetOnRead:i}):this.setInternalLocalStorage(a,s),[t,n]}_isValidABGroupLocalStorageValue(e){return e!=null&&!(typeof e==`number`&&isNaN(e))}_getExpiryDate({value:e,unit:t}){let n=new Date;return t===`milliseconds`?n.setTime(n.getTime()+e):t==`seconds`?n.setTime(n.getTime()+e*1e3):t===`minutes`?n.setTime(n.getTime()+e*60*1e3):t===`hours`?n.setTime(n.getTime()+e*60*60*1e3):t===`days`?n.setTime(n.getTime()+e*24*60*60*1e3):t===`months`&&n.setTime(n.getTime()+e*30*24*60*60*1e3),n.toUTCString()}_resetExpiry(e){return e.expires=this._getExpiryDate(e.expiry),e}_readCookie(e){let t=(document.cookie.split(`; `).find(t=>t.split(`=`)[0]===e));if(!t)return null;let n=(t.split(`=`))[1];if(n)try{return JSON.parse(decodeURIComponent(n))}catch{return decodeURIComponent(n)}return null}_readCookieList(e){let t;for(let n of document.cookie.split(`;`)){let[r,...i]=(n.split(`=`));r.trim()===e&&(t=i.join(`=`).trim())}return t&&JSON.parse(t)||[]}_getCookies(){let e=[];return document.cookie.split(`;`).forEach(t=>{let[n,r]=t.split(`=`).map(e=>e.trim());e.push({name:n,value:r})}),e}_readFromLocalStorage(e){let t=(window.localStorage.getItem(e));if(!t)return null;try{let n=(JSON.parse(t)),r=n.expires&&(new Date().getTime())>=(new Date(n.expires).getTime());if(e===`adthrive_abgroup`&&n.created)return window.localStorage.removeItem(e),null;if(n.resetOnRead&&n.expires&&!r){let t=(this._resetExpiry(n));return window.localStorage.setItem(e,JSON.stringify(n)),t.value??t}else if(r)return window.localStorage.removeItem(e),null;if(Object.prototype.hasOwnProperty.call(n,`value`))try{return JSON.parse(n.value)}catch{return n.value}else return n}catch{return t}}_setCookieValue(e,t,n,r){try{if(this._gdpr&&this._shouldQueue){let r={key:t,value:n,type:e};this._cookieHandlerQueue.push(r)}else{let e=(this._getExpiryDate(r?.expiry??{value:400,unit:`days`})),i=r?.sameSite??`None`,a=r?.secure??!0,o=typeof n==`object`?JSON.stringify(n):n;document.cookie=`${t}=${o}; SameSite=${i}; ${a?`Secure;`:``} expires=${e}; path=/`}}catch{}}_verifyInternalKey(e){let t=(e.startsWith(`adthrive_`)),n=(e.startsWith(`adt_`));if(!t&&!n&&!dn.includes(e))throw Error(`When reading an internal cookie, the key must start with "adthrive_" or "adt_" or be part of the allowed legacy keys.`)}},fn=class{constructor(e,t){this._consentEventBus=t,C(this,`_required`,void 0),C(this,`_consented`,void 0),C(this,`_storageKey`,`adthrive_act25-consent`),this._required=e.core.country===`CA`&&e.core.region===`QC`,this._consented=L.readInternalLocalStorage(this._storageKey),this._required&&this._setupListeners()}get required(){return this._required}get consented(){return this._consented}set consented(e){this._consented=e}_setupListeners(){this._consentEventBus.act25consentCaptured.on(e=>{this._consented=e})}};fn=w([S(),N(0,b(`AdThrive`)),N(1,b(un))],fn);let pn={analytics_storage:`granted`,ad_storage:`granted`,third_party_storage:`granted`,ad_user_data:`granted`,ad_personalization:`granted`},mn=e=>{let t=e.replace(/\s+/g,``);return t=t.replace(/^,+|,+$/g,``),t.length===0?``:`,${t},`},hn={AdDensity:`addensity`,AdLayout:`adlayout`,FooterCloseButton:`footerclose`,Interstitial:`interstitial`,RemoveVideoTitleWrapper:`removevideotitlewrapper`,StickyOutstream:`stickyoutstream`,StickyOutstreamOnStickyPlayer:`sospp`,VideoAdvancePlaylistRelatedPlayer:`videoadvanceplaylistrp`,MobileStickyPlayerPosition:`mspp`},gn=e=>{let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return t>>>0},_n=e=>gn(e).toString(16),vn=e=>typeof e==`string`?/^[0-9a-f]{64}$/.test(e):!1,yn=e=>typeof e==`string`?/^[0-9a-fA-F-]{36}$/.test(e):!1,bn=e=>typeof e==`string`?/^[0-9a-f]{32}$/.test(e):!1,xn=e=>typeof e==`string`?!!(e&&/^[A-Za-z0-9\-_]+$/.test(e)):!1,Sn=(e,t=2**53-1)=>n=>typeof n==`string`?n.length>=e&&n.length<=t:!1,Cn=e=>{if(e===null)return null;let t=e.map(({choice:e})=>e);return _n(JSON.stringify(t))},wn=(e,t)=>e.find(({choice:e})=>e===t)?.weight??null,Tn=e=>e!=null&&!(typeof e==`number`&&isNaN(e)),R=()=>(e,t,n)=>{let r=n.value;r&&(n.value=function(...e){let t=Cn(this._choices),n=this._expConfigABGroup?this._expConfigABGroup:this.abgroup,i=n?n.toLowerCase():this.key?this.key.toLowerCase():``,a=t?`${i}_${t}`:i,o=this.localStoragePrefix?`${this.localStoragePrefix}-${a}`:a,s=`config`in window.adthrive?window.adthrive.config.gdpr.enabled:window.adthrive.gdpr===`true`;if([hn.AdLayout,hn.AdDensity].includes(i)&&s)return r.apply(this,e);let c=L.readInternalLocalStorage(`adthrive_branch`);(c&&c.enabled)===!1&&L.deleteLocalStorage(o);let l=(()=>r.apply(this,e))(),u=wn(this._choices,l),[d,f]=L.getOrSetABGroupLocalStorageValue(o,l,u,{value:24,unit:`hours`});return this._stickyResult=d,this._stickyWeight=f,d})},En=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`KargoSpotlightExperiment`,this._lookup=`KGSPLT`}run(){return super.run()}};w([R()],En.prototype,`run`,null),En=w([S()],En);let Dn=class extends qe{constructor(...e){super(...e),C(this,`targetingReady`,new T)}};Dn=w([S()],Dn);var On=class{constructor(){C(this,`_siteExperimentEventBus`,y.resolve(Dn)),C(this,`_isTargeted`,!1),C(this,`experimentConfig`,void 0)}get result(){return this._isTargeted||=(this._siteExperimentEventBus.targetingReady.emit(),!0),this._result}get enabled(){return this.experimentConfig!==void 0}_isValidResult(e,t=()=>!0){return t()&&Tn(e)}};let z=ht(()=>{let e=navigator.userAgent,t=/Tablet|iPad|Playbook|Nook|webOS|Kindle|Android (?!.*Mobile).*Safari|CrOS/i.test(e);return/Mobi|iP(hone|od)|Opera Mini/i.test(e)&&!t}),kn=(e,t)=>{let n=e.adDensityEnabled,r=e.adDensityLayout.pageOverrides.find(e=>!!document.querySelector(e.pageSelector)&&(e[t].onePerViewport||typeof e[t].adDensity==`number`));return n?!r:!0},An=e=>{let t=e.videoPlayers?.partners?.stickyOutstream?.blockedPageSelectors;return t?!document.querySelector(t):!0},jn=e=>{let t=e.adOptions.interstitialBlockedPageSelectors;return t?!document.querySelector(t):!0},Mn=(e,t,n)=>{switch(t){case hn.AdDensity:return kn(e,n);case hn.StickyOutstream:return An(e);case hn.Interstitial:return jn(e);default:return!0}},Nn=e=>e.length===1,Pn=e=>{let t=e.reduce((e,t)=>t.weight?t.weight+e:e,0);return e.length>0&&e.every(e=>{let t=e.value,n=e.weight;return!!(t!=null&&!(typeof t==`number`&&isNaN(t))&&n)})&&t===100},Fn=(e,t)=>{if(!e)return!1;let n=!!e.enabled,r=e.dateStart==null||Date.now()>=e.dateStart,i=e.dateEnd==null||Date.now()<=e.dateEnd,a=e.selector===null||e.selector!==``&&!!document.querySelector(e.selector),o=e.platform===`mobile`&&t===`mobile`,s=e.platform===`desktop`&&t===`desktop`,c=e.platform===null||e.platform===`all`||o||s,l=e.experimentType===`bernoulliTrial`?Nn(e.variants):Pn(e.variants);return l||E.error(`SiteTest`,`validateSiteExperiment`,`experiment presented invalid choices for key:`,e.key,e.variants),n&&r&&i&&a&&c&&l};var In=class{constructor(e){C(this,`siteExperiments`,[]),C(this,`_device`,void 0),this._device=z()?`mobile`:`desktop`,this.siteExperiments=e?.siteExperiments?.filter(t=>{let n=t.key,r=Fn(t,this._device),i=Mn(e,n,this._device);return r&&i})??[]}getSiteExperimentByKey(e){let t=this.siteExperiments.filter(t=>t.key.toLowerCase()===e.toLowerCase())[0],n=Xt(`at_site_features`),r=Zt(t?.variants[1]?t?.variants[1].value:t?.variants[0].value,n[e]);return t&&n[e]&&r&&(t.variants=[{displayName:`test`,value:n[e],weight:100,id:0}]),t}};let Ln=class extends In{constructor(e){super(e.siteAds),C(this,`_players`,void 0),this._players=e.siteAds.videoPlayers?.players}getVideoPlaylistByType(e){return this._players?.filter(t=>t.type===e)??[]}};Ln=w([S(),N(0,b(`AdThrive`))],Ln);let Rn=class extends On{constructor(e,t){super(),this._siteExperiments=e,this._pubabgroup=t,C(this,`_choices`,[]),C(this,`_result`,!1),C(this,`key`,hn.FooterCloseButton),this.experimentConfig=this._siteExperiments.getSiteExperimentByKey(this.key),this.enabled&&this.experimentConfig&&(this._choices=this.experimentConfig.variants,this._result=this.run(),this.setExperimentTargeting())}run(){let e=this._choices[0].weight/100;return new rn(e).get()}setExperimentTargeting(){if(!this.enabled||!this.experimentConfig){E.error(`RemoveFooterCloseButtonSiteExperiment`,`setExperimentTargeting`,`() => %o`,`Experiment targeting requires an experiment config`);return}let e=`${this.experimentConfig.key.toLowerCase()}-${this.experimentConfig.id}`,t=this._result?`on`:`off`;this._pubabgroup.set(e,t)}};w([R()],Rn.prototype,`run`,null),Rn=w([S(),N(0,b(Ln)),N(1,b(ln))],Rn);let zn=()=>{try{return window.innerWidth>=2500?{isError:!1,canDisplay:!1}:{isError:!1,canDisplay:!0}}catch(e){return{isError:!0,canDisplay:!1,message:e.message}}},Bn=class extends On{constructor(e,t){super(),this._siteExperiments=e,this._pubabgroup=t,C(this,`_choices`,[]),C(this,`_result`,!1),C(this,`key`,hn.Interstitial);let{isError:n,canDisplay:r,message:i}=zn();n&&E.error(`InterstitialSiteExperiment`,`constructor`,{message:i}),this.experimentConfig=this._siteExperiments.getSiteExperimentByKey(this.key),this.enabled&&this.experimentConfig&&r&&(this._choices=this.experimentConfig.variants,this._result=this.run(),this.setExperimentTargeting())}run(){let e=this._choices[0].weight/100;return new rn(e).get()}setExperimentTargeting(){if(!this.enabled||!this.experimentConfig){E.error(`InterstitialSiteExperiment`,`setExperimentTargeting`,`() => %o`,`Experiment targeting requires an experiment config`);return}let e=`${this.experimentConfig.key.toLowerCase()}-${this.experimentConfig.id}`,t=this._result?`on`:`off`;this._pubabgroup.set(e,t)}};w([R()],Bn.prototype,`run`,null),Bn=w([S(),N(0,b(Ln)),N(1,b(ln))],Bn);let B=(e,t)=>e==null||e!==e?t:e,Vn=(e,t)=>Math.random()*(t-e)+e,Hn=(e,t)=>Math.floor(Vn(Math.ceil(e),Math.floor(t))),Un=()=>{if(window.crypto){let e=new Uint8Array(1);return crypto.getRandomValues(e),e[0]/255}return Math.random()};var Wn=class e extends nn{constructor(e=[],t){super(),this._choices=e,this._default=t}static fromArray(t,n){return new e(t.map(([e,t])=>({choice:e,weight:t})),n)}addChoice(e,t){this._choices.push({choice:e,weight:t})}get(){let e=Vn(0,100),t=0;for(let{choice:n,weight:r}of this._choices)if(t+=r,t>=e)return n;return this._default}get totalWeight(){return this._choices.reduce((e,{weight:t})=>e+t,0)}},V=class extends tn{get _choices(){let e=this._coreExperimentConfig.getWeightedChoiceVariants(this.key,this.lookup);return!e||e.length,e}run(){if(this._choices)return new Wn(this._choices).get()}};let Gn=class extends V{init(){this._key=`InterstitialAlt`,this._lookup=`INTERS5`}run(){return super.run()}};w([R()],Gn.prototype,`run`,null),Gn=w([S()],Gn);let Kn=class{constructor(e,t,n,r){this._interstitialSiteExperiment=t,this._removeFooterCloseButtonSiteExperiment=n,this._kargoSpotlightExperiment=r,C(this,`adInViewTime`,void 0),C(this,`allowSmallerAdSizes`,void 0),C(this,`bgColor`,void 0),C(this,`footerSelector`,void 0),C(this,`interstitial`,void 0),C(this,`pmp`,void 0),C(this,`footerCloseButton`,void 0),C(this,`footerCloseButtonMobile`,void 0),C(this,`footerCloseButtonDesktop`,void 0),C(this,`infiniteScroll`,void 0),C(this,`infiniteScrollOptions`,void 0),C(this,`infiniteScrollRefresh`,void 0),C(this,`isAutoOptimized`,void 0),C(this,`footerCloseButtonMigrated`,!1),C(this,`targetAff`,void 0),C(this,`spa`,void 0),C(this,`stickyContentEnabled`,void 0),C(this,`stickyContentHeight`,void 0),C(this,`stickyRecipeHeight`,void 0),C(this,`stickyHeaderSelectors`,void 0),C(this,`stickyBlockedSelectors`,void 0),C(this,`dynamicStickySidebarEnabled`,void 0),C(this,`dynamicStickySidebarHeight`,void 0),C(this,`dynamicStickySidebarBlockedSelectors`,void 0),C(this,`dynamicStickySidebarHeaderSelectors`,void 0),C(this,`dynamicContentSlotLazyLoading`,void 0),C(this,`desktopInterstitial`,void 0),C(this,`mobileInterstitial`,void 0),C(this,`prioritizeShorterVideoAds`,void 0),C(this,`optimizeVideoPlayersForEarnings`,void 0),C(this,`longerVideoAdPod`,void 0),C(this,`secColor`,void 0),C(this,`contentTermsFooterEnabled`,void 0),C(this,`wakeLock`,void 0),C(this,`gatedPrint`,void 0),C(this,`usCMP`,void 0),C(this,`consentMode`,void 0),C(this,`contentAdXExpansionMobile`,void 0),C(this,`contentAdXExpansionDesktop`,void 0);let{adInViewTime:i,allowSmallerAdSizes:a,bgColor:o,footerCloseButton:s,footerCloseButtonMobile:c,footerCloseButtonDesktop:l,footerSelector:u,infiniteScroll:d,infiniteScrollOptions:f,infiniteScrollRefresh:p,isAutoOptimized:m,pmp:h,targetaff:g,stickyContainerConfig:_,sidebarConfig:v,siteAttributes:ee,dynamicContentSlotLazyLoading:te,desktopInterstitial:ne,mobileInterstitial:re,prioritizeShorterVideoAds:ie,optimizeVideoPlayersForEarnings:ae,longerVideoAdPod:oe,secColor:se,contentTermsFooterEnabled:ce,wakeLock:le,usCMP:ue,gatedPrint:de,contentAdXExpansionMobile:fe,contentAdXExpansionDesktop:pe}=e.siteAds.adOptions;this.allowSmallerAdSizes=B(a,!0),c!==void 0&&l!==void 0&&(this.footerCloseButtonMigrated=!0);let me=this._isGamInterstitialNetworkExperimentEnabled(e),he=this._interstitialSiteExperiment.enabled?this._interstitialSiteExperiment.result:me,ge=!cn.isRolloutEnabled(`disable-kargo-spotlight`),_e=this._kargoSpotlightExperiment.result;if(this.interstitial={gam:he,prebid:he&&ge&&_e},this._removeFooterCloseButtonSiteExperiment.enabled){let e=!this._removeFooterCloseButtonSiteExperiment.result;this.footerCloseButton=e,this.footerCloseButtonMobile=e,this.footerCloseButtonDesktop=e}else this.footerCloseButton=B(s,!0),this.footerCloseButtonMobile=B(c,!0),this.footerCloseButtonDesktop=B(l,!0);this.adInViewTime=i?i*1e3:void 0,this.bgColor=B(o,`#FFFFFF`),this.footerSelector=B(u,``),this.pmp=B(h,!0),this.infiniteScroll=B(d,!1),this.infiniteScrollOptions=B(f,{}),this.infiniteScrollRefresh=B(p,!0),this.isAutoOptimized=B(m,!1),this.targetAff=B(g,!1),this.spa=B(e.siteAds.adOptions.spa,!1),this.stickyContentEnabled=_?.content?.enabled,this.stickyContentHeight=_?.content?.minHeight,this.stickyRecipeHeight=z()?_?.recipeMobile?.minHeight:_?.recipeDesktop?.minHeight,this.stickyHeaderSelectors=_?.stickyHeaderSelectors,this.stickyBlockedSelectors=_?.blockedSelectors,this.dynamicStickySidebarEnabled=v?.dynamicStickySidebar?.enabled,this.dynamicStickySidebarHeight=v?.dynamicStickySidebar?.minHeight,this.dynamicStickySidebarBlockedSelectors=v?.dynamicStickySidebar?.blockedSelectors,this.dynamicStickySidebarHeaderSelectors=z()?ee?.mobileHeaderSelectors:ee?.desktopHeaderSelectors,this.dynamicContentSlotLazyLoading=B(te,!1),this.desktopInterstitial=B(ne,!1),this.mobileInterstitial=B(re,!1),this.prioritizeShorterVideoAds=B(ie,!0),this.optimizeVideoPlayersForEarnings=B(ae,!1),this.longerVideoAdPod=B(oe,!0),this.secColor=B(se,`#000000`),this.contentTermsFooterEnabled=B(ce,!0),this.wakeLock=le,this.gatedPrint=de,this.usCMP=B(ue,{enabled:!1,regions:[],defaultOptIn:!1}),this.consentMode={enabled:e.siteAds.adOptions.consentMode?.enabled??!1,customVendorList:mn(e.siteAds.adOptions.consentMode?.customVendorList||`,s1143,s480,s1222,s909,s911,s949,s940,s919,s1233,s1237,s1239,s2767,s94,s154,s1053,s1058,s1250,s1256,s1257,s921,s944,s1004,s941,s930,s929,s1524,s927,s1989,s2825,s966,s1020,s2472,s92,s1277,s114,s115,s119,s2518,s1254,s122,s234,s155,s1156,s2516,s1583,s198,s1293,s7,s129,s1498,s26,s995,s2520,s362,s1376,s721,s105,s219,s88,s202,s143,s2433,s454,s1513,s1392,s231,s80,s413,s148,s1072,s1219,s270,s1273,s1315,s306,s227,s1565,s2902,s2644,s1367,s1402,s920,s496,s937,s1600,s163,s2636,s720,s611,s167,s741,s1141,s2904,s107,s743,s269,s118,s177,s232,s910,s427,s117,s527,s366,s2504,s759,s1082,s567,s186,s724,s840,s722,s430,s580,s98,s450,s18,s1037,s1119,s194,c55503,s320,s255,s203,s1209,s579,s915,s740,s961,s1168,`)},this.contentAdXExpansionMobile=B(fe,!0),this.contentAdXExpansionDesktop=B(pe,!0)}_isGamInterstitialNetworkExperimentEnabled(e){let{isError:t,canDisplay:n,message:r}=zn(),i=z()&&B(e.siteAds.adOptions.mobileInterstitial,!1),a=!z()&&B(e.siteAds.adOptions.desktopInterstitial,!1);if(t&&E.error(`InterstitialExperiment`,`canDisplayInterstitial`,{message:r}),n&&(i||a)){let e=y.resolve(Gn);return!!(e&&e.result&&e.result!==`off`)}return!1}};Kn=w([S(),N(0,b(`AdThrive`)),N(1,b(Bn)),N(2,b(Rn)),N(3,b(En))],Kn);let qn=(e,t)=>{if(!t)return!1;let n=e.toISOString(),r=parseInt(n.slice(5,7),10),i=parseInt(n.slice(8,10),10);if(t.includes(`-`)){let e=t.split(`|`);for(let t of e){let[e,n]=t.split(`,`);if(!e||!n)continue;let[a,o]=e.trim().split(`-`).map(e=>parseInt(e.trim(),10)),[s,c]=n.trim().split(`-`).map(e=>parseInt(e.trim(),10));if(isNaN(a)||isNaN(o)||isNaN(s)||isNaN(c))continue;if(a===s){if(r===a&&i>=o&&i<=c)return!0}else if(r===a&&i>=o||r===s&&i<=c)return!0}return!1}else{let[e,n]=t.split(`,`);if(!e||!n)return!1;let r=parseInt(e.trim(),10),a=parseInt(n.trim(),10);return isNaN(r)||isNaN(a)?!1:i>=r&&i<=a}},Jn=()=>Date.now(),Yn=e=>e.toISOString(),Xn=()=>Yn(new Date),Zn=(e,t)=>{let n=new Date(e);return new Date(t)-n},Qn=class extends V{init(){this._key=`AdTypeDaysHoldout2`,this._lookup=`ATDH2`}run(){return super.run()}};w([R()],Qn.prototype,`run`,null),Qn=w([S()],Qn);let $n=class extends V{init(){this._key=`AdTypeDays`,this._lookup=`ATD2`,this._autorun=!1}run(){return super.run()}};w([R()],$n.prototype,`run`,null),$n=w([S()],$n);let er=class{constructor(e){this._adTypeDaysExperiment=e,C(this,`_adTypeLookup`,{af:[`animatedFooter`],ef:[`expandableFooter`],inrr:[`inRecipeRecommendationDesktop`,`inRecipeRecommendationMobile`],lf:[`largeFormatsDesktop`,`largeFormatsMobile`],ntvs:[`nativeDesktopSidebar`],ntvc:[`nativeDesktopContent`,`nativeMobileContent`],ntvr:[`nativeDesktopRecipe`,`nativeMobileRecipe`],ntvh:[`nativeDesktopHeader`,`nativeMobileHeader`],ntvbp:[`nativeDesktopBelowPost`,`nativeMobileBelowPost`],osv:[`outstreamDesktop`,`outstreamMobile`],st:[`sponsorTileDesktop`,`sponsorTileMobile`],eca:[`expandableCatalogAdsDesktop`,`expandableCatalogAdsMobile`],msr:[`miniscroller`],intr:[`interscroller`],slh:[`skylineHeader`]})}get overrideValues(){let e=this._adTypeDaysExperiment.result;if(!e)return null;let t=new Date(Xn());if(qn(t,e)){let e=y.resolve(Qn).result;return e?e===`control`?null:this._adTypeLookup[e]:null}return null}};er=w([D(`AdTypePerformanceMonitoring`),S(),N(0,b($n))],er);let tr=class{constructor(e,t){C(this,`animatedFooter`,void 0),C(this,`expandableFooter`,void 0),C(this,`inRecipeRecommendationDesktop`,void 0),C(this,`inRecipeRecommendationMobile`,void 0),C(this,`inRecipeRecommendationSelectors`,void 0),C(this,`interscroller`,void 0),C(this,`largeFormatsDesktop`,void 0),C(this,`largeFormatsMobile`,void 0),C(this,`miniscroller`,void 0),C(this,`nativeDesktopContent`,void 0),C(this,`nativeDesktopRecipe`,void 0),C(this,`nativeDesktopSidebar`,void 0),C(this,`nativeMobileContent`,void 0),C(this,`nativeMobileRecipe`,void 0),C(this,`nativeDesktopHeader`,void 0),C(this,`nativeDesktopBelowPost`,void 0),C(this,`nativeMobileHeader`,void 0),C(this,`nativeMobileBelowPost`,void 0),C(this,`outstreamDesktop`,void 0),C(this,`outstreamMobile`,void 0),C(this,`sponsorTileDesktop`,void 0),C(this,`sponsorTileMobile`,void 0),C(this,`expandableCatalogAdsDesktop`,void 0),C(this,`expandableCatalogAdsMobile`,void 0),C(this,`skylineHeader`,void 0);let n=e.siteAds.adTypes||{};this.animatedFooter=B(n.animatedFooter,!0),this.expandableFooter=B(n.expandableFooter,!0),this.inRecipeRecommendationDesktop=B(n.inRecipeRecommendationDesktop,!0),this.inRecipeRecommendationMobile=B(n.inRecipeRecommendationMobile,!0),this.inRecipeRecommendationSelectors=n.inRecipeRecommendationSelectors,this.interscroller=z()?B(n.interscroller,!0):!1,this.largeFormatsDesktop=B(n.largeFormatsDesktop,!0),this.largeFormatsMobile=B(n.largeFormatsMobile,!0),this.miniscroller=z()?B(n.miniscroller,!0):!1,this.nativeDesktopContent=B(n.nativeDesktopContent,!0),this.nativeDesktopRecipe=B(n.nativeDesktopRecipe,!0),this.nativeDesktopSidebar=B(n.nativeDesktopSidebar,!0),this.nativeDesktopHeader=B(n.nativeHeaderDesktop??n.nativeDesktopHeader,!0),this.nativeDesktopBelowPost=B(n.nativeDesktopBelowPost,!0),this.nativeMobileContent=B(n.nativeMobileContent,!0),this.nativeMobileRecipe=B(n.nativeMobileRecipe,!0),this.nativeMobileHeader=B(n.nativeHeaderMobile??n.nativeMobileHeader,!0),this.nativeMobileBelowPost=B(n.nativeMobileBelowPost,!0),this.outstreamDesktop=B(n.outstreamDesktop,!0),this.outstreamMobile=B(n.outstreamMobile,!0),this.sponsorTileDesktop=B(n.sponsorTileDesktop,!1),this.sponsorTileMobile=B(n.sponsorTileMobile,!1),this.expandableCatalogAdsDesktop=B(n.expandableCatalogAdsDesktop,!1),this.expandableCatalogAdsMobile=B(n.expandableCatalogAdsMobile,!1),this.skylineHeader=B(n.skylineHeader,!1),this.videoFootersDesktop=B(n.videoFootersDesktop,!1),this.videoFootersMobile=B(n.videoFootersMobile,!1),this._overrideAdType(t)}has(e){return this[e]&&this[e]===!0}get enabled(){return Object.keys(this).filter(e=>this[e]===!0)}get enabledMinified(){let e={outstreamDesktop:{min:`od`,val:this.outstreamDesktop},outstreamMobile:{min:`om`,val:this.outstreamMobile}};return this.enabled.filter(t=>Object.keys(e).includes(t)&&e[t].val).map(t=>e[t].min)}get outstreamEnabled(){return z()?this.outstreamMobile===!0:this.outstreamDesktop===!0}_overrideAdType(e){let t=e.overrideValues;t&&t.forEach(e=>{this[e]=!1})}};tr=w([S(),N(0,b(`AdThrive`)),N(1,b(er))],tr);let H={Below_Post_1:`Below_Post_1`,Below_Post:`Below_Post`,Content:`Content`,Content_1:`Content_1`,Content_2:`Content_2`,Content_3:`Content_3`,Content_4:`Content_4`,Content_5:`Content_5`,Content_6:`Content_6`,Content_7:`Content_7`,Content_8:`Content_8`,Content_9:`Content_9`,Recipe:`Recipe`,Recipe_1:`Recipe_1`,Recipe_2:`Recipe_2`,Recipe_3:`Recipe_3`,Recipe_4:`Recipe_4`,Recipe_5:`Recipe_5`,Native_Recipe:`Native_Recipe`,Footer_1:`Footer_1`,Footer:`Footer`,Header_1:`Header_1`,Header_2:`Header_2`,Header:`Header`,Sidebar_1:`Sidebar_1`,Sidebar_2:`Sidebar_2`,Sidebar_3:`Sidebar_3`,Sidebar_4:`Sidebar_4`,Sidebar_5:`Sidebar_5`,Sidebar_9:`Sidebar_9`,Sidebar:`Sidebar`,Interstitial_1:`Interstitial_1`,Interstitial:`Interstitial`,Video_StickyOutstream_1:`Video_StickyOutstream_1`,Video_StickyOutstream:`Video_StickyOutstream`,Video_StickyInstream:`Video_StickyInstream`,Sponsor_Tile:`Sponsor_Tile`},nr=class extends V{init(){this._key=`AmazonFailsafeTimeout`,this._lookup=`AMZFS`}};nr=w([S()],nr);let rr=class{constructor(e,t,n){C(this,`enabled`,void 0),C(this,`pubId`,`4fbba76f-7987-4fa2-9733-c27eb3a2170b`),C(this,`adUnitExclusions`,new Set([H.Interstitial])),C(this,`amznTargetingKeys`,[]),C(this,`advertiserId`,4526447244),C(this,`failsafeTimeout`,void 0),C(this,`availableBids`,new Map),C(this,`_amznDecryptedTargetingKeys`,[`amz_pb`,`amz_bidder`,`amz_pb_sp`,`amz_bidder_sp`]),C(this,`_amznEncryptedTargetingKeys`,[`amznbid`,`amzniid`,`amznp`,`amznsz`,`mediaType`,`amznbid_sp`,`amzniid_sp`,`amznp_sp`,`amznsz_sp`,`mediaType_sp`]),this.enabled=t.amazonEnabled&&e.siteAds.adOptions.amazonUAM===!0,this.amznTargetingKeys=[`amzndeal_sp`,...this._amznEncryptedTargetingKeys,...this._amznDecryptedTargetingKeys],this.failsafeTimeout=n.result||1e3}getEncryptedTargetingKeys(e={dealKeys:!1,nonDealKeys:!1}){return e.dealKeys?this._amznEncryptedTargetingKeys.filter(e=>e.includes(`_sp`)).concat(`amzndeal_sp`):e.nonDealKeys?this._amznEncryptedTargetingKeys.filter(e=>!e.includes(`_sp`)):this._amznEncryptedTargetingKeys}};rr=w([S(),N(0,b(`AdThrive`)),N(1,b(on)),N(2,b(nr))],rr);let ir={ABGR_UNSPECIFIED:0,ABGR_LEGACY:1,ABGR_ALL:2,ABGR_OTHERS_ONLY:3,ABGR_NONE:4,ABGR_IIQ_ONLY:5},ar=class extends V{init(){this._key=`AudienceTargeting`,this._lookup=`AUDT`}};ar=w([S()],ar);let or=class{constructor(e){this._audienceTargetingExperiment=e,C(this,`liveIntentEnabled`,void 0),C(this,`intentIqEnabled`,void 0),C(this,`id5Enabled`,void 0),C(this,`ayEnrichmentGroup`,void 0),C(this,`ayEnrichmentEnabled`,void 0),C(this,`ayEnrichWithLiveIntent`,void 0),C(this,`ayEnrichWithoutLiveIntent`,void 0);let t=this._audienceTargetingExperiment.result??`none`;this.liveIntentEnabled=this._getLiveIntentEnabled(t),this.intentIqEnabled=this._getIntentIqEnabled(t),this.id5Enabled=this._getId5Enabled(t),this.ayEnrichmentGroup=this._getAyEnrichmentGroup(this.liveIntentEnabled,this.intentIqEnabled),this.ayEnrichmentEnabled=this._getAyEnrichmentEnabled(t),this.ayEnrichWithLiveIntent=this._getAyEnrichWithLiveIntent(t),this.ayEnrichWithoutLiveIntent=this._getAyEnrichWithoutLiveIntent(t)}_getLiveIntentEnabled(e){return[`all`,`li_only`,`li_iiq`,`li_id5`].includes(e)}_getIntentIqEnabled(e){return[`all`,`iiq_only`,`li_iiq`,`iiq_id5`].includes(e)}_getId5Enabled(e){return[`all`,`id5_only`,`li_id5`,`iiq_id5`].includes(e)}_getAyEnrichmentGroup(e,t){return e&&t?ir.ABGR_ALL:e&&!t?ir.ABGR_OTHERS_ONLY:!e&&t?ir.ABGR_IIQ_ONLY:ir.ABGR_NONE}_getAyEnrichmentEnabled(e){return[`all`,`li_iiq`,`iiq_id5`,`iiq_only`].includes(e)}_getAyEnrichWithLiveIntent(e){return[`iiq_id5`,`id5_only`,`iiq_only`,`none`].includes(e)?null:[`all`,`li_iiq`].includes(e)}_getAyEnrichWithoutLiveIntent(e){return[`all`,`li_iiq`,`li_id5`,`li_only`].includes(e)?null:[`iiq_id5`,`iiq_only`].includes(e)}};or=w([S(),N(0,b(ar))],or);let sr=class{constructor(e,t){this.consentEventBus=t,C(this,`_required`,void 0),C(this,`_consent`,null),C(this,`_defaultOptIn`,void 0),C(this,`_strictMode`,null),C(this,`termsOfServiceUrl`,null),C(this,`privacyPolicyUrl`,null);let n=B(e.siteAds.adOptions.usCMP?.regions,[]),r=e.core.region&&n.includes(e.core.region);if(this._required=!!(r&&B(e.siteAds.adOptions.usCMP?.enabled,!1)),this._defaultOptIn=!!B(e.siteAds.adOptions.usCMP?.defaultOptIn,!1),this._strictMode=!!(r&&B(e.siteAds.adOptions.usCMP?.strictMode,!1)),this.termsOfServiceUrl=e.siteAds.adOptions.regulatory?.termsOfServiceUrl||null,this.privacyPolicyUrl=e.siteAds.adOptions.regulatory?.privacyPolicyUrl||null,this._required){let e=L.readExternalCookie(`usprivacy`);e===`1YNY`?this._consent=!0:e===`1YYY`&&(this._consent=!1),this.consentEventBus.usCmpConsentCaptured.on(e=>{this._consent=e},{handleEventsAlreadyEmitted:!0})}}get required(){return this._required}get consent(){return this._consent}get defaultOptIn(){return this._defaultOptIn}get strictMode(){return this._strictMode}};sr=w([S(),N(0,b(`AdThrive`)),N(1,b(un))],sr);let cr=[`CA`,`CT`,`UT`,`VA`,`WA`],lr=e=>{let t=document.getElementsByTagName(`meta`);return!!Array.from(t).filter(t=>t.name===e&&t.content===`true`).length},ur=()=>lr(`child-directed-treatment`),dr=e=>{let t=!1;return e&&(t=cr.includes(e)),lr(`health-directed-treatment`)&&t},fr=()=>lr(`sensitive-finance-treatment`),U=class{constructor(e,t,n){this._usCmp=t,this._consentEventBus=n,C(this,`nonCompliantBidders`,[`unruly`]),C(this,`ccpaNotApplicable`,`1---`),C(this,`ccpaOptIn`,`1YNY`),C(this,`ccpaOptOut`,`1YYY`),C(this,`comscoreParams`,void 0),C(this,`privacyString`,void 0),C(this,`required`,void 0),C(this,`userOptedOut`,void 0),C(this,`gpcEnabled`,void 0),C(this,`consentChange`,new T),C(this,`optOutText`,`Do not sell or share my personal information.`),C(this,`optInText`,`Customize my ad experience.`),C(this,`deviceAccess`,!1),C(this,`usCmpRequired`,this._usCmp.required);let r=e?.core?.region;this.required=e.gdpr!==`true`,this.privacyString=L.readExternalCookie(`usprivacy`),this.userOptedOut=this.privacyString===this.ccpaOptOut,this.gpcEnabled=L.readInternalLocalStorage(`adthrive_gpc`),this._usCmp.required&&(this._usCmp.defaultOptIn?this.userOptedOut=this.privacyString===this.ccpaOptOut:this.userOptedOut=!this._usCmp.consent,this._consentEventBus.usCmpConsentCaptured.on(e=>{this.userOptedOut=!e,this.consentChange.emit(e?this.ccpaOptIn:this.ccpaOptOut)},{handleEventsAlreadyEmitted:!0})),this.consentChange=new T,ur()||fr()&&this.required||dr(r)&&this.required?this.privacyString=this.ccpaOptOut:!this.privacyString&&this.required&&(this.privacyString=this.ccpaOptIn),this.consentChange.on(e=>{this.privacyString=e}),this.required&&(this.comscoreParams=this.userOptedOut?`0`:`1`)}get enabled(){return this.required&&this.userOptedOut}};U=w([S(),N(0,b(`AdThrive`)),N(1,b(sr)),N(2,b(un))],U);let pr=class{constructor(){C(this,`error`,void 0),C(this,`buildDate`,void 0),C(this,`branch`,void 0),C(this,`bucket`,void 0),C(this,`targetDensityLog`,void 0),C(this,`injectedSlots`,void 0),C(this,`injectedVideoSlots`,void 0),C(this,`experiments`,void 0),C(this,`experimentsWeightedChoice`,void 0),C(this,`siteExperimentsWeightedChoice`,void 0),C(this,`siteExperiments`,void 0),C(this,`injectedFromPlugin`,void 0),C(this,`injectedFromSiteAds`,void 0),C(this,`disabled`,void 0),C(this,`adUnits`,void 0),C(this,`preSlotInsertionMeasurements`,void 0)}init(e){this.error=e.error,this.injectedSlots=e.injectedSlots,this.injectedVideoSlots=e.injectedVideoSlots,this.experiments=e.experiments,this.experimentsWeightedChoice=e.experimentsWeightedChoice,this.siteExperiments=e.siteExperiments,this.siteExperimentsWeightedChoice=e.siteExperimentsWeightedChoice,this.targetDensityLog=e.targetDensityLog,this.buildDate=e.buildDate,this.branch=e.branch,this.bucket=e.bucket,this.injectedFromPlugin=e.injectedFromPlugin,this.injectedFromSiteAds=e.injectedFromSiteAds,this.disabled=e.disabled,this.adUnits=e.adUnits||[],this.preSlotInsertionMeasurements=e.preSlotInsertionMeasurements}get enabled(){return!this.error&&!this.disabled}overwriteInjectedSlots(e){this.injectedSlots=e}};pr=w([S()],pr);let mr=e=>{let t=Error(e);return t.source=`ulid`,t},hr=`0123456789ABCDEFGHJKMNPQRSTVWXYZ`,gr=2**48-1,_r=e=>{let t=Math.floor(e()*32);return t===32&&(t=31),hr.charAt(t)},vr=(e,t)=>{if(isNaN(e))throw Error(`${e} must be a number`);if(e>gr)throw mr(`cannot encode time greater than ${gr}`);let n,r=``;for(;t>0;t--)n=e%32,r=hr.charAt(n)+r,e=(e-n)/32;return r},yr=(e,t)=>{let n=``;for(;e>0;e--)n=_r(t)+n;return n},br=()=>vr(Date.now(),10)+yr(16,()=>Un()),xr=(e=window.document)=>!!e.browsingTopics&&!!e.featurePolicy&&e.featurePolicy.allowsFeature(`browsing-topics`),Sr=(e=window.document,t=window.navigator)=>!!t.joinAdInterestGroup&&!!e.featurePolicy&&e.featurePolicy.allowsFeature(`join-ad-interest-group`)&&e.featurePolicy.allowsFeature(`run-ad-auction`),Cr={"control_1.1":`disabled`,"control_1.2":`disabled`,"control_1.3":`disabled`,"control_1.4":`disabled`,label_only_1:`disabled`,label_only_2:`enabled`,label_only_3:`enabled`,label_only_4:`enabled`,label_only_5:`enabled`,control_2:`disabled`,"treatment_1.1":`enabled`,"treatment_1.2":`enabled`,"treatment_1.3":`enabled`,none:`experiment`},wr=e=>{let t=Object.keys(Cr).find(t=>e===t||e.startsWith(t));return Cr[t??`none`]},Tr=(e,t)=>{let n=window.innerWidth;return n>=t?`desktop`:n>=e?`tablet`:`phone`},Er=()=>{let e=0;try{let t=L.readInternalLocalStorage(`adthrive_fpv`);if(t&&(e=Date.now()-Date.parse(t)),!t||e>1440*60*1e3)return!0}catch{}return!1},Dr=e=>new URLSearchParams(window.location.search).get(e),Or=(e,t)=>{let n=e||navigator.userAgent,r=t||navigator.vendor;if(!Tt(n,r))return!1;let i=/ Version\/(1\d)\.(\d+)/.exec(n)?.slice(-2)||[],a=i[0]===`14`,o=i[0]===`15`&&+i[1]<4;return a||o},kr=()=>{Or()&&window.addEventListener(`beforeunload`,()=>{window.addEventListener(`visibilitychange`,e=>{e.stopImmediatePropagation()},!0)},!0)},Ar=()=>{kr()},jr=class{setupOnceEvent(e,t,n=window){let r=()=>{n.removeEventListener(e,r),t()};n.addEventListener(e,r)}setupOnceEventWithPromise(e,t=window){return new Promise(n=>{let r=i=>(t.removeEventListener(e,r),n(i));t.addEventListener(e,r)})}addEventListener(e,t,n=window){n.addEventListener(e,()=>{t.emit()},!1)}_handleScreenChange(){let e=this._getOrientation();this._currentDeviceOrientation!==e&&(this.deviceOrientationChange.emit(),this._currentDeviceOrientation=e)}_getOrientation(){try{return typeof window>`u`||typeof window.matchMedia!=`function`||window.matchMedia(`(orientation: portrait)`).matches?`portrait`:`landscape`}catch{return`portrait`}}constructor(){C(this,`beforeUnload`,new T),C(this,`pageHide`,new T),C(this,`resize`,new T),C(this,`scroll`,new T),C(this,`visibilityChange`,new T),C(this,`keydown`,new T),C(this,`deviceOrientationChange`,new T),C(this,`_currentDeviceOrientation`,void 0),this.addEventListener(`beforeunload`,this.beforeUnload),this.addEventListener(`pagehide`,this.pageHide),this.addEventListener(`resize`,this.resize),this.addEventListener(`scroll`,this.scroll),this._handleScreenChange=this._handleScreenChange.bind(this),window.addEventListener(`orientationchange`,this._handleScreenChange),window.addEventListener(`resize`,this._handleScreenChange),this._currentDeviceOrientation=this._getOrientation(),this.addEventListener(`visibilitychange`,this.visibilityChange,document),this.addEventListener(`keydown`,this.keydown,document),Ar()}};jr=w([D(`PageManager`),S()],jr);let Mr=e=>{let t=L.readExternalCookie(`_ga`),n=L.readExternalCookie(`_gid`);t||n||y.resolve(jr).beforeUnload.on(()=>{})},W=class{constructor(e,t){C(this,`host`,void 0),C(this,`privacySandboxHost`,void 0),C(this,`baseUrl`,void 0),C(this,`branch`,void 0),C(this,`bucket`,void 0),C(this,`debug`,void 0),C(this,`plugin`,void 0),C(this,`deployment`,void 0),C(this,`domain`,void 0),C(this,`invalidTraffic`,void 0),C(this,`device`,void 0),C(this,`pageUrl`,void 0),C(this,`fastAds`,void 0),C(this,`pageviewKey`,void 0),C(this,`sessionKey`,void 0),C(this,`querystring`,void 0),C(this,`styleUrl`,void 0),C(this,`adsMinLoadDuration`,void 0),C(this,`connectionTargeting`,[]),C(this,`downlink`,void 0),C(this,`effectiveType`,void 0),C(this,`integration`,void 0),C(this,`deliveryVersion`,void 0),C(this,`country`,void 0),C(this,`region`,void 0),C(this,`savedReferrer`,void 0),C(this,`isFirstPageview`,void 0),C(this,`ri`,void 0),C(this,`salesThrottle`,void 0),C(this,`rsi`,void 0),C(this,`browsingTopics`,void 0),C(this,`gpid`,void 0),C(this,`isWordPressLogin`,void 0),C(this,`utm`,{}),C(this,`preSlotInsertionMeasurements`,{});let{bucket:n,core:r,plugin:i,branch:a,debug:o,deployment:s,baseUrl:c,host:l,fastAds:u,siteAds:d,styleUrl:f,invalidTraffic:p,integration:m,deliveryVersion:h}=e,{tablet:g,desktop:_}=d.breakpoints;this.host=l.replace(`https://`,``),this.privacySandboxHost=this._getPrivacySandboxHost().replace(`https://`,``),this.baseUrl=c,this.branch=a,this.bucket=n,this.country=r&&r.country,this.region=r&&r.region,this.plugin=i,this.fastAds=u,this.invalidTraffic=p,this.deployment=s,this.domain=window.location.host,this.device=Tr(g,_),this.pageUrl=window.location.href,this.pageviewKey=t;let v=this.querystring=Vt();this.sessionKey=this.setSessionKey(),this.styleUrl=f,this.debug=o,this.integration=m,this.deliveryVersion=h,this.savedReferrer=L.readInternalLocalStorage(`adthrive_referrer`),this.isFirstPageview=Er(),this.isWordPressLogin=this._isWordPressLogin(),this.gpid=this._getGpFromStorage(`id5id`)||this._getGpFromStorage(`pbjs-id5id`);let ee=B(L.readInternalLocalStorage(`adthrive_utm`),{});[`utm_medium`,`utm_campaign`,`utm_session`,`utm_source`,`utm_content`,`utm_term`].forEach(e=>{let t=v.get(e),n=B(t,ee[e]);n&&(this.utm[e]=n)}),this.ri=v.has(`ri`)?v.get(`ri`):String(Math.floor(Math.random()*200)),this.salesThrottle=v.has(`st`)?v.get(`st`):String(Math.floor(Math.random()*200));let te=L.readInternalLocalStorage(`adthrive_rsi`);this.rsi=String(te||Math.floor(Math.random()*200)),te||L.setInternalLocalStorage(`adthrive_rsi`,+this.rsi);let ne=(window.performance?.getEntriesByType?.(`resource`)??[]).filter(e=>e.name.includes(`ads.min.js`)&&e.name.includes(`ads.adthrive.com`))[0];if(ne){let e=Math.round(ne.responseEnd-ne.startTime).toString();e!==`NaN`&&(this.adsMinLoadDuration=[e])}let re=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection);re&&(re.effectiveType&&(this.effectiveType=re.effectiveType,this.connectionTargeting.push(`niet:${this.effectiveType}`)),this.downlink=re.downlink||re.bandwidth,this.downlink&&this.connectionTargeting.push(`dl:${this.downlink}`));let ie=L.readInternalLocalStorage(`adthrive_browsing_topics`);this.browsingTopics=Array.isArray(ie)?ie:[]}setSessionKey(){let e=L.readInternalLocalStorage(`adthrive_session_key`);if(e)return e;{let e=br();return L.setExpirableInternalLocalStorage(`adthrive_session_key`,e,{expiry:{value:24,unit:`hours`},resetOnRead:!0}),L.deleteLocalStorage(`adthrive_fpv`),Mr(e),e}}get browsingTopicsSupported(){return xr()}get browsingTopicsTaxonomyVersion(){return this.browsingTopics?.[0]?.taxonomy_version}_getGpFromStorage(e){let t=L.readExternalLocalStorage(e);if(!(typeof t!=`string`||!t))try{return JSON.parse(decodeURIComponent(t)).gp}catch{return}}_isWordPressLogin(){return document.getElementById(`wpadminbar`)?!0:window.location.href?window.location.href.includes(`/wp-admin`):!1}_getPrivacySandboxHost(){return Dr(`at_privacy_sandbox_host`)??`privacysandbox.adthrive.com`}};W=w([S(),N(0,b(`AdThrive`)),N(1,b(`PageviewKey`))],W);let Nr=class{constructor(e,t,n,r){if(this._context=t,this._abgroup=n,this._cls=r,C(this,`_clsOptimizedAds`,void 0),C(this,`_defaultHeight`,250),C(this,`_map`,new Map([[`phone`,{Content:250,Recipe:250,Header:50,Footer:50,Below_Post:250,Sidebar:250}],[`tablet`,{Content:250,Recipe:250,Header:90,Footer:90,Below_Post:250,Sidebar:250}],[`desktop`,{Content:250,Recipe:250,Header:90,Footer:90,Below_Post:250,Sidebar:250}]])),this._clsOptimizedAds=e.siteAds.adOptions.clsOptimizedAds,this._cls.enabled){let e=`clsins_ss`,t=this._cls.experiments&&e in this._cls.experiments;t&&this._abgroup.set(e,String(t))}}get enabled(){return this._clsOptimizedAds||this._cls.enabled&&(this._cls.injectedFromPlugin||this._cls.injectedFromSiteAds)}getDivHeight(e,t){let n=this._map.get(t);return n&&n[e]||this._defaultHeight}setStyle(e,t){(t===H.Footer||this.enabled&&this._map.get(this._context.device)[t])&&(e.classList.add(`adthrive-ad-cls`),(t===H.Header||t===H.Footer)&&e.classList.add(`adthrive-${t.toLowerCase()}-${this._context.device}`))}};Nr=w([S(),N(0,b(`AdThrive`)),N(1,b(W)),N(2,b(Wt)),N(3,b(pr))],Nr);let Pr=class extends qe{constructor(...e){super(...e),C(this,`footerElementAdded`,new O),C(this,`comscoreInitialized`,new O),C(this,`footerHeightChanged`,new T),C(this,`footerResponseReceived`,new T),C(this,`footerRenderEnded`,new T),C(this,`footerVideoRibbonStateChanged`,new T)}};Pr=w([S()],Pr);let Fr=class{constructor(e,t){this._footerConfigEventBus=t,C(this,`tracker`,!0),C(this,`gdpr`,!1),C(this,`category`,void 0),C(this,`comscore`,void 0),C(this,`comscoreMessage`,void 0),C(this,`_footerMessages`,new Map([[`FamilyParenting`,`CafeMedia Family & Parenting`],[`Finance`,`CafeMedia Finance`],[`Food`,`CafeMedia Food`],[`General`,`CafeMedia`],[`HomeDIY`,`CafeMedia Home/DIY`],[`Lifestyle`,`CafeMedia Lifestyle`],[`Pets`,`CafeMedia Pets`],[`Tech`,`CafeMedia Tech`],[`Travel`,`CafeMedia Travel`]]));let{comscore:n,comscoreFooter:r}=e.siteAds.adOptions;this.category=B(n,`General`),this.comscore=B(r,!0),this.comscoreMessage=B(this._footerMessages.get(this.category),`CafeMedia`),this._footerConfigEventBus.comscoreInitialized.emit(this.comscore)}};Fr=w([S(),N(0,b(`AdThrive`)),N(1,b(Pr))],Fr);let Ir=class extends V{init(){this._key=`CreativeBlocking`,this._lookup=`CB`}};Ir=w([S()],Ir);let Lr=class{constructor(e,t){this._creativeBlockingExperiment=e,this._bootstrapEventBus=t,C(this,`_cridEventPromise`,void 0),C(this,`_creativeBlockEnabled`,!1),C(this,`_crids`,{om:new Set,pmp:new Set,adomains:new Set}),C(this,`_cridsLoaded`,!1),C(this,`_cridsOffEvent`,void 0);let n=this._creativeBlockingExperiment.result;this._creativeBlockEnabled=cn.isRolloutEnabled(`confiant-blocking-disabled`)||n===`rt`||n===`both`,this._cridEventPromise=new Promise(e=>{this._cridsOffEvent=this._bootstrapEventBus.cridBlockLibraryLoadComplete.on(()=>{this._cridsLoaded=!0,e(),this._cridsOffEvent?.()},{handleEventsAlreadyEmitted:!0})})}get cridEventPromise(){return this._cridEventPromise}get creativeBlockEnabled(){return this._creativeBlockEnabled}get cridsLoaded(){return this._cridsLoaded}set omCrids(e){this._crids.om=new Set(e)}get omCrids(){return this._crids.om}set pmpCrids(e){this._crids.pmp=new Set(e)}get pmpCrids(){return this._crids.pmp}set adomains(e){this._crids.adomains=new Set(e)}get adomains(){return this._crids.adomains}get blockedCridsCount(){return this._crids.om.size+this._crids.pmp.size}};Lr=w([S(),N(0,b(Ir)),N(1,b(st))],Lr);let Rr=class extends qe{constructor(...e){super(...e),C(this,`disableAds`,new O)}};Rr=w([S()],Rr);let zr=e=>{let t=window.location.href;return e.some(e=>new RegExp(e,`i`).test(t))},Br=class{constructor(e,t){this.adthrive=e,this._cls=t,C(this,`all`,!1),C(this,`content`,!1),C(this,`recipe`,!1),C(this,`video`,!1),C(this,`locations`,new Set),C(this,`reasons`,new Set),C(this,`_clsDivs`,[`adthrive-below-post`,`adthrive-content`,`adthrive-header`,`adthrive-recipe`,`adthrive-sidebar`]),C(this,`_disableAdsEventBus`,y.resolve(Rr)),C(this,`init`,()=>{(this.urlHasEmail(window.location.href)||this.urlHasEmail(window.document.referrer))&&(this.all=!0,this.reasons.add(`all_email`),this.removeClsDivs(this._clsDivs));try{document.body.classList.contains(`adthrive-disable-all`)&&(this.all=!0,this.reasons.add(`all_plugin`)),document.body.classList.contains(`adthrive-disable-content`)&&(this.content=!0,this.recipe=!0,this.locations.add(H.Content),this.locations.add(H.Recipe),this.reasons.add(`content_plugin`)),document.querySelector(`.tag-novideo`)!==null&&(this.video=!0,this.locations.add(`Video`),this.reasons.add(`video_tag`)),document.body.classList.contains(`adthrive-disable-video`)&&(this.video=!0,this.locations.add(`Video`),this.reasons.add(`video_plugin`))}catch(e){E.error(`DisableAds`,`constructor`,{message:e.message});let t=`classList`in document.createElement(`_`);E.error(`BodyDeviceClassComponent`,`init.support`,{support:t});let n=`classList`in document.body;E.error(`BodyDeviceClassComponent`,`init.supportBody`,{supportBody:n})}this.reasons.size>0&&this._emit(),this._log(`init`)}),C(this,`clear`,()=>{this.all=!1,this.content=!1,this.recipe=!1,this.video=!1,this.locations=new Set,this.reasons=new Set}),C(this,`_log`,e=>{}),this.init()}removeClsDivs(e){if(this._cls.enabled&&this._cls.injectedSlots&&this._cls.injectedSlots.length){let t=this._cls.injectedSlots.filter(t=>{let n=t.element,r=!1;return n.parentNode&&e.some(e=>n.classList.contains(e))&&(n.parentNode.removeChild(n),r=!0),!r});this._cls.overwriteInjectedSlots(t)}}disableAllAds(e){(!e||zr(e))&&(this.all=!0,this.reasons.add(`all_page`),this.removeClsDivs(this._clsDivs),this._emit()),this._log(`disableAllAds`)}disableContentAds(e){(!e||zr(e))&&(this.content=!0,this.recipe=!0,this.locations.add(H.Content),this.locations.add(H.Recipe),this.reasons.add(`content_page`),this.removeClsDivs([`adthrive-content`,`adthrive-recipe`])),this._log(`disableContentAds`)}disablePlaylistPlayers(e){(!e||zr(e))&&(this.video=!0,this.locations.add(`Video`),this.reasons.add(`video_page`),this.adthrive.siteAds.videoPlayers?this._removeCLSVideoPlayers():this._removeLegacyCLSVideoPlayers()),this._log(`disablePlaylistPlayers`)}_removeCLSVideoPlayers(){this.adthrive.siteAds.videoPlayers?.players.filter(e=>e.type===`stickyPlaylist`).map(e=>document.querySelectorAll(`#cls-video-container-${e.playlistId}`)).forEach(e=>{for(let t=0;t<e.length;t++){let n=e[t];n.parentNode?.removeChild(n)}})}_removeLegacyCLSVideoPlayers(){let e=this.adthrive.siteAds.video?.jwPlaylistId;if(e){let t=document.querySelectorAll(`#cls-video-container-${e}`);for(let e=0;e<t.length;e++){let n=t[e];n.parentNode?.removeChild(n)}}}urlHasEmail(e){return e?/([A-Z0-9._%+-]+(@|%(25)*40)[A-Z0-9.-]+\.[A-Z]{2,})/i.exec(e)!==null:!1}_emit(){this._disableAdsEventBus.disableAds.emit(this.reasons)}};Br=w([S(),N(0,b(`AdThrive`)),N(1,b(pr))],Br);var Vr=class extends tn{constructor(...e){super(...e),C(this,`_default`,void 0)}get _choices(){let e=this._coreExperimentConfig.getMultivalueBernoulliVariants(this.key,this.lookup);return!e||e.length,e}run(){let e=this._choices;if(e){let t=e.filter(e=>new rn(e.weight/100).get()).map(e=>e.choice);t.length&&(this._result=t)}return this._result||this._default}get choices(){return this._choices}};let Hr=class extends Vr{init(){this._setAbGroup=!1,this._key=`DisplayOpenBidderExperiment`,this._lookup=`DOBA`,this._default=[`none`]}};Hr=w([S()],Hr);let Ur=class{constructor(e){C(this,`bidders`,void 0),this.bidders=e.result||[`none`]}};Ur=w([S(),N(0,b(Hr))],Ur);let Wr=e=>{let{tablet:t,desktop:n}=e.siteAds.breakpoints,r=Tr(t,n),i=e.siteAds,a=i.video&&i.video.partners&&i.video.partners.stickyOutstream,o=i.videoPlayers&&i.videoPlayers.partners&&i.videoPlayers.partners.stickyOutstream,s=a||o,c=e.siteAds.adOptions,l=s||c&&c.stickyOutstream;return!!(l&&(r===`phone`?l.mobile.enabled:l.desktop.enabled))},Gr=class extends On{constructor(e,t){super(),this._siteExperiments=e,this._pubabgroup=t,C(this,`_choices`,[]),C(this,`_result`,!1),C(this,`key`,hn.StickyOutstream),this.experimentConfig=this._siteExperiments.getSiteExperimentByKey(this.key),this.enabled&&this.experimentConfig&&(this._choices=this.experimentConfig.variants,this._result=this.run(),this.setExperimentTargeting())}run(){let e=this._choices[0].weight/100;return new rn(e).get()}setExperimentTargeting(){if(!this.enabled||!this.experimentConfig){E.error(`StickyOutstreamSiteExperiment`,`setExperimentTargeting`,`() => %o`,`Experiment targeting requires an experiment config`);return}let e=`${this.experimentConfig.key.toLowerCase()}-${this.experimentConfig.id}`,t=this._result?`on`:`off`;this._pubabgroup.set(e,t)}};w([R()],Gr.prototype,`run`,null),Gr=w([S(),N(0,b(Ln)),N(1,b(ln))],Gr);let Kr=class{constructor(e,t,n){this._adOptions=t,this._stickyOutstreamSiteExperiment=n,C(this,`_device`,void 0),C(this,`_stickyOutstreamEnabled`,!1),C(this,`_adthriveOptions`,void 0),C(this,`_adthriveSiteAds`,void 0),C(this,`_supportedSizes`,[[728,90],[300,250],[300,600],[320,50],[970,250],[160,600],[300,1050],[336,280],[970,90],[300,50],[320,100],[468,60],[250,250],[120,240],[1,1],[300,300],[300,420],[728,250],[320,300],[300,390]]),C(this,`_interstitialSupportedSizes`,[[320,50],[300,250],[300,600],[336,280],[320,480],[1,1]]),C(this,`_adUnitAuctionPriorityMap`,new Map([[H.Footer,1],[H.Header,2],[H.Sidebar,3],[H.Content,4],[H.Recipe,5],[`Sidebar_sticky`,6],[`Below Post`,7]])),C(this,`_interstitialSettingTemplate`,void 0),C(this,`_stickyOutstreamSettingTemplate`,void 0),C(this,`_adUnitSettingTemplate`,{auctionPriority:8,autosize:!0,classNames:[],devices:[`tablet`,`phone`,`desktop`],elementSelector:`body`,every:1,lazy:!1,lazyMax:0,lazyMaxDefaulted:!1,location:``,max:1,pageSelector:``,position:`beforebegin`,sequence:1,sizes:[],skip:0,spacing:0,special:[],sticky:!1,stickyOverlapSelector:``,name:``}),C(this,`_adUnits`,void 0),C(this,`isStickyUnit`,(e,t)=>{let{location:n,sticky:r}=e;if(n===H.Recipe&&t){let{recipeMobile:e,recipeDesktop:n}=t;if(z()&&e?.enabled||!z()&&n?.enabled)return!0}return n===H.Footer||r});let{tablet:r,desktop:i}=e.siteAds.breakpoints;this._device=Tr(r,i),this._adthriveSiteAds=e.siteAds,this._adthriveOptions=this._adthriveSiteAds.adOptions,this._adUnits=e.siteAds.adUnits,this.setupStickyOutstreamSettings(e),this.setupInterstitialSettings()}setupStickyOutstreamSettings(e){let t=e.siteAds.video&&e.siteAds.video.partners&&e.siteAds.video.partners.stickyOutstream,n=this._adthriveSiteAds.videoPlayers&&this._adthriveSiteAds.videoPlayers.partners&&this._adthriveSiteAds.videoPlayers.partners.stickyOutstream,r=t||n,i=Wr(e);if(this._stickyOutstreamSiteExperiment.enabled?this._stickyOutstreamSiteExperiment.result:i){this._stickyOutstreamEnabled=!0;let e={...this._adUnitSettingTemplate};e.sticky=!0,e.location=H.Video_StickyOutstream,e.position=`beforeend`,e.pageSelector=B(r&&r.blockedPageSelectors,``),e.sizes=this._device===`phone`?[[300,50]]:[[300,250]],this._stickyOutstreamSettingTemplate=e}}setupInterstitialSettings(){let e={...this._adUnitSettingTemplate},t=this._adthriveOptions;e.location=H.Interstitial,e.sizes=this.interstitalSupportedSizes(),e.pageSelector=B(t.interstitialBlockedPageSelectors,``),this._interstitialSettingTemplate=e}get(){let e=cn.isRolloutEnabled(`enable-250px-max-ad-height`);this._adUnits.sort((e,t)=>{let n=e.location===H.Sidebar&&e.sticky?`${e.location}_sticky`:e.location,r=t.location===H.Sidebar&&t.sticky?`${t.location}_sticky`:t.location;return this._adUnitAuctionPriorityMap.get(n)-this._adUnitAuctionPriorityMap.get(r)});let t=this._adUnits.filter(e=>e.dynamic!==void 0&&e.dynamic.enabled).map(t=>{let n=t.location.replace(/\s+/g,`_`),r=n===`Sidebar`?0:2,i=B(t.dynamic.lazyMax,r),a=t.dynamic?.lazy===void 0?i>0:t.dynamic.lazy;return n===H.Content&&e&&wt()&&(t.adSizes=t.adSizes.filter(e=>e[1]<=250)),{auctionPriority:this._adUnitAuctionPriorityMap.get(n)||8,location:n,sequence:B(t.sequence,1),thirdPartyAdUnitName:t.thirdPartyAdUnitName||``,sizes:this.onlySupportedAdSizes(t.adSizes).filter(e=>this.includeCertainTallSizes(t,e)),devices:t.devices,pageSelector:B(t.dynamic.pageSelector,``).trim(),elementSelector:B(t.dynamic.elementSelector,``).trim(),position:B(t.dynamic.position,`beforebegin`),max:Math.floor(B(t.dynamic.max,0)),spacing:B(t.dynamic.spacing,0),skip:Math.floor(B(t.dynamic.skip,0)),every:Math.max(Math.floor(B(t.dynamic.every,1)),1),classNames:t.dynamic.classNames||[],sticky:this.isStickyUnit(t,this._adthriveSiteAds.adOptions.stickyContainerConfig),stickyOverlapSelector:B(t.stickyOverlapSelector,``).trim(),autosize:t.autosize,special:B(t.targeting,[]).filter(e=>e.key===`special`).reduce((e,t)=>e.concat(...t.value),[]),lazy:a,lazyMax:i,lazyMaxDefaulted:t.dynamic.lazyMax===0?!1:!t.dynamic.lazyMax,name:t.name}});return this._stickyOutstreamEnabled&&this._stickyOutstreamSettingTemplate&&t.push(this._stickyOutstreamSettingTemplate),this._adOptions.interstitial.gam&&this._interstitialSettingTemplate&&t.push(this._interstitialSettingTemplate),t}onlySupportedAdSizes(e){return this._supportedSizes.filter(([t,n])=>e.some(([e,r])=>t===e&&n===r))}interstitalSupportedSizes(){return this._interstitialSupportedSizes.filter(([e,t])=>!(this._device!==`phone`&&`${e},${t}`==`320,50`))}includeCertainTallSizes(e,[t,n]){let{location:r,sequence:i}=e;if(r===H.Footer)return!(this._device===`phone`&&t===320&&n===100);if(r===H.Header)return!0;if(r===H.Recipe)return!(z()&&this._device===`phone`&&(t===300&&n===390||t===320&&n===300));if(r===H.Sidebar){let t=e.adSizes.some(([,e])=>e<=300),r=!!i&&i<=5,a=n>300;return a&&!t||i===9?!0:r?a?e.sticky:!0:!a}else return!0}};Kr=w([x(),N(0,b(`AdThrive`)),N(1,b(Kn)),N(2,b(Gr))],Kr);let qr=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`FledgeGPT`,this._lookup=`FLDG`,this._autorun=!1}};qr=w([S()],qr);let Jr=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`PaapiExperiment`,this._lookup=`PAAPI`}};Jr=w([S()],Jr);let Yr=class{constructor(e,t,n){this._paapiExperiment=t,this._fledgeGptExperiment=n,C(this,`_supported`,void 0),C(this,`_enabled`,void 0),C(this,`_cookieDeprecationLabel`,void 0),this._cookieDeprecationLabel=e.cookieDeprecationLabel??null,this._supported=Sr(),this._enabled=this._isFledgeEnabled()}get supported(){return this._supported}get enabled(){return this._enabled}get cookieDeprecationLabel(){return this._cookieDeprecationLabel}_isFledgeEnabled(){if(!this._supported||!this._paapiExperiment.result)return!1;let e=(this._cookieDeprecationLabel??``).replace(`fake_`,``),t=wr(e);return t===`enabled`?!0:t===`disabled`?!1:this._fledgeGptExperiment.result}};Yr=w([S(),N(0,b(`AdThrive`)),N(1,b(Jr)),N(2,b(qr))],Yr);let Xr={cm:`cm`,fbrap:`fbrap`,rapml:`rapml`},Zr={lazy:`lazy`,raptive:`raptive`,refresh:`refresh`,session:`session`,crossDomain:`crossdomain`,highSequence:`highsequence`,lazyBidPool:`lazyBidPool`,fallback:`fallback`},Qr={lazy:`l`,raptive:`rapml`,refresh:`r`,session:`s`,crossdomain:`c`,highsequence:`hs`,lazyBidPool:`lbp`,fallback:`f`},$r=class extends V{init(){this._key=`Floors`,this._lookup=`FLRML1`}run(){return super.run()}};w([R()],$r.prototype,`run`,null),$r=w([S()],$r);let ei=class{constructor(e,t){this._floorsExperiment=e,this.abGroup=t,C(this,`_result`,{raptive:!1,legacy:!1,fbrap:!1,cm:!1,percentile:{lazy:0}}),this.run()}get result(){return this._result}_enableRaptiveFloors(){this._result.raptive=!0}_enableLegacyFloors(){this._result.legacy=!0}_getFloorsExperimentResults(){let e=this._floorsExperiment.result,t=e===Xr.cm,n=e===Xr.fbrap,r=e===Xr.rapml;return{cm:t,fbrap:n,rapML:r,enableLegacy:n||t}}_setExpResults({cm:e,fbrap:t}){let n=this._result;e&&(n.cm=e),t&&(n.fbrap=t)}run(){let e=this._getFloorsExperimentResults(),{enableLegacy:t,fbrap:n,rapML:r}=e;this._setExpResults(e),(r||n)&&this._enableRaptiveFloors(),t&&this._enableLegacyFloors()}};ei=w([D(`FloorsExperimentHandler`),S(),N(0,b($r)),N(1,b(Wt))],ei);let ti=class{constructor(e,t){this._enabledFloorsExperiments=e,this._bootstrapEventBus=t,C(this,`floorsDataReady`,new T),C(this,`floorsTypeExcludes`,new Set([Zr.raptive])),C(this,`amazonSlotCpm`,new Map),C(this,`_raptiveMLFloorsEventPromise`,void 0),C(this,`_raptiveMLFloorsLoaded`,!1),C(this,`_raptiveMLRefreshFloors`,void 0),C(this,`_activeFloorsTypes`,[]),C(this,`_floorsData`,void 0),C(this,`_cmFPVPriority`,[Zr.refresh,Zr.lazyBidPool,Zr.lazy,Zr.session]),C(this,`_cmNonFPVPriority`,[Zr.refresh,Zr.lazyBidPool,Zr.session,Zr.lazy]),C(this,`_customFieldsMap`,new Map([[`hvp`,e=>{let t=e.ortb2Imp.ext?.data?.hvp??0;return t?`${t}`:`*`}],[`knownUser`,()=>{let e=L.readInternalLocalStorage(`adt_ei`),t=L.readInternalLocalStorage(`adt_i`);return e||t?`1`:`*`}],[`*`,()=>`*`]])),C(this,`_customSchemaFields`,{}),C(this,`_floorsPriorityData`,new Map),C(this,`_fpv`,void 0),C(this,`_schemaFieldOrder`,new Map([[`adUnitCode`,1]])),C(this,`_standardSchemaFields`,new Set([`size`,`mediaType`,`gptSlot`,`domain`,`adUnitCode`])),C(this,`_modelTimestamp`,0),C(this,`_os`,void 0),C(this,`_browser`,void 0),C(this,`_country`,void 0),C(this,`_hourGroup`,void 0),C(this,`_defaultFloorData`,{currency:`USD`,schema:{fields:[`domain`,`adUnitCode`],delimiter:`|`},values:{},modelWeight:100,modelVersion:``}),C(this,`_floorsOffEvent`,void 0),this._fpv=L.readInternalLocalStorage(`adthrive_session_fpv`)===!0||L.readInternalLocalStorage(`adthrive_session_fpv`)===null,this._raptiveMLFloorsEventPromise=new Promise(e=>{this._floorsOffEvent=this._bootstrapEventBus.floorsLibraryLoadComplete.on(()=>{this._raptiveMLFloorsLoaded=!0,e(),this._floorsOffEvent?.()},{handleEventsAlreadyEmitted:!0})})}savePriorityFloorData(e,t,n){let r=this._floorsPriorityData.get(e);this._floorsPriorityData.set(e,{...r,[n]:t})}get raptiveMLFloorsEventPromise(){return this._raptiveMLFloorsEventPromise}get os(){return this._os}set os(e){this._os=e}get browser(){return this._browser}set browser(e){this._browser=e}get country(){return this._country}set country(e){this._country=e}get hourGroup(){return this._hourGroup}set hourGroup(e){this._hourGroup=e}get raptiveMLFloorsLoaded(){return this._raptiveMLFloorsLoaded}get floorsData(){return this._floorsData}set floorsData(e){this._floorsData=e}get floorsExperiment(){return this._enabledFloorsExperiments.result}get activeFloorsData(){return this._floorsPriorityData}get cmPriority(){return this._fpv?this._cmFPVPriority:this._cmNonFPVPriority}get activeFloorsTypes(){return this._activeFloorsTypes}addActiveFloorsType(e){return this._activeFloorsTypes.push(e)}get customSchemaFields(){return this._customSchemaFields}getSchemaFieldOrder(e){return this._schemaFieldOrder.get(e)}get raptiveMLRefreshFloors(){return this._raptiveMLRefreshFloors}set raptiveMLRefreshFloors(e){this._raptiveMLRefreshFloors=e}get modelTimestamp(){return this._modelTimestamp}set modelTimestamp(e){this._modelTimestamp=e}setAdditionalSchemaFields(e){for(let t of e)if(this._schemaFieldOrder.set(t,e.indexOf(t)||0),!this._standardSchemaFields.has(t)){let e=this._customFieldsMap.get(t)||this._customFieldsMap.get(`*`);this._customSchemaFields[t]=e}}get defaultFloorData(){return this._defaultFloorData}};ti=w([S(),N(0,b(ei)),N(1,b(st))],ti);let ni=class{constructor(){C(this,`elements`,[]),C(this,`footerSelectorsForHeightCheck`,[`div[data-gg-moat]`,`.kargo-ad-content`,`.adthrive-footer`,`.sprkflw_main.sprkflw_default`,`.ogy-footer-ad`,`.raptive-sales-footer`])}};ni=w([S()],ni);let ri=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`3pgaun`,this._lookup=`3pgaun`}isEnabled(){let e=window.adthrive.siteAds.siteId===`682cc8505853093e968e35b5`;return super.isEnabled()&&e}};ri=w([S()],ri);let ii=class{constructor(e,t,n){this._bootstrapEventBus=t,C(this,`gamEventPromise`,void 0),C(this,`account`,void 0),C(this,`prefix`,`AdThrive`),C(this,`targeting`,void 0),C(this,`networkCode`,``),C(this,`isThirdPartyGam`,!1),C(this,`thirdPartyAdUnitMapping`,new Map),C(this,`_adthriveNetworkCode`,`18190176`),C(this,`_gamMCMEnabled`,void 0),C(this,`_gamMCMChildNetworkCode`,void 0),C(this,`_loaded`,!1),C(this,`_gamOffEvent`,void 0);let r=e.siteAds,i=r.thirdPartySiteConfig,a=i.gam,o=a?.accountId,s=a?.childAccountId,c=this.isThirdPartyGam=n.result&&!!o,l=i?.adUnitMapping;this.networkCode=c?o:this._adthriveNetworkCode,c?(this._gamMCMEnabled=!!s,this._gamMCMChildNetworkCode=B(s,``),l&&Object.keys(l).forEach(e=>{this.thirdPartyAdUnitMapping.set(e.toLowerCase(),l[e])})):(this._gamMCMEnabled=B(r.adOptions.gamMCMEnabled,!1),this._gamMCMChildNetworkCode=B(r.adOptions.gamMCMChildNetworkCode,``)),this.account=this._gamMCMEnabled&&this._gamMCMChildNetworkCode!==``?`${this.networkCode},${this._gamMCMChildNetworkCode}`:this.networkCode;let u=new Set([`service`,`bidding`,`dynamicVersion`]);this.gamEventPromise=new Promise(e=>{this._gamOffEvent=this._bootstrapEventBus.gamLibraryLoadComplete.on(t=>{this._loaded=!0,e(t),this._gamOffEvent?.()},{handleEventsAlreadyEmitted:!0})}),this.targeting=e.siteAds.targeting.length&&e.siteAds.targeting.filter(({key:e})=>!u.has(e)).map(({key:e,value:t})=>(typeof t==`boolean`&&(t=String(t)),{key:e,value:t}))||[]}get loaded(){return this._loaded}};ii=w([S(),N(0,b(`AdThrive`)),N(1,b(st)),N(2,b(ri))],ii);let ai={AmazonTAM:`amazon`,AmazonUAM:`AmazonUAM`,Blis:`blis`,Cadent:`cadent`,Connatix:`connatix`,Criteo:`criteo`,IndexExchange:`ix`,Kargo:`kargo`,MediaGridVideo:`gridvid`,Nativo:`nativo`,Ogury:`ogury`,OpenX:`openx`,Ozone:`ozone`,Pubmatic:`pubmatic`,Rubicon:`rubicon`,Seedtag:`seedtag`,Sharethrough:`sharethrough`,StackAdapt:`stackadapt`,Triplelift:`triplelift`,Teads:`teads`,TTD:`ttd`,Undertone:`undertone`,Verizon:`verizon`,Verve:`verve`,YahooSSP:`yahoossp`},oi={AdaptMx:`amx`,AppNexus:`appnexus`,Chicory:`chicory`,Conversant:`conversant`,CriteoServer:`crit_ss`,Flipp:`flipp`,IndexExchangeServer:`ix_ss`,GumGum:`gumgum`,MediaGrid:`grid`,Medianet:`medianet`,NativoServer:`ntvo_ss`,Ogury:`ogury`,OpenXServer:`opnx_ss`,PubmaticServer:`pubm_ss`,Rise:`rise`,RubiconServer:`rubi_ss`,SharethroughServer:`share_ss`,ThirtyThreeAcross:`33across`,TripleliftServer:`tripl_ss`,UndertoneServer:`under_ss`,Unruly:`unruly`,YahooSSPServer:`yah_ss`,Yieldmo:`yieldmo`},si={AdaptMxAY:`amx_ay`,AppNexusAY:`appnexus_ay`,ConnatixAY:`connatix_ay`,ConversantAY:`convrsnt_ay`,CriteoAY:`crit_ay`,FlippAY:`flipp_ay`,GumGumAY:`gumgum_ay`,IndexExchangeAY:`ix_ay`,MediaGridAY:`grid_ay`,MedianetAY:`medianet_ay`,NativoAY:`ntvo_ay`,OguryAY:`ogury_ay`,OpenXAY:`opnx_ay`,PubmaticAY:`pubm_ay`,RiseAY:`rse_ay`,RubiconAY:`rubi_ay`,SharethroughAY:`share_ay`,ThirtyThreeAcrossAY:`33across_ay`,TripleliftAY:`tripl_ay`,UndertoneAY:`under_ay`,UnrulyAY:`unrly_ay`,YahooSSPAY:`yah_ay`,YieldmoAY:`yldmo_ay`},G={...ai,...oi,...si},K={stackadapt:`sa`,"33across":`ta`,adaptmx:`ax`,appnexus:`an`,chicory:`ch`,connatix:`cx`,conversant:`cv`,crit_ss:`cs`,criteo:`cr`,flipp:`fl`,grid:`mg`,gumgum:`gg`,ix_ss:`is`,ix:`ix`,medianet:`mn`,ntvo_ss:`ns`,ntvo:`nt`,ogury:`og`,openx:`ox`,opnx_ss:`os`,pubm_ss:`ps`,pubmatic:`pu`,resetdigital:`rd`,rise:`rs`,rubi_ss:`ms`,rubicon:`ma`,share_ss:`sr`,sharethrough:`sh`,tripl_ss:`ts`,triplelift:`tl`,under_ss:`us`,undertone:`ut`,unruly:`ur`,yah_ss:`ys`,yahoo:`ya`,yieldmo:`ym`},ci={[G.IndexExchange]:K.ix,[G.Medianet]:K.medianet,[G.Ogury]:K.ogury,[G.OpenX]:K.openx,[G.Pubmatic]:K.pubmatic,[G.Rubicon]:K.rubicon,[G.Sharethrough]:K.sharethrough,[G.Triplelift]:K.triplelift,[G.AdaptMx]:K.adaptmx,[G.AppNexus]:K.appnexus,[G.Connatix]:K.connatix,[G.Conversant]:K.conversant,[G.CriteoServer]:K.crit_ss,[G.Flipp]:K.flipp,[G.IndexExchangeServer]:K.ix_ss,[G.GumGum]:K.gumgum,[G.MediaGrid]:K.grid,[G.NativoServer]:K.ntvo_ss,[G.OpenXServer]:K.opnx_ss,[G.PubmaticServer]:K.pubm_ss,[G.Rise]:K.rise,[G.RubiconServer]:K.rubi_ss,[G.SharethroughServer]:K.share_ss,[G.StackAdapt]:K.stackadapt,[G.ThirtyThreeAcross]:K[`33across`],[G.TripleliftServer]:K.tripl_ss,[G.UndertoneServer]:K.under_ss,[G.Unruly]:K.unruly,[G.YahooSSPServer]:K.yah_ss,[G.Yieldmo]:K.yieldmo},li=new Map([[K.adaptmx,[G.AdaptMx]],[K.appnexus,[G.AppNexus]],[K.conversant,[G.Conversant]],[K.criteo,[G.Criteo,G.CriteoServer]],[K.flipp,[G.Flipp]],[K.grid,[G.MediaGrid]],[K.gumgum,[G.GumGum]],[K.ix,[G.IndexExchange,G.IndexExchangeServer]],[K.medianet,[G.Medianet]],[K.ntvo,[G.Nativo,G.NativoServer]],[K.openx,[G.OpenX,G.OpenXServer]],[K.pubmatic,[G.Pubmatic,G.PubmaticServer]],[K.rise,[G.Rise]],[K.rubicon,[G.Rubicon,G.RubiconServer]],[K.sharethrough,[G.Sharethrough,G.SharethroughServer]],[K.stackadapt,[G.StackAdapt]],[K.triplelift,[G.Triplelift,G.TripleliftServer]],[K.undertone,[G.Undertone,G.UndertoneServer]],[K.unruly,[G.Unruly]],[K.yahoo,[G.YahooSSP,G.YahooSSPServer]],[K.yieldmo,[G.Yieldmo]],[K[`33across`],[G.ThirtyThreeAcross]]]),ui=new Set([G.AppNexus,G.IndexExchangeServer,G.MediaGrid,G.OpenXServer,G.PubmaticServer,G.RubiconServer,G.TripleliftServer,G.UndertoneServer,G.YahooSSPServer]),di=new Set([G.Chicory]),fi=new Set([G.Connatix]),pi=class{constructor(e){C(this,`raptiveVendorId`,996),C(this,`nonCompliantBidders`,[G.ThirtyThreeAcross,G.Nativo]),C(this,`revokedPurposeConsent`,!1),C(this,`cmpUserActionCompleteFired`,!1),C(this,`consentCaptured`,!1),C(this,`consentCapturedData`,{}),C(this,`_isRequired`,void 0),this._isRequired=e.gdpr===`true`,It()&&this.nonCompliantBidders.push(G.Yieldmo)}get enabled(){return this._isRequired}};pi=w([S(),N(0,b(`AdThrive`))],pi);let mi=class{constructor(){C(this,`globalPrivacyControl`,void 0),C(this,`gpcEnabled`,void 0),C(this,`gpcUpdated`,!1),this.globalPrivacyControl=!!window.navigator.globalPrivacyControl,this.gpcEnabled=L.readInternalLocalStorage(`adthrive_gpc`)===`true`}setGpcString(){!this.gpcEnabled&&this.globalPrivacyControl?(L.setInternalLocalStorage(`adthrive_gpc`,`${this.globalPrivacyControl}`),this._updateGPC()):this.gpcEnabled&&!this.globalPrivacyControl&&(L.deleteLocalStorage(`adthrive_gpc`),this._updateGPC())}_updateGPC(){this.gpcEnabled=!!this.globalPrivacyControl,this.gpcUpdated=!0}};mi=w([S()],mi);let hi=class extends Vr{init(){this._key=`AllBidderHO`,this._lookup=`ALLBHO`,this.abgroup=`allbho`,this._default=[`none`]}get result(){return this._result??this._default}};hi=w([S()],hi);let gi=class extends Vr{init(){this._key=`HBHO2`,this._lookup=`HBHO2`,this._default=[`none`]}};gi=w([S()],gi);let _i=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`HBHORise`,this._lookup=`HBHORISE`}};_i=w([S()],_i);let vi=[`none`],yi=class{constructor(e,t,n){this.hbhoExperiment=e,this.allBidderHOExperiment=t,this.hbhoRiseExperiment=n,C(this,`bidders`,[]),C(this,`filteredBidders`,void 0),C(this,`_fullyDisabledBiddersMapping`,[]);let r=this.hbhoExperiment.result??[],i=this.allBidderHOExperiment.result;this.hbhoRiseExperiment.result&&r.push(G.Rise),this.bidders=[...r,...i].filter((e,t,n)=>e!==`none`&&n.indexOf(e)===t),this.bidders.length===0&&(this.bidders=vi),this.filteredBidders=this._getFilteredBidders(this.bidders)}_getFilteredBidders(e){return e.filter(e=>this._fullyDisabledBiddersMapping.includes(e))}};yi=w([S(),N(0,b(gi)),N(1,b(hi)),N(2,b(_i))],yi);let bi=class extends Vr{init(){this._key=`IDHO`,this._lookup=`IDHO`,this._default=[`none`]}setABGroup(e,t){let n=this._coreExperimentConfig.getCoreExperiment(this.key,this.lookup);if(n&&Array.isArray(e)){let r=e.map(e=>`${e}`);this.abgroupClass.set(t||n.abgroup,r)}}};bi=w([S()],bi);let xi=class{constructor(e){C(this,`subModule`,void 0),C(this,`percentages`,void 0),this.subModule=e.result,this.percentages=e._choices?.map(e=>{let t=e.choice,n=typeof e.weight==`number`?e.weight:0;return`${t}:${n}`})}};xi=w([S(),N(0,b(bi))],xi);let Si=class{constructor(){C(this,`refreshSlots`,new Set([`Footer`])),C(this,`ajaxType`,!1)}};Si=w([S()],Si);let Ci=class{constructor(){C(this,`googleLazyLoadSettings`,void 0),this.googleLazyLoadSettings={disabled:{fetchMarginPercent:-1,renderMarginPercent:-1,mobileScaling:-1},gam:{fetchMarginPercent:600,renderMarginPercent:100,mobileScaling:1.5},hbMarginPercent:700}}};Ci=w([S()],Ci);let wi=class{constructor(e){C(this,`enabled`,void 0),C(this,`_id`,`69e75073-3763-483e-a64c-0d281bfd9225`),C(this,`url`,`https://launchpad-wrapper.privacymanager.io/${this._id}/launchpad-liveramp.js`),this.enabled=B(e.siteAds.adOptions.liveRampATS,!0)}};wi=w([S(),N(0,b(`AdThrive`))],wi);let Ti=class{constructor(e){C(this,`country`,void 0),C(this,`region`,void 0),C(this,`gdpr`,void 0),this.country=e?.core?.country?.toUpperCase(),this.region=e?.core?.region?.toUpperCase(),this.gdpr=e?.gdpr}get targetingValue(){return this.isNewZealand()?`nz`:this.isUnitedStates()?`us`:this.isUnitedKingdom()?`uk`:this.isCanada()?`ca`:this.isGDPR()?`gdpr`:`o`}isNewZealand(){return this.country===`NZ`}isUnitedStates(){return this.country===`US`}isUnitedKingdom(){return this.country?[`UK`,`GB`,`IM`,`GG`,`JE`,`GI`,`FK`].includes(this.country):!1}isCanada(){return this.country===`CA`}isGDPR(){return this.country?this.gdpr===`true`:!1}};Ti=w([S(),N(0,b(`AdThrive`))],Ti);let Ei=[`AAOSL_21`,`AFAM_2020`,`AFOI_2020`,`APIO_2022`,`ASOI_2022`,`BIPOC_2024`,`CMINO_2022`,`EXPFTR_24`,`FMLO_2021`,`FMOOI_2022`,`GENZ_2023`,`HISP_2023`,`HISPO_2022`,`INTSCR_24`,`LGBTOI_2022`,`LGBTQ_2021`,`MINO_2021`,`MOMS_2020`,`MRLOI_22`,`NWPR_2021`,`PKDSU12_24`,`RMOI_24`,`STKCONT_24`,`TGNAF_21`],Di=[`AAOSL_21`,`AFAM_2020`,`AFOI_2020`,`APIO_2022`,`ASOI_2022`,`CMINO_2022`,`FMLO_2021`,`FMOOI_2022`,`GENZ_2023`,`HISP_2023`,`HISPO_2022`,`LGBTQ_2021`,`LGBTQOI_2021`,`MINO_2021`,`MOMS_2020`,`MRLOI_22`,`NWPR_2021`,`PKDSU12_2021`,`RMOI_24`,`TGNAF_21`],Oi=class extends qe{constructor(){super(),C(this,`marmaladeResponseLoaded`,new O),C(this,`recencyFrequencyDataSet`,new O),C(this,`resetMarmaladeData`,new T)}};Oi=w([S()],Oi);let ki=(e,t,n)=>n.indexOf(e)===t,Ai={AS:{location:`Sponsor_Tile`,selectors:[`h1.entry-title`,`h1.post-title`,`h1.posttitle`,`h1.story-title`,`h1.heading`,`.post > .post-title`,`h1.tdb-title-text`,`h1.post_title`],size:[[300,55],[234,60]],position:`afterend`,classNames:[`adthrive-sponsor-tile`],find:e=>document.querySelector(e),requireSelectorMatch:!0,lazy:!1},NR:{location:`Native_Recipe`,sequence:1,selectors:[`[itemscope][itemtype$="//schema.org/Recipe"] [itemprop="recipeIngredient"]:last-child`,`[itemscope][itemtype$="//schema.org/Recipe"] [itemprop="ingredients"]:last-child`,`[itemscope][itemtype$="//schema.org/Recipe"] .ingredient:last-child`,`.wprm-recipe-ingredient:last-child`,`#recipe .ingredients`,`.wprm-recipe-ingredients-container`,`.tasty-recipe-ingredients`,`[class*="recipe"] [class*="ingredient"] ul li:last-child`,`[class*="create-ingredient"] ul li:last-child`,`[class*="tasty-recipe"] [class*="ingredient"] p:last-child`,`[class*=recipe] [class*=recipe] ~ p + ul li:last-child`],size:[[225,65],[234,60],[300,100]],position:`afterend`,classNames:[`adthrive-native-recipe`],find:e=>{let t=document.querySelectorAll(e);return t.length>0?t[t.length-1]:null},requireSelectorMatch:!1,lazy:!0}},ji=(e,t)=>(t.inRecipeRecommendationSelectors?t.inRecipeRecommendationSelectors.split(`,`).map(e=>e.trim()):void 0)||e.selectors,Mi=class{constructor(e,t,n){this._eventBus=e,this._adTypes=t,this._bootstrapEventBus=n,C(this,`_marmaladeEventPromise`,void 0),C(this,`loaded`,!1),C(this,`campaigns`,[]),C(this,`filteredRoadblockSiteCodes`,[]),C(this,`filteredSiteCodes`,[]),C(this,`siteCodes`,[]),C(this,`adViewability`,[]),C(this,`dcsllSiteSpecific`,void 0),C(this,`speed`,navigator.connection&&navigator.connection.effectiveType===`4g`?`1`:`0`),C(this,`adUnits`,Ai),C(this,`selectorMatches`,[]),C(this,`ortbSegments`,new Map),C(this,`rfMcmpCodes`,[]),C(this,`rfIabCodes`,[]),C(this,`rfDataProcessed`,new T),C(this,`hvThreshold`,.6),C(this,`mcmp`,[]),C(this,`mcmpTargeting`,[]),C(this,`flpProdIds`,[]),C(this,`albertonsBrands`,[]),C(this,`_targetCampaignSites`,new Set([`divascancook.com`,`hungryhappens.net`,`whatsgabycooking.com`,`pinchofyum.com`,`isabeleats.com`])),C(this,`_bidderSiteCodeList`,Ei),C(this,`_appnexusRoadblockSiteCodeList`,Di),C(this,`_marmaladeOffEvent`,void 0),C(this,`_activeCampaign`,e=>{let t=Date.now();return t>=this._parseDate(e.start_date).getTime()&&t<=this._parseDate(e.expiration_date).getTime()}),this._marmaladeEventPromise=new Promise(e=>{this._marmaladeOffEvent=this._bootstrapEventBus.marmaladeLibraryLoadComplete.on(t=>{e(t),this._marmaladeOffEvent?.()},{handleEventsAlreadyEmitted:!0})}),this._setupMarmalade()}updateMarmalade(e){this._setMarmaladeData(e)}get marmaladeEventPromise(){return this._marmaladeEventPromise}async _setupMarmalade(){let e=await this.marmaladeEventPromise;y.register(`RecencyFrequencyMarmaladeResponse`,{useValue:e.result}),e&&Object.keys(e).length>0?this._setMarmaladeData(e.result):this._eventBus.marmaladeResponseLoaded.once(e=>{this._setMarmaladeData(e),this._eventBus.resetMarmaladeData.emit()})}getAllMcmps(){return[...this.mcmp.filter(e=>!e.startsWith(`SR_`)),...this.rfMcmpCodes.map(e=>e[0]),...this.rfIabCodes.map(e=>e[0])].filter(ki)}_setMarmaladeData(e){this.loaded=!0;let{host:t,page:n,adViewability:r,dcsllSiteSpecific:i,albertonsBrands:a}=e;t&&t.length&&(this.siteCodes=(t[0].site_codes||[]).filter(ki),this.filteredSiteCodes=this.siteCodes.filter(e=>this._bidderSiteCodeList.includes(e)),this.filteredRoadblockSiteCodes=this.siteCodes.filter(e=>this._appnexusRoadblockSiteCodeList.includes(e))),n&&n.length&&(this.campaigns=(n[0].campaigns||[]).filter(this._activeCampaign)),r&&r.length&&(this.adViewability=r),i&&(this.dcsllSiteSpecific=i),a&&a.length&&(this.albertonsBrands=a);let o=window.location.hostname?.replace(`www.`,``);this._targetCampaignSites.has(o)&&(this.adUnits.NR.lazy=!1),this._targetCampaignSites.has(o)&&document.body.classList.contains(`single-post`)&&!this.campaigns.some(e=>e.dfp_id===`NR_TNFLK23`)&&this.campaigns.push({casale_id:`NR_TNFLK23`,dfp_id:`NR_TNFLK23`,expiration_date:`2026-12-31`,ingredient_line:``,internal_id:`NR_TNFLK23`,lead_ingredient:``,start_date:`2023-08-15`});let s=this._getMcmpFlpIds();this.mcmp=s.mcmp||[],this.flpProdIds=s.flpProdIds||[],this.ortbSegments=this._getOrtbSegments(),this._eventBus.recencyFrequencyDataSet.on(this._handleRecencyFrequencyDataSet.bind(this),{handleEventsAlreadyEmitted:!0})}_getOrtbSegments(){return this.campaigns.reduce((e,t)=>{let[,n,,r]=new RegExp(/(^iab(a|c))_(\d*)/).exec(t.dfp_id)||[];if(r){let t=e.get(n)||[];t.push({id:r}),n&&t.length&&e.set(n,t)}return e},new Map)}_handleRecencyFrequencyDataSet(e){e.forEach(e=>{let t=e[0],n=e[1];if(t.substring(t.length-2)===`_A`)this.rfMcmpCodes.push([t,n]);else{let e=t.substring(t.indexOf(`_`)+1);this.ortbSegments.set(`iaba`,[{id:e}]),this.rfIabCodes.push([t,n])}}),this.rfDataProcessed.emit()}_isValidMarmaladeCampaign(e){let t=e.dfp_id.substring(0,2),n=this.adUnits[t];if(n){let e=n.find(ji(n,this._adTypes).join(`,`));return e&&this.selectorMatches.push({adUnit:n,match:e}),!n.requireSelectorMatch||!!e}else return!0}_getMcmpFlpIds(){return this.campaigns.filter(e=>this._isValidMarmaladeCampaign(e)).reduce((e,t)=>(e.mcmp.push(t.dfp_id),t.flp_prod_id&&e.flpProdIds.push(...JSON.parse(t.flp_prod_id)),e),{mcmp:[],flpProdIds:[]})}_parseDate(e){let t=e.split(`-`);return new Date(Number(t[0]),Number(t[1])-1,Number(t[2]))}};Mi=w([S(),N(0,b(Oi)),N(1,b(tr)),N(2,b(st))],Mi);let Ni=class extends Vr{init(){this._key=`OptableCountryAllowlist`,this._lookup=`OPTCA`,this._default=[]}};Ni=w([S()],Ni);let Pi=class extends Vr{init(){this._key=`OptableCountryRegionBlocklist`,this._lookup=`OPTCRB`,this._default=[]}};Pi=w([S()],Pi);let Fi=class{constructor(e,t,n){this._optableCountryAllowlistExperiment=t,this._optableCountryRegionBlocklistExperiment=n,C(this,`enabled`,void 0),C(this,`loblawEnabled`,void 0),C(this,`identifierOverride`,void 0);let r=e.core?.country??``,i=e.core?.region?.toUpperCase()??``,a=Vt().get(`optable_identifier`);this.enabled=this._getOptableEnabled(e,r,i),this.loblawEnabled=this.enabled&&r===`CA`,this.identifierOverride=a?decodeURIComponent(a):void 0}_getOptableEnabled(e,t,n){if(!t||!n||!this._optableCountryAllowlistExperiment.result?.includes(t)||this._optableCountryRegionBlocklistExperiment.result?.includes(`${t}-${n}`))return!1;let r=Vt().get(`rptbt24`);return!(e.invalidTraffic&&r!==`true`)}};Fi=w([S(),N(0,b(`AdThrive`)),N(1,b(Ni)),N(2,b(Pi))],Fi);let Ii={percent:`percent`,flat:`flat`,pmp:`pmp`,instream:`instream`,default:`default`,outstream:`outstream`,stickyOutstream:`stickyOutstream`,all:`all`,prebid:`prebid`,native:`native`},Li={percent:1,flat:0},Ri=new Map([[G.AdaptMx,{enabled:!0,nameFromAdmin:G.Rubicon}],[G.AmazonUAM,{enabled:!0,nameFromAdmin:`amazonUAM`}],[G.AppNexus,{enabled:!0,nameFromAdmin:`appNexus`}],[G.Chicory,{enabled:!0}],[G.Connatix,{enabled:!0}],[G.Conversant,{enabled:!0}],[G.Criteo,{enabled:!0}],[G.GumGum,{enabled:!0}],[G.IndexExchange,{enabled:!0,nameFromAdmin:`indexExchange`}],[G.Kargo,{enabled:!0}],[G.MediaGrid,{enabled:!0,nameFromAdmin:`mediaGrid`}],[G.MediaGridVideo,{enabled:!0,nameFromAdmin:`mediaGrid`}],[G.Medianet,{enabled:!0}],[G.Nativo,{enabled:!0}],[G.Ogury,{enabled:!1}],[G.OpenX,{enabled:!0}],[G.Ozone,{enabled:!1}],[G.Pubmatic,{enabled:!0,nameFromAdmin:`pubMatic`}],[G.Rise,{enabled:!1}],[G.Rubicon,{enabled:!0}],[G.Sharethrough,{enabled:!0}],[G.StackAdapt,{enabled:!1}],[G.Teads,{enabled:!0}],[G.ThirtyThreeAcross,{enabled:!0,nameFromAdmin:`thirtyThreeAcross`}],[G.Triplelift,{enabled:!0,nameFromAdmin:`tripleLift`}],[G.TTD,{enabled:!0,nameFromAdmin:`theTradeDesk`}],[G.Undertone,{enabled:!0}],[G.UndertoneServer,{enabled:!0}],[G.Unruly,{enabled:!0}],[G.YahooSSP,{enabled:!0}],[G.Yieldmo,{enabled:!0}],[G.Flipp,{enabled:!1}]]),zi=new Map([[G.AdaptMx,!0],[G.AmazonUAM,!0],[G.AppNexus,!1],[G.Chicory,!0],[G.Connatix,!0],[G.Conversant,!1],[G.Criteo,!0],[G.GumGum,!0],[G.IndexExchange,!1],[G.Kargo,!0],[G.MediaGrid,!0],[G.MediaGridVideo,!0],[G.Medianet,!0],[G.Nativo,!1],[G.OpenX,!1],[G.Ozone,!1],[G.Pubmatic,!0],[G.Rise,!1],[G.Rubicon,!0],[G.Sharethrough,!0],[G.StackAdapt,!0],[G.Teads,!0],[G.ThirtyThreeAcross,!0],[G.Triplelift,!0],[G.TTD,!0],[G.Undertone,!0],[G.Unruly,!0],[G.YahooSSP,!0],[G.Yieldmo,!0],[G.Flipp,!1]]),Bi=new Map([[G.AdaptMx,!0],[G.AmazonUAM,!0],[G.AppNexus,!0],[G.Connatix,!0],[G.Criteo,!0],[G.GumGum,!0],[G.IndexExchange,!0],[G.Kargo,!0],[G.Nativo,!1],[G.MediaGridVideo,!0],[G.Medianet,!0],[G.OpenX,!0],[G.Pubmatic,!0],[G.StackAdapt,!0],[G.Rise,!1],[G.Rubicon,!0],[G.Sharethrough,!0],[G.ThirtyThreeAcross,!0],[G.Triplelift,!0],[G.TTD,!0],[G.Unruly,!0],[G.UndertoneServer,!0],[G.YahooSSP,!0]]),Vi=class{constructor(e,t){this.adthrive=e,C(this,`display`,void 0),C(this,`video`,void 0),C(this,`configTypes`,[Ii.default,Ii.instream,Ii.native,Ii.outstream,Ii.pmp,Ii.stickyOutstream]),C(this,`_adOptions`,void 0),C(this,`_biddersCoreConfig`,new Map),C(this,`_videoPartners`,void 0),C(this,`_idGraphAdjustmentGlobalDiscount`,this.adthrive.core?.country===`US`?.008:0),C(this,`_gamRenderFee`,.0147),C(this,`_gamInstreamAdditionalRenderFee`,.16),C(this,`_confiantFlatFee`,.0031),C(this,`_liveIntentFeeByBidder`,{}),C(this,`_bidderPriceAdjustments`,{ix:new Map([[Ii.pmp,{flat:.05}]])}),C(this,`_siteBidderMap`,void 0),C(this,`_invalidBidAdjustments`,[]);let n=e.siteAds,r=n.thirdPartySiteConfig,i=r.partners,a=i?.discounts,o=r.gam?.accountId;t.result&&o&&(i?.prebid&&(this._siteBidderMap=i.prebid),a&&a.length?e.core.partners=a:(e.core.partners=[],E.error(`Partners`,`constructor`,`replacing core partners with an empty array`)));let s=n.videoPlayers?.partners,c=n.video?.partners;if(this._adOptions=n.adOptions,this._videoPartners=s||c||{},e.core?.partners?.length){let t=this._isCPMConfigLegacy(e.core.partners);e.core.liveIntent&&this._enableLiveIntentPriceAdjustments(e.core.liveIntent),e.core.partners.forEach(e=>{e.bidder_name&&this._createCPMMap(e,t)})}this._invalidBidAdjustments.length>0&&E.error(`Partners`,`constructor`,`Invalid bid adjustments detected`,this._invalidBidAdjustments),this.display=this._getDisplayBidders(),this.video=this._getVideoBidders()}get siteBidderMap(){return this._siteBidderMap}getBidderConfig(e,t=!0){let n={bidder_name:e,enabled:t,cpmMap:new Map};return B(this._biddersCoreConfig.get(e),n)}getDefaultDiscount(){return{discounts:{flat:Li.flat,percent:Li.percent},gam:{flat:this._gamRenderFee,percent:Li.percent},confiant:{flat:this._confiantFlatFee,percent:Li.percent}}}getDefaultInstreamDiscount(e){return{discounts:{flat:e.discounts.flat??Li.flat,percent:e.discounts.percent??Li.percent},gam:{flat:this._gamRenderFee+this._gamInstreamAdditionalRenderFee,percent:Li.percent}}}get bidderPriceAdjustments(){return this._bidderPriceAdjustments}_enableLiveIntentPriceAdjustments(e){let t=Ct(),n=t?80:60;this._liveIntentFeeByBidder=e.filter(e=>t?e.browser===`Chrome`:e.browser===`Not Chrome`).reduce((e,t)=>{let r=t.bidder,i=t.multiplier;i<0&&this._invalidBidAdjustments.push({source:`LiveIntent`,bidder:r,value:i/100}),i<n&&(i=n);let a=i/100;return a>1&&(this._invalidBidAdjustments.push({source:`LiveIntent`,bidder:r,value:a}),a=1),e[r]=a,e},{})}_siteSpecificBidderMap(e){return!this._siteBidderMap||e in this._siteBidderMap}_displayPartnerEnabled(e){let t=Ri.get(e)?.nameFromAdmin||e,n=t?B(this._adOptions[t],zi.get(e)):void 0,r=B(this._biddersCoreConfig.get(e)?.enabled,Ri.get(e)?.enabled),i=this._siteSpecificBidderMap(e);return e===G.AmazonUAM?n:i&&!!n&&!!r}_videoPartnerEnabled(e){let t=Ri.get(e)?.nameFromAdmin||e,n=B(this._videoPartners[t],Bi.get(e)),r=B(this._biddersCoreConfig.get(e)?.enabled,Ri.get(e)?.enabled);return this._siteSpecificBidderMap(e)&&!!n&&!!r}_createCPMMap(e,t){let n=B(e.enabled,!0),r=new Map;if(t){let t=e.cpm,n=this._prepareCPMConfigs(t);t.forEach(t=>{t.type===`percent`&&(t.value<0||t.value>1)&&this._invalidBidAdjustments.push({source:`BidderCoreConfig`,bidder:e.bidder_name,value:t.value})}),n.forEach(t=>{r.set(t.name,this._convertToCPMPriceAdjustments(t,e.bidder_name))})}else r=e.cpm;this._setFeeBreakdownByBidder(r,e.bidder_name,n)}_getRenderFees(e,t,n){return{gam:{flat:e,percent:Li.percent},idGraph:{flat:this._idGraphAdjustmentGlobalDiscount,percent:Li.percent},...t&&{confiant:{flat:t,percent:Li.percent}},...n&&{liveIntent:{flat:Li.flat,percent:n}}}}_setFeeBreakdownByBidder(e,t,n){let r=new Map;for(let[i,a]of e.entries()){let e=i===Ii.pmp,{flat:o=0,percent:s=1}=a,c=a.deals,l=this._gamRenderFee+(i===`instream`?this._gamInstreamAdditionalRenderFee:0),u=e?0:this._confiantFlatFee,d=this._liveIntentFeeByBidder[t]??0;r.set(i,{discounts:{flat:o,percent:s},...!e&&{...this._getRenderFees(l,u,d)},...c&&{deals:c}}),this._biddersCoreConfig.set(t,{bidder_name:t,enabled:n,cpmMap:r})}}_prepareCPMConfigs(e){let t=e.find(e=>e.name===Ii.default)??{name:Ii.default,type:Ii.percent,value:Li.percent},n=[];return this.configTypes.forEach(r=>{let i=e.find(e=>e.name===r);i?n.push(i):n.push({...t,name:r})}),n}_isCPMConfigLegacy(e){let t=e?.[0]?.cpm;return t&&Array.isArray(t)}_convertToCPMPriceAdjustments(e,t){return e.name===Ii.pmp?this._convertToCMPPriceAdjustmentPMP(e,t):this._convertToCMPPriceAdjustment(e,t)}_convertToCMPPriceAdjustmentPMP(e,t){let n=this._convertToCMPPriceAdjustment(e,t);return e.deals&&(n.deals={},e.deals.forEach(e=>{n.deals[e.name]=this._convertToCMPPriceAdjustment(e,t,!1)})),n}_convertToCMPPriceAdjustment(e,t,n=!0){let r={},i=e.name,a=this._getBidderPriceAdjustment(t,i,n),o=1,s=0;return e.type===Ii.percent?o*=e.value:e.type===Ii.flat&&(s+=e.value),r.percent=o*a.percent,r.flat=s+Number(a.flat),r}_getBidderPriceAdjustment(e,t,n=!0){if(!n)return{...Li};let r=this._bidderPriceAdjustments,i=r[e]&&r[e].get(r[e].has(t)?t:Ii.default)||{};return{...Li,...i}}_getDisplayBidders(){return new Map([[G.AdaptMx,this._displayPartnerEnabled(G.Rubicon)],[G.AppNexus,this._displayPartnerEnabled(G.AppNexus)],[G.Chicory,this._displayPartnerEnabled(G.Chicory)],[G.Connatix,this._displayPartnerEnabled(G.Connatix)],[G.Conversant,this._displayPartnerEnabled(G.Conversant)],[G.Criteo,this._displayPartnerEnabled(G.Criteo)],[G.IndexExchange,this._displayPartnerEnabled(G.IndexExchange)],[G.GumGum,this._displayPartnerEnabled(G.GumGum)],[G.Kargo,this._displayPartnerEnabled(G.Kargo)],[G.MediaGrid,this._displayPartnerEnabled(G.MediaGrid)],[G.Medianet,this._displayPartnerEnabled(G.Medianet)],[G.Nativo,this._displayPartnerEnabled(G.Nativo)],[G.Ogury,this._displayPartnerEnabled(G.Ogury)],[G.OpenX,this._displayPartnerEnabled(G.OpenX)],[G.Ozone,this._displayPartnerEnabled(G.Ozone)],[G.Pubmatic,this._displayPartnerEnabled(G.Pubmatic)],[G.Rise,this._displayPartnerEnabled(G.Rise)],[G.Rubicon,this._displayPartnerEnabled(G.Rubicon)],[G.Sharethrough,this._displayPartnerEnabled(G.Sharethrough)],[G.StackAdapt,this._displayPartnerEnabled(G.StackAdapt)],[G.Teads,this._displayPartnerEnabled(G.Teads)],[G.ThirtyThreeAcross,this._displayPartnerEnabled(G.ThirtyThreeAcross)],[G.Triplelift,this._displayPartnerEnabled(G.Triplelift)],[G.TTD,this._displayPartnerEnabled(G.TTD)],[G.Undertone,this._displayPartnerEnabled(G.Undertone)],[G.Unruly,this._displayPartnerEnabled(G.Unruly)],[G.YahooSSP,this._displayPartnerEnabled(G.YahooSSP)],[G.Yieldmo,this._displayPartnerEnabled(G.Yieldmo)],[G.AmazonUAM,this._displayPartnerEnabled(G.AmazonUAM)],[G.Flipp,this._displayPartnerEnabled(G.Flipp)]])}_getVideoBidders(){return new Map([[G.AdaptMx,this._videoPartnerEnabled(G.Rubicon)],[G.AmazonUAM,this._videoPartnerEnabled(G.AmazonUAM)],[G.AppNexus,this._videoPartnerEnabled(G.AppNexus)],[G.Connatix,this._videoPartnerEnabled(G.Connatix)],[G.Criteo,this._videoPartnerEnabled(G.Criteo)],[G.GumGum,this._videoPartnerEnabled(G.GumGum)],[G.IndexExchange,this._videoPartnerEnabled(G.IndexExchange)],[G.Kargo,this._videoPartnerEnabled(G.Kargo)],[G.MediaGrid,this._videoPartnerEnabled(G.MediaGridVideo)],[G.Medianet,this._videoPartnerEnabled(G.Medianet)],[G.Nativo,this._videoPartnerEnabled(G.Nativo)],[G.OpenX,this._videoPartnerEnabled(G.OpenX)],[G.Pubmatic,this._videoPartnerEnabled(G.Pubmatic)],[G.Rise,this._videoPartnerEnabled(G.Rise)],[G.Rubicon,this._videoPartnerEnabled(G.Rubicon)],[G.Sharethrough,this._videoPartnerEnabled(G.Sharethrough)],[G.StackAdapt,this._videoPartnerEnabled(G.StackAdapt)],[G.ThirtyThreeAcross,this._videoPartnerEnabled(G.ThirtyThreeAcross)],[G.Triplelift,this._videoPartnerEnabled(G.Triplelift)],[G.TTD,this._videoPartnerEnabled(G.TTD)],[G.Unruly,this._videoPartnerEnabled(G.Unruly)],[G.UndertoneServer,this._videoPartnerEnabled(G.Undertone)],[G.YahooSSP,this._videoPartnerEnabled(G.YahooSSP)],[G.Yieldmo,this._videoPartnerEnabled(G.Yieldmo)]])}};Vi=w([S(),N(0,b(`AdThrive`)),N(1,b(ri))],Vi);let Hi=class{_isHighRevGeo(e){let t=e.country??`US`;return[`US`,`CA`,`AU`,`DE`,`NZ`,`GB`,`UK`].includes(t)}constructor(e){C(this,`_enabled`,!0);let t=this._isHighRevGeo(e),n=cn.isRolloutEnabled(`only-pb-s2s-non-high-rev-geo-mob-chromium`);this._enabled=t?!0:!(n&&wt()&&z())}get enabled(){return this._enabled}};Hi=w([D(`PrebidClientSide`),S(),N(0,b(W))],Hi);let Ui=class extends V{init(){this._key=`IndexExchangeDoubleRequest`,this._lookup=`IXDR`}run(){return super.run()}};w([R()],Ui.prototype,`run`,null),Ui=w([S()],Ui);let Wi=class extends V{init(){this._key=`YahooSSP`,this._lookup=`YAHOODR`}run(){return super.run()}};w([R()],Wi.prototype,`run`,null),Wi=w([S()],Wi);let Gi=[`ozone`,`under_ss`,`33across`,`nativo`,`triplelift`,`grid`,`undertone`,`opnx_ss`,`yieldmo`,`unruly`,`yah_ss`,`pubm_ss`,`tripl_ss`,`rubi_ss`],Ki=`auction-1`,qi=`auction-2`,Ji=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`CurrencyConversion`,this._lookup=`FOREX`}};Ji=w([S()],Ji);let Yi=3e4,Xi=class extends $t{constructor(e){super(),C(this,`_result`,void 0),C(this,`key`,`SensOff`),C(this,`lookup`,`SENSOFF`),C(this,`abgroup`,`SensOffExperiment`),C(this,`_sensCategories`,void 0),C(this,`_choices`,[]),this._sensCategories=B(e.siteAds.adOptions.sensitiveCategories,[]),this._choices=this._sensCategories.map(e=>({choice:[e]})),this._result=this.run()}get result(){return this._result}run(){return this._sensCategories.filter(()=>new rn(.01).get())}};Xi=w([S(),N(0,b(`AdThrive`))],Xi);let Zi=class{constructor(e,t){this._sensOffExperiment=t,C(this,`id`,void 0),C(this,`name`,void 0),C(this,`verticals`,void 0),C(this,`filteredSensitiveCategories`,void 0),C(this,`sensitiveCategories`,void 0),C(this,`sensCategoriesOff`,void 0),C(this,`breakpoints`,void 0),C(this,`style`,void 0),C(this,`spa`,void 0),C(this,`enableCategoriesNetworkWide`,[`drg`,`conl`]),C(this,`disableCategoriesNetworkWide`,[`dlu`]),C(this,`deployedCloudflareVersion`,void 0),C(this,`category`,void 0),C(this,`_verticalCategoryMap`,new Map([[`Baby`,`family`],[`Family and Parenting`,`family`],[`Natural Parenting`,`family`],[`Pregnancy`,`family`],[`Toddler`,`family`],[`Personal Finance`,`finance`],[`Professional Finance`,`finance`],[`Deals`,`finance`],[`Clean Eating`,`food`],[`Food`,`food`],[`Crafts`,`home`],[`Gardening`,`home`],[`Green Living`,`home`],[`Home Decor and Design`,`home`],[`Pets`,`home`],[`Travel`,`travel`],[`News`,`news`],[`Lifestyle`,`lifestyle`],[`Beauty`,`lifestyle`],[`Other`,`lifestyle`],[`Health and Fitness`,`health`],[`Entertainment`,`entertainment`],[`Sports`,`sports`],[`Womens Style`,`womensstyle`],[`Mens Style and Grooming`,`mensstyle`],[`Tech`,`tech`],[`Wedding`,`wedding`],[`Auto`,`auto`]])),C(this,`_categoryPriorityList`,new Set([`food`,`home`,`family`,`finance`,`travel`,`news`,`health`,`entertainment`,`sports`,`womensstyle`,`mensstyle`,`tech`,`wedding`,`auto`,`lifestyle`])),this.id=e.siteAds.siteId,this.name=e.siteAds.siteName,this.verticals=e.siteAds.adOptions.verticals,this.sensitiveCategories=B(e.siteAds.adOptions.sensitiveCategories,[]).filter(e=>!this.enableCategoriesNetworkWide.includes(e)&&!this.disableCategoriesNetworkWide.includes(e)),this.sensCategoriesOff=this._sensOffExperiment.result,this.filteredSensitiveCategories=this.sensitiveCategories.filter(e=>this.sensCategoriesOff.indexOf(e)===-1),this.breakpoints=e.siteAds.breakpoints,this.style=e.style,this.spa=B(e.siteAds.adOptions.spa,!1),this.deployedCloudflareVersion=e.siteAds.cloudflare?.version??null,this.category=this._getCategory()??`food`}_getCategory(){let e=this.verticals.filter(e=>this._verticalCategoryMap.has(e)).map(e=>this._verticalCategoryMap.get(e));for(let t of this._categoryPriorityList)if(e.includes(t))return t}};Zi=w([S(),N(0,b(`AdThrive`)),N(1,b(Xi))],Zi);let Qi=e=>{let t={index:-1,weight:-1};if(!e||e.length===0)return t;let n=e.reduce((e,t)=>e+t,0);if(n===0)return t;let r=Math.random()*n,i=0,a=e[i];for(;r>a;)a+=e[++i];return{index:i,weight:e[i]}},$i=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`TrafficShaping`,this._lookup=`TS`}};$i=w([S()],$i);let ea=class{constructor(e,t){this.trafficShapingExperiment=e,this._bootstrapEventBus=t,C(this,`_shapingData`,void 0),C(this,`_modelGroup`,void 0),C(this,`_modelVersion`,void 0),C(this,`experimentActive`,!1),C(this,`active`,!1),C(this,`_trafficShapingEventPromise`,void 0),C(this,`_loaded`,!1),C(this,`_trafficShapingOffEvent`,void 0),this.experimentActive=this.trafficShapingExperiment.result,this._trafficShapingEventPromise=new Promise(e=>{this._trafficShapingOffEvent=this._bootstrapEventBus.trafficShapingLibraryLoadComplete.on(()=>{this._loaded=!0,e(),this._trafficShapingOffEvent?.()},{handleEventsAlreadyEmitted:!0})})}get trafficShapingEventPromise(){return this._trafficShapingEventPromise}setupData(e){this._shapingData=e,this._setModelGroup(e),this.modelVersion=this._modelGroup?.modelVersion,this.active=this._checkData()}_checkData(){return!(!this.experimentActive||!this._shapingData||!this._modelGroup||!this.modelVersion)}_setModelGroup(e){let t=e.shaping?.modelGroups.map(e=>e.modelWeight);if(t){let{index:n}=Qi(t);this._modelGroup=e.shaping.modelGroups[n]}}get loaded(){return this._loaded}get modelVersion(){return this._modelVersion}set modelVersion(e){this._modelVersion=e}applyHoldoutLabel(e,t){if(!this.active)return;let{pbsHost:n,bidder:r}=t,i=`location`in e?e.location:e.name,a=`refreshCount`in e?e.refreshCount:e.prerollNum,o=`holdout`,s=t.labelAll||[],c=this.getRule(i,a)?.pb||[],l=!n&&c.includes(r)||n&&c.includes(`${r}_ay`),u=s.indexOf(o),d=u!==-1;l&&!d?s.push(o):!l&&d&&s.splice(u,1),s.length?t.labelAll=s:t.labelAll&&!t.labelAll.length&&delete t.labelAll}applyMultistageLabel(e,t){let n=`location`in e?e.location:e.name,r=`refreshCount`in e?e.refreshCount:e.prerollNum,i=this.getRule(n,r)?.dbl?.includes(t.bidder),a=t.labelAll?[...t.labelAll]:[];`lastAuctionLabelAll`in t||(t.lastAuctionLabelAll=[...a]),i?t.labelAll=a.filter(e=>e!==Ki&&e!==qi):t.lastAuctionLabelAll&&(t.labelAll=[...t.lastAuctionLabelAll].filter(ki))}getRule(e,t){if(!this._modelGroup?.values.length)return;let n=this._modelGroup.values[0],r=e.includes(H.Video_StickyOutstream)?`O`:e[0],i=`${t}`,a=r===`O`||r===`V`;return n[r]?.[i]??n[r]?.[`*`]??(a?void 0:n[`*`]?.[i]??n[`*`]?.[`*`])}getServerShutoff(){let e=[];return this._modelGroup?.da&&e.push(`ay`),this._modelGroup?.dr&&e.push(`west`),e}};ea=w([S(),N(0,b($i)),N(1,b(st))],ea);let ta=class extends Vr{init(){this._key=`AppBiddersList`,this._lookup=`APPRQB`,this._default=[]}get choices(){return this._choices}};ta=w([S()],ta);let na=class extends V{init(){this._key=`AuctionDelay_2`,this._lookup=`ADT3`}get result(){return this._result}};na=w([S()],na);let ra=class extends V{init(){this._key=`AYRPBSStages`,this._lookup=`ARS`}};ra=w([S()],ra);let ia=`You need to set "this._label" in the init method for this experiment. The code should look something like this:

  protected init() {
    this._label = 'my_label';
  }`;var aa=class{constructor(e,t){this._coreExperimentConfig=e,this._abgroupClass=t,C(this,`_label`,void 0),C(this,`shouldUseCoreExperimentsConfig`,!0),C(this,`_autorun`,!0),C(this,`_experiments`,void 0),C(this,`_results`,{}),C(this,`_resultsByLookupKey`,{}),this._coreExperimentConfig=y.resolve(Yt),this._abgroupClass=y.resolve(Wt),this.init(),this.isEnabled()&&this._autorun&&this._run()}get label(){if(!this._label)throw Error(ia);return this._label}get experiments(){return this._experiments}get results(){return this._autorun===!1&&!Object.keys(this._results).length&&this._run(),this._results}get resultsByLookupKey(){return this._autorun===!1&&!Object.keys(this._results).length&&this._run(),this._resultsByLookupKey}init(){throw Error(ia)}_run(){this._experiments?.forEach(e=>{let{abgroup:t,key:n,lookupKey:r}=e,i=this._createExperiment(e);if(Object.defineProperty(i,`name`,{value:`${n}${n.includes(`Experiment`)?``:`Experiment`}`}),!i)return;let a=new i(this._abgroupClass,this._coreExperimentConfig);this._results[t]=a.result,r&&(this._resultsByLookupKey[r]=a.result)})}isEnabled(){if(this.shouldUseCoreExperimentsConfig){let e=this._experiments=this._coreExperimentConfig.getAllMatchingCoreExperiments(this.label);return!!(e&&e.length)}return!0}_createExperiment(e){let{key:t,type:n,lookupKey:r}=e;switch(n){case`bernoulliTrial`:return this._runBernoulliExperiment(t,r);case`weightedChoice`:return this._runWeightedChoiceExperiment(t,r);case`multivalueBernoulliTrial`:return this._runMultivalueBernoulliExperiment(t,r);default:return}}_runBernoulliExperiment(e,t){return class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=e,this._lookup=t}}}_runWeightedChoiceExperiment(e,t){return class extends V{init(){this._key=e,this._lookup=t}}}_runMultivalueBernoulliExperiment(e,t){return class extends Vr{init(){this._key=e,this._default=[`none`],this._lookup=t}}}};let oa=class extends aa{init(){this._label=`BDPL`}};oa=w([D(`BidderPlacementsBatchExperiments`),S()],oa);var sa=class extends tn{constructor(...e){super(...e),C(this,`_default`,void 0)}get _choices(){let e=this._coreExperimentConfig.getMultivalueWeightedChoiceVariants(this.key,this.lookup);return!e||e.length,e}run(){let e=this._choices;if(e){let t=e.map(e=>{let t=new Wn(e.options).get();return{choice:`${e.choice}`,option:t,...e.abvalue&&{keyValue:e.abvalue},...e.keyABValue&&{abvalue:e.keyABValue}}});t.length&&(this._result=t)}return this._result||this._default}get choices(){return this._choices}};let ca=class extends sa{init(){this._key=`DifferentFloorDifferentBidder`,this._lookup=`DFDB`,this._abGroupType=`multi`}};ca=w([S()],ca);let la=class extends sa{init(){this._key=`DifferentFloorDifferentServerBidder`,this._lookup=`DFDSB`,this._abGroupType=`multi`}};la=w([D(`DifferentFloorDifferentServerBidderExperiment `),S()],la);let ua=class extends V{init(){this._key=`OptimizedDifferentFloorsDifferentBidders`,this._lookup=`ODFDB`}};ua=w([S()],ua);let da=class extends V{init(){this._key=`OptimizedDifferentFloorsDifferentServerBidders`,this._lookup=`ODFDSB`}};da=w([S()],da);let fa=class{constructor(e,t,n,r){C(this,`_clientInflators`,new Map),C(this,`_serverInflators`,new Map);let i=n.result,a=r.result;i===`off`||i===void 0?(e.result||[]).forEach(e=>{this._clientInflators.set(e.choice,e.option)}):i!==`control`&&(this._clientInflators=new Map(Object.entries(i||{}))),a===`off`||a===void 0?(t.result||[]).forEach(e=>{this._serverInflators.set(e.choice,e.option)}):a!==`control`&&(this._serverInflators=new Map(Object.entries(a||{})))}get clientInflators(){return this._clientInflators}get serverInflators(){return this._serverInflators}};fa=w([D(`DifferentFloorsDifferentBiddersHandler`),S(),N(0,b(ca)),N(1,b(la)),N(2,b(ua)),N(3,b(da))],fa);let pa=class extends V{init(){this._key=`DistributeServerBiddersByBestServer`,this._lookup=`DSBBBS`}};pa=w([S()],pa);let ma=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`MissingNativeParams`,this._lookup=`MNR`}};ma=w([S()],ma);let ha=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`OrtbEnrich`,this._lookup=`S2SPARAM`}};ha=w([S()],ha);let ga=class extends aa{init(){this._label=`RPBS`}};ga=w([S()],ga);let _a=class extends V{init(){this._key=`PrebidFailsafeTimeout`,this._lookup=`PBFS`}};_a=w([S()],_a);let va=class extends V{init(){this._key=`PrebidServerMultiCall`,this._lookup=`PBSMC`}run(){return super.run()}};va=w([S()],va);let ya=class extends V{init(){this._key=`PrebidRequestQueueTimeout`,this._lookup=`PBRQT`}get result(){return this._result}};ya=w([S()],ya);let ba=class extends Vr{init(){this._setAbGroup=!0,this._key=`S2S`,this._lookup=`PBS2S`,this._default=[`none`]}};ba=w([S()],ba);let xa={[G.CriteoServer]:G.Criteo,[G.IndexExchangeServer]:G.IndexExchange,[G.NativoServer]:G.Nativo,[G.OpenXServer]:G.OpenX,[G.PubmaticServer]:G.Pubmatic,[G.RubiconServer]:G.Rubicon,[G.SharethroughServer]:G.Sharethrough,[G.TripleliftServer]:G.Triplelift,[G.YahooSSPServer]:G.YahooSSP,[G.UndertoneServer]:G.Undertone},Sa=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,ee,te){this._ayRpbsStagesExperiment=r,this._gam=i,this._site=a,this._partners=c,this._prebidClientSide=u,this._currencyConversionExperiment=f,this._prebidServerMultiCallExperiment=h,this._trafficShaping=_,this._distributeServerBiddersByBestServerExperiment=v,C(this,`interstitialAdUnitCode`,void 0),C(this,`s2s`,void 0),C(this,`clientSideBidders`,[]),C(this,`ortbEnrich`,void 0),C(this,`bidPoolSlots`,[H.Below_Post,H.Content,H.Sidebar,H.Recipe]),C(this,`auctionDelay`,void 0),C(this,`deals`,[]),C(this,`firstVideoAuctionBidders`,new Set),C(this,`secondVideoAuctionBidders`,new Set),C(this,`auctionMapping`,new Map),C(this,`advertiserId`,413678576),C(this,`multistageActive`,void 0),C(this,`multistageStickyOutstreamActive`,void 0),C(this,`refreshAuctionCount`,1),C(this,`refreshStickyOutstreamAuctionCount`,1),C(this,`experimentRefreshInterval`,void 0),C(this,`currencyConversionEnabled`,!1),C(this,`sendAdditionalNativeParams`,void 0),C(this,`failsafeTimeout`,void 0),C(this,`requestExp`,{}),C(this,`ayServerEnabled`,!1),C(this,`rpbsEnabled`,!1),C(this,`appBidders`,void 0),C(this,`blockedCreativeIds`,[]),C(this,`bidderInflatorMap`,new Map),C(this,`serverBidderInflatorMap`,new Map),C(this,`experimentIntegrationHoldouts`,[]),C(this,`targetingKeysPrefix`,this._gam.isThirdPartyGam?`rp`:`hb`),C(this,`targetingKeyMap`,{AD_ID:`${this.targetingKeysPrefix}_adid`,ATTR:`${this.targetingKeysPrefix}_attr`,ADOMAIN:`${this.targetingKeysPrefix}_adomain`,BIDDER:`${this.targetingKeysPrefix}_bidder`,BSID:`${this.targetingKeysPrefix}_bsid`,CACHE_ID:`${this.targetingKeysPrefix}_cache_id`,CACHE_HOST:`${this.targetingKeysPrefix}_cache_host`,CRID:`${this.targetingKeysPrefix}_crid`,DEAL:`${this.targetingKeysPrefix}_deal`,DSP:`${this.targetingKeysPrefix}_dsp`,DUR:`${this.targetingKeysPrefix}_dur`,FORMAT:`${this.targetingKeysPrefix}_format`,INTERSTITIAL:`${this.targetingKeysPrefix}_interstitial`,PRICE_BUCKET:`${this.targetingKeysPrefix}_pb`,RPB:`${this.targetingKeysPrefix}_rpb`,SEAT:`${this.targetingKeysPrefix}_seat`,SIZE:`${this.targetingKeysPrefix}_size`,SOURCE:`${this.targetingKeysPrefix}_source`,UUID:`${this.targetingKeysPrefix}_uuid`}),C(this,`targetingKeys`,Object.keys(this.targetingKeyMap)),C(this,`sendAllBidsTargetingKeys`,this.targetingKeys.filter(e=>![`BIDDER`,`INTERSTITIAL`,`CRID`].includes(e))),C(this,`_s2sBidders`,[]),C(this,`_isIOS`,Lt()),C(this,`_requestQueueTimeout`,void 0),C(this,`_pbsExperimentsResultsByLookupKey`,void 0),C(this,`_bidderPlacementsExperimentsResults`,void 0),C(this,`_bidderPlacementsExperimentsResultsByLookupKey`,void 0);let ne=this._trafficShaping.getServerShutoff(),re=this._prebidServerMultiCallExperiment.result,ie=`west`,ae=re===`all`;this.rpbsEnabled=ae&&!ne.includes(ie)||re===ie,this.ayServerEnabled=ae&&!ne.includes(`ay`)||re===`ay`,this.s2s=this._setupS2SBidders(e,s,o),this.interstitialAdUnitCode=`gpt_unit_/${this._gam.account}/AdThrive_Interstitial_1/${this._site.id}_0`,this.ortbEnrich=n.result,this.bidderInflatorMap=te.clientInflators,this.serverBidderInflatorMap=te.serverInflators;let oe=Object.values(G),se=[G.AmazonTAM,G.AmazonUAM];this.clientSideBidders=this.getClientSideBiddersArray(oe,e=>!this.s2s.bidders.includes(e)&&!se.includes(e)&&!e.includes(`_ay`)),this.multistageActive=!0,this.refreshAuctionCount=2,this.multistageStickyOutstreamActive=!0,this._determineVideoBidderLabel(),this.auctionDelay=t.result??0,this.experimentRefreshInterval=Yi-this.refreshAuctionCount*5e3,this.sendAdditionalNativeParams=l.result,this.failsafeTimeout=d.result??1e3,this.currencyConversionEnabled=this._currencyConversionExperiment.result,this.appBidders=g.result||[],this._requestQueueTimeout=p.result||250,this._pbsExperimentsResultsByLookupKey=m.resultsByLookupKey??[],this._bidderPlacementsExperimentsResults=ee.results??[],this._bidderPlacementsExperimentsResultsByLookupKey=ee.resultsByLookupKey??[]}_modifyServerBidderExperimentResult(e){if(!e.length)return e;let t={[G.GumGum]:{remove:this._isIOS,insert:!1},[G.AppNexus]:{remove:!1,insert:Tt(window.navigator?.userAgent)}};return Object.entries(t).forEach(([t,n])=>{n.remove&&e.includes(t)?e.splice(e.indexOf(t),1):n.insert&&!e.includes(t)&&e.push(t)}),e}_setupS2SBidders(e,t,n){return this._addToS2SBidders(G.IndexExchange,G.IndexExchangeServer,t?.result??`client`),this._addToS2SBidders(G.YahooSSP,G.YahooSSPServer,this._isIOS?`server`:n?.result),{bidders:[...this._modifyServerBidderExperimentResult(e.result??[]),...this._s2sBidders].filter(e=>this._isBidderCodeValid(e)),aliases:{}}}_isBidderCodeValid(e){let t=xa[e];return this._partners.display.get(e)||this._partners.video.get(e)||t&&(this._partners.display.get(t)||this._partners.video.get(t))}_determineVideoBidderLabel(){let e=[...this.clientSideBidders],{bidders:t}=this.s2s;this.refreshStickyOutstreamAuctionCount=2,this.firstVideoAuctionBidders=new Set(t),this.secondVideoAuctionBidders=new Set(e)}_shuffleArray(e){let t=[...e];for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}_addToS2SBidders(e,t,n){if(!n)return;this.requestExp[t]=n;let r=this.experimentIntegrationHoldouts;n===`server`?(this._s2sBidders.push(t),r.push(e)):n===`client`?r.push(t):this._s2sBidders.push(t)}distributeServerBidders(){if(!this.ayServerEnabled||!this.rpbsEnabled)return;let e=this.s2s.bidders,{result:t}=this._distributeServerBiddersByBestServerExperiment,n=t&&typeof t==`object`?t:{},r=new Set,i=new Set,a=new Set;for(let t of e)di.has(t)?r.add(t):fi.has(t)?i.add(t):ui.has(t)?(r.add(t),i.add(t)):n[t]===`rpbs`?r.add(t):n[t]===`ay`?i.add(t):a.add(t);for(let e of Array.from(a.values()).sort(()=>Math.random()-.5))r.size>i.size?i.add(e):r.add(e);this.s2s.distributedBidders={rpbsBidders:Array.from(r),ayBidders:Array.from(i)}}_determineBidderLabelByServer(e){let t=!!e;switch(this._ayRpbsStagesExperiment.result){case`a1`:return t?Ki:qi;case`a2`:return t?qi:Ki;case`b1`:return Ki;case`b2`:return qi;default:return Ki}}get pbsExperimentsResultsByLookupKey(){return this._pbsExperimentsResultsByLookupKey}get bidderPlacementsExperimentsResults(){return this._bidderPlacementsExperimentsResults}get bidderPlacementsExperimentsResultsByLookupKey(){return this._bidderPlacementsExperimentsResultsByLookupKey}getVideoBidderLabel(e){let t=this.firstVideoAuctionBidders.has(e),n=this.secondVideoAuctionBidders.has(e);return t&&!n||!t&&n?t?Ki:qi:``}getBidderLabel(e,t){let n=this._ayRpbsStagesExperiment.result;if(!n)return Ki;let{bidders:r,distributedBidders:i}=this.s2s;return this.clientSideBidders.includes(e)?Gi.includes(e)?Ki:qi:r.includes(e)?n&&i?this._determineBidderLabelByServer(t):Gi.includes(e)?Ki:qi:Ki}get requestQueueTimeout(){return this._requestQueueTimeout}getClientSideBiddersArray(e,t){let n=e.filter(t.bind(this));return this._prebidClientSide.enabled?n:[]}};Sa=w([S(),N(0,b(ba)),N(1,b(na)),N(2,b(ha)),N(3,b(ra)),N(4,b(ii)),N(5,b(Zi)),N(6,b(Wi)),N(7,b(Ui)),N(8,b(Vi)),N(9,b(ma)),N(10,b(Hi)),N(11,b(_a)),N(12,b(Ji)),N(13,b(ya)),N(14,b(ga)),N(15,b(va)),N(16,b(ta)),N(17,b(ea)),N(18,b(pa)),N(19,b(oa)),N(20,b(fa))],Sa);let Ca=[H.Sidebar_3,H.Sidebar_4,H.Sidebar_5,H.Native_Recipe],wa=e=>{let t=e.substring(13).split(`.`).map(e=>parseInt(e));return{major:t[0],minor:t[1],patch:t[2]}},Ta=(e,t)=>{let n=wa(e),r=wa(t);if(n.major>r.major)return!1;if(n.major<r.major)return!0;if(n.minor>r.minor)return!1;if(n.minor<r.minor)return!0;if(n.patch>r.patch)return!1;if(n.patch<=r.patch)return!0},Ea=class{constructor(e,t){this._cls=t,C(this,`enabled`,void 0),C(this,`settings`,void 0),C(this,`_adDensityEnabled`,void 0),this.settings=e.siteAds.adDensityLayout,this._adDensityEnabled=B(e.siteAds.adDensityEnabled,!0),this.enabled=this.isEnabled()}isEnabled(){let e=window,t=e.adthrive&&e.adthrive.plugin,n=this._cls&&this._cls.experiments,r=!!(n&&`clsins_ss`in n)||!!(t&&Ta(`adthrive-ads-1.1.0`,t));return!!(this.settings&&this._adDensityEnabled&&r)}};Ea=w([S(),N(0,b(`AdThrive`)),N(1,b(pr))],Ea);let Da=e=>{let t=e.downlink;return t===void 0?`unknown`:t<10?`slow`:`fast`},Oa=e=>{let t=Da(e);if(e.device===`desktop`)switch(t){case`fast`:return{key:`InitialTimeoutDesktopFastExperiment`,lookupKey:`ITO_DF`};case`slow`:return{key:`InitialTimeoutDesktopSlowExperiment`,lookupKey:`ITO_DS`};case`unknown`:return{key:`InitialTimeoutDesktopUnknownExperiment`,lookupKey:`ITO_DN`}}else switch(t){case`fast`:return{key:`InitialTimeoutMobileFastExperiment`,lookupKey:`ITO_MF`};case`slow`:return{key:`InitialTimeoutMobileSlowExperiment`,lookupKey:`ITO_MS`};case`unknown`:return{key:`InitialTimeoutMobileUnknownExperiment`,lookupKey:`ITO_MN`}}},ka=class extends V{init(){let e=y.resolve(W),{key:t,lookupKey:n}=Oa(e);this._key=t,this._lookup=n}};ka=w([S()],ka);let Aa=class{constructor(e){C(this,`initialBidsRequest`,void 0),C(this,`refreshBidsRequest`,void 0),this.initialBidsRequest=e.result??2400,this.refreshBidsRequest=5e3}};Aa=w([S(),N(0,b(ka))],Aa);let ja=class{constructor(){C(this,`_data`,{})}set(e){this._data={...this._data,...e}}get(){return Object.keys(this._data).length===0?void 0:this._data}getByKey(e){return this._data[e]}clear(){this.set({})}};ja=w([D(`UserPageDataLoggingStore`),S()],ja);let Ma=class{constructor(e){this._userPageDataLoggingStore=e,C(this,`loggingData`,new T),C(this,`_maxTimeOnPage`,36e5),C(this,`_listeners`,[]),C(this,`_callbacks`,new Set),C(this,`_requestSent`,!1),setTimeout(()=>{this._callbacks.forEach(e=>this._executeCallback(e)),this.cleanup()},this._maxTimeOnPage)}_executeCallback(e){e(),this._callbacks.delete(e),this._callbacks.size===0&&this.logUserPageData()}setUserPageData(e){e&&this._userPageDataLoggingStore.set(e)}logUserPageData(){this._requestSent||(E.fetchEvent(`UserPageDataLoggingComponent`,`logUserData`,this._userPageDataLoggingStore.get()),this._requestSent=!0,this.cleanup())}addCallbackToQueue(e,t){this._callbacks.add(t),e.forEach(e=>{this._listeners.push(e.on(()=>this._executeCallback(t)))})}cleanup(){this._listeners.forEach(e=>{e()}),this._listeners=[],this._callbacks.clear()}};Ma=w([D(`UserPageDataLoggingEvents`),S(),N(0,b(ja))],Ma);let Na=class{constructor(e,t){this._pageManager=t,C(this,`started`,0),C(this,`delay`,0),C(this,`loading`,0),C(this,`timeOnPage`,void 0),C(this,`totalTimeOnPage`,0),C(this,`bootstrapFinished`,0),C(this,`amazonStarted`,0),C(this,`amazonFinished`,0),C(this,`amazonDuration`,0),C(this,`gamStarted`,0),C(this,`gamFinished`,0),C(this,`gamDuration`,0),C(this,`marmaladeStarted`,0),C(this,`marmaladeFinished`,0),C(this,`marmaladeDuration`,0),C(this,`floorsStarted`,0),C(this,`floorsFinished`,0),C(this,`floorsDuration`,0),C(this,`prebidStarted`,0),C(this,`prebidFinished`,0),C(this,`prebidDuration`,0),C(this,`optableStarted`,0),C(this,`optableFinished`,0),C(this,`optableDuration`,0),this.started=$e(),document.visibilityState===`visible`&&(this.timeOnPage=this.started),this._pageManager.visibilityChange.on(()=>this.documentVisibilityChanged()),e.loggingData.on(()=>{document.visibilityState===`visible`&&(this.totalTimeOnPage+=$e()-this.timeOnPage)})}setNonBlockingLibraryTimingData(e){let t=e.get(ot.Prebid),n=e.get(ot.Amazon),r=e.get(ot.Optable);this._setPrebidTimingData(t),this._setAmazonTimingData(n),this._setOptableTimingData(r)}_setPrebidTimingData(e){this.prebidStarted=e&&e.started||0,this.prebidFinished=e&&e.finished||0,this.prebidDuration=e&&e.started&&e.finished&&e.finished-e.started||0}_setAmazonTimingData(e){this.amazonStarted=e&&e.started||0,this.amazonFinished=e&&e.finished||0,this.amazonDuration=e&&e.started&&e.finished&&e.finished-e.started||0}_setOptableTimingData(e){this.optableStarted=e&&e.started||0,this.optableFinished=e&&e.finished||0,this.optableDuration=e&&e.started&&e.finished&&e.finished-e.started||0}get timingData(){return{started:this.started,delay:this.delay,loading:this.loading,totalTimeOnPage:this.totalTimeOnPage,bootstrapFinished:this.bootstrapFinished,amazonStarted:this.amazonStarted,amazonFinished:this.amazonFinished,amazonDuration:this.amazonDuration,gamStarted:this.gamStarted,gamFinished:this.gamFinished,gamDuration:this.gamDuration,marmaladeStarted:this.marmaladeStarted,marmaladeFinished:this.marmaladeFinished,marmaladeDuration:this.marmaladeDuration,floorsStarted:this.floorsStarted,floorsFinished:this.floorsFinished,floorsDuration:this.floorsDuration,prebidStarted:this.prebidStarted,prebidFinished:this.prebidFinished,prebidDuration:this.prebidDuration,optableStarted:this.optableStarted,optableFinished:this.optableFinished,optableDuration:this.optableDuration,...this.timeOnPage&&{timeOnPage:this.timeOnPage}}}documentVisibilityChanged(){document.visibilityState===`visible`?this.timeOnPage=$e():document.visibilityState===`hidden`&&(this.totalTimeOnPage+=$e()-this.timeOnPage,this.timeOnPage=void 0)}};Na=w([S(),N(0,b(Ma)),N(1,b(jr))],Na);let Pa=class extends Vr{init(){this._key=`TKHO`,this._lookup=`TKHO_2`,this._default=[`none`]}};Pa=w([S()],Pa);let Fa=class{constructor(e){C(this,`tracker`,void 0),this.tracker=e.result??[`none`]}};Fa=w([S(),N(0,b(Pa))],Fa);let Ia=class extends V{init(){this._key=`TrackScrollExperiment2`,this._lookup=`TCKSCROLL2`}get result(){return this._result}};Ia=w([S()],Ia);function La(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}var Ra=La,za=typeof global==`object`&&global&&global.Object===Object&&global,Ba=typeof self==`object`&&self&&self.Object===Object&&self,Va=za||Ba||Function(`return this`)(),Ha=function(){return Va.Date.now()},Ua=/\s/;function Wa(e){for(var t=e.length;t--&&Ua.test(e.charAt(t)););return t}var Ga=Wa,Ka=/^\s+/;function qa(e){return e&&e.slice(0,Ga(e)+1).replace(Ka,``)}var Ja=qa,Ya=Va.Symbol,Xa=Object.prototype,Za=Xa.hasOwnProperty,Qa=Xa.toString,$a=Ya?Ya.toStringTag:void 0;function eo(e){var t=Za.call(e,$a),n=e[$a];try{e[$a]=void 0;var r=!0}catch{}var i=Qa.call(e);return r&&(t?e[$a]=n:delete e[$a]),i}var to=eo,no=Object.prototype.toString;function ro(e){return no.call(e)}var io=ro,ao=`[object Null]`,oo=`[object Undefined]`,so=Ya?Ya.toStringTag:void 0;function co(e){return e==null?e===void 0?oo:ao:so&&so in Object(e)?to(e):io(e)}var lo=co;function uo(e){return typeof e==`object`&&!!e}var fo=uo,po=`[object Symbol]`;function mo(e){return typeof e==`symbol`||fo(e)&&lo(e)==po}var ho=mo,go=NaN,_o=/^[-+]0x[0-9a-f]+$/i,vo=/^0b[01]+$/i,yo=/^0o[0-7]+$/i,bo=parseInt;function xo(e){if(typeof e==`number`)return e;if(ho(e))return go;if(Ra(e)){var t=typeof e.valueOf==`function`?e.valueOf():e;e=Ra(t)?t+``:t}if(typeof e!=`string`)return e===0?e:+e;e=Ja(e);var n=vo.test(e);return n||yo.test(e)?bo(e.slice(2),n?2:8):_o.test(e)?go:+e}var So=xo,Co=`Expected a function`,wo=Math.max,To=Math.min;function Eo(e,t,n){var r,i,a,o,s,c,l=0,u=!1,d=!1,f=!0;if(typeof e!=`function`)throw TypeError(Co);t=So(t)||0,Ra(n)&&(u=!!n.leading,d=`maxWait`in n,a=d?wo(So(n.maxWait)||0,t):a,f=`trailing`in n?!!n.trailing:f);function p(t){var n=r,a=i;return r=i=void 0,l=t,o=e.apply(a,n),o}function m(e){return l=e,s=setTimeout(_,t),u?p(e):o}function h(e){var n=e-c,r=e-l,i=t-n;return d?To(i,a-r):i}function g(e){var n=e-c,r=e-l;return c===void 0||n>=t||n<0||d&&r>=a}function _(){var e=Ha();if(g(e))return v(e);s=setTimeout(_,h(e))}function v(e){return s=void 0,f&&r?p(e):(r=i=void 0,o)}function ee(){s!==void 0&&clearTimeout(s),l=0,r=c=i=s=void 0}function te(){return s===void 0?o:v(Ha())}function ne(){var e=Ha(),n=g(e);if(r=arguments,i=this,c=e,n){if(s===void 0)return m(c);if(d)return clearTimeout(s),s=setTimeout(_,t),p(c)}return s===void 0&&(s=setTimeout(_,t)),o}return ne.cancel=ee,ne.flush=te,ne}var Do=Eo,Oo=`Expected a function`;function ko(e,t,n){var r=!0,i=!0;if(typeof e!=`function`)throw TypeError(Oo);return Ra(n)&&(r=`leading`in n?!!n.leading:r,i=`trailing`in n?!!n.trailing:i),Do(e,t,{leading:r,maxWait:t,trailing:i})}var Ao=ko;let jo=class{constructor(e){this.trackScrollExperiment=e,C(this,`trackScrollEnabled`,void 0),C(this,`_timesForTracking`,void 0),C(this,`_currentTimesForTracking`,[]),C(this,`_lastScrollTimestamp`,void 0);let t=this.trackScrollExperiment.result;t===`off`?this.trackScrollEnabled=!1:(this.trackScrollEnabled=!0,this._timesForTracking=this._parseResult(t),this._setupScrollListener())}getTargetingValue(){if(this._timesForTracking&&this._shouldUpdateTargeting()&&this._currentTimesForTracking.length>0)return this._currentTimesForTracking.map(e=>`engage${e}`)}_parseResult(e){return Array.isArray(e)&&e.length>0&&e.every(e=>typeof e==`number`)?e:[]}_setupScrollListener(){let e=Ao(()=>{this._lastScrollTimestamp=Date.now()},500);window.addEventListener(`scroll`,e,{passive:!0})}_shouldUpdateTargeting(){if(this._lastScrollTimestamp&&this._timesForTracking){let e=(Date.now()-this._lastScrollTimestamp)/1e3;if(this._currentTimesForTracking=this._timesForTracking.filter(t=>t>e),this._currentTimesForTracking.length>0)return!0}return!1}};jo=w([S(),N(0,b(Ia))],jo);let Mo=()=>{let e=navigator.userAgent;return/Tablet|iPad|Playbook|Nook|webOS|Kindle|Android (?!.*Mobile).*Safari/i.test(e)||!/iPhone/i.test(e)&&/Mac/i.test(e)&&`ontouchstart`in window},No=()=>z()?`phone`:Mo()?`tablet`:It()?`desktop`:`other`,Po=()=>{let e=window.navigator.userAgent,t=window.navigator.userAgentData?.platform||window.navigator.platform||``;return[`macOS`,`Macintosh`,`MacIntel`,`MacPPC`,`Mac68K`].includes(t)?`macOS`:[`iPhone`,`iPad`,`iPod`].includes(t)?`iOS`:[`Win32`,`Win64`,`Windows`,`WinCE`].includes(t)?`windows`:/Android/.test(e)?`android`:/Linux/.test(t)?`linux`:`other`},Fo=class{constructor(e){C(this,`_os`,void 0),C(this,`_browser`,void 0),C(this,`_device`,void 0),C(this,`_deviceByBreakpoint`,void 0);let{tablet:t,desktop:n}=e.siteAds.breakpoints;this._os=Po(),this._browser=Nt(),this._device=No(),this._deviceByBreakpoint=Tr(t,n)}get os(){return this._os}get browser(){return this._browser}get device(){return this._device}get deviceByBreakpoint(){return this._deviceByBreakpoint}};Fo=w([S(),N(0,b(`AdThrive`))],Fo);let q={IDENTITY_DATA:{KEY:`adt_i`},PII_DATA:{KEY:`adt_ei`},PII_SOURCE:{KEY:`adt_emsrc`,VALUES:{ID5ID:`id5id`,GPID:`gpid`,RCID:`rcid`,SHID:`shid`,LPID:`lpid`,TD:`td`,MW:`mw`,API:`api`,URL:`url`,URLH:`urlh`,URLHCK:`urlhck`,LOCAL_STORAGE:`l`,COOKIE:`cki`,COMMENT:`c`,NEWSLETTER:`nl`,SLICKSTREAM:`ss`,IDENTITY_IFRAME:`l_i`,GRWM:`grwm`,PUBM:`pubm`,OTHER:`o`,SDKLI:`sdkli`,UNKNOWN:`unknown`,GATED_PRINT:`gp`,FORM:`form`},PREFIXES:{IDG:`g_`,IDENTITY_IFRAME:`l_i-`,SLICKSTREAM:`ss_`,RAPTIVE_AUTH:`ra_`,HEM_CAPTURE:`hc_`},SUFFIXES:{CAPTURE:`_c`,STORAGE:`_s`}},PII_SOURCE_COLLECTED_DATE:{KEY:`adt_emsrc_cd`},OPTABLE_LMPID:{KEY:`__lmpid`}},Io=e=>new TextEncoder().encode(e),Lo=e=>new TextDecoder().decode(e),Ro=async e=>{let t=Io(e);return crypto.subtle.importKey(`raw`,t.slice(0,16),{name:`AES-GCM`},!1,[`encrypt`,`decrypt`])},zo=async(e,t)=>{let n=await Ro(t),r=Uint8Array.from(atob(e),e=>e.charCodeAt(0)),i=r.slice(0,12),a=r.slice(12),o=await crypto.subtle.decrypt({name:`AES-GCM`,iv:i},n,a);return JSON.parse(Lo(o))},Bo=e=>{let t=String.fromCharCode(...new Uint8Array(e));return btoa(t).replace(/\+/g,`-`).replace(/\//g,`_`).replace(/=+$/,``)},Vo=e=>{e=e.replace(/-/g,`+`).replace(/_/g,`/`);let t=(4-e.length%4)%4;e+=`=`.repeat(t);let n=atob(e);return Uint8Array.from(n,e=>e.charCodeAt(0))},Ho=async(e,t)=>{let n=await Ro(t),r=Io(JSON.stringify(e)),i=crypto.getRandomValues(new Uint8Array(12)),a=await crypto.subtle.encrypt({name:`AES-GCM`,iv:i},n,r),o=new Uint8Array(i.length+a.byteLength);return o.set(i),o.set(new Uint8Array(a),i.length),Bo(o.buffer)},Uo=async(e,t)=>{let n=await Ro(t),r=Vo(e),i=r.slice(0,12),a=r.slice(12),o=await crypto.subtle.decrypt({name:`AES-GCM`,iv:i},n,a);return JSON.parse(Lo(o))},Wo=async(e=!0)=>{try{let t=L.readInternalLocalStorage(q.IDENTITY_DATA.KEY);if(typeof t!=`object`)return null;if(t&&e)for(let e of Object.values(t))typeof e.d==`string`&&(e.d=await Uo(e.d,e.s));return t}catch{return null}},Go=async e=>{let t=e.direct??e.graph1p??e.graph3p??e.liveIntent;return t?typeof t.d==`string`?await Uo(t.d,t.s):t.d:null},Ko=async()=>{let e=await Wo(!1);return Go(e||{})},qo=async(e,t)=>{let n=[`direct`,`graph1p`,`graph3p`,`liveIntent`],r=n.findIndex(t=>e[t]),i=n.findIndex(e=>t[e]);if(r<i)return e;if(i<r)return t;try{let i=n[r],a=e[i],o=t[i];if(a&&o){let n=typeof a.d==`string`?await Uo(a.d,a.s):a.d,r=typeof o.d==`string`?await Uo(o.d,o.s):o.d;if(n.collectionDate&&r.collectionDate)return new Date(n.collectionDate)>new Date(r.collectionDate)?e:t}}catch{return e}return e},Jo=async(e,t,n=!0,r)=>{let i=await Wo(!1)||{},a=e.collectionSiteId?e.collectionSiteId:t;i[e.collectionMethod]={d:e,s:a};for(let e of Object.values(i))n&&typeof e.d==`object`&&(e.d=await Ho(e.d,e.s)),!n&&typeof e.d==`string`&&(e.d=await Uo(e.d,e.s));return L.setInternalLocalStorage(q.IDENTITY_DATA.KEY,i),r&&L.setInternalCookie(q.IDENTITY_DATA.KEY,i),i},Yo=async()=>{let e=await Wo(!0)||{};e&&L.setInternalLocalStorage(q.IDENTITY_DATA.KEY,e)},Xo=e=>{let t=new Uint8Array(e);if(typeof crypto<`u`&&typeof crypto.getRandomValues==`function`)return crypto.getRandomValues(t);for(let n=0;n<e;n++)t[n]=Math.floor(Math.random()*256);return t},Zo=()=>{let e=Xo(16);e[6]=e[6]&15|64,e[8]=e[8]&63|128;let t=Array.from(e,e=>e.toString(16).padStart(2,`0`));return[t.slice(0,4).join(``),t.slice(4,6).join(``),t.slice(6,8).join(``),t.slice(8,10).join(``),t.slice(10,16).join(``)].join(`-`)},Qo=()=>window.crypto?.randomUUID?.()??Zo(),$o=class{constructor(e){this._site=e,C(this,`_rcid`,null),C(this,`_uuid`,void 0),this._uuid=this._getUUID()}get rcid(){return this._rcid}get uuid(){return this._uuid}get raptiveEid(){return{source:`uuid.raptive-sync.net`,uids:[{id:this._uuid,atype:1}]}}async identityData(){return await Ko()}get hash(){let e=L.readInternalLocalStorage(`adt_ei`);if(e&&typeof e==`object`&&Object.prototype.hasOwnProperty.call(e,`sha256Hash`))return this._retrieveValueFromObject(e.sha256Hash);if(e&&typeof e==`string`&&e.match(/sha256Hash/i))return this._retrieve64BitString(e)}get source(){return L.readInternalLocalStorage(`adt_emsrc`)||void 0}async getRcid(){if(this._rcid)return this._rcid;try{let e=L.readExternalCookie(`_rcid`);if(!e)return null;typeof e==`string`?this._rcid=await zo(e,this._site.id):typeof e==`object`&&e?.value?.sharedId?this._rcid=e:this._rcid=null}catch{this._rcid=null}return this._rcid}_retrieveValueFromObject(e){if(typeof e==`string`)return e;if(typeof e==`object`&&Object.prototype.hasOwnProperty.call(e,`sha256Hash`))return typeof e.sha256Hash==`object`?this._retrieveValueFromObject(e.sha256Hash):e.sha256Hash}_retrieve64BitString(e){let t=/\w{64}/.exec(e);return t?t[0]:void 0}_getUUID(){let e=L.readInternalLocalStorage(`adt_uuid`);if(e&&typeof e==`string`)return e;let t=Qo();return L.setInternalLocalStorage(`adt_uuid`,t),t}};$o=w([S(),N(0,b(Zi))],$o);let es=class extends Vr{init(){this._key=`VBHO2`,this._lookup=`VBHO2`,this._default=[`none`]}};es=w([S()],es);let ts=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`VBHORise`,this._lookup=`VBHORISE`}};ts=w([S()],ts);let ns=[`none`],rs=class{constructor(e,t,n){this.vbhoExperiment=e,this.allBidderHOExperiment=t,this.vbhoRiseExperiment=n,C(this,`bidders`,void 0),C(this,`filteredBidders`,void 0),C(this,`_fullyDisabledBiddersMapping`,[]);let r=this.vbhoExperiment.result??[],i=this.allBidderHOExperiment.result;this.vbhoRiseExperiment.result&&r.push(G.Rise),this.bidders=[...r,...i].filter((e,t,n)=>e!==`none`&&n.indexOf(e)===t),this.bidders.length===0&&(this.bidders=ns),this.filteredBidders=this._getFilteredBidders(this.bidders)}_getFilteredBidders(e){return e.filter(e=>this._fullyDisabledBiddersMapping.includes(e))}};rs=w([S(),N(0,b(es)),N(1,b(hi)),N(2,b(ts))],rs);let os=class extends Vr{init(){this._setAbGroup=!1,this._key=`VideoOpenBidderExperiment`,this._lookup=`VOBA`,this._default=[`none`]}};os=w([S()],os);let ss=class{constructor(e){C(this,`bidders`,void 0),this.bidders=e.result||[`none`]}};ss=w([S(),N(0,b(os))],ss);let cs=class extends On{constructor(e,t){super(),this._siteExperiments=e,this._pubabgroup=t,C(this,`_choices`,[]),C(this,`_result`,!1),C(this,`key`,hn.RemoveVideoTitleWrapper),this.experimentConfig=this._siteExperiments.getSiteExperimentByKey(this.key),this.enabled&&this.experimentConfig&&(this._choices=this.experimentConfig.variants,this._result=this.run(),this.setExperimentTargeting())}run(){let e=this._choices[0].weight/100;return new rn(e).get()}setExperimentTargeting(){if(!this.enabled||!this.experimentConfig){E.error(`RemoveVideoTitleWrapperSiteExperiment`,`setExperimentTargeting`,`() => %o`,`Experiment targeting requires an experiment config`);return}let e=`${this.experimentConfig.key.toLowerCase()}-${this.experimentConfig.id}`,t=this._result?`on`:`off`;this._pubabgroup.set(e,t)}};w([R()],cs.prototype,`run`,null),cs=w([S(),N(0,b(Ln)),N(1,b(ln))],cs);let ls=class extends V{constructor(...e){super(...e),C(this,`abgroup`,`vmaxdur`)}init(){this._key=`VideoDuration`,this._lookup=`VMAXDUR`}};ls=w([S()],ls);let us=class extends V{init(){this._key=`RaptivePlayerBackBufferLength`,this._lookup=`RPBBL`}};us=w([S()],us);let ds=class extends F{constructor(...e){super(...e),C(this,`_default`,!0)}init(){this._key=`RaptivePlayerEnablePreloading`,this._lookup=`RPEP`}};ds=w([S()],ds);let fs=class extends V{init(){this._key=`RaptivePlayerFrontBufferThreshold`,this._lookup=`RPFBT`}};fs=w([S()],fs);let ps=class extends V{init(){this._key=`InstreamCreativeFailureThreshold`,this._lookup=`ICFT`}};ps=w([S()],ps);let ms=class extends V{init(){this._key=`RaptivePlayerLoadVideoTimeout`,this._lookup=`RPLVTO`}};ms=w([S()],ms);let hs=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`LogAdDuration`,this._lookup=`ADDUR`}};hs=w([S()],hs);let gs=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`LogAdLifeCycle`,this._lookup=`ADLIFECYC`}};gs=w([S()],gs);let _s=class extends V{init(){this._key=`IMABitrate`,this._lookup=`IMABR`}};_s=w([S()],_s);let vs=class extends V{init(){this._key=`RaptivePlayerMaxBufferLength`,this._lookup=`RPMBL`}};vs=w([S()],vs);let ys=class extends V{init(){this._key=`RaptivePlayerMaxBufferSize`,this._lookup=`RPMBS`}};ys=w([S()],ys);let bs=class extends V{init(){this._key=`RaptivePlayerMaxMaxBufferLength`,this._lookup=`RPMMBL`}};bs=w([S()],bs);let xs=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`MaxMaxBufferReset`,this._lookup=`MMBR`}};xs=w([S()],xs);let Ss=class extends V{init(){this._key=`OutstreamCreativeFailureThreshold`,this._lookup=`OCFT`}};Ss=w([S()],Ss);let Cs=class extends V{init(){this._key=`OutstreamPlacementExperiment`,this._lookup=`OSP`}run(){return super.run()}};Cs=w([S()],Cs);let ws=class extends $t{constructor(e,t){super(),C(this,`_result`,!0),C(this,`key`,`Playbackmethod`),C(this,`lookup`,`PBM`),C(this,`_choices`,[{choice:!0},{choice:!1}]),C(this,`_map`,new Map([[A.Video_In_Post_ClicktoPlay_SoundOn,[3]],[A.Video_Collapse_Autoplay_SoundOff,[6]],[A.Video_Coll_SOff_Smartphone,[6]],[A.Video_Individual_Autoplay_SOff,[6]]])),C(this,`playbackmethod`,void 0),C(this,`weight`,1);let n=t.getCoreExperimentButMutateWeights(this.key,this.lookup);n&&(this._expConfigABGroup=n.abgroup,this.weight=n.variants[0].weight,this._result=this.run(),this.playbackmethod=this._result?this._map:void 0,e.set(n.abgroup,this._result?`on`:`off`))}get result(){return this._result}run(){return new rn(this.weight).get()}};w([R()],ws.prototype,`run`,null),ws=w([S(),N(0,b(Wt)),N(1,b(Yt))],ws);let Ts=class extends V{init(){this._key=`Protocols`,this._lookup=`PROTO`}setABGroup(){if(this._result){let e=-1;this._choices?.forEach(t=>{t.choice.value===this._result?.value&&(e=t.weight)}),super.setABGroup(this._result.value,this.abgroup,e)}}run(){return super.run()}};w([R()],Ts.prototype,`run`,null),Ts=w([S()],Ts);let Es=class extends V{init(){this._key=`RaptivePlayerStaleLoadThreshold`,this._lookup=`RPSLT`}};Es=w([S()],Es);let Ds=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`DisplayBackupRenderer`,this._lookup=`DOFRE`}};Ds=w([S()],Ds);let Os=class extends V{constructor(...e){super(...e),C(this,`abgroup`,`socbde`)}init(){this._key=`StickyOutstreamCloseButtonTimeout`,this._lookup=`SOCBDE`}run(){return super.run()}};w([R()],Os.prototype,`run`,null),Os=w([S()],Os);let ks=class extends V{init(){this._key=`VastTimeoutISV`,this._lookup=`VASTTOISV`}run(){return super.run()}};ks=w([S()],ks);let As=class extends V{init(){this._key=`VastTimeoutOSV`,this._lookup=`VASTTOOSV`}run(){return super.run()}};As=w([S()],As);let js=class extends On{constructor(e,t){super(),this._siteExperiments=e,this._pubabgroup=t,C(this,`_choices`,[]),C(this,`_result`,!1),C(this,`key`,hn.VideoAdvancePlaylistRelatedPlayer),this.experimentConfig=this._siteExperiments.getSiteExperimentByKey(this.key);let n=this._siteExperiments.getVideoPlaylistByType(`stickyPlaylist`);this.enabled&&this.experimentConfig&&n.length>0&&(this._choices=this.experimentConfig.variants,this._result=this.run(),this.setExperimentTargeting())}run(){let e=this._choices[0].weight/100;return new rn(e).get()}setExperimentTargeting(){if(!this.enabled||!this.experimentConfig){E.error(`VideoAdvancePlaylistRelatedPlayerSiteExperiment`,`setExperimentTargeting`,`() => %o`,`Experiment targeting requires an experiment config`);return}let e=`${this.experimentConfig.key.toLowerCase()}-${this.experimentConfig.id}`,t=this._result?`on`:`off`;this._pubabgroup.set(e,t)}};w([R()],js.prototype,`run`,null),js=w([S(),N(0,b(Ln)),N(1,b(ln))],js);var Ms=class{static getScrollTop(){return(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0)}static getScrollBottom(){let e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0;return this.getScrollTop()+e}static shufflePlaylist(e){let t=e.length,n,r;for(;t!==0;)r=Math.floor(Math.random()*e.length),--t,n=e[t],e[t]=e[r],e[r]=n;return e}static isMobileLandscape(){return window.matchMedia(`(orientation: landscape) and (max-height: 480px)`).matches}static playerViewable(e){let t=e.getBoundingClientRect();return this.isMobileLandscape()?window.innerHeight>t.top+t.height/2&&t.top+t.height/2>0:window.innerHeight>t.top+t.height/2}static createQueryString(e){return Object.keys(e).map(t=>`${t}=${e[t]}`).join(`&`)}static createEncodedQueryString(e){return Object.keys(e).map(t=>`${t}=${encodeURIComponent(e[t])}`).join(`&`)}static setMobileLocation(e,t=!1){e||=`bottom-right`;let n=t?`raptive-player-sticky`:`adthrive-collapse`;return e===`top-left`?e=`${n}-top-left`:e===`top-right`?e=`${n}-top-right`:e===`bottom-left`?e=`${n}-bottom-left`:e===`bottom-right`?e=`${n}-bottom-right`:e===`top-center`&&(e=`adthrive-collapse-${z()?`top-center`:`bottom-right`}`),e}static addMaxResolutionQueryParam(e){let t=`max_resolution=${z()?`320`:`1280`}`,[n,r]=String(e).split(`?`),i=r?r+`&${t}`:t;return`${n}?${i}`}};let Ns=e=>{try{return{valid:!0,elements:document.querySelectorAll(e)}}catch(e){return{valid:!1,...e}}},Ps=e=>e===``?{valid:!0}:Ns(e),Fs=()=>{let e=Ps(`.adthrive-content-specific-playlist`);return e.valid&&e.elements&&e.elements.length?{playlistId:e.elements[0].getAttribute(`data-playlist-id`),shuffle:!!e.elements[0].getAttribute(`data-playlist-shuffle`)}:null},Is=e=>{let t=[],n=[],r=Fs();if(r&&r.playlistId)return r;e.forEach(e=>{e.isDraft||(e.categories.some(e=>{let t=Ps(`.adthrive-cat-${e}`);return t.valid&&t.elements&&t.elements.length})?t.push({playlistId:e.playlistId,shuffle:e.shuffle||!1}):e.categories.length===0&&n.push({playlistId:e.playlistId,shuffle:e.shuffle||!1}))});let i=t.length>0?t:n,a=Math.floor(Math.random()*i.length);return i[a]},Ls=e=>{if(e.length)return Is(e)},Rs=e=>new Promise((t,n)=>{fetch(e).then(e=>{e.json().then(e=>t(e)).catch(()=>n(!1))}).catch(()=>n(!1))}),zs=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,ee,te,ne){C(this,`videoEmbed`,void 0),C(this,`jwPlayer`,void 0),C(this,`relatedSettings`,void 0),C(this,`players`,[]),C(this,`vastTimeoutISV`,void 0),C(this,`vastTimeoutOSV`,void 0),C(this,`maxRedirect`,void 0),C(this,`apiValue`,void 0),C(this,`videoWasClosed`,void 0),C(this,`mobileStickyPlayerOnPage`,void 0),C(this,`logAdDuration`,void 0),C(this,`logAdLifeCycle`,void 0),C(this,`mimeType`,void 0),C(this,`videoProtocols`,void 0),C(this,`playbackmethod`,void 0),C(this,`outstreamPlacement`,void 0),C(this,`stickyOutstreamCloseButtonTimeout`,void 0),C(this,`advancePlaylist`,void 0),C(this,`position`,void 0),C(this,`removeVideoTitleWrapper`,void 0),C(this,`instreamAdUnits`,new Set([A.Video_Collapse_Autoplay_SoundOff,A.Video_Individual_Autoplay_SOff,A.Video_Coll_SOff_Smartphone,A.Video_In_Post_ClicktoPlay_SoundOn])),C(this,`footerSelector`,void 0),C(this,`jwPlaylistObj`,void 0),C(this,`stickyOutstreamSettings`,void 0),C(this,`contentSpecificPlaylists`,void 0),C(this,`setStandardOutstreamBackupRenderer`,void 0),C(this,`maxBitrate`,void 0),C(this,`backBufferLength`,void 0),C(this,`maxBufferLength`,void 0),C(this,`maxBufferSize`,void 0),C(this,`maxMaxBufferLength`,void 0),C(this,`frontBufferThreshold`,void 0),C(this,`staleLoadThreshold`,void 0),C(this,`maxMaxBufferReset`,void 0),C(this,`enablePreloading`,void 0),C(this,`loadVideoTimeout`,void 0),C(this,`instreamCreativeFailureThreshold`,void 0),C(this,`outstreamCreativeFailureThreshold`,void 0);let re=e.siteAds.videoPlayers;this.advancePlaylist=this._getAdvancePlaylistConfig(e),this.apiValue=[2,7],this.stickyOutstreamCloseButtonTimeout=B(t.result,4e3),this.contentSpecificPlaylists=re&&re.contentSpecificPlaylists,this.footerSelector=B(re&&re.footerSelector,``),this.jwPlaylistObj=this._getPlaylistPlayerVideos(e),this.logAdDuration=o.result,this.logAdLifeCycle=s.result,this.maxRedirect=8,this.mimeType=navigator.userAgent&&navigator.userAgent.search(/Chrom|firefox/i)===-1?[`video/mp4`,`application/javascript`]:[`video/mp4`,`application/javascript`,`video/webm`],this.mobileStickyPlayerOnPage=!1,this.outstreamPlacement=c.result||0,this.playbackmethod=a.playbackmethod,this.players=B(re&&re.players.map(e=>(e.mobileLocation=Ms.setMobileLocation(e.mobileLocation),e)),[]),this.position={id:1,name:`above`},this.relatedSettings=re&&re.contextual,this.removeVideoTitleWrapper=B(e.siteAds.adOptions.removeVideoTitleWrapper,!1),this.setStandardOutstreamBackupRenderer=u.result,this.stickyOutstreamSettings=this._getStickyOutstreamSettings(e),this.vastTimeoutISV=B(n.result,1e4),this.vastTimeoutOSV=B(r.result,5e3),this.videoProtocols=i.result,this.videoWasClosed=B(L.readInternalLocalStorage(`adthrive_video_closed`),!1),this.maxBitrate=d.result||-1,this.backBufferLength=!f.result||f.result===`off`?1/0:f.result,this.maxBufferLength=(cn.isRolloutEnabled(`optimize-max-buffer-length`)?5:p.result)||30,this.maxBufferSize=(cn.isRolloutEnabled(`optimize-max-buffer-size`)?5:m.result)||60,this.maxMaxBufferLength=h.result||600,this.frontBufferThreshold=!g.result||g.result===`off`?1/0:g.result,this.staleLoadThreshold=l.result||20,this.maxMaxBufferReset=_.result,this.enablePreloading=v.result,this.loadVideoTimeout=ee.result||8e3,this.instreamCreativeFailureThreshold=te.result||0,this.outstreamCreativeFailureThreshold=ne.result||0}setupAdvanceRelatedExperiment(e){let t=y.resolve(js),n=this.advancePlaylist.relatedPlayer,r=t.enabled;n.shouldRun=this.jwPlaylistObj.playlist.then(i=>{let a=n.sticky?n.sticky.enabled:n.enabled,o=n.static?n.static.enabled:n.enabled,s=typeof i==`object`,c=a&&e,l=!e||o;return s&&(r&&t.result||!r&&(c||l))}).catch(()=>!1),n.applyToFirst=(()=>r?t.result:e&&n.sticky?n.sticky.applyToFirst:n.applyToFirst)()}_getPlaylistPlayerVideos(e){let t=e.siteAds.videoPlayers,n=(t&&t.players||[]).filter(e=>e.type===`stickyPlaylist`),r=e.siteAds.videoPlayers&&e.siteAds.videoPlayers.contentSpecificPlaylists,i=r&&Ls(r),a=i&&i.playlistId,o=a||n.length&&n[0].playlistId;return{playlistId:o,hasContentSpecificPlaylist:!!i,contentSpecificPlaylistshuffle:(i&&i.shuffle)??!1,defaultPlaylistShuffle:n[0]?.shuffle??!1,playlist:o?Rs(Ms.addMaxResolutionQueryParam(`https://cdn.jwplayer.com/v2/playlists/${o}`)):Promise.reject().catch(()=>!1)}}_getAdvancePlaylistConfig(e){let t=e.siteAds.adOptions.advancePlaylistOptions||{},n=t.relatedPlayer||{};return{playlistPlayer:{enabled:B(t.playlistPlayer.enabled,!0)},relatedPlayer:{applyToFirst:B(n.applyToFirst,!0),enabled:B(n.enabled,!0),shouldRun:Promise.reject().catch(()=>!1),static:n.static,sticky:n.sticky}}}_getStickyOutstreamSettings(e){let t={blockedPageSelectors:``,mobile:{enabled:!1},desktop:{enabled:!1},allowForPageWithStickyPlayer:{enabled:!1},allowOnHomepage:!1,mobileHeaderSelector:``,mobileLocation:`bottom-right`,saveVideoCloseState:!1},{video:n,videoPlayers:r}=e.siteAds,i=r&&r.partners&&r.partners.stickyOutstream,a=n&&n.partners.stickyOutstream;return B(i||a,t)}};zs=w([S(),N(0,b(`AdThrive`)),N(1,b(Os)),N(2,b(ks)),N(3,b(As)),N(4,b(Ts)),N(5,b(ws)),N(6,b(hs)),N(7,b(gs)),N(8,b(Cs)),N(9,b(Es)),N(10,b(Ds)),N(11,b(_s)),N(12,b(us)),N(13,b(vs)),N(14,b(ys)),N(15,b(bs)),N(16,b(fs)),N(17,b(xs)),N(18,b(ds)),N(19,b(ms)),N(20,b(ps)),N(21,b(Ss))],zs);let Bs=class{constructor(e,t,n){this._videoAdOptions=e,C(this,`advancePlaylist`,void 0),C(this,`apiValue`,[2,7]),C(this,`collapsePlayerId`,void 0),C(this,`collapseSettings`,void 0),C(this,`contentSpecificPlaylists`,void 0),C(this,`relatedPlayerAdded`,!1),C(this,`relatedSettings`,void 0),C(this,`desktopCollapseSettings`,void 0),C(this,`desktopRelatedCollapseSettings`,void 0),C(this,`footerSelector`,``),C(this,`gamDiscount`,.16),C(this,`hasJwPlayer`,!1),C(this,`hasStickyOutstream`,!1),C(this,`instreamAdUnits`,new Set([A.Video_Collapse_Autoplay_SoundOff,A.Video_Individual_Autoplay_SOff,A.Video_Coll_SOff_Smartphone,A.Video_In_Post_ClicktoPlay_SoundOn])),C(this,`jwPlaylistObj`,void 0),C(this,`jwpVersion`,null),C(this,`logAdDuration`,void 0),C(this,`logAdLifeCycle`,void 0),C(this,`maxDuration`,void 0),C(this,`maxRedirect`,void 0),C(this,`mimeType`,void 0),C(this,`minFloor`,.1753),C(this,`mobileCollapseSettings`,void 0),C(this,`mobileRelatedCollapseSettings`,void 0),C(this,`mobileLocation`,void 0),C(this,`mobileStickyPlayerOnPage`,!1),C(this,`collapsiblePlayerOnPage`,!1),C(this,`outstreamPlacement`,void 0),C(this,`position`,void 0),C(this,`playbackmethod`,void 0),C(this,`playerId`,void 0),C(this,`players`,void 0),C(this,`playlistId`,void 0),C(this,`playlistPlayerAdded`,!1),C(this,`plcmtUnits`,new Map([[A.Video_Collapse_Autoplay_SoundOff,2],[A.Video_Individual_Autoplay_SOff,2],[A.Video_Coll_SOff_Smartphone,2],[A.Video_In_Post_ClicktoPlay_SoundOn,1]])),C(this,`preventStickyOutstream`,!1),C(this,`removeVideoTitleWrapper`,!1),C(this,`setStandardOutstreamBackupRenderer`,void 0),C(this,`staleLoadThreshold`,void 0),C(this,`stickyOutstreamCloseButtonTimeout`,void 0),C(this,`setupAdvanceRelatedExperiment`,void 0),C(this,`stickyOutstreamSettings`,void 0),C(this,`vastTimeoutISV`,void 0),C(this,`vastTimeoutOSV`,void 0),C(this,`vidDiscount`,.1753),C(this,`videoProtocols`,void 0),C(this,`videoWasClosed`,void 0),C(this,`maxBitrate`,void 0),C(this,`backBufferLength`,void 0),C(this,`maxBufferLength`,void 0),C(this,`maxBufferSize`,void 0),C(this,`maxMaxBufferLength`,void 0),C(this,`frontBufferThreshold`,void 0),C(this,`maxMaxBufferReset`,void 0),C(this,`enablePreloading`,void 0),C(this,`loadVideoTimeout`,void 0),C(this,`instreamCreativeFailureThreshold`,void 0),C(this,`outstreamCreativeFailureThreshold`,void 0),C(this,`bidRate`,void 0),C(this,`_videoFlagSlot`,{});let r=this._videoAdOptions;this.position={id:1,name:`above`},this.maxRedirect=8,this.playbackmethod=r.playbackmethod,this.advancePlaylist=r.advancePlaylist,this.jwPlaylistObj=r.jwPlaylistObj,this.setupAdvanceRelatedExperiment=r.setupAdvanceRelatedExperiment,this.relatedSettings=r.relatedSettings,this.mimeType=r.mimeType,this.outstreamPlacement=r.outstreamPlacement,this.videoProtocols=r.videoProtocols,this.logAdDuration=r.logAdDuration,this.logAdLifeCycle=r.logAdLifeCycle,this.vastTimeoutISV=r.vastTimeoutISV,this.vastTimeoutOSV=r.vastTimeoutOSV,this.videoWasClosed=r.videoWasClosed,this.removeVideoTitleWrapper=t.enabled?t.result:r.removeVideoTitleWrapper,this.players=r.players,this.footerSelector=r.footerSelector,this.stickyOutstreamSettings=r.stickyOutstreamSettings,this.maxDuration=n.result||30,this.contentSpecificPlaylists=r.contentSpecificPlaylists,this.staleLoadThreshold=r.staleLoadThreshold,this.setStandardOutstreamBackupRenderer=r.setStandardOutstreamBackupRenderer,this.stickyOutstreamCloseButtonTimeout=r.stickyOutstreamCloseButtonTimeout,this.maxBitrate=r.maxBitrate,this.backBufferLength=r.backBufferLength,this.maxBufferLength=r.maxBufferLength,this.maxBufferSize=r.maxBufferSize,this.maxMaxBufferLength=r.maxMaxBufferLength,this.frontBufferThreshold=r.frontBufferThreshold,this.maxMaxBufferReset=r.maxMaxBufferReset,this.enablePreloading=r.enablePreloading,this.loadVideoTimeout=r.loadVideoTimeout,this.instreamCreativeFailureThreshold=r.instreamCreativeFailureThreshold,this.outstreamCreativeFailureThreshold=r.outstreamCreativeFailureThreshold}get videoFlagSlot(){return this._videoFlagSlot}setVideoFlagSlot(e,t={}){e&&(this._videoFlagSlot[e]={...this._videoFlagSlot[e],...t})}clearVideoFlagSlot(e){if(e)return delete this._videoFlagSlot[e],!0}};Bs=w([S(),N(0,b(zs)),N(1,b(cs)),N(2,b(ls))],Bs);let J=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,ee,te,ne,re,ie,ae,oe,se,ce,le,ue,de,fe,pe,me,he,ge,_e,ve,ye,be,xe,Se,Ce,we){this.abGroup=e,this.act25=t,this.usCMP=n,this.adOptions=r,this.adTypes=i,this.amazon=a,this.ccpa=o,this.gpc=s,this.clsOptimizedAds=c,this.comscore=l,this.disableAds=u,this.displayOpenBidding=d,this.fledge=f,this.floors=p,this.footer=m,this.gam=h,this.gdpr=g,this.hbho=_,this.idho=v,this.audienceTargeting=ee,this.infiniteScroll=te,this.lazyLoad=ne,this.liveRampAts=re,this.locale=ie,this.marmalade=ae,this.optable=oe,this.partners=se,this.pubAbGroup=ce,this.prebid=le,this.site=ue,this.targetDensity=de,this.timeouts=fe,this.timing=pe,this.tkho=me,this.user=he,this.vbho=ge,this.video=_e,this.videoOpenBidding=ve,this._dynamicAdsMapper=ye,this.trackScroll=be,this.userAgent=xe,this.prebidClientSide=Se,this.trafficShaping=Ce,this.creativeBlock=we,C(this,`dynamicAds`,void 0),C(this,`enabledBidders`,this._getEnabledBidders()),this.dynamicAds=ye.get()}resetDynamicAds(){this.dynamicAds=this._dynamicAdsMapper.get()}get isStickyOutstreamTopCenterColorsDisabled(){return cn.isRolloutEnabled(`disable-sticky-outstream-top-center-colors`)}_getEnabledBidders(){let e=[...this.partners.display.entries(),...this.partners.video.entries()].filter(([,e])=>e).map(([e])=>e),t=new Set([...e,...this.prebid.s2s.bidders]);return Array.from(t).sort((e,t)=>e.localeCompare(t))}};J=w([S(),N(0,b(Wt)),N(1,b(fn)),N(2,b(sr)),N(3,b(Kn)),N(4,b(tr)),N(5,b(rr)),N(6,b(U)),N(7,b(mi)),N(8,b(Nr)),N(9,b(Fr)),N(10,b(Br)),N(11,b(Ur)),N(12,b(Yr)),N(13,b(ti)),N(14,b(ni)),N(15,b(ii)),N(16,b(pi)),N(17,b(yi)),N(18,b(xi)),N(19,b(or)),N(20,b(Si)),N(21,b(Ci)),N(22,b(wi)),N(23,b(Ti)),N(24,b(Mi)),N(25,b(Fi)),N(26,b(Vi)),N(27,b(ln)),N(28,b(Sa)),N(29,b(Zi)),N(30,b(Ea)),N(31,b(Aa)),N(32,b(Na)),N(33,b(Fa)),N(34,b($o)),N(35,b(rs)),N(36,b(Bs)),N(37,b(ss)),N(38,b(Kr)),N(39,b(jo)),N(40,b(Fo)),N(41,b(Hi)),N(42,b(ea)),N(43,b(Lr))],J);let Vs=class{constructor(){C(this,`lazyLoadDisabled`,new T)}};Vs=w([S()],Vs);let Hs=class extends qe{constructor(...e){super(...e),C(this,`addSlots`,new T),C(this,`addRebuiltSlots`,new T),C(this,`requestingBids`,new T),C(this,`preRequestBids`,new T),C(this,`refreshingBids`,new T),C(this,`beforeGoogleAdManagerRefreshSlots`,new T),C(this,`addRangeSlotTargeting`,new T),C(this,`addPrebidSlotTargeting`,new T),C(this,`displaySlot`,new T),C(this,`triggerRenderOutsideGam`,new T),C(this,`adRenderingOutsideGAM`,new T),C(this,`adRenderedOutsideGAM`,new T),C(this,`googleAdManagerFallbackDivAdded`,new T),C(this,`amazonBidResponseReceived`,new T),C(this,`noBidResponses`,new T),C(this,`auctionsCompleted`,new T),C(this,`gamEmptyNoBidResponse`,new T),C(this,`adSlotScrolledFarOutOfView`,new T),C(this,`stickyOutstreamSlotDestroyedUserClick`,new T),C(this,`stickyOutstreamRegenerateCloseButton`,new T)}};Hs=w([S()],Hs);let Us=class extends V{init(){this._key=`DCSLLMediumCPMTarget`,this._lookup=`DCSLL_MED`}};Us=w([S()],Us);let Y=class{constructor(){C(this,`added`,new T),C(this,`bidServed`,new T),C(this,`_slots`,new Map)}add(e){let t=L.readSessionStorage(`adthrive_footer_closed`),n=this.castArray(e);t&&(n=n.filter(e=>e.location!==H.Footer));for(let e of n)if(!this._slots.has(e.id)){this._slots.set(e.id,e);try{this.added.emit(e)}catch(e){E.error(`Slots`,`add`,e)}}return n}remove(e){let t=this.castArray(e);for(let e of t)this._slots.has(e.id)&&(e.closed=!0,this._slots.delete(e.id))}get(e){return typeof e==`string`?this._slots.get(e):Array.isArray(e)?e.map(e=>this._slots.get(e)).filter(e=>e!==void 0):[...this._slots.values()]}castArray(e){if(typeof e==`string`){let t=this.get(e);return t===void 0?[]:[t]}return Array.isArray(e)?e:[e]}};Y=w([D(`Slots`),S()],Y);let Ws=class{constructor(e,t,n){this._slots=e,this._slotEventBus=t,C(this,`_observer`,void 0),C(this,`_mobileScalingFactor`,1.5),C(this,`_marginPercent`,void 0);let r=(n&&n>0?n:2)*100;z()&&(r*=this._mobileScalingFactor),this._marginPercent=r,this._observer=this._createObserver()}_createObserver(){return new IntersectionObserver(this._processEntries.bind(this),{root:null,rootMargin:`${this._marginPercent}% 0px`,threshold:[0]})}_processEntries(e){for(let t of e){let e=this._slots.get(t.target.id);e&&t.isIntersecting&&(this._observer.unobserve(t.target),this._slotEventBus.displaySlot.emit(e.id))}}observe(e){this._observer.observe(e.element)}unobserve(e){this._observer.unobserve(e.element)}};Ws=w([D(`LazyLoadObserver`)],Ws);let Gs=class extends V{init(){this._key=`LLIDateRanges`,this._lookup=`LLIDR`,this._autorun=!1}run(){return super.run()}};w([R()],Gs.prototype,`run`,null),Gs=w([S()],Gs);let Ks=class extends V{constructor(...e){super(...e),C(this,`_isActive`,null)}init(){this._key=`LazyLoadWithIntersectionObservers`,this._lookup=`LLI`}get _choices(){let e=super._choices;if(!e)return null;let t=y.resolve(Gs).result;if(!t)return e;if(qn(new Date,t)){let t=this._coreExperimentConfig.getWeightedChoiceVariants(`LLIDateRangeWeights`,`LLIDRW`);return t&&t.length>0?t:e}return e}run(){return super.run()}isEnabled(){return super.isEnabled()&&!Lt()}isActive(){return this._isActive===null&&(this._isActive=this.isEnabled()&&this._result!==void 0&&this._result!==`off`),this._isActive}};w([R()],Ks.prototype,`run`,null),Ks=w([S()],Ks);let qs=class extends V{init(){this._key=`ReduceRenderAboveViewport`,this._lookup=`RRAV2`}};qs=w([S()],qs);let Js=class{constructor(e,t,n,r,i,a){this._slots=e,this._slotEventBus=t,this._reduceRenderAboveViewportExperiment=n,this._lazyLoad=r,this._lazyLoadEventBus=i,this._lazyLoadWithIntersectionObserversExperiment=a,C(this,`_adjustment`,1),C(this,`_marginToIntersectionObserverMap`,new Map),C(this,`_slotToIntersectionObserverMap`,new Map),C(this,`_initialMarginPercent`,void 0),C(this,`_lazyLoadObserver`,void 0),C(this,`_observedSlotsForLazyLoading`,new Set),C(this,`_useIntersectionObserverExperiment`,void 0),this._useIntersectionObserverExperiment=this._lazyLoadWithIntersectionObserversExperiment.isActive(),this._useIntersectionObserverExperiment?(this._initializeLazyLoadObserver(),this._initialMarginPercent=0):(this._initialMarginPercent=this._lazyLoad.googleLazyLoadSettings.hbMarginPercent,this._initializeLegacyObserverSettings())}observe(e,t=!1){if(this._useIntersectionObserverExperiment){this._observeWithExperiment(e,t);return}this._observeLegacy(e)}unobserve(e){if(this._useIntersectionObserverExperiment){this._lazyLoadObserver?.unobserve(e),this._observedSlotsForLazyLoading.delete(e);return}let t=this._slotToIntersectionObserverMap.get(e);t&&t.unobserve(e.element),this._slotToIntersectionObserverMap.delete(e)}unobserveAll(e=!0){this.getObservedSlots().forEach(t=>{this.unobserve(t),e&&this._slotEventBus.displaySlot.emit(t.id)})}reobserveAll(){this.getObservedSlots().forEach(e=>{this.unobserve(e),this.observe(e)})}getObservedSlots(){return this._useIntersectionObserverExperiment?Array.from(this._observedSlotsForLazyLoading):Array.from(this._slotToIntersectionObserverMap.keys())}_observeLegacy(e){let t=this._initialMarginPercent;e.getPositionFromViewport()<0&&(t*=this._adjustment);let n=this._marginToIntersectionObserverMap.get(t);n||(n=this._getIntersectionObserver(t),this._marginToIntersectionObserverMap.set(t,n)),n.observe(e.element),this._slotToIntersectionObserverMap.set(e,n)}_observeWithExperiment(e,t){if(!(!this._lazyLoadObserver||e.displayed)){if(t){this._lazyLoadObserver.unobserve(e),this._observedSlotsForLazyLoading.delete(e),this._slotEventBus.displaySlot.emit(e.id);return}this._lazyLoadObserver.observe(e),this._observedSlotsForLazyLoading.add(e)}}_initializeLegacyObserverSettings(){let e=this._reduceRenderAboveViewportExperiment.result;e&&typeof e==`number`&&(this._adjustment=e)}_initializeLazyLoadObserver(){let e=this._getExperimentMarginMultiplier();this._lazyLoadObserver=new Ws(this._slots,this._slotEventBus,e),this._lazyLoadEventBus.lazyLoadDisabled.on(e=>{let t=this._slots.get(e);t&&(this.unobserve(t),t.displayed||this._slotEventBus.displaySlot.emit(e))})}_getExperimentMarginMultiplier(){let e=this._lazyLoadWithIntersectionObserversExperiment.result;return typeof e==`number`?e:void 0}_getIntersectionObserver(e){let t=window.innerHeight*(e/100);return new IntersectionObserver(e=>{for(let t of e)this._processEntry(t)},{rootMargin:`${t}px 0px`,threshold:[0]})}_processEntry(e){let t=this._slots.get(e.target.id);t&&e.intersectionRatio>0&&this._slotToIntersectionObserverMap.has(t)&&(this._slotEventBus.displaySlot.emit(t.id),this.unobserve(t))}};Js=w([D(`IntersectionObserverManager`),S(),N(0,b(Y)),N(1,b(Hs)),N(2,b(qs)),N(3,b(Ci)),N(4,b(Vs)),N(5,b(Ks))],Js);let Ys=class extends I{constructor(e,t,n,r,i,a,o){super(),this._slotEventBus=e,this._intersectionObserverManager=t,this._config=n,this._dcsllMediumCPMExperiment=r,this._prebidMethods=i,this._lazyLoadEventBus=a,this._lazyLoadWithIntersectionObserversExperiment=o,C(this,`cpmThreshold`,{met:!1,slotLimit:null,slotLocations:null}),C(this,`_useLazyLoadIntersectionObserversExperiment`,void 0),this._useLazyLoadIntersectionObserversExperiment=this._lazyLoadWithIntersectionObserversExperiment.isActive()}isContentSlot(e){return e.location===H.Content}isBelowPostSlot(e){return e.location===H.Below_Post}isRecipeSlot(e){return e.location===H.Recipe}isValidLocation(e){let t=this.isContentSlot(e)||this.isBelowPostSlot(e)||this.isRecipeSlot(e);return this.cpmThreshold.slotLocations?t&&this.cpmThreshold.slotLocations.includes(e.location):t}isValidSequence(e){if(this.isBelowPostSlot(e))return e.sequence&&e.sequence<=1;if(this.isRecipeSlot(e))return!0;{let t=this.cpmThreshold.slotLimit??9;return e.sequence&&e.sequence<=t}}isCPMSlot(e){return e.sequence&&e.sequence<=2&&this.isContentSlot(e)}isTargetSlot(e){return e.lazy&&!this.isCPMSlot(e)&&this.isValidSequence(e)&&this.isValidLocation(e)}_sortByCpm(e,t){return e.cpm===t.cpm?0:e.cpm<t.cpm?1:-1}getSlotCPM(e){if(e.prebidAdUnit&&e.prebidAdUnit.length&&e.prebidAdUnit[0].code){let t=this._prebidMethods.getBidResponsesForAdUnitCode(e.prebidAdUnit[0].code).bids.filter(t=>e.prebidAdUnit?.length&&t.adUnitCode===e.prebidAdUnit[0].code).sort(this._sortByCpm);if(t.length>0)return t[0].cpm}return 0}checkThresholdMet(e){if(!this.cpmThreshold.met&&this.isCPMSlot(e)){let t=this._dcsllMediumCPMExperiment.result?parseFloat(this._dcsllMediumCPMExperiment.result):5,n=this.getSlotCPM(e);n>=100?this.cpmThreshold={met:!0,slotLimit:null,slotLocations:null}:n>=t?this.cpmThreshold={met:!0,slotLimit:7,slotLocations:[H.Content]}:n>=4&&(this.cpmThreshold={met:!0,slotLimit:4,slotLocations:[H.Content]}),this.cpmThreshold.met&&this.loadRemainingSlots()}return this.cpmThreshold.met}loadRemainingSlots(){this._intersectionObserverManager.getObservedSlots().forEach(e=>{this.isTargetSlot(e)&&(this._useLazyLoadIntersectionObserversExperiment?(e.setSlotTargetingFlag(`dcsll`,[`true`]),e.lazyDisabled=!0,this._lazyLoadEventBus.lazyLoadDisabled.emit(e.id)):(this._intersectionObserverManager.unobserve(e),this._slotEventBus.displaySlot.emit(e.id)))})}lazyLoadingEnabledForSlot(e){if(!e||!e.googleTagSlot)E.error(`DynamicContentSlotLazyLoadingComponent`,`lazyLoadingEnabledForSlot`,`Slot not configured`);else if(this.enabled&&this.checkThresholdMet(e)&&this.isTargetSlot(e))return e.setSlotTargetingFlag(`dcsll`,[`true`]),e.lazyDisabled=!0,!1;return e.lazy}get enabled(){return this._config.adOptions.dynamicContentSlotLazyLoading}};Ys=w([D(`DynamicContentSlotLazyLoadingComponent`),S(),N(0,b(Hs)),N(1,b(Js)),N(2,b(J)),N(3,b(Us)),N(4,b(P)),N(5,b(Vs)),N(6,b(Ks))],Ys);let Xs=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`CFIpBidReqHoldout`,this._lookup=`CFIP_BRHO`}run(){return super.run()}};w([R()],Xs.prototype,`run`,null),Xs=w([S()],Xs);let Zs=class extends V{init(){this._key=`InterstitialConfig3`,this._lookup=`INTCFG3`}isEnabled(){let e=y.resolve(Gn)?.result!==`off`;return super.isEnabled()&&e}};Zs=w([S()],Zs);let Qs=class extends I{constructor(e,t){super(),this._interstitialConfigExperiment=e,this._adOptions=t,C(this,`_triggerKeyMap`,{unh:`unhideWindow`,bn:`navigationBar`,eoa:`endOfArticle`,ia:`inactivity`,bw:`backward`})}get enabled(){return this._interstitialConfigExperiment.result!==`off`&&(this._adOptions.desktopInterstitial||this._adOptions.mobileInterstitial)}start(){this._addAttributeToInternalLinks()}_isInternalLink(e){let t=new URL(window.location.href).hostname;return e.startsWith(`/`)||e.startsWith(`#`)||e.includes(t)||e.startsWith(`//${t}`)}_addAttributeToInternalLinks(){document.querySelectorAll(`a`).forEach(e=>{this._isInternalLink(e.href)&&e.setAttribute(`data-google-interstitial`,`false`)})}_setInterstitialConfig(e){if(e.googleTagSlot){let t=this._interstitialConfigExperiment.result,n={};if(t===`off`)Object.values(this._triggerKeyMap).forEach(e=>{n[e]=!0});else{let e=[];typeof t==`string`&&(e=t.split(`,`).map(e=>e.trim())),e.forEach(e=>{let t=this._triggerKeyMap[e];t&&(n[t]=!0)})}e.googleTagSlot.setConfig({interstitial:{triggers:n}})}}};Qs=w([x(),D(`InterstitialConfigComponent`),N(0,b(Zs)),N(1,b(Kn))],Qs);let X=class{constructor(){C(this,`impressionViewable`,new T),C(this,`slotOnload`,new T),C(this,`slotRenderEnded`,new T),C(this,`slotVisibilityChanged`,new T),C(this,`slotRequested`,new T),C(this,`slotResponseReceived`,new T),C(this,`started`,new T)}};X=w([S()],X);let $s=class extends qe{constructor(...e){super(...e),C(this,`identityApiReady`,new O),C(this,`identityApiDataSubmitted`,new T),C(this,`dataCaptured`,new O),C(this,`dataCapturedForIframe`,new O),C(this,`dataCapturedLegacy`,new O),C(this,`dataSentFromIframe`,new T),C(this,`iframeReady`,new O),C(this,`iframeDataSynced`,new O),C(this,`optableResolved`,new O),C(this,`optableIdentitiesCaptured`,new O),C(this,`optableTraitsCaptured`,new O),C(this,`optableRaptiveGraphResolved`,new O),C(this,`optableThirdPartyGraphResolved`,new O),C(this,`optableWaterfallCompleted`,new O),C(this,`optableUid1Captured`,new O),C(this,`optableResolveAnalytics`,new O)}};$s=w([S()],$s);let ec=class extends V{init(){this._key=`LazyLoadRenderViewport`,this._lookup=`LLRV`}run(){return super.run()}isEnabled(){let e=!y.resolve(Ks).isActive();return super.isEnabled()&&e}};w([R()],ec.prototype,`run`,null),ec=w([S()],ec);let tc=e=>`scheduler`in window&&window.scheduler&&window.scheduler.postTask?window.scheduler.postTask(()=>e(),{priority:`background`}):new Promise(t=>setTimeout(()=>t(e()),0));var nc=class{constructor(e,t,n,r,i){this._id=e,this._startTime=t,this._sequence=n,this._type=r,this._slotRenderEndedFired=i,C(this,`_pvk`,``),C(this,`_name`,void 0),C(this,`_adsloggerData`,{abgroup:`taskmonitor-log`,pubab:`taskmonitor-log`,sess:`taskmonitor-log`,pvk:this._pvk,hbho:[`taskmonitor-log`],vbho:[`taskmonitor-log`],spa:!1}),C(this,`_taskData`,null),C(this,`_metadata`,{});let a=window.adthrive;typeof a==`object`&&a&&`context`in a&&typeof a.context==`object`&&a.context!==null&&`pageviewKey`in a.context&&typeof a.context.pageviewKey==`string`&&(this._pvk=a.context.pageviewKey,this._adsloggerData.pvk=this._pvk),this._name=this._id.split(`_`)[0]}markEndTask(){let e=this._markEnd();this._slotRenderEndedFired?tc(()=>this._logData(e)):this._pushToAdThriveQueue(()=>{this._pushToGamQueue(()=>{window.googletag.pubads().addEventListener(`slotRenderEnded`,()=>{tc(()=>this._logData(e))})})})}_markEnd(){let e=Date.now();return performance.mark(`${this._id}-end`),performance.measure(`${this._id}`,`${this._id}-start`,`${this._id}-end`),{startTime:this._startTime,duration:e-this._startTime,name:this._id}}_logData(e){let t=this._createLogURL(e),n=new XMLHttpRequest;n.open(`get`,t,!0),n.send()}setTaskData(e){let{duration:t,startTime:n}=e;this._taskData={name:this._name,type:this._type,startTime:n,duration:t,sequence:this._sequence,metadata:this._metadata}}_createLogURL(e){this.setTaskData(e);let t=[this._taskData===null?{}:this._taskData,this._adsloggerData];return`https://logger.adthrive.com/event?${[`siteId=${encodeURIComponent(window.adthrive.siteAds.siteId||``)}`,`siteName=${encodeURIComponent(window.adthrive.siteAds.siteName||``)}`,`bucket=${encodeURIComponent(window.adthrive.bucket||``)}`,`branch=${encodeURIComponent(window.adthrive.branch||``)}`,`deployment=${encodeURIComponent(window.adthrive.deployment||``)}`,`message=TaskMonitor%3A%3A_logData`,`pageurl=${encodeURIComponent(window.location.origin+window.location.pathname)}`,`body=${encodeURIComponent(JSON.stringify(t))}`].join(`&`)}`}addMetadata(e){Object.keys(e).forEach(t=>{this._metadata[t]=e[t]})}_pushToAdThriveQueue(e){let t=window.adthrive;t&&t.cmd&&t.cmd.push(e)}_pushToGamQueue(e){let t=window.googletag;t&&t.cmd&&t.cmd.push(e)}};let rc=new class{constructor(){C(this,`_taskIdCounters`,new Map),C(this,`_enabled`,null),C(this,`_slotRenderEndedFired`,!1),window.adthrive&&this._pushToAdThriveQueue(()=>{this._pushToGamQueue(()=>{window.googletag.pubads().addEventListener(`slotRenderEnded`,()=>{this._slotRenderEndedFired=!0})})})}markStartTask(e,t,n=!1){if(n||this.enabled){let n=`adt-${t.join(`-`)}`,r=(this._taskIdCounters.get(n)),i=r===void 0?0:r+1,a=`${n}_${i}`,o=(this._markStart(a));return this._taskIdCounters.set(n,i),new nc(a,o,i,e,this._slotRenderEndedFired)}else return{markEndTask:()=>{},addMetadata:()=>{}}}_markStart(e){return performance.mark(`${e}-start`),Date.now()}get enabled(){if(this._enabled===null){let e=!!(Vt().get(`tpm`)),t=(this._determineDesiredSiteLevelLoggingRate());this._enabled=new rn(t).get()||e}return this._enabled}_pushToAdThriveQueue(e){let t=window.adthrive;t&&t.cmd&&t.cmd.push(e)}_pushToGamQueue(e){let t=window.googletag;t&&t.cmd&&t.cmd.push(e)}_determineDesiredSiteLevelLoggingRate(){return 0}},ic=e=>`isAmazon`in e||`amzniid`in e||`amzniid_sp`in e,ac=e=>e.location===H.Interstitial||e.location===H.Interstitial_1,oc=e=>{let t=e.filter(e=>e.adUnitCode.includes(`AdThrive_Interstitial`));if(t.length!==0)return t.reduce((e,t)=>t.cpm>e.cpm?t:e,t[0])},sc=(e,t)=>{if(t?.winningBid)return t.winningBid;if(e.servedPrebidBidResponse)return e.servedPrebidBidResponse;if(t?.prebidBids)return oc(t.prebidBids)},cc=e=>{let t=e;return t.bidderCode===G.Kargo||t.bidder===G.Kargo},lc=(e,t)=>{if(t?.logContext,!ac(e))return!1;let n=sc(e,t);return!n||ic(n)?!1:cc(n)},uc=e=>e!==void 0,dc=(e,t)=>{if(!e||!e?.metadata?.capturedOn)return!1;try{if(e){let n=new Date(e.metadata.capturedOn).getTime();return(new Date().getTime()-n)/(1e3*60*60)>24?!1:!!t}else return!1}catch(e){return E.error(`isCloudFlareIpCurrent`,`shouldPassCloudFlareIp`,`Error checking session validity`,e),!1}};var fc;let Z=fc=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g){this._config=e,this._context=t,this._bootstrapEventBus=n,this._consentEventBus=r,this._slots=i,this._prebidMethods=a,this._demandChain=o,this._dynamicContentSlotLazyLoadingComponent=s,this._interstitialConfigComponent=c,this._identityEventBus=l,this._slotEventBus=u,this._eventBus=d,this._bootstrapConfig=f,this._cloudflareIpBidReqExpHo=p,this._lazyLoadWithIntersectionObserversExperiment=m,this._lazyLoadRenderViewportDistanceExperiment=h,this._kargoSpotlightExperiment=g,C(this,`_adExpansionEnabled`,void 0),this._adExpansionEnabled=z()?this._config.adOptions.contentAdXExpansionMobile:this._config.adOptions.contentAdXExpansionDesktop}init(){fc.pushToQueue(()=>{let e=window.googletag.pubads();e.setSafeFrameConfig({sandbox:!0,allowOverlayExpansion:!0,allowPushExpansion:!0}),e.set(`page_url`,this._context.pageUrl),e.enableSingleRequest(),e.disableInitialLoad(),e.setPrivacySettings({childDirectedTreatment:ur()}),this._configureIpAddress(),this._addGamEventListeners(),this._bootstrapEventBus.libraryLoadFailed.on(({bootstrapType:e})=>{e===ot.Prebid&&this.setTargetingFlag(`pbjs`,[`failed`])},{handleEventsAlreadyEmitted:!0}),this._config.act25.required&&this._consentEventBus.act25consentCaptured.on(e=>{this.setNonPersonalizedAds(!e)},{handleEventsAlreadyEmitted:!0}),this._config.usCMP.required&&this._consentEventBus.usCmpConsentCaptured.on(e=>{this.setNonPersonalizedAds(!e)},{handleEventsAlreadyEmitted:!0}),this._identityEventBus.optableResolved.on(e=>this._setOptableGamTargeting(e),{handleEventsAlreadyEmitted:!0}),this._identityEventBus.optableResolveAnalytics.on(e=>this.setTargetingFlag(`opt_reslv`,[e]),{handleEventsAlreadyEmitted:!0}),cn.enabledFeatureRolloutIds&&cn.enabledFeatureRolloutIds.length&&this.setTargetingFlag(`fr`,cn.enabledFeatureRolloutIds.map(e=>e.toString()))}),this.setTargetingFlag(`tpme`,[rc.enabled.toString()]),this._setInterstitialConfigTargeting()}start(){fc.pushToQueue(()=>{window.googletag.enableServices();try{this._eventBus.started.emit()}catch(e){E.error(`GoogleAdManager`,`start`,`started`,e)}})}static pushToQueue(e){window.googletag.cmd.push(e)}waitForQueue(){return new Promise(e=>{window.googletag.cmd.push(()=>{e(!0)})})}setTargeting(e){let t=(Array.isArray(e)?e:[e]).filter(e=>!(!e.value||!e.value.length));for(let e of t)e&&fc.pushToQueue(()=>{window.googletag.pubads().setTargeting(e.key,e.value)})}setSlotTargeting(e,t){let n=Array.isArray(e)?e:[e];for(let e of n)e&&fc.pushToQueue(()=>{t.setTargeting(e.key,Array.isArray(e.value)?e.value.join(`,`):e.value)})}setTargetingFlag(e,t,n=!1){let r=()=>{let r=window.googletag.pubads().getTargeting(`flag`).filter(t=>{let[r]=t.split(`:`);return!n||r!==e});this.setTargeting({key:`flag`,value:[...r,...t.map(t=>`${e}:${t}`)]})};t&&t.length>0&&fc.pushToQueue(()=>r())}getTargeting(){return window.googletag.pubads().getTargetingKeys().map(e=>({key:e,value:window.googletag.pubads().getTargeting(e)}))}getTargetingValuesForKey(e){return window.googletag.pubads().getTargeting(e)}getTargetingValuesForFlag(e){let t=[],n=this.getTargetingValuesForKey(`flag`).filter(t=>{let[n]=t.split(`:`);return n===e});return n.length>0&&(t=n.map(e=>e.split(`:`)[1])),t}getTargetingMap(){let e=window.googletag.pubads();return e.getTargetingKeys().reduce((t,n)=>(t[n]=e.getTargeting(n),t),{})}clearTargetingForKey(e){fc.pushToQueue(()=>{window.googletag.pubads().clearTargeting(e)})}_getPathname(e,t){return e.thirdPartyAdUnitName&&t?e.thirdPartyAdUnitName:e.location===H.Content&&e.sequence&&e.sequence>9||e.location===H.Below_Post&&e.sequence&&e.sequence>1?e.location:e.location===H.Sidebar&&e.sequence&&e.sequence>9?e.name.replace(/\d+/,`9`):e.location===H.Recipe&&e.sequence&&e.sequence>5?e.name.replace(/\d+/,`2`):e.name}defineSlots(e){let{id:t}=this._config.site,{account:n,prefix:r}=this._config.gam,i=this._config.gam.isThirdPartyGam;return e.map(e=>{if(i&&!e.thirdPartyAdUnitName){E.error(`GoogleAdManager`,`defineSlots`,`Ad unit name undefined for third party GAM slot.`);return}let a=this._getPathname(e,i),o=e.thirdPartyAdUnitName&&i?``:`${r}_`,s=`/${n}/${o}${a}/${t}`,c=e.location===H.Video_StickyOutstream?[...e.sizes]:[...e.sizes,`fluid`];return this._setupSlot(e,s,c),e}).filter(uc)}async displaySlots(e){await this.waitForQueue();let t=window.googletag.pubads();window.googletag&&!window.googletag.pubadsReady&&E.error(`GoogleAdManager`,`displaySlots`,Error(`Unexpected googletag.pubadsReady: ${window.googletag.pubadsReady}`));let n=[];await this._prebidMethods.waitForQueue().then(e=>{e===!0&&(n=this._prebidMethods.getAllPrebidWinningBids())});for(let r of e){let i=r.location===H.Video_StickyOutstream,a=this._demandChain.getBidWithBsidForSlot(r,n),o;if(a&&(o=this._demandChain.getLastBsid(a.meta),o&&r.googleTagSlot.setTargeting(this._config.prebid.targetingKeyMap.BSID,o)),!this._lazyLoadWithIntersectionObserversExperiment.isActive()){let e=this._dynamicContentSlotLazyLoadingComponent.lazyLoadingEnabledForSlot(r)?this._config.lazyLoad.googleLazyLoadSettings.gam:this._config.lazyLoad.googleLazyLoadSettings.disabled,n=this._lazyLoadRenderViewportDistanceExperiment.result;if(n&&r.lazy){let r={...e,renderMarginPercent:e.renderMarginPercent*n,mobileScaling:1};t.enableLazyLoad(r)}else t.enableLazyLoad(e)}await this._emitBeforeRefreshSlots(e),!lc(r,{prebidBids:n,logContext:`GoogleAdManager`})&&(!i||this._hasBids(r,{[this._config.prebid.targetingKeyMap.BSID]:o}))?t.refresh([r.googleTagSlot]):(r.unfilled=!0,await this._emitNoBidResponses(r))}}refreshSlots(e){fc.pushToQueue(async()=>{await this._emitBeforeRefreshSlots(e);let t=[],n=[];e.forEach(e=>{!lc(e,{logContext:`GoogleAdManager`})&&(e.location!==H.Video_StickyOutstream||this._hasBids(e))?t.push(e):(e.unfilled=!0,n.push(e))}),t.length&&(t.forEach(e=>e.addRequestTypeSlotFlag(this._config.prebid.targetingKeyMap.AD_ID)),window.googletag.pubads().refresh(t.map(e=>e.googleTagSlot)));for(let e of n)await this._emitNoBidResponses(e)})}_emitNoBidResponses(e){return this._slotEventBus.noBidResponses.legacyEmit(e.id)}_hasBids(e,t){let n=e.googleTagSlot;if(!n)return;let r=n.getTargeting(`amz_pb`).length||n.getTargeting(`amz_pb_sp`).length,i=n.getTargeting(this._config.prebid.targetingKeyMap.AD_ID).length||r;return i||E.event(`GoogleAdManager`,`_hasBids`,{name:e.name,nref:e.refreshCount,...t}),!!i}async _emitBeforeRefreshSlots(e){let t=e.map(e=>e.id);await this._slotEventBus.beforeGoogleAdManagerRefreshSlots.legacyEmit(t),await this._slotEventBus.addRangeSlotTargeting.legacyEmit(t)}clearSlots(e){fc.pushToQueue(()=>{let t=e.map(e=>e.googleTagSlot);window.googletag.pubads().clear(t)})}destroySlots(e){fc.pushToQueue(()=>{let t=e.map(e=>e.googleTagSlot);window.googletag.destroySlots(t)})}setIdAsPPID(e){fc.pushToQueue(()=>{window.googletag.pubads().setPublisherProvidedId(e)})}setNonPersonalizedAds(e){fc.pushToQueue(()=>{window.googletag.pubads().setPrivacySettings({nonPersonalizedAds:e})})}_addGamEventListeners(){this._addEventListener(this._eventBus.impressionViewable,`impressionViewable`),this._addEventListener(this._eventBus.slotOnload,`slotOnload`),this._addEventListener(this._eventBus.slotRenderEnded,`slotRenderEnded`),this._addEventListener(this._eventBus.slotVisibilityChanged,`slotVisibilityChanged`),this._addEventListener(this._eventBus.slotRequested,`slotRequested`),this._addEventListener(this._eventBus.slotResponseReceived,`slotResponseReceived`)}_addEventListener(e,t){fc.pushToQueue(()=>{window.googletag.pubads().addEventListener(t,n=>{let r=rc.markStartTask(`microtask`,[`GoogleAdManager`,t]),i=this._slots.get(n.slot.getSlotElementId());if(i)try{e.emit({slotId:i.id,event:n})}catch(e){E.error(`GoogleAdManager`,`addEventListener`,`emit`,e)}r.markEndTask()})})}_setInterstitialConfigTargeting(){let e=y.resolve(Zs).result,t=e===`off`?`all`:e;t&&this.setTargeting({key:`intcfg`,value:[t]})}_setOptableGamTargeting(e){let{clusterCount:t,hemCount:n,accuracyResult:r,traits:i,recencyGroup:a}=e;this.setTargetingFlag(`n_clust`,[`${t}`]),this.setTargetingFlag(`n_hem`,[`${n}`]),this.setTargetingFlag(`g_rec`,[a]),r.status===`hem-found`?this.setTargetingFlag(`rog_ha`,[r.matchingClusterIndex.toString()]):r.status===`hem-not-found`&&this.setTargetingFlag(`rog_ha`,[`-1`]),this._setOptableGamTargetingForTraits(i)}_setOptableGamTargetingForTraits(e){[{key:`lastSeen`,targetingName:`td_rec`},{key:`percentile`,targetingName:`td_perc`},{key:`hemSources`,targetingName:`oemsrc`}].forEach(t=>{let{key:n,targetingName:r}=t,i=e[n];if(i)switch(i){case`true`:this.setTargetingFlag(r,[`t`]);break;case`false`:this.setTargetingFlag(r,[`f`]);break;default:this.setTargetingFlag(r,Array.isArray(i)?i.map(e=>e.toString()):[i.toString()]);break}})}_setupSlot(e,t,n){if(this._bootstrapConfig.gptLibFailedToLoad)return;let r=window.googletag.pubads();if(e.googleTagSlot=e.location===H.Interstitial?window.googletag.defineOutOfPageSlot(t,window.googletag.enums.OutOfPageFormat.INTERSTITIAL):window.googletag.defineSlot(t,n,e.element.id),!e.googleTagSlot){E.error(`GoogleAdManager`,`defineSlots`,`Duplicate`,t);return}if(e.googleTagSlot.addService(r).setTargeting(`location`,e.location).setTargeting(`sequence`,String(e.sequence)).setTargeting(`id`,e.id),e.googleTagSlotReady=!0,e.googleTagSlotReadyEmitter.emit(),(e.location===H.Content||e.location===H.Below_Post)&&e.googleTagSlot.setConfig({adExpansion:{enabled:this._adExpansionEnabled}}),this._interstitialConfigComponent.enabled&&(e.location===H.Interstitial||e.location===H.Interstitial_1)&&this._interstitialConfigComponent._setInterstitialConfig(e),(e.sequence===1&&e.isAboveTheFold||e.location===H.Footer)&&e.googleTagSlot.setTargeting(`ATF`,`true`),e.isSticky&&e.location!==H.Video_StickyOutstream&&e.googleTagSlot.setTargeting(`sticky`,`true`),e.special&&e.special.length>0&&e.googleTagSlot.setTargeting(`special`,e.special),e.location===`Sponsor_Tile`&&e.googleTagSlot.setCollapseEmptyDiv(!0,!0),e.location.includes(`Native`)&&e.googleTagSlot.setCollapseEmptyDiv(!0),r.isInitialLoadDisabled()){let t=e.location===H.Interstitial||e.location===H.Interstitial_1,n=this._kargoSpotlightExperiment.result&&!cn.isRolloutEnabled(`disable-kargo-spotlight`);if(t&&n)return;window.googletag.display(e.googleTagSlot)}}_configureIpAddress(){if(!this._cloudflareIpBidReqExpHo.result||this._config.ccpa.userOptedOut||this._config.gdpr.enabled)return;let e=this._config.user.rcid?.metadata.clientIp;if(!(!e||!dc(this._config.user.rcid,!!this._context.sessionKey)))try{window.googletag.pubads().set(`ipAddress`,e)}catch(e){E.error(`GoogleAdManager`,`_configureIpAddress`,`IP address available but failed to configure IP address`,e)}}};Z=fc=w([D(`GoogleAdManager`),S(),N(0,b(J)),N(1,b(W)),N(2,b(st)),N(3,b(un)),N(4,b(Y)),N(5,b(P)),N(6,b(rt)),N(7,b(Ys)),N(8,b(Qs)),N(9,b($s)),N(10,b(Hs)),N(11,b(X)),N(12,b(on)),N(13,b(Xs)),N(14,b(Ks)),N(15,b(ec)),N(16,b(En))],Z);let pc=class extends qe{constructor(...e){super(...e),C(this,`videoAdUnitAdded`,new T),C(this,`videoPlayerAdded`,new T),C(this,`videoCollapsed`,new T),C(this,`videoUnCollapsed`,new T),C(this,`preRequestVideoBids`,new T),C(this,`requestingVideoBids`,new T),C(this,`buildingVastAdURL`,new T),C(this,`addAPStagSlotBidResponse`,new T),C(this,`topCenterVideoClosed`,new T),C(this,`topCenterVideoCollapsed`,new T),C(this,`topCenterVideoUnCollapsed`,new T),C(this,`amazonVideoBidResponseReceived`,new T),C(this,`auctionsCompleted`,new T),C(this,`settingsUpdated`,new T),C(this,`triggerRenderVideoAdOutsideGam`,new T),C(this,`videoAdRenderingOutsideGam`,new T)}};pc=w([S()],pc);let mc=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`ViewportSampling`,this._lookup=`VPSM`}};mc=w([S()],mc);let hc=e=>{if(!Number.isFinite(e))return``;let t=``;return t=e<=.04?`00.00_00.04`:e<=3?`00.05_03.00`:e<=5?`03.05_05.00`:e<=10?`05.05_10.00`:`10.10_100.00`,t},gc=()=>new Promise(e=>setTimeout(e,0)),_c=()=>window.scheduler.yield(),vc=(()=>window.scheduler&&`yield`in window.scheduler&&typeof window.scheduler.yield==`function`?_c:gc)(),yc=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`AYIIQEnrich`,this._lookup=`AYIIQ_OFF`}};yc=w([S()],yc);let bc=class extends qe{constructor(){super(),C(this,`topicsReceived`,new O)}};bc=w([S()],bc);let xc=class extends qe{constructor(...e){super(...e),C(this,`routeChanged`,new T),C(this,`resetCompleted`,new T)}};xc=w([S()],xc);let Sc=[50,60,70,80],Cc=e=>z()&&e?.location===H.Content&&e?.refreshCount===1?60:80,wc=e=>e?.refreshCount>0?Cc(e):e?.viewability?Math.min(Math.floor(e?.viewability*100/10)*10,80):0,Tc=e=>Sc.includes(e)?e:0,Ec=e=>/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)?`IPv4`:/^((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){1,7}:)|(([0-9A-Fa-f]{1,4}:){1,6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,5}(:[0-9A-Fa-f]{1,4}){1,2})|(([0-9A-Fa-f]{1,4}:){1,4}(:[0-9A-Fa-f]{1,4}){1,3})|(([0-9A-Fa-f]{1,4}:){1,3}(:[0-9A-Fa-f]{1,4}){1,4})|(([0-9A-Fa-f]{1,4}:){1,2}(:[0-9A-Fa-f]{1,4}){1,5})|([0-9A-Fa-f]{1,4}:((:[0-9A-Fa-f]{1,4}){1,6}))|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4}))$/.test(e)||e===`::`?`IPv6`:`Invalid`,Dc={Crafts:{id:`540522cb5c0eb47de4152801`,iabCode:`IAB9-2`,iabCat:`Arts & Crafts`},Family_and_Parenting:{id:`540522cb5c0eb47de4152802`,iabCode:`IAB9-2`,iabCat:`Family & Parenting`},Personal_Finance:{id:`540522cb5c0eb47de4152803`,iabCode:`IAB13`,iabCat:`Personal Finance`},Food:{id:`540522cb5c0eb47de4152804`,iabCode:`IAB8`,iabCat:`Food & Drink`},Home_Decor_and_Design:{id:`540522cb5c0eb47de4152807`,iabCode:`IAB10`,iabCat:`Home & Garden`},Sports:{id:`540522cb5c0eb47de4152809`,iabCode:`IAB17`,iabCat:`Sports`},Entertainment:{id:`55d374253d3884315c3d0bca`,iabCode:`IAB1`,iabCat:`Arts & Entertainment`},Gardening:{id:`5a4fab0ce6ec1959fd678d46`,iabCode:`IAB10-4`,iabCat:`Gardening`},Mens_Style_and_Grooming:{id:`5a4fab1de6ec1959fd678d47`,iabCode:`IAB18`,iabCat:`Style & Fashion`},Pets:{id:`5a4fab2ee6ec1959fd678d49`,iabCode:`IAB16`,iabCat:`Pets`},Tech:{id:`5a4fab38e6ec1959fd678d4a`,iabCode:`IAB19`,iabCat:`Technology & Computing`},Wedding:{id:`5a4fab42e6ec1959fd678d4b`,iabCode:`IAB14-7`,iabCat:`Weddings`},Professional_Finance:{id:`5aa2f3a7fdf4d60603ab3a65`,iabCode:`IAB13`,iabCat:`Personal Finance`},Deals:{id:`5c05a3d19e385c167333449c`,iabCode:`IAB13`,iabCat:`Personal Finance`},Vegetarian:{id:`5c113968b4fc765c1cbd3a54`,iabCode:`IAB8-17`,iabCat:`Vegetarian`},Auto:{id:`5c11399bb4fc765c1cbd3a91`,iabCode:`IAB2`,iabCat:`Automotive`},Fitness:{id:`5e5571361237cb073f4c414a`,iabCode:`IAB7-1`,iabCat:`Exercise`},Gaming:{id:`615cb84741a24b73b7c34703`,iabCode:`IAB9-30`,iabCat:`Video & Computer Games`},Beauty:{id:`540522cb5c0eb47de4152800`,iabCode:`IAB18-1`,iabCat:`Beauty`},Health_and_Wellness:{id:`540522cb5c0eb47de4152806`,iabCode:`IAB7`,iabCat:`Health & Fitness`},Clean_Eating:{id:`58ebb95fb628206640771353`,iabCode:`IAB8-12`,iabCat:`Health/Lowfat Cooking`},Natural_Parenting:{id:`58ebba85b628206640771355`,iabCode:`IAB6`,iabCat:`Family & Parenting`},Baby:{id:`58ebba8bb628206640771356`,iabCode:`IAB6-2`,iabCat:`Babies & Toddlers`},Pregnancy:{id:`58ebba92b628206640771357`,iabCode:`IAB6-7`,iabCat:`Pregnancy`},Toddler:{id:`58ebba9ab628206640771358`,iabCode:`IAB6-2`,iabCat:`Babies & Toddlers`},Womens_Style:{id:`58ebbaccb628206640771359`,iabCode:`IAB18`,iabCat:`Style & Fashion`},Travel:{id:`58ebbafbb62820664077135a`,iabCode:`IAB20`,iabCat:`Travel`},"History_&_Culture":{iabCode:`IAB14`,iabCat:`Society`},"Arts_&_Creativity":{iabCode:`IAB1`,iabCat:`Arts & Entertainment`},Education:{iabCode:`IAB5`,iabCat:`Education`},Business:{iabCode:`IAB3`,iabCat:`Business`},"Hobbies_&_Interests":{iabCode:`IAB9`,iabCat:`Hobbies & Interests`},Science:{iabCode:`IAB15`,iabCat:`Science`},"Religion_&_Spirituality":{iabCode:`IAB23`,iabCat:`Religion & Spirituality`},Shopping:{iabCode:`IAB22`,iabCat:`Shopping`},"Law,_Gov't_&_Politics":{iabCode:`IAB11`,iabCat:`Law, Gov't & Politics`},Careers:{iabCode:`IAB4`,iabCat:`Careers`},Real_Estate:{iabCode:`IAB21`,iabCat:`Real Estate`}};function Oc(){this.__data__=[],this.size=0}var kc=Oc;function Ac(e,t){return e===t||e!==e&&t!==t}var jc=Ac;function Mc(e,t){for(var n=e.length;n--;)if(jc(e[n][0],t))return n;return-1}var Nc=Mc,Pc=Array.prototype.splice;function Fc(e){var t=this.__data__,n=Nc(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Pc.call(t,n,1),--this.size,!0}var Ic=Fc;function Lc(e){var t=this.__data__,n=Nc(t,e);return n<0?void 0:t[n][1]}var Rc=Lc;function zc(e){return Nc(this.__data__,e)>-1}var Bc=zc;function Vc(e,t){var n=this.__data__,r=Nc(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Hc=Vc;function Uc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Uc.prototype.clear=kc,Uc.prototype.delete=Ic,Uc.prototype.get=Rc,Uc.prototype.has=Bc,Uc.prototype.set=Hc;var Wc=Uc;function Gc(){this.__data__=new Wc,this.size=0}var Kc=Gc;function qc(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Jc=qc;function Yc(e){return this.__data__.get(e)}var Xc=Yc;function Zc(e){return this.__data__.has(e)}var Qc=Zc,$c=`[object AsyncFunction]`,el=`[object Function]`,tl=`[object GeneratorFunction]`,nl=`[object Proxy]`;function rl(e){if(!Ra(e))return!1;var t=lo(e);return t==el||t==tl||t==$c||t==nl}var il=rl,al=Va[`__core-js_shared__`],ol=function(){var e=/[^.]+$/.exec(al&&al.keys&&al.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}();function sl(e){return!!ol&&ol in e}var cl=sl,ll=Function.prototype.toString;function ul(e){if(e!=null){try{return ll.call(e)}catch{}try{return e+``}catch{}}return``}var dl=ul,fl=/[\\^$.*+?()[\]{}|]/g,pl=/^\[object .+?Constructor\]$/,ml=Function.prototype,hl=Object.prototype,gl=ml.toString,_l=hl.hasOwnProperty,vl=RegExp(`^`+gl.call(_l).replace(fl,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`);function yl(e){return!Ra(e)||cl(e)?!1:(il(e)?vl:pl).test(dl(e))}var bl=yl;function xl(e,t){return e?.[t]}var Sl=xl;function Cl(e,t){var n=Sl(e,t);return bl(n)?n:void 0}var wl=Cl,Tl=wl(Va,`Map`),El=wl(Object,`create`);function Dl(){this.__data__=El?El(null):{},this.size=0}var Ol=Dl;function kl(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Al=kl,jl=`__lodash_hash_undefined__`,Ml=Object.prototype.hasOwnProperty;function Nl(e){var t=this.__data__;if(El){var n=t[e];return n===jl?void 0:n}return Ml.call(t,e)?t[e]:void 0}var Pl=Nl,Fl=Object.prototype.hasOwnProperty;function Il(e){var t=this.__data__;return El?t[e]!==void 0:Fl.call(t,e)}var Ll=Il,Rl=`__lodash_hash_undefined__`;function zl(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=El&&t===void 0?Rl:t,this}var Bl=zl;function Vl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Vl.prototype.clear=Ol,Vl.prototype.delete=Al,Vl.prototype.get=Pl,Vl.prototype.has=Ll,Vl.prototype.set=Bl;var Hl=Vl;function Ul(){this.size=0,this.__data__={hash:new Hl,map:new(Tl||Wc),string:new Hl}}var Wl=Ul;function Gl(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}var Kl=Gl;function ql(e,t){var n=e.__data__;return Kl(t)?n[typeof t==`string`?`string`:`hash`]:n.map}var Jl=ql;function Yl(e){var t=Jl(this,e).delete(e);return this.size-=t?1:0,t}var Xl=Yl;function Zl(e){return Jl(this,e).get(e)}var Ql=Zl;function $l(e){return Jl(this,e).has(e)}var eu=$l;function tu(e,t){var n=Jl(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var nu=tu;function ru(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ru.prototype.clear=Wl,ru.prototype.delete=Xl,ru.prototype.get=Ql,ru.prototype.has=eu,ru.prototype.set=nu;var iu=ru,au=200;function ou(e,t){var n=this.__data__;if(n instanceof Wc){var r=n.__data__;if(!Tl||r.length<au-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new iu(r)}return n.set(e,t),this.size=n.size,this}var su=ou;function cu(e){this.size=(this.__data__=new Wc(e)).size}cu.prototype.clear=Kc,cu.prototype.delete=Jc,cu.prototype.get=Xc,cu.prototype.has=Qc,cu.prototype.set=su;var lu=cu,uu=function(){try{var e=wl(Object,`defineProperty`);return e({},``,{}),e}catch{}}();function du(e,t,n){t==`__proto__`&&uu?uu(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var fu=du;function pu(e,t,n){(n!==void 0&&!jc(e[t],n)||n===void 0&&!(t in e))&&fu(e,t,n)}var mu=pu;function hu(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(n(a[c],c,a)===!1)break}return t}}var gu=hu(),_u=typeof exports==`object`&&exports&&!exports.nodeType&&exports,vu=_u&&typeof module==`object`&&module&&!module.nodeType&&module,yu=vu&&vu.exports===_u?Va.Buffer:void 0,bu=yu?yu.allocUnsafe:void 0;function xu(e,t){if(t)return e.slice();var n=e.length,r=bu?bu(n):new e.constructor(n);return e.copy(r),r}var Su=xu,Cu=Va.Uint8Array;function wu(e){var t=new e.constructor(e.byteLength);return new Cu(t).set(new Cu(e)),t}var Tu=wu;function Eu(e,t){var n=t?Tu(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Du=Eu;function Ou(e,t){var n=-1,r=e.length;for(t||=Array(r);++n<r;)t[n]=e[n];return t}var ku=Ou,Au=Object.create,ju=function(){function e(){}return function(t){if(!Ra(t))return{};if(Au)return Au(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Mu(e,t){return function(n){return e(t(n))}}var Nu=Mu,Pu=Nu(Object.getPrototypeOf,Object),Fu=Object.prototype;function Iu(e){var t=e&&e.constructor,n=typeof t==`function`&&t.prototype||Fu;return e===n}var Lu=Iu;function Ru(e){return typeof e.constructor==`function`&&!Lu(e)?ju(Pu(e)):{}}var zu=Ru,Bu=`[object Arguments]`;function Vu(e){return fo(e)&&lo(e)==Bu}var Hu=Vu,Uu=Object.prototype,Wu=Uu.hasOwnProperty,Gu=Uu.propertyIsEnumerable,Ku=Hu(function(){return arguments}())?Hu:function(e){return fo(e)&&Wu.call(e,`callee`)&&!Gu.call(e,`callee`)},qu=Array.isArray,Ju=9007199254740991;function Yu(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=Ju}var Xu=Yu;function Zu(e){return e!=null&&Xu(e.length)&&!il(e)}var Qu=Zu;function $u(e){return fo(e)&&Qu(e)}var ed=$u;function td(){return!1}var nd=td,rd=typeof exports==`object`&&exports&&!exports.nodeType&&exports,id=rd&&typeof module==`object`&&module&&!module.nodeType&&module,ad=id&&id.exports===rd?Va.Buffer:void 0,od=(ad?ad.isBuffer:void 0)||nd,sd=`[object Object]`,cd=Function.prototype,ld=Object.prototype,ud=cd.toString,dd=ld.hasOwnProperty,fd=ud.call(Object);function pd(e){if(!fo(e)||lo(e)!=sd)return!1;var t=Pu(e);if(t===null)return!0;var n=dd.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&ud.call(n)==fd}var md=pd,hd=`[object Arguments]`,gd=`[object Array]`,_d=`[object Boolean]`,vd=`[object Date]`,yd=`[object Error]`,bd=`[object Function]`,xd=`[object Map]`,Sd=`[object Number]`,Cd=`[object Object]`,wd=`[object RegExp]`,Td=`[object Set]`,Ed=`[object String]`,Dd=`[object WeakMap]`,Od=`[object ArrayBuffer]`,kd=`[object DataView]`,Ad=`[object Float32Array]`,jd=`[object Float64Array]`,Md=`[object Int8Array]`,Nd=`[object Int16Array]`,Pd=`[object Int32Array]`,Fd=`[object Uint8Array]`,Id=`[object Uint8ClampedArray]`,Ld=`[object Uint16Array]`,Rd=`[object Uint32Array]`,zd={};zd[Ad]=zd[jd]=zd[Md]=zd[Nd]=zd[Pd]=zd[Fd]=zd[Id]=zd[Ld]=zd[Rd]=!0,zd[hd]=zd[gd]=zd[Od]=zd[_d]=zd[kd]=zd[vd]=zd[yd]=zd[bd]=zd[xd]=zd[Sd]=zd[Cd]=zd[wd]=zd[Td]=zd[Ed]=zd[Dd]=!1;function Bd(e){return fo(e)&&Xu(e.length)&&!!zd[lo(e)]}var Vd=Bd;function Hd(e){return function(t){return e(t)}}var Ud=Hd,Wd=typeof exports==`object`&&exports&&!exports.nodeType&&exports,Gd=Wd&&typeof module==`object`&&module&&!module.nodeType&&module,Kd=Gd&&Gd.exports===Wd&&za.process,qd=function(){try{return Gd&&Gd.require&&Gd.require(`util`).types||Kd&&Kd.binding&&Kd.binding(`util`)}catch{}}(),Jd=qd&&qd.isTypedArray,Yd=Jd?Ud(Jd):Vd;function Xd(e,t){if(!(t===`constructor`&&typeof e[t]==`function`)&&t!=`__proto__`)return e[t]}var Zd=Xd,Qd=Object.prototype.hasOwnProperty;function $d(e,t,n){var r=e[t];(!(Qd.call(e,t)&&jc(r,n))||n===void 0&&!(t in e))&&fu(e,t,n)}var ef=$d;function tf(e,t,n,r){var i=!n;n||={};for(var a=-1,o=t.length;++a<o;){var s=t[a],c=r?r(n[s],e[s],s,n,e):void 0;c===void 0&&(c=e[s]),i?fu(n,s,c):ef(n,s,c)}return n}var nf=tf;function rf(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var af=rf,sf=9007199254740991,cf=/^(?:0|[1-9]\d*)$/;function lf(e,t){var n=typeof e;return t??=sf,!!t&&(n==`number`||n!=`symbol`&&cf.test(e))&&e>-1&&e%1==0&&e<t}var uf=lf,df=Object.prototype.hasOwnProperty;function ff(e,t){var n=qu(e),r=!n&&Ku(e),i=!n&&!r&&od(e),a=!n&&!r&&!i&&Yd(e),o=n||r||i||a,s=o?af(e.length,String):[],c=s.length;for(var l in e)(t||df.call(e,l))&&!(o&&(l==`length`||i&&(l==`offset`||l==`parent`)||a&&(l==`buffer`||l==`byteLength`||l==`byteOffset`)||uf(l,c)))&&s.push(l);return s}var pf=ff;function mf(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var hf=mf,gf=Object.prototype.hasOwnProperty;function _f(e){if(!Ra(e))return hf(e);var t=Lu(e),n=[];for(var r in e)r==`constructor`&&(t||!gf.call(e,r))||n.push(r);return n}var vf=_f;function yf(e){return Qu(e)?pf(e,!0):vf(e)}var bf=yf;function xf(e){return nf(e,bf(e))}var Sf=xf;function Cf(e,t,n,r,i,a,o){var s=Zd(e,n),c=Zd(t,n),l=o.get(c);if(l){mu(e,n,l);return}var u=a?a(s,c,n+``,e,t,o):void 0,d=u===void 0;if(d){var f=qu(c),p=!f&&od(c),m=!f&&!p&&Yd(c);u=c,f||p||m?qu(s)?u=s:ed(s)?u=ku(s):p?(d=!1,u=Su(c,!0)):m?(d=!1,u=Du(c,!0)):u=[]:md(c)||Ku(c)?(u=s,Ku(s)?u=Sf(s):(!Ra(s)||il(s))&&(u=zu(c))):d=!1}d&&(o.set(c,u),i(u,c,r,a,o),o.delete(c)),mu(e,n,u)}var wf=Cf;function Tf(e,t,n,r,i){e!==t&&gu(t,function(a,o){if(i||=new lu,Ra(a))wf(e,t,o,n,Tf,r,i);else{var s=r?r(Zd(e,o),a,o+``,e,t,i):void 0;s===void 0&&(s=a),mu(e,o,s)}},bf)}var Ef=Tf;function Df(e){return e}var Of=Df;function kf(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Af=kf,jf=Math.max;function Mf(e,t,n){return t=jf(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=jf(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),Af(e,this,s)}}var Nf=Mf;function Pf(e){return function(){return e}}var Ff=Pf,If=uu?function(e,t){return uu(e,`toString`,{configurable:!0,enumerable:!1,value:Ff(t),writable:!0})}:Of,Lf=800,Rf=16,zf=Date.now;function Bf(e){var t=0,n=0;return function(){var r=zf(),i=Rf-(r-n);if(n=r,i>0){if(++t>=Lf)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Vf=Bf(If);function Hf(e,t){return Vf(Nf(e,t,Of),e+``)}var Uf=Hf;function Wf(e,t,n){if(!Ra(n))return!1;var r=typeof t;return(r==`number`?Qu(n)&&uf(t,n.length):r==`string`&&t in n)?jc(n[t],e):!1}var Gf=Wf;function Kf(e){return Uf(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=e.length>3&&typeof a==`function`?(i--,a):void 0,o&&Gf(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}var qf=Kf(function(e,t,n){Ef(e,t,n)});let Jf=class{constructor(e,t,n,r,i,a,o,s){this._config=e,this._context=t,this._prebidMethods=n,this._spaEventBus=r,this._marmaladeEventBus=i,this._browsingTopicsApiEventBus=a,this._cloudflareIpBidReqExpHo=o,this._ayIiqEnrichExperiment=s,C(this,`_userSegments`,void 0),C(this,`_siteSegments`,void 0),C(this,`_ayEnrichmentEligible`,void 0),C(this,`_data`,{}),this._ayEnrichmentEligible=this._config.prebid.ayServerEnabled&&!this._ayIiqEnrichExperiment.result,this.createOrtbDataObj(),this._onConsentEvent(),this._marmaladeEventBus.resetMarmaladeData.once(()=>{this._setORTB2Data()}),this._config.marmalade.rfDataProcessed.on(()=>{this._setORTB2Data()}),!this._config.gdpr.enabled&&!this._config.ccpa.userOptedOut&&this._context.browsingTopicsSupported&&this._context.browsingTopics.length===0&&this._browsingTopicsApiEventBus.topicsReceived.on(e=>{this._setDelayedTopicsData(this._convertTopicData(e))})}_setORTB2Data(){this._prebidMethods.addToQueue(()=>{let e=this._prebidMethods.getConfig(`ortb2`)||{};this.createOrtbDataObj();let t=qf(e,this._data);this._prebidMethods.setConfig({ortb2:t})}),this._spaEventBus.routeChanged.on(()=>{this._prebidMethods.addToQueue(()=>{this.createOrtbDataObj(),this._prebidMethods.setConfig({ortb2:{...this._data}})})})}createOrtbDataObj(){this._userSegments=this._getUserSegments(),this._siteSegments=this._getSiteSegments();let e=this._config.prebid.ortbEnrich,t=this._getUserData(),n=this._getSiteData(e),r=this._getDeviceData(e),i={cur:this._getOrtb2Currency(),site:n,user:t,device:r},a={at:1,source:{fd:0}};this._data={...i,...e&&a}}get data(){return this._data}_getDeviceData(e){let t=this._cloudflareIpBidReqExpHo.result&&dc(this._config.user.rcid,!!this._context.sessionKey)&&this._config.user.rcid?.metadata.clientIp,n=t?Ec(t):null,r=n===`IPv6`?`ipv6`:n===`IPv4`?`ip`:null;return{...t&&r&&{[r]:t},...e&&{language:navigator.language.slice(0,2),js:1}}}_getUserData(){return{...this._userSegments.length&&{data:this._userSegments}}}_getSiteData(e){let t=document.documentElement.lang,n=this._config.site.verticals,r=n.length?n[0].replace(/ /g,`_`):``,i={content:{...this._siteSegments.length&&{data:this._siteSegments},...e&&t&&{language:t.slice(0,2)}},...e&&n.length&&Dc[r]&&{cat:[Dc[r].iabCode],pagecat:[Dc[r].iabCode]},...e&&{privacypolicy:1,mobile:1},...this._ayEnrichmentEligible&&{ext:{data:{aysse:this._config.audienceTargeting.ayEnrichmentEnabled,ayssewli:this._config.audienceTargeting.ayEnrichWithLiveIntent,ayssewoli:this._config.audienceTargeting.ayEnrichWithoutLiveIntent,aygroup:this._config.audienceTargeting.ayEnrichmentGroup}}}};return i.content?.data&&i.content?.data.length>0&&i.content.data.forEach(e=>(e.cids=[...e.cids||[],...e.ext.cids||[]].filter(ki),e)),i}_onConsentEvent(){let e=this._config.ccpa;e.consentChange.on(t=>{this._prebidMethods.addToQueue(()=>{if(t===e.ccpaOptOut){let e=this._prebidMethods.getConfig(`ortb2`)||{};e.user&&(delete e.user,this._prebidMethods.setConfig({ortb2:e}))}})})}_getSiteSegments(){return this.buildSegmentData(this._config.marmalade.ortbSegments.get(`iabc`)||[],6)}_getUserSegments(){if(this._config.ccpa.userOptedOut)return[];let e=this.buildSegmentData(this._config.marmalade.ortbSegments.get(`iaba`)||[],4),t=this._convertTopicData(this._context.browsingTopics);return e.concat(t)}_convertTopicData(e){let t=e.some(e=>e.taxonomy_version===`2`)?601:600;return this.buildSegmentData(e.reduce((e,t)=>[...e,{id:String(t.id)}],[]),t,`adthrive.com`)}_setDelayedTopicsData(e){this._prebidMethods.addToQueue(()=>{let t=this._prebidMethods.getConfig(`ortb2`)||{};t.user=t.user||{},t.user.data=t.user.data||[],t.user.data=t.user.data.concat(e),this._prebidMethods.setConfig({ortb2:t})})}buildSegmentData(e,t,n=`cafemedia.com`){return e.length?[{name:n,segment:e,ext:{segtax:t}}]:[]}buildSegmentDataFromArray(e,t,n){return this.buildSegmentData(e.map(e=>({id:e})),t,n)}setOrtb2Imp(e,t){if(t)for(let n of Object.keys(e))t[n]=e[n]}setOrtb2ImpExt(e,t){t&&(t.ext={...t.ext,...e})}setOrtb2ImpExtData(e,t){t&&(t.ext=t.ext??{},t.ext.data={...t.ext.data,...e})}_setVideoOrtb2ImpData(e,t){this.setOrtb2ImpExtData({adserver:{name:`gam`,adslot:`/${this._config.gam.account}/${this._config.gam.prefix}_${t.name}/${this._config.site.id}`}},e)}addOrtb2Imp(e,t,n=!1,r){let i=this._config,{slot:a,video:o}=e,s=r||{ext:{data:{}}};if(s.secure=1,i.fledge.enabled&&(this.setOrtb2ImpExt({ae:1},s),a&&this.setOrtb2ImpExtData({banner:{sizes:a.sizes}},s),o&&this.setOrtb2ImpExtData({video:{sizes:o.size}},s)),o)this._setVideoOrtb2ImpData(s,o);else if(a){let e=wc(a),t=Tc(e||0);this.setOrtb2ImpExtData({hvp:`${t}`},s)}if(a&&n&&this.setOrtb2Imp({instl:1},s),a&&a.isHighlyViewable()&&this.setOrtb2ImpExtData({pos:`atf`},s),a&&a.branded&&this.setOrtb2ImpExtData({branded:1},s),t&&i.prebid.rpbsEnabled){let n=this._generateRpbsOrtb2Imp(e),r=t.findIndex(e=>`module`in e&&e.module===`pbsBidAdapter`&&e.params.configName===`rpbs`);r===-1?t.push({module:`pbsBidAdapter`,params:{configName:`rpbs`},ortb2Imp:n}):t[r].ortb2Imp=n}return s}addOrtb2Reg(e,t){this._prebidMethods.addToQueue(()=>{let n=this._prebidMethods.getConfig(`ortb2`)||{};n.regs={gpp:e,gpp_sid:t},this._prebidMethods.setConfig({ortb2:n})})}addEidsToOrtb2(e){let t=Array.isArray(e)?[...e]:[e];this._prebidMethods.addToQueue(()=>{let e=this._prebidMethods.getConfig(`ortb2`)??{},n=this._data??{},r=qf(e,n);r.user=r.user??{},r.user.ext=r.user.ext??{},r.user.ext.eids=r.user.ext.eids??[],r.user.ext.eids=r.user.ext.eids.concat(t),this._prebidMethods.setConfig({ortb2:r})})}updateOrtb2WithIris(e){if(e.enabled===!1)return;let t=this._prebidMethods.getConfig(`ortb2`)||{},{irisId:n,segmentName:r,irisContextualData:i}=e,a={ext:{segtax:e.segtax},name:r,segment:i?.map(e=>({id:e}))??[]};n&&(a.ext.cids=[n],a.cids=[n]),t.site?.content?.data?t.site.content.data.push(a):t.site.content.data=[a],this._prebidMethods.setConfig({ortb2:t})}_getOrtb2Currency(){let e=this._config.prebid.currencyConversionEnabled,t=this._context.country,n=[`USD`],r={GB:`GBP`,CA:`CAD`,AU:`AUD`};return e&&t&&r[t]&&n.unshift(r[t]),n}_generateRpbsOrtb2Imp(e){let t=e?.slot?.refreshCount??e?.video?.prerollNum??0,n={ext:{rpbs:{nref:t}}};if(this._config.trafficShaping.active){let r=e?.slot?.location??e?.video?.name??``,i=this._config.trafficShaping.getRule(r,t)?.dbl;i&&(n.ext.rpbs.ts={on:!0,dbl:i})}return n}};Jf=w([S(),N(0,b(J)),N(1,b(W)),N(2,b(P)),N(3,b(xc)),N(4,b(Oi)),N(5,b(bc)),N(6,b(Xs)),N(7,b(yc))],Jf);let Yf=[`IAB25`,`IAB26`],Xf=new Map([[`alc`,[`IAB8-5`,`IAB8-18`]],[`ast`,[`IAB15-1`]],[`dat`,[`IAB14-1`]],[`gamc`,[`IAB9-5`]],[`gamv`,[`IAB9-30`]],[`pol`,[`IAB11-4`]],[`rel`,[`IAB23`]],[`ssr`,[`IAB7-39`]],[`srh`,[`IAB7-30`,`IAB6-7`,`IAB7-45`]],[`ske`,[`IAB7-19`]],[`tob`,[`IAB7-41`]],[`wtl`,[`IAB7-44`]]]),Zf=class extends V{init(){this._key=`PubmaticBCats`,this._lookup=`PUBBCAT`}run(){return super.run()}};w([R()],Zf.prototype,`run`,null),Zf=w([S()],Zf);let Qf=class extends qe{constructor(){super(),C(this,`adRenderFailed`,new T),C(this,`adRenderSucceeded`,new T),C(this,`auctionDebug`,new T),C(this,`auctionEnd`,new T),C(this,`auctionInit`,new T),C(this,`beforeRequestBids`,new T),C(this,`bidRequested`,new T),C(this,`bidResponse`,new T),C(this,`bidWon`,new T),C(this,`initialized`,new O),C(this,`rubiconBidError`,new T),C(this,`setTargeting`,new T),C(this,`staleRender`,new T),C(this,`tcf2Enforcement`,new T),C(this,`vastExceededLimit`,new T),C(this,`liveIntentResolved`,new O),C(this,`expiredRender`,new T),C(this,`id5Resolved`,new T)}};Qf=w([S()],Qf);let $f=class{constructor(){C(this,`added`,new T),C(this,`displayed`,new T),C(this,`displaying`,new T),C(this,`refreshed`,new T),C(this,`refreshing`,new T),C(this,`refreshAuctionStart`,new T),C(this,`refreshingBids`,new T),C(this,`requestingBids`,new T),C(this,`requestedBids`,new T)}};$f=w([S()],$f);let ep=e=>{let t=document.createElement(`a`);return t.href=e,t.hostname},tp=e=>{let t=e.split(`.`),n=t.length;return n>2&&(e=t[n-2]+`.`+t[n-1],(t[n-2].length===2||t[n-2].length===3)&&t[n-1].length===2&&(e=t[n-3]+`.`+e)),e},np=()=>{if(document.referrer&&document.referrer.length){let e=ep(document.referrer),t=tp(e),n=tp(window.location.hostname);if(t!==n)return e}},rp=e=>{let t=np();return B(t,e)},ip=[`Refresh`,`PD`,`Source`,`Browser`,`Topic`,`MCMP`,`Sens`],ap=(e,t,n=!1)=>{t.addToQueue(()=>{let r=t.getConfig(`ix`)||{firstPartyData:{}},i={...r.firstPartyData,...e},a={};for(let e in ip.forEach(e=>{e in i&&(a[e]=i[e])}),i)ip.includes(e)||(a[e]=i[e]);r.firstPartyData=a,n&&delete r.firstPartyData.Refresh,t.setConfig({ix:r},!1)})},op=(e,t)=>{t.addToQueue(()=>{let n=t.getConfig(`ix`)||{};n.largeFormatSizes=e,t.setConfig({ix:n},!1)})},sp=e=>{let t={google:`google`,facebook:`facebook`,instagram:`instagram`,pinterest:`pinterest`};return e.split(`.`).filter(e=>t[e])[0]||`other`},cp=e=>e?sp(e):`direct`,lp=class{constructor(e){this._videoEventBus=e,C(this,`refreshingVideoBids`,new T),C(this,`requestingVideoBids`,new T)}addVideoSlots(e){this._videoEventBus.videoPlayerAdded.emit(e)}async requestVideoBids(e,t){await this.requestingVideoBids.legacyEmit(e).catch(),await this._determineIsRefreshing(e).catch(),await this._videoEventBus.preRequestVideoBids.legacyEmit({videos:e,timeout:t}),await this._videoEventBus.requestingVideoBids.legacyEmit({videos:e,timeout:t})}get amazonVideoBidResponseReceived(){return this._videoEventBus.amazonVideoBidResponseReceived}async _determineIsRefreshing(e){let t=e.filter(e=>e.prerollNum>0);t.length&&(this._generateNewUUIDsForPlayers(e),await this.refreshingVideoBids.legacyEmit(t))}_generateNewUUIDsForPlayers(e){e.forEach(e=>{e.refreshImpressionId()})}};lp=w([D(`VideoRequestManager`),S(),N(0,b(pc))],lp);let up=class extends I{constructor(e,t){super(),this._config=e,this._eventBus=t,C(this,`setMcmpWithRFCodes`,()=>new Promise(e=>{this._eventBus.recencyFrequencyDataSet.on(()=>{this.getAllMcmps(),e(!0)},{handleEventsAlreadyEmitted:!0})}))}getAllMcmps(){let e=this._config.marmalade;return[...e.mcmp.filter(e=>!e.startsWith(`SR_`)),...e.rfMcmpCodes.map(e=>e[0]),...e.rfIabCodes.map(e=>e[0])].filter(ki)}};up=w([D(`RecencyAndFrequencyCodesComponent`),x(),N(0,b(J)),N(1,b(Oi))],up);let dp=class{constructor(e,t){this._config=e,this._spaEventBus=t,C(this,`_name`,`iris`),C(this,`segmentName`,`www.iris.tv`),C(this,`segtax`,501),C(this,`_irisEndpoint`,`https://context.iris.tv/video_info`),C(this,`_token`,`5d8f38ad6d7de4253cfa501b84c30b1014868d9884be5d68dc64bd50a6edb54c`),C(this,`_clientToken`,`EXJQESR8SMWMZCJ`),C(this,`_contextualData`,void 0),C(this,`_irisId`,void 0),this._spaEventBus.routeChanged.on(()=>{this._resetIrisData()})}async setContextualData(e){return this.fetchIrisResponse(e).then(e=>{if(e&&typeof e!=`boolean`){let t=e.video_info,n=t&&t.context;n&&n.length&&(this._contextualData=n,this._irisId=t.iris_id)}return!0}).catch(()=>!1)}get irisContextualData(){return this._contextualData}get irisId(){return this._irisId}fetchIrisResponse(e){return Rs(`${this._irisEndpoint}?access_token=${this._token}&client_token=${this._clientToken}&platform_id=${e}`)}_resetIrisData(){this._contextualData=void 0,this._irisId=void 0}get enabled(){return!this._config.tkho.tracker.includes(this._name)&&!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut}};dp=w([D(`IrisTvTrackerComponent`),S(),N(0,b(J)),N(1,b(xc))],dp);let fp=class extends V{init(){this._key=`TTDDealFloor`,this._lookup=`TTDDEALFLR`}};fp=w([S()],fp);let pp=class extends I{get staticFirstPartyData(){return this._staticFirstPartyData}get staticIXFirstPartyData(){return this._staticIXFirstPartyData}constructor(e,t,n,r,i,a,o,s,c,l,u,d){super(),this._config=e,this._context=t,this._prebidMethods=n,this._videoRequestManager=r,this._irisTvTracker=i,this._rfcodes=a,this._spaEventBus=o,this._ttdDealFloorExperiment=s,this._slotManagerEventBus=c,this._pubMaticBcatExperiment=l,this._prebidEventBus=u,this._slots=d,C(this,`_staticFirstPartyData`,{mcmp:this._rfcodes.getAllMcmps(),site_id:[this._config.site.id],verticals:this._config.site.verticals,pmp_elig:[this._config.adOptions.pmp],sens:this._config.site.filteredSensitiveCategories}),C(this,`_staticIXFirstPartyData`,{site_code:this._config.marmalade.filteredSiteCodes,sens:this._config.site.filteredSensitiveCategories,topic:this._config.site.verticals,pd:`${this._config.adOptions.pmp?``:`no`}${this._context.device}`,pmp_elig:this._config.adOptions.pmp?`TRUE`:`FALSE`,source:``}),C(this,`_initOffEvent`,void 0);let f=rp(this._context.savedReferrer);this._staticIXFirstPartyData.source=cp(f),this._setMCMPData()}init(){this._onAddedEvent(),this._onRequestingEvent(),this._onRefreshingEvent(),this._onVideoRequestingEvent(),this._onVideoRefreshingEvent(),this._setGlobalFirstPartyData(),this._spaEventBus.routeChanged.on(()=>{this._onAddedEvent()})}async _setMCMPData(){await this._config.marmalade.marmaladeEventPromise,this._resetMCMPData()}_resetMCMPData(){this._staticFirstPartyData.mcmp=this._rfcodes.getAllMcmps()}_getTheTradeDeskPMPData(){let e=this._ttdDealFloorExperiment.result||`1`;e=e===`off`?`1`:e;let t=+e.replace(`_`,`.`);return{deals:[{id:`opath-456-def-ryan`,at:1,bidfloor:10*t,bidfloorcur:`USD`,isVideo:!0},{id:`opath-123-abc-ryan`,at:1,bidfloor:2.5*t,bidfloorcur:`USD`,isVideo:!1}],private_auction:0}}_getSiteExtData(e,t=!1){let n=this._updateMcmpWithScrollTargeting(e.mcmp);return t&&n&&(e.mcmp=n),{ext:{data:e}}}_onAddedEvent(){this._slotManagerEventBus.added.once(e=>{let t=this._getBlockedCategories(),n=this._getTheTradeDeskPMPData();this._setPrebidBidderSpecificFirstPartyData([G.TTD],{pmp:n,site:this._getSiteExtData({site_code:this._config.marmalade.filteredSiteCodes}),bcat:t});let r=this._slots.get(e[0]),i=this._context.bucket,a=wc(r).toString(),o=this._getIXFirstPartyData({refresh:`0`,vp:`0`});this._setPrebidBidderSpecificFirstPartyData([G.IndexExchange,G.IndexExchangeServer],{site:this._getSiteExtData(o,!0)});let s=this._getSiteExtData({site_code:this._config.marmalade.filteredSiteCodes,refresh:[`false`],vp:`0`,bucket:i},!0);this._setPrebidBidderSpecificFirstPartyData([G.Rubicon,G.RubiconServer],{site:s});let c=this._getSiteExtData({refresh:`0`,vp:`0`,hvp:a,site_code:this._config.marmalade.filteredSiteCodes});this._setPrebidBidderSpecificFirstPartyData([G.OpenX,G.OpenXServer],{site:c,bcat:t}),this._setPrebidBidderSpecificFirstPartyData([G.Kargo],{bcat:t}),this._pubMaticBcatExperiment.result!==`nobc`&&this._setPrebidBidderSpecificFirstPartyData([G.Pubmatic,G.PubmaticServer],{bcat:t});let l=this._getSiteExtData({site_code:this._config.marmalade.filteredSiteCodes,vp:`0`,hvp:a,refresh:`0`});this._setPrebidBidderSpecificFirstPartyData([G.Triplelift,G.TripleliftServer],{site:l}),this._setPrebidBidderSpecificFirstPartyData([G.Ogury],{site:{publisher:{id:`f48f1699-39f7-40c5-8aef-1e5255be6d5e`}}}),this._setPrebidBidderSpecificFirstPartyData([G.Unruly],{bcat:t}),this._setPrebidBidderSpecificFirstPartyData([G.Chicory],{bcat:t})})}_getBlockedCategories(){return[...[...Xf.keys()].filter(e=>!this._config.site.filteredSensitiveCategories.includes(e)).reduce((e,t)=>e.concat(Xf.get(t)||[]),[]),...Yf]}_onRequestingEvent(){this._slotManagerEventBus.requestingBids.on(e=>{let t=this._slots.get(e);t.forEach(e=>{this.setIXHVPParam(e,this._prebidMethods)});let n=this._context.bucket,r=wc(t[0]).toString(),i=this._getIXFirstPartyData({refresh:`0`,vp:`0`});this._setPrebidBidderSpecificFirstPartyData([G.IndexExchange,G.IndexExchangeServer],{site:this._getSiteExtData(i,!0)});let a=this._getSiteExtData({site_code:this._config.marmalade.filteredSiteCodes,refresh:[`false`],vp:`0`,bucket:n},!0);this._setPrebidBidderSpecificFirstPartyData([G.Rubicon,G.RubiconServer],{site:a});let o=this._getSiteExtData({refresh:`0`,vp:`0`,hvp:r,site_code:this._config.marmalade.filteredSiteCodes});this._setPrebidBidderSpecificFirstPartyData([G.OpenX,G.OpenXServer],{site:o});let s=this._getSiteExtData({site_code:this._config.marmalade.filteredSiteCodes,vp:`0`,hvp:r,refresh:`0`});this._setPrebidBidderSpecificFirstPartyData([G.Triplelift,G.TripleliftServer],{site:s})})}_onRefreshingEvent(){this._slotManagerEventBus.refreshingBids.on(e=>{let t=this._slots.get(e);t.forEach(e=>{this.setIXHVPParam(e,this._prebidMethods)});let n=t[0]&&t[0]?.refreshCount,r=wc(t[0]).toString(),i=this._context.bucket,a=this._getSiteExtData({site_code:this._config.marmalade.filteredSiteCodes,refresh:[`true`],vp:`0`,bucket:i},!0);this._setPrebidBidderSpecificFirstPartyData([G.Rubicon,G.RubiconServer],{site:a});let o=this._getIXFirstPartyData({refresh:`${n}`,vp:`0`});this._setPrebidBidderSpecificFirstPartyData([G.IndexExchange,G.IndexExchangeServer],{site:this._getSiteExtData(o,!0)});let s=this._getSiteExtData({refresh:`${n}`,vp:`0`,hvp:r,site_code:this._config.marmalade.filteredSiteCodes});this._setPrebidBidderSpecificFirstPartyData([G.OpenX,G.OpenXServer],{site:s});let c=this._getSiteExtData({site_code:this._config.marmalade.filteredSiteCodes,vp:`0`,hvp:r,refresh:`${n}`});this._setPrebidBidderSpecificFirstPartyData([G.Triplelift,G.TripleliftServer],{site:c})})}_onVideoRequestingEvent(){this._videoRequestManager.requestingVideoBids.on(e=>{e.forEach(()=>{let e=this._irisTvTracker;if((this._irisTvTracker.enabled?e.irisContextualData:void 0)?.length){let t={content:{id:e.irisId}};this._setPrebidBidderSpecificFirstPartyData([G.Pubmatic,G.PubmaticServer],{site:t})}})})}_onVideoRefreshingEvent(){this._videoRequestManager.refreshingVideoBids.on(e=>{let t=this._context.bucket;e.forEach(e=>{if(e.vp>0&&e.prerollNum<=10){let n=e.vp.toString(),r=this._getSiteExtData({site_code:this._config.marmalade.filteredSiteCodes,refresh:[`true`],vp:n,bucket:t},!0);this._setPrebidBidderSpecificFirstPartyData([G.Rubicon,G.RubiconServer],{site:r});let i=this._getIXFirstPartyData({refresh:`${e.prerollNum}`,vp:n});this._setPrebidBidderSpecificFirstPartyData([G.IndexExchange,G.IndexExchangeServer],{site:this._getSiteExtData(i,!0)});let a=this._getSiteExtData({refresh:`${e.prerollNum}`,vp:n,site_code:this._config.marmalade.filteredSiteCodes});this._setPrebidBidderSpecificFirstPartyData([G.OpenX,G.OpenXServer],{site:a});let o=this._getSiteExtData({site_code:this._config.marmalade.filteredSiteCodes,vp:n,refresh:`${e.prerollNum}`});this._setPrebidBidderSpecificFirstPartyData([G.Triplelift,G.TripleliftServer],{site:o}),this._prebidMethods.addToQueue(()=>{this.setIXVPParam(e.vp)})}})})}_getIXFirstPartyData(e){return this._setupIXFirstPartyData(e)}setIXHVPParam(e,t){Z.pushToQueue(()=>{t.addToQueue(()=>{let n=t.getConfig(G.IndexExchange);if(n&&n.firstPartyData){let r=n.firstPartyData.HVP||{},i=wc(e),a=Tc(i||0);r[e.id]=a,e.refreshCount>0?ap({HVP:r,Refresh:`True`},t):ap({HVP:r},t,!0)}})})}setIXVPParam(e){let t=this._prebidMethods.getConfig(G.IndexExchange);t&&t.firstPartyData&&e>0&&ap({vp:e.toString()},this._prebidMethods)}_setupIXFirstPartyData(e){return{...e,...this.staticIXFirstPartyData}}_removeInitEvent(){this._initOffEvent?.()}_awaitPrebidInit(){return new Promise(e=>{this._initOffEvent=this._prebidEventBus.initialized.on(()=>{e(),this._removeInitEvent()},{handleEventsAlreadyEmitted:!0})})}async _setGlobalFirstPartyData(){await this._awaitPrebidInit(),this._config.marmalade.rfDataProcessed.emitted||this._rfcodes.setMcmpWithRFCodes().then(()=>{this._resetMCMPData(),this._setPrebidGlobalFirstPartyData()}).catch(()=>{}),this._setPrebidGlobalFirstPartyData()}_setPrebidGlobalFirstPartyData(){this._prebidMethods.addToQueue(()=>{let e=this._prebidMethods.getConfig(`ortb2`),t={...e,site:{...e.site,ext:{data:{...e.site?.ext?.data,...this.staticFirstPartyData}}}};this._prebidMethods.setConfig({ortb2:t})})}_setPrebidBidderSpecificFirstPartyData(e,t){this._prebidMethods.setBidderConfig({bidders:e,config:{ortb2:t}})}_updateMcmpWithScrollTargeting(e){let t=this._config.trackScroll.getTargetingValue();return t?e?[...e,...t]:[...t]:e}};pp=w([D(`FirstPartyDataComponent`),S(),N(0,b(J)),N(1,b(W)),N(2,b(P)),N(3,b(lp)),N(4,b(dp)),N(5,b(up)),N(6,b(xc)),N(7,b(fp)),N(8,b($f)),N(9,b(Zf)),N(10,b(Qf)),N(11,b(Y))],pp);let mp=class{constructor(){C(this,`consentResponseCaptured`,new O),C(this,`consentWithdrawn`,new T),C(this,`consentChanged`,new T)}};mp=w([S()],mp);let hp={LOADING:`loading`,TC_LOADED:`tcloaded`,USER_ACTION_COMPLETE:`useractioncomplete`},gp=class extends I{constructor(e,t){super(),this._events=e,this._config=t,C(this,`_queues`,void 0),C(this,`_consentMonitoringListenerId`,void 0),this._queues=[L,E]}init(){this.checkConsentOnLoad().then(e=>{let t=e&&e.tcString;t?(this._config.gdpr.consentCaptured=!0,this._config.gdpr.revokedPurposeConsent=this._checkForRevokedPurpose(e.purpose),this._config.gdpr.consentCapturedData.consentString=t,e&&e.addtlConsent&&(this._config.gdpr.consentCapturedData.additionalConsent=e.addtlConsent),this._events.consentResponseCaptured.emit(t),this._clearGdprQueues(),this._monitorConsentChanges()):this.listenForConsentSubmit().catch(e=>{E.error(`GDPREnforcementComponent`,`init`,`listenForConsentSubmit`,e)})}).catch(e=>{E.error(`GDPREnforcementComponent`,`init`,`checkConsentOnLoad`,e)})}checkConsentOnLoad(){return new Promise(e=>{window.__tcfapi(`addEventListener`,2,(t,n)=>{if(n&&t&&t.eventStatus===`tcloaded`&&t.tcString&&!ur())return e(t);if(!(t&&t.eventStatus===hp.LOADING))return e({})})})}checkConsentForVendor(e,t){let n=window.__cmp(`getCMPData`),r=n?.vendorConsents?.[e]===!0,i=!!t?.every(e=>n?.purposeConsents[e]===!0);return Promise.resolve(r&&i)}_clearGdprQueues(){this._queues.forEach(e=>{this.checkConsentForVendor(this._config.gdpr.raptiveVendorId,e.gdprPurposes).then(t=>{t?(e.disable=!1,e.clearQueue(!0)):(e.disable=!0,e.clearQueue(!1))}).catch(e=>{E.error(`listenForConsentSubmit`,`clearGdprQueues`,e)})})}listenForConsentSubmit(){return new Promise(e=>{window.__tcfapi(`addEventListener`,2,(t,n)=>{n&&([hp.TC_LOADED,hp.USER_ACTION_COMPLETE].includes(t?.eventStatus)&&(this._config.gdpr.consentCaptured=!0,this._config.gdpr.cmpUserActionCompleteFired=!0,this._config.gdpr.revokedPurposeConsent=this._checkForRevokedPurpose(t.purpose),t&&t.tcString&&t.tcString.length&&(this._config.gdpr.consentCapturedData.consentString=t.tcString),t&&t.addtlConsent&&t.addtlConsent.length&&(this._config.gdpr.consentCapturedData.additionalConsent=t.addtl_consent),this._events.consentResponseCaptured.emit(t.tcString),this._clearGdprQueues(),window.__tcfapi(`removeEventListener`,2,e=>{this._monitorConsentChanges()},t.listenerId)),e(!0)),e(!1)})})}_checkForRevokedPurpose(e){let t=e&&e.consents||{};return!t[1]||!t[4]}_monitorConsentChanges(){!this.enabled||this._consentMonitoringListenerId!==void 0||window.__tcfapi(`addEventListener`,2,(e,t)=>{if(!(!t||!e)&&(this._consentMonitoringListenerId===void 0&&e.listenerId&&(this._consentMonitoringListenerId=e.listenerId),e.eventStatus===hp.USER_ACTION_COMPLETE)){let t=this._config.gdpr.consentCapturedData.consentString,n=e.tcString,r=this._config.gdpr.revokedPurposeConsent,i=this._checkForRevokedPurpose(e.purpose);t!==n&&(this._config.gdpr.consentCapturedData.consentString=n,this._config.gdpr.revokedPurposeConsent=i,e.addtlConsent&&(this._config.gdpr.consentCapturedData.additionalConsent=e.addtlConsent),this._events.consentChanged.emit(n),!r&&i?(this._events.consentWithdrawn.emit(),this._queues.forEach(e=>{e.disable=!0})):this._clearGdprQueues())}})}get enabled(){return typeof window.__tcfapi==`function`}};gp=w([D(`GDPREnforcementComponent`),x(),N(0,b(mp)),N(1,b(J))],gp);let _p=class extends qe{constructor(...e){super(...e),C(this,`initialized`,new T),C(this,`initRan`,new T)}};_p=w([S()],_p);let vp=class extends qe{constructor(...e){super(...e),C(this,`setAmazonFloors`,new T),C(this,`clearAllFloorData`,new T),C(this,`storeModuleFloorData`,new T),C(this,`storeRaptiveFloorData`,new T),C(this,`setAuctionFloorData`,new T),C(this,`componentActive`,new T)}};vp=w([S()],vp);let yp={amznbid:`amznbid`,amzniid:`amzniid`,amznp:`amznp`,amznsz:`amznsz`},bp=(e,t)=>e.reduce((e,n)=>{let r=[];return e.forEach(e=>{n.forEach(n=>{r.push(e+t+n)})}),r}).sort((e,t)=>e.split(`*`).length-t.split(`*`).length),xp=()=>{L.readExternalCookie(`__adblocker`)!==null&&L.deleteCookie(`__adblocker`)},Sp=ht(()=>{let e=L.readExternalCookie(`__adblocker`),t=e??!1;return e!==null&&L.deleteCookie(`__adblocker`),setTimeout(xp,5e3),setTimeout(xp,1e4),t});var Cp=class{get videoEnabled(){return!0}get enabled(){return!0}};let wp=class{constructor(e){this._config=e,C(this,`_dealExclusion`,{[G.MediaGrid]:{outstream:[`G-TRUSTX`]}}),C(this,`_priceBucket`,[.1,5,20,100]),C(this,`_priceBucketRules`,new Map([[.1,100],[5,20],[20,10],[100,2]])),C(this,`bucketBidPrice`,e=>{let t=this._priceBucket.find(t=>e<=t)||100,n=this._priceBucketRules.get(t);return(Math.floor(e*n)/n).toFixed(2)}),C(this,`adjustAmazonBidPrice`,(e,t,n,r)=>{let i={...e};i.mediaType=r,i.isAmazon=!0,i.amzndeal_sp=i?.amzndeal_sp||i.targeting?.amzndeal_sp;let a=this.adjustCpmFromBidResponse(n,t,i);return Math.max(a,0)}),C(this,`adjustCpmFromBidResponse`,(e,t,n)=>{let r=this._getCombinedFees(t,n),i=`pbsHost`in n&&n.pbsHost&&n.pbsHost.slice(-3)===`_ay`?e/1.01:e,a=this._calculateAdjustment(i,r,n);return Math.max(a,0)}),C(this,`adjustFloorFromBidRequest`,(e,t,n,r=!1)=>{let i=this._config.prebid.bidderInflatorMap.get(e)||1;n*=r?i:1;let a=this._getCombinedFees(e,t);return this._calculateAdjustment(n,a,t,r)/(r?1:i)}),C(this,`_getMediaTypeFromBidResponse`,e=>{let t=`mediaTypes`in e?e.mediaTypes:{},n=Object.keys(t).length>1?`default`:Object.keys(t)[0]??`default`,r=`mediaType`in e?e.mediaType:n,i=`adUnitCode`in e?e.adUnitCode:e.slotID;return r===`instream`||this._config.video.instreamAdUnits.has(i)?`instream`:i?.includes(H.Video_StickyOutstream)?`stickyOutstream`:r===`video`||`meta`in e&&e.meta?.isInBannerVideo?`outstream`:r===`native`?`native`:`default`}),C(this,`_getConfigData`,e=>{let t=this._config.partners,n=Ii,r=e.cpmMap?.get(n.default)??t.getDefaultDiscount(),i=e.cpmMap?.get(n.native),a=e.cpmMap?.get(n.outstream),o=e.cpmMap?.get(n.stickyOutstream),s=e.cpmMap?.get(n.instream)??t.getDefaultInstreamDiscount(r),c=e.cpmMap?.get(n.pmp);return{...r&&{default:r},...i&&{native:i},...a&&{outstream:a},...o&&{stickyOutstream:o},...s&&{instream:s},...c&&{pmp:c}}}),C(this,`_getViewabilityDiscounts`,(e,t)=>{let n=Ii,r=Li,i=e===n.outstream&&`viewability`in t&&t.viewability;return i?{viewability:{flat:r.flat,percent:i}}:void 0})}_applyAdjustment(e,t,n,r,i=!0,a=!1){let o=t[n]??0,s=e;return e=i?a?e/r:e*r:a?e+r:e-r,t[n]=o+Number((s-e).toFixed(4)),e}_calculateAdjustment(e,t,n,r=!1){let i=e,a={flat:{},percent:{}},o={},s=Li;for(let[e,n]of Object.entries(t))a.flat[e]=(a.flat[e]??s.flat)+n.flat,a.percent[e]=(a.percent[e]??s.percent)*n.percent;return i=this._getAdjustment(i,o,a,r),this._isFloorsBidRequestData(n)||(n.dscnt={...o},n.aug={...a}),i}_isFloorsBidRequestData(e){return!(`meta`in e||`bidder`in e)}_getAdjustment(e,t,n,r){let i=r?[`flat`,`percent`]:[`percent`,`flat`],a=e;for(let[e,o]of Object.entries(n[i[0]])){let n=i[0]===`percent`;a=this._applyAdjustment(a,t,e,o,n,r)}for(let[e,o]of Object.entries(n[i[1]])){let n=i[1]===`percent`;a=this._applyAdjustment(a,t,e,o,n,r)}return a}_shouldExcludeDealId(e,t,n){let r=this._dealExclusion[e]?.[n];return t&&r?.includes(t)}_getCombinedFees(e,t){let n=this._getMediaTypeFromBidResponse(t),r=`dealId`in t&&t.dealId||`amzndeal_sp`in t&&t.amzndeal_sp||``,i=r&&!this._shouldExcludeDealId(e,r?.toString(),n),a=this._config.partners.getBidderConfig(e),o=this._getConfigData(a),s=(n&&o[n])??o.default??{},c=i&&o.pmp||{},l=i&&c&&`deals`in c?c?.deals?.[r.toString()]:{},u=this._getViewabilityDiscounts(n,t),d=[s,c,{discounts:l}].reduce((e,t)=>(e.flat+=t.discounts?.flat??0,e.percent*=t.discounts?.percent??1,e),{flat:0,percent:1}),f={...s,...u&&{...u},discounts:{...d}};return r&&delete f.confiant,f}};wp=w([D(`BidCPMAdjuster`),S(),N(0,b(J))],wp);var Tp=class{getSupplyChainConfig(e){return{ver:`1.0`,complete:1,nodes:[{asi:`cafemedia.com`,sid:e,hp:1}]}}};let Ep=new Map([[`10thu68`,`a_${G.AppNexus}`],[`16d9pts`,`a_${G.GumGum}`],[`1axt6o`,`a_${G.OpenX}`],[`1bkk3r4`,`a_${G.AmazonTAM}`],[`1dfpj4`,`a_${G.AmazonTAM}`],[`1e4ycjk`,`a_${G.Triplelift}`],[`1lcnshs`,`a_${G.Sharethrough}`],[`1skd8g0`,`a_${G.Yieldmo}`],[`1y4543k`,`a_${G.Pubmatic}`],[`3bcv7k`,`a_${G.AmazonTAM}`],[`j27tog`,`a_${G.Rubicon}`],[`me2y9s`,`a_${G.IndexExchange}`],[`qtwge8`,`a_${G.Verizon}`],[`upqrr4`,`a_${G.MediaGrid}`],[`emebk0`,`a_${G.Unruly}`],[`f6dibk`,`a_${G.Ogury}`],[`rdvn5s`,`a_${G.Seedtag}`],[`1qwfo5c`,`a_${G.Blis}`],[`ii8mww`,`a_${G.Cadent}`],[`1nkkjk0`,`a_${G.Medianet}`],[`wdoc1s`,`a_${G.Verve}`]]),Dp=new Map([[`uzmups`,`a_${G.OpenX}`],[`10jeqdc`,`a_${G.Yieldmo}`],[`38rgg0`,`a_${G.YahooSSP}`],[`1q2ddkw`,`a_${G.Triplelift}`],[`1ui6vpc`,`a_${G.AppNexus}`]]),Op={"138wa9s":.01,lhm9s0:.02,"1l06ark":.03,clz9j4:.04,"1c4jaio":.05,ud9a0w:.06,"1tvtb0g":.07,"865reo":.08,"17opse8":.09,pxfrwg:.1,"1pfzsw0":.11,h1srnk:.12,"1gkcsn4":.13,yt2s5c:.14,"1ybmt4w":.15,"1ifi80":.16,"110zj7k":.17,j9pips:.18,"1is9jpc":.19,ae2igw:.2,"19wmjgg":.21,s5ciyo:.22,"1rnwjy8":.23,"5y90cg":.24,"15gt1c0":.25,npj0u8:.26,"1n831ts":.27,etw0lc:.28,"1ecg1kw":.29,wl6134:.3,"1w3q22o":.31,"2mdvr4":.32,"124xwqo":.33,kdnw8w:.34,"1jw7x8g":.35,bi0w00:.36,"1b0kwzk":.37,t9awhs:.38,"1sruxhc":.39,"727dvk":.4,"16krev4":.41,othedc:.42,"1oc1fcw":.43,fxue4g:.44,"1fgef40":.45,xp4em8:.46,"1x7ofls":.47,eh4ow:.48,zx15og:.49,i5r56o:.5,"1hob668":.51,"9a44xs":.52,"18so5xc":.53,r1e5fk:.54,"1qjy6f4":.55,"4uamtc":.56,"14cunsw":.57,mlknb4:.58,"1m44oao":.59,dpxn28:.6,"1d8ho1s":.61,vh7nk0:.62,"1uzrojk":.63,"4abg1s":.64,"13svh1c":.65,m1lgjk:.66,"1lk5hj4":.67,d5ygao:.68,"1coiha8":.69,ux8gsg:.7,"1ufshs0":.71,"8q4y68":.72,"188oz5s":.73,qheyo0:.74,"1pzyznk":.75,hlryf4:.76,"1h4bzeo":.77,zd1yww:.78,"1yvlzwg":.79,"22eozk":.8,"11kypz4":.81,jtophc:.82,"1jc8qgw":.83,ay1p8g:.84,"1aglq80":.85,spbpq8:.86,"1s7vqps":.87,"6i8740":.88,"160s83k":.89,o9i7ls:.9,"1ns28lc":.91,fdv7cw:.92,"1ewf8cg":.93,x557uo:.94,"1wnp8u8":.95,"36d2io":.96,"12ox3i8":.97,kxn30g:.98,"1kg7400":.99,c202rk:1,"1bkk3r4":1.01,tta39c:1.02,"1tbu48w":1.03,"7m6kn4":1.04,"174qlmo":1.05,pdgl4w:1.06,"1ow0m4g":1.07,ghtkw0:1.08,"1g0dlvk":1.09,y93lds:1.1,"1xrnmdc":1.11,ygbgg:1.12,"10h0cg0":1.13,ipqby8:1.14,"1i8acxs":1.15,"9u3bpc":1.16,"19cncow":1.17,rldc74:1.18,"1r3xd6o":1.19,"5e9tkw":1.2,"14wtukg":1.21,n5ju2o:1.22,"1mo3v28":1.23,e9wtts:1.24,"1dsgutc":1.25,w16ubk:1.26,"1vjqvb4":1.27,"3gcnwg":1.28,"12ywow0":1.29,l7moe8:1.3,"1kq6pds":1.31,cbzo5c:1.32,"1bujp4w":1.33,u39on4:1.34,"1tltpmo":1.35,"7w660w":1.36,"17eq70g":1.37,png6io:1.38,"1p607i8":1.39,grt69s:1.4,"1gad79c":1.41,yj36rk:1.42,"1y1n7r4":1.43,"18fwu8":1.44,"10qzxts":1.45,izpxc0:1.46,"1ii9ybk":1.47,a42x34:1.48,"19mmy2o":1.49,rvcxkw:1.5,"1rdwykg":1.51,"5o9eyo":1.52,"156tfy8":1.53,nfjfgg:1.54,"1my3gg0":1.55,ejwf7k:1.56,"1e2gg74":1.57,wb6fpc:1.58,"1vtqgow":1.59,"2ceadc":1.6,"11uybcw":1.61,k3oav4:1.62,"1jm8buo":1.63,b81am8:1.64,"1aqlbls":1.65,szbb40:1.66,"1shvc3k":1.67,"6s7shs":1.68,"16arthc":1.69,ojhszk:1.7,"1o21tz4":1.71,fnusqo:1.72,"1f6etq8":1.73,xf4t8g:1.74,"1wxou80":1.75,"4hjb4":1.76,zn1kao:1.77,hvrjsw:1.78,"1hebksg":1.79,"904jk0":1.8,"18iokjk":1.81,qrek1s:1.82,"1q9yl1c":1.83,"4kb1fk":1.84,"142v2f4":1.85,mbl1xc:1.86,"1lu52ww":1.87,dfy1og:1.88,"1cyi2o0":1.89,v78268:1.9,"1ups35s":1.91,"40buo0":1.92,"13ivvnk":1.93,lrlv5s:1.94,"1la5w5c":1.95,cvyuww:1.96,"1ceivwg":1.97,un8veo:1.98,"1u5swe8":1.99,"8g5csg":2,"17ypds0":2.01,q7fda8:2.02,"1ppze9s":2.03,hbsd1c:2.04,"1guce0w":2.05,z32dj4:2.06,"1ylmeio":2.07,"1sf3ls":2.08,"11az4lc":2.09,jjp43k:2.1,"1j29534":2.11,ao23uo:2.12,"1a6m4u8":2.13,sfc4cg:2.14,"1rxw5c0":2.15,"688lq8":2.16,"15qsmps":2.17,nzim80:2.18,"1ni2n7k":2.19,f3vlz4:2.2,"1emfmyo":2.21,wv5mgw:2.22,"1wdpngg":2.23,"2wdh4w":2.24,"12exi4g":2.25,knnhmo:2.26,"1k67im8":2.27,bs0hds:2.28,"1bakidc":2.29,tjahvk:2.3,"1t1uiv4":2.31,"7c6z9c":2.32,"16ur08w":2.33,p3gzr4:2.34,"1om10qo":2.35,g7tzi8:2.36,"1fqe0hs":2.37,xz4000:2.38,"1xho0zk":2.39,ogq2o:2.4,"1070r28":2.41,ifqqkg:2.42,"1hyark0":2.43,"9k3qbk":2.44,"192nrb4":2.45,rbdqtc:2.46,"1qtxrsw":2.47,"54a874":2.48,"14mu96o":2.49,mvk8ow:2.5,"1me49og":2.51,dzx8g0:2.52,"1dih9fk":2.53,vr78xs:2.54,"1v9r9xc":2.55,"3vc1z4":2.56,"13dw2yo":2.57,lmm2gw:2.58,"1l563gg":2.59,cqz280:2.6,"1c9j37k":2.61,ui92ps:2.62,"1u0t3pc":2.63,"8b5k3k":2.64,"17tpl34":2.65,q2fklc:2.66,"1pkzlkw":2.67,h6skcg:2.68,"1gpclc0":2.69,yy2ku8:2.7,"1ygmlts":2.71,"1nfaww":2.72,"115zbwg":2.73,jepbeo:2.74,"1ix9ce8":2.75,aj2b5s:2.76,"1a1mc5c":2.77,sacbnk:2.78,"1rswcn4":2.79,"638t1c":2.8,"15lsu0w":2.81,nuitj4:2.82,"1nd2uio":2.83,eyvta8:2.84,"1ehfu9s":2.85,wq5ts0:2.86,"1w8purk":2.87,"2rdog0":2.88,"129xpfk":2.89,kinoxs:2.9,"1k17pxc":2.91,bn0oow:2.92,"1b5kpog":2.93,teap6o:2.94,"1swuq68":2.95,"7776kg":2.96,"16pr7k0":2.97,oyh728:2.98,"1oh181s":2.99,g2u6tc:3,"1020ydc":3.05,r6dy4g:3.1,"1m94gzk":3.15,"4fb8qo":3.2,"1cti9z4":3.25,qmercw:3.3,"1z0lslc":3.35,b31hxc:3.4,"165s0sg":3.45,xa50jk:3.5,"1kl6wow":3.55,"7r6dc0":3.6,"1g5dekg":3.65,iuq4n4:3.7,"1r8x5vk":3.75,eewmio:3.8,"133whkw":3.85,u89hc0:3.9,"1pb0074":3.95,"1dfpj4":4,"19rmqrk":4.05,nkj85c:4.1,"1vyq9ds":4.15,bd13b4:4.2,"16frm68":4.25,xk4lxc:4.3,"1hjbdhc":4.35,"4pau4g":4.4,"1d3hvcw":4.45,lwlnuo:4.5,"1uasp34":4.55,hgs5q8:4.6,"11fyxa8":4.65,skbx1c:4.7,"1nn2fwg":4.75,"31d9ts":4.8,"1bfkb28":4.85,p8gsg0:4.9,"1xmntog":4.95,"9p3j0g":5,"14ru1vk":5.05,vw71mo:5.1,"1kxoef4":5.15,"83nv28":5.2,"1ghuwao":5.25,j77mdc:5.3,"1rlenls":5.35,ere48w:5.4,"122g0e8":5.45,t6t05c:5.5,"1o9jj0g":5.55,bz8cg:5.6,"18q69kw":5.65,mj2qyo:5.7,"1ux9s74":5.75,d3gjy8:5.8,"18672tc":5.85,zak2kg:5.9,"1j9qu4g":5.95,"6fqark":6,"1etxc00":6.05,kv56o0:6.1,"1t9c7wg":6.15,gfbojk:6.2,"10eig3k":6.25,rivfuo:6.3,"1mllyps":6.35,"3durk0":6.4,"1bs1ssg":6.45,pkya68:6.5,"1xz5beo":6.55,a1l0qo:6.6,"154bjls":6.65,w8ojcw:6.7,"1jjqfi8":6.75,"6ppw5c":6.8,"1f3wxds":6.85,ht9ngg:6.9,"1q7goow":6.95,ddg5c0:7,"13gdzb4":7.05,ukqz28:7.1,"1pnhhxc":7.15,"1px79c":7.2,"1a448hs":7.25,nx0pvk:7.3,"1wb7r40":7.35,bpil1c:7.4,"16s93wg":7.45,xwm3nk:7.5,"1hvsv7k":7.55,"51sbuo":7.6,"1dfzd34":7.65,lk464g:7.7,"1tyb7cw":7.75,h4ao00:7.8,"113hfk0":7.85,s7ufb4:7.9,"1naky68":7.95,"2ovs3k":8,ovzaps:8.1,"9cm1a8":8.2,"14fck5c":8.25,vjpjwg:8.3,"8smuio":8.4,jw6lts:8.5,fgd3pc:8.6,tvrzls:8.7,"1oyiigw":8.75,"10y7sw":8.8,n81qf4:8.9,cehkhs:9,yll340:9.1,"5qrbb4":9.2,"1e4ycjk":9.25,k6677k:9.3,fqcp34:9.4,qtwge8:9.5,"42tr0g":9.6,q9x9mo:9.7,"1yo4av4":9.75,aqk074:9.8,wxnitc:9.9,"7eovls":10,ii8mww:10.1,e2f4sg:10.2,"137nc3k":10.25,uc0buo:10.3,"1h6k1s":10.4,noa2o0:10.5,bgrxts:10.6,xnvgg0:10.7,"1hn2800":10.75,"4t1on4":10.8,m0cidc:10.9,hkj08w:11,so2rk0:11.1,"3544cg":11.2,"1bjb5kw":11.25,pc7myo:11.3,"9sudj4":11.4,vzxw5c:11.5,"7ux7uo":11.6,iygz5s:11.7,"1rco0e8":11.75,einh1c:11.8,sy2cxs:11.9,"38l4w":12,mac3r4:12.1,cupwqo:12.2,"17xgfls":12.25,z1tfcw:12.3,"66znk0":12.4,kmejgg:12.5,g6l1c0:12.6,"1mcvbi8":12.7,ra4sn4:12.75,"3u33sw":12.8,q16mf4:12.9,ahtczk:13,wowvls:13.1,"75y8e8":13.2,"1fk59mo":13.25,i9hzpc:13.3,dtohkw:13.4,v0zbb4:13.5,"265ji8":13.6,od924g:13.7,"1wrg3cw":13.75,c5qxa8:13.8,ycufwg:13.9,"5i0o3k":14,lbdiww:14.1,gvk0sg:14.2,"10uqscg":14.25,rz3s3k:14.3,"2g54w0":14.4,on8ni8:14.5,"93ve2o":14.6,vaywow:14.7,"1ldwqo0":14.75,"8jw7b4":14.8,jnfym8:14.9,f7mghs:15,tn1ce8:15.1,s7klc:15.2,"196elts":15.25,mzb37k:15.3,ci8f0g:15.4,ypbxmo:15.5,"5ui5ts":15.6,k9x1q8:15.7,"1so42yo":15.75,fu3jls:15.8,qxnaww:15.9,"46klj4":16,qdo45c:16.1,auaups:16.2,"15x1dkw":16.25,x1edc0:16.3,"7ifq4g":16.4,ilzhfk:16.5,e65zb4:16.6,tziu4g:16.7,"1p29czk":16.75,"14p2bk":16.8,nbskxs:16.9,b4ag3k:17,xbdyps:17.1,"4gk6ww":17.2,"1cur85c":17.25,lnv0n4:17.3,h81iio:17.4,sbl9ts:17.5,"2smmm8":17.6,ozq58g:17.7,"1xdx6gw":17.75,"9gcvsw":17.8,vngef4:17.9,"87epkw":18,jaygw0:18.1,ev4yrk:18.2,"1266uww":18.25,tajuo0:18.3,fq2v4:18.4,mmtlhc:18.5,d77egw:18.6,zeax34:18.7,"1jdhon4":18.75,"6jh5a8":18.8,kyw16o:18.9,gj2j28:19,rmmadc:19.1,"3hlm2o":19.2,"1bvsnb4":19.25,pop4ow:19.3,a5bv9c:19.4,wcfdvk:19.5,"6tgqo0":19.6,hx0hz4:19.7,"1qb7j7k":19.75,dh6zuo:19.8,uohtkw:19.9,"1to1s0":20,lgzsow:20.5,"99hnuo":21,tsnm68:21.5,"5nmxvk":22,q6sw74:22.5,dzarcw:23,xthq80:23.5,"3aqe4g":24,j438xs:24.5,d0c6io:25,rfr2f4:25.5,"6z30g0":26,o6du68:26.5,goosu8:27,v43oqo:27.5,lccn4:28,kfjbi8:28.5,azx4hs:29,u553wg:29.5,"4m6gow":30,p5cf0g:30.5,es0lc0:31,zb6jnk:31.5,"3eh8n4":32,htw4jk:32.5,bq524g:33,s8gwe8:33.5,"8t9bls":34,n8o7i8:34.5,fqz668:35,wy9zwg:35.5,"1e26m8":36,lx84xs:36.5,"9pq03k":37,suxzi8:37.5,"63va4g":38,py28zk:38.5,dqk45c:39,y9q2gw:39.5,"2d0rgg":40,jkbl6o:40.5,cmai2o:41,r1pdz4:41.5,"7mht6o":42,nfuo00:42.5,hc3lkw:43,vrihhc:43.5,js5xc:44,l2y48w:44.5,a9dybk:45,usjwn4:45.5,"59l9fk":46,oraqkg:46.5,fbojk0:47,ygwiyo:47.5,"3y56v4":48,idk2rk:48.5,bku0w0:49,ss4um8:49.5,"7yzaww":50,mee6tc:50.5,gan4e8:51,wk8bgg:51.5,"21gzcw":52,l6oyrk:52.5,"8z6txc":53,tics8w:53.5,"62b3eo":54,qlh1q8:54.5,edyww0:55,xj6wao:55.5,"30fk74":56,j69wqo:56.5,d2iubk:57,rhxq80:57.5,"6os6io":58,nw308w:58.5,h3cydc:59,viru9s:59.5,"100i68":60,k58hkw:60.5,apmakg:61,ucy1hc:61.5,"4tze9s":62,pd5clc:62.5,ejl6o0:63,z2r4zk:63.5,"3v0tfk":64,iafpc0:64.5,c6omww:65,s01hq8:65.5,"8ktwxs":66,n08su8:66.5,fv198g:67,x2c2yo:67.5,"15mry8":68,losq9s:68.5,"9halfk":69,tbhkao:69.5,"6keuww":70,ppmubk:70.5,di4phc:71,y1answ:71.5,"2ktp1c":72,js4irk:72.5,cafhfk:73,qpudc0:73.5,"7amsjk":74,nsymtc:74.5,hp7ke8:75,w4mgao:75.5,"7x5a8":76,kr33ls:76.5,aa0feo:77,ut6dq8:77.5,"5a7qio":78,offpxc:78.5,eztiww:79,yu0hs0:79.5,"4b95og":80,iqo1kw:80.5,b8z08w:81,sg9tz4:81.5,"86bdog":82,mlq9kw:82.5,ghz75s:83,wbc1z4:83.5,"1skpvk":84,lmroqo:84.5,"9f9jwg":85,tyfi80:85.5,"5tetxc":86,qcks8w:86.5,e52neo:87,xms4jk:87.5,"340sg0":88,ixdn9c:88.5,ctmku8:89,r91gqo:89.5,"74uwhs":90,oc5q80:90.5,gugow0:91,v9vksg:91.5,r48ow:92,kckkcg:92.5,awydc0:93,u26cqo:93.5,"4j7pj4":94,p2dnuo:94.5,exshds:95,zgyfpc:95.5,"3k94ow":96,hzo0lc:96.5,bvwy68:97,s1raps:97.5,"8mjpxc":98,n1ylts:98.5,fk9khs:99,wrke80:99.5,"1ju2o0":100},kp={"1rxsmww":.01,anylfk:.02,"1a6imf4":.03,jjllog:.04,"1j25mo0":.05,"1sbl6o":.06,"11avm68":.07,wv241s:.08,"1wdm51c":.09,f3s3k0:.1,"1emc4jk":.11,nzf3sw:.12,"1nhz4sg":.13,"6853b4":.14,"15qp4ao":.15,un5czk:.16,"1u5pdz4":.17,cvvchs:.18,"1cefdhc":.19,lricqo:.2,"1la2dq8":.21,"408c8w":.22,"13isd8g":.23,z2yv40:.24,"1yliw3k":.25,hboum8:.26,"1gu8vls":.27,q7buv4:.28,"1ppvvuo":.29,"8g1udc":.3,"17ylvcw":.31,rba8e8:.32,"1qtu9ds":.33,"9k07wg":.34,"192k8w0":.35,ifn85c:.36,"1hy794w":.37,od7nk:.38,"106x8n4":.39,vr3qio:.4,"1v9nri8":.41,dztq0w:.42,"1didr0g":.43,mvgq9s:.44,"1me0r9c":.45,"546ps0":.46,"14mqqrk":.47,tj6zgg:.48,"1t1r0g0":.49,brwyyo:.5,"1bagzy8":.51,knjz7k:.52,"1k64074":.53,"2w9yps":.54,"12etzpc":.55,xz0hkw:.56,"1xhkikg":.57,g7qh34:.58,"1fqai2o":.59,p3dhc0:.6,"1olxibk":.61,"7c3gu8":.62,"16unhts":.63,rv9f5s:.64,"1rdtg5c":.65,a3zeo0:.66,"19mjfnk":.67,izmeww:.68,"1ii6fwg":.69,"18cef4":.7,"10qwfeo":.71,wb2xa8:.72,"1vtmy9s":.73,ejswsg:.74,"1e2cxs0":.75,nffx1c:.76,"1mxzy0w":.77,"5o5wjk":.78,"156pxj4":.79,u36680:.8,"1tlq77k":.81,cbw5q8:.82,"1bug6ps":.83,l7j5z4:.84,"1kq36yo":.85,"3g95hc":.86,"12yt6gw":.87,yizocg:.88,"1y1jpc0":.89,grpnuo:.9,"1ga9ou8":.91,pnco3k:.92,"1p5wp34":.93,"7w2nls":.94,"17emolc":.95,qrb1mo:.96,"1q9v2m8":.97,"90114w":.98,"18il24g":.99,hvo1ds:1,"1he82dc":1.01,"4e0w0":1.02,zmy1vk:1.03,v74jr4:1.04,"1upokqo":1.05,dfuj9c:1.06,"1cyek8w":1.07,mbhji8:1.08,"1lu1khs":1.09,"4k7j0g":1.1,"142rk00":1.11,sz7sow:1.12,"1shrtog":1.13,b7xs74:1.14,"1aqht6o":1.15,k3ksg0:1.16,"1jm4tfk":1.17,"2cary8":1.18,"11uusxs":1.19,xf1atc:1.2,"1wxlbsw":1.21,fnrabk:1.22,"1f6bbb4":1.23,ojeakg:1.24,"1o1ybk0":1.25,"6s4a2o":1.26,"16aob28":1.27,sp87b4:1.28,"1s7s8ao":1.29,axy6tc:1.3,"1agi7sw":1.31,jtl728:1.32,"1jc581s":1.33,"22b6kg":1.34,"11kv7k0":1.35,x51pfk:1.36,"1wnlqf4":1.37,fdroxs:1.38,"1ewbpxc":1.39,o9ep6o:1.4,"1nryq68":1.41,"6i4oow":1.42,"160opog":1.43,ux4ydc:1.44,"1ufozcw":1.45,d5uxvk:1.46,"1coeyv4":1.47,m1hy4g:1.48,"1lk1z40":1.49,"4a7xmo":1.5,"13srym8":1.51,zcyghs:1.52,"1yvihhc":1.53,hlog00:1.54,"1h48gzk":1.55,qhbg8w:1.56,"1pzvh8g":1.57,"8q1fr4":1.58,"188lgqo":1.59,rl9ts0:1.6,"1r3turk":1.61,"9tzta8":1.62,"19cju9s":1.63,ipmtj4:1.64,"1i86uio":1.65,yct1c:1.66,"10gwu0w":1.67,w13bwg:1.68,"1vjncw0":1.69,e9tbeo:1.7,"1dsdce8":1.71,n5gbnk:1.72,"1mo0cn4":1.73,"5e6b5s":1.74,"14wqc5c":1.75,tt6ku8:1.76,"1tbqlts":1.77,c1wkcg:1.78,"1bkglc0":1.79,kxjklc:1.8,"1kg3lkw":1.81,"369k3k":1.82,"12otl34":1.83,y902yo:1.84,"1xrk3y8":1.85,ghq2gw:1.86,"1g0a3gg":1.87,pdd2ps:1.88,"1ovx3pc":1.89,"7m3280":1.9,"174n37k":1.91,s590jk:1.92,"1rnt1j4":1.93,adz01s:1.94,"19wj11c":1.95,j9m0ao:1.96,"1is61a8":1.97,"1ibzsw":1.98,"110w0sg":1.99,wl2io0:2,"1w3mjnk":2.01,etsi68:2.02,"1eccj5s":2.03,npfif4:2.04,"1n7zjeo":2.05,"5y5hxc":2.06,"15gpiww":2.07,ud5rls:2.08,"1tvpslc":2.09,clvr40:2.1,"1c4fs3k":2.11,lhircw:2.12,"1l02scg":2.13,"3q8qv4":2.14,"138sruo":2.15,ysz9q8:2.16,"1ybjaps":2.17,h1p98g:2.18,"1gk9a80":2.19,pxc9hc:2.2,"1pfwagw":2.21,"8628zk":2.22,"17om9z4":2.23,r1an0g:2.24,"1qjuo00":2.25,"9a0mio":2.26,"18skni8":2.27,i5nmrk:2.28,"1ho7nr4":2.29,edm9s:2.3,zwxn9c:2.31,vh454w:2.32,"1uzo64g":2.33,dpu4n4:2.34,"1d8e5mo":2.35,mlh4w0:2.36,"1m415vk":2.37,"4u74e8":2.38,"14cr5ds":2.39,t97e2o:2.4,"1srrf28":2.41,bhxdkw:2.42,"1b0hekg":2.43,kdkdts:2.44,"1jw4etc":2.45,"2madc0":2.46,"124uebk":2.47,xp0w74:2.48,"1x7kx6o":2.49,fxqvpc:2.5,"1fgawow":2.51,otdvy8:2.52,"1obxwxs":2.53,"723vgg":2.54,"16knwg0":2.55,sk8em8:2.56,"1s2sfls":2.57,asye4g:2.58,"1abif40":2.59,joledc:2.6,"1j75fcw":2.61,"1xbdvk":2.62,"11fvev4":2.63,x01wqo:2.64,"1wilxq8":2.65,f8rw8w:2.66,"1erbx8g":2.67,o4ewhs:2.68,"1nmyxhc":2.69,"6d4w00":2.7,"15vowzk":2.71,us55og:2.72,"1uap6o0":2.73,d0v56o:2.74,"1cjf668":2.75,lwi5fk:2.76,"1lf26f4":2.77,"4584xs":2.78,"13ns5xc":2.79,z7ynsw:2.8,"1yqiosg":2.81,hgonb4:2.82,"1gz8oao":2.83,qcbnk0:2.84,"1puvojk":2.85,"8l1n28":2.86,"183lo1s":2.87,rga134:2.88,"1qyu22o":2.89,"9p00lc":2.9,"197k1kw":2.91,ikn0u8:2.92,"1i371ts":2.93,td0cg:2.94,"10bx1c0":2.95,vw3j7k:2.96,"1venk74":2.97,e4tips:2.98,"1dndjpc":2.99,n0giyo:3,"1t6qt4w":3.05,"319reo":3.1,"1fvaark":3.15,s097uo:3.2,"1in68lc":3.25,eosphc:3.3,"15bpq80":3.35,lciyo0:3.4,"1y6ji0w":3.45,"812gao":3.5,"18nkutc":3.55,vc4cg0:3.6,"1lz1d6o":3.65,bcxkw0:3.7,"11zulmo":3.75,ooe39c:3.8,"1scs0zk":3.85,"27az9c":3.9,"1f1bim8":3.95,v24r28:4,"1lp1rsw":4.05,hqo8ow:4.1,"18dl9fk":4.15,iumm80:4.2,"1von5kw":4.25,"5j63uo":4.3,"1bpge0w":4.35,ydzvnk:4.4,"1p0wwe8":4.45,aiysqo:4.5,"115vthc":4.55,nufb40:4.6,"1u0pla8":4.65,"3v8jk0":4.7,"1gp92ww":4.75,r6afpc:4.8,"1ht7gg0":4.85,dutxc0:4.9,"14hqy2o":4.95,kik6io:5,"1xckpvk":5.05,"773o5c":5.1,"1a40q2o":5.15,wsk7pc:5.2,"1nfh8g0":5.25,ctdg5c:5.3,"13gagw0":5.35,q4tyio:5.4,"1qrcd1c":5.45,lvbb4:5.5,"1dfvuo0":5.55,tgp340:5.6,"1k3m3uo":5.65,g58kqo:5.7,"16s5lhc":5.75,ix4ikg:5.8,"1vr51xc":5.85,"5lo074":5.9,"1bryadc":5.95,yghs00:6,"1p3esqo":6.05,"8xj4sg":6.1,zkg5j4:6.15,m8zn5s:6.2,"1sf9xc0":6.25,"29svls":6.3,"1f3teyo":6.35,smqayo:6.4,"1j9nbpc":6.45,fb9slc:6.5,"15y6tc0":6.55,lz01s0:6.6,"1yt0l4w":6.65,"8njjeo":6.7,"19a1xxc":6.75,vylfk0:6.8,"1mligao":6.85,bzeo00:6.9,"12mboqo":6.95,pav6dc:7,"1rlb56o":7.05,"1fu3gg":7.1,"1e9umtc":7.15,uanv9c:7.2,"1kxkw00":7.25,gz7cw0:7.3,"17m4dmo":7.35,i35qf4:7.4,"1ux69s0":7.45,"4rp81s":7.5,"1axzi80":7.55,xmizuo:7.6,"1o9g0lc":7.65,aqghs0:7.7,"11ddiio":7.75,o1x05c:7.8,"1u87abk":7.85,"42q8lc":7.9,"1gwqry8":7.95,rds4qo:8,cee22o:8.5,jw33eo:9,"38rgg0":9.5,vjm1hc:10,hafwg0:10.5,ne6yv4:11,"6qvbwg":11.5,trxmo0:12,"98rocg":12.5,lv979c:13,"1c38xs":13.5,xis5c0:14,edk5xc:14.5,q13400:15,"64e8sg":15.5,rrikn4:16,b46xog:16.5,ilvz0g:17,"3mhwcg":17.5,wwb280:18,g8zf9c:18.5,mcqhog:19,"8radxc":19.5,ueeps0:20,kmxi4g:21,zcbzeo:22,osrev4:23,qvod8g:24,jdzbwg:25,vnzd34:26,o6abr4:27,t630n4:28,l9el8g:29,yavi80:30,q5gfls:31,sncs1s:32,i3s7i8:33,we7aps:34,n8kp34:35,uis1ds:36,jz7gu8:37,yoly4g:38,p3zyf4:39,rlwav4:40,jjwu80:41,v7fsao:42,npqqyo:43,toi0ow:44,m6szcw:45,xubxfk:46,pl60ao:47,s32cqo:48,iigd1c:49,x7uubk:50,gkj7cw:50.5,moa9s0:51,"8f44qo":51.5,u28glc:52,ax0h6o:52.5,kwluyo:53,dfwn4:53.5,z70y68:54,enuzuo:54.5,ongdmo:55,"5i8e80":55.5,r5cq2o:56,csfqio:56.5,iw6sxs:57,"28v5z4":57.5,vxnpxc:58,gy9n9c:58.5,o0zaio:59,"7dnnk0":59.5,t0rzeo:60,"9vk000":60.5,lj2y2o:61,"1s0cn4":61.5,xyp91c:62,dfjaps:62.5,qh07pc:63,"5xu9ds":63.5,sjx62o:64,bwlj40:64.5,i0clj4:65,"4ewhs0":65.5,wpr2tc:66,g2ffuo:66.5,msnlds:67,"7t9ips":67.5,uubthc:68,ab5v5s:68.5,kar8xs:69,qjvgg:69.5,yl6c5c:70,ffycqo:70.5,pfjqio:71,"4wds74":71.5,r9q1og:72,cabz0g:72.5,js10cg:73,"34pdds":73.5,vfjyf4:74,hf4glc:74.5,nivj0g:75,"6vjw1s":75.5,twm6tc:76,"9dg8hs":76.5,lng9og:77,"14abcw":77.5,xaz7r4:78,e5r8cg:78.5,pta6f4:79,"692sxs":79.5,rw74sg:80,b8vhts:80.5,iqkj5s:81,"3r6ghs":81.5,wv7qbk:82,g7w3cw:82.5,mbn5s0:83,"8q720w":83.5,udbdvk:84,at40e8:84.5,kspe68:85,"9jfuo":85.5,zi3vgg:86,eyxx4w:86.5,oyjaww:87,"51ufpc":87.5,qoyrk0:88,d3insw:88.5,j79q80:89,"2jy39c":89.5,vtr94w:90,gud6gw:90.5,oc27sw:91,"7oqku8":91.5,tbuwow:92,"9iww00":92.5,l6fu2o:93,"217uo0":93.5,y7wr28:94,doqsqo:94.5,qb8bnk:95,"5s2dc0":95.5,st4o3k:96,c5t14w:96.5,i9k3k0:97,"3wn400":97.5,w7hp1c:98,fk622o:98.5,n1v3eo:99,"82h0qo":99.5,uojxfk:100},Ap=e=>{let t=e.indexOf(`_`);return t===-1?e:e.substring(t+1)},jp=(e,t)=>t?kp[Ap(e)]:Op[Ap(e)],Mp=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`AmazonHoldDisplay`,this._lookup=`AMZN_HOLD_DISP`}run(){return super.run()}};w([R()],Mp.prototype,`run`,null),Mp=w([S()],Mp);let Np=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`AmazonTrafficShaping`,this._lookup=`AMZNTS`}};Np=w([S()],Np);let Pp=class{constructor(){C(this,`_initialized`,!1),C(this,`_initPromise`,null),C(this,`_initComplete`,new T)}async ready(){this._initialized||await(this._initPromise??new Promise(e=>{this._initComplete.once(()=>{e()})}))}isAmazonLoaded(){return!!window.apstag}init(e){this.isAmazonLoaded()&&window.apstag.init(e),this._initialized=!0,this._initComplete.emit()}async fetchBids(e,t){await this.ready(),this.isAmazonLoaded()&&window.apstag.fetchBids(e,t)}async setDisplayBids(){await this.ready(),this.isAmazonLoaded()&&window.apstag.setDisplayBids()}async targetingKeys(){return await this.ready(),this.isAmazonLoaded()?window.apstag.targetingKeys():[]}async rpa(e){await this.ready(),this.isAmazonLoaded()&&window.apstag.rpa(e,this.tokenCallback,!1)}async upa(e){await this.ready(),this.isAmazonLoaded()&&window.apstag.upa(e,this.tokenCallback,!1)}tokenCallback(e){e&&(document.cookie=`AMZN-Token=${e.AIPToken}; expires=${e.cookieExpiry}; path=/;`)}async dpa(e){await this.ready(),this.isAmazonLoaded()&&window.apstag.dpa(e)}async renderImp(e,t){await this.ready(),this.isAmazonLoaded()&&window.apstag.renderImp?.(e,t)}setupAmazonWindow(e){window.apstag={init:()=>{e(`i`,arguments)},customPlacements:()=>({}),fetchBids:()=>{e(`f`,arguments)},setDisplayBids:()=>{},targetingKeys:()=>[],dpa:()=>{e(`di`,arguments)},rpa:()=>{e(`ri`,arguments)},upa:()=>{e(`ui`,arguments)},queue:[]}}queuePush(e,t){window.apstag.queue.push([e,t,new Date().getTime()])}};Pp=w([S()],Pp);let Fp=`AmazonAuctionManager`,Ip=class extends Cp{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p){super(),this._config=e,this._amazonMethods=t,this._amazonHoldDisplayExperiment=n,this._videoEventBus=r,this._bootstrapConfig=i,this._firstPartyDataComponent=a,this._ortb2=o,this._gdprEnforcement=s,this._gdprEvents=c,this._slotEventBus=l,this._floorsEventBus=u,this._amazonEventBus=d,this._amazonTrafficShapingExperiment=f,this._bidCPMAdjuster=p,C(this,`videoSlotNames`,new Map),C(this,`_amazonConfig`,void 0),C(this,`_gptSlot`,new Map),C(this,`_encrypted_cpm_key`,`amznbid`),C(this,`_encrypted_bidder_key`,`amznp`),C(this,`_encrypted_deal_cpm_key`,`amznbid_sp`),C(this,`_encrypted_deal_bidder_key`,`amznp_sp`),C(this,`_decrypted_cpm_key`,`amz_pb`),C(this,`_decrypted_bidder_key`,`amz_bidder`),C(this,`_decrypted_deal_cpm_key`,`amz_pb_sp`),C(this,`_decrypted_deal_bidder_key`,`amz_bidder_sp`),C(this,`_amazon_size_key`,`amznsz`),C(this,`_amazonEncryptedTargetingKeysToRemove`,[`amznp`,`amznp_sp`]),C(this,`_amazonRaptiveFloorKeys`,new Map),C(this,`_floors`,new Map),C(this,`_initialized`,!1),C(this,`_unitBidMapping`,new Map),this._amazonConfig={pubID:this._config.amazon.pubId,deals:this._config.adOptions.pmp,adServer:`googletag`,videoAdServer:`DFP`,...this._config.ccpa.required&&this._config.ccpa.privacyString&&{params:{us_privacy:this._config.ccpa.privacyString}},schain:new Tp().getSupplyChainConfig(this._config.site.id)}}init(){this.videoSlotNames=this._initVideoSlotMap(),this._setup()}async _awaitAmazonReady(){return new Promise(e=>{this._amazonEventBus.initialized.once(()=>{e()})})}async _setup(){await this.checkLibLoaded(`init`),this._listenForOutsideGAMRender(),this._listenForAmazonFloors(),this._setupFpdForCCPA(),this._setupFpdForGDPR(),!this._config.ccpa.required&&!this._config.gdpr.enabled&&this._toggleFPDToAmzConfig(!0),this._amazonMethods.init(this._amazonConfig),this._initialized=!0,this._amazonEventBus.initialized.emit()}_listenForAmazonFloors(){this._floorsEventBus.setAmazonFloors.on(e=>{e.forEach(({code:e,value:t,currency:n})=>{this._floors.set(e,{value:t,currency:n})})}),this._floorsEventBus.clearAllFloorData.on(()=>{this._floors=new Map})}_listenForOutsideGAMRender(){this._slotEventBus.adRenderingOutsideGAM.on(({slotId:e})=>{this._config.amazon.availableBids.delete(e)}),this._videoEventBus.videoAdRenderingOutsideGam.on(e=>{this._config.amazon.availableBids.delete(e)})}_setupFpdForGDPR(){this._config.gdpr.enabled&&this._gdprEvents.consentResponseCaptured.on(()=>{this._gdprEnforcement.checkConsentForVendor(this._config.gdpr.raptiveVendorId,[1]).then(e=>{this._toggleFPDToAmzConfig(!!e),this._amazonMethods.init(this._amazonConfig)}).catch(()=>{})})}_setupFpdForCCPA(){this._config.ccpa.required&&(this._config.ccpa.userOptedOut||this._toggleFPDToAmzConfig(!0),this._config.ccpa.consentChange.on(e=>{this._amazonConfig.params&&e&&(this._amazonConfig.params.us_privacy=e),this._toggleFPDToAmzConfig(e!==this._config.ccpa.ccpaOptOut),this._amazonMethods.init(this._amazonConfig)}))}_toggleFPDToAmzConfig(e=!0){if(e){let e={site:{...this._ortb2.data.site,cattax:1},user:{...this._ortb2.data.user}},t={ext:{data:{mcmp:[...this._config.marmalade.mcmp,...this._config.marmalade.rfMcmpCodes.map(e=>e[0])],...this._firstPartyDataComponent.staticFirstPartyData}}};e.site={...e.site,...t},this._amazonConfig={...this._amazonConfig,signals:{ortb2:{...e}}}}else delete this._amazonConfig.signals}clearAuctionTargeting(e){this._clearAmazonKeys([e])}async requestBids(e,t=this._config.timeouts.initialBidsRequest-200,n=!1){try{if(!await this.checkLibLoaded(`requestBids`))return;let r=e.map(e=>e.name),i=rc.markStartTask(`microtask`,[`AmazonAuctionManager`,`requestBids`]);i.addMetadata({slotNames:r});let a=this.filterExcludedSlots(e,this._config.amazon.adUnitExclusions);if(!a.length){i.markEndTask();return}this._initialized||await this._awaitAmazonReady(),a.forEach(e=>{this._resetAmazonBidMapCpm(e)}),this._mapGptSlotsFromManagedSlots(a);let o=this._requestBidsFromAmazon(a,t,n);return i.markEndTask(),await o}catch(e){E.error(Fp,`requestBids`,e);return}}_getBidsInCache(e,t){let n=this._unitBidMapping.get(e);return{bids:n?[{cpm:n}]:[],requests:1,responses:n?1:0,refresh:t}}async _setBidsInCache(e){let t=`_setBidsInCache`,n=new Map;try{if(!await this.checkLibLoaded(t))return n;e.forEach(e=>{let t=`id`in e?e.id:e.name,r=this._unitBidMapping.get(t)??0?1:0;n.set(t,r)})}catch(e){return E.error(Fp,t,e),n}return n}async setPreAuctionBidCacheData(e){return this._setBidsInCache(e)}async setDisplayBidCacheTargeting(e){return this._setDecryptedBidsBasedOnSlotTargetingForSlots(e),this._removeAmazonEncryptedSlotTargetingForSlots(e),this._setBidCacheTargeting(e)}async setInstreamBidCacheTargeting(e){return this._setBidCacheTargeting(e)}async _setBidCacheTargeting(e){let t=`_setBidCacheTargeting`,n=new Map;try{if(!await this.checkLibLoaded(t))return n;e.forEach(e=>{let t=`id`in e,r=t?e.id:e.name,i=t?e.refreshCount:e.prerollNum,a=this._getBidsInCache(r,i);n.set(r,a)})}catch(e){return E.error(Fp,t,e),n}return n}filterExcludedSlots(e,t){let n=this._config.trafficShaping;return e.filter(e=>{let r=n.active&&this._amazonTrafficShapingExperiment.result&&n.getRule(e.location,e.refreshCount)?.tam;return e.googleTagSlot!==void 0&&!t.has(e.location)&&e.location!==H.Native_Recipe&&!r})}getAmazonSlots(e){let{id:t}=this._config.site,{networkCode:n,prefix:r}=this._config.gam;return e.map(e=>{let i=e.element.id,a=this._getAmazonFloors(i,e.hvp);return{slotID:i,slotName:`/${n}/${r}_${e.name}/${t}`,sizes:e.sizes,...e.location===H.Video_StickyOutstream&&{mediaType:`video`},...a&&a.value>0&&a.currency&&{floor:{value:Math.ceil(a.value*100),currency:a.currency}}}})}_getAmazonRaptiveFloorKeys(e){let t=e.join(`-`),n=this._amazonRaptiveFloorKeys.get(t)||[];if(!n.length){let r=e.map(e=>[e,`*`]);n=bp(r,`-`),this._amazonRaptiveFloorKeys.set(t,n)}return n}_getAmazonFloors(e,t){let n=this._config,r=this._floors,i=e.toLowerCase(),a=r.get(i),o=n.floors.floorsExperiment;if(!a&&(o.raptive||o.fbrap)){let e=this._getAmazonRaptiveFloorKeys([i,`${t||0}`]);for(let t of e){let e=r.get(t);if(e)return e}}return a}_mapGptSlotsFromManagedSlots(e,t=this._gptSlot){e.forEach(e=>t.set(e.element.id,e.googleTagSlot))}get amazonHoldDisplayExperimentResult(){return this._amazonHoldDisplayExperiment.result}_requestBidsFromAmazon(e,t,n){return new Promise(r=>{let i=()=>{e.forEach(e=>{this._resetAmazonSlotCpm(e)})},a=t+(e[0].refreshCount?0:this._config.amazon.failsafeTimeout),o=setTimeout(()=>void this._failsafe(i,r),a),s=()=>{r(),clearTimeout(o)},c=()=>{Z.pushToQueue(async()=>{try{await this._amazonMethods.setDisplayBids()}catch(e){E.error(Fp,`_requestBidsFromAmazon`,e)}i(),s()})},l={slots:this.getAmazonSlots(e),timeout:t,params:{adRefresh:n?`1`:`0`}};this._makeAmazonRequest(l,c),this.amazonHoldDisplayExperimentResult||s()})}async _failsafe(e,t){await this._amazonMethods.setDisplayBids(),e(),t()}async _makeAmazonRequest(e,t){await this._amazonMethods.fetchBids(e,t)}_resetAmazonBidMapCpm(e){let t=`id`in e?e.id:e.name;this._unitBidMapping.get(t)&&this._unitBidMapping.delete(t)}_resetAmazonSlotCpm(e){let t=`id`in e?e.id:e.name;this.amazonSlotCpm.get(t)&&this.amazonSlotCpm.delete(t)}_setDecryptedBidsBasedOnSlotTargetingForSlots(e){e.forEach(e=>this._setDecryptedBidsBasedOnSlotTargeting(e))}_removeAmazonEncryptedSlotTargetingForSlots(e){e.forEach(e=>this._removeAmazonEncryptedSlotTargeting(e))}_removeAmazonEncryptedSlotTargeting(e){let t=e.googleTagSlot.getTargetingKeys()||[];this._amazonEncryptedTargetingKeysToRemove.forEach(n=>{t.includes(n)&&e.googleTagSlot.clearTargeting(n)})}_setDecryptedBidsBasedOnSlotTargeting(e,t=this._gptSlot){this._decryptAmazonDisplayBidAndSetTargeting(this._getReconstructedAmazonBidBasedOnSlotTargeting(e),t,e)}_getReconstructedAmazonBidBasedOnSlotTargeting(e){let t={};return this._config.amazon.getEncryptedTargetingKeys().forEach(n=>{let r=e.googleTagSlot?.getTargeting(n);r?.length&&(t[n]=r[0])}),{slotID:e.element.id,size:t.amznsz??``,targeting:t}}_decryptAmazonDisplayBidAndSetTargeting(e,t=this._gptSlot,n){let r=t.get(e.slotID),i=this._decryptAmazonBid(e),{bidder:a,cpm:o,mediaType:s,pmpCpm:c,pmpBidder:l,pmpMediaType:u}=i,d=!!a&&this._partnerEnabled(a),f=!!l&&this._partnerEnabled(l),p={standard:{originalCpm:0,discount:0},pmp:{originalCpm:0,discount:0}};if(!r)return;let m=this._bidCPMAdjuster;if(o&&a&&d){let t=m.adjustAmazonBidPrice(i,a,o,s),n=m.bucketBidPrice(t),c=o-t;p.standard.originalCpm=o,p.standard.discount=c,this._setDisplayTargeting(e,a,n,r,s,this._decrypted_cpm_key,this._decrypted_bidder_key)}else this._clearAmazonKeys([n],this._config.amazon.getEncryptedTargetingKeys({nonDealKeys:!0}));if(c&&l&&f){let t=m.adjustAmazonBidPrice(i,l,c,u),n=m.bucketBidPrice(t),a=c-t;p.pmp.originalCpm=c,p.pmp.discount=a,this._setDisplayTargeting(e,l,n,r,u,this._decrypted_deal_cpm_key,this._decrypted_deal_bidder_key)}else this._clearAmazonKeys([n],this._config.amazon.getEncryptedTargetingKeys({dealKeys:!0}));(d||f)&&(this._config.amazon.availableBids.set(e.slotID,i),this._setAmazonSlotCpm(n,p.standard.originalCpm,p.pmp.originalCpm),this._setAmazonDiscountTargeting(p,n))}_partnerEnabled(e){return this._config.partners.getBidderConfig(e,!1).enabled}_setAmazonSlotCpm(e,t,n){let r=t>n?t:n;if(`id`in e){let i=e.id;this.amazonSlotCpm.set(i,r),this._unitBidMapping.set(i,r),this._slotEventBus.amazonBidResponseReceived.emit([{slotId:e.id,cpm:t,location:e.location,lazy:e.lazy},{slotId:e.id,cpm:n,location:e.location,lazy:e.lazy}])}else{let i=e.name;this.amazonSlotCpm.set(i,r),this._unitBidMapping.set(i,r),this._videoEventBus.amazonVideoBidResponseReceived.emit([{video:e,cpm:t},{video:e,cpm:n}])}}_setAmazonDiscountTargeting(e,t){let{standard:n,pmp:r}=e,i=(e,n)=>{t.setSlotTargetingFlag(e,[n.toFixed(6).toString()],!0)};n.originalCpm&&i(`aop`,n.originalCpm),n.discount&&i(`apd`,n.discount),r.originalCpm&&i(`aopp`,r.originalCpm),r.discount&&i(`appd`,r.discount)}_setDisplayTargeting(e,t,n,r,i,a,o){r.setTargeting(a,n),r.setTargeting(o,t)}refreshBids(e){return this._clearAmazonKeys(e),this.requestBids(e,this._config.timeouts.refreshBidsRequest-200,!0)}_clearAmazonKeys(e,t){let n=t||this._config.amazon.amznTargetingKeys;e.forEach(e=>{if(e.googleTagSlot){let t=e.googleTagSlot.getTargetingKeys()||[];n.forEach(n=>t.includes(n)&&e.googleTagSlot.clearTargeting(n))}})}_isVideoPlayerFilteredOutByTrafficShaping(e){let t=this._config.trafficShaping;return!!(t.active&&this._amazonTrafficShapingExperiment.result&&t.getRule(e.name,e.prerollNum)?.tam)}async requestVideoBids(e,t=this._config.timeouts.initialBidsRequest-200){if(!await this.checkLibLoaded(`requestBids`))return;let n=this._amazonMethods,r=e.filter(e=>!this._isVideoPlayerFilteredOutByTrafficShaping(e));return r.length?(r.forEach(e=>{this._resetAmazonSlotCpm(e)}),Promise.all(r.map(e=>{let r=this._getAmazonFloors(e.name,0)||{value:0,currency:`USD`},i=r&&r.value||0,a=Math.ceil((Number(i)+this._config.video.minFloor)*100),o={slotID:this.videoSlotNames.get(e.amzName),mediaType:`video`,floor:{value:a,currency:r.currency||`USD`}};return new Promise(r=>{let i=t+(e.prerollNum?0:this._config.amazon.failsafeTimeout),a=setTimeout(()=>{r()},i),s=e=>{e?r(e):r(),clearTimeout(a)};this.checkLibLoaded(`requestVideoBids`).then(r=>{if(!r)return s();o?n.fetchBids({slots:[o],timeout:t},t=>{t.length?(e.setAmznBids(t),t.forEach(t=>{let{cpm:n,amznBid:r,discounts:i}=this._setDecryptedAmazonVideoKVs(t);n-i.standard.discount>0?this._setAmazonInstreamCPM(e,n,i,r,s):s()})):s()}):s()}).catch(e=>{E.error(Fp,`requestVideoBids`,e)})})})).then(()=>Promise.resolve()).catch()):Promise.resolve()}get videoEnabled(){return this._config.partners.video.get(`AmazonUAM`)}get enabled(){return Sp()?!1:this._amazonMethods.isAmazonLoaded()&&this._config.amazon.enabled}get amazonSlotCpm(){return this._config.floors.amazonSlotCpm}_decryptAmazonBid(e){let t={...e,...e.targeting},n=t[yp.amznbid]??``,r=jp(n,this._config.gam.isThirdPartyGam),i=t[yp.amznp]??``,a=this._config.gam.isThirdPartyGam?Dp:Ep,o=a.get(i)??``,s=t.amznbid_sp??``,c=`slotID`in t?t.slotID:``,l=this._getMediaType(s,c),u=jp(s,this._config.gam.isThirdPartyGam),d=t[`${yp.amznp}_sp`]??``,f=a.get(d)??``,p=t[`${yp.amzniid}_sp`]??``,m=t[`${yp.amznsz}_sp`],h=t.amznbid_sp??``,g=t.amzndeal_sp??``,_=this._getMediaType(n,c),v=t[yp.amznsz];return{...t,amznbid:n,amzniid:t.amzniid,bidder:o,cpm:r,mediaType:_,slotID:c,...s.length&&{pmpAmznBid:h,pmpAmazoniid:p,pmpBidder:f,pmpCpm:u,pmpDeal:g,pmpMediaType:l,mediaType_sp:l,pmpSize:m},size:v}}_getMediaType(e,t){let n=t.toLowerCase();return this._isStickyOustreamBid(e,n)?`stickyOutstream`:this._isInstreamOrAccompanyingContentBid(e,n)?`instream`:`default`}_isStickyOustreamBid(e,t){return e.startsWith(`o_`)&&t.indexOf(`stickyoutstream`)>-1}_isInstreamOrAccompanyingContentBid(e,t){return e.startsWith(`v_`)||e.startsWith(`o_`)&&(t.startsWith(`sticky_playlist`)||t.startsWith(`sticky_related`))}async checkLibLoaded(e){try{return await this._bootstrapConfig.bootstrapLoaders[ot.Amazon],!0}catch{return!1}}async _setAmazonInstreamCPM(e,t,n,r,i){this._setAmazonSlotCpm(e,n.standard.originalCpm,n.pmp.originalCpm),await this._videoEventBus.addAPStagSlotBidResponse.legacyEmit({playlistId:e._playlistId,bid:r,discounts:n}),i(t)}_initVideoSlotMap(){return It()?new Map([[A.Video_Collapse_Autoplay_SoundOff,`Sticky_Playlist_Desktop`],[A.Video_Individual_Autoplay_SOff,`Sticky_Related_Desktop`],[A.Video_In_Post_ClicktoPlay_SoundOn,`CTP_Desktop`],[A.Video_Collapse_Autoplay_SoundOff_15s,`Sticky_Playlist_Desktop_15s`],[A.Video_Individual_Autoplay_SOff_15s,`Sticky_Related_Desktop_15s`],[A.Video_In_Post_ClicktoPlay_SoundOn_15s,`CTP_Desktop_15s`]]):new Map([[A.Video_Coll_SOff_Smartphone,`Sticky_Playlist_Mobile`],[A.Video_Individual_Autoplay_SOff,`Sticky_Related_Mobile`],[A.Video_In_Post_ClicktoPlay_SoundOn,`CTP_Mobile`],[A.Video_Coll_SOff_Smartphone_15s,`Sticky_Playlist_Mobile_15s`],[A.Video_Individual_Autoplay_SOff_15s,`Sticky_Related_Mobile_15s`],[A.Video_In_Post_ClicktoPlay_SoundOn_15s,`CTP_Mobile_15s`]])}_getAdUnitFromSlotName(e){for(let[t,n]of this.videoSlotNames.entries())if(n===e)return t}_setDecryptedAmazonVideoKVs(e){let t={standard:{originalCpm:0,discount:0},pmp:{originalCpm:0,discount:0}},n=this._decryptAmazonBid(e),r=this._bidCPMAdjuster,{bidder:i,cpm:a,mediaType:o,pmpCpm:s,pmpBidder:c,pmpMediaType:l}=n;if(i&&a){let e=r.adjustAmazonBidPrice(n,i,a,o),s=r.bucketBidPrice(e),c=a-e;t.standard.originalCpm=a,t.standard.discount=c,n[this._decrypted_cpm_key]=`${s}`,n[this._decrypted_bidder_key]=i}if(s&&c){let e=r.adjustAmazonBidPrice(n,c,s,l),i=r.bucketBidPrice(e),a=s-e;t.pmp.originalCpm=s,t.pmp.discount=a,n.targeting?(n.targeting[this._decrypted_deal_cpm_key]=`${i}`,n.targeting[this._decrypted_deal_bidder_key]=`${c}`):(n[this._decrypted_deal_cpm_key]=`${i}`,n[this._decrypted_deal_bidder_key]=`${c}`)}let u=this._getAdUnitFromSlotName(e.slotID);return u&&this._config.amazon.availableBids.set(u,n),{amznBid:n,cpm:a,discounts:t}}};Ip=w([D(Fp),x(),N(0,b(J)),N(1,b(Pp)),N(2,b(Mp)),N(3,b(pc)),N(4,b(on)),N(5,b(pp)),N(6,b(Jf)),N(7,b(gp)),N(8,b(mp)),N(9,b(Hs)),N(10,b(vp)),N(11,b(_p)),N(12,b(Np)),N(13,b(wp))],Ip);let Lp=class{constructor(e){this._prebidMethods=e,C(this,`pubmaticBidderLevelEidSource`,void 0)}get isPubmaticEidSetByLiveIntent(){return this._prebidMethods.getUserIdsAsEids().some(e=>e.source===`pubmatic.com`&&e.uids.some(e=>e.ext?.provider===`liveintent.com`))??!1}};Lp=w([S(),N(0,b(P))],Lp);let Rp=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`SSPUserSync`,this._lookup=`SSPUS`}run(){return super.run()}};w([R()],Rp.prototype,`run`,null),Rp=w([S()],Rp);let zp=class extends I{constructor(e,t,n,r,i){super(),this._gpcConfig=e,this._ccpaConfig=t,this._prebidMethods=n,this._userSyncConfig=r,this._sspUserSyncExperiment=i,C(this,`_allowedDomains`,[`https://ads.pubmatic.com`]),C(this,`_sspToDetailsMap`,{pubmatic:{storageKey:`pubm`,bidderCode:G.Pubmatic}}),C(this,`_cachedMessages`,{})}get enabled(){return!this._gpcConfig.gpcEnabled&&!this._ccpaConfig.userOptedOut&&this._sspUserSyncExperiment.result}async init(){this.enabled&&(await vc(),this._loadMessagesFromStorage(),this._setupPostMessageListener())}getTargetingData(){let e=Object.keys(this._cachedMessages).filter(e=>{let t=this._cachedMessages[e];return!(this._sspToDetailsMap[t.ssp.toLowerCase()].bidderCode===G.Pubmatic&&this._userSyncConfig.isPubmaticEidSetByLiveIntent&&t.eid.source===`pubmatic.com`)});return e?e.map(e=>`ssp:${this._sspToDetailsMap[e].storageKey}`):[``]}_setupPostMessageListener(){window.addEventListener(`message`,e=>{if(this._isOriginAllowed(e.origin)){let t=null;try{typeof e.data==`string`?t=JSON.parse(e.data):typeof e.data==`object`&&(t=e.data)}catch(t){E.error(`SSPUserSyncComponent`,`_setupPostMessageListener`,`Error parsing message`,t,e.data)}t&&t.type===`ssp-user-sync`&&this._handlePostMessage(t)}})}_handlePostMessage(e){try{let t=e.ssp.toLowerCase();this._cachedMessages[t]||(this._storeMessage(e),this._processMessage(e),this._cachedMessages[t]=e)}catch(e){E.error(`SSPUserSyncComponent`,`_handlePostMessage`,`Error processing message`,e)}}_isOriginAllowed(e){return this._allowedDomains.includes(e)}_storeMessage(e){try{let t=e.ssp.toLowerCase(),n=this._sspToDetailsMap[t].storageKey||t.toLowerCase();L.setInternalLocalStorage(`adthrive_sspus_${n}`,e)}catch(e){E.error(`SSPUserSyncComponent`,`_storeMessage`,`Error storing SSPUserSyncMessage`,e)}}_loadMessagesFromStorage(){let e=Object.values(this._sspToDetailsMap).map(({storageKey:e})=>L.readInternalLocalStorage(`adthrive_sspus_${e}`)).filter(e=>e!==null);this._cachedMessages=e.reduce((e,t)=>{let n=t.ssp.toLowerCase();return e[n]=t,e},this._cachedMessages),e.forEach(e=>{this._processMessage(e)})}async _processMessage(e){let t=e.eid,n=this._sspToDetailsMap[e.ssp.toLowerCase()].bidderCode;if(!t||!n)return;let r=await this._prebidMethods.waitForQueue();n===G.Pubmatic&&r&&this._userSyncConfig.isPubmaticEidSetByLiveIntent&&t.source===`pubmatic.com`||n===G.Pubmatic&&this._userSyncConfig.pubmaticBidderLevelEidSource===`mediawallah-dcn`||(this._prebidMethods.setBidderConfig({bidders:[n],config:{ortb2:{user:{ext:{data:{eids:[t]}}}}}}),n===G.Pubmatic&&(this._userSyncConfig.pubmaticBidderLevelEidSource=`pubmatic-iframe`))}};zp=w([D(`SSPUserSyncComponent`),S(),N(0,b(mi)),N(1,b(U)),N(2,b(P)),N(3,b(Lp)),N(4,b(Rp))],zp);let Bp=class extends qe{constructor(...e){super(...e),C(this,`userIdNeedsRefresh`,new T),C(this,`uid2Refreshed`,new T)}};Bp=w([S()],Bp);let Vp=e=>{let t=`cafemedia.com`;switch(e.collectionMethod){case`direct`:return{matcher:`raptive.com`,inserter:t,mm:e.iframe?4:3};case`graph3p`:{let{graphSource:n}=e;return{matcher:{truedata:`truedata.com`,mediawallah:`mediawallah.com`}[n]??void 0,inserter:t,mm:5}}case`graph1p`:{let{bridgingMethod:n}=e,r=typeof n==`string`?n:void 0;return{matcher:r===`gpid`?`id5.com`:r===`lpid`?`crwdcntrl.net`:`raptive.com`,inserter:t,mm:r===`gpid`||r===`lpid`?5:4}}case`liveIntent`:return{matcher:`liveintent.com`,inserter:t,mm:5};default:return}},Hp=e=>{if(e===`truedata.com`||e===`mediawallah.com`)return{matcher:e,inserter:`optable.co`,mm:5};if(e===`liveintent.com`)return{matcher:e,inserter:`liveintent.com`,mm:5};if(e===`cafemedia.com`)return{matcher:e,mm:3}},Up=(e,t)=>!e.subModule?.some(e=>e===t),Wp=class{constructor(e,t){this._optableConfig=e,this._user=t,C(this,`_identityData`,null),C(this,`share`,async({blockGraphHem:e=!1,blockLiveIntentHem:t=!1}={})=>{if(this._identityData=await this._user.identityData(),!this._identityData)return!1;let n=this._identityData.collectionMethod===`graph3p`,r=(n&&e)??!1,i=n&&!this._optableConfig.enabled;return r||i||this._identityData.collectionMethod===`liveIntent`&&t?!1:this._identityData})}};Wp=w([x(),N(0,b(Fi)),N(1,b($o))],Wp);let Gp=()=>L.readExternalLocalStorage(`_pubcid`);var Kp=class{get _config(){return this.config}get enabled(){return!0}};let qp=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`YahooConnectBridgingDeclaration`,this._lookup=`YCBD`}};qp=w([S()],qp);let Jp=class extends Kp{constructor(e,t,n,r,i,a){super(),this._ccpa=e,this._gpc=t,this._idho=n,this._liveRampAts=r,this._shareHemWithUserIdModule=i,this._yahooConnectBridgingDeclarationExperiment=a,C(this,`config`,void 0),C(this,`_name`,`connectId`),C(this,`targetingKey`,`cid`),C(this,`eidSource`,`yahoo.com`),C(this,`localStorageKey`,`connectId`);let o=Gp();this.config={name:this._name,params:{pixelId:58404,...o&&{puid:o}}},this.setHash()}async setHash(){let e=await this._shareHemWithUserIdModule.share();if(typeof e==`object`&&(e.sha256Hash||e.sha1Hash)){let t=this._yahooConnectBridgingDeclarationExperiment.result?Vp(e):void 0;this.config={...this.config,params:{...this.config.params,he:e.sha256Hash??e.sha1Hash,...t&&{provenance:t}}}}}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`connectId`)&&this._liveRampAts.enabled}};Jp=w([D(`ConnectIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi)),N(3,b(wi)),N(4,b(Wp)),N(5,b(qp))],Jp);let Yp=class extends Kp{constructor(e,t,n){super(),this._ccpa=e,this._gpc=t,this._idho=n,C(this,`config`,void 0),C(this,`_name`,`criteo`),C(this,`targetingKey`,`cri`),C(this,`eidSource`,`criteo.com`),this.config={name:this._name,storage:{type:`html5`,name:`pbjs-criteo`,expires:60}}}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`criteo`)}};Yp=w([D(`CriteoIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi))],Yp);let Xp=class extends Kp{constructor(e,t,n,r,i){super(),this._ccpa=e,this._gpc=t,this._idho=n,this._gdpr=r,this._shareHemWithUserIdModule=i,C(this,`config`,void 0),C(this,`_name`,`fabrickId`),C(this,`targetingKey`,`fab`),C(this,`eidSource`,`neustar.biz`),this.config={name:this._name,params:{apiKey:`2487261909`},storage:{type:`html5`,name:`pbjs_fabrickId`,expires:60}},this.setHash()}async setHash(){let e=await this._shareHemWithUserIdModule.share();typeof e==`object`&&(e.sha256Hash||e.sha1Hash)&&(this.config={...this.config,params:{...this.config.params,e:e.sha256Hash??e.sha1Hash}})}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`fabrickId`)&&!this._gdpr.enabled}};Xp=w([D(`FabrickIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi)),N(3,b(pi)),N(4,b(Wp))],Xp);let Zp=class extends Kp{constructor(e,t,n,r){super(),this._ccpa=e,this._gpc=t,this._idho=n,this._gdpr=r,C(this,`config`,void 0),C(this,`_name`,`FTrack`),C(this,`targetingKey`,`ftr`),C(this,`eidSource`,`flashtalking.com`),this.config={name:this._name,params:{url:`https://d9.flashtalking.com/d9core`,ids:{"device id":!0,"single device id":!0,"household id":!0}},storage:{type:`html5`,name:`FTrackId`,expires:60,refreshInSeconds:8*3600}}}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`FTrack`)&&!this._gdpr.enabled}};Zp=w([D(`FTrackIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi)),N(3,b(pi))],Zp);let Qp=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`CFIdParHoldout`,this._lookup=`CFIP_IDPHO`}run(){return super.run()}};w([R()],Qp.prototype,`run`,null),Qp=w([S()],Qp);let $p=class extends Kp{constructor(e,t,n,r,i,a){super(),this._ccpa=e,this._gpc=t,this._audienceTargeting=n,this._user=r,this._shareHemWithUserIdModule=i,this._cloudflareIdPartnerExpHo=a,C(this,`config`,void 0),C(this,`_name`,`id5Id`),C(this,`targetingKey`,`id5-d`),C(this,`eidSource`,`id5-sync.com`),this.config={name:this._name,params:{partner:367,externalModuleUrl:`https://cdn.id5-sync.com/api/1.0/id5PrebidModule.js`},storage:{type:`html5`,name:`id5id`,expires:90,refreshInSeconds:7200}},this.setPd()}async setPd(){let e=await this.getPdString();this.config={...this.config,params:{...this.config.params,pd:e}}}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&this._audienceTargeting.id5Enabled}async getPdString(e){let t=this._user.rcid?.metadata.clientIp,n=Ec(t||``),r=this._cloudflareIdPartnerExpHo.result,i=[{key:5,value:Gp()},{key:12,value:_t}];if(e)i.push({key:1,value:e});else{let e=await this._shareHemWithUserIdModule.share({blockGraphHem:!0});typeof e==`object`&&(e.sha256Hash||e.sha1Hash)&&i.push({key:1,value:e.sha256Hash??e.sha1Hash})}r&&n===`IPv4`&&i.push({key:10,value:t}),r&&n===`IPv6`&&i.push({key:11,value:t});let a=i.filter(e=>e.value).map(e=>`${e.key}=${encodeURIComponent(e.value)}`).join(`&`);return btoa(a)}};$p=w([D(`Id5IdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(or)),N(3,b($o)),N(4,b(Wp)),N(5,b(Qp))],$p);let em=class extends Kp{constructor(e,t,n,r){super(),this._ccpa=e,this._gpc=t,this._idho=n,this._gdpr=r,C(this,`config`,void 0),C(this,`_name`,`identityLink`),C(this,`targetingKey`,`idl`),C(this,`eidSource`,`liveramp.com`),this.config={name:this._name,params:{pid:`111`,...this._gdpr.enabled&&{notUse3P:!0}},storage:{type:`html5`,name:`idl_env`,expires:15,refreshInSeconds:1800}}}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`identityLink`)}};em=w([D(`IdentityLinkIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi)),N(3,b(pi))],em);let tm=class extends Kp{constructor(e,t,n,r,i,a,o){super(),this._gdpr=e,this._ccpa=t,this._gpc=n,this._audienceTargeting=r,this._user=i,this._ortb2=a,this._prebidEventBus=o,C(this,`config`,void 0),C(this,`_name`,`intentIqId`),C(this,`_cpmRateInt`,``),C(this,`_cmpRateFrac`,``),C(this,`_groupChangedCallback`,void 0),C(this,`targetingKey`,`iiq_id`),this.config={name:this._name,params:{partner:743264634,timeoutInMillis:500,partnerClientId:this._user.uuid,partnerClientIdType:3,cpmInt:this._cpmRateInt,cpmFrac:this._cmpRateFrac,manualWinReportEnabled:!0,groupChanged:e=>{this._groupChangedCallback&&this._groupChangedCallback(e)}},storage:{type:`html5`,name:`intentIqId`,expires:0,refreshInSeconds:0}},this._prebidEventBus.initialized.once(()=>{this._ortb2.addEidsToOrtb2(this._user.raptiveEid)})}setGroupChangedCallback(e){this._groupChangedCallback=e}get _config(){return this.config}get enabled(){return!this._gdpr.enabled&&!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&this._audienceTargeting.intentIqEnabled}};tm=w([D(`IntentIqIdModule`),S(),N(0,b(pi)),N(1,b(U)),N(2,b(mi)),N(3,b(or)),N(4,b($o)),N(5,b(Jf)),N(6,b(Qf))],tm);let nm=class extends Kp{constructor(e,t,n){super(),this._ccpa=e,this._gpc=t,this._idho=n,C(this,`config`,void 0),C(this,`_name`,`linkedInAdsId`),C(this,`targetingKey`,`liaid`),C(this,`eidSource`,`linkedin.com`),this.config={name:this._name,storage:{type:`html5`,name:`linkedin_ads_id`,expires:30}}}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`linkedInAdsId`)}};nm=w([D(`LinkedInAdsIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi))],nm);let rm=class extends qe{constructor(...e){super(...e),C(this,`selectorFound`,new T)}};rm=w([S()],rm);let im=(e,t)=>{try{if(typeof window.__cmp!=`function`)return!1;let n=window.__cmp(`getCMPData`),r=n?.vendorConsents?.[e]===!0,i=!!t?.every(e=>n?.purposeConsents?.[e]===!0);return r&&i}catch(e){return E.error(`util`,`checkConsentForVendor`,e),!1}},am={GetPiiData:`adthrive_GetPiiData`,SetPiiData:`adthrive_SetPiiData`,SetIdentityData:`adthrive_SetIdentityData`,DeletePiiData:`adthrive_DeletePiiData`,SendPiiData:`adthrive_SendPiiData`},om=class{constructor(e,t,n,r,i,a,o,s){this._bootstrapConfig=e,this._gpcConfig=t,this._gdprConfig=n,this._ccpaConfig=r,this._identityEventBus=i,this._gdprEvents=a,this._siteConfig=o,this._context=s,C(this,`_host`,`https://${this._bootstrapConfig.host}`.replace(`https://https://`,`https://`)),C(this,`_frame`,document.createElement(`iframe`)),C(this,`_baseUrl`,this._bootstrapConfig.baseUrl),C(this,`_frameSrc`,`${this._baseUrl.replace(`/gdpr`,``)}/html/i.html`),this.enabled&&(this._gdprConfig.enabled?this._gdprEvents.consentResponseCaptured.on(()=>{im(this._gdprConfig.raptiveVendorId,[1])&&this.start().catch(e=>{E.error(`PiiIframeManager`,`constructor`,`Failed to initialize identity iframe`,e)})},{handleEventsAlreadyEmitted:!0}):this.start().catch(e=>{E.error(`PiiIframeManager`,`constructor`,`Failed to initialize identity iframe`,e)}))}get enabled(){return!this._gpcConfig.gpcEnabled&&!this._ccpaConfig.userOptedOut}async start(){await this._addIframeToPage(),this._identityEventBus.iframeReady.emit(),this._setupEventListeners()}deleteData(){try{if(this._frame.contentWindow){let e={action:am.DeletePiiData};this._frame.contentWindow.postMessage(e,this._host)}}catch(e){E.error(`PiiIframeManager`,`deleteIdentity`,`Failed to delete identity data`,e)}}setIdentityData(e){try{if(this._frame.contentWindow){let t={action:am.SetIdentityData,identityData:e,encrypt:this._context.querystring.get(`adt_encrypt`)!==`false`};this._frame.contentWindow.postMessage(t,this._host)}}catch(e){E.error(`PiiIframeManager`,`setIdentityData`,`Failed to set identity data`,e)}}setData(e){try{if(this._frame.contentWindow){let t={action:am.SetPiiData,piiData:e};this._frame.contentWindow.postMessage(t,this._host)}}catch(e){E.error(`PiiIframeManager`,`setIdentity`,`Failed to set identity data`,e)}}getData(){try{if(this._frame.contentWindow){let e={action:am.GetPiiData};this._frame.contentWindow.postMessage(e,this._host)}}catch(e){E.error(`PiiIframeManager`,`getIdentity`,`Failed to get identity data`,e)}}_addIframeToPage(){return new Promise(e=>{this._frame.src=this._frameSrc,this._frame.id=`adt-ii`,this._frame.style.display=`none`,this._frame.onload=()=>{e()},document.body.appendChild(this._frame)})}_setupEventListeners(){this._identityEventBus.dataCapturedLegacy.on(e=>{let{sha1Hash:t,sha256Hash:n,source:r,sourceCollectedDate:i}=e;(n||t||r)&&this.setData({sha1Hash:t,sha256Hash:n,source:r,sourceCollectedDate:i})},{handleEventsAlreadyEmitted:!0}),this._identityEventBus.dataCapturedForIframe.on(e=>{e&&this.setIdentityData(e)},{handleEventsAlreadyEmitted:!0}),this._ccpaConfig.consentChange.on(e=>{e===this._ccpaConfig.ccpaOptOut&&this.deleteData()}),this._frame.contentWindow&&window.addEventListener(`message`,e=>void this._handleMessageEvent(e))}async _handleMessageEvent(e){let t=e.data.action;if(e.origin===this._host&&t===am.SendPiiData){let t=e.data.piiData;t&&!t.sourceCollectedDate&&(t.sourceCollectedDate=null);let n=e.data.identityDataFromLocalStorage,r=e.data.identityDataFromCookie,i;n&&typeof n==`object`&&r&&typeof r==`object`?i=await qo(n,r):n&&typeof n==`object`?i=n:r&&typeof r==`object`&&(i=r),this._identityEventBus.dataSentFromIframe.emit({...t&&{piiData:t},...i&&{identityData:i}})}}};om=w([D(`PiiIframeManager`),S(),N(0,b(on)),N(1,b(mi)),N(2,b(pi)),N(3,b(U)),N(4,b($s)),N(5,b(mp)),N(6,b(Zi)),N(7,b(W))],om);let sm=e=>{let t=e.match(/([a-zA-Z0-9._!#$%+^&*()[\]<>-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);return t?t[0]:``},cm=e=>e.replace(/\s/g,``),lm=e=>sm(cm(e.toLowerCase())),um=(e=new Date)=>{let t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,`0`),r=String(e.getDate()).padStart(2,`0`);return`${t}-${n}-${r}`},dm=class extends V{init(){this._key=`EmailCaptureHandlerDebounceExperiment_2`,this._lookup=`ECHDE2`}};dm=w([S()],dm);let fm=class{constructor(e,t,n,r){this._identityEventBus=e,this._piiIframeManager=t,this._emailCaptureEventBus=r,C(this,`_elements`,[]),C(this,`_keydownListenerAdded`,!1),C(this,`_emailProviderOnPage`,!1),C(this,`_growMeOnPage`,!1),C(this,`_growMeSelector`,`[id^="grow-me-inline-subscribe-cta-root-"]`),C(this,`_growMeFormSelector`,`[class^="SubscribeCtaWidget___StyledDiv6-"]`),C(this,`emailCaptured`,new O),C(this,`_emailProviders`,[{divSelector:`div[id$="-optin"]`,name:`OptInMonster`},{divSelector:`div[class^="cb-form-group"]`,name:`ConvertBox`},{divSelector:`div.sumo-form-wrapper.listbuilder-popup`,name:`SumoMe`},{divSelector:this._growMeSelector,name:`Grow.me`},{divSelector:`input[id="raptive-gated-print-modal-input"]`,name:`GatedPrint`}]),C(this,`_hashTypes`,[{key:`sha256Hash`,length:64},{key:`sha1Hash`,length:40}]),C(this,`_emailCheckTimeout`,1500),C(this,`_eventMap`,new Map([[`mousemove`,window],[`scroll`,window],[`mouseleave`,document],[`om.Campaign.startShow`,document]])),C(this,`_boundCallEventHandler`,void 0),C(this,`_boundProcessEventHandler`,void 0);let i=n.result??0;this._boundCallEventHandler=Do(this.callCheckEmailProviders.bind(this),i),this._boundProcessEventHandler=Do(this.processInputChange.bind(this),i),this.addEmailProviderListeners(),this._addElementListeners(),this._addKeydownEventListener(),this.collectIdentityDataFromStorage().catch(e=>{}),this._collectFromIframe()}captureEmail(e,t){this.checkSources(t),this.emailCaptured.emit({pii:{email:e,source:`${t}_c`,sourceCollectedDate:um()},identityDataSource:`emailCapture`})}checkSources(e){e=e===`slickstream`?`ss`:e,e&&![`url`,`urlh`,`c`,`nl`,`ss`,`l_s`,`l_i`,`api`,`grwm`,`g_td`,`ra_gpid`,`hc_gp`,`form`].includes(e)&&!e?.startsWith(`ss_`)&&E.event(`EmailCaptureHandler`,`checkSources`,`unknown source: `,e)}_processHash(e,t){return e&&typeof e==`string`&&e.match(/value/i)?this._retrieveBitHashString(e,t):e||``}async collectIdentityDataFromStorage(){let e=await Wo(),[t,n]=this._getStoredHashInfo(),r=this._getStoredSource(n),i=this._getStoredSourceCollectedDate();(e||t)&&this._processStoredIdentityData(e,t,r,i)}_getStoredHashInfo(){let e=L.readInternalCookie(`adt_ei`),t=L.readInternalLocalStorage(`adt_ei`),n=null,r=!1;return e?(n=e,r=!0):t&&(n=typeof t==`string`?{sha256Hash:t,sha1Hash:``}:t),[n,r]}_getStoredSource(e=!1){let t=L.readInternalCookie(`adt_emsrc`)||L.readInternalLocalStorage(`adt_emsrc`)||`o_s`;if(t.includes(q.PII_SOURCE.VALUES.IDENTITY_IFRAME))return this._retrieveIframeSourceString(t);if(t.includes(q.PII_SOURCE.PREFIXES.IDG)||t.includes(q.PII_SOURCE.PREFIXES.RAPTIVE_AUTH)){let e=t.includes(q.PII_SOURCE.SUFFIXES.CAPTURE);return!t.includes(q.PII_SOURCE.SUFFIXES.CAPTURE)&&!t.includes(q.PII_SOURCE.SUFFIXES.STORAGE)?`${t}${q.PII_SOURCE.SUFFIXES.CAPTURE}`:e?t.replace(`${q.PII_SOURCE.SUFFIXES.CAPTURE}`,`${q.PII_SOURCE.SUFFIXES.STORAGE}`):t}return this._determineSource(t,e)}_getStoredSourceCollectedDate(){return L.readInternalLocalStorage(`adt_emsrc_cd`)}_determineSource(e,t){let n=e===`url`||e===`urlh`||e===`urlhck`,r=e.endsWith(`_c`);return n?`${e}_c`:r?e.replace(/_c$/,`_s`):t?`cki_s`:e}_processStoredIdentityData(e,t,n,r){(n.includes(`:id5id`)||n.includes(`:pubm`))&&(n=n.replace(`:`,`-`));for(let e of this._hashTypes)if(t){let n=t[e.key];n?.length&&(t[e.key]=this._processHash(n,e.length))}let i;t&&n&&(t.sha256Hash||t.sha1Hash)&&(i={sha256Hash:t.sha256Hash,sha1Hash:t.sha1Hash,source:n,sourceCollectedDate:r});let a;i&&n===`url_c`||n===`urlh_c`||n===`urlhck_c`?a={pii:{...i,source:n,sourceCollectedDate:um()},identityDataSource:`urlCapture`}:(e||i)&&(a={pii:i,...e&&{identityDataMap:e},identityDataSource:`browserStorage`}),a&&this.emailCaptured.emit(a)}_collectFromIframe(){this._identityEventBus.dataSentFromIframe.once(e=>{if(e.piiData){e.piiData.source&&!e.piiData.source.includes(q.PII_SOURCE.PREFIXES.IDENTITY_IFRAME)&&(e.piiData.source=`${q.PII_SOURCE.PREFIXES.IDENTITY_IFRAME}${e.piiData.source}`);let t={pii:e.piiData,identityDataMap:e.identityData,identityDataSource:`iframe`};this.emailCaptured.emit(t)}else this._identityEventBus.iframeDataSynced.emit()}),this._identityEventBus.iframeReady.on(()=>this._piiIframeManager.getData(),{handleEventsAlreadyEmitted:!0})}_retrieveBitHashString(e,t){let n=e.match(`\\w{${t}}`);return n?n[0]:``}_retrieveIframeSourceString(e){let t=e.match(/^(l_i)-(.*)/);return t&&t.length===3?t[0].replace(/_c$/,`_s`):`l_i`}addEmailProviderListeners(){this._eventMap.forEach((e,t)=>{e.addEventListener(t,this._boundCallEventHandler)})}removeEmailProviderListeners(){this._eventMap.forEach((e,t)=>{e.removeEventListener(t,this._boundCallEventHandler)})}callCheckEmailProviders(e){(e.type!==`mouseleave`||e.clientY<=0)&&setTimeout(()=>{this._emailProviderOnPage||this.emailProviderHandler()},this._emailCheckTimeout)}emailProviderHandler(){for(let e of this._emailProviders){let t=document.querySelectorAll(e.divSelector);if(t.length){this._emailCaptureEventBus.selectorFound.emit({selector:e.divSelector,providerName:e.name,divs:t}),e.divSelector.includes(`grow-me`)&&(this._growMeOnPage=!0),this.removeEmailProviderListeners(),this._emailProviderOnPage=!0,this._addElementListeners();break}}}setElements(){let e=`input[type=text], input[type=email], input[name=email]`;if(this._elements=Array.prototype.slice.call(document.querySelectorAll(e)),this._growMeOnPage){let[t]=Array.from(document.querySelectorAll(this._growMeSelector)),n=Array.prototype.slice.call(t?.shadowRoot?.querySelectorAll(e))??[];this._elements=[...this._elements,...n]}}_addKeydownEventListener(){document.addEventListener(`keydown`,e=>this._keydownEventListener(e))}_keydownEventListener(e){e.type===`keydown`&&e.key==`@`&&!this._keydownListenerAdded&&(this._keydownListenerAdded=!0,this._addElementListeners())}_addElementListeners(){this.setElements();for(let e of this._elements)e.addEventListener(`blur`,this._boundProcessEventHandler),e.addEventListener(`change`,this._boundProcessEventHandler)}removeElementListeners(){for(let e of this._elements)e.removeEventListener(`blur`,this._boundProcessEventHandler),e.removeEventListener(`change`,this._boundProcessEventHandler)}sourceOrigin(e){if(!e.form)return`form`;let{id:t}=e.form;if(t&&typeof t==`string`){if(t.includes(`comment`))return q.PII_SOURCE.VALUES.COMMENT;if(t.includes(`subscribe`))return q.PII_SOURCE.VALUES.NEWSLETTER;if(this._growMeOnPage&&e.form.querySelectorAll(this._growMeFormSelector))return q.PII_SOURCE.VALUES.GRWM;if(t===`raptive-gated-print-modal-form`)return`${q.PII_SOURCE.PREFIXES.HEM_CAPTURE}${q.PII_SOURCE.VALUES.GATED_PRINT}`}return`form`}processInputChange(e){let t=e.target,n=t.value,r=lm(n);if(r){let e=this.sourceOrigin(t);this.captureEmail(r,e),this.removeElementListeners()}}};fm=w([D(`EmailCaptureHandler`),S(),N(0,b($s)),N(1,b(om)),N(2,b(dm)),N(3,b(rm))],fm);let pm=class extends V{init(){this._key=`LiveIntentFpiExpiration`,this._lookup=`LIFPI`}run(){return super.run()}};w([R()],pm.prototype,`run`,null),pm=w([S()],pm);let mm=class extends V{init(){this._key=`LiveIntentTimeOutExperiment`,this._lookup=`LITO`}};mm=w([S()],mm);let hm=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`SharethroughLiveIntent`,this._lookup=`SHTLI`}};hm=w([D(`SharethroughLiftLiveIntentExperiment`),S()],hm);var gm=hm;let _m=()=>{let e=L.readExternalCookie(`panoramaId`),t=L.readExternalCookie(`panoramaId_expiry`);if(e&&t&&Number(t)>Date.now())return e;let n=L.readExternalLocalStorage(`panoramaId`),r=L.readExternalLocalStorage(`panoramaId_expiry`);return n&&r&&Number(r)>Date.now()?n:null},vm=e=>{if(!e)return;let t;return e===`truedata.com`?t=`t`:e===`mediawallah.com`?t=`m`:e===`liveintent.com`&&(t=`l`),t},ym=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`LiveIntentHem`,this._lookup=`SDKLI`}};ym=w([S()],ym);let bm=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`LiveIntentUid2Hem`,this._lookup=`SDKLIR`}};bm=w([S()],bm);let xm=class extends Kp{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m){super(),this._ccpa=e,this._gpc=t,this._audienceTargeting=n,this._user=r,this._shareHemWithUserIdModule=i,this._sharethroughLiveIntentExperiment=a,this._liveIntentTimeoutExperiment=o,this._liveIntentFpiExpirationExperiment=s,this._cloudflareIdPartnerExpHo=c,this._context=l,this._prebidEventBus=u,this._emailCaptureHandler=d,this._liveIntentHemExperiment=f,this._gam=p,this._liveIntentUid2HemExperiment=m,C(this,`config`,void 0),C(this,`_name`,`liveIntentId`),C(this,`targetingKey`,`liid`),C(this,`eidSource`,`liveintent.com`);let h,g;if(this._user.rcid){let e=Ec(this._user.rcid.metadata.clientIp);e===`IPv4`?h=this._user.rcid.metadata.clientIp:e===`IPv6`&&(g=this._user.rcid.metadata.clientIp)}let _=this._getIdentifiers();this.config={name:this._name,params:{distributorId:`did-001w`,requestedAttributesOverrides:{uid2:!0,medianet:!0,bidswitch:!0,magnite:!0,index:!0,pubmatic:!0,sovrn:!0,openx:!0,triplelift:!0,thetradedesk:!0,sha2:!0,nexxen:!0,...this._sharethroughLiveIntentExperiment.result&&{sharethrough:!0}},...this._cloudflareIdPartnerExpHo.result&&h&&{ipv4:h},...this._cloudflareIdPartnerExpHo.result&&g&&{ipv6:g},..._.length&&{identifiersToResolve:_},...this._liveIntentFpiExpirationExperiment.result!==`d`&&this._liveIntentFpiExpirationExperiment.result&&{liCollectConfig:{fpiExpirationDays:parseInt(this._liveIntentFpiExpirationExperiment.result)}},ajaxTimeout:this._liveIntentTimeoutExperiment.result??5e3},storage:{name:`__tamLIResolveResult`,type:`html5`,expires:1,refreshInSeconds:8*3600}},this._setHash(),this._collectLiveIntentHem()}_collectLiveIntentHem(){this._liveIntentHemExperiment.result&&this._prebidEventBus.liveIntentResolved.once(async e=>{let t=await this._user.identityData(),n=t?.sha256Hash||t?.sha1Hash;if(t&&t.collectionMethod===`direct`&&e&&e.sha2){let t=n==e.sha2?`1`:`0`;this._gam.setTargetingFlag(`lihem_mtch`,[t])}!t&&e&&e.sha2&&(this._liveIntentUid2HemExperiment.result||!this._liveIntentUid2HemExperiment.result&&e.uid2)&&this._emailCaptureHandler.emailCaptured.emit({pii:{sha256Hash:e.sha2,source:`${q.PII_SOURCE.VALUES.SDKLI}${e.uid2?``:`r`}_c`,sourceCollectedDate:um()},identityDataSource:`sdkli`})})}async _setHash(){let e=await this._shareHemWithUserIdModule.share({blockGraphHem:!0,blockLiveIntentHem:!0});typeof e==`object`&&(e.sha256Hash||e.sha1Hash)&&(this.config={...this.config,params:{...this.config.params,emailHash:e.sha256Hash??e.sha1Hash}})}_getIdentifiers(){let e=this._context.gpid;e?L.setInternalLocalStorage(`adt_li_gpid`,e):L.deleteLocalStorage(`adt_li_gpid`);let t=_m();t?L.setInternalLocalStorage(`adt_li_panoramaid`,t):L.deleteLocalStorage(`adt_li_panoramaid`);let n=this._user.rcid?.value.sharedId;n?L.setInternalLocalStorage(`adt_li_rcid`,n):L.deleteLocalStorage(`adt_li_rcid`);let r=L.readExternalLocalStorage(`pbjs-unifiedid`),i=r?JSON.parse(decodeURIComponent(r)):void 0,a=i?i.TDID:void 0;return a?L.setInternalLocalStorage(`adt_li_unifiedid`,a):L.deleteLocalStorage(`adt_li_unifiedid`),[Gp()&&`_pubcid`,e&&`adt_li_gpid`,t&&`adt_li_panoramaid`,a&&`adt_li_unifiedid`,n&&`adt_li_rcid`].filter(e=>e!=null)}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&this._audienceTargeting.liveIntentEnabled}};xm=w([D(`LiveIntentIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(or)),N(3,b($o)),N(4,b(Wp)),N(5,b(gm)),N(6,b(mm)),N(7,b(pm)),N(8,b(Qp)),N(9,b(W)),N(10,b(Qf)),N(11,b(fm)),N(12,b(ym)),N(13,b(Z)),N(14,b(bm))],xm);let Sm=class extends Kp{constructor(e,t,n,r){super(),this._ccpa=e,this._gpc=t,this._idho=n,this._optableConfig=r,C(this,`config`,void 0),C(this,`_name`,`lmpId`),C(this,`targetingKey`,`lmpId`),C(this,`localStorageKey`,q.OPTABLE_LMPID.KEY),C(this,`eidSource`,`loblawmedia.ca`),this.config={name:this._name,params:{clientId:`17297`}}}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`lmpId`)&&this._optableConfig.loblawEnabled}};Sm=w([D(`LoblawIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi)),N(3,b(Fi))],Sm);let Cm=class extends Kp{constructor(e,t,n){super(),this._ccpa=e,this._gpc=t,this._idho=n,C(this,`config`,void 0),C(this,`_name`,`lotamePanoramaId`),C(this,`targetingKey`,`lpid`),C(this,`localStorageKey`,`panoramaId`),C(this,`eidSource`,`crwdcntrl.net`),this.config={name:this._name,params:{clientId:`17297`}}}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`lotamePanoramaId`)}};Cm=w([D(`LotamePanoramaIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi))],Cm);let wm=class extends Kp{constructor(e,t,n,r){super(),this._ccpa=e,this._gpc=t,this._idho=n,this._gdpr=r,C(this,`config`,void 0),C(this,`_name`,`merkleId`),C(this,`targetingKey`,`mrk`),C(this,`eidSource`,`merkleinc.com`),this.config={name:this._name,params:{sv_pubid:`9262`,ssp_ids:[`534404531`]},storage:{type:`html5`,name:`pbjs-merkleId`,expires:30}}}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`merkuryId`)&&!this._gdpr.enabled}};wm=w([D(`MerkuryIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi)),N(3,b(pi))],wm);let Tm=class extends Kp{constructor(e,t,n,r){super(),this._ccpa=e,this._gpc=t,this._idho=n,this._liveRampAts=r,C(this,`config`,void 0),C(this,`_name`,`pairId`),C(this,`targetingKey`,`pair`),C(this,`eidSource`,`google.com`),this.config={name:this._name,params:{liveramp:{}},storage:{type:`html5`,name:`pbjs-pairId`,expires:30,refreshInSeconds:1800}}}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`pairId`)&&this._liveRampAts.enabled}};Tm=w([D(`PairIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi)),N(3,b(wi))],Tm);let Em=class extends Kp{constructor(e,t,n){super(),this._ccpa=e,this._gpc=t,this._idho=n,C(this,`_name`,`sharedId`),C(this,`targetingKey`,`shl`),C(this,`eidSource`,`pubcid.org`),C(this,`config`,{name:this._name,storage:{type:`html5`,name:`_pubcid`,expires:60}})}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`sharedId`)}};Em=w([D(`SharedIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi))],Em);let Dm=class extends Kp{constructor(e,t,n){super(),this._ccpa=e,this._gpc=t,this._idho=n,C(this,`_name`,`teadsId`),C(this,`targetingKey`,`teads`),C(this,`eidSource`,`teads.com`),C(this,`cookieStorageKey`,`_tfpvi`),C(this,`config`,{name:this._name,params:{pubId:17002}})}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`teadsId`)}};Dm=w([D(`TeadsIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi))],Dm);let Om=class extends Kp{constructor(e,t,n,r,i){super(),this._ccpa=e,this._gpc=t,this._idho=n,this._gdpr=r,this._shareHemWithUserIdModule=i,C(this,`config`,void 0),C(this,`_name`,`33acrossId`),C(this,`targetingKey`,`33a`),C(this,`eidSource`,`33across.com`),this.config={name:this._name,params:{pid:`0013300001i0fyfAAA`},storage:{name:`33acrossId`,type:`html5`,expires:90,refreshInSeconds:8*3600}},this.setHem()}async setHem(){let e=await this._shareHemWithUserIdModule.share({blockGraphHem:!0});typeof e==`object`&&(e.sha256Hash||e.sha1Hash)&&(this.config={...this.config,params:{...this.config.params,hem:e.sha256Hash??e.sha1Hash}})}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`33acrossId`)&&!this._gdpr.enabled}};Om=w([D(`ThirtyThreeAcrossIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi)),N(3,b(pi)),N(4,b(Wp))],Om);let km=class extends Kp{constructor(e,t,n){super(),this._ccpa=e,this._gpc=t,this._idho=n,C(this,`config`,void 0),C(this,`_name`,`unifiedId`),C(this,`targetingKey`,`uid1`),C(this,`eidSource`,`adserver.org`),C(this,`eidSourceAlias`,`adsrvr.org`),this.config={name:this._name,params:{url:`https://match.adsrvr.org/track/rid?ttd_pid=iowij76&fmt=json`},storage:{type:`html5`,name:`pbjs-unifiedid`,expires:60}}}get _config(){return this.config}get enabled(){return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`unifiedId`)}};km=w([D(`UnifiedIdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi))],km);let Am=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`IdGraphUid2`,this._lookup=`IDGUID3`}run(){return super.run()}};w([R()],Am.prototype,`run`,null),Am=w([S()],Am);let jm=e=>{let{source:t,identifierType:n}=e;switch(n){case`truedata`:return t.includes(`${q.PII_SOURCE.PREFIXES.IDG}${q.PII_SOURCE.VALUES.TD}`);case`mediawallah`:return t.includes(`${q.PII_SOURCE.PREFIXES.IDG}${q.PII_SOURCE.VALUES.MW}`);default:return t.includes(q.PII_SOURCE.PREFIXES.IDG)}},Mm=class extends Kp{constructor(e,t,n,r,i,a,o){super(),this._ccpa=e,this._gpc=t,this._idho=n,this._gdpr=r,this._user=i,this._idGraphUid2Experiment=a,this._googleAdManager=o,C(this,`config`,void 0),C(this,`_name`,`uid2`),C(this,`targetingKey`,`uid2`),C(this,`eidSource`,`uidapi.com`),C(this,`localStorageKey`,`__uid2_advertising_token`),C(this,`_uid2ServerToken`,L.readExternalLocalStorage(`__uid2_server_token`)),C(this,`_uid2AdvertisingToken`,L.readExternalLocalStorage(`__uid2_advertising_token`));let s=this.getToken(),c=!!s?.matcher;s?.provider===`optable`&&s.matcher===`liveintent.com`&&(s=null),this.config={name:this._name,params:{storage:`localStorage`,...s?{uid2Token:s,declareBridged:c}:{},...s?.matcher&&{matcher:s.matcher}}},c&&s?.matcher&&this._setBridgedTargetingFlag(s?.matcher).catch(e=>{E.error(`UnifiedId2IdModule`,`_setBridgedTargetingFlag`,e)})}get enabled(){let e=!jm({source:this._user.source??``}),t=this._idGraphUid2Experiment.result;return!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut&&Up(this._idho,`unifiedId2`)&&!this._gdpr.enabled&&(e||t)}getToken(){return this._uid2ServerToken?this._uid2ServerToken:this._uid2AdvertisingToken?this._uid2AdvertisingToken.latestToken?this._uid2AdvertisingToken.latestToken:this._uid2AdvertisingToken.originalToken:null}get _config(){return this.config}async _setBridgedTargetingFlag(e){await this._googleAdManager.waitForQueue();let t=vm(e);t&&this._googleAdManager.setTargetingFlag(`uid2b`,[t],!0)}};Mm=w([D(`UnifiedId2IdModule`),S(),N(0,b(U)),N(1,b(mi)),N(2,b(xi)),N(3,b(pi)),N(4,b($o)),N(5,b(Am)),N(6,b(Z))],Mm);let Nm=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v){this._context=e,this._connectIdModule=t,this._unifiedIdModule=n,this._id5IdModule=r,this._merkuryIdModule=i,this._identityLinkIdModule=a,this._lotamePanoramaIdModule=o,this._thirtyThreeAcrossIdModule=s,this._fTrackIdModule=c,this._loblawIdModule=l,this._fabrickIdModule=u,this._criteoIdModule=d,this._liveIntentIdModule=f,this._pairIdModule=p,this._unifiedId2IdModule=m,this._sharedIdModule=h,this._linkedInAdsIdModule=g,this._teadsIdModule=_,this._intentIqIdModule=v,C(this,`ids`,void 0),C(this,`_connectIdConfig`,[`connectId`,{id:this._connectIdModule._config,targetingKey:this._connectIdModule.targetingKey,enabled:this._connectIdModule.enabled,eidSource:this._connectIdModule.eidSource,localStorageKey:this._connectIdModule.localStorageKey}]),C(this,`_unifiedIdConfig`,[`unifiedId`,{id:this._unifiedIdModule._config,targetingKey:this._unifiedIdModule.targetingKey,enabled:this._unifiedIdModule.enabled,eidSource:this._unifiedIdModule.eidSource,eidSourceAlias:this._unifiedIdModule.eidSourceAlias,storageParser:e=>JSON.parse(decodeURIComponent(e)).TDID}]),C(this,`_unifiedId2Config`,[`uid2`,{id:this._unifiedId2IdModule._config,enabled:this._unifiedId2IdModule.enabled,eidSource:this._unifiedId2IdModule.eidSource,targetingKey:this._unifiedId2IdModule.targetingKey,localStorageKey:this._unifiedId2IdModule.localStorageKey}]),C(this,`_id5IdConfig`,[`id5Id`,{id:this._id5IdModule._config,enabled:this._id5IdModule.enabled,targetingKey:this._id5IdModule.targetingKey,eidSource:this._id5IdModule.eidSource,storageParser:e=>JSON.parse(decodeURIComponent(e)).gp}]),C(this,`_merkuryIdConfig`,[`merkuryId`,{id:this._merkuryIdModule._config,enabled:this._merkuryIdModule.enabled,eidSource:this._merkuryIdModule.eidSource,targetingKey:this._merkuryIdModule.targetingKey}]),C(this,`_identityLinkConfig`,[`identityLink`,{id:this._identityLinkIdModule._config,enabled:this._identityLinkIdModule.enabled,eidSource:this._identityLinkIdModule.eidSource,targetingKey:this._identityLinkIdModule.targetingKey}]),C(this,`_pairIdConfig`,[`pairId`,{id:this._pairIdModule._config,enabled:this._pairIdModule.enabled,eidSource:this._pairIdModule.eidSource,targetingKey:this._pairIdModule.targetingKey}]),C(this,`_criteoIdConfig`,[`criteo`,{id:this._criteoIdModule._config,enabled:this._criteoIdModule.enabled,eidSource:this._criteoIdModule.eidSource,targetingKey:this._criteoIdModule.targetingKey}]),C(this,`_sharedIdConfig`,[`sharedId`,{id:this._sharedIdModule._config,enabled:this._sharedIdModule.enabled,eidSource:this._sharedIdModule.eidSource,targetingKey:this._sharedIdModule.targetingKey}]),C(this,`_fabrickIdConfig`,[`fabrickId`,{id:this._fabrickIdModule._config,enabled:this._fabrickIdModule.enabled,eidSource:this._fabrickIdModule.eidSource,targetingKey:this._fabrickIdModule.targetingKey}]),C(this,`_fTrackIdConfig`,[`ftrack`,{id:this._fTrackIdModule._config,enabled:this._fTrackIdModule.enabled,eidSource:this._fTrackIdModule.eidSource,targetingKey:this._fTrackIdModule.targetingKey}]),C(this,`_33AcrossIdConfig`,[`33acrossId`,{id:this._thirtyThreeAcrossIdModule._config,enabled:this._thirtyThreeAcrossIdModule.enabled,eidSource:this._thirtyThreeAcrossIdModule.eidSource,targetingKey:this._thirtyThreeAcrossIdModule.targetingKey}]),C(this,`_liveIntentIdConfig`,[`liveIntentId`,{id:this._liveIntentIdModule._config,enabled:this._liveIntentIdModule.enabled,targetingKey:this._liveIntentIdModule.targetingKey,eidSource:this._liveIntentIdModule.eidSource,storageParser:e=>JSON.parse(decodeURIComponent(e))}]),C(this,`_lotamePanoramaIdConfig`,[`lotamePanoramaId`,{id:this._lotamePanoramaIdModule._config,enabled:this._lotamePanoramaIdModule.enabled,targetingKey:this._lotamePanoramaIdModule.targetingKey,eidSource:this._lotamePanoramaIdModule.eidSource,localStorageKey:this._lotamePanoramaIdModule.localStorageKey}]),C(this,`_lmpIdConfig`,[`lmpId`,{id:this._loblawIdModule._config,enabled:this._loblawIdModule.enabled,targetingKey:this._loblawIdModule.targetingKey,eidSource:this._loblawIdModule.eidSource,localStorageKey:this._loblawIdModule.localStorageKey}]),C(this,`_linkedInAdsIdConfig`,[`linkedInAdsId`,{id:this._linkedInAdsIdModule._config,enabled:this._linkedInAdsIdModule.enabled,targetingKey:this._linkedInAdsIdModule.targetingKey,eidSource:this._linkedInAdsIdModule.eidSource}]),C(this,`_teadsIdConfig`,[`teadsId`,{id:this._teadsIdModule._config,enabled:this._teadsIdModule.enabled,targetingKey:this._teadsIdModule.targetingKey,eidSource:this._teadsIdModule.eidSource,cookieStorageKey:this._teadsIdModule.cookieStorageKey}]),C(this,`_intentIqIdConfig`,[`intentIqId`,{id:this._intentIqIdModule._config,enabled:this._intentIqIdModule.enabled,targetingKey:this._intentIqIdModule.targetingKey}]),this.ids=new Map([this._sharedIdConfig,this._connectIdConfig,this._unifiedIdConfig,this._unifiedId2Config,this._id5IdConfig,this._identityLinkConfig,this._merkuryIdConfig,this._pairIdConfig,this._criteoIdConfig,this._fabrickIdConfig,this._fTrackIdConfig,this._33AcrossIdConfig,this._liveIntentIdConfig,this._lotamePanoramaIdConfig,this._lmpIdConfig,this._linkedInAdsIdConfig,this._teadsIdConfig,this._intentIqIdConfig]),this._removeIdsOnWordpressPage()}_removeIdsOnWordpressPage(){if(this._context.isWordPressLogin)for(let[e]of this.ids){let t=this.ids.get(e);t&&(t.enabled=!1)}}get(e){return e===`FTrack`?this.ids.get(`ftrack`):e===`merkleId`?this.ids.get(`merkuryId`):this.ids.get(e)}forEach(e){return this.ids.forEach(e)}values(){return this.ids.values()}};Nm=w([D(`UserIds`),S(),N(0,b(W)),N(1,b(Jp)),N(2,b(km)),N(3,b($p)),N(4,b(wm)),N(5,b(em)),N(6,b(Cm)),N(7,b(Om)),N(8,b(Zp)),N(9,b(Sm)),N(10,b(Xp)),N(11,b(Yp)),N(12,b(xm)),N(13,b(Tm)),N(14,b(Mm)),N(15,b(Em)),N(16,b(nm)),N(17,b(Dm)),N(18,b(tm))],Nm);let Pm=class extends Vr{init(){this._key=`UID1BidderSupression`,this._lookup=`UID1BS`,this._default=[]}get result(){return this._result??this._default}};Pm=w([S()],Pm);let Fm=()=>{let e=L.readExternalLocalStorage(`__tamLIResolveResult`);return e?JSON.parse(decodeURIComponent(e)):null},Im=e=>e.uids.some(e=>{let t=e.ext?.provider;return t===`liveintent.com`||t===window.location.hostname}),Lm=e=>e.ext?.provider===`intentiq.com`,Rm=e=>e.matcher===`intentiq.com`||e.uids.some(Lm),zm=e=>e.matcher===`id5-sync.com`||e.matcher===`id5.com`,Bm=e=>e.matcher===`raptive.com`&&e.inserter===`cafemedia.com`,Vm=e=>{let t=e.source===`adserver.org`||e.source===`adsrvr.org`,n=e.uids[0].ext?.rtiPartner,r=e.uids[0].ext?.provider;return t&&n===`TDID`&&!r},Hm=e=>e.source===`adserver.org`||e.source===`adsrvr.org`,Um=e=>e.source.includes(`openx.com`),Wm=e=>e.source.includes(`indexexchange.com`),Gm=e=>e.source.includes(`triplelift.com`),Km=e=>e.source.includes(`uuid.raptive-sync.net`),qm=class{constructor(e,t,n){this._userIds=e,this._uid1BidderSuppressionExperiment=t,this._prebidEventBus=n,C(this,`_bidderCodeToLiveIntentEidSourceMap`,new Map([[G.Rubicon,`rubiconproject.com`],[G.RubiconServer,`rubiconproject.com`],[G.IndexExchange,`liveintent.indexexchange.com`],[G.IndexExchangeServer,`liveintent.indexexchange.com`],[G.Pubmatic,`pubmatic.com`],[G.PubmaticServer,`pubmatic.com`],[G.OpenX,`openx.net`],[G.OpenXServer,`openx.net`],[G.Triplelift,`liveintent.triplelift.com`],[G.TripleliftServer,`liveintent.triplelift.com`]])),C(this,`_liveIntentIds`,void 0),this._liveIntentIds=Fm(),this._prebidEventBus.liveIntentResolved.on(e=>{this._liveIntentIds=e},{handleEventsAlreadyEmitted:!0})}processEids(e,t){let n=e,r=[],i=this._getRules();for(let e of i){if(!e.enabled||e.bidders&&(!t||!e.bidders.includes(t)))continue;let i=e.fn(n,t);n=i.included,r=r.concat(i.excluded)}return{included:n,excluded:r}}_getRules(){return[{enabled:!0,fn:e=>{if(!e.some(e=>Um(e)&&Im(e)))return{included:e,excluded:[]};let t=e.filter(e=>Hm(e)&&zm(e));return{included:e.filter(e=>!t.includes(e)),excluded:t}}},{enabled:this._isDirectUid1BidderSuppressionEnabled(),bidders:this._getDirectUid1BidderSuppressionList(),fn:(e,t)=>{if(!t||!e.some(e=>this._bidderCodeToLiveIntentEidSourceMap.get(t)===e.source&&Im(e)))return{included:e,excluded:[]};let n=e.filter(e=>Vm(e));return{included:e.filter(e=>!n.includes(e)),excluded:n}}},{enabled:!0,fn:e=>{if(!e.some(e=>e.source===`liveintent.indexexchange.com`&&Im(e)))return{included:e,excluded:[]};let t=e.filter(e=>Wm(e)&&zm(e));return{included:e.filter(e=>!t.includes(e)),excluded:t}}},{enabled:!0,fn:e=>{if(!e.some(e=>e.source===`liveintent.triplelift.com`&&Im(e)))return{included:e,excluded:[]};let t=e.filter(e=>Gm(e)&&zm(e));return{included:e.filter(e=>!t.includes(e)),excluded:t}}},{enabled:!0,fn:e=>({included:e.map(e=>{if(e.source===`uidapi.com`){let t=this._userIds.get(`uid2`),n=t&&t.id?t.id.params:void 0,r;if(Im(e))r={matcher:`liveintent.com`,inserter:`liveintent.com`};else{let e=n?.uid2Token&&typeof n.uid2Token==`object`?n.uid2Token:void 0;e&&`provider`in e&&e.provider!==`raptive`&&`matcher`in e&&e.matcher&&(r=Hp(e.matcher))}return{...e,...r}}return e}),excluded:[]})},{enabled:!0,fn:e=>({included:e.map(e=>Gm(e)&&zm(e)?{...e,matcher:`id5.com`,inserter:`raptive.com`}:e),excluded:[]})},{enabled:!0,fn:e=>({included:e.map(e=>{if(e.source===`yahoo.com`){let t=this._userIds.get(`connectId`),n=(t&&t.id?t.id.params:void 0)?.provenance;return{...e,...n}}return e}),excluded:[]})},{enabled:!0,fn:e=>{let t=[];for(let n of e){let e=n.uids.filter(Lm),r=n.uids.filter(e=>!Lm(e));if(e.length>0&&r.length>0){t.push({...n,uids:r});for(let r of e)t.push({...n,uids:[r],inserter:`raptive.com`,matcher:`intentiq.com`,mm:5})}else Rm(n)?t.push({...n,inserter:`raptive.com`,matcher:`intentiq.com`,mm:5}):t.push(n)}return{included:t,excluded:[]}}},{enabled:!0,bidders:[G.TTD],fn:(e,t)=>{if(!t||t!==G.TTD)return{included:e,excluded:[]};let n=e.filter(e=>e.inserter===`liveintent.com`&&e.matcher===`liveintent.com`);return{included:e.filter(e=>!n.includes(e)),excluded:n}}}]}_getDirectUid1BidderSuppressionList(){let e=this._uid1BidderSuppressionExperiment.result??[];return e.length===0?[]:e.reduce((e,t)=>{let n=li.get(t);return n&&e.push(...n),e},[])}_isDirectUid1BidderSuppressionEnabled(){return!!(this._userIds.get(`liveIntentId`)?.enabled&&this._userIds.get(`unifiedId`)?.enabled&&this._liveIntentIds?.nonId&&!this._liveIntentIds?.thetradedesk)}};qm=w([S(),N(0,b(Nm)),N(1,b(Pm)),N(2,b(Qf))],qm);let Jm=class{_getRules(){return[{enabled:!0,excludedSources:[`adserver.org`,`adsrvr.org`],fn:(e,t)=>{let n=Im(t),r=Im(e),i=zm(t),a=zm(e),o=Rm(t),s=Rm(e);return o===s?n&&a?`b`:r&&i?`a`:`both`:`both`}},{enabled:!0,includedSources:[`adserver.org`,`adsrvr.org`],fn:(e,t)=>{if(e.source===t.source){let n=Rm(t),r=Rm(e);if(n!==r)return`both`;let i=zm(t),a=zm(e);if(i!==a)return i?`b`:`a`;let o=Im(t),s=Im(e);if(o!==s)return o?`b`:`a`;let c=Bm(t),l=Bm(e);if(c!==l)return c?`b`:`a`;let u=Vm(t),d=Vm(e);if(u!==d)return u?`b`:`a`}return`both`}}]}processEids(e){let t={},n=[],r=this._getRules();for(let i of e){let e=i.source;if(!t[e]){t[e]=[i];continue}let a=t[e],o=!1,s=[];for(let[e,t]of a.entries()){let n=this._decidePreferredEid(t,i,r);if(n.excluded.includes(i)){o=!0;break}n.excluded.includes(t)&&s.push(e)}if(o){if(n.push(i),s.length>0){s.sort((e,t)=>t-e);for(let e of s){let[t]=a.splice(e,1);n.push(t)}}}else{if(s.length>0){s.sort((e,t)=>t-e);for(let e of s){let[t]=a.splice(e,1);n.push(t)}}a.push(i)}}return{included:Object.values(t).flat(),excluded:n}}_decidePreferredEid(e,t,n){for(let r of n){if(!r.enabled||r.includedSources&&(!r.includedSources.includes(e.source)||!r.includedSources.includes(t.source))||r.excludedSources&&(r.excludedSources.includes(e.source)||r.excludedSources.includes(t.source)))continue;let n=r.fn(e,t);if(n===`a`)return{included:[e],excluded:[t]};if(n===`b`)return{included:[t],excluded:[e]};if(n===`none`)return{included:[],excluded:[e,t]};if(n===`both`)continue}return{included:[e,t],excluded:[]}}get rules(){return this._getRules()}};Jm=w([S()],Jm);let Ym=class{constructor(e,t,n){this._prebidMethods=e,this._eidSelector=t,this._eidProcessor=n}getSupplementalEids(e=[]){return(this._prebidMethods.getConfig(`ortb2.user.ext.eids`)??[]).filter(t=>t.source&&e.length>0?e.includes(t.source):!0)}getModuleEids(e=[]){return(this._prebidMethods.getUserIdsAsEids()??[]).filter(t=>t.source&&e.length>0?e.includes(t.source):!0)}getEids(e=[]){return{module:this.getModuleEids(e),supplemental:this.getSupplementalEids(e)}}getProcessedEids(e=[]){let t=this.getEids(e),n=[...t.module,...t.supplemental],{included:r,excluded:i}=this._eidSelector.processEids(n),{included:a,excluded:o}=this._eidProcessor.processEids(r),s=a,c=[...i,...o];return{included:s,excluded:c}}getProcessedEidsForBidder(e,t){return this._eidProcessor.processEids(e,t)}getEidSourcesToBiddersAccessMap(e){let{module:t,supplemental:n}=this.getEids(),r=[...t,...n],i=new Map,a=e||Object.values(G);for(let e of a){let{included:t}=this.getProcessedEidsForBidder(r,e);for(let n of t){let t=n.source;if(!t)continue;let r=i.get(t)??[];r.includes(e)||(r.push(e),i.set(t,r))}}for(let[e,t]of i.entries())i.set(e,Array.from(new Set(t)));return i}};Ym=w([S(),N(0,b(P)),N(1,b(Jm)),N(2,b(qm))],Ym);let Xm=class extends F{constructor(...e){super(...e),C(this,`_default`,!1),C(this,`source`,``)}init(){this._key=`IdGraphLiveRamp`,this._lookup=`IDGLR`}run(){return super.run()}};w([R()],Xm.prototype,`run`,null),Xm=w([S()],Xm);var Zm=class{constructor(e){this._config=e}get regulatoryCompliant(){return this._config?!this._config.gpc.gpcEnabled&&!this._config.ccpa.enabled:!1}get enabled(){return this.regulatoryCompliant}};let Qm=class extends Zm{constructor(e,t){super(e),this._config=e,this._idGraphLiveRampExperiment=t,C(this,`_envelopeKey`,`_lr_env`),C(this,`_isEnvelopeModuleReady`,!1),C(this,`_enabled`,this._config.liveRampAts?.enabled&&`localStorage`in window),window.addEventListener(`envelopeModuleReady`,()=>{this._isEnvelopeModuleReady=!0})}get enabled(){return super.enabled&&this._enabled}_runLiveRamp(e){if(e.collectionMethod===`graph3p`&&!this._idGraphLiveRampExperiment.result||e.collectionMethod===`liveIntent`)return;let t,n=``;this._config.gdpr.enabled?(t=`gdpr`,n=this._config.gdpr.consentCapturedData.consentString??``):this._config.ccpa.required&&(t=`ccpa`,n=this._config.ccpa.privacyString??this._config.ccpa.ccpaOptIn);try{let r=[e.sha256Hash,e.sha1Hash].filter(e=>e&&e.length);r&&r.length&&window.atsenvelopemodule.setAdditionalData({consentString:n,...t===void 0?{}:{consentType:t},id:r,type:e.sha256Hash||e.sha1Hash?`emailHashes`:`email`})}catch(e){E.error(`LiveRampPiiPartner`,`processPii`,`Error setting ATS additional data`,e)}}processPii(e){this._isEnvelopeModuleReady?this._runLiveRamp(e):window.addEventListener(`envelopeModuleReady`,()=>{this._runLiveRamp(e)})}get _shouldSetTargeting(){return this._enabled&&(!!L.readExternalLocalStorage(this._envelopeKey)||!!L.readExternalCookie(this._envelopeKey))}};Qm=w([D(`LiveRampPiiPartner`),x(),N(0,b(J)),N(1,b(Xm))],Qm);let $m=new Map([[`adman.gr`,`iiq_adm`],[`adobe.com`,`iiq_ado`],[`adyoulike.com`,`iiq_ady`],[`amobee.com`,`iiq_amb`],[`aol.com`,`iiq_aol`],[`beeswax.com`,`iiq_bee`],[`bidswitch.net`,`iiq_bdswt`],[`criteo.com`,`iiq_cri`],[`epsilon.com`,`iiq_eps`],[`smartadserver.com`,`iiq_equ`],[`freewheel.com`,`iiq_fw`],[`gumgum.com`,`iiq_gum`],[`indexexchange.com`,`iiq_ix`],[`intentiq.com`,`iiq_id`],[`iqm.com`,`iiq_iqm`],[`krux.com`,`iiq_krx`],[`loopme.com`,`iiq_loo`],[`rubiconproject.com`,`iiq_mgn`],[`mediaforce.com`,`iiq_mf`],[`media.net`,`iiq_mnet`],[`mgid.com`,`iiq_mgi`],[`nativo.com`,`iiq_nat`],[`neustar.biz`,`iiq_neu`],[`onetag.com`,`iiq_one`],[`openx.net`,`iiq_ox`],[`performmedia.com`,`iiq_per`],[`pubmatic.com`,`iiq_pub`],[`qortex.ai`,`iiq_qtx`],[`quantcast.com`,`iiq_qua`],[`richaudience.com`,`iiq_ra`],[`sharethrough.com`,`iiq_sht`],[`simplifi.com`,`iiq_sim`],[`sonobi.com`,`iiq_son`],[`sovrn.com`,`iiq_svrn`],[`synacor.com`,`iiq_syn`],[`taboola.com`,`iiq_tab`],[`adsrvr.org`,`iiq_uid1`],[`adserver.org`,`iiq_uid1e`],[`uidapi.com`,`iiq_uid2`],[`triplelift.com`,`iiq_tl`],[`verizon.com`,`iiq_ver`],[`adnxs.com`,`iiq_xan`],[`yahoo.com`,`iiq_yah`],[`yieldmo.com`,`iiq_ym`],[`zemanta.com`,`iiq_zem`],[`teads.tv`,`iiq_teads`],[`liveramp.com`,`iiq_lr`]]),eh=new Map([[`liveintent.com`,`liid`],[`uidapi.com`,`li_uid2`],[`rubiconproject.com`,`li_mgn`],[`liveintent.indexexchange.com`,`li_ix`],[`liveintent.sovrn.com`,`li_svrn`],[`media.net`,`li_mnet`],[`pubmatic.com`,`li_pub`],[`openx.net`,`li_ox`],[`bidswitch.net`,`li_bdswt`],[`adserver.org`,`li_uid1`],[`liveintent.triplelift.com`,`li_tl`],[`sharethrough.com`,`li_sht`],[`liveintent.unrulymedia.com`,`li_nx`]]),th=class{constructor(e,t,n,r,i,a){this._userIds=e,this._liveRampPiiPartner=t,this._context=n,this._userSyncConfig=r,this._gam=i,this._eidManager=a}getSyncedIdModules(e){return[...e].reduce((e,t)=>{let n=this._userIds.get(t.name);return n&&this.getStoredUserIds(n)&&e.push(n.id.name),e},[])}getSyncedBrowserIdPartners(e){let t=this.getSyncedIdModules(e).map(e=>this._userIds.get(e)?.targetingKey).filter(e=>!!e);this._context.gpid&&t.push(`gpid`);let n=this.getMagniteCarbonId(),r=this.getAmazonPublisherAudienceId(),i=this._getConditionalPiiPartners(),a=this._getRaptiveConnectedId(),o=this._getDcn1Uid1();return[...t,...n,...r,...i,...a,...o]}_getRaptiveConnectedId(){let e=[];return L.readExternalCookie(`_rcid`)&&e.push(`rcid`),e}_getDcn1Uid1(){return L.readInternalLocalStorage(`adt_uid1`)?[`r_uid1`]:[]}_getConditionalPiiPartners(){let e=[];return this._liveRampPiiPartner._shouldSetTargeting&&e.push(`ats`),e}setUid1TargetingFlag(e){let t=e.find(e=>e.source===`adserver.org`&&Vm(e)),n=e.find(e=>e.source===`adsrvr.org`&&Vm(e));t&&n?this._gam.setTargetingFlag(`uid1e`,[`2`],!0):t?this._gam.setTargetingFlag(`uid1e`,[`1`],!0):n&&this._gam.setTargetingFlag(`uid1e`,[`0`],!0)}getSyncedAuctionEidPartners(e){let t=[],{included:n,excluded:r}=this._eidManager.getProcessedEids();if(n){this.setUid1TargetingFlag(n);let r=n.filter(e=>e.matcher!==`id5-sync.com`);t=e.reduce((e,t)=>{let n=r.find(e=>e.source===t?.eidSource||t.eidSourceAlias&&e.source===t?.eidSourceAlias);if(n){if((n.source===`adserver.org`||n.source===`uidapi.com`)&&n.uids.length>0){let t=n.uids[0].ext?.provider,r=n.source===`adserver.org`;if(n.source===`uidapi.com`&&t){if(t===`liveintent.com`)return e}else if(r&&(t===`liveintent.com`||t===window.location.hostname))return e}e.push(t.targetingKey)}return e},[])}let[i,a]=this._getLiveIntentEidPartners(n,r),[o,s]=this._getIntentIqEidPartners(n,r),c=this._getBidderLevelEidPartners(),[l,u]=this._getId5EidPartners(n,r),[d,f]=this._getUid1EidPartners(n,r),[p,m]=this._getRaptiveEidPartners(n,r),h=[...t,...i,...o,...c,...l,...d,...p],g=[...u,...a,...s,...f,...m];return[h,g]}_getLiveIntentEidPartners(e,t){let n=[],r=[];for(let[i,a]of eh){let o=e.find(e=>e.source===i&&Im(e)),s=t.find(e=>e.source===i&&Im(e));o?n.push(a):s&&r.push(a)}return[n,r]}_getIntentIqEidPartners(e,t){let n=[],r=[];for(let[i,a]of $m){let o=e.find(e=>e.source===i&&Rm(e)),s=t.find(e=>e.source===i&&Rm(e));o?n.push(a):s&&r.push(a)}return[n,r]}_getBidderLevelEidPartners(){let e=[];return this._userSyncConfig.pubmaticBidderLevelEidSource===`mediawallah-dcn`&&e.push(`mw_pub`),e}_getId5EidPartners(e,t){let n=[],r=[],i=new Map([[`adserver.org`,`id5_uid1`],[`adsrvr.org`,`id5_uid1`],[`adnxs.com`,`id5_appn`],[`bidswitch.net`,`id5_bdswt`],[`indexexchange.com`,`id5_ix`],[`kargo.com`,`id5_krg`],[`pubmatic.com`,`id5_pub`],[`rubiconproject.com`,`id5_mgn`],[`triplelift.com`,`id5_tl`],[`yieldmo.com`,`id5_ym`]]);for(let[a,o]of i){let i=e.find(e=>e.source===a&&zm(e)),s=t.find(e=>e.source===a&&zm(e));i?n.push(o):s&&r.push(o)}return[n,r]}_getUid1EidPartners(e,t){let n=[],r=[],i=new Map([[`adserver.org`,`r_uid1`]]);for(let[a,o]of i){let i=e.find(e=>e.source===a&&Bm(e)),s=t.find(e=>e.source===a&&Bm(e));i?n.push(o):s&&r.push(o)}return[n,r]}_getRaptiveEidPartners(e,t){let n=[],r=[],i=new Map([[`uuid.raptive-sync.net`,`rapt_uid`]]);for(let[a,o]of i){let i=e.find(e=>e.source===a&&Km(e)),s=t.find(e=>e.source===a&&Km(e));i?n.push(o):s&&r.push(o)}return[n,r]}getAmazonPublisherAudienceId(){return L.readExternalCookie(`AMZN-Token`)?[`amzn`]:[]}getMagniteCarbonId(){let e=L.readExternalLocalStorage(`carbon_ccuid`),t=L.readExternalCookie(`ccuid`),n=L.readExternalCookie(`ccsid`);return e||t||n?[`mgncrbn`]:[]}getStoredUserIds(e){let{id:{storage:t},localStorageKey:n,cookieStorageKey:r}=e,i;return t&&t.type===`cookie`&&window.navigator.cookieEnabled?i=L.readExternalCookie(t.name):t&&t.type===`html5`?i=L.readExternalLocalStorage(t.name):n?i=L.readExternalLocalStorage(n):r&&(i=L.readExternalCookie(r)),i}getParsedUserIdStoredValue(e){let t=this.getStoredUserIds(e);if(t){if(!e.storageParser)return t;try{return e.storageParser(t)}catch{return t}}}getLiveRampAtsEnvelopeSourceId(){let e=`_lr_env_src_ats`;return(L.readExternalLocalStorage(e)||L.readExternalCookie(e))??``}};th=w([D(`UserIdTargeting`),x(),N(0,b(Nm)),N(1,b(Qm)),N(2,b(W)),N(3,b(Lp)),N(4,b(Z)),N(5,b(Ym))],th);let nh=e=>e.split(``).map(e=>e.charCodeAt(0).toString(2)).join(` `),rh=e=>parseInt(e.charAt(e.length-1))%2==0,ih=class extends I{constructor(e,t,n,r,i,a,o,s,c,l,u,d){super(),this._gpcConfig=e,this._ccpaConfig=t,this._prebidMethods=n,this._userIdTargeting=r,this._userIds=i,this._gam=a,this._slotEventBus=o,this._userIdEventBus=s,this._prebidEventBus=c,this._user=l,this._context=u,this._eidManager=d,C(this,`_enabledUserIds`,[]),C(this,`_enabledUserIdConfigs`,[]),C(this,`_ppid`,null),this.enabled&&(this._enabledUserIds=[...i.values()].filter(e=>e.enabled).map(e=>{if(e.id.name===`uid2`){let t=this._computeUid2TargetingKeyFromConfig(e);t&&(e.targetingKey=t)}return e.id}),this._enabledUserIdConfigs=[...i.values()].filter(e=>e.enabled).map(e=>{if(e.id.name===`uid2`){let t=this._computeUid2TargetingKeyFromConfig(e);t&&(e.targetingKey=t)}return e}),this._slotEventBus.requestingBids.once(this._setPPID.bind(this)),this._slotEventBus.refreshingBids.once(this._addPPIDToBidStream.bind(this)),this._userIdEventBus.uid2Refreshed.on(()=>{this._refreshUid2TargetingKey()}),this._context.gpid||this._prebidMethods.getUserIdsAsync().then(()=>{let e=this._eidManager.getModuleEids([`gpid.id5-sync.com`]);e&&e.length>0&&e[0].uids.length>0&&e[0].uids[0].id&&(this._context.gpid=e[0].uids[0].id)}))}_refreshUid2TargetingKey(){this._enabledUserIds=[...this._userIds.values()].filter(e=>e.enabled).map(e=>{if(e.id.name===`uid2`){let t=this._computeUid2TargetingKeyFromConfig(e);t&&(e.targetingKey=t)}return e.id}),this._enabledUserIdConfigs=[...this._userIds.values()].filter(e=>e.enabled).map(e=>{if(e.id.name===`uid2`){let t=this._computeUid2TargetingKeyFromConfig(e);t&&(e.targetingKey=t)}return e})}_computeUid2TargetingKeyFromConfig(e){let t=e.id.params?.uid2Token;if(t)return t.provider===`raptive`?`uid2_rt`:t.provider===`optable`?{"liveintent.com":`uid2_sdklir`,"truedata.com":`uid2_td`,"mediawallah.com":`uid2_mw`}[t.matcher??``]??`uid2_opt`:`uid2_np`}get enabled(){return!this._gpcConfig.gpcEnabled&&!this._ccpaConfig.userOptedOut}getTargetingData(){if(!this.enabled)return[];let[e,t]=this._userIdTargeting.getSyncedAuctionEidPartners(this._enabledUserIdConfigs),n=this._userIdTargeting.getSyncedBrowserIdPartners(this._enabledUserIds);return this._flattenSyncedIdPartnerData(n,e,t)}_flattenSyncedIdPartnerData(e,t,n){let r=new Set(e),i=new Set(t),a=[],o=[],s=[];for(let t of e)i.has(t)?s.push(t):a.push(`i:${t}`);for(let e of t)r.has(e)||o.push(`e:${e}`);let c=n.filter(e=>!r.has(e)).map(e=>`i:${e}`);return[...a,...o,...c,...s]}get enabledUserIds(){return this.enabled?[...this._userIds.values()].map(e=>e.id):[]}init(){if(!this.enabled)return;let e={userIds:this._enabledUserIds};this.setTAMLiveIntentFlag(),this._prebidMethods.setConfig({userSync:e},!1),this.setLiveRampAtsEnvelopeSourceId(),this._prebidEventBus.auctionInit.on(e=>{if(!e?.bidderRequests)return;let{included:t}=this._eidManager.getProcessedEids(),n={},r=e=>{if(n[e])return n[e];let{included:r}=this._eidManager.getProcessedEidsForBidder(t,e);return n[e]=r,r};e.bidderRequests.forEach(e=>{let t=r(e.bidderCode),n=e.ortb2??={},i=n.user??={},a=i.ext??={};a.eids=t})})}setTAMLiveIntentFlag(){let e=this._enabledUserIdConfigs.find(e=>e.id.name===`liveIntentId`);window.liModuleEnabled=e!==void 0}setLiveRampAtsEnvelopeSourceId(){let e=this._userIdTargeting.getLiveRampAtsEnvelopeSourceId();e&&this._gam.setTargetingFlag(`ats_src`,e===`true`?[`t`]:[`f`])}_setRCIDAsSharedId(){let e=this._userIds.get(`sharedId`);e&&e.enabled&&this._ppid?.value&&(e.id.value={pubcid:this._ppid.value},delete e.id.storage,this._userIdEventBus.userIdNeedsRefresh.emit({options:{submoduleNames:[e?.id.name]},callback:()=>{}}))}async _setPPID(){let e=this._context.gpid,t=await this._user.getRcid(),n=Gp();t?.value?.sharedId?this._isRCIDConversionEven(t.value.sharedId)?(this._ppid={value:t.value.sharedId,source:`rcid_e`},this._setRCIDAsSharedId()):this._ppid={value:n,source:`rcid_o`}:e?this._ppid={value:e,source:`gpid`}:n&&(this._ppid={value:n,source:`sh_id`}),this._addPPIDToBidStream()}_addPPIDToBidStream(){let e=this._ppid?.value??null;if(e&&this._ppid?.source){let t={userIds:this._enabledUserIds};this._ppid.source===`gpid`?(this._userIds.get(`id5Id`)?.enabled||this._gam.setIdAsPPID(e),t.ppid=`gpid.id5-sync.com`):(this._userIds.get(`sharedId`)?.enabled||this._gam.setIdAsPPID(e),t.ppid=`pubcid.org`),this._prebidMethods.setConfig({userSync:t},!1),this._gam.setTargetingFlag(`ppid`,[this._ppid.source],!0)}}_isRCIDConversionEven(e){let t=nh(e);return!!rh(t)}};ih=w([D(`UserIdComponent`),S(),N(0,b(mi)),N(1,b(U)),N(2,b(P)),N(3,b(th)),N(4,b(Nm)),N(5,b(Z)),N(6,b(Hs)),N(7,b(Bp)),N(8,b(Qf)),N(9,b($o)),N(10,b(W)),N(11,b(Ym))],ih);let ah=class extends V{init(){this._key=`UserSyncTrigger`,this._lookup=`USYNCTRIG`}};ah=w([S()],ah);let oh=class extends I{constructor(e,t){super(),this._userSyncTriggerExperiment=e,this._prebidMethods=t,C(this,`_alreadyCalled`,!1),C(this,`_userSyncTriggerMap`,new Map([[2,`onConfigSet`],[3,`onBeforeRequestEvent`]]))}triggerUserSyncBasedOnExperiment(e){let t=this._userSyncTriggerExperiment.result;t&&this._userSyncTriggerMap.get(t)===e&&!this._alreadyCalled&&(this._prebidMethods.triggerUserSyncs(),this._alreadyCalled=!0)}};oh=w([D(`UserSyncTriggerComponent`),S(),N(0,b(ah)),N(1,b(P))],oh);let sh=(e,t)=>{let n=e.get(t.name);return n&&t.type===`RaptivePlayer`&&t.name!==A.Video_In_Post_ClicktoPlay_SoundOn&&(n=t.muted?2:1),n},ch=class extends qe{constructor(...e){super(...e),C(this,`blockCreativeIds`,new T),C(this,`cridsUpdated`,new T)}};ch=w([S()],ch);let lh=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`LiverampSecureSignals`,this._lookup=`LRSS`}};lh=w([S()],lh);let uh=`Facebook`,dh=`Instagram`,fh=`Pinterest`,ph=new Map([[uh,{ios:`com.facebook.Facebook`,android:`com.facebook.katana`}],[fh,{ios:`pinterest`,android:`com.pinterest`}],[dh,{ios:`com.burbn.instagram`,android:`com.instagram.android`}]]),mh=()=>window.navigator.userAgent.includes(`[Pinterest/iOS]`)||window.navigator.userAgent.includes(`[Pinterest/Android]`),hh=()=>window.navigator.userAgent.includes(`Pinterest/iOS`),gh=()=>window.navigator.userAgent.includes(`FBAN`)||window.navigator.userAgent.includes(`FBAV`),_h=()=>window.navigator.userAgent.includes(`Instagram`),vh=(e,t)=>{let n=gh()?uh:_h()?dh:mh()?fh:``,r=ph.get(n);if(r){let i=Lt()?r.ios:Rt()?r.android:``;return i?{bundle:i,name:n,domain:e,content:t.content}:void 0}},yh={quot:`"`,"#34":`"`,apos:`'`,"#39":`'`,amp:`&`,"#38":`&`,lt:`<`,"#60":`<`,gt:`>`,"#62":`>`},bh=e=>(e??``).replace(/(?:&(?:(quot|#34|apos|#39|amp|#38|lt|#60|gt|#62);)|\\(["']))/gi,(e,t,n)=>t?yh[t.toLowerCase()]??e:n??e),xh=(e,t=5)=>{let n=e;for(let e=0;e<t&&/[+%]/.test(n);e++)try{let e=decodeURIComponent(n.replace(/\+/g,` `));if(e===n)break;n=e}catch{break}return n},Sh=e=>{if(!e)return``;let t=e.replace(/[\]\)\};,]+$/g,``),n=/^v\d+~~([^:\]\)\}\s]+)(?::\d+)?$/i.exec(t);return n?n[1]:t},Ch=`(?:[A-Za-z0-9_]+_)?`,wh=[`impid`,`imp_id`,`imp`,`_s5`],Th=`(${[...wh,`plc`,`advid`].join(`|`)})`,Eh=`[^&"'<>\\s\\]\\)\\};,]+`,Dh=RegExp(`(?:^|[?&#;]|[^A-Za-z0-9_])(?:${Ch}${Th})\\s*=\\s*(${Eh})`,`gi`),Oh=RegExp(`['"](?:${Ch}${Th})['"]\\s*:\\s*['"]?(${Eh})`,`gi`),kh=(e,t=5)=>{try{let n=bh(e);n=xh(n,t),n=bh(n),Dh.lastIndex=0,Oh.lastIndex=0;let r,i,a,o=(e,t)=>{let n=Sh(t);n&&(e===`imp`?r||=n:e===`plc`?i||=n:a||=n)},s=()=>r&&i&&a,c;for(;c=Dh.exec(n);){let e=c[1].toLowerCase(),t=c[2];if(!r&&wh.includes(e)?o(`imp`,t):!i&&e===`plc`?o(`plc`,t):!a&&e===`advid`&&o(`ad`,t),s())break}if(!s())for(;c=Oh.exec(n);){let e=c[1].toLowerCase(),t=c[2];if(!r&&wh.includes(e)?o(`imp`,t):!i&&e===`plc`?o(`plc`,t):!a&&e===`advid`&&o(`ad`,t),s())break}return{impId:r,plc:i,advid:a}}catch{return}},Ah=()=>new Promise(e=>{if(document.readyState===`complete`)return e();window.addEventListener(`load`,()=>e())}),jh=new Set(`1048385474.1070593675.1169124451.1169281092.1182037116.1182037398.1182053750.1190038272.1194598971.1304407173.1392835.1485539473.1496520159.1566694492.1592553755.1629055349.2407.2547.2551.2566.2568.2580.2582.2585.2587.2589.2590.2596.2599.2600.2616.2621.2628.266741.2684.2696.2724.2725.2783.2819.2852.2966.2995.3000.3002.3004.3014.3016.3026.3095.3116.3117.3131.3151.3181.3307531.3323.3349.3350.3353.3379.3438.3473.3528.3588.3619.3650331.3669.3721231.3737.3770.3823.3826.3869.3874.3904.3918.3938.3939.3945.3971.4030.4050.4080.4098.4114.4115.4134.4136.4241.4273.4296.4313.4354.4357.4388.4390.4477.4493.4507.4519.4704.4721.4755635.5012.5050.5162.5220.5246.5299.5326.5784.5851.5852.6017.6031.6182.6590.6690543787.6705004500.6705023911.6909.725908063.8099.8100.8101.8102.8103.8104.8433.860648321.889343949.969341951.985761282`.split(`.`)),Mh=e=>{let t=e?.meta?.seat?.toString()?.split(`:`)||[],n=e?.meta?.advertiserId?.toString();return n&&t.push(n),t},Nh=e=>e?Mh(e).some(e=>jh.has(e)):!1,Ph=class{constructor(e){this._gamEventBus=e,C(this,`_gamSlotRequested`,!1),C(this,`_appnexusAdvertiserId`,10645616),C(this,`creativeId`,void 0),this._init()}isRoadblock(e){let t=Object.keys(e);return this._gamSlotRequested?!1:!!t.filter(t=>t.indexOf(`Footer`)>-1&&e[t].bids.filter(e=>e.meta&&e.meta.advertiserId&&e.meta.advertiserId===this._appnexusAdvertiserId&&e.creativeId?(this.creativeId=e.creativeId,!0):!1).length).length}_init(){this._gamEventBus.slotRequested.once(()=>{this._gamSlotRequested=!0,this.creativeId=void 0})}};Ph=w([x(),N(0,b(X))],Ph);let Fh=(e,t)=>{let n=document.getElementsByTagName(`script`)[0];n&&n.parentNode&&!t?n.parentNode.insertBefore(e,n):document.body.appendChild(e)},Ih=(e,t=!1,n=!1,r=!1)=>new Promise((i,a)=>{let o=document.createElement(`script`);o.addEventListener(`error`,()=>a(Error(`Failed to import script ${e}`))),o.addEventListener(`load`,()=>i(o)),o.type=`text/javascript`,o.src=e,o.defer=n,o.async=r,Fh(o,t)});var Lh=class{};let Rh=class extends V{init(){this._key=`Analytics2`,this._lookup=`PBA2`}run(){return super.run()}};w([R()],Rh.prototype,`run`,null),Rh=w([S()],Rh);let zh=class extends Lh{constructor(e,t){super(),this._analyticsExperiment=e,this._prebidServerMultiCallExperiment=t,C(this,`name`,`Assertive-yield`),C(this,`_url`,`https://ads.adthrive.com/ay/ay.js`),C(this,`_entityId`,`8DBojqDi4uyEa5CBW`)}init(){if(!window.localStorage){E.error(`AssertiveYieldAnalytics`,`init`,Error(`Disabled ay because localStorage is undefined`));return}Ih(this._url).then(this.initializeAy.bind(this)).catch(e=>E.error(`AssertiveYieldAnalytics`,`init - failed`,e))}initializeAy(){if(!window.ayS2STag){E.error(`AssertiveYieldAnalytics`,`failed to load ayS2STag`);return}let{bucket:e,deployment:t}=window.adthrive;window.ayS2STag.init({entityId:this._entityId,pbjs:`pbjs`,analytics:{enabled:!0,custom_1:this._prebidServerMultiCallExperiment.result,custom_2:e,custom_3:t}})}get enabled(){return this._analyticsExperiment.result===`ay`}};zh=w([D(`AssertiveYieldAnalytics`),x(),N(0,b(Rh)),N(1,b(va))],zh);function Bh(e,t){return t===`string`?typeof e==`string`:t===`number`?typeof e==`number`&&Number.isFinite(e):t===`integer`?typeof e==`number`&&Number.isInteger(e):t===`boolean`?typeof e==`boolean`:t===`array`?Array.isArray(e):t===`object`?e&&typeof e==`object`&&!Array.isArray(e):!0}function Vh(e,t){if(e==null)return e;if(t===`number`){if(typeof e==`string`){let t=e.trim();if(t===``)return e;let n=Number(t);if(Number.isFinite(n))return n}return e}if(t===`integer`){if(typeof e==`string`){let t=e.trim();if(t===``)return e;let n=Number(t);if(Number.isInteger(n))return n}else if(typeof e==`number`&&Number.isInteger(e))return e;return e}if(t===`boolean`){if(typeof e==`string`){let t=e.trim().toLowerCase();if(t===`true`||t===`1`)return!0;if(t===`false`||t===`0`)return!1}else if(typeof e==`number`){if(e===1)return!0;if(e===0)return!1}return e}return t===`string`&&(typeof e==`number`||typeof e==`boolean`)?String(e):e}function Hh(e,t){if(!t||!Array.isArray(t))return!0;for(let n of t)if(e[n]===void 0)return!1;return!0}function Uh(e){return e.replace(/[A-Z]/g,e=>`_`+e.toLowerCase()).replace(/^_/,``)}function Wh(e){return e.replace(/_([a-z])/g,(e,t)=>t.toUpperCase())}function Gh(e,t){if(!e||!e.startsWith(`#/definitions/`))return null;let n=e.replace(`#/definitions/`,``);return t[n]||null}function Kh(e,t){if(!e||typeof e!=`object`)return null;if(Object.prototype.hasOwnProperty.call(e,t))return t;var n=Uh(t);if(Object.prototype.hasOwnProperty.call(e,n))return n;var r=Wh(t);return Object.prototype.hasOwnProperty.call(e,r)?r:null}function qh(e,t,n=``,r=[],i={}){if(!Bh(e,`object`))return r.push({instancePath:n,schemaPath:`#/type`,keyword:`type`,params:{type:`object`},message:`must be object`}),{isValid:!1,errors:r};if(Hh(e,t.required)||(t.required||[]).filter(t=>e[t]===void 0).forEach(e=>{r.push({instancePath:n,schemaPath:`#/required`,keyword:`required`,params:{missingProperty:e},message:`must have required property `+e})}),t.properties)for(var a in t.properties){var o=t.properties[a],s=Kh(e,a);if(s!==null){var c=n?n+`/`+s:s;if(o.type&&o.type!==`object`&&o.type!==`array`){var l=e[s];Array.isArray(l)&&l.length===1&&(l=l[0]),e[s]=Vh(l,o.type)}if(o.$ref){var u=Gh(o.$ref,i);u&&qh(e[s],u,c,r,i)}else if(o.type===`object`)qh(e[s],o,c,r,i);else if(o.type===`array`&&o.items){if(Bh(e[s],`array`)){o.items.type&&o.items.type!==`object`&&o.items.type!==`array`&&(e[s]=e[s].map(function(e){return Vh(e,o.items.type)}));for(var d=0;d<e[s].length;d++){var f=e[s][d],p=c+`/`+d;if(o.items.$ref){var m=Gh(o.items.$ref,i);m&&qh(f,m,p,r,i)}else o.items.type===`object`?qh(f,o.items,p,r,i):o.items.type&&!Bh(f,o.items.type)&&r.push({instancePath:p,schemaPath:`#/properties/`+a+`/items/type`,keyword:`type`,params:{type:o.items.type},message:`must be `+o.items.type})}}}else o.type&&!Bh(e[s],o.type)&&r.push({instancePath:c,schemaPath:`#/properties/`+a+`/type`,keyword:`type`,params:{type:o.type},message:`must be `+o.type})}}if(t.additionalProperties===!1){let n=Object.keys(t.properties||{}),r=new Set(n),i=new Set(n.map(Uh)),a=new Set(n.map(Wh));for(let t in e)!r.has(t)&&!i.has(t)&&!a.has(t)&&delete e[t]}if(t.additionalProperties&&typeof t.additionalProperties==`object`&&t.additionalProperties!==null){let a=t.properties||{};for(let o in e){if(Object.prototype.hasOwnProperty.call(a,o)||Object.prototype.hasOwnProperty.call(a,Uh(o))||Object.prototype.hasOwnProperty.call(a,Wh(o)))continue;let s=t.additionalProperties,c=e[o],l=n?n+`/`+o:`/`+o;if(s.$ref){let e=Gh(s.$ref,i);e&&qh(c,e,l,r,i);continue}if(s.type===`object`){qh(c,s,l,r,i);continue}if(s.type===`array`&&s.items){if(!Bh(c,`array`)){delete e[o];continue}s.items.type&&s.items.type!==`object`&&s.items.type!==`array`&&(e[o]=c.map(function(e){return Vh(e,s.items.type)}));let t=e[o];for(let e=t.length-1;e>=0;e--){let n=t[e],a=l+`/`+e;if(s.items.$ref){let e=Gh(s.items.$ref,i);e&&qh(n,e,a,r,i)}else s.items.type===`object`?qh(n,s.items,a,r,i):s.items.type&&!Bh(n,s.items.type)&&t.splice(e,1)}continue}if(s.type&&s.type!==`object`&&s.type!==`array`){let t=c;Array.isArray(t)&&t.length===1&&(t=t[0]),t=Vh(t,s.type),Bh(t,s.type)?e[o]=t:delete e[o]}}}return{isValid:r.length===0,errors:r}}let Jh={BidResponse:{type:`object`,properties:{adserver_targeting:{$ref:`#/definitions/AdServerTargeting`},ad_unit_code:{type:`string`},analytics_labels:{$ref:`#/definitions/AnalyticsLabels`},auction_id:{type:`string`},base_context:{$ref:`#/definitions/BaseContext`},bidder:{type:`string`},bidder_code:{type:`string`},cpm:{type:`number`},currency:{type:`string`},event_type:{type:`string`},floor_data:{$ref:`#/definitions/FloorData`},floor_value:{type:`number`},height:{type:`number`},media_type:{type:`string`},meta:{$ref:`#/definitions/Meta`},original_cpm:{type:`number`},request_id:{type:`string`},request_timestamp:{type:`number`},response_cpm:{type:`number`},response_time_millis:{type:`number`},response_timestamp:{type:`number`},size:{type:`string`},source:{type:`string`},status_message:{type:`string`},time_to_respond:{type:`number`},transaction_id:{type:`string`},ttl:{type:`number`},width:{type:`number`},seat_non_bid_status_code:{type:`number`}},additionalProperties:!1},AdServerTargeting:{type:`object`,properties:{hb_adid:{type:`string`},hb_adomain:{type:`string`},hb_attr:{type:`string`},hb_bidder:{type:`string`},hb_cache_host:{type:`string`},hb_cache_id:{type:`string`},hb_cache_path:{type:`string`},hb_crid:{type:`string`},hb_deal:{type:`string`},hb_ds:{type:`string`},hb_dsp:{type:`string`},hb_format:{type:`string`},hb_pb:{type:`string`},hb_size:{type:`string`},hb_source:{type:`string`},hb_uuid:{type:`string`}},additionalProperties:!1},AnalyticsLabels:{type:`object`,properties:{deployment:{type:`string`}},additionalProperties:!1},BaseContext:{type:`object`,properties:{event_name:{type:`string`},event_timestamp:{type:`string`},iceberg_table:{type:`string`},message_id:{type:`string`},received_at:{type:`string`},sent_at:{type:`string`},source_id:{type:`string`},trace_id:{type:`string`}},additionalProperties:!1},FloorData:{type:`object`,properties:{cpm_after_adjustments:{type:`number`},enforcements:{$ref:`#/definitions/FloorData_Enforcements`},floor_currency:{type:`string`},floor_rule:{type:`string`},floor_rule_value:{type:`number`},floor_value:{type:`number`},matched_fields:{$ref:`#/definitions/FloorData_MatchedFields`}},additionalProperties:!1},FloorData_Enforcements:{type:`object`,properties:{bid_adjustment:{type:`boolean`},enforce_j_s:{type:`boolean`},enforce_p_b_s:{type:`boolean`},floor_deals:{type:`boolean`}},additionalProperties:!1},FloorData_MatchedFields:{type:`object`,properties:{ad_unit_code:{type:`string`},domain:{type:`string`},hvp:{type:`string`},known_user:{type:`string`}},additionalProperties:!1},Meta:{type:`object`,properties:{adaptercode:{type:`string`},advertiser_domains:{type:`array`,items:{type:`string`}},advertiser_id:{type:`string`},advertiser_name:{type:`string`},agency_id:{type:`string`},agency_name:{type:`string`},attr:{type:`array`,items:{type:`number`}},bf1:{type:`number`},bf2:{type:`number`},bfc1:{type:`string`},bfc2:{type:`string`},brand_id:{type:`string`},brand_name:{type:`string`},buyer_id:{type:`string`},click_url:{type:`string`},dchain:{$ref:`#/definitions/Meta_DChain`},demand_source:{type:`string`},dsa:{$ref:`#/definitions/Meta_Dsa`},is_in_banner_video:{type:`boolean`},media_type:{type:`string`},network_id:{type:`string`},network_name:{type:`string`},primary_cat_id:{type:`string`},s:{type:`number`},seat:{type:`string`},secondary_cat_ids:{type:`array`,items:{type:`string`}}},additionalProperties:!1},Meta_DChain:{type:`object`,properties:{complete:{type:`number`},nodes:{type:`array`,items:{$ref:`#/definitions/Meta_Nodes`}},ver:{type:`string`}},additionalProperties:!1},Meta_Nodes:{type:`object`,properties:{asi:{type:`string`},bsid:{type:`string`}},additionalProperties:!1},Meta_Dsa:{type:`object`,properties:{adrender:{type:`number`}},additionalProperties:!1},BidWon:{type:`object`,properties:{adserver_targeting:{$ref:`#/definitions/AdServerTargeting`},ad_unit_code:{type:`string`},analytics_labels:{$ref:`#/definitions/AnalyticsLabels`},auction_id:{type:`string`},base_context:{$ref:`#/definitions/BaseContext`},bidder:{type:`string`},bidder_code:{type:`string`},cpm:{type:`number`},currency:{type:`string`},event_type:{type:`string`},floor_data:{$ref:`#/definitions/FloorData`},height:{type:`number`},media_type:{type:`string`},meta:{$ref:`#/definitions/Meta`},request_id:{type:`string`},request_timestamp:{type:`number`},response_cpm:{type:`number`},size:{type:`string`},source:{type:`string`},status:{type:`string`},status_message:{type:`string`},time_to_respond:{type:`number`},transaction_id:{type:`string`},ttl:{type:`number`},width:{type:`number`}},additionalProperties:!1},NoBid:{type:`object`,properties:{floor_data:{$ref:`#/definitions/FloorConfig`},event_type:{type:`string`},bidder:{type:`string`},ad_unit_code:{type:`string`},auction_id:{type:`string`},analytics_labels:{$ref:`#/definitions/AnalyticsLabels`},floor:{$ref:`#/definitions/NoBid_Floor`},source:{type:`string`},base_context:{$ref:`#/definitions/BaseContext`}},additionalProperties:!1},FloorConfig:{type:`object`,properties:{floor_provider:{type:`string`},location:{type:`string`},model_timestamp:{type:`number`},model_version:{type:`string`},model_weight:{type:`number`},no_floor_signaled:{type:`boolean`},skipped:{type:`boolean`},skipped_reason:{type:`string`},skip_rate:{type:`number`}},additionalProperties:!1},NoBid_Floor:{type:`object`,properties:{floor:{type:`number`},currency:{type:`string`}},additionalProperties:!1},BidTimeout:{type:`object`,properties:{bids:{type:`array`,items:{$ref:`#/definitions/BidTimeout_BidTimeoutBids`}},analytics_labels:{$ref:`#/definitions/AnalyticsLabels`},event_type:{type:`string`},base_context:{$ref:`#/definitions/BaseContext`}},additionalProperties:!1},BidTimeout_BidTimeoutBids:{type:`object`,properties:{transaction_id:{type:`string`},bid_id:{type:`string`},bidder_wins_count:{type:`number`},auction_id:{type:`string`},ortb2_imp:{$ref:`#/definitions/Ortb2Imp`},media_types:{$ref:`#/definitions/MediaTypes`},bidder:{type:`string`},ortb2:{$ref:`#/definitions/Ortb2`},src:{type:`string`},bid_requests_count:{type:`number`},ad_unit_code:{type:`string`},bidder_requests_count:{type:`number`},floor_data:{$ref:`#/definitions/FloorConfig`},bidder_request_id:{type:`string`}},additionalProperties:!1},Ortb2Imp:{type:`object`,properties:{banner:{$ref:`#/definitions/Banner`},ext:{$ref:`#/definitions/Ext`},secure:{type:`number`},video:{$ref:`#/definitions/Video`}},additionalProperties:!1},Banner:{type:`object`,properties:{w:{type:`number`},pos:{type:`number`},h:{type:`number`}},additionalProperties:!1},Ext:{type:`object`,properties:{gpid:{type:`string`},tid:{type:`string`},vph:{type:`number`},vpw:{type:`number`},site_id:{type:`string`},ae:{type:`number`},data:{$ref:`#/definitions/Data`}},additionalProperties:!1},Data:{type:`object`,properties:{adserver:{$ref:`#/definitions/Data_AdServer`},hvp:{type:`string`},jw_targeting:{$ref:`#/definitions/Data_JwTargeting`},len:{type:`number`},pbadslot:{type:`string`},pos:{type:`string`},type:{type:`number`}},additionalProperties:!1},Data_AdServer:{type:`object`,properties:{name:{type:`string`},adslot:{type:`string`}},additionalProperties:!1},Data_JwTargeting:{type:`object`,properties:{media_i_d:{type:`string`},player_i_d:{type:`string`}},additionalProperties:!1},Video:{type:`object`,properties:{api:{type:`array`,items:{type:`number`}},context:{type:`string`},frameworks:{type:`array`,items:{type:`number`}},h:{type:`number`},language:{type:`string`},linearity:{type:`number`},maxduration:{type:`number`},minduration:{type:`number`},placement:{type:`number`},playbackend:{type:`number`},playbackmethod:{type:`number`},player_size:{type:`array`,items:{type:`number`}},plcmt:{type:`number`},pos:{type:`number`},skip:{type:`number`},startdelay:{type:`number`},w:{type:`number`}},additionalProperties:!1},MediaTypes:{type:`object`,properties:{banner:{$ref:`#/definitions/Banner`},native:{$ref:`#/definitions/Native`},video:{$ref:`#/definitions/Video`}},additionalProperties:!1},Native:{type:`object`,properties:{ortb:{$ref:`#/definitions/Ortb`}},additionalProperties:!1},Ortb:{type:`object`,properties:{privacy:{type:`number`},eventtrackers:{type:`array`,items:{$ref:`#/definitions/Ortb_EventTrackers`}},seq:{type:`number`},assets:{type:`array`,items:{$ref:`#/definitions/Ortb_Assets`}},contextsubtype:{type:`number`},ver:{type:`string`},plcmttype:{type:`number`},context:{type:`number`}},additionalProperties:!1},Ortb_EventTrackers:{type:`object`,properties:{methods:{type:`array`,items:{type:`number`}},event:{type:`number`}},additionalProperties:!1},Ortb_Assets:{type:`object`,properties:{data:{$ref:`#/definitions/Data`},id:{type:`number`},img:{$ref:`#/definitions/Ortb_Img`},required:{type:`number`},title:{$ref:`#/definitions/Ortb_Title`}},additionalProperties:!1},Ortb_Img:{type:`object`,properties:{hmin:{type:`number`},type:{type:`number`},wmin:{type:`number`}},additionalProperties:!1},Ortb_Title:{type:`object`,properties:{len:{type:`number`}},additionalProperties:!1},Ortb2:{type:`object`,properties:{source:{$ref:`#/definitions/Ortb2_Source`},site:{$ref:`#/definitions/Ortb2_Site`},at:{type:`number`},bcat:{type:`array`,items:{type:`string`}},ext:{$ref:`#/definitions/Ext`},cur:{type:`array`,items:{type:`string`}},pmp:{$ref:`#/definitions/Ortb2_Pmp`},device:{$ref:`#/definitions/Ortb2_Device`}},additionalProperties:!1},Ortb2_Source:{type:`object`,properties:{fd:{type:`number`},tid:{type:`string`}},additionalProperties:!1},Ortb2_Site:{type:`object`,properties:{cat:{type:`array`,items:{type:`string`}},domain:{type:`string`},mobile:{type:`number`},page:{type:`string`},pagecat:{type:`array`,items:{type:`string`}},privacypolicy:{type:`number`},publisher:{$ref:`#/definitions/Ortb2_Publisher`}},additionalProperties:!1},Ortb2_Publisher:{type:`object`,properties:{domain:{type:`string`}},additionalProperties:!1},Ortb2_Pmp:{type:`object`,properties:{private_auction:{type:`number`},deals:{type:`array`,items:{$ref:`#/definitions/Ortb2_Deals`}}},additionalProperties:!1},Ortb2_Deals:{type:`object`,properties:{id:{type:`string`},is_video:{type:`boolean`},at:{type:`number`},bidfloor:{type:`number`},bidfloorcur:{type:`string`}},additionalProperties:!1},Ortb2_Device:{type:`object`,properties:{dnt:{type:`number`},ext:{$ref:`#/definitions/Ext`},h:{type:`number`},ip:{type:`string`},ipv6:{type:`string`},js:{type:`number`},language:{type:`string`},ua:{type:`string`},w:{type:`number`},sua:{$ref:`#/definitions/Ortb2_Sua`}},additionalProperties:!1},Ortb2_Sua:{type:`object`,properties:{source:{type:`number`},platform:{$ref:`#/definitions/Ortb2_Platform`}},additionalProperties:!1},Ortb2_Platform:{type:`object`,properties:{brand:{type:`string`},version:{type:`array`,items:{type:`number`}}},additionalProperties:!1},BidRequested:{type:`object`,properties:{bids:{type:`array`,items:{$ref:`#/definitions/BidRequested_BidRequestedBids`}},ortb2_imp:{$ref:`#/definitions/Ortb2Imp`},event_type:{type:`string`},start:{type:`number`},bidder_request_id:{type:`string`},ortb2:{$ref:`#/definitions/Ortb2`},timeout:{type:`number`},auction_id:{type:`string`},eids_sources:{type:`array`,items:{type:`string`}},analytics_labels:{$ref:`#/definitions/AnalyticsLabels`},bidder_code:{type:`string`},auction_start:{type:`number`},base_context:{$ref:`#/definitions/BaseContext`}},additionalProperties:!1},BidRequested_BidRequestedBids:{type:`object`,properties:{ad_unit_code:{type:`string`},ad_unit_id:{type:`string`},auction_id:{type:`string`},auctions_count:{type:`number`},bidder:{type:`string`},bidder_request_id:{type:`string`},bidder_requests_count:{type:`number`},bidder_wins_count:{type:`number`},bid_id:{type:`string`},bid_requests_count:{type:`number`},defer_billing:{type:`boolean`},floor_data:{$ref:`#/definitions/FloorConfig`},label_all:{type:`array`,items:{type:`string`}},media_types:{$ref:`#/definitions/MediaTypes`},metrics:{$ref:`#/definitions/BidRequested_Metrics`},native_ortb_request:{type:`boolean`},native_params:{type:`boolean`},ortb2_imp:{$ref:`#/definitions/Ortb2Imp`},params:{$ref:`#/definitions/BidRequested_Params`},server_errors:{type:`array`,items:{$ref:`#/definitions/BidRequested_ServerErrors`}},server_response_time_ms:{type:`number`},src:{type:`string`},start_time:{type:`number`},transaction_id:{type:`string`},viewability:{type:`number`},pbs_host:{type:`string`}},additionalProperties:!1},BidRequested_Metrics:{type:`object`,properties:{request_bids_total:{type:`number`}},additionalProperties:!1},BidRequested_Params:{type:`object`,properties:{account_id:{type:`number`},ad_slot:{type:`string`},allow_smaller_sizes:{type:`boolean`},bidonmultiformat:{type:`boolean`},custom_params:{$ref:`#/definitions/BidRequested_CustomParams`},del_domain:{type:`string`},floor:{type:`number`},formats:{type:`array`,items:{type:`string`}},id:{type:`string`},inventory_code:{type:`string`},keywords:{$ref:`#/definitions/BidRequested_Keywords`},network_id:{type:`number`},page_id:{type:`number`},pkey:{type:`string`},placement_id:{type:`string`},position:{type:`string`},product_id:{type:`string`},publisher_id:{type:`string`},site_id:{type:`string`},size:{type:`array`,items:{type:`string`}},slot:{type:`number`},supply_source_id:{type:`string`},tag_id:{type:`string`},uid:{type:`number`},unit:{type:`string`},video:{$ref:`#/definitions/Video`},wiid:{type:`string`},zone:{type:`string`},zone_id:{type:`number`},dcn:{type:`string`},mname:{type:`string`},pmzoneid:{type:`string`},region:{type:`string`}},additionalProperties:!1},BidRequested_CustomParams:{type:`object`,properties:{sens:{type:`array`,items:{type:`string`}},bucket:{type:`array`,items:{type:`string`}}},additionalProperties:!1},BidRequested_Keywords:{type:`object`,properties:{bucket:{type:`array`,items:{type:`string`}},Chrome:{type:`array`,items:{type:`string`}},hvp:{type:`array`,items:{type:`string`}},mcmp:{type:`array`,items:{type:`string`}},Mobile:{type:`array`,items:{type:`string`}},pmp_elig:{type:`array`,items:{type:`string`}},sens:{type:`array`,items:{type:`string`}},site_code:{type:`array`,items:{type:`string`}},verticals:{type:`array`,items:{type:`string`}}},additionalProperties:!1},BidRequested_ServerErrors:{type:`object`,properties:{code:{type:`number`},message:{type:`string`}},additionalProperties:!1},PbsAnalytics:{type:`object`,properties:{response:{$ref:`#/definitions/PbsAnalytics_Response`},seatnonbid:{type:`array`,items:{$ref:`#/definitions/PbsAnalytics_SeatNonBid`}},event_type:{type:`string`},analytics_labels:{$ref:`#/definitions/AnalyticsLabels`},requested_bidders:{type:`array`,items:{type:`string`}},auction_id:{type:`string`},base_context:{$ref:`#/definitions/BaseContext`}},additionalProperties:!1},PbsAnalytics_Response:{type:`object`,properties:{cur:{type:`string`},seatbid:{type:`array`,items:{$ref:`#/definitions/PbsAnalytics_SeatBid`}},id:{type:`string`},ext:{$ref:`#/definitions/PbsAnalytics_Ext`},nbr:{type:`number`}},additionalProperties:!1},PbsAnalytics_SeatBid:{type:`object`,properties:{group:{type:`number`},bid:{type:`array`,items:{$ref:`#/definitions/PbsAnalytics_Bid`}},seat:{type:`string`}},additionalProperties:!1},PbsAnalytics_Bid:{type:`object`,properties:{cat:{type:`array`,items:{type:`string`}},ext:{$ref:`#/definitions/PbsAnalytics_Ext`},price:{type:`number`},crid:{type:`string`},impid:{type:`string`},id:{type:`string`},exp:{type:`number`},adomain:{type:`array`,items:{type:`string`}},burl:{type:`string`},cid:{type:`string`},w:{type:`number`},h:{type:`number`},iurl:{type:`string`},adid:{type:`string`},cattax:{type:`number`},dealid:{type:`string`},dur:{type:`number`},lurl:{type:`string`},mtype:{type:`number`}},additionalProperties:!1},PbsAnalytics_Ext:{type:`object`,properties:{responsetimemillis:{$ref:`#/definitions/PbsAnalytics_ResponseTimeMillis`},tmaxrequest:{type:`number`},mediatype:{type:`string`},origbidcur:{type:`string`},origbidcpm:{type:`number`},rp:{$ref:`#/definitions/PbsAnalytics_Rp`},prebid:{$ref:`#/definitions/PbsAnalytics_Prebid`}},additionalProperties:!1},PbsAnalytics_ResponseTimeMillis:{type:`object`,properties:{_33across:{type:`number`},adform:{type:`number`},conversant:{type:`number`},crit_ss:{type:`number`},grid:{type:`number`},improve_ss:{type:`number`},ix_ss:{type:`number`},opnx_ss:{type:`number`},pubm_ss:{type:`number`},rubi_ss:{type:`number`},share_ss:{type:`number`},tripl_ss:{type:`number`},under_ss:{type:`number`},unruly:{type:`number`},yah_ss:{type:`number`},yieldmo:{type:`number`},ntvo_ss:{type:`string`}},additionalProperties:!1},PbsAnalytics_Rp:{type:`object`,properties:{size_id:{type:`number`},advid:{type:`number`},mime:{type:`string`}},additionalProperties:!1},PbsAnalytics_Prebid:{type:`object`,properties:{type:{type:`string`},meta:{$ref:`#/definitions/Meta`},targeting:{$ref:`#/definitions/PbsAnalytics_Targeting`}},additionalProperties:!1},PbsAnalytics_Targeting:{type:`object`,properties:{hb_bidder:{type:`string`},hb_adid:{type:`string`},hb_format:{type:`string`},hb_adomain:{type:`string`},hb_source:{type:`string`},hb_pb:{type:`string`},hb_crid:{type:`string`},hb_dsp:{type:`string`},hb_cache_host:{type:`string`},hb_cache_id:{type:`string`},hb_size:{type:`string`},hb_uuid:{type:`string`},hb_attr:{type:`string`}},additionalProperties:!1},PbsAnalytics_SeatNonBid:{type:`object`,properties:{nonbid:{type:`array`,items:{$ref:`#/definitions/PbsAnalytics_NonBid`}},seat:{type:`string`}},additionalProperties:!1},PbsAnalytics_NonBid:{type:`object`,properties:{impid:{type:`string`},statuscode:{type:`number`}},additionalProperties:!1}};function Yh(e){qh(e,Jh.BidResponse,``,[],Jh)}function Xh(e){qh(e,Jh.BidWon,``,[],Jh)}function Zh(e){qh(e,Jh.NoBid,``,[],Jh)}function Qh(e){qh(e,Jh.BidTimeout,``,[],Jh)}function $h(e){qh(e,Jh.BidRequested,``,[],Jh)}function eg(e){qh(e,Jh.PbsAnalytics,``,[],Jh)}let tg=Object.freeze({BidResponse:`v1`,BidWon:`v1`,NoBid:`v1`,BidTimeout:`v1`,BidRequested:`v1`,PbsAnalytics:`v2`});Object.freeze({BidResponse:`raptive.prebid.v1.BidResponse`,BidWon:`raptive.prebid.v1.BidWon`,NoBid:`raptive.prebid.v1.NoBid`,BidTimeout:`raptive.prebid.v1.BidTimeout`,BidRequested:`raptive.prebid.v1.BidRequested`,PbsAnalytics:`raptive.prebid.v2.PbsAnalytics`});let ng=(function(){let e={};return e.BIDRESPONSE=`BidResponse`,e.BIDWON=`BidWon`,e.NOBID=`NoBid`,e.BIDTIMEOUT=`BidTimeout`,e.BIDREQUESTED=`BidRequested`,e.PBSANALYTICS=`PbsAnalytics`,e})();(function(){let e={};return e.BidResponse=`BIDRESPONSE`,e.BidWon=`BIDWON`,e.NoBid=`NOBID`,e.BidTimeout=`BIDTIMEOUT`,e.BidRequested=`BIDREQUESTED`,e.PbsAnalytics=`PBSANALYTICS`,e})();let rg=(function(){let e={};return e.BIDRESPONSE=Yh,e.BIDWON=Xh,e.NOBID=Zh,e.BIDTIMEOUT=Qh,e.BIDREQUESTED=$h,e.PBSANALYTICS=eg,e})();function ig(e){if(!e)return;let t=String(e).toUpperCase(),n=ng[t];if(n)return`raptive.prebid.${tg!==void 0&&tg&&tg[n]||`v?`}.${n}`}function ag(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var og=ag,sg=Nu(Object.keys,Object),cg=Object.prototype.hasOwnProperty;function lg(e){if(!Lu(e))return sg(e);var t=[];for(var n in Object(e))cg.call(e,n)&&n!=`constructor`&&t.push(n);return t}var ug=lg;function dg(e){return Qu(e)?pf(e):ug(e)}var fg=dg;function pg(e,t){return e&&nf(t,fg(t),e)}var mg=pg;function hg(e,t){return e&&nf(t,bf(t),e)}var gg=hg;function _g(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var vg=_g;function yg(){return[]}var bg=yg,xg=Object.prototype.propertyIsEnumerable,Sg=Object.getOwnPropertySymbols,Cg=Sg?function(e){return e==null?[]:(e=Object(e),vg(Sg(e),function(t){return xg.call(e,t)}))}:bg;function wg(e,t){return nf(e,Cg(e),t)}var Tg=wg;function Eg(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Dg=Eg,Og=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Dg(t,Cg(e)),e=Pu(e);return t}:bg;function kg(e,t){return nf(e,Og(e),t)}var Ag=kg;function jg(e,t,n){var r=t(e);return qu(e)?r:Dg(r,n(e))}var Mg=jg;function Ng(e){return Mg(e,fg,Cg)}var Pg=Ng;function Fg(e){return Mg(e,bf,Og)}var Ig=Fg,Lg=wl(Va,`DataView`),Rg=wl(Va,`Promise`),zg=wl(Va,`Set`),Bg=wl(Va,`WeakMap`),Vg=`[object Map]`,Hg=`[object Object]`,Ug=`[object Promise]`,Wg=`[object Set]`,Gg=`[object WeakMap]`,Kg=`[object DataView]`,qg=dl(Lg),Jg=dl(Tl),Yg=dl(Rg),Xg=dl(zg),Zg=dl(Bg),Qg=lo;(Lg&&Qg(new Lg(new ArrayBuffer(1)))!=Kg||Tl&&Qg(new Tl)!=Vg||Rg&&Qg(Rg.resolve())!=Ug||zg&&Qg(new zg)!=Wg||Bg&&Qg(new Bg)!=Gg)&&(Qg=function(e){var t=lo(e),n=t==Hg?e.constructor:void 0,r=n?dl(n):``;if(r)switch(r){case qg:return Kg;case Jg:return Vg;case Yg:return Ug;case Xg:return Wg;case Zg:return Gg}return t});var $g=Qg,e_=Object.prototype.hasOwnProperty;function t_(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]==`string`&&e_.call(e,`index`)&&(n.index=e.index,n.input=e.input),n}var n_=t_;function r_(e,t){var n=t?Tu(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var i_=r_,a_=/\w*$/;function o_(e){var t=new e.constructor(e.source,a_.exec(e));return t.lastIndex=e.lastIndex,t}var s_=o_,c_=Ya?Ya.prototype:void 0,l_=c_?c_.valueOf:void 0;function u_(e){return l_?Object(l_.call(e)):{}}var d_=u_,f_=`[object Boolean]`,p_=`[object Date]`,m_=`[object Map]`,h_=`[object Number]`,g_=`[object RegExp]`,__=`[object Set]`,v_=`[object String]`,y_=`[object Symbol]`,b_=`[object ArrayBuffer]`,x_=`[object DataView]`,S_=`[object Float32Array]`,C_=`[object Float64Array]`,w_=`[object Int8Array]`,T_=`[object Int16Array]`,E_=`[object Int32Array]`,D_=`[object Uint8Array]`,O_=`[object Uint8ClampedArray]`,k_=`[object Uint16Array]`,A_=`[object Uint32Array]`;function j_(e,t,n){var r=e.constructor;switch(t){case b_:return Tu(e);case f_:case p_:return new r(+e);case x_:return i_(e,n);case S_:case C_:case w_:case T_:case E_:case D_:case O_:case k_:case A_:return Du(e,n);case m_:return new r;case h_:case v_:return new r(e);case g_:return s_(e);case __:return new r;case y_:return d_(e)}}var M_=j_,N_=`[object Map]`;function P_(e){return fo(e)&&$g(e)==N_}var F_=P_,I_=qd&&qd.isMap,L_=I_?Ud(I_):F_,R_=`[object Set]`;function z_(e){return fo(e)&&$g(e)==R_}var B_=z_,V_=qd&&qd.isSet,H_=V_?Ud(V_):B_,U_=1,W_=2,G_=4,K_=`[object Arguments]`,q_=`[object Array]`,J_=`[object Boolean]`,Y_=`[object Date]`,X_=`[object Error]`,Z_=`[object Function]`,Q_=`[object GeneratorFunction]`,$_=`[object Map]`,ev=`[object Number]`,tv=`[object Object]`,nv=`[object RegExp]`,rv=`[object Set]`,iv=`[object String]`,av=`[object Symbol]`,ov=`[object WeakMap]`,sv=`[object ArrayBuffer]`,cv=`[object DataView]`,lv=`[object Float32Array]`,uv=`[object Float64Array]`,dv=`[object Int8Array]`,fv=`[object Int16Array]`,pv=`[object Int32Array]`,mv=`[object Uint8Array]`,hv=`[object Uint8ClampedArray]`,gv=`[object Uint16Array]`,_v=`[object Uint32Array]`,vv={};vv[K_]=vv[q_]=vv[sv]=vv[cv]=vv[J_]=vv[Y_]=vv[lv]=vv[uv]=vv[dv]=vv[fv]=vv[pv]=vv[$_]=vv[ev]=vv[tv]=vv[nv]=vv[rv]=vv[iv]=vv[av]=vv[mv]=vv[hv]=vv[gv]=vv[_v]=!0,vv[X_]=vv[Z_]=vv[ov]=!1;function yv(e,t,n,r,i,a){var o,s=t&U_,c=t&W_,l=t&G_;if(n&&(o=i?n(e,r,i,a):n(e)),o!==void 0)return o;if(!Ra(e))return e;var u=qu(e);if(u){if(o=n_(e),!s)return ku(e,o)}else{var d=$g(e),f=d==Z_||d==Q_;if(od(e))return Su(e,s);if(d==tv||d==K_||f&&!i){if(o=c||f?{}:zu(e),!s)return c?Ag(e,gg(o,e)):Tg(e,mg(o,e))}else{if(!vv[d])return i?e:{};o=M_(e,d,s)}}a||=new lu;var p=a.get(e);if(p)return p;a.set(e,o),H_(e)?e.forEach(function(r){o.add(yv(r,t,n,r,e,a))}):L_(e)&&e.forEach(function(r,i){o.set(i,yv(r,t,n,i,e,a))});var m=u?void 0:(l?c?Ig:Pg:c?bf:fg)(e);return og(m||e,function(r,i){m&&(i=r,r=e[i]),ef(o,i,yv(r,t,n,i,e,a))}),o}var bv=yv,xv=1,Sv=4;function Cv(e){return bv(e,xv|Sv)}var wv=Cv;let Tv=(e,t)=>{if(t.length>e.length)return!1;let n=e.length-t.length;for(let r=0;r<t.length;r++)if(e[n+r]!==t[r])return!1;return!0},Ev=(e,t,n={})=>{let r=wv(e),i=t.map(e=>e.split(`.`)),a=[],o=[];for(let e of i)e.length===1?a.push(e[0]):o.push(e);let s=Object.entries(n).map(([e,t])=>({pathSegments:e.split(`.`),replacementValue:t})),c=new Map,l=[];for(let{pathSegments:e,replacementValue:t}of s)if(e.length===1)c.set(e[0],t);else{let n=e.slice(0,-1),r=e[e.length-1];l.push({prefix:n,lastKey:r,replacement:t})}let u=(e,t)=>{if(Array.isArray(e)){let n=e.map(e=>u(e,t)).filter(e=>!(e===void 0||Array.isArray(e)&&e.length===0||typeof e==`object`&&e&&Object.keys(e).length===0));return n.length===0?void 0:n}if(typeof e==`object`&&e){for(let n of Object.keys(e)){let r=e[n];if(a.includes(n)){delete e[n];continue}let i=!1;for(let r of o)if(r.length>=2){let a=r.slice(0,-1),o=r[r.length-1];if(Tv(t,a)&&n===o){delete e[n],i=!0;break}}if(i)continue;if(c.has(n)){e[n]=c.get(n);continue}let s=!1;for(let{prefix:r,lastKey:i,replacement:a}of l)if(Tv(t,r)&&n===i){e[n]=a,s=!0;break}if(s)continue;let d=u(r,[...t,n]);d===void 0||Array.isArray(d)&&d.length===0||typeof d==`object`&&d&&Object.keys(d).length===0?delete e[n]:e[n]=d}return Object.keys(e).length===0?void 0:e}return e};return u(r,[])??{}};var Dv=`__lodash_hash_undefined__`;function Ov(e){return this.__data__.set(e,Dv),this}var kv=Ov;function Av(e){return this.__data__.has(e)}var jv=Av;function Mv(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new iu;++t<n;)this.add(e[t])}Mv.prototype.add=Mv.prototype.push=kv,Mv.prototype.has=jv;var Nv=Mv;function Pv(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Fv=Pv;function Iv(e,t){return e.has(t)}var Lv=Iv,Rv=1,zv=2;function Bv(e,t,n,r,i,a){var o=n&Rv,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var l=a.get(e),u=a.get(t);if(l&&u)return l==t&&u==e;var d=-1,f=!0,p=n&zv?new Nv:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var m=e[d],h=t[d];if(r)var g=o?r(h,m,d,t,e,a):r(m,h,d,e,t,a);if(g!==void 0){if(g)continue;f=!1;break}if(p){if(!Fv(t,function(e,t){if(!Lv(p,t)&&(m===e||i(m,e,n,r,a)))return p.push(t)})){f=!1;break}}else if(!(m===h||i(m,h,n,r,a))){f=!1;break}}return a.delete(e),a.delete(t),f}var Vv=Bv;function Hv(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}var Uv=Hv;function Wv(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var Gv=Wv,Kv=1,qv=2,Jv=`[object Boolean]`,Yv=`[object Date]`,Xv=`[object Error]`,Zv=`[object Map]`,Qv=`[object Number]`,$v=`[object RegExp]`,ey=`[object Set]`,ty=`[object String]`,ny=`[object Symbol]`,ry=`[object ArrayBuffer]`,iy=`[object DataView]`,ay=Ya?Ya.prototype:void 0,oy=ay?ay.valueOf:void 0;function sy(e,t,n,r,i,a,o){switch(n){case iy:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ry:return!(e.byteLength!=t.byteLength||!a(new Cu(e),new Cu(t)));case Jv:case Yv:case Qv:return jc(+e,+t);case Xv:return e.name==t.name&&e.message==t.message;case $v:case ty:return e==t+``;case Zv:var s=Uv;case ey:var c=r&Kv;if(s||=Gv,e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=qv,o.set(e,t);var u=Vv(s(e),s(t),r,i,a,o);return o.delete(e),u;case ny:if(oy)return oy.call(e)==oy.call(t)}return!1}var cy=sy,ly=1,uy=Object.prototype.hasOwnProperty;function dy(e,t,n,r,i,a){var o=n&ly,s=Pg(e),c=s.length,l=Pg(t),u=l.length;if(c!=u&&!o)return!1;for(var d=c;d--;){var f=s[d];if(!(o?f in t:uy.call(t,f)))return!1}var p=a.get(e),m=a.get(t);if(p&&m)return p==t&&m==e;var h=!0;a.set(e,t),a.set(t,e);for(var g=o;++d<c;){f=s[d];var _=e[f],v=t[f];if(r)var ee=o?r(v,_,f,t,e,a):r(_,v,f,e,t,a);if(!(ee===void 0?_===v||i(_,v,n,r,a):ee)){h=!1;break}g||=f==`constructor`}if(h&&!g){var te=e.constructor,ne=t.constructor;te!=ne&&`constructor`in e&&`constructor`in t&&!(typeof te==`function`&&te instanceof te&&typeof ne==`function`&&ne instanceof ne)&&(h=!1)}return a.delete(e),a.delete(t),h}var fy=dy,py=1,my=`[object Arguments]`,hy=`[object Array]`,gy=`[object Object]`,_y=Object.prototype.hasOwnProperty;function vy(e,t,n,r,i,a){var o=qu(e),s=qu(t),c=o?hy:$g(e),l=s?hy:$g(t);c=c==my?gy:c,l=l==my?gy:l;var u=c==gy,d=l==gy,f=c==l;if(f&&od(e)){if(!od(t))return!1;o=!0,u=!1}if(f&&!u)return a||=new lu,o||Yd(e)?Vv(e,t,n,r,i,a):cy(e,t,c,n,r,i,a);if(!(n&py)){var p=u&&_y.call(e,`__wrapped__`),m=d&&_y.call(t,`__wrapped__`);if(p||m){var h=p?e.value():e,g=m?t.value():t;return a||=new lu,i(h,g,n,r,a)}}return f?(a||=new lu,fy(e,t,n,r,i,a)):!1}var yy=vy;function by(e,t,n,r,i){return e===t?!0:e==null||t==null||!fo(e)&&!fo(t)?e!==e&&t!==t:yy(e,t,n,r,by,i)}var xy=by;function Sy(e,t){return xy(e,t)}var Cy=Sy;let wy=[],Ty={"mediaType.native":!0,nativeOrtbRequest:!0,nativeParams:!0},Ey=class extends Lh{constructor(e,t,n){super(),this._prebidMethods=e,this._analyticsExperiment=t,this._config=n,C(this,`name`,`generic`),C(this,`_loggerEndpoint`,`https://stormgate.production.raptive.com/v1`),C(this,`_setLoggerBidResponseFields`,e=>({event_type:`BIDRESPONSE`,adserverTargeting:e.adserverTargeting,adUnitCode:e.adUnitCode,auctionId:e.auctionId,bidder:e.bidderCode,bidderCode:e.bidderCode,cpm:e.cpm,currency:e.currency,floorData:e.floorData,floorValue:e.floorData?.floorValue,height:e.height,mediaType:e.mediaType,meta:e.meta,originalCpm:e.originalCpm,requestId:e.requestId,requestTimestamp:e.requestTimestamp,responseCpm:e.responseCpm,responseTimestamp:e.responseTimestamp,responseTimeMillis:e.responseTimeMillis,seatNonBidStatusCode:e.seatNonBidStatusCode,size:e.size,source:e.source,statusMessage:e.statusMessage,timeToRespond:e.timeToRespond,transactionId:e.transactionId,ttl:e.ttl,width:e.width,analyticsLabels:e.analyticsLabels})),C(this,`_setLoggerBidWonFields`,e=>({event_type:`BIDWON`,adserverTargeting:e.adserverTargeting,adUnitCode:e.adUnitCode,auctionId:e.auctionId,bidder:e.bidder,bidderCode:e.bidderCode,cpm:e.cpm,currency:e.currency,floorData:e.floorData,height:e.height,mediaType:e.mediaType,meta:e.meta,requestId:e.requestId,requestTimestamp:e.requestTimestamp,responseCpm:e.responseCpm,size:e.size,source:e.source,status:e.status,statusMessage:e.statusMessage,timeToRespond:e.timeToRespond,transactionId:e.transactionId,ttl:e.ttl,width:e.width,analyticsLabels:e.analyticsLabels})),C(this,`_setLoggerNoBidFields`,e=>({event_type:`NOBID`,auctionId:e.auctionId,bidder:e.bidder,source:e.src,adUnitCode:e.adUnitCode,floor:e.getFloor?.(),floorData:e.floorData,analyticsLabels:e.analyticsLabels})),C(this,`_setLoggerBidTimeoutFields`,e=>{let{analyticsLabels:t,...n}=e,r=Object.values(n),i=r.length,a=i>1&&r.every(e=>Cy(e.ortb2,r[0].ortb2)),o=i>1&&r.every(e=>Cy(e.ortb2Imp,r[0].ortb2Imp)),s=a?r[0].ortb2:void 0,c=o?r[0].ortb2Imp:void 0;return{event_type:`BIDTIMEOUT`,bids:r.map(e=>({adUnitCode:e.adUnitCode,auctionId:e.auctionId,bid_id:e.bid_id,bidder:e.bidder,bidderRequestId:e.bidderRequestId,bidderRequestsCount:e.bidRequestsCount,bidderWinsCount:e.bidderWinsCount,bidId:e.bidId,bidRequestsCount:e.bidRequestsCount,floorData:e.floorData,mediaTypes:e.mediaTypes,ortb2:a?void 0:e.ortb2,ortb2Imp:o?void 0:e.ortb2Imp,schain:e.schain,sizes:e.sizes,src:e.src,transactionId:e.transactionId})),...s&&{ortb2:s},...o&&{ortb2Imp:c},analyticsLabels:t}}),C(this,`_setLoggerBidRequestedFields`,e=>{let{truncatedBids:t,eidsSources:n,ortb2:r,ortb2Imp:i}=this.truncateBidRequestBids(e.bids);return{event_type:`BIDREQUESTED`,bidderCode:e.bidderCode,auctionId:e.auctionId,auctionStart:e.auctionStart,bidderRequestId:e.bidderRequestId,bids:t,start:e.start,timeout:e.timeout,ortb2:r??e.ortb2,...i&&{ortb2Imp:i},...n&&{eidsSources:n},analyticsLabels:e.analyticsLabels}}),C(this,`_setLoggerPbsAnalyticsFields`,e=>{let{response:t,seatnonbid:n}=e,r=Cy(n,t?.ext?.seatnonbid)?{...t,ext:{...t?.ext,seatnonbid:void 0}}:t;return{event_type:`PBSANALYTICS`,...e,response:r,analyticsLabels:e.analyticsLabels}})}init(){try{this._prebidMethods.enableAnalytics({provider:this.name,options:{batchSize:40,batchDelay:2e3,gvlid:this._config.gdpr.raptiveVendorId,events:{bidResponse:e=>this._setLoggerBidResponseFields(e),bidWon:e=>this._setLoggerBidWonFields(e),noBid:e=>this._setLoggerNoBidFields(e),bidTimeout:e=>this._setLoggerBidTimeoutFields(e),bidRequested:e=>this._setLoggerBidRequestedFields(e),pbsAnalytics:e=>this._setLoggerPbsAnalyticsFields(e)},handler:e=>{let t=Array.isArray(e),n=(t?e:[e]).map(e=>Ev(e,wy,Ty));n=n.map(e=>{if(e.event_type){e=this.transformEvent(e);let t=rg[e.event_type.toUpperCase()];t&&(e=this.validateAndClean(e,t))}return e.baseContext=this._getBaseContext(e.event_type),e});let r=t?n:n[0];return new Promise((e,t)=>{fetch(this._loggerEndpoint,{method:`POST`,headers:[[`Content-Type`,`application/json`],[`X-Topic-Name`,`eventing`]],body:JSON.stringify(r)}).then(t=>{e(t)}).catch(e=>{t(e)})})}}})}catch(e){E.error(`GenericAnalytics`,`init - ignored`,e)}try{this._prebidMethods.setConfig({analyticsLabels:{deployment:`${window.adthrive.deployment}`}},!1)}catch(e){E.error(`GenericAnalytics`,`init - ignored`,e)}}get enabled(){return this._analyticsExperiment.result===`generic`}validateAndClean(e,t){let n=wv(e);return t(n),n}isValidGPTSingleSize(e){return Array.isArray(e)&&e.length===2&&!isNaN(e[0])&&!isNaN(e[1])}sizesToSizeTuples(e){return typeof e==`string`?e.split(/\s*,\s*/).map(e=>e.match(/^(\d+)x(\d+)$/i)).filter(e=>!!e).map(([,e,t])=>[parseInt(e,10),parseInt(t,10)]):Array.isArray(e)?this.isValidGPTSingleSize(e)?[e]:e.filter(this.isValidGPTSingleSize):[]}sizeTupleToSizeString(e){return e[0]+`x`+e[1]}parseSizesInput(e){return this.sizesToSizeTuples(e).map(this.sizeTupleToSizeString)}transformEvent(e){if([`BIDTIMEOUT`,`BIDREQUESTED`].includes(e.event_type)&&e.bids)for(let[t,n]of e.bids.entries()){n.mediaTypes?.labelAll?.metrics?.[`requestBids.total`]&&(e.bids[t].mediaTypes.labelAll.metrics.requestBidsTotal=Math.round(n.mediaTypes.labelAll.metrics[`requestBids.total`]),delete e.bids[t].mediaTypes.labelAll.metrics[`requestBids.total`]),n.params?.formats?.placement_id&&(e.bids[t].params.formats.placementId=n.params.formats.placement_id,delete e.bids[t].params.formats.placement_id),n.bid_id&&(e.bids[t].bidId=n.bid_id,delete e.bids[t].bid_id),n.params?.size&&(e.bids[t].params.size=this.parseSizesInput(n.params.size)),n.params?.video&&typeof n.params.video==`string`&&delete e.bids[t].params.video;let r=[n.params,n.mediaTypes,n.ortb2Imp];for(let e of r)e?.video?.playerSize&&(e.video.playerSize=Array.isArray(e.video.playerSize)&&Array.isArray(e.video.playerSize[0])?e.video.playerSize[0]:e.video.playerSize)}return e}_getBaseContext(e){return{messageId:Qo(),eventName:ig(e)||`raptive.prebid.v1.UNKNOWN`,sentAt:new Date().toISOString(),sourceId:`adcode`}}truncateBidRequestBids(e){let t,n,r,i=e.map(e=>{let{userId:t,metrics:n,ortb2:r,...i}=e,a=n?.getMetrics()[`requestBids.total`]||n?.getMetrics().requestBidsTotal;a&&Array.isArray(a)?a=a.map(Math.round):a&&=Math.round(a);let o=wv(r),s=o?.user?.ext?.eids?.map(e=>e.source)?.filter(ki)||[];return o?.user?.ext?.eids&&delete o.user.ext.eids,{...i,ortb2:o,eidsSources:s,...a&&{metrics:{requestBidsTotal:a}}}});return i.length>0&&(t=i.every(e=>Cy(e.ortb2,i[0].ortb2))?i[0].ortb2:void 0,n=i.every(e=>Cy(e.ortb2Imp,i[0].ortb2Imp))?i[0].ortb2Imp:void 0,r=i.every(e=>Cy(e.eidsSources,i[0].eidsSources))?i[0].eidsSources:void 0,i.forEach(e=>{t&&delete e.ortb2,n&&delete e.ortb2Imp,r&&delete e.eidsSources})),{truncatedBids:i,ortb2:t,ortb2Imp:n,eidsSources:r}}};Ey=w([D(`GenericAnalytics`),x(),N(0,b(P)),N(1,b(Rh)),N(2,b(J))],Ey);let Dy=class{constructor(e,t,n,r,i){this._pageManager=e,this._spaEventBus=t,this.gamEventBus=n,this.footerEventBus=r,this._slots=i,C(this,`scroll`,new T),C(this,`resize`,new T),C(this,`pageVisibility`,new T),C(this,`videoPlaying`,new T),C(this,`videoSlotRendered`,new T),C(this,`loggingBidWon`,new T),C(this,`videoImpression`,new T),C(this,`spaListeners`,[]),this._setupSpaListeners(),this.addEventListeners(),this.gamEventBus.slotResponseReceived.on(({slotId:e})=>{this._slots.get(e)?.location===H.Footer&&this.footerEventBus.footerResponseReceived.emit()}),this.gamEventBus.slotRenderEnded.on(({slotId:e})=>{let t=this._slots.get(e);t?.location===H.Footer&&this.footerEventBus.footerRenderEnded.emit(t.refreshCount)})}_setupSpaListeners(){this._spaEventBus.routeChanged.on(()=>{this.spaListeners.forEach(e=>e()),this.spaListeners.length=0}),this._spaEventBus.resetCompleted.on(()=>{this.addEventListeners()})}addEventListeners(){let e=!1,t=!1,n=()=>{e||(e=!0,setTimeout(()=>{this.scroll.emit(),e=!1},100))},r=()=>{t||(t=!0,setTimeout(()=>{this.resize.emit(),t=!1},100))};this.spaListeners.push(this._pageManager.scroll.on(()=>n())),this.spaListeners.push(this._pageManager.resize.on(()=>r())),this.spaListeners.push(this._pageManager.visibilityChange.on(()=>{this.pageVisibility.emit(document.hidden)}))}emitVideoPlayingEvent(e){this.videoPlaying.emit(e)}emitVideoSlotRenderedEvent(e){this.videoSlotRendered.emit(e)}emitVideoImpressionEvent(e){this.videoImpression.emit(e)}};Dy=w([S(),N(0,b(jr)),N(1,b(xc)),N(2,b(X)),N(3,b(Pr)),N(4,b(Y))],Dy);let Oy=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`IntentIqAnalyticsLogs`,this._lookup=`IIQAL`}};Oy=w([S()],Oy);let ky=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`IntentIqAnalytics`,this._lookup=`IIQA`}};ky=w([S()],ky);let Ay=({event:e,ignoreOtherCompanyIds:t=!1})=>{let n=new Set([-1,0,1,199612376,2143809321]),r=new Set([4455444655,4460609902,4463579729,4464180925,4466143841,4550726766,4623743690,4623743882,4634020290,4642901988,4697115760,4801442281,4802163255,4805985973,4807636548,4867316569]),i=!e.campaignId||n.has(e.campaignId),a=!e.companyIds||e.companyIds&&!e.companyIds.some(e=>r.has(e));return t?i:i&&a},jy={PREBID:1,AMAZON:2,ADX:3},My=class{constructor(e,t){this._prebidMethods=e,this._config=t,C(this,`_fallbackLogRate`,1),C(this,`_cpmScale`,2.3),C(this,`_adxAdjustment`,.16),C(this,`_adxAdvertiserIds`,[36136136]),C(this,`_houseAdsAdvertiserId`,732943976),C(this,`_videoPrebidWins`,new Map)}storeVideoBidWin(e){(e.mediaType===`video`||e.meta?.mediaType===`video`)&&this._videoPrebidWins.set(e.adUnitCode,e)}clearVideoBidWin(e){this._videoPrebidWins.delete(e)}buildDisplayReportData(e,t){if(t.isEmpty)return null;if(Number(t.advertiserId)===this._houseAdsAdvertiserId)return{biddingPlatformId:jy.ADX,bidderCode:`adx_house_ad`,cpm:0,currency:`USD`,adType:`banner`};if(e.servedPrebidBidResponse)return this._buildPrebidReportData(e.servedPrebidBidResponse);if(Ay({event:t})||this._adxAdvertiserIds.includes(Number(t.advertiserId)))return this._buildDisplayAdxReportData(e);if(Number(t.advertiserId)===this._config.prebid.advertiserId){let t=this._getWinningPrebidBid(e);if(t)return this._buildPrebidReportData(t)}if(Number(t.advertiserId)===this._config.amazon.advertiserId)return this._buildDisplayAmazonReportData(e);Math.random()<this._fallbackLogRate&&E.event(`IntentIqReportBuilder`,`buildDisplayReportData`,`Unknown bidding platform`,{advertiserId:t.advertiserId,campaignId:t.campaignId,companyIds:t.companyIds,slotId:e.id});let n=this._getWinningPrebidBid(e);return n?{...this._buildPrebidReportData(n),unknownPlatformFallback:!0}:this._buildDisplayAdxReportData(e)}buildVideoReportData(e,t){let n=this._getVideoTargetingMap(t);if(this._hasVideoAdxIndicators(e,n))return this._buildVideoAdxReportData(e,n);let r=this._buildVideoPrebidReportData(e,n);if(r)return r;let i=this._buildVideoAmazonReportData(e,n);if(i)return i;Math.random()<this._fallbackLogRate&&E.event(`IntentIqReportBuilder`,`buildVideoReportData`,`Unknown bidding platform`,{playerName:e.name,targetingMap:n});let a=this._getVideoFallbackPrebidCpm(e,n);return this._isPositiveNumber(a)?{biddingPlatformId:jy.PREBID,bidderCode:`prebid`,cpm:this._scaleAndRoundCpm(a),currency:`USD`,adType:`video`}:this._buildVideoAdxReportData(e,n)}_getWinningPrebidBid(e){let[t]=this._prebidMethods.getHighestCpmBids(e.id)??[];return t}_buildPrebidReportData(e){let t=e.bidderCode||e.bidder||``,n=e.currency||e.originalCurrency||`USD`,r=this._scaleAndRoundCpm(e.cpm||0);return{biddingPlatformId:jy.PREBID,bidderCode:t,cpm:r,currency:n,adType:`banner`}}_buildDisplayAmazonReportData(e){let t=e.getTargeting(`amz_bidder`)?.[0]??``,n=this._config.amazon.availableBids.get(e.id),r=this._normalizeAmazonBidderCode(n?.bidder||t)||`amazon`,i=this._getDisplayAmazonCpm(e),a=this._scaleAndRoundCpm(i);return{biddingPlatformId:jy.AMAZON,bidderCode:r,cpm:a,currency:`USD`,adType:`banner`}}_getDisplayAmazonCpm(e){let t=this._config.amazon.availableBids.get(e.id)?.cpm,n=this._config.floors.amazonSlotCpm.get(e.id),r=e.getTargeting(`amz_pb`)?.[0],i=r?parseFloat(r):NaN;return t??n??(Number.isFinite(i)?i:void 0)??0}_buildDisplayAdxReportData(e){let[t]=this._prebidMethods.getHighestCpmBids(e.id)??[],n=t?.cpm??0,r=this._getDisplayAmazonCpm(e),i=Math.max(n,r),a=this._scaleAndRoundAdxCpm(i);return{biddingPlatformId:jy.ADX,bidderCode:`adx`,cpm:a,currency:`USD`,adType:`banner`}}_hasVideoAdxIndicators(e,t){let n=this._videoPrebidWins.get(e.name),r=this._config.prebid.targetingKeyMap,i=t[r.AD_ID],a=!!n||this._hasMeaningfulValue(i),o=this._config.amazon.availableBids.get(e.name),s=this._hasMeaningfulValue(o?.bidder)||this._hasMeaningfulValue(t.amz_bidder);return!(a||s)}_buildVideoPrebidReportData(e,t){let n=this._videoPrebidWins.get(e.name),r=this._config.prebid.targetingKeyMap,i=t[r.AD_ID];if(!(n||this._hasMeaningfulValue(i)))return null;let a=n?.cpm??this._getVideoFallbackPrebidCpm(e,t);if(!this._isPositiveNumber(a))return null;let o=this._sanitizeString(n?.bidderCode||n?.bidder||t[r.BIDDER])??`prebid`,s=n?.currency||`USD`;return n&&this._videoPrebidWins.delete(e.name),{biddingPlatformId:jy.PREBID,bidderCode:o,cpm:this._scaleAndRoundCpm(a),currency:s,adType:`video`}}_buildVideoAmazonReportData(e,t){let n=this._config.amazon.availableBids.get(e.name),r=this._normalizeAmazonBidderCode(n?.bidder||t.amz_bidder)??`amazon`,i=this._getVideoAmazonCpm(e,t,n);return!this._hasMeaningfulValue(r)||!this._isPositiveNumber(i)?null:{biddingPlatformId:jy.AMAZON,bidderCode:r,cpm:this._scaleAndRoundCpm(i),currency:`USD`,adType:`video`}}_buildVideoAdxReportData(e,t){let n=this._getVideoAdxBaseCpm(e,t);return{biddingPlatformId:jy.ADX,bidderCode:`adx`,cpm:this._scaleAndRoundAdxCpm(n),currency:`USD`,adType:`video`}}_getVideoAdxBaseCpm(e,t){let n=this._peekVideoPrebidCpm(e,t),r=this._getVideoAmazonCpm(e,t);return Math.max(n,r)}_peekVideoPrebidCpm(e,t){let n=this._videoPrebidWins.get(e.name);return this._isPositiveNumber(n?.cpm)?n.cpm:this._getVideoFallbackPrebidCpm(e,t)}_getVideoFallbackPrebidCpm(e,t){let n=this._config.prebid.targetingKeyMap.PRICE_BUCKET,r=this._toNumber(t[n]);if(this._isPositiveNumber(r))return r;let[i]=this._prebidMethods.getHighestCpmBids(e.name)??[];if(this._isPositiveNumber(i?.cpm))return i.cpm;let a=this._toNumber(e.lastAuctionBidDetails?.tbc);return this._isPositiveNumber(a)?a:0}_getVideoAmazonCpm(e,t,n=this._config.amazon.availableBids.get(e.name)){let r=this._toNumber(t.amz_pb),i=this._toNumber(t.amz_pb_sp),a=Math.max(r??0,i??0);if(this._isPositiveNumber(a))return a;let o=this._toNumber(n?.cpm);if(this._isPositiveNumber(o))return o;let s=this._config.floors.amazonSlotCpm.get(e.name);return this._isPositiveNumber(s)?s:0}_getVideoTargetingMap(e){if(!e)return{};let[,t]=e.split(`?`);if(!t)return{};let n=Vt(t).get(`cust_params`);if(!n)return{};let r=this._decodeUri(n),i=Ht(r);return Object.keys(i).reduce((e,t)=>{let n=i[t];return e[t]=Array.isArray(n)?n[0]:n,e},{})}_decodeUri(e){try{return decodeURIComponent(e)}catch{return e}}_scaleAndRoundCpm(e){let t=e*this._cpmScale;return Number.isFinite(t)?Number(t.toFixed(2)):0}_scaleAndRoundAdxCpm(e){let t=(e+this._adxAdjustment)*this._cpmScale;return Number.isFinite(t)?Number(t.toFixed(2)):0}_toNumber(e){if(typeof e==`number`)return Number.isFinite(e)?e:void 0;if(typeof e==`string`){let t=e.trim();if(!t)return;let n=Number(t);return Number.isFinite(n)?n:void 0}}_isPositiveNumber(e){return typeof e==`number`&&Number.isFinite(e)&&e>0}_hasMeaningfulValue(e){if(!e)return!1;let t=e.trim().toLowerCase();return t?![`undefined`,`null`,`0`,`nobid`,`none`].includes(t):!1}_sanitizeString(e){return this._hasMeaningfulValue(e)?e?.trim():void 0}_normalizeAmazonBidderCode(e){return this._sanitizeString(e)||void 0}};My=w([D(`IntentIqReportBuilder`),x(),N(0,b(P)),N(1,b(J))],My);let Ny={A:`WITH_IIQ`,B:`WITHOUT_IIQ`,U:`NOT_YET_DEFINED`,L:`BLACK_LIST`},Py=class extends Lh{constructor(e,t,n,r,i,a,o,s,c,l){super(),this._prebidMethods=e,this._context=t,this._intentIqAnalyticsExperiment=n,this._intentIqAnalyticsLogsExperiment=r,this._intentIqModule=i,this._gamEventBus=a,this._prebidEventBus=o,this._slots=s,this._videoEventProxy=c,this._reportBuilder=l,C(this,`name`,`iiqAnalytics`),C(this,`_reportQueue`,[]),C(this,`_isAdapterReady`,!1),C(this,`_isWaitingForAdapter`,!1),C(this,`_maxWaitTime`,5e3),C(this,`_checkInterval`,100),C(this,`_slotGroupMap`,new Map),C(this,`_currentGroup`,void 0)}init(){this._prebidMethods.enableAnalytics({provider:this.name}),this._gamEventBus.slotRenderEnded.on(this._handleSlotRenderEnded.bind(this)),this._prebidEventBus.bidWon.on(this._handleBidWon.bind(this)),this._videoEventProxy.videoImpression.on(this._handleVideoImpression.bind(this)),this._initializeIIQGroupFromLocalStorage(),this._setupIIQGroupCallback()}get enabled(){return this._intentIqModule.enabled&&this._context.country===`US`&&Tt()&&this._intentIqAnalyticsExperiment.result}_initializeIIQGroupFromLocalStorage(){try{let e=L.readExternalLocalStorage(`_iiq_fdata`);e?.group&&(this._currentGroup=this._parseGroupValue(e.group))}catch{}}_setupIIQGroupCallback(){this._intentIqModule.setGroupChangedCallback(e=>{this._currentGroup=this._parseGroupValue(e)})}_parseGroupValue(e){if(e in Ny){let t=e;return{key:t,value:Ny[t]}}return{key:e,value:e}}_handleSlotRenderEnded({event:e,slotId:t}){if(e.isEmpty)return;let n=this._slots.get(t);if(!n)return;let r=this._reportBuilder.buildDisplayReportData(n,e);r&&(this._currentGroup&&this._slotGroupMap.set(t,this._currentGroup),this._reportToIntentIq({reportData:r,slot:n,event:e,slotId:t}))}_handleBidWon(e){this._reportBuilder.storeVideoBidWin(e)}_handleVideoImpression({videoAdDetails:e,player:t}){if(!e||e.isEmpty){this._reportBuilder.clearVideoBidWin(t.name);return}let n=this._reportBuilder.buildVideoReportData(t,e.tag);if(n){this._currentGroup&&this._slotGroupMap.set(t.name,this._currentGroup);let e=this._slots.get(t.name);this._reportToIntentIq({reportData:n,slotId:t.name,slot:e})}this._reportBuilder.clearVideoBidWin(t.name)}_reportToIntentIq(e){this._isAdapterReady?this._sendReport(e):(this._reportQueue.push(e),this._waitForAdapter())}_isAdapterAvailable(){return typeof window.intentIqAnalyticsAdapter_743264634?.reportExternalWin==`function`}_waitForAdapter(){if(this._isWaitingForAdapter)return;this._isWaitingForAdapter=!0;let e=Date.now(),t=()=>{if(this._isAdapterAvailable()){this._isAdapterReady=!0,this._isWaitingForAdapter=!1,this._flushQueue();return}if(Date.now()-e>=this._maxWaitTime){this._isWaitingForAdapter=!1,this._reportQueue=[];return}setTimeout(t,this._checkInterval)};t()}_flushQueue(){let e=[...this._reportQueue];this._reportQueue=[];for(let t of e)this._sendReport(t)}_sendReport({reportData:e,slot:t,event:n,slotId:r}){try{let{unknownPlatformFallback:i,...a}=e;if(this._intentIqAnalyticsLogsExperiment.result&&t){let o=this._slotGroupMap.get(r);if(o){let s={1:`PREBID`,2:`AMAZON`,3:`ADX`},c={...a,slotId:r,tid:t.transactionId,iiqGroup:o.value,iiqGroupKey:o.key,biddingPlatform:s[e.biddingPlatformId]};n&&n.advertiserId!==null&&(c.advertiserId=n.advertiserId),i!==void 0&&(c.unknownPlatformFallback=i),E.event(`IntentIqAnalytics`,`iiqExternalWin`,c)}}window.intentIqAnalyticsAdapter_743264634.reportExternalWin(a)}catch{}}};Py=w([D(`IntentIqAnalytics`),x(),N(0,b(P)),N(1,b(W)),N(2,b(ky)),N(3,b(Oy)),N(4,b(tm)),N(5,b(X)),N(6,b(Qf)),N(7,b(Y)),N(8,b(Dy)),N(9,b(My))],Py);let Fy=class{_getBannerBidMainHeight(e){return e.sizes.filter(e=>e[1]!==1)[0]?.[1]}_getBannerBidMainWidth(e){return e.sizes.filter(e=>e[0]!==1)[0]?.[0]}constructor(e,t){this._config=e,this._context=t,C(this,`_enablementByDevice`,z()?`Mobile`:`Desktop`),C(this,`_macroReplace`,{allowSmallerAdSizes:()=>this._config.adOptions.allowSmallerAdSizes,biddercode:e=>e.bidder.name,category:()=>this._config.site.category,device:()=>this._enablementByDevice.toLowerCase(),integration:e=>e.bidder.type,location:e=>this._isDisplaySlot(e.unit)?e.unit.location:e.unit.name,mainHeight:e=>this._isDisplaySlot(e.unit)?this._getBannerBidMainHeight(e.unit):e.unit.size[1],mainWidth:e=>this._isDisplaySlot(e.unit)?this._getBannerBidMainWidth(e.unit):e.unit.size[0],mediatype:e=>e.mediaTypes[0],placementMapName:e=>(this._isDisplaySlot(e.unit)?e.unit.placementMapName:e.unit.name).toLowerCase(),placementMapSequence:e=>{let t={sidebar:{max:9,value:9},content:{max:9,value:9},recipe:{max:5,value:2}},n=e.unit,r=(this._isDisplaySlot(n)?n.location:n.name).toLowerCase(),i=t[r],a=this._isDisplaySlot(e.unit)&&e.unit.sequence||1;return!i||a<=i.max?a:i.value},sequence:e=>this._isDisplaySlot(e.unit)?Math.min(e.unit.sequence??1,9):1,siteId:()=>this._config.site.id,slotId:e=>this._isDisplaySlot(e.unit)?e.unit.id:e.unit.name}),C(this,`_bidValidator`,{adTypes:this._validateAdTypes.bind(this),adTypesAny:this._validateAdTypesAny.bind(this),bidderCodes:this._validateBidderCodes.bind(this),browser:this._validateBrowser.bind(this),country:this._validateCountry.bind(this),device:this._validateDevice.bind(this),exp:this._validateExp.bind(this),featureRollout:this._validateFeatureRollout.bind(this),integration:this._validateIntegration.bind(this),largeFormat:this._validateLargeFormat.bind(this),lazy:this._validateLazy.bind(this),locations:this._validateLocations.bind(this),mediaTypesAll:this._validateMediatypesAll.bind(this),mediaTypesAny:this._validateMediatypesAny.bind(this),mobileStickyPlayerOnPage:this._validateMobileStickyPlayerOnPage.bind(this),nativeEnabled:this._validateNativeEnabled.bind(this),outstreamEnabled:this._validateOutstreamEnabled.bind(this),sequence:this._validateSequence.bind(this),sequenceMin:this._validateSequenceMin.bind(this),sequenceMax:this._validateSequenceMax.bind(this),siteIds:this._validateSiteIds.bind(this),sizesAll:this._validateSizesAll.bind(this),sizesAny:this._validateSizesAny.bind(this),stickyOutstreamEnabled:this._validateStickyOutstreamEnabled.bind(this),viewabilityThresholdMet:this._validateViewabilityThresholdMet.bind(this)}),C(this,`generateBids`,(e,t,n,r,i)=>{let a=this._getUnitLocation(n),o={_default:t.placementsLocation._default,_defaultAll:t.placementsLocation._default?.applyToAllBids,_defaultAllWithOption:t.placementsLocation._default?.applyOptionsToAllBids,all:t.applyToAllBids,allWithOption:t.applyOptionsToAllBids,location:t.placementsLocation[a],locationAll:t.placementsLocation[a]?.applyToAllBids,locationAllWithOption:t.placementsLocation[a]?.applyOptionsToAllBids},s=this._getMatchingBids(o,n,r,i);return this._constructBidParams(e,n,r,i,s)}),C(this,`_getMatchingBids`,(e,t,n,r)=>{let i=this._filterValidBids(e.location?.bids,t,n,r),a=i.length===0,o=a?this._filterValidBids(e._default?.bids,t,n,r):i,s=this._getModifiers(e,t,n,r,a);return this._applyModifiersToPlacements(o,s)}),C(this,`_isBidEligible`,(e,t,n,r,i=!0)=>{let a=(i?e.match:e.skip)??{},o=!0;for(let s in a){let c=s,l=!this._bidValidator[c],u=a[c],d={value:u,bid:e,unit:t,bidder:n,mediaTypes:r},f=u!==void 0&&i?this._bidValidator[c]?.(d):!this._bidValidator[c]?.(d);(l||!f)&&(l&&E.error(`BidFactory`,`_isBidEligible`,`Invalid bid filter key found ${s} for bidder ${n.name}`),o=!1)}return o}),C(this,`_isBidMatch`,(e,t,n,r)=>this._isBidEligible(e,t,n,r)),C(this,`_isBidSkip`,(e,t,n,r)=>this._isBidEligible(e,t,n,r,!1))}_applyGlobalSettingsToBid(e,t){let n=t.reduce((e,t)=>(e.paramLookup={...t.paramLookup,...e.paramLookup},e.retrieveFromFile=[...t.retrieveFromFile??[],...e.retrieveFromFile??[]],e.labels=[...t.labels??[],...e.labels??[]],e.params={...t.params,...e.params},e.supplemental=e.supplemental??t.supplemental,e),this._standardizeBid(e));return n.supplemental=n.supplemental??!0,n}_standardizeBid(e){return{paramLookup:{...e.paramLookup},retrieveFromFile:[...e.retrieveFromFile??[]],labels:[...e.labels??[]],params:{...e.params},supplemental:e.supplemental}}_applyModifiersToPlacements(e,t){let n=[],r=[];for(let i of e){let e=this._applyGlobalSettingsToBid(i,t);if(!e.supplemental){n.push(e);break}r.push(e)}return n.length?n:r}_constructBidParams(e,t,n,r,i){return i.forEach(i=>{let a=i;a.mediaTypesList=r,this._replaceMacros(a??{},t,n,r),this._paramLookup(a),this._fileRetrieval(a,e,t)}),i}_fileRetrieval(e,t,n){let r=e.retrieveFromFile;r?.length&&(e.params={...t.getParamValuesFromClient(n,r),...e.params})}_filterValidBids(e,t,n,r){return e?.filter(e=>this._isBidMatch(e,t,n,r)&&this._isBidSkip(e,t,n,r))??[]}_getModifiers(e,t,n,r,i){let a=e.all??{},o=this._filterValidBids(e.allWithOption,t,n,r),s=e.locationAll??{},c=this._filterValidBids(e.locationAllWithOption,t,n,r),l=e._defaultAll??{},u=this._filterValidBids(e._defaultAllWithOption,t,n,r);return[{...a},{...i?l:s},...o,...i?u:c]}_getUnitLocation(e){return(`id`in e?e.location:e.name).toLowerCase().replace(`-`,`_`)}_matchWithReverseWildcardPriority(e,t,n){n??=`-`;let r=e.split(n),i=r.length;for(let e=0;e<=i;e++)for(let a=i-e;a>=0;a--){let i=r.map((t,n)=>n>=a&&n<a+e?`*`:t).join(n);if(t[i]!==void 0)return t[i]}}_paramLookup(e){let t=e.paramLookup;if(!(!t||!Object.keys(t).length))for(let[n,r]of Object.entries(t)){let t=e.params;if(!t)continue;if(typeof t[n]==`string`||typeof t[n]==`number`){let e=r.map,i=r.delimiter;t[n]=this._matchWithReverseWildcardPriority(t[n].toString(),e,i),t[n]===void 0&&delete t[n]}}}_replaceMacros(e,t,n,r){let i=e.params=e.params||{};for(let[e,a]of Object.entries(i))if(typeof a==`string`){let o=/\{(\w+)\}/g,s=[...a.matchAll(o)],c={params:i,unit:t,bidder:n,mediaTypes:r};if(s.length===1&&a.trim()===`{${s[0][1]}}`){let t=s[0][1];i[e]=this._getValue(t,c)}else i[e]=a.replace(o,(e,t)=>String(this._getValue(t,c)))}}_getValue(e,{params:t,unit:n,bidder:r,mediaTypes:i}){let a=this._macroReplace[e];return typeof a==`function`?a({params:t,unit:n,bidder:r,mediaTypes:i}):`{${e}}`}_isDisplaySlot(e){return`id`in e}_validateAdTypes(e){return!!e.value?.every(e=>this._config.adTypes[e])}_validateAdTypesAny(e){return!!e.value?.some(e=>this._config.adTypes[e])}_validateBidderCodes(e){return!!e.value?.some(t=>t.toLowerCase()===e.bidder.pbsHost?.toLowerCase()||t.toLowerCase()===e.bidder.name.toLowerCase())}_validateBrowser(e){return!!e.value?.some(e=>Nt().toLowerCase()===e.toLowerCase())}_validateCountry(e){return!!e.value?.some(e=>e.toLowerCase()===this._context.country?.toLowerCase())}_validateDevice(e){let t=z()&&`mobile`||Mo()&&`tablet`||`desktop`;return e.value?.includes(t)??!0}_validateExp(e){return(e.value&&Object.entries(e.value).every(([e,t])=>(this._config.prebid.bidderPlacementsExperimentsResults[e]??this._config.prebid.bidderPlacementsExperimentsResultsByLookupKey[e])===t))??!0}_validateFeatureRollout(e){return!!e.value?.some(e=>cn.isRolloutEnabled(e))}_validateIntegration(e){return e.value?.toLowerCase()===e.bidder.type}_validateLargeFormat(e){return e.value===this._config.adTypes[z()?`largeFormatsMobile`:`largeFormatsDesktop`]}_validateLazy(e){return e.value===(this._isDisplaySlot(e.unit)?e.unit.lazy:!0)}_validateLocations(e){return!!e.value?.some(t=>t===this._getUnitLocation(e.unit))}_validateMediatypesAll(e){return!!e.value?.every(t=>e.mediaTypes.includes(t.toLowerCase()))}_validateMediatypesAny(e){return!!e.value?.some(t=>e.mediaTypes.includes(t.toLowerCase()))}_validateMobileStickyPlayerOnPage(e){return e.value===this._config.video.mobileStickyPlayerOnPage}_validateNativeEnabled(e){let t=e.unit,n=`id`in t?t.location:t.name,r=z()?`Mobile`:`Desktop`;return e.value===!!this._config.adTypes[`native${r}${n}`]}_validateOutstreamEnabled(e){return e.value===!!(`id`in e.unit&&e.unit.outstreamEnabled)}_validateSequence(e){return!!e.value?.some(t=>this._isDisplaySlot(e.unit)?t===e.unit.sequence:!0)}_validateSequenceMin(e){return this._isDisplaySlot(e.unit)?(e.value??0)<=(e.unit.sequence??0):!0}_validateSequenceMax(e){return this._isDisplaySlot(e.unit)?(e.value??0)>=(e.unit.sequence??0):!0}_validateSiteIds(e){return!!e.value?.some(e=>e===this._config.site.id)}_validateSizesAll(e){return!!e.value?.every(t=>this._isDisplaySlot(e.unit)?e.unit.sizes.some(e=>e[0]===t[0]&&e[1]===t[1]):e.unit.size[0]===t[0]&&e.unit.size[1]===t[1])}_validateSizesAny(e){return!!e.value?.some(t=>this._isDisplaySlot(e.unit)?e.unit.sizes.some(e=>e[0]===t[0]&&e[1]===t[1]):e.unit.size[0]===t[0]&&e.unit.size[1]===t[1])}_validateStickyOutstreamEnabled(e){return e.value===this._config.video.hasStickyOutstream}_validateViewabilityThresholdMet(e){let t=e.unit;if(!this._isDisplaySlot(t))return!0;let n=!1;return(t.highlyViewable||t.lazy||t.viewability>=this._config.marmalade.hvThreshold)&&(n=!0),n}};Fy=w([x(),N(0,b(J)),N(1,b(W))],Fy);var Iy=class{constructor(e){this._config=e,C(this,`gvlid`,void 0),C(this,`adServerTargeting`,void 0),C(this,`multiformatBidder`,void 0),C(this,`_multiformat`,void 0),C(this,`_bidders`,[]),C(this,`_settings`,void 0),C(this,`_integrationConfigured`,!1),C(this,`multiformatBannerVideoBidder`,void 0),C(this,`multiformatBannerNativeBidder`,void 0),C(this,`_videoCreativeIds`,[])}updateBidParams(e,t){}_getParamValuesFromClient(e,t){}setup(){this._integrationConfigured||this._setupBidderIntegrationType()}get settings(){return this._settings}get adapterEnablement(){return wv(this._adapterEnablement)}get bidderDisplayEnabled(){return!0}get bidderInstreamEnabled(){return!0}get bidders(){return this._bidders}get bidderCodes(){return this._bidderCodes}get enabled(){let{client:e,server:t}=this._adapterEnablement,n=e.enabled&&e.name||t.enabled&&t.name;return!!(this._bidders.length>0&&(this._config.partners.display.get(this.name)??(n&&this._config.partners.display.get(n))))}get videoCreativeIds(){return this._videoCreativeIds}get videoEnabled(){let{client:e,server:t}=this._adapterEnablement,n=e.enabled&&e.name||t.enabled&&t.name;return this._bidders.length>0&&(this._config.partners.video.get(this.name)||n&&this._config.partners.video.get(n))}get name(){return this.bidderConfig.bidder_name}getBidderAliases(){let e=this._adapterEnablement,t=new Map,n=e.client.enabled;return this._bidders.forEach(r=>{let i=r.name,a=e[r.type],o=a.enabled?a.name:``;o===i||t.has(i)||(n?t.set(r.name,o):this._config.prebid.s2s.aliases[i]=o)}),t}_addPositionParam(e,t){e.params.position=t}_addPlacementIdParam(e,t){e.params.placementId=t}_applyAuctionLabel(e,t){let n=this._config,r=e.location===H.Video_StickyOutstream,i=n.prebid,a=t.bidder,o=[];r&&i.refreshStickyOutstreamAuctionCount>1?o=[i.getVideoBidderLabel(a)]:!r&&i.refreshAuctionCount>1&&(o=[i.getBidderLabel(a,t.pbsHost)]),o.forEach(e=>{t.labelAll=t.labelAll||[],t.labelAll.includes(e)||t.labelAll.push(e)})}_isS2SBidder(e=``){return this._config.prebid.s2s.bidders.includes(e)}_setupBidderIntegrationType(){let{name:e,_adapterEnablement:t}=this,{client:n,server:r}=t,i=n.enabled&&n.name||r.enabled&&r.name||void 0,{primary:a,secondary:o,supplemental:s}=this.bidderCodes,c=o??a,l=t=>this._getBidderHoldout(e,i,t),u=({name:e,type:t,pbsHost:n})=>{this._bidders.push({name:e,type:t,...n&&{pbsHost:n}})};[a,o].forEach(e=>{!e||l(e)||!this._isS2SBidder(e)&&!this._config.prebidClientSide.enabled||u({name:e,type:this._isS2SBidder(e)?`server`:`client`})}),s?.forEach(e=>{!l(e)&&c&&this._isS2SBidder(c)&&(u({name:c,type:`server`,pbsHost:e}),this._config.prebid.s2s.additionalBidders??=[],this._config.prebid.s2s.additionalBidders.push(e))}),this._integrationConfigured=!0}_getBidderHoldout(e,t,n){let r=this._config,i=t?[t]:[],a=n&&n!==e?[n]:[];return[e,...i,...a].some(i=>r.hbho.bidders.includes(i)&&r.vbho.bidders.includes(i)||r.prebid.experimentIntegrationHoldouts.includes(n||t||e))}};let Q={banner:`banner`,instream:`instream`,native:`native`,outstream:`outstream`};var Ly=class extends Iy{get bidMap(){return this._bidMap}constructor(e,t){super(e),C(this,`_bidFactory`,void 0),C(this,`_bidMap`,void 0),C(this,`_bidderBidRequestOverrideList`,[G.Triplelift,G.TripleliftServer]),C(this,`_paramKeyMap`,void 0),this._bidFactory=y.resolve(Fy),this._bidMap=t.map,this._videoCreativeIds=[...t.videoCreativeIds??[]]}getBidRequests(e,t){e.forEach(e=>{let n=this._getUnitEligibleMediaTypes(e),r=this._generateBidParams(e,n);`id`in e?this._getBidderBidRequests(t,r,e.id,e):this._getBidderBidRequests(t,r,e.name)})}_getUnitEligibleMediaTypes(e){let t=[];return`id`in e?(e.location!==H.Video_StickyOutstream&&t.push(Q.banner),e.outstreamEnabled&&t.push(Q.outstream),e.nativeEnabled&&t.push(Q.native)):t.push(Q.instream),t}_getBidMediaTypeMap(e){let t=e.includes(Q.banner),n=e.includes(Q.outstream),r=e.includes(Q.native);return e.length===1?{[e[0]]:[e[0]]}:{...t&&{banner:[Q.banner]},...n&&{outstream:[Q.outstream]},...t&&n&&{multiformatBannerOutstream:[Q.banner,Q.outstream]},...r&&{native:[Q.native]},...t&&r&&{multiformatBannerNative:[Q.banner,Q.native]}}}getParamValuesFromClient(e,t){return t.reduce((t,n)=>{if(typeof this._paramKeyMap?.[n]==`function`){let r=this._paramKeyMap[n](e);r!==void 0&&(t[n]=r)}return t},{})}_validateBids(e,t,n){return t?.reduce((t,r)=>{let i=r.params||{},a=[],o=Object.keys(i),s=[],c=r.mediaTypesList??[`banner`];return c.forEach(e=>{let t=(this._requiredProperties.get(e)?.[n]??this._requiredProperties.get(`default`)?.[n]??[]).filter(e=>!s.includes(e));t.length&&s.push(...t)}),s.forEach(e=>{o.includes(e)||a.push(e)}),a.length?E.error(`Bidder`,`_validateBids`,`${`id`in e?e.id:e.name}`,`invalid bid discarded for ${this.name} ${n} side bidder is missing required ${c.toString()} params: ${a.toString()}`):t.push(r),t},[])}_generateBidParams(e,t){return this._bidders.reduce((n,r)=>{let i=r.pbsHost,a=this._getSlotBidRequests(e,r,t);return(this._validateBids(e,a,r.type)??[]).forEach(t=>{let{params:a,mediaTypesList:o}=t,s=`id`in e&&o?.length===1&&o.includes(Q.outstream)?[`outstreamCapable_${e.placementMapName}`,...t.labels??[]]:t.labels,c={params:a,bidder:r.name,...i&&{pbsHost:i},...s?.length&&{labelAll:s},mediaTypesList:t.mediaTypesList};n.push(c)}),n},[])}_getSlotBidRequests(e,t,n){let r=[],i=this._getBidMediaTypeMap(n),a=this._mediatypeEnablement,o=this._isBidderOverridden(t.name),s=this._getMultiformatState(i);for(let n in i){let i=n;if(!a.includes(i))continue;this._isMediaTypeEligible(i,s,o)&&r.push(...this._generateBids([i],e,t))}return this._addMultiformatBids(r,e,t,i,s),r}_generateBids(e,t,n){return this._bidFactory.generateBids(this,this._bidMap,t,n,e)}_isBidderOverridden(e){return this._bidderBidRequestOverrideList.includes(e)}_getMultiformatState(e){let{native:t,outstream:n}=this._multiformat||{};return{nativeEnabled:!!t?.enabled,nativeBackupOnly:!!t?.backup,outstreamEnabled:!!n?.enabled,outstreamBackupOnly:!!n?.backup,hasMultiformatNative:!!e.multiformatBannerNative?.length&&!!t?.enabled,hasMultiformatOutstream:!!e.multiformatBannerOutstream?.length&&!!n?.enabled}}_isMediaTypeEligible(e,t,n){switch(e){case Q.instream:return!0;case Q.banner:return this._isBannerEligible(t,n);case Q.outstream:return!t.hasMultiformatOutstream||t.hasMultiformatNative&&t.outstreamBackupOnly;case Q.native:return!t.hasMultiformatNative||t.hasMultiformatOutstream&&t.nativeBackupOnly;default:return!1}}_isBannerEligible(e,t){let n=e.hasMultiformatOutstream||e.hasMultiformatNative,r=!e.hasMultiformatOutstream&&e.hasMultiformatNative&&t;return!n||r}_addMultiformatBids(e,t,n,r,i){let a=i.hasMultiformatNative&&(!i.hasMultiformatOutstream||!i.nativeBackupOnly),o=i.hasMultiformatOutstream&&(!i.hasMultiformatNative||!i.outstreamBackupOnly);a&&e.push(...this._generateBids(r.multiformatBannerNative,t,n)),o&&e.push(...this._generateBids(r.multiformatBannerOutstream,t,n))}_categorizeBids(e){let t={banner:[],outstream:[],native:[],instream:[],multiformatNative:[],multiformatOutstream:[]};return e.forEach(e=>{let n=e.mediaTypesList??[Q.banner],r;r=n.length===1?n[0]:n.includes(Q.native)?`multiformatNative`:`multiformatOutstream`,t[r].push(e)}),t}_getBidderBidRequests(e,t,n,r){let i=this._categorizeBids(t??[]);for(let[t,a]of Object.entries(i)){let i=t,o=this._filterBids(a,n,r),s=e[i]?.get(n);r&&(o=o?.reduce((e,t)=>(t&&(this._applyAuctionLabel(r,t),e.push(t)),e),[])),s?.length&&(o=(o||[]).concat(s)),o?.length&&e[i].set(n,o)}return e}_filterBids(e,t,n){if(!e)return;e=e.filter(e=>e!==void 0);let r=this._config.prebid,{bidders:i,distributedBidders:a}=r.s2s,o=r.ayServerEnabled;return a&&this._preprocessBids(e,i),e.filter(e=>{if(!this._shouldIncludeBidByHoldout(e,t,n))return!1;if(i.includes(e.bidder)){if(a){if(!this._shouldIncludeBidByServer(e,a.rpbsBidders,a.ayBidders)||e.skip)return!1}else if(!!e.pbsHost!=!!o)return!1}return!0})}_shouldIncludeBidByHoldout(e,t,n){let r=this._config,i=Object.values(A).includes(t)?`vbho`:`hbho`,a=r[i].bidders,o=r.prebid.experimentIntegrationHoldouts,s=this._adapterEnablement.client,c=this._adapterEnablement.server,l=s.enabled&&s.name||c.enabled&&c.name||void 0;return n&&r.trafficShaping.applyHoldoutLabel(n,e),!a.includes(l??this.name)&&!o.includes(e.bidder)&&!a.includes(e.bidder)}_shouldIncludeBidByServer(e,t,n){return e.pbsHost?n.includes(e.bidder):t.includes(e.bidder)}_preprocessBids(e,t){let n=[],r=[`initial`,`refresh`];if(e.some(e=>ui.has(e.bidder))){for(let i of e){if(!t.includes(i.bidder)||i.labelAll?.some(e=>r.includes(e))||i.labelAny?.some(e=>r.includes(e)))continue;n.push(i)}if(n.length>2){n.sort((e,t)=>e.pbsHost===void 0&&t.pbsHost!==void 0?-1:e.pbsHost!==void 0&&t.pbsHost===void 0?1:0);let e=Math.floor(n.length/2),t=Math.random()<.5;for(let r=0;r<e;r++)t?n[r+e].skip=!0:n[r].skip=!0,t=!t}}}},Ry=class{constructor(e,t,n){this._config=e,C(this,`_bidMap`,{placementsLocation:{_default:{bids:[]}}}),C(this,`_videoCreativeIds`,void 0),this._bidMap=this._config.partners.siteBidderMap?.[n]||t}get videoCreativeIds(){return this._videoCreativeIds}get map(){return this._bidMap}};let zy={applyOptionsToAllBids:[{skip:{mediaTypesAll:[`instream`]},params:{productId:`siab`}},{params:{productId:`instream`},match:{mediaTypesAll:[`instream`]}}],placementsLocation:{_default:{bids:[]},content:{applyToAllBids:{paramLookup:{siteId:{map:{1:`dzqsVw_Lqr6iHHaKlId8sQ`,2:`dGYL36_Lqr6iHHaKlId8sQ`,3:`dPmBLW_Lqr6ikXaKkGJozW`,4:`dYmdO4_Lqr6ikXaKkGJozW`,5:`d73_q4_Lqr6ikfaKlId8sQ`,6:`aeCNc8_Lur6ikfaKlId8sQ`,7:`amEJ90_Lur6ikXaKkGJozW`,8:`avcDUU_Lur6ikXaKkGJozW`,9:`aE0F5q_Lur6iHHaKlId8sQ`}}}},bids:[{params:{siteId:`{sequence}`}}]},header:{applyToAllBids:{paramLookup:{siteId:{map:{1:`aZCnyg_Lur6ikfaKlId8sQ`,2:`a7S6ye_Lur6ikXaKkGJozW`}}}},bids:[{params:{siteId:`{sequence}`}}]},footer:{bids:[{params:{siteId:`aMbGkS_Lur6ikXaKkGJozW`}}]},sidebar:{applyToAllBids:{paramLookup:{siteId:{map:{1:`buEy3O_Lur6ikfaKlId8sQ`,2:`bCOsqy_Lur6ikfaKlId8sQ`,3:`bOGvrc_Lur6ikXaKkGJozW`,4:`bW-wb0_Lur6ikfaKlId8sQ`,5:`b8nVxi_Lur6ikXaKkGJozW`,9:`cggK7W_Lur6ikfaKlId8sQ`}}}},bids:[{params:{siteId:`{sequence}`}}]},recipe:{applyToAllBids:{paramLookup:{siteId:{map:{1:`bfXhLW_Lur6ioMaKkGJozW`,2:`bmQVLo_Lur6ikfaKlId8sQ`,3:`d7kcPCUhur6yo-aKkGJozW`,4:`agAjkaUhyr6yo9aKlId8sQ`,5:`a4HY9OrIar8ikorkHcnnVW`}}}},bids:[{params:{siteId:`{placementMapSequence}`}}]},below_post:{bids:[{params:{siteId:`dqjinO_Lqr6i5uaKkv7mNO`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{siteId:`a_lKMg0Iar7k8brkHcnlxd`}}]},video_coll_soff_smartphone:{bids:[{params:{siteId:`b7sKMM0Iar7ikGrkHcnnVW`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{siteId:`c98www0Iar7ioerkHcnlKl`}}]},video_individual_autoplay_soff:{bids:[{params:{siteId:`bhUZlu0Ier7ioerkHcnlKl`}}]}}},By=class extends Ry{constructor(e){super(e,zy,G.ThirtyThreeAcross),C(this,`_videoCreativeIds`,[[`138395447475`,G.ThirtyThreeAcross],[`138395937226`,G.ThirtyThreeAcross],[`138395937256`,G.ThirtyThreeAcross],[`138395937310`,G.ThirtyThreeAcross],[`138395937325`,G.ThirtyThreeAcross],[`138395447241`,G.ThirtyThreeAcross],[`138395937274`,G.ThirtyThreeAcross],[`138395937313`,G.ThirtyThreeAcross],[`138395937319`,G.ThirtyThreeAcross],[`138395937343`,G.ThirtyThreeAcross],[`138395937349`,G.ThirtyThreeAcross],[`138395937304`,G.ThirtyThreeAcross],[`138395937307`,G.ThirtyThreeAcross],[`138395937322`,G.ThirtyThreeAcross],[`138395937346`,G.ThirtyThreeAcross],[`138395445846`,G.ThirtyThreeAcross]])}};By=w([x(),N(0,b(J))],By);let Vy=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.ThirtyThreeAcross)),C(this,`_adapterEnablement`,{client:{enabled:!1},server:{enabled:!0,name:G.ThirtyThreeAcross}}),C(this,`_bidderCodes`,{primary:G.ThirtyThreeAcross,supplemental:[G.ThirtyThreeAcrossAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`siteId`,`productId`],server:[`siteId`,`productId`]}]]))}get bidderDisplayEnabled(){return!this._config.gdpr.enabled}get bidderInstreamEnabled(){return!!this._config.video.playbackmethod&&!this._config.gdpr.enabled}};Vy=w([D(`ThirtyThreeAcrossBidder`),x(),N(0,b(J)),N(1,b(By))],Vy);let Hy={placementsLocation:{_default:{bids:[{params:{tagId:`D8WPCjgZ5`}}]}}},Uy=class extends Ry{constructor(e){super(e,Hy,G.AdaptMx),C(this,`_videoCreativeIds`,[[`138517239429`,G.AdaptMx],[`138517239558`,G.AdaptMx],[`138517239900`,G.AdaptMx],[`138517239906`,G.AdaptMx],[`138517239912`,G.AdaptMx],[`138517240341`,G.AdaptMx],[`138517240344`,G.AdaptMx],[`138517240347`,G.AdaptMx]])}};Uy=w([x(),N(0,b(J))],Uy);let Wy=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.AdaptMx)),C(this,`_adapterEnablement`,{client:{enabled:!1},server:{enabled:!0,name:G.AdaptMx}}),C(this,`_bidderCodes`,{primary:G.AdaptMx,supplemental:[G.AdaptMxAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.instream,Q.outstream]),C(this,`_requiredProperties`,new Map([[`default`,{server:[`tagId`]}]]))}};Wy=w([D(`AdaptMxBidder`),x(),N(0,b(J)),N(1,b(Uy))],Wy);let Gy={applyToAllBids:{retrieveFromFile:[`keywords`]},applyOptionsToAllBids:[{params:{allowSmallerSizes:`{allowSmallerAdSizes}`},skip:{mediaTypesAll:[`instream`]}},{params:{position:`above`},match:{viewabilityThresholdMet:!0},skip:{mediaTypesAll:[`instream`]}},{retrieveFromFile:[`video`],params:{position:`above`},match:{mediaTypesAll:[`instream`]}}],placementsLocation:{_default:{bids:[]},content:{applyToAllBids:{paramLookup:{placementId:{map:{"1-*":13036388,"1-*outstream":16808429,"2-*":13036389,"3-*":13036391,"4-*":13036393,"5-*":13036394,"6-*":13036396,"7-*":13036398,"8-*":13036399,"9-*":13036400}}}},bids:[{params:{placementId:`{placementMapSequence}-{mediatype}`},match:{mediaTypesAll:[`banner`]}},{params:{placementId:`{placementMapSequence}-{mediatype}`,playback_method:[`auto_play_sound_off`]},match:{sequence:[1],mediaTypesAll:[`outstream`]}}]},recipe:{applyToAllBids:{paramLookup:{placementId:{map:{1:13036406,2:13036407,3:15014787,4:15998791,5:35983337}}}},bids:[{params:{placementId:`{placementMapSequence}`}}]},footer:{bids:[{params:{placementId:13036401}}]},header:{applyToAllBids:{paramLookup:{placementId:{map:{1:13036404,2:13036405}}}},bids:[{params:{placementId:`{sequence}`}}]},sidebar:{applyToAllBids:{paramLookup:{placementId:{map:{1:13036408,2:13036409,3:13036410,4:13036411,5:13036412,9:13036416}}}},bids:[{params:{placementId:`{sequence}`}}]},below_post:{bids:[{params:{placementId:13036386}}]},interstitial:{bids:[{params:{placementId:21240886}}]},video_stickyoutstream:{bids:[{params:{placementId:22366045}}]},video_collapse_autoplay_soundoff:{bids:[{params:{placementId:15504193,position:`above`,video:{playback_method:[`auto_play_sound_off`]}}}]},video_coll_soff_smartphone:{bids:[{params:{placementId:15504209,position:`above`,video:{playback_method:[`auto_play_sound_off`]}}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{placementId:15504166,position:`above`,video:{playback_method:[`click_to_play`]}}}]},video_individual_autoplay_soff:{bids:[{params:{placementId:17947919,position:`above`,video:{playback_method:[`auto_play_sound_off`]}}}]}}},Ky=class extends Ry{constructor(e){super(e,Gy,G.AppNexus),C(this,`_videoCreativeIds`,[[`138323232312`,G.AppNexus],[`138323908966`,G.AppNexus],[`138323900998`,G.AppNexus],[`138323900548`,G.AppNexus],[`138323457386`,G.AppNexus],[`138323908963`,G.AppNexus],[`138323908960`,G.AppNexus],[`138323901004`,G.AppNexus],[`138323901001`,G.AppNexus],[`138323521089`,G.AppNexus],[`138323457473`,G.AppNexus],[`138323908969`,G.AppNexus],[`138323908957`,G.AppNexus],[`138323908954`,G.AppNexus],[`138323900995`,G.AppNexus],[`138323521092`,G.AppNexus]])}};Ky=w([x(),N(0,b(J))],Ky);let qy=class extends Ly{constructor(e,t,n,r){super(e,t),this._rfcodes=n,this._context=r,C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.AppNexus)),C(this,`_adapterEnablement`,{client:{enabled:!Tt(),name:G.AppNexus},server:{enabled:!0,name:G.AppNexus}}),C(this,`_bidderCodes`,{primary:G.AppNexus,supplemental:[G.AppNexusAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`placementId`,`allowSmallerSizes`,`keywords`],server:[`placementId`,`allowSmallerSizes`,`keywords`]}],[`instream`,{client:[`placementId`,`video`,`keywords`],server:[`placementId`,`video`,`keywords`]}]])),C(this,`_paramKeyMap`,{keywords:this._getKeywordsParam.bind(this),video:this._getVideoParam.bind(this)}),C(this,`_keywords`,{...this._config.site.filteredSensitiveCategories.length&&{sens:this._config.site.filteredSensitiveCategories},bucket:[this._context.bucket],Chrome:[`${Ct()}`],Mobile:[(!!(navigator.userAgent&&navigator.userAgent.search(/Mobi/i)>-1)).toString()],...this._config.site.verticals.length&&{verticals:this._config.site.verticals},mcmp:this._rfcodes.getAllMcmps()}),C(this,`_playbackmethodMap`,new Map([[3,`click_to_play`],[6,`auto_play_sound_off`]])),C(this,`outstreamType`,z()?`outstreamMobile`:`outstreamDesktop`)}updateBidParams(e){this._addPositionParam(e,`above`)}_getHVP(e){let t=wc(e);return Tc(t).toString()}_getKeywordsParam(e){let t=this._keywords;return{...t,...!t.mcmp.length&&{mcmp:this._rfcodes.getAllMcmps()},...`id`in e&&e.location===`Footer`&&this._getRoadblockDisplayTargeting(e)}}_getRoadblockDisplayTargeting(e){return{site_code:this._config.marmalade.filteredRoadblockSiteCodes,pmp_elig:[String(this._config.adOptions.pmp)],hvp:[this._getHVP(e)]}}_getVideoParam(e){let t=`id`in e?e.id:e.name,n=this._config.video.mimeType;return{...n&&{mimes:n},...this._config.video.playbackmethod?.get(t)&&{playback_method:this._playbackmethodMap.get(this._config.video.playbackmethod.get(t)[0])},frameworks:this._config.video.apiValue}}};qy=w([D(`AppNexusBidder`),x(),N(0,b(J)),N(1,b(Ky)),N(2,b(up)),N(3,b(W))],qy);let Jy={placementsLocation:{_default:{bids:[]},recipe:{bids:[{params:{},match:{sequence:[1,2,3,5]}}]}}},Yy=class extends Ry{constructor(e){super(e,Jy,G.Chicory)}};Yy=w([x(),N(0,b(J))],Yy);let Xy=class extends Ly{constructor(e,t,n){super(e,t),this._context=n,C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Chicory)),C(this,`_adapterEnablement`,{client:{enabled:!1},server:{enabled:!0,name:G.Chicory}}),C(this,`_bidderCodes`,{primary:G.Chicory}),C(this,`_mediatypeEnablement`,[Q.banner]),C(this,`_requiredProperties`,new Map([[`default`,{server:[]}]]))}get bidderDisplayEnabled(){return this._context.country===`US`}};Xy=w([D(`ChicoryBidder`),x(),N(0,b(J)),N(1,b(Yy)),N(2,b(W))],Xy);let Zy={placementsLocation:{_default:{bids:[]},video_stickyoutstream:{bids:[{params:{placementId:`358f78e9-4c98-401e-a1da-9bb7cb348d39`},match:{bidderCodes:[G.ConnatixAY]}}]},video_collapse_autoplay_soundoff:{bids:[{params:{placementId:`f3efc93e-f824-4a05-b00d-754b78b652c1`},match:{bidderCodes:[G.ConnatixAY]}}]},video_coll_soff_smartphone:{bids:[{params:{placementId:`649c43f9-8b3a-45f3-bc9e-421973e0f4fb`},match:{bidderCodes:[G.ConnatixAY]}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{placementId:`ba794efe-fe83-41d0-8f02-c9ed40a2cb39`},match:{bidderCodes:[G.ConnatixAY]}}]},video_individual_autoplay_soff:{bids:[{params:{placementId:`d1d9af93-89c6-4c5c-b5af-35a87ad03473`},match:{bidderCodes:[G.ConnatixAY]}}]}}},Qy=class extends Ry{constructor(e){super(e,Zy,G.Connatix),C(this,`_videoCreativeIds`,[[`138508089465`,G.Connatix],[`138508089483`,G.Connatix],[`138508089486`,G.Connatix],[`138508892635`,G.Connatix],[`138508892647`,G.Connatix],[`138508892650`,G.Connatix],[`138508892653`,G.Connatix],[`138508892656`,G.Connatix]])}};Qy=w([x(),N(0,b(J))],Qy);let $y=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Connatix)),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.Connatix},server:{enabled:!0,name:G.Connatix}}),C(this,`_bidderCodes`,{primary:G.Connatix,supplemental:[G.ConnatixAY]}),C(this,`_mediatypeEnablement`,[Q.outstream,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`placementId`],server:[`placementId`]}]])),C(this,`_settings`,{storageAllowed:[`cookie`]})}};$y=w([D(`ConnatixBidder`),x(),N(0,b(J)),N(1,b(Qy))],$y);let eb={applyToAllBids:{params:{site_id:`203587`}},placementsLocation:{_default:{bids:[]},below_post:{bids:[{params:{tag_id:`8c6e3091`}}]},content:{applyToAllBids:{paramLookup:{tag_id:{map:{1:`9cbc79fd`,2:`8c6e3091`,3:`ff6c383c`,4:`972f654c`,5:`bd1aadb5`,6:`ce4f5d6e`,7:`d85e90b`,8:`f02f4ba`,"*":`2c01cbc`}}}},bids:[{params:{tag_id:`{sequence}`}}]},footer:{bids:[{params:{tag_id:`1b2dec1`}}]},header:{applyToAllBids:{paramLookup:{tag_id:{map:{1:`44d21b5`,2:`3488dd9`}}}},bids:[{params:{tag_id:`{sequence}`}}]},recipe:{applyToAllBids:{paramLookup:{tag_id:{map:{1:`f6cf917`,2:`31d9c43`,3:`a7b4d19`,4:`245c673`,"*":`0bf3576`}}}},bids:[{params:{tag_id:`{placementMapSequence}`}}]},sidebar:{applyToAllBids:{paramLookup:{tag_id:{map:{1:`bf73d45`,2:`0a57500`,3:`cceddcd`,4:`872fffd4`,5:`a7653e4`,"*":`517df454`}}}},bids:[{params:{tag_id:`{sequence}`}}]}}},tb=class extends Ry{constructor(e){super(e,eb,G.Conversant)}};tb=w([x(),N(0,b(J))],tb);let nb=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Conversant)),C(this,`_adapterEnablement`,{client:{enabled:!1},server:{enabled:!0,name:G.Conversant}}),C(this,`_bidderCodes`,{primary:G.Conversant,supplemental:[G.ConversantAY]}),C(this,`_mediatypeEnablement`,[Q.banner]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`tag_id`,`site_id`],server:[`tag_id`,`site_id`]}]]))}};nb=w([D(`ConversantBidder`),x(),N(0,b(J)),N(1,b(tb))],nb);let rb={applyOptionsToAllBids:[{params:{networkId:12180},match:{integration:`server`}}],placementsLocation:{_default:{bids:[{params:{networkId:3927},match:{mediaTypesAll:[`banner`],integration:`client`}}]},below_post:{applyToAllBids:{paramLookup:{uid:{map:{"1-client":477223,"1-server":477197,"*-client":477222,"*-server":477196}}}},bids:[{params:{uid:`{sequence}-{integration}`}}]},content:{applyToAllBids:{paramLookup:{uid:{map:{"1-client":477199,"1-server":477225,"2-client":477200,"2-server":477226,"3-client":477201,"3-server":477227,"4-client":477202,"4-server":477228,"5-client":477203,"5-server":477229,"6-client":477204,"6-server":477230,"7-client":477205,"7-server":477231,"8-client":477206,"8-server":477232,"9-client":477207,"9-server":477233,"*-client":477198,"*-server":477224}}}},bids:[{params:{uid:`{sequence}-{integration}`}}]},footer:{bids:[{params:{uid:477208},match:{mediaTypesAll:[`banner`],integration:`client`}},{params:{uid:477234},match:{mediaTypesAll:[`banner`],integration:`server`}}]},header:{applyToAllBids:{paramLookup:{uid:{map:{"1-client":477209,"1-server":477235,"2-client":477210,"2-server":477236}}}},bids:[{params:{uid:`{sequence}-{integration}`}}]},sidebar:{applyToAllBids:{paramLookup:{uid:{map:{"1-client":477216,"1-server":477242,"2-client":477217,"2-server":477243,"3-client":477218,"3-server":477244,"4-client":477219,"4-server":477245,"5-client":477220,"5-server":477246,"*-client":477221,"*-server":477247}}}},bids:[{params:{uid:`{sequence}-{integration}`}}]},recipe:{applyToAllBids:{paramLookup:{uid:{map:{"1-client":477211,"1-server":477237,"2-client":477212,"2-server":477238,"3-client":477213,"3-server":477239,"4-client":477214,"4-server":477240,"*-client":477215,"*-server":477241}}}},bids:[{params:{uid:`{sequence}-{integration}`}}]}}},ib={applyOptionsToAllBids:[{params:{networkId:12180},match:{integration:`server`}}],placementsLocation:{_default:{bids:[{params:{networkId:3927},match:{mediaTypesAll:[`banner`],integration:`client`}},{params:{zoneId:1709027},match:{mediaTypesAll:[`outstream`],integration:`client`},skip:{locations:[`video_stickyoutstream`]}}]},below_post:{applyToAllBids:{paramLookup:{uid:{map:{"0-banner":417066,"0-outstream":417710,"1-banner":417063,"1-outstream":417711}}}},bids:[{params:{uid:`{sequence}-{mediatype}`},match:{sequence:[1],integration:`server`}},{params:{uid:`0-{mediatype}`},match:{integration:`server`},skip:{sequence:[1]}}]},content:{applyToAllBids:{paramLookup:{uid:{map:{"banner-1":417062,"outstream-1":417712,"banner-2":417069,"banner-3":417068,"outstream-3":417713,"banner-4":417070,"banner-5":417064,"outstream-5":417714,"banner-6":417065,"banner-7":417067,"banner-8":417071,"banner-*":417072}}}},bids:[{params:{uid:`{mediatype}-{sequence}`},match:{integration:`server`}}]},footer:{bids:[{params:{uid:417073},match:{mediaTypesAll:[`banner`],integration:`server`}}]},header:{applyToAllBids:{paramLookup:{uid:{map:{1:417074,2:417074}}}},bids:[{params:{uid:`{sequence}`},match:{integration:`server`}}]},sidebar:{applyToAllBids:{paramLookup:{uid:{map:{1:417081,2:417082,3:417083,4:417092,5:417090,"*":417093}}}},bids:[{params:{uid:`{sequence}`},match:{integration:`server`}}]},recipe:{applyToAllBids:{paramLookup:{uid:{map:{"banner-1":417076,"outstream-1":417715,"banner-2":417077,"banner-3":417078,"banner-4":417079,"banner-*":417080}}}},bids:[{params:{uid:`{mediatype}-{placementMapSequence}`},match:{integration:`server`}}]},video_stickyoutstream:{bids:[{params:{zoneId:1709026},match:{integration:`client`}},{params:{uid:417106},match:{integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{zoneId:1629631},match:{integration:`client`}},{params:{uid:417103},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{zoneId:1629630},match:{integration:`client`}},{params:{uid:417102},match:{integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{zoneId:1629629},match:{integration:`client`}},{params:{uid:417104},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{zoneId:1629401},match:{integration:`client`}},{params:{uid:417105},match:{integration:`server`}}]}}},ab=class extends Ry{constructor(e){let t=Sp()?rb:ib;super(e,t,G.Criteo),C(this,`_videoCreativeIds`,[[`138381583896`,G.Criteo],[`138381548372`,G.Criteo],[`138381548387`,G.Criteo],[`138381548384`,G.Criteo],[`138381548525`,G.Criteo],[`138381548522`,G.Criteo],[`138381548516`,G.Criteo],[`138381548513`,G.Criteo],[`138382062244`,G.Criteo],[`138382062241`,G.Criteo],[`138382062238`,G.Criteo],[`138382062235`,G.Criteo],[`138382062232`,G.Criteo],[`138382062226`,G.Criteo],[`138382062223`,G.Criteo],[`138381584697`,G.Criteo],[`138485671580`,G.CriteoServer],[`138486258745`,G.CriteoServer],[`138486258748`,G.CriteoServer],[`138486258766`,G.CriteoServer],[`138486258769`,G.CriteoServer],[`138486258772`,G.CriteoServer],[`138486258775`,G.CriteoServer],[`138486259240`,G.CriteoServer]])}};ab=w([x(),N(0,b(J))],ab);let ob=class extends Ly{constructor(e,t,n,r,i){super(e,t),this._prebidMethods=n,this._gdprEnforcement=r,this._gdprEvents=i,C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Criteo)),C(this,`gvlid`,91),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.Criteo},server:{enabled:!0,name:G.Criteo}}),C(this,`_bidderCodes`,{primary:G.Criteo,secondary:G.CriteoServer,supplemental:[G.CriteoAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`zoneId`],server:[`networkId`,`uid`]}],[`banner`,{client:[`networkId`],server:[`networkId`,`uid`]}]])),C(this,`_settings`,{storageAllowed:[`html5`]}),this._prebidMethods.setConfig({criteo:{fastBidVersion:`none`}},!1),this._checkConsentAndSetUpInterestGroupIframe().catch(()=>{}),this._config.gdpr.enabled&&this._gdprEvents.consentResponseCaptured.on(()=>{this._checkConsentAndSetUpInterestGroupIframe().catch(()=>{})})}async _checkConsentAndSetUpInterestGroupIframe(){this._config.gdpr.enabled&&!await this._gdprEnforcement.checkConsentForVendor(this._config.gdpr.raptiveVendorId,[1])||`joinAdInterestGroup`in navigator&&this._setInterestGroupIframe().then(e=>{}).catch(e=>{E.error(`CriteoBidder`,`_setInterestGroupIframe`,e)})}async _setInterestGroupIframe(){return document.getElementById(`criteo-ig`)||new Promise((e,t)=>{try{let n=document.createElement(`iframe`);n.id=`criteo-ig`,n.style.display=`none`,n.onload=()=>{e(n)},n.onerror=()=>{t(`Interest Group iframe loading failed`)},n.src=`https://gpsb-reims.criteo.com/paapi/join_ig?advertiser_id=500002_500329&ig_name=r6NnpiEx`,document.body.appendChild(n)}catch(e){t(e)}})}};ob=w([D(`CriteoBidder`),x(),N(0,b(J)),N(1,b(ab)),N(2,b(P)),N(3,b(gp)),N(4,b(mp))],ob);let sb={applyToAllBids:{retrieveFromFile:[`options`],labels:[`highHVP`]},placementsLocation:{_default:{bids:[]},below_post:{bids:[{params:{siteId:1285424,creativeType:`NativeX`,publisherNameIdentifier:`Raptive Prebid Standard`,options:{startCompact:!1,dwellExpand:!1}},match:{adTypes:[`expandableCatalogAdsDesktop`]},skip:{device:[`mobile`]}},{params:{siteId:1285424,creativeType:`NativeX`,publisherNameIdentifier:`Raptive Prebid Standard`,options:{startCompact:!1,dwellExpand:!1}},match:{adTypes:[`expandableCatalogAdsMobile`],device:[`mobile`]}},{params:{siteId:1285425,creativeType:`NativeX`,publisherNameIdentifier:`Raptive Prebid Compact`,options:{startCompact:!0,dwellExpand:!0}}}]}}},cb=class extends Ry{constructor(e){super(e,sb,G.Flipp)}};cb=w([x(),N(0,b(J))],cb);let lb=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Flipp)),C(this,`_options`,Vt().get(`test_flipp`)===`true`?{contentCode:`publisher-test`}:{}),C(this,`_adapterEnablement`,{client:{enabled:!1},server:{enabled:!0,name:G.Flipp}}),C(this,`_bidderCodes`,{primary:G.Flipp,supplemental:[G.FlippAY]}),C(this,`_mediatypeEnablement`,[Q.banner]),C(this,`_paramKeyMap`,{options:this._getOptionsParam.bind(this)}),C(this,`_requiredProperties`,new Map([[`default`,{client:[`siteId`,`creativeType`,`publisherNameIdentifier`],server:[`siteId`,`creativeType`,`publisherNameIdentifier`]}]]))}get bidderDisplayEnabled(){return this._config.site.filteredSensitiveCategories.includes(`alc`)}_getOptionsParam(){return{...this._options}}};lb=w([D(`FlippBidder`),x(),N(0,b(J)),N(1,b(cb))],lb);let ub={placementsLocation:{_default:{bids:[]},footer:{bids:[{params:{zone:`mwht9yif`},match:{device:[`mobile`]},skip:{adTypes:[`videoFootersMobile`]}},{params:{zone:`mwht9yif`},match:{device:[`desktop`,`tablet`]},skip:{adTypes:[`videoFootersDesktop`]}},{params:{zone:`g95nznmj`},match:{integration:`client`,device:[`mobile`],adTypes:[`animatedFooter`,`videoFootersMobile`]}},{params:{zone:`g95nznmj`},match:{integration:`client`,device:[`desktop`,`tablet`],adTypes:[`animatedFooter`,`videoFootersDesktop`]}},{params:{zone:`0yo5ozig`},match:{integration:`server`,adTypes:[`animatedFooter`,`videoFootersDesktop`]},skip:{device:[`mobile`]}},{params:{zone:`nedjcoh9`},match:{integration:`server`,device:[`mobile`],adTypes:[`animatedFooter`,`videoFootersMobile`]}},{params:{zone:`klpfgzhj`},match:{integration:`client`,device:[`mobile`],adTypes:[`animatedFooter`,`expandableFooter`,`videoFootersMobile`]}},{params:{zone:`klpfgzhj`},match:{integration:`client`,device:[`desktop`,`tablet`],adTypes:[`animatedFooter`,`expandableFooter`,`videoFootersDesktop`]}},{params:{zone:`wspaezyl`},match:{integration:`server`,device:[`mobile`],adTypes:[`animatedFooter`,`expandableFooter`,`videoFootersMobile`]}},{params:{zone:`wspaezyl`},match:{integration:`server`,device:[`desktop`,`tablet`],adTypes:[`animatedFooter`,`expandableFooter`,`videoFootersDesktop`]}}]},content:{applyToAllBids:{paramLookup:{slot:{map:{"1-client":913891,"1-client-interscroller":1178411,"2-client":913892,"3-client":913893,"4-client":913894,"5-client":913895,"6-client":913896,"7-client":913897,"8-client":913898,"9-client":913899}},zone:{map:{"client-*":`g95nznmj`,"server-desktop":`0yo5ozig`,"server-mobile":`nedjcoh9`,"client-mobile-interscroller":`yynpv9l1`,"server-mobile-interscroller":`yynpv9l1`}}}},bids:[{params:{zone:`{integration}-{device}`,slot:`{sequence}-{integration}`}},{params:{zone:`{integration}-mobile-interscroller`,slot:`{sequence}-{integration}-interscroller`},match:{sequence:[1],adTypes:[`interscroller`],device:[`mobile`],sizesAll:[[300,250]]}}]},interstitial:{bids:[{params:{zone:`g95nznmj`,slot:110743},match:{integration:`client`}},{params:{zone:`0yo5ozig`},match:{integration:`server`},skip:{device:[`mobile`]}},{params:{zone:`nedjcoh9`},match:{integration:`server`,device:[`mobile`]}}]},video_collapse_autoplay_soundoff:{bids:[{params:{video:`glpmwixo`},match:{integration:`client`}},{params:{video:`glpmwixo`,zone:`0yo5ozig`},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{video:`5zl85htf`},match:{integration:`client`}},{params:{video:`5zl85htf`,zone:`nedjcoh9`},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{video:`5zl85htf`},match:{integration:`client`}},{params:{video:`5zl85htf`,zone:`nedjcoh9`},match:{integration:`server`}}]}}},db=class extends Ry{constructor(e){super(e,ub,G.GumGum),C(this,`_videoCreativeIds`,[[`138330842944`,G.GumGum],[`138330432527`,G.GumGum],[`138330466869`,G.GumGum],[`138330842389`,G.GumGum],[`138330842452`,G.GumGum],[`138330432530`,G.GumGum],[`138330432548`,G.GumGum],[`138330432551`,G.GumGum],[`138330466908`,G.GumGum],[`138330842464`,G.GumGum],[`138330842470`,G.GumGum],[`138330466872`,G.GumGum],[`138330842458`,G.GumGum],[`138330842461`,G.GumGum],[`138330842467`,G.GumGum],[`138330842455`,G.GumGum]])}};db=w([x(),N(0,b(J))],db);let fb=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.GumGum)),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.GumGum},server:{enabled:!0,name:G.GumGum}}),C(this,`_bidderCodes`,{primary:G.GumGum,supplemental:[G.GumGumAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`zone`],server:[`zone`]}],[`instream`,{client:[`video`],server:[`video`]}]]))}};fb=w([D(`GumGumBidder`),x(),N(0,b(J)),N(1,b(db))],fb);let pb={placementsLocation:{_default:{bids:[]},below_post:{applyOptionsToAllBids:[{paramLookup:{id:{map:{"728x90-*":`1_1`,"300x250-*":`1_2`}},siteId:{map:{client:`1284140`,server:`1284171`}}}}],bids:[{params:{siteId:`{integration}`,id:`728x90-{sequence}`,size:[728,90]},match:{sizesAll:[[728,90]],integration:`client`,mediaTypesAll:[`banner`]}},{params:{siteId:`{integration}`,id:`300x250-{sequence}`,size:[300,250]},match:{sizesAll:[[300,250]],integration:`client`,mediaTypesAll:[`banner`]}},{params:{siteId:`{integration}`},match:{sizesAll:[[300,250],[728,90]],mediaTypesAll:[`banner`],integration:`server`}}]},content:{applyOptionsToAllBids:[{params:{video:{}},match:{sequence:[1],mediaTypesAny:[`outstream`]}},{paramLookup:{size:{map:{"banner-728x250":[728,250],"banner-728x90":[728,90],"banner-300x250":[300,250],"banner-320x480":[320,480],"banner-320x50":[320,50],"banner-320x100":[320,100],"banner-300x50":[300,50],mobile:[320,480],"*":[728,410]}}},match:{integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{paramLookup:{id:{map:{"728x90-1":`3_1`,"300x250-1":`3_2`,"320x480-1":`3_2`,"320x50-1":`3_4`,"320x100-1":`3_5`,"300x50-1":`3_6`,"728x90-2":`4_1`,"300x250-2":`4_2`,"320x480-2":`4_2`,"320x50-2":`4_4`,"320x100-2":`4_5`,"300x50-2":`4_6`,"300x250-3":`5_1`,"320x50-3":`5_2`,"320x100-3":`5_3`,"300x50-3":`5_4`,"300x250-4":`6_1`,"320x50-4":`6_2`,"320x100-4":`6_3`,"300x50-4":`6_4`,"300x250-5":`7_1`,"320x50-5":`7_2`,"320x100-5":`7_3`,"300x50-5":`7_4`,"300x250-6":`8_1`,"320x50-6":`8_2`,"320x100-6":`8_3`,"300x50-6":`8_4`,"300x250-7":`9_1`,"320x50-7":`9_2`,"300x50-7":`9_3`,"300x250-8":`10_1`,"320x50-8":`10_2`,"300x50-8":`10_3`,"300x250-*":`11_1`,"320x50-*":`11_2`,"300x50-*":`11_3`}},siteId:{map:{"banner-client-1":`1284142`,"banner-server-1":`1284173`,"banner-client-2":`1284143`,"banner-server-2":`1284174`,"banner-client-3":`1284144`,"banner-server-3":`1284175`,"banner-client-4":`1284145`,"banner-server-4":`1284176`,"banner-client-5":`1284146`,"banner-server-5":`1284177`,"banner-client-6":`1284147`,"banner-server-6":`1284178`,"banner-client-7":`1284148`,"banner-server-7":`1284179`,"banner-client-8":`1284149`,"banner-server-8":`1284180`,"banner-client-9":`1284150`,"banner-server-9":`1284181`,"banner-client-*":`1284141`,"banner-server-*":`1284172`}}}}],bids:[{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{mediaTypesAny:[`native`],sequenceMax:2,exp:{ixnt:`ec3`}}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,size:`{mediatype}-728x250`},match:{sequence:[1],sizesAll:[[728,250]],integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,size:`{mediatype}-728x250`},match:{sizesAll:[[728,250]],integration:`client`,mediaTypesAny:[`banner`]},skip:{sequence:[1]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`728x90-{sequence}`,size:`{mediatype}-728x90`},match:{sequence:[1,2],sizesAll:[[728,90]],integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x250-{sequence}`,size:`{mediatype}-300x250`},match:{sequence:[1],sizesAll:[[300,250]],integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x250-{sequence}`,size:`{mediatype}-300x250`},match:{sizesAll:[[300,250]],integration:`client`,mediaTypesAny:[`banner`]},skip:{sequence:[1]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`320x50-{sequence}`,size:`{mediatype}-320x50`},match:{sequence:[1],sizesAll:[[320,50]],integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`320x50-{sequence}`,size:`{mediatype}-320x50`},match:{sizesAll:[[320,50]],integration:`client`,mediaTypesAny:[`banner`]},skip:{sequence:[1]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`320x100-{sequence}`,size:`{mediatype}-320x100`},match:{sequence:[1],sizesAll:[[320,100]],integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`320x100-{sequence}`,size:`{mediatype}-320x100`},match:{sequenceMax:6,sizesAll:[[320,100]],integration:`client`,mediaTypesAny:[`banner`]},skip:{sequence:[1]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x50-{sequence}`,size:`{mediatype}-300x50`},match:{sequence:[1],sizesAll:[[300,50]],integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x50-{sequence}`,size:`{mediatype}-300x50`},match:{sizesAll:[[300,50]],integration:`client`,mediaTypesAny:[`banner`]},skip:{sequence:[1]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{sequence:[1,2],sizesAny:[[728,90],[300,250],[320,50],[320,100],[300,50],[728,250]],integration:`server`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{sequenceMin:3,sequenceMax:6,sizesAny:[[300,250],[320,50],[320,100],[300,50],[728,250]],integration:`server`,mediaTypesAny:[`banner`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{sequenceMin:7,sizesAny:[[300,250],[320,50],[300,50],[728,250]],integration:`server`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,size:`{device}`},match:{sequence:[1],integration:`client`,largeFormat:!0,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,size:`{device}`},match:{sequence:[2],integration:`client`,largeFormat:!0,mediaTypesAny:[`banner`,`outstream`]}}]},footer:{applyOptionsToAllBids:[{paramLookup:{id:{map:{"728x90":`12_1`,"970x90":`12_2`,"320x50":`12_3`,"320x100":`12_4`,"300x50":`12_5`}},siteId:{map:{client:`1284151`,server:`1284182`}}}}],bids:[{params:{siteId:`{integration}`,id:`728x90`,size:[728,90]},match:{sizesAll:[[728,90]],integration:`client`}},{params:{siteId:`{integration}`,id:`970x90`,size:[970,90]},match:{sizesAll:[[970,90]],integration:`client`}},{params:{siteId:`{integration}`,id:`320x50`,size:[320,50]},match:{sizesAll:[[320,50]],integration:`client`}},{params:{siteId:`{integration}`,id:`320x100`,size:[320,100]},match:{sizesAll:[[320,100]],integration:`client`}},{params:{siteId:`{integration}`,id:`300x50`,size:[300,50]},match:{sizesAll:[[300,50]],integration:`client`}},{params:{siteId:`{integration}`},match:{sequence:[1],sizesAny:[[728,90],[970,90],[320,50],[320,100],[300,50]],integration:`server`}}]},header:{applyOptionsToAllBids:[{paramLookup:{id:{map:{"728x90":`15_1`,"970x90":`15_2`,"970x250":`15_3`,"320x50":`15_4`,"320x100":`15_5`,"300x50":`15_6`}},siteId:{map:{"*-client-1":`1284152`,"*-server-1":`1284183`,"*-client-2":`1284153`,"*-server-2":`1284184`}}}}],bids:[{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`728x90-{sequence}`,size:[728,90]},match:{sizesAll:[[728,90]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`970x90-{sequence}`,size:[970,90]},match:{sizesAll:[[970,90]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`970x250-{sequence}`,size:[970,250]},match:{sizesAll:[[970,250]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`320x50-{sequence}`,size:[320,50]},match:{sizesAll:[[320,50]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`320x100-{sequence}`,size:[320,100]},match:{sizesAll:[[320,100]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x50-{sequence}`,size:[300,50]},match:{sizesAll:[[300,50]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{sizesAny:[[728,90],[970,90],[970,250],[320,50],[320,100],[300,50]],integration:`server`}}]},recipe:{applyOptionsToAllBids:[{paramLookup:{id:{map:{"300x250-1":`3_2`,"320x50-1":`3_4`,"320x100-1":`3_5`,"300x50-1":`3_6`,"300x250-2":`3_2`,"320x50-2":`3_4`,"320x100-2":`3_5`,"300x50-2":`3_6`,"300x250-3":`3_2`,"320x50-3":`3_4`,"320x100-3":`3_5`,"300x50-3":`3_6`,"300x250-4":`3_2`,"320x50-4":`3_4`,"320x100-4":`3_5`,"300x50-4":`3_6`}},siteId:{map:{"*-client-1":`1284154`,"banner-server-1":`1284185`,"banner-client-2":`1284155`,"banner-server-2":`1284186`,"banner-client-3":`1284156`,"banner-server-3":`1284187`,"banner-client-4":`1284157`,"banner-server-4":`1284188`,"banner-client-5":`1284158`,"banner-server-5":`1284189`}}}}],bids:[{params:{siteId:`{mediatype}-{integration}-{placementMapSequence}`,id:`300x250-{placementMapSequence}`,size:[300,250]},match:{sizesAll:[[300,250]],integration:`client`,mediaTypesAll:[`banner`]}},{params:{siteId:`{mediatype}-{integration}-{placementMapSequence}`,id:`320x50-{placementMapSequence}`,size:[320,50]},match:{sizesAll:[[320,50]],integration:`client`,mediaTypesAll:[`banner`]}},{params:{siteId:`{mediatype}-{integration}-{placementMapSequence}`,id:`320x100-{placementMapSequence}`,size:[320,100]},match:{sizesAll:[[320,100]],integration:`client`,mediaTypesAll:[`banner`]}},{params:{siteId:`{mediatype}-{integration}-{placementMapSequence}`,id:`300x50-{placementMapSequence}`,size:[300,50]},match:{sizesAll:[[300,50]],integration:`client`,mediaTypesAll:[`banner`]}},{params:{siteId:`{mediatype}-{integration}-{placementMapSequence}`},match:{sizesAny:[[300,250],[320,50],[320,100],[300,50]],integration:`server`,mediaTypesAll:[`banner`]}}]},sidebar:{applyOptionsToAllBids:[{paramLookup:{id:{map:{"300x250-1":`27_1`,"300x600-1":`27_2`,"300x1050-1":`27_3`,"160x600-1":`27_4`,"300x50-1":`27_5`,"300x250-2":`28_1`,"300x600-2":`28_2`,"160x600-2":`28_2`,"300x50-2":`28_4`,"300x250-3":`29_1`,"300x600-3":`29_2`,"160x600-3":`29_3`,"300x50-3":`29_4`,"300x250-4":`30_1`,"300x600-4":`30_2`,"160x600-4":`30_3`,"300x50-4":`30_4`,"300x250-5":`31_1`,"300x600-5":`31_2`,"160x600-5":`31_3`,"300x50-5":`31_4`,"300x250-*":`35_1`,"300x600-*":`35_2`,"300x1050-*":`35_3`,"160x600-*":`35_4`,"300x50-*":`35_5`}},siteId:{map:{"banner-client-1":`1284159`,"banner-server-1":`1284190`,"banner-client-2":`1284160`,"banner-server-2":`1284191`,"banner-client-3":`1284161`,"banner-server-3":`1284192`,"banner-client-4":`1284162`,"banner-server-4":`1284193`,"banner-client-5":`1284163`,"banner-server-5":`1284194`,"banner-client-*":`1284164`,"banner-server-*":`1284195`}}}}],bids:[{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x250-{sequence}`,size:[300,250]},match:{sizesAll:[[300,250]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x600-{sequence}`,size:[300,600]},match:{sizesAll:[[300,600]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x1050-{sequence}`,size:[300,1050]},match:{sizesAll:[[300,1050]],integration:`client`},skip:{sequence:[2,3,4,5]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`160x600-{sequence}`,size:[160,600]},match:{sequence:[1],sizesAll:[[160,600]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x50-{sequence}`,size:[300,50]},match:{sequence:[1],sizesAll:[[300,50]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{sizesAny:[[300,1050]],integration:`server`},skip:{sequence:[2,3,4,5]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{sizesAny:[[300,250],[300,600],[160,600],[300,50]],integration:`server`}}]},video_stickyoutstream:{bids:[{params:{siteId:`1284165`,video:{}},match:{integration:`client`}},{params:{siteId:`1284196`,video:{}},match:{integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{retrieveFromFile:[`video`],params:{siteId:`1284167`,id:`Video_Collapse_Autoplay_SoundOff`,size:[640,360]},match:{sizesAll:[[640,360]],integration:`client`}},{retrieveFromFile:[`video`],params:{siteId:`1284198`,size:[640,360]},match:{sizesAll:[[640,360]],integration:`server`}}]},video_coll_soff_smartphone:{bids:[{retrieveFromFile:[`video`],params:{siteId:`1284166`,id:`Video_Coll_SOff_Smartphone`,size:[400,225]},match:{sizesAll:[[400,225]],integration:`client`}},{retrieveFromFile:[`video`],params:{siteId:`1284197`,size:[400,225]},match:{sizesAll:[[400,225]],integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{retrieveFromFile:[`video`],params:{siteId:`1284168`,id:`Video_In-Post_ClicktoPlay_SoundOn`},match:{integration:`client`}},{retrieveFromFile:[`video`],params:{siteId:`1284199`,size:[640,360]},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{retrieveFromFile:[`video`],params:{siteId:`1284169`,id:`Video_Individual_Autoplay_SOff`},match:{integration:`client`}},{retrieveFromFile:[`video`],params:{siteId:`1284200`},match:{integration:`server`}}]}}},mb={placementsLocation:{_default:{bids:[]},below_post:{applyOptionsToAllBids:[{paramLookup:{id:{map:{"728x90-*":`1_1`,"300x250-*":`1_2`}},siteId:{map:{client:`185759`,server:`1170743`}}}}],bids:[{params:{siteId:`{integration}`,id:`728x90-{sequence}`,size:[728,90]},match:{sizesAll:[[728,90]],integration:`client`,mediaTypesAll:[`banner`]}},{params:{siteId:`{integration}`,id:`300x250-{sequence}`,size:[300,250]},match:{sizesAll:[[300,250]],integration:`client`,mediaTypesAll:[`banner`]}},{params:{siteId:`{integration}`},match:{sizesAll:[[300,250],[728,90]],mediaTypesAll:[`banner`],integration:`server`}}]},content:{applyOptionsToAllBids:[{params:{video:{}},match:{sequence:[1],mediaTypesAny:[`outstream`]}},{paramLookup:{size:{map:{"banner-728x250":[728,250],"banner-728x90":[728,90],"banner-300x250":[300,250],"banner-320x480":[320,480],"banner-320x50":[320,50],"banner-320x100":[320,100],"banner-300x50":[300,50],mobile:[320,480],"*":[728,410]}}},match:{integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{paramLookup:{id:{map:{"728x90-1":`3_1`,"300x250-1":`3_2`,"320x480-1":`3_2`,"320x50-1":`3_4`,"320x100-1":`3_5`,"300x50-1":`3_6`,"728x90-2":`4_1`,"300x250-2":`4_2`,"320x480-2":`4_2`,"320x50-2":`4_4`,"320x100-2":`4_5`,"300x50-2":`4_6`,"300x250-3":`5_1`,"320x50-3":`5_2`,"320x100-3":`5_3`,"300x50-3":`5_4`,"300x250-4":`6_1`,"320x50-4":`6_2`,"320x100-4":`6_3`,"300x50-4":`6_4`,"300x250-5":`7_1`,"320x50-5":`7_2`,"320x100-5":`7_3`,"300x50-5":`7_4`,"300x250-6":`8_1`,"320x50-6":`8_2`,"320x100-6":`8_3`,"300x50-6":`8_4`,"300x250-7":`9_1`,"320x50-7":`9_2`,"300x50-7":`9_3`,"300x250-8":`10_1`,"320x50-8":`10_2`,"300x50-8":`10_3`,"300x250-*":`11_1`,"320x50-*":`11_2`,"300x50-*":`11_3`}},siteId:{map:{"banner-client-1":`185761`,"banner-server-1":`1170753`,"banner-client-2":`185762`,"banner-server-2":`1170757`,"banner-client-3":`185763`,"banner-server-3":`1170760`,"banner-client-4":`185764`,"banner-server-4":`1170761`,"banner-client-5":`185765`,"banner-server-5":`1170762`,"banner-client-6":`185766`,"banner-server-6":`1170763`,"banner-client-7":`185767`,"banner-server-7":`1170764`,"banner-client-8":`185768`,"banner-server-8":`1170744`,"banner-client-*":`185769`,"banner-server-*":`1170745`,"native-client-*":`943837`,"native-server-*":`1170742`,"outstream-client-*":`820298`,"outstream-server-*":`1170771`}}}}],bids:[{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{mediaTypesAny:[`native`]},skip:{exp:{ixnt:`ec3`}}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{mediaTypesAny:[`native`],sequenceMax:2,exp:{ixnt:`ec3`}}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,size:`{mediatype}-728x250`},match:{sequence:[1],sizesAll:[[728,250]],integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,size:`{mediatype}-728x250`},match:{sizesAll:[[728,250]],integration:`client`,mediaTypesAny:[`banner`]},skip:{sequence:[1]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`728x90-{sequence}`,size:`{mediatype}-728x90`},match:{sequence:[1,2],sizesAll:[[728,90]],integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x250-{sequence}`,size:`{mediatype}-300x250`},match:{sequence:[1],sizesAll:[[300,250]],integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x250-{sequence}`,size:`{mediatype}-300x250`},match:{sizesAll:[[300,250]],integration:`client`,mediaTypesAny:[`banner`]},skip:{sequence:[1]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`320x50-{sequence}`,size:`{mediatype}-320x50`},match:{sequence:[1],sizesAll:[[320,50]],integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`320x50-{sequence}`,size:`{mediatype}-320x50`},match:{sizesAll:[[320,50]],integration:`client`,mediaTypesAny:[`banner`]},skip:{sequence:[1]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`320x100-{sequence}`,size:`{mediatype}-320x100`},match:{sequence:[1],sizesAll:[[320,100]],integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`320x100-{sequence}`,size:`{mediatype}-320x100`},match:{sequenceMax:6,sizesAll:[[320,100]],integration:`client`,mediaTypesAny:[`banner`]},skip:{sequence:[1]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x50-{sequence}`,size:`{mediatype}-300x50`},match:{sequence:[1],sizesAll:[[300,50]],integration:`client`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x50-{sequence}`,size:`{mediatype}-300x50`},match:{sizesAll:[[300,50]],integration:`client`,mediaTypesAny:[`banner`]},skip:{sequence:[1]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{sequence:[1,2],sizesAny:[[728,90],[300,250],[320,50],[320,100],[300,50],[728,250]],integration:`server`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{sequenceMin:3,sequenceMax:6,sizesAny:[[300,250],[320,50],[320,100],[300,50],[728,250]],integration:`server`,mediaTypesAny:[`banner`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{sequenceMin:7,sizesAny:[[300,250],[320,50],[300,50],[728,250]],integration:`server`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,size:`{device}`},match:{sequence:[1],integration:`client`,largeFormat:!0,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,size:`{device}`},match:{sequence:[2],integration:`client`,largeFormat:!0,mediaTypesAny:[`banner`,`outstream`]}}]},footer:{applyOptionsToAllBids:[{paramLookup:{id:{map:{"728x90":`12_1`,"970x90":`12_2`,"320x50":`12_3`,"320x100":`12_4`,"300x50":`12_5`}},siteId:{map:{client:`185770`,server:`1170746`}}}}],bids:[{params:{siteId:`{integration}`,id:`728x90`,size:[728,90]},match:{sizesAll:[[728,90]],integration:`client`}},{params:{siteId:`{integration}`,id:`970x90`,size:[970,90]},match:{sizesAll:[[970,90]],integration:`client`}},{params:{siteId:`{integration}`,id:`320x50`,size:[320,50]},match:{sizesAll:[[320,50]],integration:`client`}},{params:{siteId:`{integration}`,id:`320x100`,size:[320,100]},match:{sizesAll:[[320,100]],integration:`client`}},{params:{siteId:`{integration}`,id:`300x50`,size:[300,50]},match:{sizesAll:[[300,50]],integration:`client`}},{params:{siteId:`{integration}`},match:{sequence:[1],sizesAny:[[728,90],[970,90],[320,50],[320,100],[300,50]],integration:`server`}}]},header:{applyOptionsToAllBids:[{paramLookup:{id:{map:{"728x90":`15_1`,"970x90":`15_2`,"970x250":`15_3`,"320x50":`15_4`,"320x100":`15_5`,"300x50":`15_6`}},siteId:{map:{"*-client-1":`185774`,"*-server-1":`1170747`,"*-client-2":`1265870`,"*-server-2":`1265871`}}}}],bids:[{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`728x90-{sequence}`,size:[728,90]},match:{sizesAll:[[728,90]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`970x90-{sequence}`,size:[970,90]},match:{sizesAll:[[970,90]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`970x250-{sequence}`,size:[970,250]},match:{sizesAll:[[970,250]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`320x50-{sequence}`,size:[320,50]},match:{sizesAll:[[320,50]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`320x100-{sequence}`,size:[320,100]},match:{sizesAll:[[320,100]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x50-{sequence}`,size:[300,50]},match:{sizesAll:[[300,50]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{sizesAny:[[728,90],[970,90],[970,250],[320,50],[320,100],[300,50]],integration:`server`}}]},interstitial:{bids:[{params:{siteId:`631834`,id:`36_1`,size:[300,600]},match:{sizesAll:[[300,600]],integration:`client`}},{params:{siteId:`631834`,id:`36_2`,size:[336,280]},match:{sequence:[1],sizesAll:[[336,280]],integration:`client`}},{params:{siteId:`631834`,id:`36_3`,size:[320,480]},match:{sequence:[1],sizesAll:[[320,480]],integration:`client`}},{params:{siteId:`631834`,id:`36_4`,size:[300,250]},match:{sequence:[1],sizesAll:[[300,250]],integration:`client`}},{params:{siteId:`631834`,id:`36_5`,size:[320,50]},match:{sequence:[1],sizesAll:[[320,50]],integration:`client`}}]},recipe:{applyOptionsToAllBids:[{paramLookup:{id:{map:{"300x250-1":`3_2`,"320x50-1":`3_4`,"320x100-1":`3_5`,"300x50-1":`3_6`,"300x250-2":`3_2`,"320x50-2":`3_4`,"320x100-2":`3_5`,"300x50-2":`3_6`,"300x250-3":`3_2`,"320x50-3":`3_4`,"320x100-3":`3_5`,"300x50-3":`3_6`,"300x250-4":`3_2`,"320x50-4":`3_4`,"320x100-4":`3_5`,"300x50-4":`3_6`}},siteId:{map:{"*-client-1":`185776`,"banner-server-1":`1170748`,"banner-client-2":`185777`,"banner-server-2":`1170749`,"banner-client-3":`304909`,"banner-server-3":`1170758`,"banner-client-4":`371523`,"banner-server-4":`1170759`,"banner-client-5":`1265872`,"banner-server-5":`1265873`,"native-client-*":`1094729`,"native-server-*":`1170773`}}}}],bids:[{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{integration:`client`,mediaTypesAll:[`native`]},skip:{exp:{ixntr:`er3`}}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{integration:`client`,mediaTypesAll:[`native`],sequenceMax:2,exp:{ixntr:`er3`}}},{params:{siteId:`{mediatype}-{integration}-{placementMapSequence}`,id:`300x250-{placementMapSequence}`,size:[300,250]},match:{sizesAll:[[300,250]],integration:`client`,mediaTypesAll:[`banner`]}},{params:{siteId:`{mediatype}-{integration}-{placementMapSequence}`,id:`320x50-{placementMapSequence}`,size:[320,50]},match:{sizesAll:[[320,50]],integration:`client`,mediaTypesAll:[`banner`]}},{params:{siteId:`{mediatype}-{integration}-{placementMapSequence}`,id:`320x100-{placementMapSequence}`,size:[320,100]},match:{sizesAll:[[320,100]],integration:`client`,mediaTypesAll:[`banner`]}},{params:{siteId:`{mediatype}-{integration}-{placementMapSequence}`,id:`300x50-{placementMapSequence}`,size:[300,50]},match:{sizesAll:[[300,50]],integration:`client`,mediaTypesAll:[`banner`]}},{params:{siteId:`{mediatype}-{integration}-{placementMapSequence}`},match:{sizesAny:[[300,250],[320,50],[320,100],[300,50]],integration:`server`,mediaTypesAll:[`banner`]}}]},sidebar:{applyOptionsToAllBids:[{paramLookup:{id:{map:{"300x250-1":`27_1`,"300x600-1":`27_2`,"300x1050-1":`27_3`,"160x600-1":`27_4`,"300x50-1":`27_5`,"300x250-2":`28_1`,"300x600-2":`28_2`,"160x600-2":`28_2`,"300x50-2":`28_4`,"300x250-3":`29_1`,"300x600-3":`29_2`,"160x600-3":`29_3`,"300x50-3":`29_4`,"300x250-4":`30_1`,"300x600-4":`30_2`,"160x600-4":`30_3`,"300x50-4":`30_4`,"300x250-5":`31_1`,"300x600-5":`31_2`,"160x600-5":`31_3`,"300x50-5":`31_4`,"300x250-*":`35_1`,"300x600-*":`35_2`,"300x1050-*":`35_3`,"160x600-*":`35_4`,"300x50-*":`35_5`}},siteId:{map:{"banner-client-1":`185787`,"banner-server-1":`1170750`,"banner-client-2":`185788`,"banner-server-2":`1170751`,"banner-client-3":`185789`,"banner-server-3":`1170752`,"banner-client-4":`185790`,"banner-server-4":`1170754`,"banner-client-5":`185791`,"banner-server-5":`1170755`,"banner-client-*":`185795`,"banner-server-*":`1170756`}}}}],bids:[{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x250-{sequence}`,size:[300,250]},match:{sizesAll:[[300,250]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x600-{sequence}`,size:[300,600]},match:{sizesAll:[[300,600]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x1050-{sequence}`,size:[300,1050]},match:{sizesAll:[[300,1050]],integration:`client`},skip:{sequence:[2,3,4,5]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`160x600-{sequence}`,size:[160,600]},match:{sequence:[1],sizesAll:[[160,600]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`,id:`300x50-{sequence}`,size:[300,50]},match:{sequence:[1],sizesAll:[[300,50]],integration:`client`}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{sizesAny:[[300,1050]],integration:`server`},skip:{sequence:[2,3,4,5]}},{params:{siteId:`{mediatype}-{integration}-{sequence}`},match:{sizesAny:[[300,250],[300,600],[160,600],[300,50]],integration:`server`}}]},video_stickyoutstream:{bids:[{params:{siteId:`745167`,id:`48_1`,video:{}},match:{sizesAll:[[300,250]],integration:`client`}},{params:{siteId:`1170775`,video:{}},match:{sizesAll:[[300,250]],integration:`server`}},{params:{siteId:`745167`,id:`48_2`,video:{}},match:{sizesAll:[[300,50]],integration:`client`}},{params:{siteId:`1170775`,video:{}},match:{sizesAll:[[300,50]],integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{retrieveFromFile:[`video`],params:{siteId:`185255`,id:`Video_Collapse_Autoplay_SoundOff`,size:[640,360]},match:{sizesAll:[[640,360]],integration:`client`}},{retrieveFromFile:[`video`],params:{siteId:`1170770`,size:[640,360]},match:{sizesAll:[[640,360]],integration:`server`}}]},video_coll_soff_smartphone:{bids:[{retrieveFromFile:[`video`],params:{siteId:`321341`,id:`Video_Coll_SOff_Smartphone`,size:[400,225]},match:{sizesAll:[[400,225]],integration:`client`}},{retrieveFromFile:[`video`],params:{siteId:`1170765`,size:[400,225]},match:{sizesAll:[[400,225]],integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{retrieveFromFile:[`video`],params:{siteId:`385287`,id:`Video_In-Post_ClicktoPlay_SoundOn`,size:[640,360]},match:{integration:`client`},skip:{device:[`mobile`]}},{retrieveFromFile:[`video`],params:{siteId:`385288`,id:`Video_In-Post_ClicktoPlay_SoundOn`,size:[400,225]},match:{integration:`client`,device:[`mobile`]}},{retrieveFromFile:[`video`],params:{siteId:`1170768`,size:[640,360]},match:{integration:`server`},skip:{device:[`mobile`]}},{retrieveFromFile:[`video`],params:{siteId:`1170769`,size:[400,225]},match:{integration:`server`,device:[`mobile`]}}]},video_individual_autoplay_soff:{bids:[{retrieveFromFile:[`video`],params:{siteId:`385285`,id:`Video_Individual_Autoplay_SOff`,size:[640,360]},match:{integration:`client`},skip:{device:[`mobile`]}},{retrieveFromFile:[`video`],params:{siteId:`385286`,id:`Video_Individual_Autoplay_SOff`,size:[400,225]},match:{integration:`client`,device:[`mobile`]}},{retrieveFromFile:[`video`],params:{siteId:`1170766`,size:[640,360]},match:{integration:`server`},skip:{device:[`mobile`]}},{retrieveFromFile:[`video`],params:{siteId:`1170767`,size:[400,225]},match:{integration:`server`,device:[`mobile`]}}]}}},hb=class extends Ry{constructor(e){let t=Sp()?pb:mb;super(e,t,G.IndexExchange),C(this,`_videoCreativeIds`,[[`138323461889`,G.IndexExchange],[`138365130553`,G.IndexExchange],[`138323602520`,G.IndexExchange],[`138323911414`,G.IndexExchange],[`138365130307`,G.IndexExchange],[`138323648223`,G.IndexExchange],[`138323911009`,G.IndexExchange],[`138364758402`,G.IndexExchange],[`138323523396`,G.IndexExchange],[`138364703774`,G.IndexExchange],[`138323464748`,G.IndexExchange],[`138364758405`,G.IndexExchange],[`138323911423`,G.IndexExchange],[`138365130310`,G.IndexExchange],[`138323911420`,G.IndexExchange],[`138365130313`,G.IndexExchange],[`138323911411`,G.IndexExchange],[`138364758408`,G.IndexExchange],[`138323911012`,G.IndexExchange],[`138364703777`,G.IndexExchange],[`138323523390`,G.IndexExchange],[`138364758411`,G.IndexExchange],[`138323523387`,G.IndexExchange],[`138365130316`,G.IndexExchange],[`138323911426`,G.IndexExchange],[`138364758414`,G.IndexExchange],[`138323911408`,G.IndexExchange],[`138364703780`,G.IndexExchange],[`138323911405`,G.IndexExchange],[`138364703783`,G.IndexExchange],[`138323523393`,G.IndexExchange],[`138364758417`,G.IndexExchange],[`138323911417`,G.IndexExchange],[`138365130319`,G.IndexExchange],[`138500837694`,G.IndexExchangeServer],[`138500837883`,G.IndexExchangeServer],[`138501656857`,G.IndexExchangeServer],[`138501657097`,G.IndexExchangeServer],[`138501657115`,G.IndexExchangeServer],[`138501657118`,G.IndexExchangeServer],[`138501657121`,G.IndexExchangeServer],[`138501657124`,G.IndexExchangeServer]])}};hb=w([x(),N(0,b(J))],hb);let gb=class extends Ly{constructor(e,t,n,r){super(e,t),this._prebidMethods=n,this._context=r,C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.IndexExchange)),C(this,`gvlid`,10),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.IndexExchange},server:{enabled:!0,name:G.IndexExchange}}),C(this,`_bidderCodes`,{primary:G.IndexExchange,secondary:G.IndexExchangeServer,supplemental:[G.IndexExchangeAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.native,Q.outstream,Q.instream]),C(this,`_paramKeyMap`,{video:this._getVideoParam.bind(this)}),C(this,`_requiredProperties`,new Map([[`default`,{client:[`siteId`,`size`],server:[`siteId`]}],[`outstream`,{client:[`siteId`,`video`],server:[`siteId`,`video`]}],[`instream`,{client:[`siteId`,`video`],server:[`siteId`,`video`]}],[`native`,{client:[`siteId`],server:[`siteId`]}]])),C(this,`_device`,It()?`desktop`:`mobile`),C(this,`_hasLargeFormatsEnabled`,It()?this._config.adTypes.largeFormatsDesktop:this._config.adTypes.largeFormatsMobile)}init(){let e=rp(this._context.savedReferrer),t=this._config,n=t.site,r=[...n.verticals].filter(ki),i=n.filteredSensitiveCategories,a={PD:`${t.adOptions.pmp?``:`no`}${this._context.device}`,...r.length&&{Topic:r.join(`#Topic:`)},...i.length&&{Sens:i.join(`#Sens:`)},Source:cp(e),Browser:Nt(),vp:`0`};ap(a,this._prebidMethods),this._largeFormatSizes.length&&op(this._largeFormatSizes,this._prebidMethods)}get _largeFormatSizes(){return this._hasLargeFormatsEnabled?this._device===`desktop`?[[728,410]]:[[320,480]]:[]}_getVideoParam(e){let t=`id`in e?e.id:e.name,n={...this._config.video},r=n.playbackmethod?.get(t),i=r&&{playbackmethod:new Map([[3,[3]],[6,[2]]]).get(r[0])},a=n.mimeType,o=n.videoProtocols?.protocols;if(!o){let e=n.videoProtocols?`protocols is undefined`:`videoProtocols is undefined`;E.error(`IndexExchangeBidder`,`getVideoParams`,e)}return{api:n.apiValue,...a&&{mimes:a},...i,minduration:0,maxduration:30,...o&&{protocols:o},pos:n.position.id}}};gb=w([D(`IndexExchangeBidder`),x(),N(0,b(J)),N(1,b(hb)),N(2,b(P)),N(3,b(W))],gb);let _b={applyOptionsToAllBids:[{paramLookup:{placementId:{map:{"1-desktop-client":`_ikYd4ZMlOM`,"1-mobile-client":`_vhgPTrt1y3`,"2-desktop-client":`_gOocPZuM2R`,"2-mobile-client":`_gOocPZuM2R`,"3-desktop-client":`_uQwoNJEj93`,"3-mobile-client":`_oR43HBVWFM`,"4-desktop-client":`_ahpWiA3ThU`,"4-mobile-client":`_hmH49cKIcc`,"5-desktop-client":`_s2QfIqkDZD`,"5-mobile-client":`_s2QfIqkDZD`,"6-desktop-client":`_uxLCxmxGwi`,"6-mobile-client":`_uxLCxmxGwi`,"7-desktop-client":`_erhGQfk4lS`,"7-mobile-client":`_sXtWaME8In`,"8-desktop-client":`_uHMDw8PisK`,"8-mobile-client":`_raFPzXGaET`,"9-desktop-client":`_eNJkeZ8LaU`,"9-mobile-client":`_iS60HwX3By`}}}}],placementsLocation:{_default:{bids:[]},below_post:{bids:[{params:{placementId:`1-desktop-{integration}`},match:{sizesAny:[[300,250],[320,50]],mediaTypesAll:[`banner`]},skip:{device:[`mobile`],outstreamEnabled:!0}},{params:{placementId:`1-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`]},skip:{adTypes:[`interscroller`]}},{params:{placementId:`6-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],adTypes:[`interscroller`]}},{params:{placementId:`4-desktop-{integration}`},match:{sizesAny:[[300,250],[320,50]],outstreamEnabled:!0,mediaTypesAny:[`banner`,`outstream`]},skip:{device:[`mobile`]}},{params:{placementId:`4-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`outstream`]},skip:{adTypes:[`interscroller`]}},{params:{placementId:`5-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`outstream`],adTypes:[`interscroller`]}}]},content:{bids:[{params:{placementId:`1-desktop-{integration}`},match:{sizesAny:[[300,250],[320,50]],mediaTypesAll:[`banner`]},skip:{outstreamEnabled:!0,device:[`mobile`]}},{params:{placementId:`1-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],lazy:!1},skip:{sequence:[1]}},{params:{placementId:`1-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],lazy:!0},skip:{sequence:[1],adTypes:[`interscroller`]}},{params:{placementId:`1-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],sequence:[1]},skip:{adTypes:[`interscroller`]}},{params:{placementId:`6-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],adTypes:[`interscroller`],sequence:[1]}},{params:{placementId:`6-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],adTypes:[`interscroller`],lazy:!0},skip:{sequence:[1]}},{params:{placementId:`4-desktop-{integration}`},match:{sizesAny:[[300,250],[320,50]],outstreamEnabled:!0,mediaTypesAny:[`banner`,`outstream`]},skip:{device:[`mobile`]}},{params:{placementId:`4-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`outstream`]},skip:{sequence:[1]}},{params:{placementId:`4-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`outstream`],sequence:[1]},skip:{adTypes:[`interscroller`]}},{params:{placementId:`5-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`outstream`],adTypes:[`interscroller`],sequence:[1]}}]},footer:{bids:[{params:{placementId:`8-desktop-{integration}`},match:{sizesAny:[[320,50]]},skip:{device:[`mobile`]}},{params:{placementId:`8-mobile-{integration}`},match:{sizesAny:[[320,50]],device:[`mobile`],adTypes:[`animatedFooter`]},skip:{adTypes:[`expandableFooter`]}},{params:{placementId:`9-mobile-{integration}`},match:{sizesAny:[[320,50]],adTypes:[`expandableFooter`],device:[`mobile`]},skip:{adTypes:[`animatedFooter`]}},{params:{placementId:`7-mobile-{integration}`},match:{sizesAny:[[320,50]],adTypes:[`animatedFooter`,`expandableFooter`],device:[`mobile`]}}]},header:{bids:[{params:{placementId:`3-{device}-{integration}`},match:{sizesAny:[[728,90],[320,50]]}}]},recipe:{bids:[{params:{placementId:`1-desktop-{integration}`},match:{sizesAny:[[300,250],[320,50]],mediaTypesAll:[`banner`]},skip:{outstreamEnabled:!0,device:[`mobile`]}},{params:{placementId:`1-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`]},skip:{sequence:[1]}},{params:{placementId:`1-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],sequence:[1]},skip:{outstreamEnabled:!0}},{params:{placementId:`4-desktop-{integration}`},match:{sizesAny:[[300,250],[320,50]],outstreamEnabled:!0,mediaTypesAny:[`banner`,`outstream`]},skip:{device:[`mobile`]}},{params:{placementId:`4-mobile-{integration}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`outstream`]}}]},sidebar:{bids:[{params:{placementId:`1-{device}-{integration}`},match:{sizesAny:[[320,50]]},skip:{sizesAny:[[300,250],[300,600]]}},{params:{placementId:`2-{device}-{integration}`},match:{sizesAny:[[300,250],[300,600]],sizesAll:[[320,50]]}},{params:{placementId:`2-{device}-{integration}`},match:{sizesAny:[[300,250],[300,600]]},skip:{sizesAll:[[320,50]]}}]},video_collapse_autoplay_soundoff:{bids:[{params:{placementId:`10-desktop-{integration}`}}]},video_coll_soff_smartphone:{bids:[{params:{placementId:`11-mobile-{integration}`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{placementId:`12-{device}-{integration}`}}]},video_individual_autoplay_soff:{bids:[{params:{placementId:`13-{device}-{integration}`}}]}}},vb={"1-desktop-client-55bccc97303edab84afd77e2":`_hGHupdqGkR`,"1-desktop-client-541917f5a90318f9194874cf":`_tHHlCZoftJ`,"1-desktop-client-5daf495ed42c8605cfc74b0b":`_nVsVVfpDjN`,"1-desktop-client-55cb7e3b4bc841bd0c4ea577":`_iRqGIvmzUs`,"1-desktop-client-566aefa94856897050ee7303":`_nJqZtOhz0Q`,"1-desktop-client-*":`_hIMWOFYOkG`,"1-mobile-client-55bccc97303edab84afd77e2":`_hAsShWhZrX`,"1-mobile-client-541917f5a90318f9194874cf":`_ua1Af0iqiz`,"1-mobile-client-5daf495ed42c8605cfc74b0b":`_lI4BEQnUxI`,"1-mobile-client-55cb7e3b4bc841bd0c4ea577":`_wVm3mYeRml`,"1-mobile-client-566aefa94856897050ee7303":`_jvVwL9Fnun`,"1-mobile-client-*":`_htv2gWQDl4`,"2-desktop-client-55bccc97303edab84afd77e2":`_eD6ub757kw`,"2-desktop-client-541917f5a90318f9194874cf":`_fTyEwORc0V`,"2-desktop-client-5daf495ed42c8605cfc74b0b":`_d3ReNcjIse`,"2-desktop-client-55cb7e3b4bc841bd0c4ea577":`_eWSWxaV6Xx`,"2-desktop-client-566aefa94856897050ee7303":`_k0TLw869op`,"2-desktop-client-*":`_zxmQwsW17E`,"2-mobile-client-55bccc97303edab84afd77e2":`_eD6ub757kw`,"2-mobile-client-541917f5a90318f9194874cf":`_fTyEwORc0V`,"2-mobile-client-5daf495ed42c8605cfc74b0b":`_d3ReNcjIse`,"2-mobile-client-55cb7e3b4bc841bd0c4ea577":`_eWSWxaV6Xx`,"2-mobile-client-566aefa94856897050ee7303":`_k0TLw869op`,"2-mobile-client-*":`_zxmQwsW17E`,"3-desktop-client-55bccc97303edab84afd77e2":`_byCkELixPr`,"3-desktop-client-541917f5a90318f9194874cf":`_q3eCqZRhdS`,"3-desktop-client-5daf495ed42c8605cfc74b0b":`_ohqIx8jj4D`,"3-desktop-client-55cb7e3b4bc841bd0c4ea577":`_c8mUVLDZhB`,"3-desktop-client-566aefa94856897050ee7303":`_hYVLy7Ua4r`,"3-desktop-client-*":`_vzS4k9rMKu`,"3-mobile-client-55bccc97303edab84afd77e2":`_eIhMof7yqe`,"3-mobile-client-541917f5a90318f9194874cf":`_f1sGSYRKR3`,"3-mobile-client-5daf495ed42c8605cfc74b0b":`_qwYKU8Qi3G`,"3-mobile-client-55cb7e3b4bc841bd0c4ea577":`_whqXDci8eJ`,"3-mobile-client-566aefa94856897050ee7303":`_fp2BsPBxqI`,"3-mobile-client-*":`_bDJEtXJaCQ`,"4-desktop-client-55bccc97303edab84afd77e2":`_hqpdpEgPND`,"4-desktop-client-541917f5a90318f9194874cf":`_u8FSFfE7br`,"4-desktop-client-5daf495ed42c8605cfc74b0b":`_eEANDb6t2k`,"4-desktop-client-55cb7e3b4bc841bd0c4ea577":`_jaMt5ZbQgI`,"4-desktop-client-566aefa94856897050ee7303":`_rFrgDRiaQp`,"4-desktop-client-*":`_oCKJ4D9jsI`,"4-mobile-client-55bccc97303edab84afd77e2":`_finwQXYsdW`,"4-mobile-client-541917f5a90318f9194874cf":`_f8CIFfN0X9`,"4-mobile-client-5daf495ed42c8605cfc74b0b":`_agHXJxfEse`,"4-mobile-client-55cb7e3b4bc841bd0c4ea577":`_gSKH6aK6R4`,"4-mobile-client-566aefa94856897050ee7303":`_kIAYcCNe7d`,"4-mobile-client-*":`_rEapvpk6cZ`,"5-desktop-client-55bccc97303edab84afd77e2":`_hDLFEUkifu`,"5-desktop-client-541917f5a90318f9194874cf":`_hDLFEUkifu`,"5-desktop-client-5daf495ed42c8605cfc74b0b":`_hDLFEUkifu`,"5-desktop-client-55cb7e3b4bc841bd0c4ea577":`_hDLFEUkifu`,"5-desktop-client-566aefa94856897050ee7303":`_hDLFEUkifu`,"5-desktop-client-*":`_hDLFEUkifu`,"5-mobile-client-55bccc97303edab84afd77e2":`_ecQ46kpFH4`,"5-mobile-client-541917f5a90318f9194874cf":`_vOhgG6ZGQc`,"5-mobile-client-5daf495ed42c8605cfc74b0b":`_dZU1BlrcQe`,"5-mobile-client-55cb7e3b4bc841bd0c4ea577":`_zcdgs90WxP`,"5-mobile-client-566aefa94856897050ee7303":`_lLcxnJnUL0`,"5-mobile-client-*":`_hDLFEUkifu`,"6-desktop-client-55bccc97303edab84afd77e2":`_kEvPWSnblw`,"6-desktop-client-541917f5a90318f9194874cf":`_kEvPWSnblw`,"6-desktop-client-5daf495ed42c8605cfc74b0b":`_kEvPWSnblw`,"6-desktop-client-55cb7e3b4bc841bd0c4ea577":`_kEvPWSnblw`,"6-desktop-client-566aefa94856897050ee7303":`_kEvPWSnblw`,"6-desktop-client-*":`_kEvPWSnblw`,"6-mobile-client-55bccc97303edab84afd77e2":`_qy8FZvprXY`,"6-mobile-client-541917f5a90318f9194874cf":`_gsOgkDslR3`,"6-mobile-client-5daf495ed42c8605cfc74b0b":`_lGIFrPovZn`,"6-mobile-client-55cb7e3b4bc841bd0c4ea577":`_gn64RSSM57`,"6-mobile-client-566aefa94856897050ee7303":`_gD0lSine9a`,"6-mobile-client-*":`_kEvPWSnblw`,"7-desktop-client-55bccc97303edab84afd77e2":`_fTbDngf8Ub`,"7-desktop-client-541917f5a90318f9194874cf":`_zQGKRsK2OR`,"7-desktop-client-5daf495ed42c8605cfc74b0b":`_pXYJ80T5VN`,"7-desktop-client-55cb7e3b4bc841bd0c4ea577":`_gGD1SYrcGe`,"7-desktop-client-566aefa94856897050ee7303":`_mzspF6n1E6`,"7-desktop-client-*":`_yI7yqradgk`,"7-mobile-client-55bccc97303edab84afd77e2":`_v5SMFEjDrr`,"7-mobile-client-541917f5a90318f9194874cf":`_lX0mmLqXOH`,"7-mobile-client-5daf495ed42c8605cfc74b0b":`_lUXeoSZAf0`,"7-mobile-client-55cb7e3b4bc841bd0c4ea577":`_qQ8NEcQY1C`,"7-mobile-client-566aefa94856897050ee7303":`_kFc3pV1c0n`,"7-mobile-client-*":`_hRaLC9FgYn`,"8-desktop-client-55bccc97303edab84afd77e2":`_baT851TDWI`,"8-desktop-client-541917f5a90318f9194874cf":`_l4gY7l7f5a`,"8-desktop-client-5daf495ed42c8605cfc74b0b":`_d7BTJmSlpc`,"8-desktop-client-55cb7e3b4bc841bd0c4ea577":`_p950SHR2Xv`,"8-desktop-client-566aefa94856897050ee7303":`_lZNyxSw6Ss`,"8-desktop-client-*":`_fPM3feDxUE`,"8-mobile-client-55bccc97303edab84afd77e2":`_r4fIEDQTLY`,"8-mobile-client-541917f5a90318f9194874cf":`_rAF97HOGTF`,"8-mobile-client-5daf495ed42c8605cfc74b0b":`_mqFteTH9Rj`,"8-mobile-client-55cb7e3b4bc841bd0c4ea577":`_qs6lmj0Pbf`,"8-mobile-client-566aefa94856897050ee7303":`_maZsbF5qjH`,"8-mobile-client-*":`_iyznbek6ki`,"9-desktop-client-55bccc97303edab84afd77e2":`_paxUDMm9of`,"9-desktop-client-541917f5a90318f9194874cf":`_iGYXTwKJkq`,"9-desktop-client-5daf495ed42c8605cfc74b0b":`_gaEp6ub3Uz`,"9-desktop-client-55cb7e3b4bc841bd0c4ea577":`_p3pvAJLdvb`,"9-desktop-client-566aefa94856897050ee7303":`_x7OEkwJGD9`,"9-desktop-client-*":`_wtAZ5wepHr`,"9-mobile-client-55bccc97303edab84afd77e2":`_cxVgq7bff1`,"9-mobile-client-541917f5a90318f9194874cf":`_nhQCrEk0GT`,"9-mobile-client-5daf495ed42c8605cfc74b0b":`_yc0KcUV2Sb`,"9-mobile-client-55cb7e3b4bc841bd0c4ea577":`_vwzo4mlIdf`,"9-mobile-client-566aefa94856897050ee7303":`_vKGlgbERMK`,"9-mobile-client-*":`_g1dEyYpnCU`,"10-desktop-client-55bccc97303edab84afd77e2":`_bRbD9p9sZK`,"10-desktop-client-541917f5a90318f9194874cf":`_x8sgYI55G4`,"10-desktop-client-5daf495ed42c8605cfc74b0b":`_d4LW55Tz6Z`,"10-desktop-client-55cb7e3b4bc841bd0c4ea577":`_hhjZvYrxAc`,"10-desktop-client-566aefa94856897050ee7303":`_uEi7eMPnxq`,"10-desktop-client-*":`_kWJDXIuROl`,"11-mobile-client-55bccc97303edab84afd77e2":`_oqaQNDGjZ4`,"11-mobile-client-541917f5a90318f9194874cf":`_g47ukW03bo`,"11-mobile-client-5daf495ed42c8605cfc74b0b":`_ghA53Kjqrh`,"11-mobile-client-55cb7e3b4bc841bd0c4ea577":`_kp8W0sdhdE`,"11-mobile-client-566aefa94856897050ee7303":`_rsmG36HH8x`,"11-mobile-client-*":`_kUg4kKElHf`,"12-desktop-client-55bccc97303edab84afd77e2":`_iSNq3tefXu`,"12-desktop-client-541917f5a90318f9194874cf":`_lCb7dfvNjq`,"12-desktop-client-5daf495ed42c8605cfc74b0b":`_tyYmCc4eCT`,"12-desktop-client-55cb7e3b4bc841bd0c4ea577":`_bB1dCkFu32`,"12-desktop-client-566aefa94856897050ee7303":`_g9cki8b6xC`,"12-desktop-client-*":`_fR1aawM8Zo`,"12-mobile-client-55bccc97303edab84afd77e2":`_tBeS7Z4US3`,"12-mobile-client-541917f5a90318f9194874cf":`_lsGboL0uST`,"12-mobile-client-5daf495ed42c8605cfc74b0b":`_qaJQvOMII9`,"12-mobile-client-55cb7e3b4bc841bd0c4ea577":`_wqAAlYzlij`,"12-mobile-client-566aefa94856897050ee7303":`_zn7ZLevuPn`,"12-mobile-client-*":`_upDLM7q4jV`,"13-desktop-client-55bccc97303edab84afd77e2":`_cSmQNecEfo`,"13-desktop-client-541917f5a90318f9194874cf":`_atcYOwsv5N`,"13-desktop-client-5daf495ed42c8605cfc74b0b":`_qdsWDke6KD`,"13-desktop-client-55cb7e3b4bc841bd0c4ea577":`_eZmQSTrIMN`,"13-desktop-client-566aefa94856897050ee7303":`_gVAQIoM4cp`,"13-desktop-client-*":`_nmpcOw19lD`,"13-mobile-client-55bccc97303edab84afd77e2":`_vWJq7i6Hsr`,"13-mobile-client-541917f5a90318f9194874cf":`_mx5iL6Bejc`,"13-mobile-client-5daf495ed42c8605cfc74b0b":`_uFi5ptAWHm`,"13-mobile-client-55cb7e3b4bc841bd0c4ea577":`_oUwmSg3ct7`,"13-mobile-client-566aefa94856897050ee7303":`_akUrKNgwMu`,"13-mobile-client-*":`_fyab3CymN5`,"14-desktop-client-*":`_si3rwOeVnq`,"14-mobile-client-*":`_si3rwOeVnq`,"15-mobile-client-*":`_ei8YmSTk3u`,"15-desktop-client-*":`_pOO4HXySR6`},yb={applyOptionsToAllBids:[{paramLookup:{adSlotID:{map:{"1-desktop-server-55bccc97303edab84afd77e2":`_bNu9DxaovG`,"1-desktop-server-541917f5a90318f9194874cf":`_zOvUvvugIj`,"1-desktop-server-5daf495ed42c8605cfc74b0b":`_uo8nEFxOVu`,"1-desktop-server-55cb7e3b4bc841bd0c4ea577":`_yaaHKyz3Zk`,"1-desktop-server-566aefa94856897050ee7303":`_yC15vgTB1T`,"1-desktop-server-*":`_p9dR36E2p7`,"1-mobile-server-55bccc97303edab84afd77e2":`_bNu9DxaovG`,"1-mobile-server-541917f5a90318f9194874cf":`_yiSiyTNTr9`,"1-mobile-server-5daf495ed42c8605cfc74b0b":`_d2hBOhJhxF`,"1-mobile-server-55cb7e3b4bc841bd0c4ea577":`_fK6uPhLCLl`,"1-mobile-server-566aefa94856897050ee7303":`_dzb8opas5y`,"1-mobile-server-*":`_fc3We7MSf8`,"2-desktop-server-55bccc97303edab84afd77e2":`_hXKlqSHoHB`,"2-desktop-server-541917f5a90318f9194874cf":`_gvad3bdvqr`,"2-desktop-server-5daf495ed42c8605cfc74b0b":`_r5n7qvMsMJ`,"2-desktop-server-55cb7e3b4bc841bd0c4ea577":`_kvd1znrrGJ`,"2-desktop-server-566aefa94856897050ee7303":`_lrQyIIv5M6`,"2-desktop-server-*":`_npLCsRl0pb`,"2-mobile-server-55bccc97303edab84afd77e2":`_hXKlqSHoHB`,"2-mobile-server-541917f5a90318f9194874cf":`_gvad3bdvqr`,"2-mobile-server-5daf495ed42c8605cfc74b0b":`_r5n7qvMsMJ`,"2-mobile-server-55cb7e3b4bc841bd0c4ea577":`_kvd1znrrGJ`,"2-mobile-server-566aefa94856897050ee7303":`_lrQyIIv5M6`,"2-mobile-server-*":`_npLCsRl0pb`,"3-desktop-server-55bccc97303edab84afd77e2":`_c0YtPZCFAN`,"3-desktop-server-541917f5a90318f9194874cf":`_wwAn0mcH6d`,"3-desktop-server-5daf495ed42c8605cfc74b0b":`_go3v3cJHBo`,"3-desktop-server-55cb7e3b4bc841bd0c4ea577":`_ry2nukXJCM`,"3-desktop-server-566aefa94856897050ee7303":`_e1zarT1nQu`,"3-desktop-server-*":`_uBJBQkzM4x`,"3-mobile-server-55bccc97303edab84afd77e2":`_lCC4Vz5HVq`,"3-mobile-server-541917f5a90318f9194874cf":`_d6K4oqtod2`,"3-mobile-server-5daf495ed42c8605cfc74b0b":`_ycHhS8LeQg`,"3-mobile-server-55cb7e3b4bc841bd0c4ea577":`_a4F7BDxYvO`,"3-mobile-server-566aefa94856897050ee7303":`_jHYRZMA3Rv`,"3-mobile-server-*":`_mTkU31vSyD`,"4-desktop-server-55bccc97303edab84afd77e2":`_hY1xJfGGVe`,"4-desktop-server-541917f5a90318f9194874cf":`_s5QXHlZsTW`,"4-desktop-server-5daf495ed42c8605cfc74b0b":`_zhrJRRWVYf`,"4-desktop-server-55cb7e3b4bc841bd0c4ea577":`_nn2s0plngX`,"4-desktop-server-566aefa94856897050ee7303":`_cKmNoetgxX`,"4-desktop-server-*":`_pJRjrqANDE`,"4-mobile-server-55bccc97303edab84afd77e2":`_aMXALPX3fS`,"4-mobile-server-541917f5a90318f9194874cf":`_ijhi0w8YvT`,"4-mobile-server-5daf495ed42c8605cfc74b0b":`_l2FGd0utDq`,"4-mobile-server-55cb7e3b4bc841bd0c4ea577":`_ePFeBkTZqT`,"4-mobile-server-566aefa94856897050ee7303":`_wUz9lluZW9`,"4-mobile-server-*":`_d1ofpEpOuE`,"5-desktop-server-55bccc97303edab84afd77e2":`_hDLFEUkifu`,"5-desktop-server-541917f5a90318f9194874cf":`_hDLFEUkifu`,"5-desktop-server-5daf495ed42c8605cfc74b0b":`_hDLFEUkifu`,"5-desktop-server-55cb7e3b4bc841bd0c4ea577":`_hDLFEUkifu`,"5-desktop-server-566aefa94856897050ee7303":`_hDLFEUkifu`,"5-desktop-server-*":`_hDLFEUkifu`,"5-mobile-server-55bccc97303edab84afd77e2":`_cRzdV4tRUN`,"5-mobile-server-541917f5a90318f9194874cf":`_oBErk6NgT9`,"5-mobile-server-5daf495ed42c8605cfc74b0b":`_aGjeC3sjY2`,"5-mobile-server-55cb7e3b4bc841bd0c4ea577":`_sRHWp1P95W`,"5-mobile-server-566aefa94856897050ee7303":`_mKff6SG1V4`,"5-mobile-server-*":`_d4LMbFjRkk`,"6-desktop-server-55bccc97303edab84afd77e2":`_kEvPWSnblw`,"6-desktop-server-541917f5a90318f9194874cf":`_kEvPWSnblw`,"6-desktop-server-5daf495ed42c8605cfc74b0b":`_kEvPWSnblw`,"6-desktop-server-55cb7e3b4bc841bd0c4ea577":`_kEvPWSnblw`,"6-desktop-server-566aefa94856897050ee7303":`_kEvPWSnblw`,"6-desktop-server-*":`_kEvPWSnblw`,"6-mobile-server-55bccc97303edab84afd77e2":`_aYXzmplV9F`,"6-mobile-server-541917f5a90318f9194874cf":`_u5EkrC5vYV`,"6-mobile-server-5daf495ed42c8605cfc74b0b":`_f4bL87KId1`,"6-mobile-server-55cb7e3b4bc841bd0c4ea577":`_yDuCGfXmql`,"6-mobile-server-566aefa94856897050ee7303":`_lx9tkSimU2`,"6-mobile-server-*":`_jiqa71nZQy`,"7-desktop-server-55bccc97303edab84afd77e2":`_rzRzo7jEiB`,"7-desktop-server-541917f5a90318f9194874cf":`_pBJnthmHgl`,"7-desktop-server-5daf495ed42c8605cfc74b0b":`_ndFYWLoiBo`,"7-desktop-server-55cb7e3b4bc841bd0c4ea577":`_yG4Q6pfCcA`,"7-desktop-server-566aefa94856897050ee7303":`_oFaxWSuc5h`,"7-desktop-server-*":`_cw6zRI7FoH`,"7-mobile-server-55bccc97303edab84afd77e2":`_jGV537FxMJ`,"7-mobile-server-541917f5a90318f9194874cf":`_qH1l1kyPi3`,"7-mobile-server-5daf495ed42c8605cfc74b0b":`_jxiRracsTG`,"7-mobile-server-55cb7e3b4bc841bd0c4ea577":`_dbjFQeqonB`,"7-mobile-server-566aefa94856897050ee7303":`_aSfWWLCYIF`,"7-mobile-server-*":`_qkzet6WYFk`,"8-desktop-server-55bccc97303edab84afd77e2":`_qQwA2mxuBj`,"8-desktop-server-541917f5a90318f9194874cf":`_hBe1suFVbp`,"8-desktop-server-5daf495ed42c8605cfc74b0b":`_r9dNt9173p`,"8-desktop-server-55cb7e3b4bc841bd0c4ea577":`_lLRgz2kTfw`,"8-desktop-server-566aefa94856897050ee7303":`_gund5mIKg5`,"8-desktop-server-*":`_uqR67yraqv`,"8-mobile-server-55bccc97303edab84afd77e2":`_ecjCX4kPwm`,"8-mobile-server-541917f5a90318f9194874cf":`_jTzFFJiTJD`,"8-mobile-server-5daf495ed42c8605cfc74b0b":`_vuHz64bKFd`,"8-mobile-server-55cb7e3b4bc841bd0c4ea577":`_lx5UxDlx0g`,"8-mobile-server-566aefa94856897050ee7303":`_vTQcRjZrSS`,"8-mobile-server-*":`_xgNGHBHpEp`,"9-desktop-server-55bccc97303edab84afd77e2":`_uXClSLcqiX`,"9-desktop-server-541917f5a90318f9194874cf":`_ix2Vu5yio6`,"9-desktop-server-5daf495ed42c8605cfc74b0b":`_s1YBpsN41s`,"9-desktop-server-55cb7e3b4bc841bd0c4ea577":`_k5zqurOzN9`,"9-desktop-server-566aefa94856897050ee7303":`_wzZeDPhHwx`,"9-desktop-server-*":`_bSkTYI5gwN`,"9-mobile-server-55bccc97303edab84afd77e2":`_oMCKtxsq0T`,"9-mobile-server-541917f5a90318f9194874cf":`_vg5Tj9cQlS`,"9-mobile-server-5daf495ed42c8605cfc74b0b":`_lhuIK8d0HO`,"9-mobile-server-55cb7e3b4bc841bd0c4ea577":`_ol6ZhRXMRV`,"9-mobile-server-566aefa94856897050ee7303":`_vaUAWXhKWM`,"9-mobile-server-*":`_p2WCSP0fm1`,"10-desktop-server-55bccc97303edab84afd77e2":`_tyXFRsb7b4`,"10-desktop-server-541917f5a90318f9194874cf":`_jg4wlPdEog`,"10-desktop-server-5daf495ed42c8605cfc74b0b":`_vw404TGZKZ`,"10-desktop-server-55cb7e3b4bc841bd0c4ea577":`_rsajlrnhno`,"10-desktop-server-566aefa94856897050ee7303":`_gPZIDLm8j2`,"10-desktop-server-*":`_kkLiJTt47x`,"11-mobile-server-55bccc97303edab84afd77e2":`_cjATjOt7M3`,"11-mobile-server-541917f5a90318f9194874cf":`_jdef3qyaew`,"11-mobile-server-5daf495ed42c8605cfc74b0b":`_xRJtnJlLcg`,"11-mobile-server-55cb7e3b4bc841bd0c4ea577":`_p3pJYWNuxp`,"11-mobile-server-566aefa94856897050ee7303":`_ngr9SeXdE7`,"11-mobile-server-*":`_wraUX6ObGH`,"12-desktop-server-55bccc97303edab84afd77e2":`_zXaUPeITLG`,"12-desktop-server-541917f5a90318f9194874cf":`_cHXAF6BKmN`,"12-desktop-server-5daf495ed42c8605cfc74b0b":`_g2LAwxEvEs`,"12-desktop-server-55cb7e3b4bc841bd0c4ea577":`_sBUGeiExbU`,"12-desktop-server-566aefa94856897050ee7303":`_mBNCdbBCg7`,"12-desktop-server-*":`_j08PBtvK4B`,"12-mobile-server-55bccc97303edab84afd77e2":`_pnaFOGgJHk`,"12-mobile-server-541917f5a90318f9194874cf":`_el6JVb9qoD`,"12-mobile-server-5daf495ed42c8605cfc74b0b":`_pCPyKofX1S`,"12-mobile-server-55cb7e3b4bc841bd0c4ea577":`_dc6prrDilF`,"12-mobile-server-566aefa94856897050ee7303":`_bjw2WhZN1K`,"12-mobile-server-*":`_iNqGr1ZsCR`,"13-desktop-server-55bccc97303edab84afd77e2":`_s5shEWGvJC`,"13-desktop-server-541917f5a90318f9194874cf":`_vx63n2bPCt`,"13-desktop-server-5daf495ed42c8605cfc74b0b":`_ySOwZdo8WZ`,"13-desktop-server-55cb7e3b4bc841bd0c4ea577":`_qxKutqq3kR`,"13-desktop-server-566aefa94856897050ee7303":`_i2ILdAGFrc`,"13-desktop-server-*":`_mX7o0eM1jT`,"13-mobile-server-55bccc97303edab84afd77e2":`_jE3UrcJ5WA`,"13-mobile-server-541917f5a90318f9194874cf":`_rRtn5dy9zf`,"13-mobile-server-5daf495ed42c8605cfc74b0b":`_kCaQmZiXGS`,"13-mobile-server-55cb7e3b4bc841bd0c4ea577":`_bCZv43HA5e`,"13-mobile-server-566aefa94856897050ee7303":`_dZQibxLKPI`,"13-mobile-server-*":`_qeYOrszj4C`,"14-desktop-server-*":`_zUjex8JRIJ`,"14-mobile-server-*":`_zUjex8JRIJ`,"15-mobile-server-*":`_ei8YmSTk3u`,"15-desktop-server-*":`_pOO4HXySR6`}},placementId:{map:{...vb}}}}],placementsLocation:{_default:{bids:[]},below_post:{bids:[{params:{adSlotID:`1-desktop-{integration}-{siteId}`,placementId:`1-desktop-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],mediaTypesAll:[`banner`]},skip:{device:[`mobile`],outstreamEnabled:!0}},{params:{adSlotID:`1-mobile-{integration}-{siteId}`,placementId:`1-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`]},skip:{adTypes:[`interscroller`]}},{params:{adSlotID:`6-mobile-{integration}-{siteId}`,placementId:`6-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],adTypes:[`interscroller`]}},{params:{adSlotID:`4-desktop-{integration}-{siteId}`,placementId:`4-desktop-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],outstreamEnabled:!0,mediaTypesAny:[`banner`,`outstream`]},skip:{device:[`mobile`]}},{params:{adSlotID:`4-mobile-{integration}-{siteId}`,placementId:`4-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`outstream`]},skip:{adTypes:[`interscroller`]}},{params:{placementId:`5-mobile-{integration}-{siteId}`,adSlotID:`5-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`outstream`],adTypes:[`interscroller`]}}]},content:{bids:[{params:{adSlotID:`1-desktop-{integration}-{siteId}`,placementId:`1-desktop-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],mediaTypesAll:[`banner`]},skip:{outstreamEnabled:!0,device:[`mobile`]}},{params:{adSlotID:`1-mobile-{integration}-{siteId}`,placementId:`1-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],lazy:!1},skip:{sequence:[1]}},{params:{adSlotID:`1-mobile-{integration}-{siteId}`,placementId:`1-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],lazy:!0},skip:{sequence:[1],adTypes:[`interscroller`]}},{params:{adSlotID:`1-mobile-{integration}-{siteId}`,placementId:`1-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],sequence:[1]},skip:{adTypes:[`interscroller`]}},{params:{adSlotID:`6-mobile-{integration}-{siteId}`,placementId:`6-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],adTypes:[`interscroller`],sequence:[1]}},{params:{adSlotID:`6-mobile-{integration}-{siteId}`,placementId:`6-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],adTypes:[`interscroller`],lazy:!0},skip:{sequence:[1]}},{params:{adSlotID:`4-desktop-{integration}-{siteId}`,placementId:`4-desktop-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],outstreamEnabled:!0,mediaTypesAny:[`banner`,`outstream`]},skip:{device:[`mobile`]}},{params:{adSlotID:`4-mobile-{integration}-{siteId}`,placementId:`4-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`outstream`]},skip:{sequence:[1]}},{params:{adSlotID:`4-mobile-{integration}-{siteId}`,placementId:`4-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`outstream`],sequence:[1]},skip:{adTypes:[`interscroller`]}},{params:{adSlotID:`5-mobile-{integration}-{siteId}`,placementId:`5-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`outstream`],adTypes:[`interscroller`],sequence:[1]}}]},footer:{bids:[{params:{adSlotID:`8-desktop-{integration}-{siteId}`,placementId:`8-desktop-{integration}-{siteId}`},match:{sizesAny:[[320,50]],adTypes:[`videoFootersDesktop`]},skip:{device:[`mobile`]}},{params:{adSlotID:`8-mobile-{integration}-{siteId}`,placementId:`8-mobile-{integration}-{siteId}`},match:{sizesAny:[[320,50]],device:[`mobile`],adTypes:[`animatedFooter`,`videoFootersMobile`]},skip:{adTypes:[`expandableFooter`]}},{params:{adSlotID:`9-mobile-{integration}-{siteId}`,placementId:`9-mobile-{integration}-{siteId}`},match:{sizesAny:[[320,50]],adTypes:[`expandableFooter`,`videoFootersMobile`],device:[`mobile`]},skip:{adTypes:[`animatedFooter`]}},{params:{adSlotID:`7-mobile-{integration}-{siteId}`,placementId:`7-mobile-{integration}-{siteId}`},match:{sizesAny:[[320,50]],adTypes:[`animatedFooter`,`expandableFooter`,`videoFootersMobile`],device:[`mobile`]}},{params:{adSlotID:`14-mobile-{integration}-{siteId}`,placementId:`14-mobile-{integration}-{siteId}`},match:{sizesAny:[[320,50]],device:[`mobile`]},skip:{device:[`desktop`,`tablet`],adTypes:[`videoFootersMobile`]}},{params:{adSlotID:`14-desktop-{integration}-{siteId}`,placementId:`14-desktop-{integration}-{siteId}`},match:{sizesAny:[[320,50]],device:[`desktop`,`tablet`]},skip:{device:[`mobile`],adTypes:[`videoFootersDesktop`]}}]},header:{bids:[{params:{adSlotID:`3-{device}-{integration}-{siteId}`,placementId:`3-{device}-{integration}-{siteId}`},match:{sizesAny:[[728,90],[320,50]]}}]},recipe:{bids:[{params:{adSlotID:`1-desktop-{integration}-{siteId}`,placementId:`1-desktop-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],mediaTypesAll:[`banner`]},skip:{outstreamEnabled:!0,device:[`mobile`]}},{params:{adSlotID:`1-mobile-{integration}-{siteId}`,placementId:`1-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`]},skip:{sequence:[1]}},{params:{adSlotID:`1-mobile-{integration}-{siteId}`,placementId:`1-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`banner`],sequence:[1]},skip:{outstreamEnabled:!0}},{params:{adSlotID:`4-desktop-{integration}-{siteId}`,placementId:`4-desktop-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],outstreamEnabled:!0,mediaTypesAny:[`banner`,`outstream`]},skip:{device:[`mobile`]}},{params:{adSlotID:`4-mobile-{integration}-{siteId}`,placementId:`4-mobile-{integration}-{siteId}`},match:{sizesAny:[[300,250],[320,50]],device:[`mobile`],mediaTypesAll:[`outstream`]}}]},sidebar:{bids:[{params:{adSlotID:`1-{device}-{integration}-{siteId}`,placementId:`1-{device}-{integration}-{siteId}`},match:{sizesAny:[[320,50]]},skip:{sizesAny:[[300,250],[300,600]]}},{params:{adSlotID:`2-{device}-{integration}-{siteId}`,placementId:`2-{device}-{integration}-{siteId}`},match:{sizesAny:[[300,250],[300,600]],sizesAll:[[320,50]]}},{params:{adSlotID:`2-{device}-{integration}-{siteId}`,placementId:`2-{device}-{integration}-{siteId}`},match:{sizesAny:[[300,250],[300,600]]},skip:{sizesAll:[[320,50]]}}]},video_collapse_autoplay_soundoff:{bids:[{params:{adSlotID:`10-desktop-{integration}-{siteId}`,placementId:`10-desktop-{integration}-{siteId}`}}]},video_coll_soff_smartphone:{bids:[{params:{adSlotID:`11-mobile-{integration}-{siteId}`,placementId:`11-mobile-{integration}-{siteId}`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{adSlotID:`12-{device}-{integration}-{siteId}`,placementId:`12-{device}-{integration}-{siteId}`}}]},video_individual_autoplay_soff:{bids:[{params:{adSlotID:`13-{device}-{integration}-{siteId}`,placementId:`13-{device}-{integration}-{siteId}`}}]},interstitial:{bids:[{params:{adSlotID:`15-{device}-{integration}-{siteId}`,placementId:`15-{device}-{integration}-{siteId}`},match:{integration:`client`,exp:{KGSPLT:!0}},skip:{featureRollout:[`disable-kargo-spotlight`]}},{params:{adSlotID:`15-{device}-{integration}-{siteId}`,placementId:`15-{device}-{integration}-{siteId}`},match:{integration:`server`,exp:{KGSPLT:!0}},skip:{featureRollout:[`disable-kargo-spotlight`]}}]}}},bb=class extends Ry{constructor(e){let t=Sp()?_b:yb;super(e,t,G.Kargo),C(this,`_videoCreativeIds`,[[`138381592896`,G.Kargo],[`138381553202`,G.Kargo],[`138381553217`,G.Kargo],[`138381553238`,G.Kargo],[`138381553328`,G.Kargo],[`138381553214`,G.Kargo],[`138381553235`,G.Kargo],[`138381553244`,G.Kargo],[`138381553331`,G.Kargo],[`138381553334`,G.Kargo],[`138382066465`,G.Kargo],[`138381553241`,G.Kargo],[`138381553325`,G.Kargo],[`138381553337`,G.Kargo],[`138381553340`,G.Kargo],[`138382066468`,G.Kargo]])}};bb=w([x(),N(0,b(J))],bb);let xb=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Kargo)),C(this,`gvlid`,972),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.Kargo},server:{enabled:!0,name:G.Kargo}}),C(this,`_bidderCodes`,{primary:G.Kargo}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`placementId`],server:[`adSlotID`]}]])),C(this,`_settings`,{storageAllowed:[`html5`]})}};xb=w([D(`KargoBidder`),S(),N(0,b(J)),N(1,b(bb))],xb);var Sb=class extends Ly{constructor(e,t){super(e,t),C(this,`gvlid`,686),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.MediaGrid)),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.MediaGrid},server:{enabled:!0,name:G.MediaGrid}}),C(this,`_requiredProperties`,new Map([[`default`,{client:[`uid`],server:[`uid`]}]]))}};let Cb={placementsLocation:{_default:{bids:[]},below_post:{bids:[{params:{uid:357},match:{mediaTypesAll:[`banner`]}},{params:{uid:415475},match:{mediaTypesAll:[`outstream`]}}]},content:{applyToAllBids:{paramLookup:{uid:{map:{"1-banner":358,"1-outstream":415482,"2-banner":359,"3-banner":360,"3-outstream":415479,"4-banner":361,"5-banner":362,"5-outstream":415481,"6-banner":363,"7-banner":364,"8-banner":365,"9-banner":366}}}},bids:[{params:{uid:`{sequence}-{mediatype}`}}]},footer:{bids:[{params:{uid:367}}]},header:{bids:[{params:{uid:368},match:{sequence:[1]}},{params:{uid:369},match:{sequence:[2]}}]},recipe:{applyToAllBids:{paramLookup:{uid:{map:{"1-banner":370,"1-outstream":420057,"2-banner":371,"3-banner":372,"4-banner":373,"5-banner":374}}}},bids:[{params:{uid:`{placementMapSequence}-{mediatype}`},match:{mediaTypesAll:[`banner`]}}]},sidebar:{applyToAllBids:{paramLookup:{uid:{map:{1:375,2:376,3:377,4:378,5:379,9:380}}}},bids:[{params:{uid:`{placementMapSequence}`}}]},interstitial:{bids:[{params:{uid:48428}}]},video_stickyoutstream:{bids:[{params:{uid:133519}}]},video_collapse_autoplay_soundoff:{bids:[{params:{uid:2163}}]},video_coll_soff_smartphone:{bids:[{params:{uid:2165}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{uid:2164},match:{device:[`desktop`]}},{params:{uid:6056},skip:{device:[`desktop`]}}]},video_individual_autoplay_soff:{bids:[{params:{uid:2166},match:{device:[`desktop`]}},{params:{uid:6057},skip:{device:[`desktop`]}}]}}},wb=class extends Ry{constructor(e){super(e,Cb,G.MediaGrid),C(this,`_videoCreativeIds`,[[`138323922262`,G.MediaGridVideo],[`138323922901`,G.MediaGridVideo],[`138323922886`,G.MediaGridVideo],[`138323922898`,G.MediaGridVideo],[`138323922904`,G.MediaGridVideo],[`138323923042`,G.MediaGridVideo],[`138323922889`,G.MediaGridVideo],[`138323923018`,G.MediaGridVideo],[`138323922907`,G.MediaGridVideo],[`138323922859`,G.MediaGridVideo],[`138323923048`,G.MediaGridVideo],[`138323923045`,G.MediaGridVideo],[`138323923051`,G.MediaGridVideo],[`138323923021`,G.MediaGridVideo],[`138323922895`,G.MediaGridVideo],[`138323922892`,G.MediaGridVideo]])}};wb=w([x(),N(0,b(J))],wb);let Tb=class extends Sb{constructor(e,t){super(e,t),C(this,`_bidderCodes`,{primary:G.MediaGridVideo}),C(this,`_mediatypeEnablement`,[Q.instream])}};Tb=w([D(`MediaGridVideoBidder`),x(),N(0,b(J)),N(1,b(wb))],Tb);let Eb=class extends Sb{constructor(e,t){super(e,t),C(this,`_bidderCodes`,{primary:G.MediaGrid,supplemental:[G.MediaGridAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream]),C(this,`_settings`,{adserverTargeting:[{key:this._config.prebid.targetingKeyMap.ATTR,val:e=>{let t=e?.meta?.demandSource===`trustx`?`trustx_${e.mediaType}`:e.mediaType;return e?.meta?.isInBannerVideo&&(t=`ibv`),t}}]})}};Eb=w([D(`MediaGridBidder`),x(),N(0,b(J)),N(1,b(wb))],Eb);let Db={applyOptionsToAllBids:[{params:{cid:`8CUY56FQ6`}}],placementsLocation:{_default:{bids:[]},below_post:{applyToAllBids:{paramLookup:{crid:{map:{"banner-1":`182787683`}}}},bids:[{params:{crid:`{mediatype}-{sequence}`}}]},content:{applyToAllBids:{paramLookup:{crid:{map:{"banner-*":`858834975`,"banner-1":`170352753`,"banner-2":`291827835`,"banner-3":`214305686`,"banner-4":`341383764`,"banner-5":`463661268`,"banner-6":`262077556`,"banner-7":`721083191`,"banner-8":`242311467`,"banner-9":`483412583`}}}},bids:[{params:{crid:`{mediatype}-{placementMapSequence}`}}]},footer:{applyToAllBids:{paramLookup:{crid:{map:{"banner-1":`992344125`}}}},bids:[{params:{crid:`{mediatype}-{sequence}`}}]},header:{applyToAllBids:{paramLookup:{crid:{map:{"banner-1":`522176289`,"banner-2":`222335271`}}}},bids:[{params:{crid:`{mediatype}-{sequence}`}}]},sidebar:{applyToAllBids:{paramLookup:{crid:{map:{"banner-1":`695321684`,"banner-2":`568135172`,"banner-3":`538401052`,"banner-4":`483466419`,"banner-5":`257132768`,"banner-*":`872542881`}}}},bids:[{params:{crid:`{mediatype}-{placementMapSequence}`}}]},recipe:{applyToAllBids:{paramLookup:{crid:{map:{"banner-1":`576662862`,"banner-2":`415215868`,"banner-3":`523646213`,"banner-4":`421826445`,"banner-5":`230863350`}}}},bids:[{params:{crid:`{mediatype}-{sequence}`}}]},video_stickyoutstream:{bids:[{params:{crid:`880065555`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{crid:`837833186`}}]},video_coll_soff_smartphone:{bids:[{params:{crid:`816681657`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{crid:`747712811`}}]},video_individual_autoplay_soff:{bids:[{params:{crid:`167959332`}}]}}},Ob=class extends Ry{constructor(e){super(e,Db,G.Medianet),C(this,`_videoCreativeIds`,[[`138530157201`,G.Medianet],[`138530398943`,G.Medianet],[`138530398934`,G.Medianet],[`138530157198`,G.Medianet],[`138530985217`,G.Medianet],[`138530985205`,G.Medianet],[`138530157183`,G.Medianet],[`138530156478`,G.Medianet]])}};Ob=w([x(),N(0,b(J))],Ob);let kb=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Medianet)),C(this,`_adapterEnablement`,{client:{enabled:!1},server:{enabled:!0,name:G.Medianet}}),C(this,`_bidderCodes`,{primary:G.Medianet,supplemental:[G.MedianetAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_requiredProperties`,new Map)}};kb=w([D(`MedianetBidder`),x(),N(0,b(J)),N(1,b(Ob))],kb);let Ab={placementsLocation:{_default:{bids:[]},header:{bids:[{params:{},match:{sequence:[1],adTypes:[`nativeMobileHeader`],device:[`mobile`]}},{params:{},match:{sequence:[1],adTypes:[`nativeDesktopHeader`]},skip:{device:[`mobile`]}}]},footer:{bids:[{params:{}}]},sidebar:{bids:[{params:{},match:{sequenceMin:1,sequenceMax:2,adTypes:[`nativeDesktopSidebar`]},skip:{device:[`mobile`]}}]},recipe:{bids:[{params:{},match:{sequenceMin:1,sequenceMax:3,device:[`mobile`],adTypes:[`nativeMobileRecipe`],integration:`client`,mediaTypesAll:[`banner`]}},{params:{},match:{sequenceMin:1,sequenceMax:3,adTypes:[`nativeDesktopRecipe`],integration:`client`,mediaTypesAll:[`banner`]},skip:{device:[`mobile`]}},{params:{},match:{sequenceMin:1,sequenceMax:3,device:[`mobile`],adTypes:[`nativeMobileRecipe`],integration:`server`}},{params:{},match:{sequenceMin:1,sequenceMax:3,adTypes:[`nativeDesktopRecipe`],integration:`server`},skip:{device:[`mobile`]}}]},content:{bids:[{params:{},match:{device:[`mobile`],adTypes:[`nativeMobileContent`],integration:`client`,mediaTypesAll:[`banner`]}},{params:{},match:{adTypes:[`nativeDesktopContent`],integration:`client`,mediaTypesAll:[`banner`]},skip:{device:[`mobile`]}},{params:{},match:{device:[`mobile`],adTypes:[`nativeMobileContent`],integration:`server`}},{params:{},match:{adTypes:[`nativeDesktopContent`],integration:`server`},skip:{device:[`mobile`]}}]},video_stickyoutstream:{bids:[{params:{},match:{integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{},match:{integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{},match:{integration:`server`}}]}}},jb=class extends Ry{constructor(e){super(e,Ab,G.Nativo),C(this,`_videoCreativeIds`,[[`138501015328`,G.NativoServer],[`138500434457`,G.NativoServer],[`138500434454`,G.NativoServer],[`138500434427`,G.NativoServer],[`138500433788`,G.NativoServer],[`138500433785`,G.NativoServer],[`138500433770`,G.NativoServer],[`138500198436`,G.NativoServer]])}};jb=w([x(),N(0,b(J))],jb);let Mb=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Nativo)),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.Nativo},server:{enabled:!0,name:G.Nativo}}),C(this,`_bidderCodes`,{primary:G.Nativo,secondary:G.NativoServer,supplemental:[G.NativoAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_requiredProperties`,new Map)}};Mb=w([D(`NativoBidder`),x(),N(0,b(J)),N(1,b(jb))],Mb);let Nb={placementsLocation:{_default:{bids:[{params:{},match:{mediaTypesAll:[`banner`]}}]}}},Pb=class extends Ry{constructor(e){super(e,Nb,G.Ogury)}};Pb=w([x(),N(0,b(J))],Pb);let Fb=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Ogury)),C(this,`_adapterEnablement`,{client:{enabled:!1},server:{enabled:!0,name:G.Ogury}}),C(this,`_bidderCodes`,{primary:G.Ogury,supplemental:[G.OguryAY]}),C(this,`_mediatypeEnablement`,[Q.banner]),C(this,`_requiredProperties`,new Map)}get bidderInstreamEnabled(){return!1}getBannerSlotBidRequests(){return this.bidders.map(e=>{let t=e.pbsHost;return{bidder:e.name,params:{},...t&&{pbsHost:t}}})}};Fb=w([D(`OguryBidder`),x(),N(0,b(J)),N(1,b(Pb))],Fb);let Ib={applyToAllBids:{params:{delDomain:`cafemedia-d.openx.net`}},applyOptionsToAllBids:[{retrieveFromFile:[`customParams`]},{retrieveFromFile:[`video`],match:{mediaTypesAll:[`instream`]}},{params:{customParams:{hi_au:[`interscroller`]}},match:{adTypes:[`interscroller`],lazy:!0,locations:[`below_post`,`content`]},skip:{adTypes:[`miniscroller`]}},{params:{customParams:{hi_au:[`miniscroller`]}},match:{adTypes:[`miniscroller`],lazy:!0,locations:[`below_post`,`content`]},skip:{adTypes:[`interscroller`]}},{params:{customParams:{hi_au:[`interscroller`,`miniscroller`]}},match:{adTypes:[`interscroller`,`miniscroller`],lazy:!0,locations:[`below_post`,`content`]}}],placementsLocation:{_default:{bids:[]},below_post:{applyToAllBids:{paramLookup:{unit:{map:{"1-client":`538699873`,"1-server":`558246007`,"*-client":`538699874`,"*-server":`558246008`}}}},bids:[{params:{unit:`{sequence}-{integration}`}}]},footer:{applyToAllBids:{paramLookup:{unit:{map:{client:`564019474`,server:`564019499`}}}},bids:[{params:{unit:`{integration}`}}]},header:{applyToAllBids:{paramLookup:{unit:{map:{"1-client":`564019473`,"1-server":`564019500`,"2-client":`564019472`,"2-server":`564019501`}}}},bids:[{params:{unit:`{sequence}-{integration}`}}]},sidebar:{applyToAllBids:{paramLookup:{unit:{map:{"1-client":`564019466`,"1-server":`564019507`,"2-client":`564019465`,"2-server":`564019508`,"3-client":`564019464`,"3-server":`564019509`,"4-client":`564019463`,"4-server":`564019510`,"5-client":`564019462`,"5-server":`564019511`,"*-client":`564019461`,"*-server":`564019512`}}}},bids:[{params:{unit:`{sequence}-{integration}`}}]},recipe:{applyToAllBids:{paramLookup:{unit:{map:{"1-client":`564019471`,"1-server":`564019502`,"2-client":`564019470`,"2-server":`564019503`,"3-client":`564019469`,"3-server":`564019504`,"4-client":`564019468`,"4-server":`564019505`,"5-client":`564019467`,"5-server":`564019506`}}}},applyOptionsToAllBids:[{params:{customParams:{hi_au:[`miniscroller`]}},match:{adTypes:[`miniscroller`],lazy:!0}}],bids:[{params:{unit:`{placementMapSequence}-{integration}`}}]},content:{applyToAllBids:{paramLookup:{unit:{map:{"1-client":`564019483`,"1-server":`564019490`,"2-client":`564019482`,"2-server":`564019491`,"3-client":`564019481`,"3-server":`564019492`,"4-client":`564019480`,"4-server":`564019493`,"5-client":`564019479`,"5-server":`564019494`,"6-client":`564019478`,"6-server":`564019495`,"7-client":`564019477`,"7-server":`564019496`,"8-client":`564019476`,"8-server":`564019497`,"9-client":`564019475`,"9-server":`564019498`,"*-client":`564019484`,"*-server":`564019489`}}}},applyOptionsToAllBids:[{params:{customParams:{hi_au:[`interscroller`]}},match:{adTypes:[`interscroller`],sequence:[1]},skip:{adTypes:[`miniscroller`]}},{params:{customParams:{hi_au:[`miniscroller`]}},match:{adTypes:[`miniscroller`],sequence:[1]},skip:{adTypes:[`interscroller`]}},{params:{customParams:{hi_au:[`interscroller`,`miniscroller`]}},match:{adTypes:[`interscroller`,`miniscroller`],sequence:[1]}}],bids:[{params:{unit:`{sequence}-{integration}`}}]},video_stickyoutstream:{bids:[{params:{unit:`564019456`},match:{integration:`client`}},{params:{unit:`564019516`},match:{integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{unit:`564019457`},match:{integration:`client`}},{params:{unit:`564019518`},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{unit:`564019458`},match:{integration:`client`}},{params:{unit:`564019517`},match:{integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{unit:`564019459`},match:{integration:`client`}},{params:{unit:`564019519`},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{unit:`564019460`},match:{integration:`client`}},{params:{unit:`564019520`},match:{integration:`server`}}]}}},Lb={applyToAllBids:{params:{delDomain:`cafemedia-d.openx.net`}},applyOptionsToAllBids:[{retrieveFromFile:[`customParams`]},{retrieveFromFile:[`video`],match:{mediaTypesAll:[`instream`]}},{params:{customParams:{hi_au:[`interscroller`]}},match:{adTypes:[`interscroller`],lazy:!0,locations:[`below_post`,`content`]},skip:{adTypes:[`miniscroller`]}},{params:{customParams:{hi_au:[`miniscroller`]}},match:{adTypes:[`miniscroller`],lazy:!0,locations:[`below_post`,`content`]},skip:{adTypes:[`interscroller`]}},{params:{customParams:{hi_au:[`interscroller`,`miniscroller`]}},match:{adTypes:[`interscroller`,`miniscroller`],lazy:!0,locations:[`below_post`,`content`]}}],placementsLocation:{_default:{bids:[]},below_post:{bids:[{params:{unit:`538699862`},match:{bidderCodes:[`openx`]}},{params:{unit:`558245996`},skip:{bidderCodes:[`openx`]}}]},footer:{bids:[{params:{unit:`538699840`},match:{bidderCodes:[`openx`]}},{params:{unit:`558246006`},skip:{bidderCodes:[`openx`]}}]},header:{applyToAllBids:{paramLookup:{unit:{map:{"1-openx":`538699873`,"1-*":`558246007`,"2-openx":`538699874`,"2-*":`558246008`}}}},bids:[{params:{unit:`{sequence}-{biddercode}`}}]},sidebar:{applyToAllBids:{paramLookup:{unit:{map:{"1-openx":`538699853`,"1-*":`558246014`,"2-openx":`538699854`,"2-*":`558246015`,"3-openx":`538699855`,"3-*":`558246016`,"4-openx":`538699856`,"4-*":`558246017`,"5-openx":`538699857`,"5-*":`558246018`,"*-openx":`538699861`,"*-*":`558246019`}}}},bids:[{params:{unit:`{sequence}-{biddercode}`}}]},recipe:{applyToAllBids:{paramLookup:{unit:{map:{"1-openx":`538699843`,"1-*":`558246009`,"2-openx":`538699844`,"2-*":`558246010`,"3-openx":`540594416`,"3-*":`558246011`,"4-openx":`540751624`,"4-*":`558246012`,"5-openx":`540751637`,"5-*":`558246013`}}}},applyOptionsToAllBids:[{params:{customParams:{hi_au:[`miniscroller`]}},match:{adTypes:[`miniscroller`],lazy:!0}}],bids:[{params:{unit:`{placementMapSequence}-{biddercode}`}}]},content:{applyToAllBids:{paramLookup:{unit:{map:{"1-openx":`538699864`,"1-*":`558245997`,"2-openx":`538699865`,"2-*":`558245998`,"3-openx":`538699866`,"3-*":`558245999`,"4-openx":`538699867`,"4-*":`558246000`,"5-openx":`538699868`,"5-*":`558246001`,"6-openx":`538699869`,"6-*":`558246002`,"7-openx":`538699870`,"7-*":`558246003`,"8-openx":`538699871`,"8-*":`558246004`,"*-openx":`538699872`,"*-*":`558246005`}}}},applyOptionsToAllBids:[{params:{customParams:{hi_au:[`interscroller`]}},match:{adTypes:[`interscroller`],sequence:[1]},skip:{adTypes:[`miniscroller`]}},{params:{customParams:{hi_au:[`miniscroller`]}},match:{adTypes:[`miniscroller`],sequence:[1]},skip:{adTypes:[`interscroller`]}},{params:{customParams:{hi_au:[`interscroller`,`miniscroller`]}},match:{adTypes:[`interscroller`,`miniscroller`],sequence:[1]}}],bids:[{params:{unit:`{sequence}-{biddercode}`}}]},video_stickyoutstream:{bids:[{params:{unit:`545721971`},match:{bidderCodes:[`openx`]}},{params:{unit:`558246697`},skip:{bidderCodes:[`openx`]}}]},video_collapse_autoplay_soundoff:{bids:[{params:{unit:`540679731`},match:{bidderCodes:[`openx`]}},{params:{unit:`558246727`},skip:{bidderCodes:[`openx`]}}]},video_coll_soff_smartphone:{bids:[{params:{unit:`540679733`},match:{bidderCodes:[`openx`]}},{params:{unit:`558246726`},skip:{bidderCodes:[`openx`]}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{unit:`540679727`},match:{bidderCodes:[`openx`]}},{params:{unit:`558246662`},skip:{bidderCodes:[`openx`]}}]},video_individual_autoplay_soff:{bids:[{params:{unit:`540925853`},match:{bidderCodes:[`openx`]}},{params:{unit:`558246728`},skip:{bidderCodes:[`openx`]}}]},interstitial:{bids:[{params:{unit:`543876568`},match:{bidderCodes:[`openx`]}},{params:{unit:`543876568`},match:{},skip:{bidderCodes:[`openx`]}}]}}},Rb=class extends Ry{constructor(e){let t=Sp()?Ib:Lb;super(e,t,G.OpenX),C(this,`_videoCreativeIds`,[[`138323525262`,G.OpenX],[`138323914702`,G.OpenX],[`138323526741`,G.OpenX],[`138323526186`,G.OpenX],[`138323526738`,G.OpenX],[`138323526744`,G.OpenX],[`138323526747`,G.OpenX],[`138323526189`,G.OpenX],[`138323914588`,G.OpenX],[`138323526192`,G.OpenX],[`138323526750`,G.OpenX],[`138323466806`,G.OpenX],[`138323468969`,G.OpenX],[`138323914705`,G.OpenX],[`138323526183`,G.OpenX],[`138323526753`,G.OpenX],[`138411286398`,G.OpenXServer],[`138411786451`,G.OpenXServer],[`138411286395`,G.OpenXServer],[`138411286392`,G.OpenXServer],[`138411286401`,G.OpenXServer],[`138411286389`,G.OpenXServer],[`13841117744`,G.OpenXServer],[`138411178055`,G.OpenXServer]])}};Rb=w([x(),N(0,b(J))],Rb);let zb=class extends Ly{constructor(e,t,n){super(e,t),this._context=n,C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.OpenX)),C(this,`gvlid`,69),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.OpenX},server:{enabled:!0,name:G.OpenX}}),C(this,`_bidderCodes`,{primary:G.OpenX,secondary:G.OpenXServer,supplemental:[G.OpenXAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_paramKeyMap`,{customParams:this._getCustomParamsParam.bind(this),video:this._getVideoParam.bind(this)}),C(this,`_requiredProperties`,new Map([[`default`,{client:[`delDomain`,`unit`,`customParams`],server:[`delDomain`,`unit`,`customParams`]}],[`instream`,{client:[`delDomain`,`unit`,`video`],server:[`delDomain`,`unit`,`video`]}]])),C(this,`_custParams`,{...this._config.site.filteredSensitiveCategories.length&&{sens:this._config.site.filteredSensitiveCategories},bucket:[this._context.bucket]})}_getCustomParamsParam(){return{...this._custParams}}_getVideoParam(e){let t=`id`in e?e.id:e.name,n=this._config.video.videoProtocols?.scope===`all`?{protocols:this._config.video.videoProtocols.protocols}:``,r=this._config.video.mimeType;return{...r&&{mimes:r},api:this._config.video.apiValue,...n,pos:this._config.video.position.id,...this._config.video.playbackmethod?.get(t)&&{playbackmethod:this._config.video.playbackmethod.get(t)}}}};zb=w([D(`OpenXBidder`),x(),N(0,b(J)),N(1,b(Rb)),N(2,b(W))],zb);let Bb={applyToAllBids:{params:{publisherId:`OZONERAP0001`,siteId:`1500000160`}},placementsLocation:{_default:{bids:[]},below_post:{bids:[{params:{placementId:`3500013108`},match:{sequence:[1]},skip:{mediaTypesAll:[`outstream`]}},{params:{placementId:`3500013107`},skip:{mediaTypesAll:[`outstream`],sequence:[1]}}]},footer:{bids:[{params:{placementId:`3500013109`}}]},header:{bids:[{params:{placementId:`3500013099`},match:{sequence:[1]}},{params:{placementId:`3500013100`},match:{sequence:[2]}}]},sidebar:{applyToAllBids:{paramLookup:{placementId:{map:{1:`3500013101`,2:`3500013102`,3:`3500013103`,4:`3500013104`,5:`3500013105`,"*":`3500013106`}}}},bids:[{params:{placementId:`{sequence}`}}]},recipe:{applyToAllBids:{paramLookup:{placementId:{map:{1:`3500013110`,2:`3500013111`,3:`3500013112`,4:`3500013113`,"*":`3500013114`}}}},bids:[{params:{placementId:`{placementMapSequence}`},skip:{mediaTypesAll:[`outstream`]}}]},content:{applyToAllBids:{paramLookup:{placementId:{map:{1:`3500013090`,2:`3500013091`,3:`3500013092`,4:`3500013093`,5:`3500013094`,6:`3500013095`,7:`3500013096`,8:`3500013097`,"*":`3500013098`}}}},bids:[{params:{placementId:`{sequence}`},skip:{mediaTypesAll:[`outstream`]}}]},video_stickyoutstream:{bids:[{params:{placementId:`1500000360`}}]}}},Vb=class extends Ry{constructor(e){super(e,Bb,G.Ozone)}};Vb=w([x(),N(0,b(J))],Vb);let Hb=class extends Ly{constructor(e,t,n){super(e,t),this._context=n,C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Ozone)),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.OpenX},server:{enabled:!1}}),C(this,`_bidderCodes`,{primary:G.Ozone}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`publisherId`,`siteId`,`placementId`],server:[`publisherId`,`siteId`,`placementId`]}]]))}get bidderDisplayEnabled(){return this._isCountryValid()}_isCountryValid(){let e=this._config;switch(this._context.country){case`GB`:return e.gdpr.enabled;case`CA`:return!0;default:return!1}}};Hb=w([D(`OzoneBidder`),x(),N(0,b(J)),N(1,b(Vb)),N(2,b(W))],Hb);let Ub={applyToAllBids:{retrieveFromFile:[`pmzoneid`],params:{publisherId:`157347`}},applyOptionsToAllBids:[{retrieveFromFile:[`video`,`dctr`],match:{mediaTypesAll:[`instream`]}}],placementsLocation:{_default:{bids:[]},video_stickyoutstream:{bids:[{params:{adSlot:`Adblock_AdThrive_Video_StickyOutstream_1_CS`},match:{integration:`client`}},{params:{adSlot:`Adblock_AdThrive_Video_StickyOutstream_1_S2S`},match:{integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{adSlot:`Adblock_AdThrive_Video_Collapse_Autoplay_SoundOff_CS`},match:{integration:`client`}},{params:{adSlot:`Adblock_AdThrive_Video_Collapse_Autoplay_SoundOff_S2S`},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{adSlot:`Adblock_AdThrive_Video_Coll_SOff_Smartphone_CS`},match:{integration:`client`}},{params:{adSlot:`Adblock_AdThrive_Video_Coll_SOff_Smartphone_S2S`},match:{integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{adSlot:`Adblock_AdThrive_Video_In-Post_ClicktoPlay_SoundOn_CS`},match:{integration:`client`}},{params:{adSlot:`Adblock_AdThrive_Video_In-Post_ClicktoPlay_SoundOn_S2S`},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{adSlot:`Adblock_AdThrive_Video_Individual_Autoplay_SOff_CS`},match:{integration:`client`}},{params:{adSlot:`Adblock_AdThrive_Video_Individual_Autoplay_SOff_S2S`},match:{integration:`server`}}]},below_post:{bids:[{params:{adSlot:`Adblock_AdThrive_Below_Post_1_CS`},match:{integration:`client`}},{params:{adSlot:`Adblock_AdThrive_Below_Post_1_S2S`},match:{integration:`server`}}]},footer:{bids:[{params:{adSlot:`Adblock_AdThrive_Footer_1_CS`},match:{integration:`client`}},{params:{adSlot:`Adblock_AdThrive_Footer_1_S2S`},match:{integration:`server`}}]},header:{bids:[{params:{adSlot:`Adblock_AdThrive_Header_{sequence}_CS`},match:{integration:`client`}},{params:{adSlot:`Adblock_AdThrive_Header_{sequence}_S2S`},match:{integration:`server`}}]},sidebar:{bids:[{params:{adSlot:`Adblock_AdThrive_Sidebar_{placementMapSequence}_CS`},match:{integration:`client`}},{params:{adSlot:`Adblock_AdThrive_Sidebar_{placementMapSequence}_S2S`},match:{integration:`server`}}]},recipe:{bids:[{params:{adSlot:`Adblock_AdThrive_Recipe_{placementMapSequence}_CS`},match:{integration:`client`,mediaTypesAll:[`banner`]}},{params:{adSlot:`Adblock_AdThrive_Recipe_{placementMapSequence}_S2S`},match:{integration:`server`,mediaTypesAll:[`banner`]}}]},content:{bids:[{params:{adSlot:`Adblock_AdThrive_Content_{placementMapSequence}_CS`},match:{integration:`client`,mediaTypesAll:[`banner`]}},{params:{adSlot:`Adblock_AdThrive_Content_{placementMapSequence}_S2S`},match:{integration:`server`,mediaTypesAll:[`banner`]}}]}}},Wb={applyToAllBids:{retrieveFromFile:[`pmzoneid`],params:{publisherId:`157347`}},applyOptionsToAllBids:[{retrieveFromFile:[`video`,`dctr`],match:{mediaTypesAll:[`instream`]}}],placementsLocation:{_default:{bids:[]},video_stickyoutstream:{bids:[{params:{adSlot:`2267845`},match:{integration:`client`}},{params:{adSlot:`4018943`},match:{integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{adSlot:`1961309`},match:{integration:`client`}},{params:{adSlot:`3437231`},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{adSlot:`1961310`},match:{integration:`client`}},{params:{adSlot:`3437234`},match:{integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{adSlot:`1961308`},match:{integration:`client`}},{params:{adSlot:`3437232`},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{adSlot:`2503033`},match:{integration:`client`}},{params:{adSlot:`3443766`},match:{integration:`server`}}]},below_post:{bids:[{params:{adSlot:`BelowPost1`},match:{integration:`client`}},{params:{adSlot:`BelowPost1_XandrS2S`},match:{integration:`server`}}]},footer:{bids:[{params:{adSlot:`Footer1`},match:{integration:`client`}},{params:{adSlot:`Footer1_XandrS2S`},match:{integration:`server`}}]},header:{bids:[{params:{adSlot:`Header{sequence}`},match:{integration:`client`}},{params:{adSlot:`Header{sequence}_XandrS2S`},match:{integration:`server`}}]},sidebar:{bids:[{params:{adSlot:`Sidebar{placementMapSequence}`},match:{integration:`client`}},{params:{adSlot:`Sidebar{placementMapSequence}_XandrS2S`},match:{integration:`server`}}]},recipe:{bids:[{params:{adSlot:`Recipe{placementMapSequence}`},match:{integration:`client`,mediaTypesAll:[`banner`]}},{params:{adSlot:`Recipe{placementMapSequence}_XandrS2S`},match:{integration:`server`,mediaTypesAll:[`banner`]}},{params:{adSlot:`Recipe{placementMapSequence}_Native`},match:{integration:`client`,mediaTypesAll:[`native`]}},{params:{adSlot:`Recipe{placementMapSequence}_Native_S2S`},match:{integration:`server`,mediaTypesAll:[`native`]}}]},content:{bids:[{params:{adSlot:`Content{placementMapSequence}`},match:{integration:`client`,mediaTypesAll:[`banner`]}},{params:{adSlot:`Content{placementMapSequence}_XandrS2S`},match:{integration:`server`,mediaTypesAll:[`banner`]}},{params:{adSlot:`Content{placementMapSequence}_Native`},match:{integration:`client`,mediaTypesAll:[`native`]}},{params:{adSlot:`Content{placementMapSequence}_Native_S2S`},match:{integration:`server`,mediaTypesAll:[`native`]}}]}}},Gb=class extends Ry{constructor(e){let t=Sp()?Ub:Wb;super(e,t,G.Pubmatic),C(this,`_videoCreativeIds`,[[`138323526825`,G.Pubmatic],[`138323915419`,G.Pubmatic],[`138323915299`,G.Pubmatic],[`138323527095`,G.Pubmatic],[`138323469392`,G.Pubmatic],[`138323915422`,G.Pubmatic],[`138323469395`,G.Pubmatic],[`138323469389`,G.Pubmatic],[`138323469383`,G.Pubmatic],[`138323469320`,G.Pubmatic],[`138323469317`,G.Pubmatic],[`138323527092`,G.Pubmatic],[`138323469401`,G.Pubmatic],[`138323469398`,G.Pubmatic],[`138323469386`,G.Pubmatic],[`138323469404`,G.Pubmatic],[`138337271609`,G.PubmaticServer],[`138337343196`,G.PubmaticServer],[`138337343229`,G.PubmaticServer],[`138337720879`,G.PubmaticServer],[`138337720885`,G.PubmaticServer],[`138337343202`,G.PubmaticServer],[`138337343211`,G.PubmaticServer],[`138337343217`,G.PubmaticServer],[`138337343232`,G.PubmaticServer],[`138337720597`,G.PubmaticServer],[`138337720888`,G.PubmaticServer],[`138337343199`,G.PubmaticServer],[`138337343214`,G.PubmaticServer],[`138337343223`,G.PubmaticServer],[`138337343226`,G.PubmaticServer],[`138337343220`,G.PubmaticServer]])}};Gb=w([x(),N(0,b(J))],Gb);let Kb=class extends Ly{constructor(e,t,n,r){super(e,t),this._irisTvTracker=n,this._pubMaticBcatExperiment=r,C(this,`multiformatBidder`,!0),C(this,`multiformatBannerVideoBidder`,!0),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Pubmatic)),C(this,`gvlid`,76),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.Pubmatic},server:{enabled:!0,name:G.Pubmatic}}),C(this,`_bidderCodes`,{primary:G.Pubmatic,secondary:G.PubmaticServer,supplemental:[G.PubmaticAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.native,Q.outstream,Q.instream]),C(this,`_multiformat`,{outstream:{enabled:!0}}),C(this,`_requiredProperties`,new Map([[`default`,{client:[`publisherId`,`adSlot`],server:[`publisherId`,`adSlot`]}],[`instream`,{client:[`publisherId`,`adSlot`,`video`],server:[`publisherId`,`adSlot`,`video`]}]])),C(this,`_paramKeyMap`,{dctr:this._getDCTRParam.bind(this),pmzoneid:this._getPMZoneIdParam.bind(this),video:this._getVideoParam.bind(this)})}_getDCTRParam(){let e=[],t=this._irisTvTracker.enabled?this._irisTvTracker.irisContextualData:void 0;return t?.length&&e.push(`iris_context=${t.toString()}`),e.join(`|`)}_getPMZoneIdParam(){return this._config.site.filteredSensitiveCategories.length>0&&this._shouldSendPMZoneId()?this._config.site.filteredSensitiveCategories.join(`,`):void 0}_getVideoParam(e){let t=this._config.video.mimeType;return{...t&&{mimes:t},api:this._config.video.apiValue,...this._config.video.videoProtocols?.scope===`all`&&{protocols:this._config.video.videoProtocols.protocols},...this._config.video.playbackmethod?.get(e.name)&&{playbackmethod:this._config.video.playbackmethod.get(e.name)}}}_shouldSendPMZoneId(){return this._pubMaticBcatExperiment.result!==`bc`}};Kb=w([D(`PubMaticBidder`),x(),N(0,b(J)),N(1,b(Gb)),N(2,b(dp)),N(3,b(Zf))],Kb);let qb={placementsLocation:{_default:{bids:[{params:{org:`670f50ccaaffbb00017d70d5`},match:{mediaTypesAny:[`banner`,`instream`]}}]}}},Jb=class extends Ry{constructor(e){super(e,qb,G.Rise),C(this,`_videoCreativeIds`,[[`138495438845`,G.Rise],[`138495438842`,G.Rise],[`138495438824`,G.Rise],[`138495438689`,G.Rise],[`138495438686`,G.Rise],[`138495438653`,G.Rise],[`138495438416`,G.Rise],[`138495437750`,G.Rise]])}};Jb=w([x(),N(0,b(J))],Jb);let Yb=class extends Ly{constructor(e,t,n){super(e,t),this._context=n,C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Rise)),C(this,`_adapterEnablement`,{client:{enabled:!1},server:{enabled:!0,name:G.Rise}}),C(this,`_bidderCodes`,{primary:G.Rise,supplemental:[G.RiseAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`org`],server:[`org`]}]]))}get bidderDisplayEnabled(){return this._context.country===`US`}get bidderInstreamEnabled(){return this._context.country===`US`}};Yb=w([D(`RiseBidder`),x(),N(0,b(J)),N(1,b(Jb)),N(2,b(W))],Yb);let Xb={applyToAllBids:{params:{accountId:9262}},applyOptionsToAllBids:[{params:{position:`atf`},match:{mediaTypesAny:[`banner`,`outstream`,`native`],viewabilityThresholdMet:!0}},{params:{bidonmultiformat:!0},match:{mediaTypesAll:[`banner`,`native`]}},{params:{siteId:180726},match:{integration:`client`,mediaTypesAny:[`banner`]}},{params:{siteId:363698},match:{integration:`server`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:253996,video:{language:`en`}},match:{integration:`client`,mediaTypesAll:[`instream`]}},{params:{siteId:375144,video:{language:`en`}},match:{integration:`server`,mediaTypesAll:[`instream`]}}],placementsLocation:{_default:{bids:[]},below_post:{applyToAllBids:{paramLookup:{zoneId:{map:{"banner-client":3903361,"*-server":3903423}}}},bids:[{params:{zoneId:`{mediatype}-{integration}`},match:{integration:`client`,mediaTypesAll:[`banner`]}},{params:{zoneId:`{mediatype}-{integration}`},match:{integration:`server`}}]},content:{applyToAllBids:{paramLookup:{zoneId:{map:{"1-banner-client":3903367,"1-*-server":3903429,"2-banner-client":3903369,"2-*-server":3903431,"3-banner-client":3903371,"3-*-server":3903433,"4-banner-client":3903373,"4-*-server":3903435,"5-banner-client":3903375,"5-*-server":3903437,"6-banner-client":3903377,"6-*-server":3903439,"7-banner-client":3903379,"7-*-server":3903439,"8-banner-client":3903381,"8-*-server":3903443,"9-banner-client":3903383,"9-*-server":3903445,"*-banner-client":3903365,"*-*-server":3903427}}}},bids:[{params:{zoneId:`{placementMapSequence}-{mediatype}-{integration}`},match:{integration:`client`,mediaTypesAll:[`banner`]}},{params:{zoneId:`{placementMapSequence}-{mediatype}-{integration}`},match:{integration:`server`}}]},footer:{bids:[{params:{zoneId:3903385},match:{integration:`client`}},{params:{zoneId:3903447},match:{integration:`server`}}]},header:{applyToAllBids:{paramLookup:{zoneId:{map:{"1-client":3903387,"1-server":3903449,"2-client":3903389,"2-server":3903451}}}},bids:[{params:{zoneId:`{sequence}-{integration}`}}]},recipe:{applyToAllBids:{paramLookup:{zoneId:{map:{"1-banner-client":3903391,"1-*-server":3903453,"2-banner-client":3903393,"2-*-server":3903455,"3-banner-client":3903395,"3-*-server":3903457,"4-banner-client":3903397,"4-*-server":3903459,"5-banner-client":3903399,"5-*-server":3903461}}}},bids:[{params:{zoneId:`{placementMapSequence}-{mediatype}-{integration}`},match:{integration:`client`},skip:{mediaTypesAny:[`outstream`]}},{params:{zoneId:`{placementMapSequence}-{mediatype}-{integration}`},match:{integration:`server`}}]},sidebar:{applyToAllBids:{paramLookup:{zoneId:{map:{"1-client":3903401,"1-server":3903463,"2-client":3903403,"2-server":3903465,"3-client":3903405,"3-server":3903467,"4-client":3903407,"4-server":3903469,"5-client":3903409,"5-server":3903471,"*-client":3903411,"*-server":3903473}}}},bids:[{params:{zoneId:`{placementMapSequence}-{integration}`}}]},video_stickyoutstream:{bids:[{params:{siteId:386004,zoneId:3948927,video:{language:`en`}},match:{integration:`client`}},{params:{siteId:420534,zoneId:3948925,video:{language:`en`}},match:{integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{zoneId:3948915},match:{integration:`client`}},{params:{zoneId:3948921},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{zoneId:3948917},match:{integration:`client`}},{params:{zoneId:3948923},match:{integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{zoneId:3948947},match:{integration:`client`}},{params:{zoneId:3948943},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{zoneId:3948949},match:{integration:`client`}},{params:{zoneId:3948945},match:{integration:`server`}}]}}},Zb={applyToAllBids:{params:{accountId:9262}},applyOptionsToAllBids:[{params:{position:`atf`},match:{mediaTypesAny:[`banner`,`outstream`,`native`],viewabilityThresholdMet:!0}},{params:{bidonmultiformat:!0},match:{mediaTypesAll:[`banner`,`native`]}},{params:{siteId:180726},match:{integration:`client`,mediaTypesAny:[`banner`]}},{params:{siteId:363698},match:{integration:`server`,mediaTypesAny:[`banner`,`outstream`]}},{params:{siteId:253996,video:{language:`en`}},match:{integration:`client`,mediaTypesAll:[`instream`]}},{params:{siteId:375144,video:{language:`en`}},match:{integration:`server`,mediaTypesAll:[`instream`]}}],placementsLocation:{_default:{bids:[]},below_post:{applyToAllBids:{paramLookup:{zoneId:{map:{"banner-client":881394,"*-server":1974272}}}},bids:[{params:{zoneId:`{mediatype}-{integration}`},match:{integration:`client`,mediaTypesAll:[`banner`]}},{params:{zoneId:`{mediatype}-{integration}`},match:{integration:`server`}}]},content:{applyToAllBids:{paramLookup:{zoneId:{map:{"1-banner-client":881398,"1-*-server":1974276,"2-banner-client":881400,"2-*-server":1974280,"3-banner-client":881402,"3-*-server":1974282,"4-banner-client":881404,"4-*-server":1974284,"5-banner-client":881406,"5-*-server":1974286,"6-banner-client":881408,"6-*-server":1974288,"7-banner-client":881410,"7-*-server":1974290,"8-banner-client":881412,"8-*-server":1974292,"*-banner-client":881414,"*-*-server":1974294}}}},bids:[{params:{zoneId:`{placementMapSequence}-{mediatype}-{integration}`},match:{integration:`client`,mediaTypesAll:[`banner`]}},{params:{zoneId:`{placementMapSequence}-{mediatype}-{integration}`},match:{integration:`server`}}]},footer:{bids:[{params:{zoneId:881416},match:{integration:`client`}},{params:{zoneId:1974296},match:{integration:`server`}}]},header:{applyToAllBids:{paramLookup:{zoneId:{map:{"1-client":881422,"1-server":1974304,"2-client":881426,"2-server":1974306}}}},bids:[{params:{zoneId:`{sequence}-{integration}`}}]},recipe:{applyToAllBids:{paramLookup:{zoneId:{map:{"1-banner-client":881428,"1-*-server":1974308,"2-banner-client":881430,"2-*-server":1974310,"3-banner-client":1187188,"3-*-server":1974312,"4-banner-client":1279328,"4-*-server":1974314,"5-banner-client":3813388,"5-*-server":3813390}}}},bids:[{params:{zoneId:`{placementMapSequence}-{mediatype}-{integration}`},match:{integration:`client`},skip:{mediaTypesAny:[`outstream`]}},{params:{zoneId:`{placementMapSequence}-{mediatype}-{integration}`},match:{integration:`server`}}]},sidebar:{applyToAllBids:{paramLookup:{zoneId:{map:{"1-client":881440,"1-server":1974316,"2-client":881430,"2-server":1974318,"3-client":881460,"3-server":1974320,"4-client":881462,"4-server":1974322,"5-client":881466,"5-server":1974324,"*-client":881478,"*-server":1974332}}}},bids:[{params:{zoneId:`{placementMapSequence}-{integration}`}}]},interstitial:{bids:[{params:{zoneId:1979348},match:{integration:`client`}},{params:{zoneId:1979354},match:{integration:`server`}}]},video_stickyoutstream:{bids:[{params:{siteId:386004,zoneId:2150398,video:{language:`en`}},match:{integration:`client`}},{params:{siteId:420534,zoneId:2384630,video:{language:`en`}},match:{integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{zoneId:1259006},match:{integration:`client`}},{params:{zoneId:2055644},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{zoneId:1259010},match:{integration:`client`}},{params:{zoneId:2055648},match:{integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{zoneId:1259008},match:{integration:`client`}},{params:{zoneId:2055642},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{zoneId:1506800},match:{integration:`client`}},{params:{zoneId:2055646},match:{integration:`server`}}]}}},Qb=class extends Ry{constructor(e){let t=Sp()?Xb:Zb;super(e,t,G.Rubicon),C(this,`_videoCreativeIds`,[[`138323536473`,G.Rubicon],[`138323540955`,G.Rubicon],[`138323540961`,G.Rubicon],[`138323540964`,G.Rubicon],[`138323929606`,G.Rubicon],[`138323480624`,G.Rubicon],[`138323536455`,G.Rubicon],[`138323540856`,G.Rubicon],[`138323929612`,G.Rubicon],[`138323480642`,G.Rubicon],[`138323929516`,G.Rubicon],[`138323480600`,G.Rubicon],[`138323480636`,G.Rubicon],[`138323536467`,G.Rubicon],[`138323926693`,G.Rubicon],[`138323536476`,G.Rubicon],[`138323542002`,G.RubiconServer],[`138323932663`,G.RubiconServer],[`138323544525`,G.RubiconServer],[`138323932642`,G.RubiconServer],[`138323544531`,G.RubiconServer],[`138323544528`,G.RubiconServer],[`138323932765`,G.RubiconServer],[`138323932768`,G.RubiconServer],[`138323932852`,G.RubiconServer],[`138323932855`,G.RubiconServer],[`138323544354`,G.RubiconServer],[`138323932858`,G.RubiconServer],[`138323544357`,G.RubiconServer],[`138323544339`,G.RubiconServer],[`138323932672`,G.RubiconServer],[`138323932669`,G.RubiconServer]])}};Qb=w([x(),N(0,b(J))],Qb);let $b=class extends Ly{constructor(e,t){super(e,t),C(this,`multiformatBidder`,!0),C(this,`multiformatBannerNativeBidder`,!0),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Rubicon)),C(this,`gvlid`,52),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.Rubicon},server:{enabled:!0,name:G.Rubicon}}),C(this,`_bidderCodes`,{primary:G.Rubicon,secondary:G.RubiconServer,supplemental:[G.RubiconAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.native,Q.outstream,Q.instream]),C(this,`_multiformat`,{native:{enabled:!0}}),C(this,`_requiredProperties`,new Map([[`default`,{client:[`accountId`,`siteId`,`zoneId`],server:[`accountId`,`siteId`,`zoneId`]}],[`instream`,{client:[`accountId`,`siteId`,`zoneId`,`video`],server:[`accountId`,`siteId`,`zoneId`,`video`]}]]))}updateBidParams(e){this._addPositionParam(e,`atf`)}};$b=w([D(`RubiconBidder`),x(),N(0,b(J)),N(1,b(Qb))],$b);let ex={placementsLocation:{_default:{bids:[]},below_post:{bids:[{params:{pkey:`TfwwmBn7wpSIU7P021Tv5Bry`},match:{integration:`client`}},{params:{pkey:`lYcypns1sR41UGl0h96nIfyZ`},match:{integration:`server`}}]},content:{applyToAllBids:{paramLookup:{pkey:{map:{"1-client":`H522RDMWPRLxyeoKYY7Co7CR`,"1-server":`NaD1WjOkbTXg6m7BjU2f85gB`,"2-client":`V46JSZDcggGnvcXaSYdqLLWz`,"2-server":`tFS4EPNLcLK3doGfO7B0ycsn`,"3-client":`2HYE7hiRyhEJqg7RrD8vO2eU`,"3-server":`YMb6J9IbW3Scqr3kHN1xwqaQ`,"4-client":`07ipd6b7zRceezkqGukFdADF`,"4-server":`vlvnl49hwheBw37j4bFAR1FN`,"5-client":`LkVde67MzQL9Mvl06Y8TeZ0r`,"5-server":`Ce59qGlvXgBCdqFuhRI02C1I`,"6-client":`ecxJb24ifKGtjjxlvBI2Qc2m`,"6-server":`RjX99XiYQamMV6TO24lcIVNB`,"7-client":`dNJgEMPOY28wS5SLI6Gga6w8`,"7-server":`5MdcwKmEwUFhB6vR28PQXjpP`,"8-client":`bEHP238Hx2j5Vlaxcu9i5mY0`,"8-server":`ws7OLfvSKudHyAwdYjeZLiUr`,"9-client":`WW3xaymcx7Vnlk7GO68KbXbK`,"9-server":`7GpdYZF9OaATf1nsUO6KSo2c`,"*-client":`lVLB1r5bxCOeNcA7wf3p1zxq`,"*-server":`4OwUoWjwCeXeOe5A7KwSccpD`}}}},bids:[{params:{pkey:`{sequence}-{integration}`}}]},footer:{bids:[{params:{pkey:`ZerGMoHpdnJi9ifuH29s1SVC`},match:{integration:`client`}},{params:{pkey:`8ttPQPCJyc4d9UITRI0DVD4O`},match:{integration:`server`}}]},header:{applyToAllBids:{paramLookup:{pkey:{map:{"1-client":`VcUw5LwFJHyCT3sxIvxP4ZFh`,"1-server":`OsWYpFP0BMELzYBjJRrTnnRW`,"2-client":`cYHa6qwXvIR9zvmBB3IkxkxT`,"2-server":`ZTEuyOOrhPdD9aLDAzGlMyhm`}}}},bids:[{params:{pkey:`{sequence}-{integration}`}}]},recipe:{applyToAllBids:{paramLookup:{pkey:{map:{"1-client":`WTMm5vmDG8eCtVTgFUD2I2tA`,"1-server":`1hSkFEgD9kveJ1Bz81lvEWro`,"2-client":`dE8IMpLZCN8WhYnvAzgrVeG3`,"2-server":`i3Ea88beMSeSfbAlGNWGglFT`,"3-client":`dLIY7BwN95KYxNKj2VyIa0Pz`,"3-server":`Pyf3eNxZb7nQl9DQepmZ6K37`,"4-client":`ZQBW2njEBzJ0AlGq08qlc2Li`,"4-server":`i4hyEYwMnW9geBGy8nt5btGC`,"5-client":`vBQCb3tKqRNQT3pRD5UDXAjQ`,"5-server":`nfLEnT5BeqMmeCTpIqt1nbWs`}}}},bids:[{params:{pkey:`{placementMapSequence}-{integration}`}}]},sidebar:{applyToAllBids:{paramLookup:{pkey:{map:{"1-client":`4XwiEC6NIuIU1qrbnxKJVG8q`,"1-server":`vwL6jKFrVUapl6Q4hCJ8pYZN`,"2-client":`v6xFTawVU9rYGRBZfK5khU5C`,"2-server":`q4QyNJN9Hdx4rwypGOAOexsT`,"3-client":`WRPZrKZ7r3uhazJa11NCtLKU`,"3-server":`ANtHL9hv1UpvBO9Sq0Ok8DaL`,"4-client":`dIEMCS1F9kBCpNgN1wmj7w05`,"4-server":`u6nJDJtBGhtHwtHjw4cfbcKh`,"5-client":`nUNKy1QU1gOOzOuNMOwRJcR7`,"5-server":`ssoaCjwlt9TIZqnZhk7qPTrP`,"*-client":`q1100rFTOdpjlqqUA53Uldn0`,"*-server":`ynhKrMRdjeHLw7Ck5yNtfwkG`}}}},bids:[{params:{pkey:`{sequence}-{integration}`}}]},video_stickyoutstream:{bids:[{params:{pkey:`LeiP42Tc22NL5M3ZUKSqE6cn`},match:{integration:`client`}},{params:{pkey:`cEBlx19J3wnBxGdW6ogrdEp0`},match:{integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{pkey:`PozGRAyDWniDk451nKosfCUA`},match:{integration:`client`}},{params:{pkey:`siRnILBz0eGLgo1E38J5FdYZ`},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{pkey:`Mmy0n8kqRw5vOxVlmjXq9mVx`},match:{integration:`client`}},{params:{pkey:`5eOy3Qc1vcNo5kBFcaNPxjXQ`},match:{integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{pkey:`sMLWZBQNa6GaKC2khQiIg5Tj`},match:{integration:`client`}},{params:{pkey:`0e9n63eBBzwm3b0c0l3oQXxf`},match:{integration:`client`}},{params:{pkey:`w73BynSXXpbA1K4nZih9oQby`},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{pkey:`zVcXfvvxh17zj0foHubwNtyr`},match:{integration:`client`}},{params:{pkey:`LNci6gixWiLWgEcNeB1UOMHc`},match:{integration:`server`}}]}}},tx={placementsLocation:{_default:{bids:[]},below_post:{bids:[{params:{pkey:`WoVFJAUvQg9oowjifOQLhHfb`},match:{integration:`client`}},{params:{pkey:`LIEwvmMuVmssQ5NeNnA3LG7j`},match:{integration:`server`}}]},content:{applyToAllBids:{paramLookup:{pkey:{map:{"1-client":`9kDU40A4BJXchR7ikuWND5Ui`,"1-server":`UzMWqNiQufIagUwXXcUnC3RR`,"2-client":`ocdg6DMXhAfaTk7KgImuPCPi`,"2-server":`AgAUrutbIGojlToE3k84bzxl`,"3-client":`JQXmRwXj1jOjHCQF8ufXkKIJ`,"3-server":`yZZZxVNiOjM4qj37cnZmOhpm`,"4-client":`7DEh5436UHnmeKGzVXQVsvRk`,"4-server":`4mtr3RYgMDNCr8MiQN6QNN7A`,"5-client":`ZWVmSVe4txKlxxCQoqMcGIus`,"5-server":`EWFEzPp8DyciUpd7S2IbClhb`,"6-client":`T3CRI7sep8LYNDkOrvgSZUPQ`,"6-server":`19cNdBQ7O8p6vuuVMO7qDAlj`,"7-client":`T4LKxfIKZJCqFzBemjae6MGu`,"7-server":`GXckyQRgDUWb23RX4J75FZxG`,"8-client":`TIHmP6MqapPY4RpbkOm3pYpV`,"8-server":`SQZkIoibuQubwnJWlqMB0wyD`,"*-client":`mBGMr6mqftj8c2qcQky6UjEB`,"*-server":`C0WBeOXHffjxuUxTVCV95pEe`}}}},bids:[{params:{pkey:`{sequence}-{integration}`}}]},footer:{bids:[{params:{pkey:`B1C8tQAkMN7kpCuxh1hW6CY8`},match:{integration:`client`}},{params:{pkey:`47ay7QLdBDSeZxqhcmhI1GCJ`},match:{integration:`server`}}]},header:{applyToAllBids:{paramLookup:{pkey:{map:{"1-client":`jStKXZxN8Ccuf6XS4dKqhKr9`,"1-server":`m9Fpkq4iFy20pGMo6N3MIo5s`,"2-client":`TJx2N6gevlYeFawnBbRy4gRl`,"2-server":`oRnFtrhEhljXqLbZoTCwLhKI`}}}},bids:[{params:{pkey:`{sequence}-{integration}`}}]},recipe:{applyToAllBids:{paramLookup:{pkey:{map:{"1-client":`lklI3sAvIozfaIGNQGORtPOR`,"1-server":`3T7FySyUW1tYZTIj40NTh1v7`,"2-client":`nWhVYiRycgz0snwL4hTcS3vA`,"2-server":`KHkUCj4p7S5QUtqs4PHAL6Wm`,"3-client":`XTsNJ5wTa3CksG40rnRNHiib`,"3-server":`5l5aa7MPO4kmL72O9HPJh09l`,"4-client":`BpO7D8zDzdyGmFUOGNcRhUUm`,"4-server":`F0iZGMeqWPGsxl3T89ciqsoa`,"5-client":`XTckGeWn0TZXTDDgqFI9OkdQ`,"5-server":`fvFAWXIxDuRk7AACIi1DWb20`}}}},bids:[{params:{pkey:`{placementMapSequence}-{integration}`}}]},sidebar:{applyToAllBids:{paramLookup:{pkey:{map:{"1-client":`1BptSVedVseFELcEHmSjZmDr`,"1-server":`FERgtCkBYYJlLAMdOfrwzSUv`,"2-client":`TAk15aJmBw3jMFoV9vSYYWLl`,"2-server":`M0ETJ1WkxrBImmFZBDafhwfv`,"3-client":`oSwBRQCb6174NZ0wDEyxZW9E`,"3-server":`y0G8OyxjMjcTCOA0A8teaect`,"4-client":`UMKQPvhCYMOH1sOPVdYEDEQt`,"4-server":`UnGAf9ltEFV09DpREkqrEpK0`,"5-client":`WdPWJ92IfPqKgO5vRXvlsDO4`,"5-server":`hd3wbcwtoeg0OfouZfTDIfTD`,"*-client":`k8W1t71k8qmkYsiK4v3pop6j`,"*-server":`TDRVoNcJZQhrS1VJr0Qq6xq9`}}}},bids:[{params:{pkey:`{sequence}-{integration}`}}]},video_stickyoutstream:{bids:[{params:{pkey:`qKjlCz8NOStHzB15G18scbgS`},match:{integration:`client`}},{params:{pkey:`RUx5hQX5rX4bhGZWzZ0ta4op`},match:{integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{pkey:`I5VjN89qESPMegBdpCt92W8S`},match:{integration:`client`}},{params:{pkey:`pQwHn4uCAr3kQ8SE9qjIzMtV`},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{pkey:`iZXbFkwkNrOgpI7ue8o3mJda`},match:{integration:`client`}},{params:{pkey:`8EIqVDI1c2TA7IKq8rLk6oRG`},match:{integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{pkey:`sMLWZBQNa6GaKC2khQiIg5Tj`},match:{integration:`client`}},{params:{pkey:`yHkEhAMj24ubV101Fklbp6fA`},match:{integration:`client`}},{params:{pkey:`XQu5Rud4EL34FXVySow4WkgR`},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{pkey:`GCV9Do84nDBEFaVjb507H4iE`},match:{integration:`client`}},{params:{pkey:`6lY8mDlZX6W7ijhbh6OuDCfj`},match:{integration:`client`}},{params:{pkey:`uUSzUB6i3CeQ2y1A514w2lxL`},match:{integration:`server`}}]}}},nx=class extends Ry{constructor(e){let t=Sp()?ex:tx;super(e,t,G.Sharethrough),C(this,`_videoCreativeIds`,[[`138377683089`,G.Sharethrough],[`138377670131`,G.Sharethrough],[`138377670158`,G.Sharethrough],[`138377670173`,G.Sharethrough],[`138378141751`,G.Sharethrough],[`138377670161`,G.Sharethrough],[`138377670167`,G.Sharethrough],[`138377670170`,G.Sharethrough],[`138377670209`,G.Sharethrough],[`138377670212`,G.Sharethrough],[`138377670224`,G.Sharethrough],[`138377669645`,G.Sharethrough],[`138377670218`,G.Sharethrough],[`138377670221`,G.Sharethrough],[`138378141754`,G.Sharethrough],[`138377670215`,G.Sharethrough],[`138495437207`,G.SharethroughServer],[`138495437120`,G.SharethroughServer],[`138495437117`,G.SharethroughServer],[`138495437114`,G.SharethroughServer],[`138495437111`,G.SharethroughServer],[`138495437087`,G.SharethroughServer],[`138495437057`,G.SharethroughServer],[`138495142563`,G.SharethroughServer]])}};nx=w([x(),N(0,b(J))],nx);let rx=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Sharethrough)),C(this,`gvlid`,80),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.Sharethrough},server:{enabled:!0,name:G.Sharethrough}}),C(this,`_bidderCodes`,{primary:G.Sharethrough,secondary:G.SharethroughServer,supplemental:[G.SharethroughAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`pkey`],server:[`pkey`]}]]))}};rx=w([D(`SharethroughBidder`),x(),N(0,b(J)),N(1,b(nx))],rx);let ix={applyToAllBids:{paramLookup:{placementId:{map:{"Below_Post-*":`1428235`,"Content-*":`1600857`,"Content-1":`1605035`,"Content-2":`1327675`,"Content-3":`1764581`,"Content-4":`1744128`,"Content-5":`1845743`,"Content-6":`1687684`,"Content-7":`1354671`,"Content-8":`1381559`,"Content-9":`1462998`,"Footer-*":`1807924`,"Header-1":`1461334`,"Header-2":`1893163`,"Recipe-1":`1157928`,"Recipe-2":`1317399`,"Recipe-3":`1328764`,"Recipe-4":`1479814`,"Recipe-*":`1182664`,"Sidebar-1":`1656231`,"Sidebar-2":`1263544`,"Sidebar-3":`1840493`,"Sidebar-4":`1307359`,"Sidebar-5":`1324345`,"Sidebar-*":`1926917`,"Video_StickyOutstream-*":`1908311`,"Video_Coll_SOff_Smartphone-*":`1762083`,"Video_Collapse_Autoplay_SoundOff-*":`1493428`,"Video_In-Post_ClicktoPlay_SoundOn-*":`1008653`,"Video_Individual_Autoplay_SOff-*":`1347103`}}}},placementsLocation:{_default:{bids:[{params:{publisherId:`1927123`,placementId:`{location}-{placementMapSequence}`}}]}}},ax=class extends Ry{constructor(e){super(e,ix,G.StackAdapt),C(this,`_videoCreativeIds`,[[`138514339302`,G.StackAdapt],[`138514339467`,G.StackAdapt],[`138514339479`,G.StackAdapt],[`138514516163`,G.StackAdapt],[`138514516166`,G.StackAdapt],[`138514516184`,G.StackAdapt],[`138514516187`,G.StackAdapt],[`138514516190`,G.StackAdapt]])}};ax=w([x(),N(0,b(J))],ax);let ox=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.StackAdapt)),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.StackAdapt},server:{enabled:!1}}),C(this,`_bidderCodes`,{primary:G.StackAdapt}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`publisherId`,`placementId`]}]]))}};ox=w([D(`StackAdaptBidder`),x(),N(0,b(J)),N(1,b(ax))],ox);let sx={applyToAllBids:{params:{pageId:112062}},placementsLocation:{_default:{bids:[]},below_post:{bids:[{params:{placementId:121842},skip:{device:[`mobile`],mediaTypesAll:[`outstream`]}},{params:{placementId:121842},match:{mediaTypesAll:[`outstream`]},skip:{device:[`mobile`],adTypes:[`outstreamDesktop`]}},{params:{placementId:121834},match:{adTypes:[`outstreamDesktop`],mediaTypesAll:[`outstream`]},skip:{device:[`mobile`]}},{params:{placementId:121842},match:{device:[`mobile`]},skip:{lazy:!0}},{params:{placementId:121842},match:{device:[`mobile`],mediaTypesAll:[`outstream`],lazy:!0},skip:{adTypesAny:[`outstreamMobile`,`miniscroller`,`interscroller`]}},{params:{placementId:121842},match:{device:[`mobile`],lazy:!0},skip:{mediaTypesAll:[`outstream`],adTypesAny:[`miniscroller`,`interscroller`]}},{params:{placementId:121895},match:{device:[`mobile`],lazy:!0,adTypes:[`outstreamMobile`,`miniscroller`,`interscroller`],mediaTypesAll:[`outstream`]}},{params:{placementId:121834},match:{device:[`mobile`],adTypes:[`outstreamMobile`],mediaTypesAll:[`outstream`],lazy:!0},skip:{adTypesAny:[`miniscroller`,`interscroller`]}},{params:{placementId:121837},match:{device:[`mobile`],adTypes:[`outstreamMobile`,`miniscroller`],mediaTypesAll:[`outstream`],lazy:!0},skip:{adTypes:[`interscroller`]}},{params:{placementId:121838},match:{device:[`mobile`],adTypes:[`outstreamMobile`,`interscroller`],mediaTypesAll:[`outstream`],lazy:!0},skip:{adTypes:[`miniscroller`]}},{params:{placementId:121840},match:{device:[`mobile`],adTypes:[`miniscroller`,`interscroller`],mediaTypesAll:[`outstream`],lazy:!0},skip:{adTypes:[`outstreamMobile`]}},{params:{placementId:121840},match:{device:[`mobile`],adTypes:[`miniscroller`,`interscroller`],lazy:!0},skip:{mediaTypesAll:[`outstream`]}},{params:{placementId:121835},match:{device:[`mobile`],adTypes:[`miniscroller`],mediaTypesAll:[`outstream`],lazy:!0},skip:{adTypesAny:[`outstreamMobile`,`interscroller`]}},{params:{placementId:121835},match:{device:[`mobile`],adTypes:[`miniscroller`],lazy:!0},skip:{mediaTypesAll:[`outstream`],adTypes:[`interscroller`]}},{params:{placementId:121836},match:{device:[`mobile`],adTypes:[`interscroller`],mediaTypesAll:[`outstream`],lazy:!0},skip:{adTypesAny:[`outstreamMobile`,`miniscroller`]}},{params:{placementId:121836},match:{device:[`mobile`],adTypes:[`interscroller`],lazy:!0},skip:{mediaTypesAll:[`outstream`],adTypes:[`miniscroller`]}}]},content:{bids:[{params:{placementId:121842},skip:{device:[`mobile`],mediaTypesAll:[`outstream`]}},{params:{placementId:121842},match:{mediaTypesAll:[`outstream`]},skip:{device:[`mobile`],adTypes:[`outstreamDesktop`]}},{params:{placementId:121834},match:{adTypes:[`outstreamDesktop`],mediaTypesAll:[`outstream`]},skip:{device:[`mobile`]}},{params:{placementId:121842},match:{device:[`mobile`],mediaTypesAll:[`outstream`]},skip:{adTypesAny:[`outstreamMobile`,`miniscroller`,`interscroller`]}},{params:{placementId:121842},match:{device:[`mobile`]},skip:{mediaTypesAll:[`outstream`],adTypesAny:[`miniscroller`,`interscroller`]}},{params:{placementId:121895},match:{device:[`mobile`],adTypes:[`outstreamMobile`,`miniscroller`,`interscroller`],mediaTypesAll:[`outstream`]}},{params:{placementId:121834},match:{device:[`mobile`],adTypes:[`outstreamMobile`],mediaTypesAll:[`outstream`]},skip:{adTypesAny:[`miniscroller`,`interscroller`]}},{params:{placementId:121837},match:{device:[`mobile`],adTypes:[`outstreamMobile`,`miniscroller`],mediaTypesAll:[`outstream`]},skip:{adTypes:[`interscroller`]}},{params:{placementId:121838},match:{device:[`mobile`],adTypes:[`outstreamMobile`,`interscroller`],mediaTypesAll:[`outstream`]},skip:{adTypes:[`miniscroller`]}},{params:{placementId:121840},match:{device:[`mobile`],adTypes:[`miniscroller`,`interscroller`],mediaTypesAll:[`outstream`]},skip:{adTypes:[`outstreamMobile`]}},{params:{placementId:121840},match:{device:[`mobile`],adTypes:[`miniscroller`,`interscroller`]},skip:{mediaTypesAll:[`outstream`]}},{params:{placementId:121835},match:{device:[`mobile`],adTypes:[`miniscroller`],mediaTypesAll:[`outstream`]},skip:{adTypesAny:[`outstreamMobile`,`interscroller`]}},{params:{placementId:121835},match:{device:[`mobile`],adTypes:[`miniscroller`]},skip:{mediaTypesAll:[`outstream`],adTypes:[`interscroller`]}},{params:{placementId:121836},match:{device:[`mobile`],adTypes:[`interscroller`],mediaTypesAll:[`outstream`]},skip:{adTypesAny:[`outstreamMobile`,`miniscroller`]}},{params:{placementId:121836},match:{device:[`mobile`],adTypes:[`interscroller`]},skip:{mediaTypesAll:[`outstream`],adTypes:[`miniscroller`]}}]},footer:{bids:[{params:{placementId:121842}}]},header:{bids:[{params:{placementId:121842}}]},recipe:{bids:[{params:{placementId:121842},skip:{device:[`mobile`],mediaTypesAll:[`outstream`]}},{params:{placementId:121842},match:{mediaTypesAll:[`outstream`]},skip:{device:[`mobile`],adTypes:[`outstreamDesktop`]}},{params:{placementId:121834},match:{adTypes:[`outstreamDesktop`],mediaTypesAll:[`outstream`]},skip:{device:[`mobile`]}},{params:{placementId:121842},match:{device:[`mobile`],mediaTypesAll:[`outstream`]},skip:{adTypesAny:[`outstreamMobile`,`miniscroller`]}},{params:{placementId:121842},match:{device:[`mobile`]},skip:{mediaTypesAll:[`outstream`],adTypes:[`miniscroller`]}},{params:{placementId:121834},match:{device:[`mobile`],adTypes:[`outstreamMobile`],mediaTypesAll:[`outstream`]},skip:{adTypes:[`miniscroller`]}},{params:{placementId:121837},match:{device:[`mobile`],adTypes:[`outstreamMobile`,`miniscroller`],mediaTypesAll:[`outstream`]}},{params:{placementId:121835},match:{device:[`mobile`],adTypes:[`miniscroller`],mediaTypesAll:[`outstream`]},skip:{adTypes:[`outstreamMobile`]}},{params:{placementId:121835},match:{device:[`mobile`],adTypes:[`miniscroller`]},skip:{mediaTypesAll:[`outstream`]}}]},sidebar:{bids:[{params:{placementId:121842}}]}}},cx=class extends Ry{constructor(e){super(e,sx,G.Teads)}};cx=w([x(),N(0,b(J))],cx);let lx=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Teads)),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.Teads},server:{enabled:!1}}),C(this,`_bidderCodes`,{primary:G.Teads}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`placementId`,`pageId`],server:[`placementId`,`pageId`]}]]))}};lx=w([D(`TeadsBidder`),x(),N(0,b(J)),N(1,b(cx))],lx);let ux={applyOptionsToAllBids:[{retrieveFromFile:[`video`],match:{mediaTypesAll:[`instream`]}}],placementsLocation:{_default:{bids:[]},below_post:{bids:[{params:{inventoryCode:`adblock_below_post_1_hdx`},match:{integration:`client`}},{params:{inventoryCode:`adblock_below_post_1_hdx_pbs2s`},match:{integration:`server`}},{params:{inventoryCode:`adblockron_belowpost_{device}_728x50`},match:{sizesAll:[[728,50]],integration:`client`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adblockron_belowpost_{device}_728x50_pbs2s`},match:{sizesAll:[[728,50]],integration:`server`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adblockron_belowpost_{device}_728x90`},match:{sizesAll:[[728,90]],integration:`client`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adblockron_belowpost_{device}_728x90_pbs2s`},match:{sizesAll:[[728,90]],integration:`server`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adblockron_belowpost_{device}_300x250`},match:{device:[`mobile`],sizesAll:[[300,250]],integration:`client`}},{params:{inventoryCode:`adblockron_belowpost_{device}_300x250_pbs2s`},match:{device:[`mobile`],sizesAll:[[300,250]],integration:`server`}},{params:{inventoryCode:`adblockron_belowpost_{device}_320x100`},match:{device:[`mobile`],sizesAll:[[320,100]],integration:`client`}},{params:{inventoryCode:`adblockron_belowpost_{device}_320x100_pbs2s`},match:{device:[`mobile`],sizesAll:[[320,100]],integration:`server`}}]},content:{bids:[{params:{inventoryCode:`adblock_content_{placementMapSequence}_hdx`},match:{integration:`client`},skip:{nativeEnabled:!0}},{params:{inventoryCode:`adblock_content_{placementMapSequence}_hdx_pbs2s`},match:{integration:`server`},skip:{nativeEnabled:!0}},{params:{inventoryCode:`adblockron_content_fixed_{device}`},match:{nativeEnabled:!0,integration:`client`,sequence:[1]}},{params:{inventoryCode:`adblockron_content_fixed_{device}_pbs2s`},match:{nativeEnabled:!0,integration:`server`,sequence:[1]}},{params:{inventoryCode:`adblockron_content{placementMapSequence}_fixed_{device}`},match:{nativeEnabled:!0,integration:`client`},skip:{sequence:[1]}},{params:{inventoryCode:`adblockron_content{placementMapSequence}_fixed_{device}_pbs2s`},match:{nativeEnabled:!0,integration:`server`},skip:{sequence:[1]}},{params:{inventoryCode:`adblockron_content_{device}_hive`},match:{mediaTypesAll:[`outstream`],integration:`client`}},{params:{inventoryCode:`adblockron_content_{device}_hive_pbs2s`},match:{mediaTypesAll:[`outstream`],integration:`server`}},{params:{inventoryCode:`adblockron_content_mobile_largeformat_opt_in`},match:{adTypes:[`largeFormatsMobile`],device:[`mobile`],integration:`client`}},{params:{inventoryCode:`adblockron_content_mobile_largeformat_opt_in_pbs2s`},match:{adTypes:[`largeFormatsMobile`],device:[`mobile`],integration:`server`}}]},header:{bids:[{params:{inventoryCode:`adblock_header_{sequence}_hdx`},match:{integration:`client`}},{params:{inventoryCode:`adblock_header_{sequence}_hdx_pbs2s`},match:{integration:`server`}},{params:{inventoryCode:`adblockron_header_{device}_970x250`},match:{sizesAll:[[970,250]],integration:`client`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adblockron_header_{device}_970x250_pbs2s`},match:{sizesAll:[[970,250]],integration:`server`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adblockron_header_{device}_728x90`},match:{sizesAll:[[728,90]],integration:`client`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adblockron_header_{device}_728x90_pbs2s`},match:{sizesAll:[[728,90]],integration:`server`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adblockron_header_{device}_300x100`},match:{device:[`mobile`],sizesAll:[[300,100]],integration:`client`}},{params:{inventoryCode:`adblockron_header_{device}_300x100_pbs2s`},match:{device:[`mobile`],sizesAll:[[300,100]],integration:`server`}}]},footer:{bids:[{params:{inventoryCode:`adblock_footer_1_hdx`},match:{integration:`client`}},{params:{inventoryCode:`adblock_footer_1_hdx_pbs2s`},match:{integration:`server`}}]},sidebar:{bids:[{params:{inventoryCode:`adblock_sidebar_{placementMapSequence}_hdx`},match:{integration:`client`,sequenceMax:5},skip:{device:[`mobile`],adTypes:[`nativeDesktopSidebar`]}},{params:{inventoryCode:`adblock_sidebar_{placementMapSequence}_hdx_pbs2s`},match:{integration:`server`,sequenceMax:5},skip:{device:[`mobile`],adTypes:[`nativeDesktopSidebar`]}},{params:{inventoryCode:`adblockron_sidebar{placementMapSequence}_fixed_{device}`},match:{adTypes:[`nativeDesktopSidebar`],integration:`client`,sequenceMax:5},skip:{device:[`mobile`]}},{params:{inventoryCode:`adblockron_sidebar{placementMapSequence}_fixed_{device}_pbs2s`},match:{adTypes:[`nativeDesktopSidebar`],integration:`server`,sequenceMax:5},skip:{device:[`mobile`]}},{params:{inventoryCode:`adblockron_sidebar_fixed_{device}`},match:{adTypes:[`nativeDesktopSidebar`],integration:`client`,sequenceMin:9},skip:{device:[`mobile`]}},{params:{inventoryCode:`adblockron_sidebar_fixed_{device}_pbs2s`},match:{adTypes:[`nativeDesktopSidebar`],integration:`server`,sequenceMin:9},skip:{device:[`mobile`]}},{params:{inventoryCode:`adblock_sidebar_{placementMapSequence}_hdx`},match:{device:[`mobile`],integration:`client`}},{params:{inventoryCode:`adblock_sidebar_{placementMapSequence}_hdx_pbs2s`},match:{device:[`mobile`],integration:`server`}}]},recipe:{bids:[{params:{inventoryCode:`adblock_recipe_{placementMapSequence}_hdx`},match:{integration:`client`},skip:{device:[`mobile`],nativeEnabled:!0}},{params:{inventoryCode:`adblock_recipe_{placementMapSequence}_hdx_pbs2s`},match:{integration:`server`},skip:{device:[`mobile`],nativeEnabled:!0}},{params:{inventoryCode:`adblockron_recipe{placementMapSequence}_fixed_{device}`},match:{nativeEnabled:!0,integration:`client`}},{params:{inventoryCode:`adblockron_recipe{placementMapSequence}_fixed_{device}_pbs2s`},match:{nativeEnabled:!0,integration:`server`}},{params:{inventoryCode:`adblock_recipe_{placementMapSequence}_hdx`},match:{device:[`mobile`],integration:`client`},skip:{nativeEnabled:!0}},{params:{inventoryCode:`adblock_recipe_{placementMapSequence}_hdx_pbs2s`},match:{device:[`mobile`],integration:`server`},skip:{nativeEnabled:!0}}]}}},dx={applyOptionsToAllBids:[{retrieveFromFile:[`video`],match:{mediaTypesAll:[`instream`]}}],placementsLocation:{_default:{bids:[]},content:{bids:[{params:{inventoryCode:`adthrive_communities_{placementMapName}_{device}`},match:{featureRollout:[`communities-enabled`],integration:`client`},supplemental:!1},{params:{inventoryCode:`adthrive_communities_{placementMapName}_{device}_pbs2s`},match:{featureRollout:[`communities-enabled`],integration:`server`},supplemental:!1},{params:{inventoryCode:`adthrive_content_{placementMapSequence}_hdx`},match:{integration:`client`},skip:{nativeEnabled:!0}},{params:{inventoryCode:`adthrive_content_{placementMapSequence}_hdx_pbs2s`},match:{integration:`server`},skip:{nativeEnabled:!0}},{params:{inventoryCode:`adthrive{category}_content_fixed_{device}`},match:{nativeEnabled:!0,integration:`client`,sequence:[1]}},{params:{inventoryCode:`adthrive{category}_content_fixed_{device}_pbs2s`},match:{nativeEnabled:!0,integration:`server`,sequence:[1]}},{params:{inventoryCode:`adthrive{category}_content{placementMapSequence}_fixed_{device}`},match:{nativeEnabled:!0,integration:`client`},skip:{sequence:[1]}},{params:{inventoryCode:`adthrive{category}_content{placementMapSequence}_fixed_{device}_pbs2s`},match:{nativeEnabled:!0,integration:`server`},skip:{sequence:[1]}},{params:{inventoryCode:`adthriveron_content_{device}_hive`},match:{mediaTypesAll:[`outstream`],integration:`client`}},{params:{inventoryCode:`adthriveron_content_{device}_hive_pbs2s`},match:{mediaTypesAll:[`outstream`],integration:`server`}},{params:{inventoryCode:`adthriveron_content_mobile_largeformat_opt_in`},match:{adTypes:[`largeFormatsMobile`],device:[`mobile`],integration:`client`}},{params:{inventoryCode:`adthriveron_content_mobile_largeformat_opt_in_pbs2s`},match:{adTypes:[`largeFormatsMobile`],device:[`mobile`],integration:`server`}}]},below_post:{bids:[{params:{inventoryCode:`adthrive_below_post_1_hdx`},match:{integration:`client`}},{params:{inventoryCode:`adthrive_below_post_1_hdx_pbs2s`},match:{integration:`server`}},{params:{inventoryCode:`adthriveron_belowpost_{device}_728x250`},match:{sizesAll:[[728,250]],integration:`client`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthriveron_belowpost_{device}_728x250_pbs2s`},match:{sizesAll:[[728,250]],integration:`server`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthriveron_belowpost_{device}_728x90`},match:{sizesAll:[[728,90]],integration:`client`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthriveron_belowpost_{device}_728x90_pbs2s`},match:{sizesAll:[[728,90]],integration:`server`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthriveron_belowpost_{device}_300x250`},match:{device:[`mobile`],sizesAll:[[300,250]],integration:`client`}},{params:{inventoryCode:`adthriveron_belowpost_{device}_300x250_pbs2s`},match:{device:[`mobile`],sizesAll:[[300,250]],integration:`server`}},{params:{inventoryCode:`adthriveron_belowpost_{device}_320x100`},match:{device:[`mobile`],sizesAll:[[320,100]],integration:`client`}},{params:{inventoryCode:`adthriveron_belowpost_{device}_320x100_pbs2s`},match:{device:[`mobile`],sizesAll:[[320,100]],integration:`server`}}]},header:{bids:[{params:{inventoryCode:`adthrive_header_{sequence}_hdx`},match:{integration:`client`}},{params:{inventoryCode:`adthrive_header_{sequence}_hdx_pbs2s`},match:{integration:`server`}},{params:{inventoryCode:`adthriveron_header_{device}_970x250`},match:{sizesAll:[[970,250]],integration:`client`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthriveron_header_{device}_970x250_pbs2s`},match:{sizesAll:[[970,250]],integration:`server`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthriveron_header_{device}_728x90`},match:{sizesAll:[[728,90]],integration:`client`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthriveron_header_{device}_728x90_pbs2s`},match:{sizesAll:[[728,90]],integration:`server`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthriveron_header_{device}_320x100`},match:{device:[`mobile`],sizesAll:[[320,100]],integration:`client`}},{params:{inventoryCode:`adthriveron_header_{device}_320x100_pbs2s`},match:{device:[`mobile`],sizesAll:[[320,100]],integration:`server`}}]},footer:{bids:[{params:{inventoryCode:`adthrive_footer_1_hdx`},match:{integration:`client`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthrive_footer_1_hdx_pbs2s`},match:{integration:`server`},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthrive_footer_1_hdx_{device}`},match:{device:[`mobile`],integration:`client`}},{params:{inventoryCode:`adthrive_footer_1_hdx_pbs2s_{device}`},match:{device:[`mobile`],integration:`server`}}]},recipe:{bids:[{params:{inventoryCode:`adthrive_recipe_{placementMapSequence}_hdx`},match:{integration:`client`},skip:{device:[`mobile`],nativeEnabled:!0}},{params:{inventoryCode:`adthrive_recipe_{placementMapSequence}_hdx_pbs2s`},match:{integration:`server`},skip:{device:[`mobile`],nativeEnabled:!0}},{params:{inventoryCode:`adthrive{category}_recipe{placementMapSequence}_fixed_{device}`},match:{nativeEnabled:!0,integration:`client`}},{params:{inventoryCode:`adthrive{category}_recipe{placementMapSequence}_fixed_{device}_pbs2s`},match:{nativeEnabled:!0,integration:`server`}},{params:{inventoryCode:`adthrive_recipe_{placementMapSequence}_hdx`},match:{device:[`mobile`],integration:`client`},skip:{nativeEnabled:!0}},{params:{inventoryCode:`adthrive_recipe_{placementMapSequence}_hdx_pbs2s`},match:{device:[`mobile`],integration:`server`},skip:{nativeEnabled:!0}}]},sidebar:{bids:[{params:{inventoryCode:`adthrive_communities_{placementMapName}_{device}`},match:{sequence:[1],featureRollout:[`communities-enabled`],integration:`client`},supplemental:!1},{params:{inventoryCode:`adthrive_communities_{placementMapName}_{device}_pbs2s`},match:{sequence:[1],featureRollout:[`communities-enabled`],integration:`server`},supplemental:!1},{params:{inventoryCode:`adthrive_sidebar_{placementMapSequence}_hdx`},match:{integration:`client`},skip:{device:[`mobile`],adTypes:[`nativeDesktopSidebar`]}},{params:{inventoryCode:`adthrive_sidebar_{placementMapSequence}_hdx_pbs2s`},match:{integration:`server`},skip:{device:[`mobile`],adTypes:[`nativeDesktopSidebar`]}},{params:{inventoryCode:`adthrive{category}_sidebar{placementMapSequence}_fixed_{device}`},match:{adTypes:[`nativeDesktopSidebar`],integration:`client`,sequenceMax:5},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthrive{category}_sidebar{placementMapSequence}_fixed_{device}_pbs2s`},match:{adTypes:[`nativeDesktopSidebar`],integration:`server`,sequenceMax:5},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthrive{category}_sidebar_fixed_{device}`},match:{adTypes:[`nativeDesktopSidebar`],integration:`client`,sequenceMin:9},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthrive{category}_sidebar_fixed_{device}_pbs2s`},match:{adTypes:[`nativeDesktopSidebar`],integration:`server`,sequenceMin:9},skip:{device:[`mobile`]}},{params:{inventoryCode:`adthrive_sidebar_{placementMapSequence}_hdx`},match:{device:[`mobile`],integration:`client`}},{params:{inventoryCode:`adthrive_sidebar_{placementMapSequence}_hdx_pbs2s`},match:{device:[`mobile`],integration:`server`}}]},interstitial:{bids:[{params:{inventoryCode:`adthriveron_interstitial_multisize`},match:{integration:`client`}},{params:{inventoryCode:`adthriveron_interstitial_multisize`},match:{integration:`server`}}]},video_stickyoutstream:{bids:[{params:{inventoryCode:`adthrive_video_stickyoutstream_1_{device}_hdx`},match:{integration:`client`}},{params:{inventoryCode:`adthrive_video_stickyoutstream_1_{device}_hdx_pbs2s`},match:{integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{inventoryCode:`AdThriveRON_instream_desktopcollapse_prebid_c2s`},match:{integration:`client`}},{params:{inventoryCode:`AdThriveRON_instream_desktopcollapse_prebid`},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{inventoryCode:`AdThriveRON_instream_mwebsticky_prebid_c2s`},match:{integration:`client`}},{params:{inventoryCode:`AdThriveRON_instream_mwebsticky_prebid`},match:{integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{inventoryCode:`AdThriveRON_instream_CTP_prebid_c2s`},match:{integration:`client`}},{params:{inventoryCode:`AdThriveRON_instream_CTP_prebid`},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{inventoryCode:`AdThriveRON_instream_contextcollapse_prebid_c2s`},match:{integration:`client`}},{params:{inventoryCode:`AdThriveRON_instream_contextcollapse_prebid`},match:{integration:`server`}}]}}},fx=class extends Ry{constructor(e){let t=Sp()?ux:dx;super(e,t,G.Triplelift),C(this,`_videoCreativeIds`,[[`138323510289`,G.Triplelift],[`138323472959`,G.Triplelift],[`138323472731`,G.Triplelift],[`138323472671`,G.Triplelift],[`138323472641`,G.Triplelift],[`138323473061`,G.Triplelift],[`138323473058`,G.Triplelift],[`138323473019`,G.Triplelift],[`138323473016`,G.Triplelift],[`138323472986`,G.Triplelift],[`138323472734`,G.Triplelift],[`138323473064`,G.Triplelift],[`138323473055`,G.Triplelift],[`138323472728`,G.Triplelift],[`138323472674`,G.Triplelift],[`138323472737`,G.Triplelift],[`138326649881`,G.Triplelift],[`138326691825`,G.Triplelift],[`138326691828`,G.Triplelift],[`138326691831`,G.Triplelift],[`138326691834`,G.Triplelift],[`138326691837`,G.Triplelift],[`138326691840`,G.Triplelift],[`138326691843`,G.Triplelift],[`138326691846`,G.Triplelift],[`138326691783`,G.Triplelift],[`138326691786`,G.Triplelift],[`138326691789`,G.Triplelift],[`138326691792`,G.Triplelift],[`138326691753`,G.Triplelift],[`138326691756`,G.Triplelift],[`138326691570`,G.Triplelift],[`138348653814`,G.TripleliftServer],[`138348654438`,G.TripleliftServer],[`138349054156`,G.TripleliftServer],[`138349054168`,G.TripleliftServer],[`138349054201`,G.TripleliftServer],[`138348654432`,G.TripleliftServer],[`138348654444`,G.TripleliftServer],[`138349054186`,G.TripleliftServer],[`138349054204`,G.TripleliftServer],[`138349054210`,G.TripleliftServer],[`138349054435`,G.TripleliftServer],[`138349054189`,G.TripleliftServer],[`138349054207`,G.TripleliftServer],[`138349054426`,G.TripleliftServer],[`138349054429`,G.TripleliftServer],[`138349054432`,G.TripleliftServer]])}};fx=w([x(),N(0,b(J))],fx);let px=class extends Ly{constructor(e,t){super(e,t),C(this,`multiformatBidder`,!0),C(this,`multiformatBannerVideoBidder`,!0),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Triplelift)),C(this,`gvlid`,28),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.Triplelift},server:{enabled:!0,name:G.Triplelift}}),C(this,`_bidderCodes`,{primary:G.Triplelift,secondary:G.TripleliftServer,supplemental:[G.TripleliftAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_multiformat`,{outstream:{enabled:!0},native:{enabled:!0,backup:!0}}),C(this,`_paramKeyMap`,{video:this._getVideoParam.bind(this)}),C(this,`_requiredProperties`,new Map([[`default`,{client:[`inventoryCode`],server:[`inventoryCode`]}],[`instream`,{client:[`inventoryCode`,`video`],server:[`inventoryCode`,`video`]}]])),C(this,`_settings`,{adserverTargeting:[{key:this._config.prebid.targetingKeyMap.ATTR,val:({mediaType:e,meta:t,tl_source:n})=>{let r=t?.mediaType??this._tlSourceMap.get(n??``)??e;return(e===`banner`&&t?.mediaType===`video`||t?.isInBannerVideo)&&(r=`ibv`),r}}]}),C(this,`_tlSourceMap`,new Map([[`hdx`,`banner`],[`tlx`,`native`]]))}_getVideoParam(e){let t=`id`in e?e.id:e.name,n=this._config.video.mimeType,r=this._config.video.playbackmethod?.get(t)?.[0];return{...It()?{w:640,h:360}:{w:400,h:225},api:this._config.video.apiValue,...n&&{mimes:n},...this._config.video.videoProtocols?.scope===`all`&&{protocols:this._config.video.videoProtocols.protocols},...r&&{playbackmethod:r},pos:this._config.video.position.id}}};px=w([D(`TripleLiftBidder`),x(),N(0,b(J)),N(1,b(fx))],px);let mx={applyToAllBids:{params:{supplySourceId:`cafemedia`,siteId:`{siteId}`,publisherId:`{siteId}`}},placementsLocation:{_default:{bids:[{params:{placementId:`AdThrive_{location}_{placementMapSequence}`},skip:{mediaTypesAll:[`instream`]}}]},recipe:{bids:[{params:{placementId:`AdThrive_{location}_{placementMapSequence}`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{placementId:`Video_Collapse_Autoplay_SoundOff`}}]},video_coll_soff_smartphone:{bids:[{params:{placementId:`Video_Coll_SOff_Smartphone`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{placementId:`Video_In-Post_ClicktoPlay_SoundOn`}}]},video_individual_autoplay_soff:{bids:[{params:{placementId:`Video_Individual_Autoplay_SOff`}}]}}},hx=class extends Ry{constructor(e){super(e,mx,G.TTD),C(this,`_videoCreativeIds`,[[`138323472896`,G.TTD],[`138323532681`,G.TTD],[`138323532645`,G.TTD],[`138323532675`,G.TTD],[`138323532678`,G.TTD],[`138323922211`,G.TTD],[`138323530488`,G.TTD],[`138323532606`,G.TTD],[`138323532648`,G.TTD],[`138323922202`,G.TTD],[`138323532672`,G.TTD],[`138323922205`,G.TTD],[`138323922010`,G.TTD],[`138323922208`,G.TTD],[`138323532642`,G.TTD],[`138323921998`,G.TTD]])}};hx=w([x(),N(0,b(J))],hx);let gx=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.TTD)),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.TTD},server:{enabled:!0,name:G.TTD}}),C(this,`_bidderCodes`,{primary:G.TTD}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`publisherId`,`siteId`,`placementId`,`supplySourceId`],server:[`publisherId`,`siteId`,`placementId`,`supplySourceId`]}]]))}};gx=w([D(`TTDBidder`),x(),N(0,b(J)),N(1,b(hx))],gx);var _x=class extends Ly{constructor(e,t){super(e,t),C(this,`gvlid`,677),C(this,`_adapterEnablement`,{client:{enabled:!0,name:G.Undertone},server:{enabled:!0,name:G.Undertone}}),C(this,`_requiredProperties`,new Map([[`default`,{client:[`publisherId`,`placementId`],server:[`publisherId`,`placementId`]}]]))}};let vx={applyToAllBids:{params:{publisherId:2002}},placementsLocation:{_default:{bids:[]},below_post:{bids:[{params:{placementId:`2002034`,size:[[1,2]]},match:{adTypes:[`interscroller`],viewabilityThresholdMet:!0}},{params:{placementId:`2002034`,size:[[1,2]]},labels:[`refresh`],match:{adTypes:[`interscroller`],viewabilityThresholdMet:!1}}]},content:{bids:[{params:{placementId:`2002001`,size:[[1,2]]},match:{adTypes:[`interscroller`],sequence:[1]}},{retrieveFromFile:[`size`],params:{placementId:`2002002`},match:{sizesAny:[[1,2],[300,250],[728,90]],sequence:[1]}},{retrieveFromFile:[`size`],params:{placementId:`2002003`},match:{sizesAny:[[1,2],[300,250],[728,90]],sequence:[2]}},{retrieveFromFile:[`size`],params:{placementId:`2002004`},match:{sizesAny:[[1,2],[300,250],[728,90]],sequence:[3]}},{retrieveFromFile:[`size`],params:{placementId:`2002005`},match:{sizesAny:[[1,2],[300,250],[728,90]],sequence:[4]}}]},footer:{bids:[{params:{placementId:`2002033`,size:[[320,50]]},match:{adTypes:[`expandableFooter`],device:[`mobile`]}},{params:{placementId:`2002038`,size:[[1,1]]},match:{adTypes:[`expandableFooter`],device:[`mobile`]},skip:{mobileStickyPlayerOnPage:!0}},{params:{placementId:`2002039`,size:[[1,1]]},match:{adTypes:[`animatedFooter`],device:[`mobile`]}}]},interstitial:{bids:[{params:{placementId:`2002040`,size:[[1,1]]},match:{sizesAll:[[1,1]]}}]},sidebar:{bids:[{retrieveFromFile:[`size`],params:{placementId:`2002032`},match:{sequenceMin:9,sizesAny:[[300,250],[160,600],[300,600]]}}]},video_collapse_autoplay_soundoff:{bids:[{params:{placementId:2002044}}]},video_coll_soff_smartphone:{bids:[{params:{placementId:2002045}}]}}},yx=class extends Ry{constructor(e){super(e,vx,G.Undertone),C(this,`_videoCreativeIds`,[[`138422425195`,G.UndertoneServer],[`138421771020`,G.UndertoneServer],[`138421771017`,G.UndertoneServer],[`138421771014`,G.UndertoneServer],[`138421761770`,G.UndertoneServer],[`138421761767`,G.UndertoneServer],[`138421761764`,G.UndertoneServer],[`138421761761`,G.UndertoneServer]])}};yx=w([x(),N(0,b(J))],yx);let bx=class extends _x{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.UndertoneServer)),C(this,`_bidderCodes`,{primary:G.UndertoneServer,supplemental:[G.UndertoneAY]}),C(this,`_mediatypeEnablement`,[Q.instream])}};bx=w([D(`UndertoneServerBidder`),x(),N(0,b(J)),N(1,b(yx))],bx);let xx=class extends _x{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Undertone)),C(this,`_bidderCodes`,{primary:G.Undertone}),C(this,`_mediatypeEnablement`,[Q.banner]),C(this,`_paramKeyMap`,{size:this._getSizeParam.bind(this)}),C(this,`_sizeMap`,{[H.Content]:[[1,2],[300,250],[728,90]],[H.Sidebar]:[[300,250],[160,600],[300,600]]})}_getSizeParam(e){let t=`id`in e,n=t?e.location:e.name;return this._sizeMap[n]?.reduce((n,r)=>(t&&e.sizes.some(e=>e[0]===r[0]&&e[1]===r[1])&&n.push(r),n),[])}};xx=w([D(`UndertoneBidder`),S(),N(0,b(J)),N(1,b(yx))],xx);let Sx={placementsLocation:{_default:{bids:[{params:{siteId:249232},skip:{mediaTypesAll:[`outstream`]}}]}}},Cx=class extends Ry{constructor(e){super(e,Sx,G.Unruly),C(this,`_videoCreativeIds`,[[`138398568419`,G.Unruly],[`138398715243`,G.Unruly],[`138398716629`,G.Unruly],[`138398716632`,G.Unruly],[`138398716656`,G.Unruly],[`138398716659`,G.Unruly],[`138398716662`,G.Unruly],[`138398716665`,G.Unruly],[`138398716683`,G.Unruly],[`138398716686`,G.Unruly],[`138398716689`,G.Unruly],[`138398716692`,G.Unruly],[`138398716695`,G.Unruly],[`138398716698`,G.Unruly],[`138398716701`,G.Unruly],[`138398716704`,G.Unruly]])}};Cx=w([x(),N(0,b(J))],Cx);let wx=class extends Ly{constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Unruly)),C(this,`_adapterEnablement`,{client:{enabled:!1},server:{enabled:!0,name:G.Unruly}}),C(this,`_bidderCodes`,{primary:G.Unruly,supplemental:[G.UnrulyAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`siteId`],server:[`siteId`]}]]))}};wx=w([D(`UnrulyBidder`),x(),N(0,b(J)),N(1,b(Cx))],wx);let Tx={applyOptionsToAllBids:[{params:{dcn:`8a969d580177771bc13c2047d6290082`},match:{integration:`client`,mediaTypesAll:[`banner`]}},{params:{dcn:`8a9691d801888852d23d6cda98130025`},match:{integration:`server`,mediaTypesAll:[`banner`]}},{params:{dcn:`8a969469017b7bdf59b2e07862af0281`},match:{integration:`client`},skip:{mediaTypesAll:[`banner`]}},{params:{dcn:`8a9695b901888852d78e6cda98760033`},match:{integration:`server`},skip:{mediaTypesAll:[`banner`]}}],placementsLocation:{_default:{bids:[]},content:{applyToAllBids:{paramLookup:{pos:{map:{"1-client":`b6309f15989111f0aa300affccab6211`,"1-server":`8a34b10501999931151a4ee316a90015`,"2-client":`b6309f1d989111f0aa300affccab6211`,"2-server":`8abbf2900199993838874ee374fb0017`,"3-client":`b6309f25989111f0aa300affccab6211`,"3-server":`8abbf2900199993838874ee3dc7b0018`,"4-client":`b6309f2d989111f0aa300affccab6211`,"4-server":`8a34b10501999931151a4ee854a40016`,"5-client":`b6309f34989111f0aa300affccab6211`,"5-server":`8abbf2900199993838874ee8ba850019`,"6-client":`b6309fe4989111f0aa300affccab6211`,"6-server":`8a34b10501999931151a4eeb089c0017`,"7-client":`b6309feb989111f0aa300affccab6211`,"7-server":`8a34b10501999931151a4eee5e340018`,"8-client":`b6309ff3989111f0aa300affccab6211`,"8-server":`8abbf2900199993838874ef142ec001a`,"9-client":`b6309ffa989111f0aa300affccab6211`,"9-server":`8a34b10501999931151a4ef1acdb0019`,"*-client":`b6309f0c989111f0aa300affccab6211`,"*-server":`8abbf2900199993838874ee2a4ea0016`}}}},bids:[{params:{pos:`{sequence}-{integration}`}}]},footer:{applyToAllBids:{paramLookup:{pos:{map:{client:`b630a001989111f0aa300affccab6211`,server:`8abbf2900199993838874ef28d20001b`}}}},bids:[{params:{pos:`{integration}`}}]},header:{applyToAllBids:{paramLookup:{pos:{map:{"1-client":`b630a008989111f0aa300affccab6211`,"1-server":`8a34b10501999931151a4ef31c4b001a`,"2-client":`b630a00f989111f0aa300affccab6211`,"2-server":`8a34b10501999931151a4ef38c5c001b`}}}},bids:[{params:{pos:`{sequence}-{integration}`}}]},sidebar:{applyToAllBids:{paramLookup:{pos:{map:{"1-client":`b630a0cd989111f0aa300affccab6211`,"1-server":`8a34b10501999931151a4ef66b210020`,"2-client":`b630a0d4989111f0aa300affccab6211`,"2-server":`8a34b10501999931151a4ef6e3c50021`,"3-client":`b630a0dc989111f0aa300affccab6211`,"3-server":`8abbf2900199993838874ef7622e001d`,"4-client":`b630a0e3989111f0aa300affccab6211`,"4-server":`8abbf2900199993838874ef7efeb001e`,"5-client":`b630a113989111f0aa300affccab6211`,"5-server":`8a34b10501999931151a4ef86ee80022`,"*-client":`b630a11a989111f0aa300affccab6211`,"*-server":`8abbf2900199993838874ef8da03001f`}}}},bids:[{params:{pos:`{placementMapSequence}-{integration}`},skip:{device:[`mobile`]}}]},recipe:{applyToAllBids:{paramLookup:{pos:{map:{"1-client":`b630a016989111f0aa300affccab6211`,"1-server":`8abbf2900199993838874ef417de001c`,"2-client":`b630a0b0989111f0aa300affccab6211`,"2-server":`8a34b10501999931151a4ef4b45b001c`,"3-client":`b630a0b7989111f0aa300affccab6211`,"3-server":`8a34b10501999931151a4ef51a35001d`,"4-client":`b630a0bf989111f0aa300affccab6211`,"4-server":`8a34b10501999931151a4ef5810a001e`,"5-client":`b630a0c6989111f0aa300affccab6211`,"5-server":`8a34b10501999931151a4ef5e944001f`}}}},bids:[{params:{pos:`{placementMapSequence}-{integration}`}}]},video_stickyoutstream:{bids:[{params:{pos:`8a34b10501999931151a4ed11bf20010`},match:{sizesAny:[[300,250],[300,50]],integration:`client`}},{params:{pos:`8abbf2900199993838874efa932a0020`},match:{sizesAny:[[300,250],[300,50]],integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{pos:`8a34b10501999931151a4ed3c2cb0012`},match:{integration:`client`}},{params:{pos:`8a34b10501999931151a4efbb3ed0024`},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{pos:`8a34b10501999931151a4ed1f8e00011`},match:{integration:`client`}},{params:{pos:`8a34b10501999931151a4efb182a0023`},match:{integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{pos:`8abbf2900199993838874ed493db0014`},match:{integration:`client`}},{params:{pos:`8abbf2900199993838874efc15ad0021`},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{pos:`8a34b10501999931151a4ed52b850013`},match:{integration:`client`}},{params:{pos:`8a34b10501999931151a4efcf7be0025`},match:{integration:`server`}}]}}},Ex={applyOptionsToAllBids:[{params:{dcn:`8a9694d00177771bcae21c6941d30023`},match:{integration:`client`,mediaTypesAll:[`banner`]},skip:{device:[`mobile`]}},{params:{dcn:`8a969d580177771bc13c2047d6290082`},match:{integration:`client`,device:[`mobile`],mediaTypesAll:[`banner`]}},{params:{dcn:`8a9698af01888852cc626cda97350021`},match:{integration:`server`,mediaTypesAll:[`banner`]},skip:{device:[`mobile`]}},{params:{dcn:`8a9691d801888852d23d6cda98130025`},match:{integration:`server`,device:[`mobile`],mediaTypesAll:[`banner`]}},{params:{dcn:`8a969469017b7bdf59b2e07862af0281`},match:{integration:`client`},skip:{mediaTypesAll:[`banner`]}},{params:{dcn:`8a9695b901888852d78e6cda98760033`},match:{integration:`server`},skip:{mediaTypesAll:[`banner`]}}],placementsLocation:{_default:{bids:[]},below_post:{applyToAllBids:{paramLookup:{pos:{map:{"client-1":`8abbcfa101989855c0cc61ac297f0002`,"client-*":`8abbcfa101989855c0cc61abb2b30001`,"server-1":`8a349b0c0198988c68d099c6756b0001`,"server-*":`8a34bfda01989897da8299c616300002`}}}},bids:[{params:{pos:`{integration}-{placementMapSequence}`}}]},content:{applyToAllBids:{paramLookup:{pos:{map:{"1-client":`8a969d580177771bc13c2048bd0e0085`,"2-client":`8a96918c0177771bc652204877c50094`,"3-client":`8a96918c0177771bc6522048f24e0095`,"4-client":`8a9694d00177771bcae220497831005a`,"5-client":`8a969d580177771bc13c204a5f240087`,"6-client":`8a9694d00177771bcae2204a9092005c`,"7-client":`8abbf8500198985575f761ac93760008`,"8-client":`8abbcfa101989855c0cc61ad06990003`,"9-client":`8abbf8500198985575f761adc3ca0009`,"1-server":`8a9698af01888852cc626cdca59d0028`,"2-server":`8a9695b901888852d78e6cdca71a003c`,"3-server":`8a9698af01888852cc626cdca8b7002b`,"4-server":`8a9691d801888852d23d6cdca525002c`,"5-server":`8a9698af01888852cc626cdcab10002d`,"6-server":`8a9691d801888852d23d6cdca44d002b`,"7-server":`8a349b0c0198988c68d099c6d6350002`,"8-server":`8a34bfda01989897da8299c742030003`,"9-server":`8a34bfda01989897da8299c7a3190004`}}}},bids:[{params:{pos:`{placementMapSequence}-{integration}`}}]},footer:{applyToAllBids:{paramLookup:{pos:{map:{client:`8a9694d00177771bcae22049449a0059`,server:`8a9695b901888852d78e6cdca4b6003b`}}}},bids:[{params:{pos:`{integration}`}}]},header:{applyToAllBids:{paramLookup:{pos:{map:{"1-client":`8a969d580177771bc13c2045cac4007f`,"2-client":`8abbcfa101989855c0cc61aeed5c0005`,"1-server":`8a9691d801888852d23d6cdca335002a`,"2-server":`8a34bfda01989897da8299c883a40005`}}}},bids:[{params:{pos:`{placementMapSequence}-{integration}`}}]},interstitial:{applyToAllBids:{paramLookup:{pos:{map:{"*-300x250":`8a969449017c7c9d384d9f8170b10066`,"*-300x600":`8a969449017c7c9d384d9f80b9970064`,"*-320x480":`8a969958017c7c9d2d8a9f812d360081`,"*-336x280":`8a969449017c7c9d384d9f80f2a20065`,"mobile-300x250":`8a969161017c7c9d32879f82491c007d`,"mobile-300x600":`8a969161017c7c9d32879f8195b3007c`,"mobile-320x480":`8a969958017c7c9d2d8a9f81f2c50082`,"mobile-336x280":`8a969449017c7c9d384d9f81c5660067`,"mobile-320x50":`8a969449017c7c9d384d9f8279950068`}}}},bids:[{params:{pos:`{device}-300x250`},match:{sizesAll:[[300,250]]}},{params:{pos:`{device}-300x600`},match:{sizesAll:[[300,600]]}},{params:{pos:`{device}-320x480`},match:{sizesAll:[[320,480]]}},{params:{pos:`{device}-336x280`},match:{sizesAll:[[336,280]]}},{params:{pos:`{device}-320x50`},match:{sizesAll:[[320,50]],device:[`mobile`]}}]},sidebar:{applyToAllBids:{paramLookup:{pos:{map:{"1-client":`8a9694d00177771bcae2204449d80057`,"2-client":`8abbcfa101989855c0cc61b0ae4d0008`,"3-client":`8abbcfa101989855c0cc61b134d50009`,"4-client":`8abbcfa101989855c0cc61b19f55000a`,"5-client":`8abbf8500198985575f761b2093d000b`,"9-client":`8a96918c0177771bc6521c6b5f4e003f`,"1-server":`8a9695b901888852d78e6cdc9a960035`,"2-server":`8a34bfda01989897da8299ca0d1c0007`,"3-server":`8a34bfda01989897da8299ca6d600008`,"4-server":`8a349b0c0198988c68d099caccba0006`,"5-server":`8a34bfda01989897da8299cb35830009`,"9-server":`8a9691d801888852d23d6cdc9cfd0028`}}}},bids:[{params:{pos:`{placementMapSequence}-{integration}`}}]},recipe:{applyToAllBids:{paramLookup:{pos:{map:{"1-client":`8a96918c0177771bc6522048483a0093`,"2-client":`8a9694d00177771bcae22049e596005b`,"3-client":`8a969d580177771bc13c2049b47f0086`,"4-client":`8abbcfa101989855c0cc61af5e7f0006`,"5-client":`8abbf8500198985575f761afcab4000a`,"1-server":`8a9691d801888852d23d6cdcaa71002f`,"2-server":`8a9691d801888852d23d6cdca826002e`,"3-server":`8a9698af01888852cc626cdca9ed002c`,"4-server":`8a349b0c0198988c68d099c8eb740004`,"5-server":`8a34bfda01989897da8299c94a760006`}}}},bids:[{params:{pos:`{placementMapSequence}-{integration}`}}]},video_stickyoutstream:{bids:[{params:{pos:`8a969d87017b7be074aae07a22b70005`},match:{integration:`client`}},{params:{pos:`8a9695b901888852d78e6ce0245f0040`},match:{integration:`server`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{pos:`8a96941a017e7e91c49492261bdf000c`},match:{integration:`client`}},{params:{pos:`8a9695b901888852d78e6cde78c2003e`},match:{integration:`server`}}]},video_coll_soff_smartphone:{bids:[{params:{pos:`8a9690ee017e7e91bee0922682f1000b`},match:{integration:`client`}},{params:{pos:`8a9698af01888852cc626cde79b3002e`},match:{integration:`server`}}]},video_in_post_clicktoplay_soundon:{bids:[{params:{pos:`8a969951017e7e91ba38923576c20011`},match:{integration:`client`}},{params:{pos:`8a9695b901888852d78e6cde7a3b003f`},match:{integration:`server`}}]},video_individual_autoplay_soff:{bids:[{params:{pos:`8a969951017e7e91ba389236dc470014`},match:{integration:`client`}},{params:{pos:`8a9691d801888852d23d6cde79390031`},match:{integration:`server`}}]}}},Dx=class extends Ry{constructor(e){let t=Sp()?Tx:Ex;super(e,t,G.YahooSSP),C(this,`_videoCreativeIds`,[[`138379204183`,G.YahooSSP],[`138378707447`,G.YahooSSP],[`138378707558`,G.YahooSSP],[`138378717711`,G.YahooSSP],[`138378717726`,G.YahooSSP],[`138378706907`,G.YahooSSP],[`138378706928`,G.YahooSSP],[`138378707468`,G.YahooSSP],[`138378707561`,G.YahooSSP],[`138378717720`,G.YahooSSP],[`138378717783`,G.YahooSSP],[`138378707552`,G.YahooSSP],[`138378717723`,G.YahooSSP],[`138378717780`,G.YahooSSP],[`138378717786`,G.YahooSSP],[`138378707555`,G.YahooSSP],[`138437164046`,G.YahooSSPServer],[`138437164367`,G.YahooSSPServer],[`138437170553`,G.YahooSSPServer],[`138437192487`,G.YahooSSPServer],[`138437199522`,G.YahooSSPServer],[`138437199525`,G.YahooSSPServer],[`138437199528`,G.YahooSSPServer],[`138437854447`,G.YahooSSPServer]])}};Dx=w([x(),N(0,b(J))],Dx);let Ox=class extends Ly{constructor(e,t,n){super(e,t),this._prebidMethods=n,C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.YahooSSP)),C(this,`gvlid`,25),C(this,`_adapterEnablement`,{client:Lt()?{enabled:!1}:{enabled:!0,name:G.YahooSSP},server:{enabled:!0,name:G.YahooSSP}}),C(this,`_bidderCodes`,{primary:G.YahooSSP,secondary:G.YahooSSPServer,supplemental:[G.YahooSSPAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`dcn`,`pos`],server:[`dcn`,`pos`]}]])),this._setYahooMediaConfig()}_setYahooMediaConfig(){this._prebidMethods.setConfig({yahoossp:{mode:`all`}},!1)}};Ox=w([D(`YahooSSPBidder`),x(),N(0,b(J)),N(1,b(Dx)),N(2,b(P))],Ox);let kx={placementsLocation:{_default:{bids:[{params:{placementId:`3894540665547071684`},match:{},skip:{}},{params:{placementId:`3894540665714843845`},match:{stickyOutstreamEnabled:!1},skip:{}},{params:{placementId:`3894540665865838790`},match:{adTypes:[`miniscroller`]},skip:{mediaTypesAll:[`outstream`]}},{params:{placementId:`3894540666000056519`},match:{mediaTypesAll:[`outstream`]},skip:{adTypes:[`miniscroller`],device:[`mobile`]}},{params:{placementId:`3894540666151051464`},match:{mediaTypesAll:[`outstream`],adTypes:[`miniscroller`]},skip:{}},{params:{placementId:`3894540666293657801`},match:{mediaTypesAll:[`outstream`],device:[`mobile`]},skip:{adTypes:[`miniscroller`]}},{params:{placementId:`3894540666453041354`},match:{nativeEnabled:!0},skip:{mediaTypesAll:[`outstream`],adTypes:[`miniscroller`]}},{params:{placementId:`3894540666604036299`},match:{nativeEnabled:!0,adTypes:[`miniscroller`]},skip:{mediaTypesAll:[`outstream`]}},{params:{placementId:`3894540666755031244`},match:{nativeEnabled:!0,mediaTypesAll:[`outstream`]},skip:{adTypes:[`miniscroller`]}},{params:{placementId:`3894540666914414797`},match:{mediaTypesAll:[`outstream`],mobileStickyPlayerOnPage:!0,device:[`mobile`]},skip:{nativeEnabled:!0,adTypes:[`miniscroller`]}},{params:{placementId:`3894540667057021134`},match:{mediaTypesAll:[`outstream`],mobileStickyPlayerOnPage:!0,device:[`mobile`],nativeEnabled:!0},skip:{adTypes:[`miniscroller`]}}]}}},Ax={placementsLocation:{_default:{bids:[{params:{placementId:`2626064683911553041`},match:{mediaTypesAll:[`banner`]},skip:{locations:[`below_post`,`content`,`recipe`,`sidebar`]}},{params:{placementId:`2626064683911553041`},match:{mediaTypesAll:[`banner`],nativeEnabled:!1,locations:[`content`,`recipe`]},skip:{adTypes:[`miniscroller`]}},{params:{placementId:`2626064685606051869`},match:{mediaTypesAll:[`banner`],nativeEnabled:!0,locations:[`content`,`recipe`]},skip:{adTypes:[`miniscroller`]}},{params:{placementId:`2626064685069180953`},match:{mediaTypesAll:[`banner`],adTypes:[`miniscroller`],nativeEnabled:!1,locations:[`content`,`recipe`]}},{params:{placementId:`2626064685203398682`},match:{mediaTypesAll:[`banner`],nativeEnabled:!0,adTypes:[`miniscroller`],locations:[`content`,`recipe`]}},{params:{placementId:`2626064684062547986`},match:{mediaTypesAll:[`outstream`],nativeEnabled:!1},skip:{adTypes:[`miniscroller`],locations:[`below_post`]}},{params:{placementId:`2626064684339372052`},match:{mediaTypesAll:[`outstream`],nativeEnabled:!0},skip:{adTypes:[`miniscroller`],locations:[`below_post`]}},{params:{placementId:`2626064684196765715`},match:{mediaTypesAll:[`outstream`],nativeEnabled:!1,adTypes:[`miniscroller`]},skip:{locations:[`below_post`]}},{params:{placementId:`2626064684632973334`},match:{mediaTypesAll:[`outstream`],nativeEnabled:!0,adTypes:[`miniscroller`],locations:[`content`,`recipe`]},skip:{locations:[`below_post`]}}]},below_post:{bids:[{params:{placementId:`2626064683911553041`},match:{mediaTypesAll:[`banner`],lazy:!1}},{params:{placementId:`2626064683911553041`},match:{mediaTypesAll:[`banner`],lazy:!0},skip:{adTypes:[`miniscroller`]}},{params:{placementId:`2626064685069180953`},match:{mediaTypesAll:[`banner`],adTypes:[`miniscroller`],lazy:!0}},{params:{placementId:`2626064684062547986`},match:{mediaTypesAll:[`outstream`],lazy:!0},skip:{adTypes:[`miniscroller`]}},{params:{placementId:`2626064684196765715`},match:{mediaTypesAll:[`outstream`],adTypes:[`miniscroller`],lazy:!0}},{params:{placementId:`2626064684062547986`},match:{mediaTypesAll:[`outstream`],lazy:!1}}]},content:{bids:[{params:{placementId:`2626064684498755605`},match:{mediaTypesAll:[`outstream`],nativeEnabled:!1,sequence:[1],device:[`mobile`],mobileStickyPlayerOnPage:!1},skip:{adTypes:[`miniscroller`]},supplemental:!1},{params:{placementId:`2626807131797397582`},match:{mediaTypesAll:[`outstream`],nativeEnabled:!0,sequence:[1],device:[`mobile`],mobileStickyPlayerOnPage:!1},skip:{adTypes:[`miniscroller`]},supplemental:!1},{params:{placementId:`2626064684775579671`},match:{mediaTypesAll:[`outstream`],nativeEnabled:!1,sequence:[1],adTypes:[`miniscroller`],device:[`mobile`],mobileStickyPlayerOnPage:!1},supplemental:!1},{params:{placementId:`2626064684934963224`},match:{mediaTypesAll:[`outstream`],nativeEnabled:!0,sequence:[1],adTypes:[`miniscroller`],device:[`mobile`],mobileStickyPlayerOnPage:!1},supplemental:!1}]},footer:{bids:[{params:{placementId:`3777272881923170981`},match:{device:[`mobile`]},skip:{adTypes:[`videoFootersMobile`]}},{params:{placementId:`3777272881923170981`},match:{device:[`desktop`,`tablet`]},skip:{adTypes:[`videoFootersDesktop`]}},{params:{placementId:`3457550240226157077`},match:{stickyOutstreamEnabled:!1,adTypesAny:[`videoFootersDesktop`,`videoFootersMobile`]}}]},sidebar:{bids:[{params:{placementId:`2626064683911553041`},match:{mediaTypesAll:[`banner`],device:[`mobile`]}},{params:{placementId:`2626064683911553041`},match:{mediaTypesAll:[`banner`],nativeEnabled:!1},skip:{device:[`mobile`]}},{params:{placementId:`2626064685606051869`},match:{mediaTypesAll:[`banner`],nativeEnabled:!0},skip:{device:[`mobile`]}}]},video_stickyoutstream:{bids:[{params:{placementId:`3154492104504189746`}}]},video_collapse_autoplay_soundoff:{bids:[{params:{placementId:`3137192266624344610`}}]},video_coll_soff_smartphone:{bids:[{params:{placementId:`3137192266808893988`}}]},video_individual_autoplay_soff:{bids:[{params:{placementId:`3137192266716619299`}}]}}},jx=class extends Ry{constructor(e){let t=Sp()?kx:Ax;super(e,t,G.Yieldmo),C(this,`_videoCreativeIds`,[[`138463806447`,G.Yieldmo],[`138463975208`,G.Yieldmo],[`138463975223`,G.Yieldmo],[`138464489752`,G.Yieldmo],[`138464489758`,G.Yieldmo],[`138464489761`,G.Yieldmo],[`138464490757`,G.Yieldmo],[`138464490775`,G.Yieldmo]])}};jx=w([x(),N(0,b(J))],jx);let Mx=class extends Ly{getCreativeFormatId(e){let t=/creative_format_id":(\d*)/.exec(e);if(t!==null)return t[1]}constructor(e,t){super(e,t),C(this,`bidderConfig`,this._config.partners.getBidderConfig(G.Yieldmo)),C(this,`_adapterEnablement`,{client:{enabled:!1},server:{enabled:!0,name:G.Yieldmo}}),C(this,`_bidderCodes`,{primary:G.Yieldmo,supplemental:[G.YieldmoAY]}),C(this,`_mediatypeEnablement`,[Q.banner,Q.outstream,Q.instream]),C(this,`_requiredProperties`,new Map([[`default`,{client:[`placementId`],server:[`placementId`]}]])),C(this,`_settings`,{adserverTargeting:[{key:this._config.prebid.targetingKeyMap.ATTR,val:e=>{let t=this._creativeFormatMap.get(this.getCreativeFormatId(e.ad))??e.mediaType;return(e.mediaType===`banner`&&e.meta?.mediaType===`video`||e.meta?.isInBannerVideo)&&(t=`ibv`),t}}]}),C(this,`_creativeFormatMap`,new Map([[`44`,`banner`],[`47`,`banner`],[`49`,`banner`],[`50`,`banner`],[`43`,`banner`],[`17`,`banner`],[`23`,`banner`],[`33`,`banner`],[`40`,`outstream`],[`51`,`outstream`],[`48`,`outstream`],[`34`,`outstream`],[`14`,`miniscroller`],[`16`,`miniscroller`],[`37`,`miniscroller`],[`15`,`miniscroller`],[`18`,`native`],[`36`,`native`],[`46`,`native`],[`10`,`native`],[`6`,`native`]]))}};Mx=w([D(`YieldmoBidder`),x(),N(0,b(J)),N(1,b(jx))],Mx);let Nx=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,ee,te,ne,re,ie,ae,oe,se,ce,le,ue,de,fe,pe){this._config=e,this._gam=pe,C(this,`_orderedDisplayBidders`,[]),C(this,`_orderedVideoBidders`,[]),C(this,`_biddersParams`,new Map),C(this,`_videoCreativeIdMapping`,void 0),C(this,`_multiFormatBidders`,void 0);let me=[c,n,s,re,_,d,v,h,f,ie,u,i,l,fe,ne,p,o,a,m,r,ee,g,te,ae,oe,se,ce,le,ue,t,de];Sp()&&(me=[c,s,re,d,f,ie,u,i,m,_],this._gam.setTargetingFlag(`abd`,[`true`])),me.forEach(e=>{e.setup();let{display:t,video:n}=this._getBidderEnablement(e);t&&this._orderedDisplayBidders.push(e),n&&this._orderedVideoBidders.push(e)}),this._multiFormatBidders=this._orderedDisplayBidders.filter(e=>e.multiformatBidder),this._videoCreativeIdMapping=this._setVideoCreativeIdMap()}get orderedDisplayBidders(){return this._orderedDisplayBidders}get multiFormatBidders(){return this._multiFormatBidders}get orderedVideoBidders(){return this._orderedVideoBidders}get biddersParams(){return this._biddersParams}get videoCreativeIdMapping(){return this._videoCreativeIdMapping}_setVideoCreativeIdMap(){return new Map(this._orderedVideoBidders.reduce((e,t)=>e.concat(t.videoCreativeIds),[]))}_getBidderEnablement(e){let t=this._config,n=e.name,r=e.adapterEnablement.client.enabled?`client`:`server`,i={adapterName:e.adapterEnablement[r].enabled?e.adapterEnablement[r].name:e.name,bidderName:n,ccpa:t.ccpa,gdpr:t.gdpr,enablement:{display:{holdout:t.hbho.bidders,enabled:[`bidderDisplayEnabled`,`enabled`]},video:{holdout:t.vbho.bidders,enabled:[`bidderInstreamEnabled`,`videoEnabled`]}}};return this._getEnablement(e,i)}_getEnablement(e,t){let n={display:!1,video:!1},r=[`display`,`video`],{adapterName:i,bidderName:a,ccpa:o,gdpr:s}=t;return r.forEach(r=>{let c=t.enablement[r],l=c.holdout,u=c.enabled,d=r===`video`||!e.updateBidParams;n[r]=!!(u.every(t=>e[t])&&this._holdoutValidation(l,a,i)&&this._ccpaValidation(o,a,i)&&this._gdprValidation(s,a,i)&&(d||this._biddersParams.set(a,e)))}),n}_holdoutValidation(e,t,n){return!e.length||(!n||!e.includes(n))&&!e.includes(t)}_ccpaValidation(e,t,n=``){return!e.enabled||!e.nonCompliantBidders.includes(n)&&!e.nonCompliantBidders.includes(t)}_gdprValidation(e,t,n=``){return!e.enabled||!e.nonCompliantBidders.includes(n)&&!e.nonCompliantBidders.includes(t)}};Nx=w([S(),N(0,b(J)),N(1,b(Wy)),N(2,b(qy)),N(3,b(nb)),N(4,b(ob)),N(5,b(Tb)),N(6,b(fb)),N(7,b(gb)),N(8,b(xb)),N(9,b(Eb)),N(10,b(zb)),N(11,b(Kb)),N(12,b($b)),N(13,b(Mb)),N(14,b(rx)),N(15,b(lx)),N(16,b(Vy)),N(17,b(px)),N(18,b(gx)),N(19,b(xx)),N(20,b(bx)),N(21,b(wx)),N(22,b(Ox)),N(23,b(Mx)),N(24,b(Hb)),N(25,b(lb)),N(26,b(Yb)),N(27,b(Fb)),N(28,b(ox)),N(29,b($y)),N(30,b(Xy)),N(31,b(kb)),N(32,b(Z))],Nx);let Px=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`CreativeMonitoring`,this._lookup=`CRTVMON`}};Px=w([S()],Px);let Fx=class{constructor(e,t,n,r,i,a){this._config=e,this._context=t,this._prebidEventBus=n,this._slots=r,this._creativeMonitoringExperiment=i,this._gamEventBus=a,C(this,`_auctionData`,new Set),C(this,`_gamRenderedData`,new Map)}setupCreativeEventListeners(){let e=this._prebidEventBus;e.auctionInit.on(this._storeAuctionData.bind(this)),e.adRenderFailed.on(this._renderFailedHandler.bind(this)),e.adRenderSucceeded.on(this._renderSucceededHandler.bind(this)),e.staleRender.on(this._staleRenderHandler.bind(this)),this._gamEventBus.slotRenderEnded.on(this._slotRenderEnded.bind(this)),this._gamEventBus.slotRequested.on(this._slotRequested.bind(this))}_slotRequested(e){let t=this._slots.get(e.slotId);if(!t)return;let n=t.id;this._gamRenderedData.has(n)&&this._gamRenderedData.delete(n)}_slotRenderEnded(e){let t=this._slots.get(e.slotId);t&&(this._gamRenderedData.set(t.id,e),this._creativeMonitoringExperiment.result&&this._checkSlotRender(e))}_storeAuctionData(e){e.adUnitCodes.forEach(t=>this._auctionData.add(`${e.auctionId}-${t}`))}_deleteStoredAuction(e,t){this._auctionData.delete(`${e}-${t}`)}_getSlotData(e){let t=this._slots.get(e);return{...t&&{slot:t.location,sequence:t.sequence,nref:t.refreshCount}}}_getGAMCreativeData(e){let t=this._gamRenderedData.get(e);return t?{lineItemId:t.event.lineItemId,creativeId:t.event.creativeId,campaignId:t.event.campaignId}:{}}_getBidData(e){return e?{...this._getPrebidBidDataFromBid(e),...this._getSlotData(e.adUnitCode),...this._getGAMCreativeData(e.adUnitCode)}:{}}_renderFailedHandler(e){setTimeout(()=>{let t=e.bid;t&&this._deleteStoredAuction(t.auctionId,t.adUnitCode);let n={message:e.message,reason:e.reason,...this._getBidData(t)};t&&t.meta&&Object.keys(t.meta).length>0?n.buyerInformation=t.meta:n.markup=t&&t.ad,E.error(`PrebidAuctionManager`,`init`,`adRenderFailed`,n)},2e3)}_staleRenderHandler(e){e&&this._deleteStoredAuction(e.auctionId,e.adUnitCode),setTimeout(()=>{E.error(`PrebidAuctionManager`,`init`,`staleRender`,{...this._getBidData(e)})},2e3)}_renderSucceededHandler(e){let t=e.bid;t&&this._deleteStoredAuction(t.auctionId,t.adUnitCode)}_isSafeFrame(e){let t=e.element.querySelector(`iframe`);return!!(t&&t.src)}_checkSlotRender(e){let t=e.event,n=this._slots.get(e.slotId),r=this._config.prebid.advertiserId;!n||this._isSafeFrame(n)||t.advertiserId!==r||setTimeout(()=>{this._logUnknownFailure(e)},2e3)}_getHeightWidth(e){if(!e)return{};let t=e.split(`x`).map(Number);return{...Array.isArray(t)&&t.length===2&&{height:t[1],width:t[0]}}}_getPrebidCreativeWindowData(e){return{adId:e.bidderAdId,bidder:e.bidder,size:e.bidderSize,adserverTargeting:e.targeting}}_getPrebidBidDataFromBid(e){let t=this._config.prebid.targetingKeyMap;return{price:e.adserverTargeting[t.PRICE_BUCKET],bidderSize:e.size||e.adserverTargeting[t.SIZE],advertiserDomains:e.meta&&e.meta.advertiserDomains||e.adserverTargeting[t.ADOMAIN],bidder:e.bidder}}_getPrebidBidderDataFromIframe(e){let t=e.element.querySelector(`iframe`).contentWindow;if(!t)return{};let{adId:n,adserverTargeting:r,bidder:i,size:a}=this._getPrebidCreativeWindowData(t),{height:o,width:s}=this._getHeightWidth(t&&t.bidderSize);return{adId:n,adserverTargeting:r,adUnitCode:e.id,bidder:i,height:o,size:a,width:s}}_logUnknownFailure(e){let t=this._context,n=this._slots.get(e.slotId);if(!n)return;let r=e.event,{adId:i,adserverTargeting:a,auctionId:o,adUnitCode:s,bidder:c,height:l,meta:u,size:d,width:f}=n.servedPrebidBidResponse||this._getPrebidBidderDataFromIframe(n);if(o&&s&&!this._auctionData.has(`${o}-${s}`))return;let p=this._config.prebid.targetingKeyMap,m={adId:i,advertiserDomains:u&&u.advertiserDomains||a&&a[p.ADOMAIN],bidderSize:d||a&&a[p.SIZE],bidder:c,branch:t.branch,bucket:t.bucket,campaignId:r.campaignId,creativeId:r.creativeId||r.sourceAgnosticCreativeId,lineItemId:r.lineItemId||r.sourceAgnosticLineItemId,message:`An unknown error occurred rendering the Prebid creative`,nref:n.refreshCount,price:a&&a[p.PRICE_BUCKET],sequence:n.sequence,slotSizes:n.sizes,slot:n.location,...f&&l&&{size:[f,l]},...u&&(u.dchain&&{dchain:u.dchain}||u.networkId&&{networkId:u.networkId}),...(!i||i.length<2)&&a&&{hbAdId:a[p.AD_ID]}};E.error(`PrebidAuctionManager`,`init`,`prebidCreativeFailure`,m),o&&s&&this._deleteStoredAuction(o,s)}};Fx=w([S(),N(0,b(J)),N(1,b(W)),N(2,b(Qf)),N(3,b(Y)),N(4,b(Px)),N(5,b(X))],Fx);let Ix=class extends V{init(){this._key=`ACSDateRanges`,this._lookup=`ACSD`,this._autorun=!1}run(){return super.run()}};w([R()],Ix.prototype,`run`,null),Ix=w([S()],Ix);let Lx=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`AmazonCompetitiveSeparation`,this._lookup=`ACS`}};Lx=w([S()],Lx);let Rx=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`InnovidLog`,this._lookup=`ivd`}};Rx=w([S()],Rx);let zx=class extends V{init(){this._key=`PredictiveAnalysis`,this._lookup=`VPRED_1`}run(){return super.run()}};w([R()],zx.prototype,`run`,null),zx=w([S()],zx);let Bx=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`SspTakeRateMonitor`,this._lookup=`SSPTRM`}};Bx=w([S()],Bx);let Vx=class extends V{init(){this._key=`AdInViewExperiment_2`,this._lookup=`AINV2`}};Vx=w([S()],Vx);let Hx=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`MagniteBotTraffic`,this.abgroup=`mgbtff`,this._lookup=`MGBTFF`}run(){return super.run()}};w([R()],Hx.prototype,`run`,null),Hx=w([S()],Hx);let Ux=[`17`,`18`,`62`],Wx=e=>new Promise(t=>{setTimeout(t,e)}),Gx=e=>!!(e.offsetWidth||e.offsetHeight||e.checkVisibility?.()),Kx=class extends V{init(){this._key=`BannerWidthHeight`,this._lookup=`BWH`}};Kx=w([S()],Kx);let qx={Recipe:`Recipe`,Video:`Video`};var Jx=class{constructor(){C(this,`_hasFired`,!1),C(this,`_buttonClicked`,void 0),C(this,`listeners`,[]),C(this,`elements`,[]),this._buttonClicked=this._processButtonClicked.bind(this)}init(e){this.listeners=e,this._addElementListeners()}_processButtonClicked(e){if(!this._hasFired)for(let t of this.listeners)t(e);this._cleanup()}_cleanup(){for(let e of this.elements)e.removeEventListener(`click`,this._buttonClicked)}_addElementListeners(){this.setElementsListeners()}setElementsListeners(){for(let e of this.elements)e.addEventListener(`click`,this._buttonClicked)}};let Yx=class extends Jx{constructor(){super(),C(this,`selectors`,[`.wprm-recipe-jump`,`#jump-to-recipe`,`#wprm-jump`,`.wprm-jump`,`.tasty-recipes-jump-link`,`.mv-create-jtr`,`.jump-to-recipe`]),C(this,`onJumpToRecipeClicked`,new O),this.elements=Array.prototype.slice.call(document.querySelectorAll(this.selectors.join()))}start(e){let t=[()=>{this.onJumpToRecipeClicked.emit()}];e&&t.push(e=>{let t=e.target.classList;E.event(`JumpToTracker`,`_logEvent`,qx.Recipe.toLowerCase(),t)}),this.init(t)}};Yx=w([S()],Yx);let Xx=class{constructor(e,t){this._jumpToRecipeTracker=e,C(this,`_isFoodVertical`,void 0),C(this,`_jumpToRecipeElementsOnPage`,!1),C(this,`_allowSlotsToBeFiltered`,!1),C(this,`_onJumpToRecipeTrackerClicked`,new O),C(this,`_allowSlotsToBeAdded`,!1),C(this,`preventedSlotsFromBeingAdded`,new O),this._isFoodVertical=!!t.verticals.find(e=>e.toLowerCase()===`food`),this._jumpToRecipeElementsOnPage=!!e.elements.length,this._jumpToRecipeTracker.onJumpToRecipeClicked.on(()=>{this._allowSlotsToBeFiltered=!0,this._onJumpToRecipeTrackerClicked.emit(),setTimeout(()=>{this._allowSlotsToBeFiltered=!1},500)},{handleEventsAlreadyEmitted:!0})}slotsFilter(e){return e.location===H.Content&&e.sequence&&e.sequence<=3}preventSlotsBeingAdded(e){this.preventedSlotsFromBeingAdded.emit(e)}determineSlotsToAddAndRemove(e){let t=[];return this.enabled&&this._allowSlotsToBeFiltered&&(e=e.filter(e=>this.slotsFilter(e)&&e.getPositionFromViewport()<=-2?(t.push(e),!1):!0)),{addSlots:e,removeSlots:t}}get enabled(){return!cn.isRolloutEnabled(`ios-manage-content-slots`)&&z()&&Lt()&&this._isFoodVertical&&this._jumpToRecipeElementsOnPage}};Xx=w([S(),N(0,b(Yx)),N(1,b(Zi))],Xx);let Zx=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`OpenBiddingTrafficShaping`,this._lookup=`OBTS`}};Zx=w([S()],Zx);let Qx=class extends V{init(){this._key=`SizeOrder2`,this._lookup=`SO2`}};Qx=w([S()],Qx);let $x=new Map([[`300x250`,1],[`320x50`,2],[`728x90`,3],[`300x600`,4],[`300x50`,5],[`336x280`,6],[`1x1`,7],[`160x600`,8],[`320x300`,9],[`300x300`,10],[`320x100`,11],[`970x90`,13],[`300x420`,14],[`300x390`,15],[`970x950`,16],[`250x250`,17],[`468x60`,18],[`1x2`,19],[`320x480`,20],[`120x240`,21],[`728x4100`,22],[`*`,23]]),eS=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m){this._config=e,this._googleAdManager=t,this._slots=n,this._slotEventBus=r,this._marmaladeEventBus=i,this._gamEventBus=a,this.eventBus=o,this._prebidEventBus=s,this._jumpToSlotManager=c,this._bootstrapConfig=l,this._openBiddingTrafficShapingExperiment=p,this._magniteBotTrafficExperiment=m,C(this,`displayRefreshInterval`,void 0),C(this,`fallbackRefreshInterval`,28e3),C(this,`stickyOutstreamRefreshInterval`,4e4),C(this,`slotAdvertiserID`,new Map),C(this,`_slotsRenderingOutsideGam`,new Set),C(this,`_refreshTargetingKeys`,[`aop`,`apd`,`aopp`,`appd`,`mgn`,`pbop`,`pbpd`,`reqtype`,`png`]),C(this,`_sizeOrderExperimentResult`,void 0),C(this,`_bannerWidthHeightExperimentResult`,void 0),C(this,`_adInViewExperimentResult`,void 0),C(this,`_bidderCodesForDurationOverride`,new Set([])),C(this,`_largeSizeSorter`,(e,t)=>{let n=e[0]*e[1];return t[0]*t[1]-n}),C(this,`_smallSizeSorter`,(e,t)=>{let n=e[0]*e[1],r=t[0]*t[1];return n-r}),C(this,`_valueSizeSorter`,(e,t)=>{let n=$x.get(e.join(`x`))||$x.get(`*`)||$x.size,r=$x.get(t.join(`x`))||$x.get(`*`)||$x.size;return n-r}),this._slotEventBus.adSlotScrolledFarOutOfView.on(e=>{let t=this._slots.get(e);t&&this.destroy(t)}),this._slotEventBus.displaySlot.on(async e=>{let t=this._slots.get(e);t&&await this.display(t)}),this.setupSlotRenderedListener(),this.displayRefreshInterval=Yi-this._config.prebid.refreshAuctionCount*5e3,this._prebidEventBus.rubiconBidError.on(this._setRubiconBidFailedTargeting.bind(this)),this._sizeOrderExperimentResult=d.result===`sm`&&z()?`sm`:`off`,this._bannerWidthHeightExperimentResult=f.result||`off`,this._adInViewExperimentResult=u.result}setSizes(e){let t=this._sizeOrderExperimentResult,n=this._bannerWidthHeightExperimentResult;if(t!==`off`){let n=this._getSizeSorter(t);e.originalSizes=[...e.sizes],e.sizes=[...e.sizes].sort(n)}if(n!==`off`){let t=this._getBannerWidthSizeSorter(n),r=[...e.sizes].sort(t),i=r.length>1&&n===`sm1`,a=r[i?1:0];e.mainAuctionWidth=a[0],e.mainAuctionHeight=a[1]}}async add(e,t=!1){let n=rc.markStartTask(`microtask`,[`SlotManager`,`add`,`1`]),r=this._config.gam;r.loaded||await r.gamEventPromise,this._bootstrapConfig.gptLibFailedToLoad?n.markEndTask():(n.markEndTask(),await this._googleAdManager.waitForQueue());let i=rc.markStartTask(`microtask`,[`SlotManager`,`add`,`2`]),a=L.readSessionStorage(`adthrive_footer_closed`),{addSlots:o,removeSlots:s}=this._jumpToSlotManager.determineSlotsToAddAndRemove(this.castArray(e));s.length&&this._jumpToSlotManager.preventSlotsBeingAdded(s);let c=this._googleAdManager.defineSlots(o.filter(e=>e.location!==H.Footer||e.location===H.Footer&&!a)),l=this._config.marmalade;l.loaded||await l.marmaladeEventPromise,l.adViewability.length||this._marmaladeEventBus.resetMarmaladeData.once(()=>{c.forEach(e=>e.setViewability(l))}),c.forEach(e=>{this.setSizes(e),e.setViewability(l),e.setHighlyViewable(l),e.setBidPoolId(this._config.prebid.bidPoolSlots),e.setPassiveBidPoolId(),e.rebuild=t,e.location===H.Recipe&&e.sticky||this._config.clsOptimizedAds.setStyle(e.element,e.location),e.location===H.Video_StickyOutstream&&(e.branded=!0),this._setSlotTargetingForTrafficShaping(e)}),this._slots.add(c);let u=c.map(e=>e.id);t?this._slotEventBus.addRebuiltSlots.emit(u):this._slotEventBus.addSlots.emit(u),i.markEndTask(),await vc();let d=rc.markStartTask(`microtask`,[`SlotManager`,`add`,`3`]),f=this.eventBus.added.legacyEmit(c.map(e=>e.id));return d.markEndTask(),await f,c}destroy(e){let t=this.castArray(e);return t.forEach(e=>this._slotsRenderingOutsideGam.delete(e.id)),this.pauseRefresh(t),this._slots.remove(t),this._googleAdManager.destroySlots(t),t}destroyAll(e=!0){let t=this._slots.get();return e||(t=t.filter(e=>!Object.values(A).includes(e.location))),this.destroy(t)}rebuild(e){let t=this.castArray(e),n=this._googleAdManager;for(let e of t)Z.pushToQueue(()=>{let t=[`refresh`,`inf_scroll`,`decref`,`nref`,`hvp`,`lazy`,`bpe`,`fle`].reduce((t,n)=>{let r=e.getTargeting(n);return r.length&&t.push({key:n,value:r}),t},[]);n.destroySlots(this.castArray(e)),e.googleTagSlotReady=!1,n.defineSlots(this.castArray(e)),e.setTargeting(t)});return t}rebuildAll(){let e=this._slots.get();return this.rebuild(e)}removeElement(e){let t=this.castArray(e),n=[];for(let e of t)e.location===H.Video_StickyOutstream?e.element.parentElement?.remove():e.element.remove(),n.push(e.element);return n}removeAllElements(e=!0){let t=this._slots.get();return e||(t=t.filter(e=>!Object.values(A).includes(e.location))),this.removeElement(t)}async refresh(e,t=!0,n=0){let{addSlots:r,removeSlots:i}=this._jumpToSlotManager.determineSlotsToAddAndRemove(this.castArray(e));i.length&&this.destroy(i);let a=r.some(e=>e.location===H.Video_StickyOutstream),o=r.map(e=>e.id);for(let e of r){if(!e||e.refreshCount===void 0)continue;e.refreshCount++,e.servedPrebidBidResponse=void 0,e.isRefreshing=!0,this._setSlotTargetingForTrafficShaping(e)}await this.eventBus.refreshing.legacyEmit(o),await this.eventBus.refreshAuctionStart.legacyEmit(o);let s=Date.now(),c=this._getAuctionCount(r,a),l=c!==1,u=this._getInjectedAuctions(l,c);this._generateNewUUIDsForSlots(r);for(let e=0;e<u.length;e++){let t=e+1;await this.refreshBids(r,t,!1),await this.eventBus.refreshAuctionStart.legacyEmit(o)}let d=cn.isRolloutEnabled(`refresh-optimization`)?0:n,f=this._getAuctionDelay(r,s,d);await Promise.all([t?Wx(f):!0,this.refreshBids(r,c,!0)]).then(async()=>{await this._slotEventBus.auctionsCompleted.legacyEmit(r.map(e=>e.id)),this._googleAdManager.refreshSlots(r)}),await this.eventBus.refreshed.legacyEmit(o);for(let e of r)e.isRefreshing=!1;return r}async display(e){let{addSlots:t,removeSlots:n}=this._jumpToSlotManager.determineSlotsToAddAndRemove(this.castArray(e));n.length&&this.destroy(n);let r=t.map(e=>e.id);await this.eventBus.displaying.legacyEmit(r);let i=rc.markStartTask(`microtask`,[`SlotManager`,`display`,`1`]),a=this.requestBids(t);i.markEndTask(),await a;let o=rc.markStartTask(`microtask`,[`SlotManager`,`display`,`auctionComplete`]),s=this._slotEventBus.auctionsCompleted.legacyEmit(r);o.markEndTask(),await s;let c=rc.markStartTask(`microtask`,[`SlotManager`,`display`,`gamDisplaySlots`]);return await this._googleAdManager.displaySlots(t),c.markEndTask(),t.forEach(e=>{e.displayed=!0}),this.eventBus.displayed.emit(r),t}inView(e){let t=this.castArray(e);return t.forEach(e=>this.setRefreshTimeout(e)),t}outOfView(e){let t=this.castArray(e);return t.filter(e=>!e.alwaysInView).filter(e=>`IntersectionObserver`in window?e.outOfViewGPT&&e.outOfViewIO:e.outOfViewGPT).forEach(e=>{let t=e.element.querySelector(`div > iframe`),n=t?.nextElementSibling;Gx(e.element)&&t&&(Gx(t)||n&&Gx(n))&&this.clearRefreshTimeout(e)}),t}pauseRefresh(e){let t=this.castArray(e);return t.filter(e=>e.refreshTimeout).forEach(e=>{e.refreshPaused=!0,this.clearRefreshTimeout(e)}),t}resumeRefresh(e){let t=this.castArray(e);return t.filter(e=>e.refreshPaused).forEach(e=>{e.refreshPaused=!1,this.setRefreshTimeout(e)}),t}updateRefreshTimeout(e,t){let n=this.castArray(e);return n.forEach(e=>{e.refreshInterval=t;let n=e.element.querySelector(`div > iframe`),r=Gx(e.element)&&n&&Gx(n)&&!document.hidden;e.location===H.Video_StickyOutstream&&e.unfilled?(this.setRefreshTimeout(e),e.unfilled=!1):e.refreshTimeout&&(e.location!==H.Video_StickyOutstream||r)?(this.clearRefreshTimeout(e),this.setRefreshTimeout(e)):e.refreshTimeout&&!r&&(this.setRefreshTimeout(e),this.clearRefreshTimeout(e))}),n}clearRefreshTimeout(e,t=!1){this.castArray(e).filter(e=>e.refreshTimeout).forEach(e=>{window.clearTimeout(e.refreshTimeout),e.refreshTimeout=void 0,t?(e.viewableDuration=0,e.slotFullyRenderedDuration=0):(e.viewableSince&&(e.viewableDuration+=Jn()-e.viewableSince.getTime()),e.slotFullyRenderedSince&&(e.slotFullyRenderedDuration=Jn()-e.slotFullyRenderedSince))})}getSlot(e){return this._slots.get(e)}getSlots(e){return e?this._slots.get(e):this._slots.get()}get amazonBidResponseReceived(){return this._slotEventBus.amazonBidResponseReceived}_getAuctionCount(e,t){let n=t&&e[0].stickyOutstreamShortVideo,r=t&&e[0].noAdRefreshCount,i=t&&e[0].stickyOutstreamLastAdErrored,a=e[0].refreshCount?this._config.prebid.refreshAuctionCount:1,o=!n&&!r&&!i?this._config.prebid.refreshStickyOutstreamAuctionCount:1;return t?o:a}_getAuctionDelay(e,t,n){let r=this._config.timeouts.refreshBidsRequest,i=e.some(e=>e.location===H.Video_StickyOutstream),a=i&&e[0].stickyOutstreamShortVideo?1:this._config.prebid.refreshStickyOutstreamAuctionCount,o=i?a:this._config.prebid.refreshAuctionCount,s=Date.now()-t,c=e[0]?.stickyOutstreamRefreshTimeout,l=Yi,u=l-r*o,d=(n>u?l-n:r*o)-s;return i&&c?c:Math.max(d,0)}_getInjectedAuctions(e,t){let n=[];if(e)for(let e=0;e<(t||1)-1;e++)n.push(e);return n}_setSlotTargetingForTrafficShaping(e){let t=this._config.trafficShaping;if(t.active&&this._openBiddingTrafficShapingExperiment.result){let n=t.getRule(e.location,e.refreshCount),r=n&&n?.ob?.length>0?n.ob:`none`;this._googleAdManager.setSlotTargeting({key:`obts`,value:r},e.googleTagSlot)}}setRefreshTimeout(e){this.castArray(e).filter(e=>!e.refreshTimeout&&(!e.isRefreshing||e.location===H.Video_StickyOutstream)).forEach(e=>{let t=this.calculateRemainingRefreshDuration(e,this._getRefreshIntervalTarget(e));e.viewableSince=new Date,e.refreshInterval!==0&&(e.refreshTimeout=window.setTimeout(()=>{let t=Jn()-(e.slotFullyRenderedSince||Date.now());e.viewableDuration=0,e.slotFullyRenderedDuration=0,e.refreshInterval=void 0,e.refreshTimeout=void 0,e.slotFullyRenderedSince=void 0,this.refresh(e,!0,t).catch(e=>void 0)},Math.max(t,0)))})}_getRefreshIntervalTarget(e){return e.location===H.Video_StickyOutstream?this.stickyOutstreamRefreshInterval:e.renderedOutsideGAM?this.fallbackRefreshInterval:this.displayRefreshInterval}getAmazonBidderCode(e){return this.slotAdvertiserID.get(e.element.id)===4526447244&&e.getTargeting(`amz_bidder`)?.[0]?.substring(2)||``}getBidderAdInViewDurationOverride(e){let t=this._bidderCodesForDurationOverride,n=e.servedPrebidBidResponse?.bidderCode||``,r=this.getAmazonBidderCode(e);return t.has(n)||t.has(r)?5e3:void 0}calculateRemainingRefreshDuration(e,t=25e3){let n=this._adInViewExperimentResult?this.getBidderAdInViewDurationOverride(e):void 0,r=B(n||this._config.adOptions.adInViewTime||this._adInViewExperimentResult,t),i=B(e.refreshInterval,r);e.slotFullyRenderedSince&&(e.slotFullyRenderedDuration=Jn()-e.slotFullyRenderedSince);let a=t-e.slotFullyRenderedDuration,o=i-e.viewableDuration,s=Math.max(a,o,0);return e.location===H.Video_StickyOutstream?B(e.refreshInterval,this.stickyOutstreamRefreshInterval)-e.viewableDuration:s}async requestBids(e){let t=this.castArray(e).filter(e=>e.enabledForAuction);if(t.length===0)return t;let n=t.map(e=>e.id);await this.eventBus.requestingBids.legacyEmit(n);let r=rc.markStartTask(`microtask`,[`SlotManger`,`requestBids`,`1`]),i=this._slotEventBus.preRequestBids.legacyEmit(n);r.markEndTask(),await i;let a=rc.markStartTask(`microtask`,[`SlotManger`,`requestBids`,`2`]),o=this._slotEventBus.requestingBids.legacyEmit(n);a.markEndTask(),await o;let s=rc.markStartTask(`microtask`,[`SlotManger`,`requestBids`,`3`]),c=this.eventBus.requestedBids.legacyEmit(n);return s.markEndTask(),await c,t}async refreshBids(e,t=0,n=!0){let r=this.castArray(e).filter(e=>e.enabledForAuction);if(r.length>0){let e=r.map(e=>e.id);this._clearTargetingKeysOnRefresh(r),await this.eventBus.refreshingBids.legacyEmit(e),await this._slotEventBus.preRequestBids.legacyEmit(e),await this._slotEventBus.refreshingBids.legacyEmit({managedSlotsIds:e,auctionCount:t,setTargeting:n})}return r}castArray(e){if(typeof e==`string`){let t=this._slots.get(e);return t===void 0?[]:[t]}return Array.isArray(e)?e:[e]}setupSlotRenderedListener(){this._gamEventBus.slotRenderEnded.on(e=>{let t=this._slots.get(e.slotId);this.slotAdvertiserID.set(e.slotId,e.event.advertiserId),t&&(t.renderedOutsideGAM=!1,this._markSlotFullyRendered(t))}),this._slotEventBus.adRenderingOutsideGAM.on(({slotId:e})=>{let t=this._slots.get(e);t&&(t.renderedOutsideGAM=!0,this._slotsRenderingOutsideGam.add(e))}),this._prebidEventBus.adRenderSucceeded.on(({bid:e})=>{let t=e.sharedBidInUse||e.adUnitCode;if(!t||!this._slotsRenderingOutsideGam.has(t))return;this._slotsRenderingOutsideGam.delete(t);let n=this._slots.get(t);n&&(n.renderedOutsideGAM=!0,this._markSlotFullyRendered(n))}),this._prebidEventBus.adRenderFailed.on(({bid:e})=>{let t=e?.sharedBidInUse||e?.adUnitCode;if(!t)return;let n=this._slots.get(t);n&&(this._slotsRenderingOutsideGam.delete(t),n.renderedOutsideGAM=!1)})}_markSlotFullyRendered(e){e.slotFullyRenderedSince=Date.now(),e.viewableSince&&e.refreshTimeout&&(clearTimeout(e.refreshTimeout),e.refreshTimeout=void 0,this.setRefreshTimeout(e))}_clearTargetingKeysOnRefresh(e){e.forEach(e=>{e.clearSlotTargetingFlag(this._refreshTargetingKeys)})}_generateNewUUIDsForSlots(e){e.forEach(e=>{e.refreshImpressionId()})}_setRubiconBidFailedTargeting(e){let t=e.errorCode,n=Ux.includes(t),r=this.getSlot(e.adUnitCode);if(n){let e=this._googleAdManager.getTargetingValuesForFlag(`bot`);e.push(`mgn`),this._googleAdManager.setTargetingFlag(`bot`,e.filter(ki),!0),this._magniteBotTrafficExperiment.result&&E.event(`SlotManager`,`setRubiconBidFailedTargeting`,`Magnite error targeting for bot`)}r&&r.setSlotTargetingFlag(`mgn`,[t],!0)}_getBannerWidthSizeSorter(e){let t=e.includes(`sm`)?`sm`:e;return this._getSizeSorter(t)}_getSizeSorter(e){let t;return t=e===`bg`?this._largeSizeSorter:e===`sm`?this._smallSizeSorter:this._valueSizeSorter,t}};eS=w([D(`SlotManager`),S(),N(0,b(J)),N(1,b(Z)),N(2,b(Y)),N(3,b(Hs)),N(4,b(Oi)),N(5,b(X)),N(6,b($f)),N(7,b(Qf)),N(8,b(Xx)),N(9,b(on)),N(10,b(Vx)),N(11,b(Qx)),N(12,b(Kx)),N(13,b(Zx)),N(14,b(Hx))],eS);let tS=class extends V{init(){this._key=`LimitBidPoolExperiment`,this._lookup=`LBPE`}run(){return super.run()}isEnabled(){return super.isEnabled()&&Lt()&&z()}};w([R()],tS.prototype,`run`,null),tS=w([S()],tS);let nS=class extends V{init(){this._key=`LimitContentBidPoolExperiment`,this._lookup=`LCBPE`}run(){return super.run()}isEnabled(){return super.isEnabled()&&Lt()&&z()}};w([R()],nS.prototype,`run`,null),nS=w([S()],nS);let rS=class{constructor(e,t,n,r,i,a){this._prebidMethods=e,this._limitBidCacheExperiment=t,this._gamEventBus=n,this._slotManager=r,this._slotEventBus=i,this._limitContentBidPoolExperiment=a,C(this,`_bidAmount`,void 0),C(this,`_contentBidPoolLimit`,void 0),typeof this._limitBidCacheExperiment.result==`number`?this._bidAmount=this._limitBidCacheExperiment.result:this._bidAmount=1/0,this._contentBidPoolLimit=typeof this._limitContentBidPoolExperiment.result==`number`?this._limitContentBidPoolExperiment.result:1/0}init(){this.setupListeners()}setupListeners(){this._bidAmount!==1/0&&this._gamEventBus.slotOnload.on(({slotId:e})=>{let t=this._slotManager.getSlot(e);t&&t.location===H.Footer&&setTimeout(()=>{this._prebidMethods.trimAdUnitBidCache(t.id,this._bidAmount)},1e3)}),this._contentBidPoolLimit!==1/0&&this._gamEventBus.slotOnload.on(({slotId:e})=>{let t=this._slotManager.getSlot(e);t&&t.location===H.Content&&setTimeout(()=>{this.trimContentBidPool(t)},1e3)}),this._slotEventBus.stickyOutstreamSlotDestroyedUserClick.on(e=>{this._prebidMethods.getBidResponsesForAdUnitCode(e).bids.forEach(e=>{this._prebidMethods.clearAuctionBids(e.auctionId)})})}trimContentBidPool(e){let t=e.bidPoolId??e.passiveBidPoolId;t&&this._prebidMethods.getBidResponsesForBidPoolId(t).bids.length>this._contentBidPoolLimit&&(this._prebidMethods.trimBidPool(t,this._contentBidPoolLimit),this._prebidMethods.getBidResponsesForBidPoolId(t).bids.length)}};rS=w([x(),N(0,b(P)),N(1,b(tS)),N(2,b(X)),N(3,b(eS)),N(4,b(Hs)),N(5,b(nS))],rS);let iS=e=>{if(e.bidder!==G.TripleliftServer)return{};let t=e.cpm,n=e.ext?.native?.eventtrackers||[],r,i,a,o=e.ext?.native?.link?.clicktrackers;return n.forEach(e=>{let n=new URL(e.url);n.host===`tlx.3lift.com`&&n.pathname.startsWith(`/header/notify`)&&n.searchParams.get(`px`)===`1`?r=`${e.url}&pr=${t}`:n.host===`eb2.3lift.com`&&(n.pathname.startsWith(`/aop`)?a=e.url:n.pathname.startsWith(`/ev`)&&(i=e.url))}),{winEvent:r,viewableEvent:i,adOnPageEvent:a,clickEvents:o}},aS=async(e,t,n)=>{try{await fetch(e,{method:`GET`})}catch(r){E.error(`TripleLiftVideo`,`fireTripleLiftEvent`,`Error firing TripleLift event tracker`,{error:r.message,eventUrl:e,eventName:t,playerName:n})}};var oS=class{constructor(){C(this,`boundHandlers`,new Map)}attachEventHandlers(e,t){this.detachEventHandlers(e);for(let n of e)this.addEventHandler(n.target,n.event,n.handler,t)}detachEventHandlers(e){for(let t of e)this.removeEventHandler(t.target,t.event)}addEventHandler(e,t,n,r){let i=r?n.bind(r):n,a=this.getHandlerKey(e,t);this.boundHandlers.set(a,i),e.addEventListener(t,i,!1)}removeEventHandler(e,t){let n=this.getHandlerKey(e,t),r=this.boundHandlers.get(n);r&&(e.removeEventListener(t,r,!1),this.boundHandlers.delete(n))}getHandlerKey(e,t){return`${e.constructor.name}_${t}`}},sS=class{constructor(){C(this,`promise`,void 0),C(this,`_resolve`,void 0),C(this,`_reject`,void 0),this.promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}resolve(e){this._resolve(e)}reject(e){this._reject(e)}},cS=class e{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v){this._config=e,this._playerType=t,this._getSize=n,this._isAutoPlay=r,this._container=i,this._videoElement=a,this._eventProxy=o,this._getVolumeLevel=s,this._muteVolume=c,this._getPreventClick=l,this._setPlayButtonState=u,this._getState=d,this._setState=f,this._getIntentionalPause=p,this._setIntentionalPause=m,this._setUserClickedToPlay=h,this._resumedCallback=g,this._setIsVideoContent=_,this._shouldUseHardcodedAdPodDuration=v,C(this,`_ima`,void 0),C(this,`_adsLoader`,void 0),C(this,`_adsManager`,void 0),C(this,`_adContainer`,document.createElement(`DIV`)),C(this,`_adDisplayContainer`,void 0),C(this,`_adsRequest`,void 0),C(this,`_adsRequestTimer`,null),C(this,`_adPlayReady`,!1),C(this,`_prematureAdPlay`,!1),C(this,`_isAdActive`,!1),C(this,`_visibilityListener`,void 0),C(this,`_eventManager`,new oS),C(this,`_adsLoaderEvents`,[]),C(this,`_adsManagerEventHandlers`,[]),C(this,`_adContainerReadyPromise`,new sS),C(this,`adCompleted`,new T),C(this,`adError`,new T),C(this,`adImpression`,new T),C(this,`adLoaded`,new T),C(this,`adPause`,new T),C(this,`adPlay`,new T),C(this,`adProgress`,new T),C(this,`adReady`,new T),C(this,`adRequest`,new T),C(this,`adSkipped`,new T),C(this,`adStarted`,new T),C(this,`allAdsCompleted`,new T),C(this,`contentResumeRequested`,new T),C(this,`log`,new T),C(this,`_handleSlickDialogOpened`,()=>{this._getState()!==`paused`&&this._adsManager?.pause()}),C(this,`_handleSlickDialogClosed`,()=>{this._getIntentionalPause()||this.playAd()})}get imaSDKVersion(){return this._ima&&this._ima.VERSION}get adContainer(){return this._adContainer}get adDisplayContainer(){return this._adDisplayContainer}get adsLoader(){return this._adsLoader}get adsRequest(){return this._adsRequest}get adsManager(){return this._adsManager}get adPlayReady(){return this._adPlayReady}get prematureAdPlay(){return this._prematureAdPlay}get isAdActive(){return this._isAdActive}get adContainerReady(){return this._adContainerReadyPromise.promise}setAdPlayReady(e){this._adPlayReady=e}setPrematureAdPlay(e){this._prematureAdPlay=e}setIsAdActive(e){this._isAdActive=e}async init(){await this.initIMA(),this.initVisibilityListener(),this.adReady.on(()=>{this.setAdPlayReady(!0)})}setupOnInject(){window.google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.initAdContainer(),this.setAdDisplayContainer(this._videoElement),this._adDisplayContainer&&(this._adDisplayContainer.initialize(),this.setAdsLoader(this._adDisplayContainer)),this.setAdsRequest(),this._isAutoPlay&&this._adsRequest&&(this._muteVolume(),this._adsRequest.setAdWillAutoPlay(!0),this._adsRequest.setAdWillPlayMuted(!0)),this.addSlickDialogListener()}requestAd(e){let t=this._adsRequest,n=this._getSize(),{adResponse:r,adTagUrl:i}=e;t.linearAdSlotWidth=n[0],t.linearAdSlotHeight=n[1],t.nonLinearAdSlotWidth=n[0],t.nonLinearAdSlotHeight=n[1],t.vastLoadTimeout=this._isInstream()?this._config.video.vastTimeoutISV:this._config.video.vastTimeoutOSV,r&&(t.adsResponse=r),i&&(t.adTagUrl=i),this.setAdsLoaderEventHandlers(),this._adsLoader.requestAds(t)}resize(){this._adsManager?.resize(this._adContainer.clientWidth,this._adContainer.clientHeight,ut.NORMAL)}reInitIMA(){this.setAdsRequest(),this._isAutoPlay&&this._adsRequest&&(this._adsRequest.setAdWillAutoPlay(!0),this._adsRequest.setAdWillPlayMuted(!0))}disable(){this.removeAdsLoaderEventHandlers(),this.removeAdsManagerEventHandlers(),this.adsLoader?.destroy(),this.adDisplayContainer?.destroy(),this.adsManager?.destroy(),this._adsLoader=void 0,this._adDisplayContainer=void 0,this._adsManager=void 0}resetAdContainer(){this._adContainer=document.createElement(`DIV`)}remove(e=!1){!this._isInstream()||e?(this.removeAdsLoaderEvents(),this.adsLoader?.destroy(),this.adDisplayContainer?.destroy(),this.removeAdsLoader(),this.removeAdDisplayContainer()):this.adsLoader&&this.removeAdsLoaderEvents(),this._setState(`idle`),this.adsManager&&(this.adsManager.destroy(),this.removeAdsManager())}playAdInStream(){this._adsManager?.setVolume(this._getVolumeLevel()),this._adsManager?.start()}playAdOutStream(e){this.requestAd(e),this._adsRequestTimer=window.setTimeout(()=>this._adError({error:{data:{errorCode:-1,errorMessage:`Adloader failed to request ads: unknown error`,type:`error`}}}),2e4)}playAd(e=!1){this._getPreventClick()||(e&&this._setUserClickedToPlay(!0),this._getState()!==`playing`&&this._adsManager?.resume())}pauseAd({event:e,pausedByOtherPlayer:t}={}){this._getPreventClick()||(this._setUserClickedToPlay(!1),(e||t)&&this._setIntentionalPause(!0),this._getState()!==`paused`&&this._adsManager?.pause())}_resumed(e){this._resumedCallback();let t=this._getAdRenderDetails(e);this.adPlay.emit(t),this._setState(`playing`),this._setIntentionalPause(!1),this._setPlayButtonState()}_paused(e){if(this._getState()===`paused`)return;let t=this._getAdRenderDetails(e);this.adPause.emit(t),this._setState(`paused`),this._setPlayButtonState()}_adsManagerLoaded(e){this.resetAdsRequestTimer(),this.setAdsManager(e,this._videoElement);let t=this._adsManager;if(t){this.setAdsManagerEventHandlers();try{let e=this._getSize(),n=this._isInstream()?this._adContainer.clientWidth:e[0],r=this._isInstream()?this._adContainer.clientHeight:e[1];t.init(n,r,ut.NORMAL),this._isInstream()||t.start()}catch(e){E.error(`IMAManager`,`_adsManagerLoaded`,this._playerType,e)}}}_adLoaded(e){this._isInstream()?this._adsManager?.setVolume(this._getVolumeLevel()):(this._adsManager?.setVolume(0),this._muteVolume());let t=this._getAdRenderDetails(e);this.adLoaded.emit(t),document.hidden&&this.pauseAd()}_adStarted(e){if(this._isInstream()&&!this._adPlayReady){this.setAdPlayReady(!0),this.pauseAd();return}let t=this._getAdRenderDetails(e);this.adStarted.emit(t),this._setState(`playing`),this.setIsAdActive(!0),this._setIsVideoContent(!1),this._setPlayButtonState(),this._isInstream()?this._adsManager?.setVolume(this._getVolumeLevel()):(this._container.classList.remove(`adthrive-player-idle`),this._container.classList.add(`adthrive-player-playing`),this._adsManager?.setVolume(0))}_adComplete(e){this.setIsAdActive(!1);let t=this._getAdRenderDetails(e);this.adCompleted.emit(t)}_adError(e){this.resetAdsRequestTimer();let t=e&&e.error&&e.error.data,n=t?{code:t.errorCode,message:t.errorMessage,type:t.type}:{};this.adError.emit(n)}_adImpression(e){let t=this._getAdRenderDetails(e);this.adImpression.emit(t)}_contentResumeRequested(e){let t=this._getAdRenderDetails(e);this.contentResumeRequested.emit(t)}_allAdsComplete(e){let t=this._getAdRenderDetails(e);this.allAdsCompleted.emit(t)}_adProgress(e){let t=e.getAdData();t&&this.adProgress.emit({duration:t.duration,position:t.currentTime})}_adSkipped(e){let t=this._getAdRenderDetails(e);this.adSkipped.emit(t)}_log(e){this.log.emit(e)}async initIMA(){if(e.isIMALoaded()){this._ima=window.google.ima;return}try{if(await this.importIMAScript(),await e._waitForIMAInit(),this._ima=window.google?.ima,!this._ima)throw Error("IMA SDK loaded, but `window.google.ima` is undefined.")}catch(e){throw Error(`Failed to initialize IMA SDK: ${e instanceof Error?e.message:String(e)}`)}}initVisibilityListener(){this._isInstream()&&(this._visibilityListener=this._eventProxy.pageVisibility.on(this.handlePageVisibilityChange.bind(this)))}initAdContainer(){if(this._adContainer.id=`adthrive-${this._playerType}-ad-container`,this._adContainer.className=`adthrive-player-ad-container`,this._isOutstream()){let e=this._getSize();this._adContainer.style.width=`${e[0]}px`,this._adContainer.style.height=`${e[1]}px`}this._isInstream()&&(this._adContainer.classList.add(`raptive-player-ad`,`raptive-player-ad-container-idle`),this._adContainer.style.width=`100%`,this._adContainer.style.height=`100%`)}static isIMALoaded(){return!!window.google?.ima}async importIMAScript(){e.isIMALoaded()||await Ih(e.IMA_SCRIPT_URL,!1,!1,!0)}setAdsLoader(e){if(!this._ima)return;this._adsLoader=new this._ima.AdsLoader(e);let t=this._adsLoader?.getSettings();t?.setNumRedirects(this._config.video.maxRedirect),t?.setVpaidMode(this._ima.ImaSdkSettings.VpaidMode.ENABLED),hh()||t?.setVpaidMode(this._ima.ImaSdkSettings.VpaidMode.INSECURE)}removeAdsLoader(){this._adsLoader=void 0}setAdsLoaderEventHandlers(){this._adsLoaderEvents=[{target:this._adsLoader,event:ct.ADS_MANAGER_LOADED,handler:this._adsManagerLoaded},{target:this._adsLoader,event:ct.AD_ERROR,handler:this._adError}],this._eventManager.attachEventHandlers(this._adsLoaderEvents,this)}removeAdsLoaderEventHandlers(){this._eventManager.detachEventHandlers(this._adsLoaderEvents)}setAdsManager(e,t){if(!this._ima)return;let n=new this._ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.bitrate=this._config.video.maxBitrate,n.enablePreloading=this._config.video.enablePreloading,n.loadVideoTimeout=this._config.video.loadVideoTimeout,this._shouldUseHardcodedAdPodDuration&&(n.disableUi=!0),this._adsManager=e.getAdsManager(t,n)}removeAdsManager(){this._adsManager=void 0}setAdsManagerEventHandlers(){this._adsManagerEventHandlers=[{target:this._adsManager,event:ct.PAUSED,handler:this._paused},{target:this._adsManager,event:ct.RESUMED,handler:this._resumed},{target:this._adsManager,event:ct.STARTED,handler:this._adStarted},{target:this._adsManager,event:ct.COMPLETE,handler:this._adComplete},{target:this._adsManager,event:ct.LOADED,handler:this._adLoaded},{target:this._adsManager,event:ct.AD_ERROR,handler:this._adError},{target:this._adsManager,event:ct.AD_PROGRESS,handler:this._adProgress},{target:this._adsManager,event:ct.ALL_ADS_COMPLETED,handler:this._allAdsComplete},{target:this._adsManager,event:ct.CONTENT_RESUME_REQUESTED,handler:this._contentResumeRequested},{target:this._adsManager,event:ct.IMPRESSION,handler:this._adImpression},{target:this._adsManager,event:ct.SKIPPED,handler:this._adSkipped},{target:this._adsManager,event:ct.LOG,handler:this._log}],this._eventManager.attachEventHandlers(this._adsManagerEventHandlers,this)}removeAdsManagerEventHandlers(){this._eventManager.detachEventHandlers(this._adsManagerEventHandlers)}setAdDisplayContainer(e){this._ima&&(this._adDisplayContainer=new this._ima.AdDisplayContainer(this._adContainer,e),this._adContainerReadyPromise.resolve())}removeAdDisplayContainer(){this._adDisplayContainer=void 0}setAdsRequest(){this._ima&&(this._adsRequest=new this._ima.AdsRequest)}resetAdsRequestTimer(){this._adsRequestTimer&&=(clearTimeout(this._adsRequestTimer),null)}addSlickDialogListener(){document.addEventListener(`slick-auth-dialog-opened`,this._handleSlickDialogOpened),document.addEventListener(`slick-auth-dialog-closed`,this._handleSlickDialogClosed)}removeAdsLoaderEvents(){this._isInstream()&&this.removeAdsLoaderEventHandlers(),this._visibilityListener&&this._visibilityListener()}handlePageVisibilityChange(e){this._getState()===`playing`&&e?this.pauseAd():this._getState()===`paused`&&!e&&!this._getIntentionalPause()&&this.playAd()}_isOutstream(){return k.Outstream===this._playerType||k.StickyOutstream===this._playerType}_isInstream(){return k.AutoInjected===this._playerType||k.EmbeddedStationary===this._playerType||k.RelatedSticky===this._playerType}_getAdRenderDetails(e){let t=this._adsRequest,n=t.adTagUrl,r=t.adsResponse,i;if(e&&e.getAd){let t=e.getAd(),n=Object.keys(t)||[];i=t&&n.length&&t[n[0]]}return i||=(e&&Object.keys(e)||[]).reduce((t,n)=>{if(!e[n]||typeof e[n]!=`object`||Array.isArray(e[n]))return;let r=Object.keys(e[n]),i=r&&r.length&&e[n][r[0]];i&&`adId`in i&&(t=i)},{}),{ad:i,userRequestContext:{...n&&{adTagUrl:n},...r&&{vastXml:r}}}}static _waitForIMAInit(e=50,t=5e3){return new Promise((n,r)=>{if(window.google?.ima)return n();let i=Date.now(),a=setInterval(()=>{window.google?.ima?(clearInterval(a),n()):Date.now()-i>=t&&(clearInterval(a),r(Error(`Timed out waiting for IMA SDK to initialize`)))},e)})}destroy(){this.disable(),document.removeEventListener(`slick-auth-dialog-opened`,this._handleSlickDialogOpened),document.removeEventListener(`slick-auth-dialog-closed`,this._handleSlickDialogClosed)}};C(cS,`IMA_SCRIPT_URL`,`https://imasdk.googleapis.com/js/sdkloader/ima3.js`);var lS=class{static createCaptionsContainer(){let e=document.createElement(`div`);e.classList.add(this.CLASSES.CAPTIONS);let t=document.createElement(`span`);return e.appendChild(t),e}static createCaptionsButton(e){let t=document.createElement(`button`);return t.setAttribute(`type`,`button`),t.innerText=`CC`,t.classList.add(this.CLASSES.CAPTIONS_BUTTON),t.addEventListener(`click`,()=>e()),t}static toggleCaptionsButton(e,t){t?e.classList.add(this.CLASSES.CAPTIONS_BUTTON_VISIBLE):e.classList.remove(this.CLASSES.CAPTIONS_BUTTON_VISIBLE)}static updateCaptionStyles(e,t,n){let r=e.firstElementChild;if(r)switch(t){case`fontColor`:e.style.color=this._getColor(`font`,n);break;case`fontOpacity`:e.style.setProperty(this.VARIABLES.FONT_OPACITY,n);break;case`fontSize`:r.style.fontSize=n;break;case`fontFamily`:e.style.fontFamily=n;break;case`textShadow`:e.style.textShadow=this._getTextShadow(n);break;case`backgroundColor`:r.style.backgroundColor=this._getColor(`background`,n);break;case`backgroundOpacity`:e.style.setProperty(this.VARIABLES.BACKGROUND_OPACITY,n);break;case`windowColor`:e.style.backgroundColor=this._getColor(`window`,n);break;case`windowOpacity`:e.style.setProperty(this.VARIABLES.WINDOW_OPACITY,n);break;default:break}}static displayCaption(e,t){let n=e.children[0];n.innerText=t,e.style.display=`block`}static clearCaption(e){let t=e.children[0];e.style.display=`none`,t.innerText=``}static _getColor(e,t){let n={font:this.VARIABLES.FONT_OPACITY,background:this.VARIABLES.BACKGROUND_OPACITY,window:this.VARIABLES.WINDOW_OPACITY},r={white:`0, 0%, 100%`,black:`0, 0%, 0%`,red:`0, 100%, 50%`,green:`120, 100%, 50%`,blue:`240, 100%, 50%`,yellow:`60, 100%, 50%`,magenta:`300, 100%, 50%`,cyan:`180, 100%, 50%`};return r[t]?`hsla(${r[t]}, var(${n[e]}))`:t}static _getTextShadow(e){return{none:``,raised:`rgb(0, 0, 0) 0px 0px 5px, rgb(0, 0, 0) 0px 1px 5px, rgb(0, 0, 0) 0px 2px 5px`,depressed:`rgb(0, 0, 0) 0px -2px 1px`,uniform:`rgb(0, 0, 0) -2px 0px 1px, rgb(0, 0, 0) 2px 0px 1px, rgb(0, 0, 0) 0px -2px 1px, rgb(0, 0, 0) 0px 2px 1px, rgb(0, 0, 0) -1px 1px 1px, rgb(0, 0, 0) 1px 1px 1px, rgb(0, 0, 0) 1px -1px 1px, rgb(0, 0, 0) 1px 1px 1px`,"drop shadow":`rgb(0, 0, 0) 0px 2px 1px`}[e]||``}};C(lS,`CLASSES`,Object.freeze({CAPTIONS:`raptive-player-captions`,CAPTIONS_BUTTON:`raptive-player-captions-button`,CAPTIONS_BUTTON_VISIBLE:`raptive-player-captions-button--visible`})),C(lS,`VARIABLES`,Object.freeze({FONT_OPACITY:`--raptive-player-captions-font-opacity`,BACKGROUND_OPACITY:`--raptive-player-captions-background-opacity`,WINDOW_OPACITY:`--raptive-player-captions-window-opacity`}));var uS=class{constructor(){C(this,`seperator`,`,`)}timestampToSeconds(e){let[t,n]=e.split(`,`),r=parseInt(n),[i,a,o]=t.split(`:`).map(e=>parseInt(e)),s=r*.001+o+60*a+3600*i;return Math.round(s*1e3)/1e3}correctFormat(e){let t=e.replace(`.`,`,`);var n=null,r=null,i=null,a=null,[o,s]=t.split(`,`);a=this.fixed_str_digit(3,s);var[c,l,u]=o.split(`:`);return n=this.fixed_str_digit(2,c,!1),r=this.fixed_str_digit(2,l,!1),i=this.fixed_str_digit(2,u,!1),`${n}:${r}:${i},${a}`}fixed_str_digit(e,t,n=!0){if(t.length==e)return t;if(t.length>e)return t.slice(0,e);if(t.length<e)return n?t.padEnd(e,`0`):t.padStart(e,`0`)}tryComma(e){e=e.replace(/\r/g,``);let t=e.split(/(\d+)\n(\d{1,2}:\d{2}:\d{2},\d{1,3}) --> (\d{1,2}:\d{2}:\d{2},\d{1,3})/g);return t.shift(),t}tryDot(e){e=e.replace(/\r/g,``);let t=e.split(/(\d+)\n(\d{1,2}:\d{2}:\d{2}\.\d{1,3}) --> (\d{1,2}:\d{2}:\d{2}\.\d{1,3})/g);return t.shift(),this.seperator=`.`,t}fromSrt(e){var t=e,n=this.tryComma(t);n.length==0&&(n=this.tryDot(t));for(var r=[],i=0;i<n.length;i+=4){let e=this.correctFormat(n[i+1].trim()),t=this.correctFormat(n[i+2].trim());var a={id:n[i].trim(),startTime:e,startSeconds:this.timestampToSeconds(e),endTime:t,endSeconds:this.timestampToSeconds(t),text:n[i+3].trim()};r.push(a)}return r}toSrt(e){for(var t=``,n=0;n<e.length;n++){var r=e[n];t+=r.id+`\r
`,t+=r.startTime+` --> `+r.endTime+`\r
`,t+=r.text.replace(`
`,`\r
`)+`\r
\r
`}return t}},dS=c(o((exports=>{(function(){var t={direction:`horizontal`,snapToLines:!0,linePosition:`auto`,lineAlign:`start`,textPosition:`auto`,positionAlign:`auto`,size:100,alignment:`center`},n=function(e){e||={"&amp":`&`,"&lt":`<`,"&gt":`>`,"&lrm":``,"&rlm":``,"&nbsp":`\xA0`},this.entities=e,this.parse=function(n,a){n=n.replace(/\0/g,``);var o=/\r\n|\r|\n/,s=Date.now(),c=0,l=n.split(o),u=!1,d=[],f=[],p=[];function m(e,t){p.push({message:e,line:c+1,col:t})}var h=l[c],g=h.length,_=`WEBVTT`,v=0,ee=_.length;for(h[0]===``&&(v=1,ee+=1),(g<ee||h.indexOf(_)!==0+v||g>ee&&h[ee]!==` `&&h[ee]!==`	`)&&m(`No valid signature. (File needs to start with "WEBVTT".)`),c++;l[c]!=``&&l[c]!=null;){if(m(`No blank line after the signature.`),l[c].indexOf(`-->`)!=-1){u=!0;break}c++}for(;l[c]!=null;){for(var te;!u&&l[c]==``;)c++;if(!u&&l[c]==null)break;te=Object.assign({},t,{id:``,startTime:0,endTime:0,pauseOnExit:!1,direction:`horizontal`,snapToLines:!0,linePosition:`auto`,lineAlign:`start`,textPosition:`auto`,positionAlign:`auto`,size:100,alignment:`center`,text:``,tree:null});var ne=!0;if(l[c].indexOf(`-->`)==-1){if(te.id=l[c],/^NOTE($|[ \t])/.test(te.id)){for(c++;l[c]!=``&&l[c]!=null;)l[c].indexOf(`-->`)!=-1&&m(`Cannot have timestamp in a comment.`),c++;continue}if(/^STYLE($|[ \t])/.test(te.id)){var re=[],ie=!1;for(c++;l[c]!=``&&l[c]!=null;)l[c].indexOf(`-->`)!=-1&&(m(`Cannot have timestamp in a style block.`),ie=!0),re.push(l[c]),c++;if(f.length){m(`Style blocks cannot appear after the first cue.`);continue}ie||d.push(re.join(`
`));continue}if(c++,l[c]==``||l[c]==null){m(`Cue identifier cannot be standalone.`);continue}if(l[c].indexOf(`-->`)==-1){ne=!1,m(`Cue identifier needs to be followed by timestamp.`);continue}}u=!1;var ae=new r(l[c],m),oe=0;if(f.length>0&&(oe=f[f.length-1].startTime),ne&&!ae.parse(te,oe)){for(te=null,c++;l[c]!=``&&l[c]!=null;){if(l[c].indexOf(`-->`)!=-1){u=!0;break}c++}continue}for(c++;l[c]!=``&&l[c]!=null;){if(l[c].indexOf(`-->`)!=-1){m(`Blank line missing before cue.`),u=!0;break}te.text!=``&&(te.text+=`
`),te.text+=l[c],c++}te.tree=new i(te.text,m,a,e).parse(te.startTime,te.endTime),f.push(te)}return f.sort(function(e,t){return e.startTime<t.startTime?-1:e.startTime>t.startTime?1:e.endTime>t.endTime?-1:e.endTime<t.endTime?1:0}),{cues:f,errors:p,time:Date.now()-s,styles:d}}},r=function(e,t){var n=/[\u0020\t\f]/,r=/[^\u0020\t\f]/,e=e,i=0,a=function(e){t(e,i+1)};function o(t){for(;e[i]!=null&&t.test(e[i]);)i++}function s(t){for(var n=``;e[i]!=null&&t.test(e[i]);)n+=e[i],i++;return n}function c(){var t=`minutes`,n,r,o,c;if(e[i]==null){a(`No timestamp found.`);return}if(!/\d/.test(e[i])){a(`Timestamp must start with a character in the range 0-9.`);return}if(n=s(/\d/),(n.length>2||parseInt(n,10)>59)&&(t=`hours`),e[i]!=`:`){a(`No time unit separator found.`);return}if(i++,r=s(/\d/),r.length!=2){a(`Must be exactly two digits.`);return}if(t==`hours`||e[i]==`:`){if(e[i]!=`:`){a(`No seconds found or minutes is greater than 59.`);return}if(i++,o=s(/\d/),o.length!=2){a(`Must be exactly two digits.`);return}}else{if(n.length!=2){a(`Must be exactly two digits.`);return}o=r,r=n,n=`0`}if(e[i]!=`.`){a(`No decimal separator (".") found.`);return}if(i++,c=s(/\d/),c.length!=3){a(`Milliseconds must be given in three digits.`);return}if(parseInt(r,10)>59){a(`You cannot have more than 59 minutes.`);return}if(parseInt(o,10)>59){a(`You cannot have more than 59 seconds.`);return}return parseInt(n,10)*60*60+parseInt(r,10)*60+parseInt(o,10)+parseInt(c,10)/1e3}function l(e,t){for(var r=e.split(n),i=[],o=0;o<r.length;o++)if(r[o]!=``){var s=r[o].indexOf(`:`),c=r[o].slice(0,s),l=r[o].slice(s+1);if(i.indexOf(c)!=-1&&a(`Duplicate setting.`),i.push(c),l==``){a(`No value for setting defined.`);return}if(c==`vertical`){if(l!=`rl`&&l!=`lr`){a(`Writing direction can only be set to 'rl' or 'rl'.`);continue}t.direction=l}else if(c==`line`){if(/,/.test(l)){var u=l.split(`,`);l=u[0];var d=u[1]}if(!/^[-\d](\d*)(\.\d+)?%?$/.test(l)){a(`Line position takes a number or percentage.`);continue}if(l.indexOf(`-`,1)!=-1){a(`Line position can only have '-' at the start.`);continue}if(l.indexOf(`%`)!=-1&&l.indexOf(`%`)!=l.length-1){a(`Line position can only have '%' at the end.`);continue}if(l[0]==`-`&&l[l.length-1]==`%`){a(`Line position cannot be a negative percentage.`);continue}var f=l,p=!1;if(l[l.length-1]==`%`&&(p=!0,f=l.slice(0,l.length-1),parseInt(l,10)>100)){a(`Line position cannot be >100%.`);continue}if(f===``||isNaN(f)||!isFinite(f)){a(`Line position needs to be a number`);continue}if(d!==void 0){if(![`start`,`center`,`end`].includes(d)){a(`Line alignment needs to be one of start, center or end`);continue}t.lineAlign=d}t.snapToLines=!p,t.linePosition=parseFloat(f),parseFloat(f).toString()!==f&&(t.nonSerializable=!0)}else if(c==`position`){if(/,/.test(l)){var u=l.split(`,`);l=u[0];var m=u[1]}if(l[l.length-1]!=`%`){a(`Text position must be a percentage.`);continue}if(parseInt(l,10)>100||parseInt(l,10)<0){a(`Text position needs to be between 0 and 100%.`);continue}if(f=l.slice(0,l.length-1),f===``||isNaN(f)||!isFinite(f)){a(`Line position needs to be a number`);continue}if(m!==void 0){if(![`line-left`,`center`,`line-right`].includes(m)){a(`Position alignment needs to be one of line-left, center or line-right`);continue}t.positionAlign=m}t.textPosition=parseFloat(f)}else if(c==`size`){if(l[l.length-1]!=`%`){a(`Size must be a percentage.`);continue}if(parseInt(l,10)>100){a(`Size cannot be >100%.`);continue}var h=l.slice(0,l.length-1);if(h===void 0||h===``||isNaN(h)){a(`Size needs to be a number`),h=100;continue}else if(h=parseFloat(h),h<0||h>100){a(`Size needs to be between 0 and 100%.`);continue}t.size=h}else if(c==`align`){var g=[`start`,`center`,`end`,`left`,`right`];if(g.indexOf(l)==-1){a(`Alignment can only be set to one of `+g.join(`, `)+`.`);continue}t.alignment=l}else a(`Invalid setting.`)}}this.parse=function(t,s){if(o(n),t.startTime=c(),t.startTime!=null){if(t.startTime<s&&a(`Start timestamp is not greater than or equal to start timestamp of previous cue.`),r.test(e[i])&&a(`Timestamp not separated from '-->' by whitespace.`),o(n),e[i]!=`-`){a(`No valid timestamp separator found.`);return}if(i++,e[i]!=`-`){a(`No valid timestamp separator found.`);return}if(i++,e[i]!=`>`){a(`No valid timestamp separator found.`);return}if(i++,r.test(e[i])&&a(`'-->' not separated from timestamp by whitespace.`),o(n),t.endTime=c(),t.endTime!=null)return t.endTime<=t.startTime&&a(`End timestamp is not greater than start timestamp.`),r.test(e[i]),o(n),l(e.substring(i),t),!0}},this.parseTimestamp=function(){var t=c();if(e[i]!=null){a(`Timestamp must not have trailing characters.`);return}return t}},i=function(e,t,n,i){this.entities=i;var a=this,e=e,o=0,s=function(e){n!=`metadata`&&t(e,o+1)};this.parse=function(t,i){function a(e){let t={...e};return e.children&&(t.children=e.children.map(a)),t.parent&&delete t.parent,t}var l={children:[]},u=l,d=[];function f(e){u.children.push({type:`object`,name:e[1],classes:e[2],children:[],parent:u}),u=u.children[u.children.length-1]}function p(e){for(var t=u;t;){if(t.name==e)return!0;t=t.parent}}for(;e[o]!=null;){var m=c();if(m[0]==`text`)u.children.push({type:`text`,value:m[1],parent:u});else if(m[0]==`start tag`){n==`chapters`&&s(`Start tags not allowed in chapter title text.`);var h=m[1];h!=`v`&&h!=`lang`&&m[3]!=``&&s(`Only <v> and <lang> can have an annotation.`),h==`c`||h==`i`||h==`b`||h==`u`||h==`ruby`||h==`rt`&&u.name==`ruby`?f(m):h==`v`?(p(`v`)&&s(`<v> cannot be nested inside itself.`),f(m),u.value=m[3],m[3]||s(`<v> requires an annotation.`)):h==`lang`?(f(m),u.value=m[3]):s(`Incorrect start tag.`)}else if(m[0]==`end tag`)n==`chapters`&&s(`End tags not allowed in chapter title text.`),m[1]==u.name?u=u.parent:m[1]==`ruby`&&u.name==`rt`?u=u.parent.parent:s(`Incorrect end tag.`);else if(m[0]==`timestamp`){n==`chapters`&&s(`Timestamp not allowed in chapter title text.`);var g=new r(m[1],s),_=g.parseTimestamp();_!=null&&((_<=t||_>=i)&&s(`Timestamp must be between start timestamp and end timestamp.`),d.length>0&&d[d.length-1]>=_&&s(`Timestamp must be greater than any previous timestamp.`),u.children.push({type:`timestamp`,value:_,parent:u}),d.push(_))}}for(;u.parent;)u.name!=`v`&&s(`Required end tag missing.`),u=u.parent;return a(l)};function c(){for(var t=`data`,n=``,r=``,c=[];e[o-1]!=null||o==0;){var l=e[o];if(t==`data`)if(l==`&`)r=l,t=`escape`;else if(l==`<`&&n==``)t=`tag`;else if(l==`<`||l==null)return[`text`,n];else n+=l;else if(t==`escape`)if(l==`<`||l==null){s(`Incorrect escape.`);let e;return(e=r.match(/^&#([0-9]+)$/))?n+=String.fromCharCode(e[1]):a.entities[r]?n+=a.entities[r]:n+=r,[`text`,n]}else if(l==`&`)s(`Incorrect escape.`),n+=r,r=l;else if(/[a-z#0-9]/i.test(l))r+=l;else if(l==`;`){let e;(e=r.match(/^&#(x?[0-9]+)$/))?n+=String.fromCharCode(`0`+e[1]):a.entities[r+l]?n+=a.entities[r+l]:(e=Object.keys(i).find(e=>r.startsWith(e)))?n+=a.entities[e]+r.slice(e.length)+l:(s(`Incorrect escape.`),n+=r+`;`),t=`data`}else s(`Incorrect escape.`),n+=r+l,t=`data`;else if(t==`tag`)if(l==`	`||l==`
`||l==`\f`||l==` `)t=`start tag annotation`;else if(l==`.`)t=`start tag class`;else if(l==`/`)t=`end tag`;else if(/\d/.test(l))n=l,t=`timestamp tag`;else if(l==`>`||l==null)return l==`>`&&o++,[`start tag`,``,[],``];else n=l,t=`start tag`;else if(t==`start tag`)if(l==`	`||l==`\f`||l==` `)t=`start tag annotation`;else if(l==`
`)r=l,t=`start tag annotation`;else if(l==`.`)t=`start tag class`;else if(l==`>`||l==null)return l==`>`&&o++,[`start tag`,n,[],``];else n+=l;else if(t==`start tag class`)if(l==`	`||l==`\f`||l==` `)r&&c.push(r),r=``,t=`start tag annotation`;else if(l==`
`)r&&c.push(r),r=l,t=`start tag annotation`;else if(l==`.`)r&&c.push(r),r=``;else if(l==`>`||l==null)return l==`>`&&o++,r&&c.push(r),[`start tag`,n,c,``];else r+=l;else if(t==`start tag annotation`){if(l==`>`||l==null)return l==`>`&&o++,r=r.split(/[\u0020\t\f\r\n]+/).filter(function(e){if(e)return!0}).join(` `),[`start tag`,n,c,r];r+=l}else if(t==`end tag`){if(l==`>`||l==null)return l==`>`&&o++,[`end tag`,n];n+=l}else if(t==`timestamp tag`){if(l==`>`||l==null)return l==`>`&&o++,[`timestamp`,n];n+=l}else s(`Never happens.`);o++}}},a=function(){function e(e){let t=(`00`+(e-Math.floor(e)).toFixed(3)*1e3).slice(-3),n=0,r=0,i=0;return e>=3600&&(n=Math.floor(e/3600)),r=Math.floor((e-3600*n)/60),i=Math.floor(e-3600*n-60*r),(n?n+`:`:``)+(``+r).padStart(2,`0`)+`:`+(``+i).padStart(2,`0`)+`.`+t}function n(e){var n=``;let r=Object.keys(t).filter(n=>e[n]!==t[n]);return r.includes(`direction`)&&(n+=` vertical:`+e.direction),r.includes(`alignment`)&&(n+=` align:`+e.alignment),r.includes(`size`)&&(n+=` size:`+e.size+`%`),(r.includes(`lineAlign`)||r.includes(`linePosition`))&&(n+=` line:`+e.linePosition+(e.snapToLines?``:`%`)+(e.lineAlign&&e.lineAlign!=t.lineAlign?`,`+e.lineAlign:``)),(r.includes(`textPosition`)||r.includes(`positionAlign`))&&(n+=` position:`+e.textPosition+`%`+(e.positionAlign&&e.positionAlign!==t.positionAlign?`,`+e.positionAlign:``)),n}function r(t){for(var n=``,i=0;i<t.length;i++){var a=t[i];if(a.type==`text`)n+=a.value.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`);else if(a.type==`object`){if(n+=`<`+a.name,a.classes)for(var o=0;o<a.classes.length;o++)n+=`.`+a.classes[o];a.value&&(n+=` `+a.value),n+=`>`,a.children&&(n+=r(a.children)),n+=`</`+a.name+`>`}else a.type==`timestamp`?n+=`<`+e(a.value)+`>`:n+=`<`+a.value+`>`}return n}function i(t){return(t.id===void 0?``:t.id+`
`)+e(t.startTime)+` --> `+e(t.endTime)+n(t)+`
`+r(t.tree.children)+`

`}function a(e){return`STYLE
`+e+`

`}this.serialize=function(e,t){var n=`WEBVTT

`;if(t)for(var r=0;r<t.length;r++)n+=a(t[r]);for(var r=0;r<e.length;r++)n+=i(e[r]);return n}};function o(e){e.WebVTTParser=n,e.WebVTTCueTimingsAndSettingsParser=r,e.WebVTTCueTextParser=i,e.WebVTTSerializer=a}typeof window<`u`&&o(window),exports!==void 0&&o(exports)})()}))());let fS=Object.keys(mt);var pS=class{static async load(e){if(!e)return[];let t=await(await fetch(e)).text();return this._parse(t)}static getTracks(e){return e.filter(e=>this._isSupportedTrack(e)).map(e=>{let t=e.language;return{language:t,label:this._getTrackLabel(t),file:e.file,cues:[]}})}static _isSupportedTrack(e){return e.kind===`captions`&&!!e.language&&fS.includes(e.language)}static _getTrackLabel(e){return mt[e]??`Unknown`}static _parse(e){return e.trim().startsWith(`WEBVTT`)?this._parseVTT(e):this._parseSRT(e)}static _parseVTT(e){try{return new dS.WebVTTParser().parse(e).cues.map(e=>({start:e.startTime,end:e.endTime,text:e.text}))}catch(e){return console.error(`Failed to parse VTT captions:`,e),[]}}static _parseSRT(e){try{return new uS().fromSrt(e).map(e=>({start:e.startSeconds,end:e.endSeconds,text:e.text}))}catch(e){return console.error(`Failed to parse SRT captions:`,e),[]}}};let mS=class{constructor(){C(this,`_videoEventBus`,y.resolve(pc)),C(this,`_settings`,{language:``,fontColor:`white`,fontOpacity:`100%`,fontSize:`100%`,fontFamily:`Arial`,textShadow:`none`,backgroundColor:`black`,backgroundOpacity:`50%`,windowColor:`black`,windowOpacity:`0%`}),C(this,`STORAGE_KEY`,`adthrive_video_settings`),this._loadSettings()}get settings(){return this._settings}updateSetting(e,t){this._settings[e]=t,this._saveSettings(),this._videoEventBus.settingsUpdated.emit({key:e,value:t})}_saveSettings(){try{L.setInternalLocalStorage(this.STORAGE_KEY,this._settings)}catch(e){console.error(`Failed to save settings:`,e)}}_loadSettings(){try{let e=L.readInternalLocalStorage(this.STORAGE_KEY);e&&typeof e==`object`&&(this._settings={...this._settings,...e})}catch(e){console.error(`Failed to load settings:`,e)}}};mS=w([D(`VideoSettingsManager`),S()],mS);var hS=class{constructor(e,t){this._videoElement=e,this._settings=t,C(this,`_logPrefix`,`Captions`),C(this,`captionsButton`,void 0),C(this,`captionContainer`,void 0),C(this,`_tracks`,[]),C(this,`_activeTrack`,null),C(this,`_currentCueIndex`,-1),C(this,`_preferredLanguage`,``),C(this,`_videoEventBus`,y.resolve(pc)),C(this,`_settingsState`,y.resolve(mS)),C(this,`_onTimeUpdate`,this._handleTimeUpdate.bind(this)),C(this,`_onTimeUpdateAttached`,!1),this.captionContainer=lS.createCaptionsContainer(),this.captionsButton=lS.createCaptionsButton(()=>this._settings.toggle(`language`)),this._videoEventBus.settingsUpdated.on(e=>this._handleSettingsUpdate(e.key,e.value)),this._applyStoredSettings()}get captionLanguage(){return this._preferredLanguage}init(e){this._reset(),this._tracks=pS.getTracks(e),this._updateCaptionsButtonVisibility(),this._settings.updatePageOptions(`language`,this._tracks.map(e=>e.language)),this._setTrack(this._preferredLanguage)}_applyStoredSettings(){let e=this._settingsState.settings;Object.entries(e).forEach(([e,t])=>{this._setStyle(e,t)}),this._preferredLanguage=e.language}_updateCaptionsButtonVisibility(){let e=this._tracks.length>0;lS.toggleCaptionsButton(this.captionsButton,e)}_handleSettingsUpdate(e,t){e===`language`?this._setTrack(t):this._setStyle(e,t)}async _setTrack(e){this._preferredLanguage=e,e||(lS.clearCaption(this.captionContainer),this._detachTimeUpdateListener()),this._activeTrack=this._tracks.find(t=>t.language===e)||null,this._activeTrack&&(this._activeTrack.cues=await pS.load(this._activeTrack.file),this._attachTimeUpdateListener(),this._currentCueIndex!==-1&&this._updateCaption(!0)),this._settings.hide()}_setStyle(e,t){lS.updateCaptionStyles(this.captionContainer,e,t)}_reset(){lS.clearCaption(this.captionContainer),this._detachTimeUpdateListener(),this._tracks=[],this._activeTrack=null,this._currentCueIndex=-1}_handleTimeUpdate(){if(!this._activeTrack){lS.clearCaption(this.captionContainer),this._detachTimeUpdateListener();return}this._updateCaption()}_updateCaption(e=!1){let t=this._videoElement.currentTime,n=this._activeTrack?.cues||[];if(n.length&&(this._currentCueIndex===-1||t<n[this._currentCueIndex].start||t>n[this._currentCueIndex].end||e)){let e=n.findIndex(e=>t>=e.start&&t<=e.end);e===-1?lS.clearCaption(this.captionContainer):(this._currentCueIndex=e,lS.displayCaption(this.captionContainer,n[e].text))}}_attachTimeUpdateListener(){!this._onTimeUpdateAttached&&this._activeTrack&&(this._videoElement.addEventListener(`timeupdate`,this._onTimeUpdate),this._onTimeUpdateAttached=!0)}_detachTimeUpdateListener(){this._onTimeUpdateAttached&&=(this._videoElement.removeEventListener(`timeupdate`,this._onTimeUpdate),!1)}};let gS={languages:{path:`captions`,key:`language`,title:`Captions`,options:[{label:`Settings`,value:`settings`,action:`show`,persist:!0},...Object.entries(mt).map(([e,t])=>({label:t,value:e,action:`update`,persist:e===``}))],parent:``},settings:{path:`settings`,key:`settings`,title:`Settings`,options:[{label:`Font Color`,value:`fontColor`,action:`show`},{label:`Font Opacity`,value:`fontOpacity`,action:`show`},{label:`Font Size`,value:`fontSize`,action:`show`},{label:`Font Family`,value:`fontFamily`,action:`show`},{label:`Text Shadow`,value:`textShadow`,action:`show`},{label:`Background Color`,value:`backgroundColor`,action:`show`},{label:`Background Opacity`,value:`backgroundOpacity`,action:`show`},{label:`Window Color`,value:`windowColor`,action:`show`},{label:`Window Opacity`,value:`windowOpacity`,action:`show`}],parent:`language`},fontColor:{path:`fontColor`,key:`fontColor`,title:`Font Color`,options:[{label:`White`,value:`white`,action:`update`},{label:`Black`,value:`black`,action:`update`},{label:`Red`,value:`red`,action:`update`},{label:`Green`,value:`green`,action:`update`},{label:`Blue`,value:`blue`,action:`update`},{label:`Yellow`,value:`yellow`,action:`update`},{label:`Magenta`,value:`magenta`,action:`update`},{label:`Cyan`,value:`cyan`,action:`update`}],parent:`settings`},fontOpacity:{path:`fontOpacity`,key:`fontOpacity`,title:`Font Opacity`,options:[{label:`100%`,value:`100%`,action:`update`},{label:`75%`,value:`75%`,action:`update`},{label:`50%`,value:`50%`,action:`update`},{label:`25%`,value:`25%`,action:`update`}],parent:`settings`},fontSize:{path:`fontSize`,key:`fontSize`,title:`Font Size`,options:[{label:`200%`,value:`200%`,action:`update`},{label:`175%`,value:`175%`,action:`update`},{label:`150%`,value:`150%`,action:`update`},{label:`125%`,value:`125%`,action:`update`},{label:`100%`,value:`100%`,action:`update`},{label:`75%`,value:`75%`,action:`update`},{label:`50%`,value:`50%`,action:`update`}],parent:`settings`},fontFamily:{path:`fontFamily`,key:`fontFamily`,title:`Font Family`,options:[{label:`Arial`,value:`Arial`,action:`update`},{label:`Georgia`,value:`Georgia`,action:`update`},{label:`Garamond`,value:`Garamond`,action:`update`},{label:`Courier New`,value:`Courier New`,action:`update`},{label:`Tahoma`,value:`Tahoma`,action:`update`},{label:`Times New Roman`,value:`Times New Roman`,action:`update`},{label:`Trebuchet MS`,value:`Trebuchet MS`,action:`update`},{label:`Verdana`,value:`Verdana`,action:`update`}],parent:`settings`},textShadow:{path:`textShadow`,key:`textShadow`,title:`Text Shadow`,options:[{label:`None`,value:`none`,action:`update`},{label:`Raised`,value:`raised`,action:`update`},{label:`Depressed`,value:`depressed`,action:`update`},{label:`Uniform`,value:`uniform`,action:`update`},{label:`Drop Shadow`,value:`drop shadow`,action:`update`}],parent:`settings`},backgroundColor:{path:`backgroundColor`,key:`backgroundColor`,title:`Background Color`,options:[{label:`White`,value:`white`,action:`update`},{label:`Black`,value:`black`,action:`update`},{label:`Red`,value:`red`,action:`update`},{label:`Green`,value:`green`,action:`update`},{label:`Blue`,value:`blue`,action:`update`},{label:`Yellow`,value:`yellow`,action:`update`},{label:`Magenta`,value:`magenta`,action:`update`},{label:`Cyan`,value:`cyan`,action:`update`}],parent:`settings`},backgroundOpacity:{path:`backgroundOpacity`,key:`backgroundOpacity`,title:`Background Opacity`,options:[{label:`100%`,value:`100%`,action:`update`},{label:`75%`,value:`75%`,action:`update`},{label:`50%`,value:`50%`,action:`update`},{label:`25%`,value:`25%`,action:`update`},{label:`0%`,value:`0%`,action:`update`}],parent:`settings`},windowColor:{path:`windowColor`,key:`windowColor`,title:`Window Color`,options:[{label:`White`,value:`white`,action:`update`},{label:`Black`,value:`black`,action:`update`},{label:`Red`,value:`red`,action:`update`},{label:`Green`,value:`green`,action:`update`},{label:`Blue`,value:`blue`,action:`update`},{label:`Yellow`,value:`yellow`,action:`update`},{label:`Magenta`,value:`magenta`,action:`update`},{label:`Cyan`,value:`cyan`,action:`update`}],parent:`settings`},windowOpacity:{path:`windowOpacity`,key:`windowOpacity`,title:`Window Opacity`,options:[{label:`100%`,value:`100%`,action:`update`},{label:`75%`,value:`75%`,action:`update`},{label:`50%`,value:`50%`,action:`update`},{label:`25%`,value:`25%`,action:`update`},{label:`0%`,value:`0%`,action:`update`}],parent:`settings`}};var _S=class{static bootstrap(){let e=document.createElement(`div`),t=document.createElement(`div`),n=document.createElement(`span`),r=document.createElement(`div`);e.classList.add(this.CLASSES.CONTAINER),t.classList.add(this.CLASSES.HEADER),n.classList.add(this.CLASSES.TITLE),r.classList.add(this.CLASSES.BODY);let i=this._createBackButton();t.appendChild(i),t.appendChild(n);let a=this._createCloseButton();return t.appendChild(a),e.appendChild(t),e.appendChild(r),[e,n,r]}static show(e,t=null,n=null,r=!1){t&&t.classList.remove(this.CLASSES.PAGE_ACTIVE),n&&(n.classList.add(this.CLASSES.PAGE_ACTIVE),r?e.classList.add(this.CLASSES.NESTED):e.classList.remove(this.CLASSES.NESTED)),this._scrollup(e),e.classList.add(this.CLASSES.ACTIVE)}static hide(e){e.classList.remove(this.CLASSES.ACTIVE)}static isActive(e){return e.classList.contains(this.CLASSES.ACTIVE)}static updateTitle(e,t=``){e.innerText=t}static createOptionList(e,t){let n=document.createElement(`div`);return n.classList.add(this.CLASSES.PAGE),n.dataset.key=e,t.forEach(e=>{let t=this._createOptionListItem(e.label,e.value,e.action,e.persist);n.appendChild(t)}),n}static updateOptionListAllowedValues(e,t){Array.from(e.children).filter(e=>e instanceof HTMLButtonElement).forEach(e=>{let n=this.CLASSES.PAGE_ITEM_UNAVAILABLE,{persist:r,value:i}=e.dataset,a=i?t.includes(i):!1;r||a?e.classList.remove(n):e.classList.add(n)})}static updateOptionListSelection(e,t){let n=this.CLASSES.PAGE_ITEM_SELECTED;Array.from(e.children).filter(e=>e instanceof HTMLElement).forEach(e=>{t===e.dataset.value?e.classList.add(n):e.classList.remove(n)})}static updateOptionListItemPreview(e,t,n){let r=e.querySelector(`button[data-value="${t}"] span.raptive-player-settings-page-item-value`);r&&(r.innerText=n)}static _createOptionListItem(e,t,n,r=!1){let i=document.createElement(`button`);i.setAttribute(`type`,`button`),i.classList.add(this.CLASSES.PAGE_ITEM),i.dataset.action=n,i.dataset.value=t,r&&(i.dataset.persist=`true`);let a=document.createElement(`span`);a.innerText=e,i.appendChild(a);let o=document.createElement(`span`);if(o.classList.add(`raptive-player-settings-page-item-value`),i.appendChild(o),n===`show`){let e=document.createElement(`span`),t=this._createForwardIcon();e.appendChild(t),i.appendChild(e)}return i}static _scrollup(e){e?.lastElementChild&&(e.lastElementChild.scrollTop=0)}static _createBackButton(){let e=document.createElement(`button`);e.setAttribute(`type`,`button`),e.classList.add(this.CLASSES.BACK_BUTTON),e.dataset.action=`back`;let t=this._createBackIcon();return e.appendChild(t),e}static _createBackIcon(){let e=`http://www.w3.org/2000/svg`,t=document.createElementNS(e,`svg`);t.style.pointerEvents=`none`,t.setAttribute(`viewBox`,`0 0 24 24`),t.setAttribute(`width`,`24`),t.setAttribute(`height`,`24`),t.setAttribute(`stroke`,`currentColor`),t.setAttribute(`stroke-width`,`2`),t.setAttribute(`fill`,`none`),t.setAttribute(`stroke-linecap`,`round`),t.setAttribute(`stroke-linejoin`,`round`),t.setAttribute(`class`,`feather feather-chevron-left`);let n=document.createElementNS(e,`polyline`);return n.setAttribute(`points`,`15 18 9 12 15 6`),t.appendChild(n),t}static _createForwardIcon(){let e=`http://www.w3.org/2000/svg`,t=document.createElementNS(e,`svg`);t.style.pointerEvents=`none`,t.setAttribute(`viewBox`,`0 0 24 24`),t.setAttribute(`width`,`20`),t.setAttribute(`height`,`20`),t.setAttribute(`fill`,`none`),t.setAttribute(`stroke`,`currentColor`),t.setAttribute(`stroke-width`,`2`),t.setAttribute(`stroke-linecap`,`round`),t.setAttribute(`stroke-linejoin`,`round`),t.setAttribute(`class`,`feather feather-chevron-right`);let n=document.createElementNS(e,`polyline`);return n.setAttribute(`points`,`9 18 15 12 9 6`),t.appendChild(n),t}static _createCloseButton(){let e=document.createElement(`button`);e.setAttribute(`type`,`button`),e.classList.add(this.CLASSES.CLOSE_BUTTON),e.dataset.action=`hide`;let t=this._createCloseIcon();return e.appendChild(t),e}static _createCloseIcon(){let e=`http://www.w3.org/2000/svg`,t=document.createElementNS(e,`svg`);t.style.pointerEvents=`none`,t.setAttribute(`viewBox`,`0 0 24 24`),t.setAttribute(`width`,`24`),t.setAttribute(`height`,`24`),t.setAttribute(`stroke`,`currentColor`),t.setAttribute(`stroke-width`,`2`),t.setAttribute(`fill`,`none`),t.setAttribute(`stroke-linecap`,`round`),t.setAttribute(`stroke-linejoin`,`round`),t.setAttribute(`class`,`css-i6dzq1`);let n=document.createElementNS(e,`line`);n.setAttribute(`x1`,`18`),n.setAttribute(`y1`,`6`),n.setAttribute(`x2`,`6`),n.setAttribute(`y2`,`18`);let r=document.createElementNS(e,`line`);return r.setAttribute(`x1`,`6`),r.setAttribute(`y1`,`6`),r.setAttribute(`x2`,`18`),r.setAttribute(`y2`,`18`),t.appendChild(n),t.appendChild(r),t}};C(_S,`CLASSES`,Object.freeze({CONTAINER:`raptive-player-settings`,ACTIVE:`raptive-player-settings--active`,NESTED:`raptive-player-settings--nested`,HEADER:`raptive-player-settings-header`,BACK_BUTTON:`raptive-player-settings-back`,TITLE:`raptive-player-settings-header-title`,CLOSE_BUTTON:`raptive-player-settings-close`,BODY:`raptive-player-settings-body`,PAGE:`raptive-player-settings-page`,PAGE_ACTIVE:`raptive-player-settings-page--active`,PAGE_ITEM:`raptive-player-settings-page-item`,PAGE_ITEM_SELECTED:`raptive-player-settings-page-item--selected`,PAGE_ITEM_UNAVAILABLE:`raptive-player-settings-page-item--unavailable`}));var vS=class{constructor(){C(this,`_container`,void 0),C(this,`_title`,void 0),C(this,`_body`,void 0),C(this,`_pages`,new Map),C(this,`_activePage`,``),C(this,`_state`,y.resolve(mS)),C(this,`_videoEventBus`,y.resolve(pc)),[this._container,this._title,this._body]=_S.bootstrap(),this._initPages(),this._initOptionListSelections(),this._setupListeners(),this._videoEventBus.settingsUpdated.on(e=>this._updateSettingUI(e.key,e.value))}get el(){return this._container}show(e){let t=this._pages.get(this._activePage)||null,n=e?this._pages.get(e):null,r=!!n?.parent;this._activePage=e??``,_S.show(this._container,t?.el,n?.el,r),_S.updateTitle(this._title,n?.title)}hide(){_S.hide(this._container)}toggle(e){_S.isActive(this._container)?this.hide():this.show(e)}updatePageOptions(e,t){let n=this._pages.get(e);n&&_S.updateOptionListAllowedValues(n.el,t)}_back(){let e=this._pages.get(this._activePage);e&&this.show(e.parent)}_update(e,t){e in this._state.settings&&(this._state.updateSetting(e,t),this._updateSettingUI(e,t),this._pages.get(e)?.parent&&this._back())}_updateSettingUI(e,t){let n=this._pages.get(e);n&&(_S.updateOptionListItemPreview(this._container,e,t),_S.updateOptionListSelection(n.el,t))}_initPages(){Object.values(gS).forEach(e=>{let t=_S.createOptionList(e.key,e.options);this._addPage(e.key,e.title,t,e.parent)})}_initOptionListSelections(){Object.entries(this._state.settings).forEach(([e,t])=>{_S.updateOptionListItemPreview(this._container,e,t);let n=this._pages.get(e);n&&_S.updateOptionListSelection(n.el,t)})}_addPage(e,t,n,r=``){this._pages.set(e,{el:n,title:t,parent:r}),this._body.appendChild(n)}_setupListeners(){this._container.addEventListener(`click`,e=>{if(!(e.target instanceof HTMLElement))return;let t=e.target.closest(`button`);if(!t)return;let n=t.dataset.action,r=t.dataset.value??``;if(n)switch(n){case`show`:this.show(r);break;case`hide`:this.hide();break;case`back`:this._back();break;case`update`:{let e=t.parentElement?.dataset.key??``;this._update(e,r);break}}})}};let yS=e=>Array.isArray(e)?e:[e],bS=(e,t)=>{t=yS(t),t.forEach(t=>{e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)})};var xS=class{constructor(e,t){C(this,`_container`,document.createElement(`DIV`)),C(this,`_progressBar`,document.createElement(`DIV`)),C(this,`_progressBarIndicator`,document.createElement(`DIV`)),C(this,`_progressBarHandle`,document.createElement(`DIV`)),C(this,`_isDragging`,!1),C(this,`_startDraggingHandler`,this._handleDragProgress.bind(this)),C(this,`_stopDraggingHandler`,this._handleStopDragProgress.bind(this)),C(this,`_videoElement`,void 0),C(this,`_isVisible`,void 0),C(this,`_throttledKeyboardControl`,Ao(e=>{switch(e.code){case`ArrowRight`:this._fastForwardVideo();break;case`ArrowLeft`:this._rewindVideo();break}},100)),this._videoElement=e,this._isVisible=t,this.init()}isDragging(){return this._isDragging}toggle(e){e?this._container.classList.add(`active`):this._container.classList.remove(`active`)}update(){if(!this._isVisible()||this._isDragging)return;let{currentTime:e,duration:t}=this._videoElement,n=e/t;this._setProgressPosition(n)}init(){this._createProgressBar(),this._setupListeners()}_createProgressBar(){this._container.tabIndex=0,this._container.className=`adthrive-player-progress-bar-container`,this._progressBar.className=`adthrive-player-progress-bar`,this._progressBarHandle.className=`adthrive-player-progress-bar-handle`,this._progressBar.appendChild(this._progressBarIndicator),this._container.appendChild(this._progressBar),this._container.appendChild(this._progressBarHandle)}_setupListeners(){this._container.addEventListener(`click`,this._seekVideoOnClick.bind(this)),this._container.addEventListener(`keydown`,this._handleKeyboardControl.bind(this)),this._progressBarHandle.addEventListener(`pointerdown`,this._handleStartDragProgress.bind(this)),this._videoElement.addEventListener(`timeupdate`,this.update.bind(this))}_setProgressPosition(e){this._progressBarHandle.style.left=`${e*100}%`,this._progressBarIndicator.style.transform=`scaleX(${e})`}_seekVideoOnClick(e){this._seekVideo(e.clientX)}_seekVideo(e){let t=this._container.getBoundingClientRect(),n=(e-t.left)/t.width*this._videoElement.duration;this._videoElement.currentTime=n}_fastForwardVideo(e=.05){let t=this._videoElement.duration,n=t*e;this._videoElement.currentTime=Math.min(this._videoElement.currentTime+n,t)}_rewindVideo(e=.05){let t=this._videoElement.duration*e;this._videoElement.currentTime=Math.max(this._videoElement.currentTime-t,0)}_handleKeyboardControl(e){[`Space`,`Enter`,`ArrowLeft`,`ArrowRight`].includes(e.code)&&e.preventDefault(),this._throttledKeyboardControl(e)}_handleStartDragProgress(e){this._isDragging||(e.preventDefault(),this._isDragging=!0,this._container.setPointerCapture(e.pointerId),document.addEventListener(`pointermove`,this._startDraggingHandler),document.addEventListener(`pointerup`,this._stopDraggingHandler))}_handleDragProgress(e){let t=e.clientX;e.preventDefault();let n=this._container.getBoundingClientRect(),r=t-n.left;r=Math.max(0,Math.min(r,n.width));let i=r/n.width;this._setProgressPosition(i)}_handleStopDragProgress(e){let t=e.clientX;this._isDragging=!1,this._container.releasePointerCapture(e.pointerId),document.removeEventListener(`pointermove`,this._startDraggingHandler),document.removeEventListener(`pointerup`,this._stopDraggingHandler),this._seekVideo(t)}};let SS=class{constructor({videoElement:e,playerType:t,isDesktop:n,getIsVideoContent:r}){C(this,`_playerControls`,document.createElement(`DIV`)),C(this,`_isInstream`,!1),C(this,`_isDesktop`,!1),C(this,`_playerType`,void 0),C(this,`_videoElement`,void 0),C(this,`_getIsVideoContent`,void 0),C(this,`_progressBar`,null),C(this,`_playButtonState`,`pause`),C(this,`_muted`,!0),C(this,`_muteButton`,document.createElement(`DIV`)),C(this,`_unmuteButton`,document.createElement(`DIV`)),C(this,`_playerControlsVolumeContainer`,document.createElement(`DIV`)),C(this,`_playerControlsVolumeIcon`,document.createElement(`DIV`)),C(this,`_previousVolumeLevel`,.5),C(this,`_volumeSliderContainer`,document.createElement(`DIV`)),C(this,`_volumeSlider`,document.createElement(`INPUT`)),C(this,`_volumeLevel`,0),C(this,`_logPrefix`,`VideoPlayerControls`),C(this,`_adthrivePlayerIcon`,`adthrive-player-icon`),C(this,`_hiddenIconClassName`,`adthrive-hidden`),C(this,`_overlay`,document.createElement(`DIV`)),C(this,`_overlayPlayButton`,document.createElement(`DIV`)),C(this,`_preventClick`,!1),C(this,`_created`,!1),C(this,`_playButton`,null),C(this,`_pauseButton`,null),C(this,`_fullscreenButton`,null),C(this,`_controlsVisible`,!0),C(this,`_autoHideControlsTimeout`,void 0),C(this,`_mediaStarted`,!1),C(this,`videoActionEvents`,new T),C(this,`_captions`,null),C(this,`_settings`,null),C(this,`_onPlayClickCallback`,void 0),C(this,`_onPauseClickCallback`,void 0),C(this,`_onVolumeChangeCallback`,void 0),C(this,`_onToggleFullscreenCallback`,void 0),C(this,`_onKickoffAdPlaybackCallback`,void 0),C(this,`_handleContainerMouseEnter`,()=>{this.showControls()}),C(this,`_handleContainerMouseLeave`,()=>{this.hideControls()}),C(this,`_handleContainerTouchStart`,e=>{if(this._progressBar?.isDragging())return;let t=e.target,n=t.parentElement,r=t.querySelectorAll(`${this._adthrivePlayerIcon}-volume`);r?.length&&r.forEach(e=>{bS(e,this._hiddenIconClassName)}),n&&bS(n,`active`),this._controlsVisible?this._preventClick=!1:(this._preventClick=!0,this.showControls())}),C(this,`_handleContainerTouchEnd`,e=>{let t=e.target,n=t.parentElement;t.classList.contains(`adthrive-player-progress-bar-handle`)||(n&&bS(n,`active`),this._controlsVisible&&e.stopPropagation())}),C(this,`_handleContainerFocusIn`,()=>{this.showControls()}),C(this,`_handleContainerFocusOut`,e=>{this._videoElement?.parentElement?.contains(e.target)||this.hideControls()}),C(this,`_handleOverlayClick`,()=>{this._onKickoffAdPlaybackCallback?.(),this._overlay.remove();let e=this._videoElement.parentElement;e&&(e.addEventListener(`mouseenter`,this._handleContainerMouseEnter),e.addEventListener(`mouseleave`,this._handleContainerMouseLeave),e.addEventListener(`focusin`,this._handleContainerFocusIn),e.addEventListener(`focusout`,this._handleContainerFocusOut),e.addEventListener(`touchstart`,this._handleContainerTouchStart),e.addEventListener(`touchend`,this._handleContainerTouchEnd))}),C(this,`_handlePlayClick`,e=>{this._onPlayClickCallback?.(e)}),C(this,`_handlePauseClick`,e=>{this._onPauseClickCallback?.(e)}),C(this,`_handleUnmuteClick`,()=>{this._toggleVolume()}),C(this,`_handleMuteClick`,()=>{this._toggleVolume()}),C(this,`_handleFullscreenClick`,e=>{this._onToggleFullscreenCallback?.(e)}),C(this,`_handleVolumeSliderMouseUp`,e=>{this._volumeChange(e)}),C(this,`_handleOverlayKeydown`,Ao(e=>{[`Space`,`Enter`].includes(e.code)&&(e.preventDefault(),this._handleOverlayClick(),setTimeout(()=>this._pauseButton?.focus(),100))},100)),C(this,`_handlePlayKeydown`,Ao(e=>{[`Space`,`Enter`].includes(e.code)&&(e.preventDefault(),this._onPlayClickCallback?.(e),setTimeout(()=>this._pauseButton?.focus(),100))},100)),C(this,`_handlePauseKeydown`,Ao(e=>{[`Space`,`Enter`].includes(e.code)&&(e.preventDefault(),this._onPauseClickCallback?.(e),setTimeout(()=>this._playButton?.focus(),100))},100)),C(this,`_handleUnmuteKeydown`,Ao(e=>{[`Space`,`Enter`].includes(e.code)&&(e.preventDefault(),this._toggleVolume(),setTimeout(()=>this._muteButton?.focus(),100))},100)),C(this,`_handleMuteKeydown`,Ao(e=>{[`Space`,`Enter`].includes(e.code)&&(e.preventDefault(),this._toggleVolume(),setTimeout(()=>this._unmuteButton?.focus(),100))},100)),C(this,`_handleVolumeSliderKeydown`,Ao(e=>{[`Space`,`Enter`,`ArrowLeft`,`ArrowRight`].includes(e.code)&&e.preventDefault();let t=this._volumeSlider;if(e.code===`ArrowRight`){t.value=`${Math.min(Number(t.value)+5,100)}`,this.muted&&(this._setMuteState(!1),this._muteButton?.classList.add(this._hiddenIconClassName),this._unmuteButton?.classList.remove(this._hiddenIconClassName));let e=Number(t.value)/100;this.setVolume(e),this._setSliderRange(),this._onVolumeChangeCallback?.()}if(e.code===`ArrowLeft`){t.value=`${Math.max(Number(t.value)-5,0)}`,!this.muted&&t.value===`0`&&(this._setMuteState(!0),this._unmuteButton?.classList.add(this._hiddenIconClassName),this._muteButton?.classList.remove(this._hiddenIconClassName));let e=Number(t.value)/100;this.setVolume(e),this._setSliderRange(),this._onVolumeChangeCallback?.()}},100)),this._isInstream=k.AutoInjected===t||k.EmbeddedStationary===t||k.RelatedSticky===t,this._playerType=t,this._videoElement=e,this._getIsVideoContent=r,this._isDesktop=n;let i=t===k.EmbeddedStationary;this._playButtonState=i?`play`:`pause`,this._controlsVisible=!i,this._setInitialVolume(i)}get muted(){return this._muted}get volumeLevel(){return this._volumeLevel}get preventClick(){return this._preventClick}get isVideoContent(){return this._getIsVideoContent()}toggleControlsFullWidth(e){let t=this._playerControls.classList;e?t.add(`adthrive-full-width`):t.remove(`adthrive-full-width`)}showControls(){if(!this._mediaStarted)return;let e=this._getIsVideoContent();this.toggleControlsFullWidth(e),this._controlsVisible=!0,this._progressBar?.update(),this._playerControls.classList.remove(`adthrive-player-ad-controls-hidden`),this._resetAutoHideControlsTimeout()}hideControls(){!this._isDesktop&&!this._getIsVideoContent()||this._progressBar?.isDragging()||(this._playerControls.classList.add(`adthrive-player-ad-controls-hidden`),this._settings?.hide(),this._controlsVisible=!1,this._clearAutoHideControlsTimeout())}toggleProgressBar(e){this._progressBar&&(e?this._playerControls.classList.add(`adthrive-player-progress-bar-visible`):this._playerControls.classList.remove(`adthrive-player-progress-bar-visible`),this._progressBar.toggle(e))}setMediaStarted(e){this._mediaStarted=e}setPlayButtonState(e){this._playButtonState!==e&&(this._playButtonState=e,this._setActiveButtonState(this._playButtonState))}_setPreviousVolume(e){return this._previousVolumeLevel=e,this._previousVolumeLevel}setVolume(e){return this._volumeLevel=e,this._videoElement.volume=this.volumeLevel,this._videoElement.volume}muteVolume(e=!1){this._setMuteState(!0),this.setVolume(0),this._setMuteIconToMuted(!0),e&&E.event(this._logPrefix,`muted`,this._playerType)}unmuteVolume(e,t=!1){this._setMuteState(!1),this.setVolume(e||this._previousVolumeLevel),this._setMuteIconToMuted(!1),t&&E.event(this._logPrefix,`unmuted`,this._playerType)}_setMuteState(e){return this._muted=!!e,this._videoElement.muted=this._muted,this._videoElement.muted}_emitAction(e,t){let n=t?`user${e.charAt(0).toUpperCase()+e.substring(1)}`:e,r=this._getIsVideoContent()?`content`:`ad`;this.videoActionEvents.emit({action:n,context:r})}_addEmitterIfNeeded(e){return this._isInstream?Object.entries(e).reduce((e,[t,n])=>(e[t]=e=>{t!==`onkickoffAdPlayback`&&this._emitAction(t,e),n(e)},e),{}):e}enablePlayerControls(e,t){if(this._created)return;this._created=!0;let{play:n,pause:r,volume:i,onkickoffAdPlayback:a,fullscreen:o}=this._addEmitterIfNeeded(e);this._onPlayClickCallback=n,this._onPauseClickCallback=r,this._onVolumeChangeCallback=i,this._onKickoffAdPlaybackCallback=a;let s=this._playerControls;s.classList.add(`adthrive-player-ad-controls`),this._playerType===k.EmbeddedStationary&&a&&this._createOverlay();let c=this._createPlayPauseControls();this._createVolumeIconControls(),s.appendChild(c),s.appendChild(this._playerControlsVolumeContainer),this._isInstream?(s.classList.add(`adthrive-player-ad-controls-hidden`),this._settings=new vS,this._videoElement.parentNode?.appendChild(this._settings.el),this._captions=new hS(this._videoElement,this._settings),s.appendChild(this._captions.captionsButton),o&&(this._onToggleFullscreenCallback=o,this._fullscreenButton=this.createFullscreenButton(),s.appendChild(this._fullscreenButton)),this._progressBar=new xS(this._videoElement,()=>this._controlsVisible),s.appendChild(this._progressBar._container),this._videoElement.parentNode?.insertBefore(s,this._videoElement),this._videoElement.parentNode?.insertBefore(this._captions.captionContainer,this._videoElement)):t?.appendChild(this._playerControls);let l=this._videoElement.parentElement;l&&this._isInstream&&this._playerType!==k.EmbeddedStationary&&this._setVideoContainerEvents(l)}_setVideoContainerEvents(e){e&&(e.addEventListener(`mouseenter`,this._handleContainerMouseEnter),e.addEventListener(`mouseleave`,this._handleContainerMouseLeave),e.addEventListener(`focusin`,this._handleContainerFocusIn),e.addEventListener(`focusout`,this._handleContainerFocusOut),e.addEventListener(`touchstart`,this._handleContainerTouchStart),e.addEventListener(`touchend`,this._handleContainerTouchEnd))}_createOverlay(){this._overlay.className=`adthrive-video-overlay`,this._createOverlayPlayButton(),this._videoElement.parentElement?.appendChild(this._overlay),this._overlay.addEventListener(`click`,this._handleOverlayClick)}_createOverlayPlayButton(){this._overlayPlayButton.tabIndex=0,this._overlayPlayButton.className=`adthrive-player-big-play-button`,this._overlayPlayButton.innerHTML=`&#9658;`,this._overlay.appendChild(this._overlayPlayButton),this._overlayPlayButton.addEventListener(`keydown`,this._handleOverlayKeydown)}_createPlayPauseControls(){let e=document.createElement(`DIV`);return e.className=`adthrive-player-ad-controls-play`,this._playButton=this._createPlayButton(),this._pauseButton=this._createPauseButton(),e.appendChild(this._playButton),e.appendChild(this._pauseButton),e}_resetAutoHideControlsTimeout(e=5e3){this._clearAutoHideControlsTimeout(),!(this._isDesktop||!this._getIsVideoContent())&&(this._autoHideControlsTimeout=window.setTimeout(()=>{this.hideControls()},e))}_clearAutoHideControlsTimeout(){this._autoHideControlsTimeout&&=(clearTimeout(this._autoHideControlsTimeout),void 0)}_setActiveButtonState(e){let t=this._playerControls.querySelector(`#${this._adthrivePlayerIcon}-${e}-${this._playerType}`),n=null;n=e===`pause`?t&&t.previousSibling:t&&t.nextSibling,t?.classList.remove(this._hiddenIconClassName),n?.classList.add(this._hiddenIconClassName)}_createPlayButton(){let e=document.createElement(`DIV`);e.classList.add(`${this._adthrivePlayerIcon}`,`${this._adthrivePlayerIcon}-play`),this._playButtonState===`pause`&&e.classList.add(this._hiddenIconClassName),e.id=`${this._adthrivePlayerIcon}-play-${this._playerType}`,e.tabIndex=0;let t=this._createSvg(`white`,!1);return t.appendChild(this._createPolygon(`white`,`2.29,0 2.29,18 15.71,9`)),e.appendChild(t),e.addEventListener(`click`,this._handlePlayClick),e.addEventListener(`keydown`,this._handlePlayKeydown),e}_createPauseButton(){let e=document.createElement(`DIV`);e.classList.add(`${this._adthrivePlayerIcon}`,`${this._adthrivePlayerIcon}-pause`),this._playButtonState===`play`&&e.classList.add(this._hiddenIconClassName),e.id=`${this._adthrivePlayerIcon}-pause-${this._playerType}`,e.tabIndex=0;let t=this._createSvg(`white`,!1);return t.appendChild(this._createRect(`white`,`5`,`18`,`2.29`)),t.appendChild(this._createRect(`white`,`5`,`18`,`10.71`)),e.addEventListener(`click`,this._handlePauseClick),e.addEventListener(`keydown`,this._handlePauseKeydown),e.appendChild(t),e}_appendVolumeSlider(){let e=this._createVolumeSlider();this._playerControlsVolumeContainer.classList.add(`adthrive-player-ad-controls-volume-container-with-slider`),this._playerControlsVolumeIcon.appendChild(e)}_createVolumeIconControls(){this._playerControlsVolumeContainer.className=`adthrive-player-ad-controls-volume-container`,this._playerControlsVolumeIcon.className=`adthrive-player-ad-controls-volume`,this._isInstream&&this._playerControlsVolumeContainer.classList.add(`adthrive-player-ad-controls-volume-container-with-bar`),this._createVolumeMutedButton(),this._createVolumeUnMutedButton(),this._playerControlsVolumeIcon.appendChild(this._muteButton),this._playerControlsVolumeIcon.appendChild(this._unmuteButton),this._playerControlsVolumeContainer.appendChild(this._playerControlsVolumeIcon),this._isDesktop&&this._appendVolumeSlider()}_createVolumeMutedButton(){this._muteButton.tabIndex=0,this._muteButton.classList.add(`${this._adthrivePlayerIcon}`,`${this._adthrivePlayerIcon}-volume`,`${this._adthrivePlayerIcon}-volume-muted`),this.muted||this._muteButton.classList.add(this._hiddenIconClassName);let e=this._createSvg(`white`,!1);e.appendChild(this._createPath(`white`,`M16.45,9.02c0,1.64-0.57,2.97-1.33,4.03l1.2,1.15C17.29,12.94,18,11.26,18,9.04c0-6.95-6.96-8.7-6.96-8.7v1.32C11.04,1.66,16.45,3.96,16.45,9.02z`)),e.appendChild(this._createPath(`white`,`M13.27,14.94c-1.18,0.91-2.23,1.33-2.23,1.33v1.44c0,0,1.68-0.42,3.39-1.67L13.27,14.94z`)),e.appendChild(this._createRect(`white`,`1.71`,`22.61`,`8.15`,`-2.28`,`matrix(0.6917 -0.7222 0.7222 0.6917 -3.7421 9.2833)`)),e.appendChild(this._createPath(`white`,`M12.98,11c0.31-0.55,0.52-1.2,0.52-1.98c0-2.95-2.99-4.24-2.99-4.24v3.86L12.98,11z`)),e.appendChild(this._createPath(`white`,`M10.52,12.3v0.86c0,0,0.24-0.1,0.58-0.3L10.52,12.3z`)),e.appendChild(this._createPolygon(`white`,`9.21,7.4 9.24,0.74 5.82,4.15`)),e.appendChild(this._createPolygon(`white`,`3.69,5.77 0.06,5.77 0,12.07 4.14,12.07 9.18,17.11 9.2,11.04`)),this._muteButton.addEventListener(`click`,this._handleMuteClick),this._muteButton.addEventListener(`keydown`,this._handleMuteKeydown),this._muteButton.appendChild(e)}_createVolumeUnMutedButton(){this._unmuteButton.tabIndex=0,this._unmuteButton.classList.add(`${this._adthrivePlayerIcon}`,`${this._adthrivePlayerIcon}-volume`,`${this._adthrivePlayerIcon}-volume-unmuted`),this.muted&&this._unmuteButton.classList.add(this._hiddenIconClassName);let e=this._createSvg(`white`,!1);e.appendChild(this._createPolygon(`white`,`9.18,17.11 4.14,12.07 0,12.07 0.06,5.77 4.2,5.77 9.24,0.74`)),e.appendChild(this._createPath(`white`,`M11.04,0.34c0,0,6.96,1.75,6.96,8.7s-6.96,8.67-6.96,8.67v-1.44c0,0,5.42-2.18,5.42-7.25s-5.42-7.37-5.42-7.37V0.34z`)),e.appendChild(this._createPath(`white`,`M10.52,4.79c0,0,2.99,1.28,2.99,4.24s-2.99,4.14-2.99,4.14V4.79z`)),this._unmuteButton.appendChild(e),this._unmuteButton.addEventListener(`click`,this._handleUnmuteClick),this._unmuteButton.addEventListener(`keydown`,this._handleUnmuteKeydown)}_setInitialVolume(e){let t=this._isDesktop?.5:.8,n=e?t:0,r=!e;this._setPreviousVolume(t),this.setVolume(n),this._setSliderRange(),this._setMuteState(r)}_setSliderRange(){this._volumeSlider.value=`${this.volumeLevel*100}`}_createVolumeSlider(){let e=this._volumeSliderContainer;e.tabIndex=0,e.className=`adthrive-player-volume-control`,e.id=`adthrive-${this._playerType}-volume-control`;let t=this._volumeSlider;return t.setAttribute(`type`,`range`),t.setAttribute(`min`,`0`),t.setAttribute(`max`,`100`),t.setAttribute(`step`,`1`),t.tabIndex=-1,e.appendChild(t),t.addEventListener(`mouseup`,this._handleVolumeSliderMouseUp),e.addEventListener(`keydown`,this._handleVolumeSliderKeydown),e}_setMuteIconToMuted(e=!0){e?(this._unmuteButton.classList.add(this._hiddenIconClassName),this._muteButton.classList.remove(this._hiddenIconClassName)):(this._muteButton.classList.add(this._hiddenIconClassName),this._unmuteButton.classList.remove(this._hiddenIconClassName))}_volumeChange(e){if(this.preventClick)return;let t=e.target,n=this.volumeLevel,r=Number(t.value)/100,i=r===0,a=this.muted&&r>0;i?this.muteVolume(!0):a?this.unmuteVolume(r,!0):this.setVolume(r),this._setPreviousVolume(n),this._setSliderRange(),this._onVolumeChangeCallback?.()}_toggleVolume(){this.preventClick||(this.muted?this.unmuteVolume(0,!0):(this._setPreviousVolume(this.volumeLevel),this.muteVolume(!0)),this._setSliderRange(),this._onVolumeChangeCallback?.())}createFullscreenButton(){let e=document.createElement(`button`);return e.setAttribute(`type`,`button`),e.classList.add(this._adthrivePlayerIcon),e.classList.add(`${this._adthrivePlayerIcon}-fullscreen`),e.appendChild(this.createMaximizeIcon()),e.appendChild(this.createMinimizeIcon()),e.addEventListener(`click`,this._handleFullscreenClick),e}createMinimizeIcon(){let e=this._createSvg(`white`,!1);return e.classList.add(`raptive-player-secondary-icon`),e.setAttribute(`stroke`,`white`),e.setAttribute(`stroke-width`,`2`),e.setAttribute(`stroke-linecap`,`round`),e.setAttribute(`stroke-linejoin`,`round`),e.appendChild(this._createLine(`1`,`17`,`7`,`11`)),e.appendChild(this._createLine(`3`,`11`,`7`,`11`)),e.appendChild(this._createLine(`7`,`11`,`7`,`15`)),e.appendChild(this._createLine(`17`,`1`,`11`,`7`)),e.appendChild(this._createLine(`11`,`7`,`15`,`7`)),e.appendChild(this._createLine(`11`,`3`,`11`,`7`)),e}createMaximizeIcon(){let e=this._createSvg(`white`,!1);return e.classList.add(`raptive-player-primary-icon`),e.setAttribute(`stroke`,`white`),e.setAttribute(`stroke-width`,`2`),e.setAttribute(`stroke-linecap`,`round`),e.setAttribute(`stroke-linejoin`,`round`),e.appendChild(this._createLine(`1`,`17`,`7`,`11`)),e.appendChild(this._createLine(`1`,`17`,`5`,`17`)),e.appendChild(this._createLine(`1`,`13`,`1`,`17`)),e.appendChild(this._createLine(`17`,`1`,`11`,`7`)),e.appendChild(this._createLine(`13`,`1`,`17`,`1`)),e.appendChild(this._createLine(`17`,`1`,`17`,`5`)),e}_createPath(e,t){let n=document.createElementNS(`http://www.w3.org/2000/svg`,`path`);return n.setAttribute(`d`,t),n.setAttribute(`fill`,e),n}_createLine(e,t,n,r){let i=document.createElementNS(`http://www.w3.org/2000/svg`,`line`);return i.setAttribute(`x1`,e),i.setAttribute(`y1`,t),i.setAttribute(`x2`,n),i.setAttribute(`y2`,r),i}_createPolygon(e,t){let n=document.createElementNS(`http://www.w3.org/2000/svg`,`polygon`);return n.setAttribute(`points`,t),n.setAttribute(`fill`,e),n}_createRect(e,t,n,r,i,a){let o=document.createElementNS(`http://www.w3.org/2000/svg`,`rect`);return o.setAttribute(`x`,r),o.setAttribute(`height`,n),o.setAttribute(`width`,t),o.setAttribute(`fill`,e),i&&o.setAttribute(`y`,i),a&&o.setAttribute(`transform`,a),o}_createSvg(e,t){let n=document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);return n.setAttribute(`focusable`,`${t}`),n.setAttribute(`width`,`18`),n.setAttribute(`height`,`18`),n.setAttribute(`viewBox`,`0 0 18 18`),n.setAttribute(`fill`,e),n}setTracks(e){this._captions?.init(e)}get captionLanguage(){return this._captions?.captionLanguage??``}destroy(){this._clearAutoHideControlsTimeout();let e=this._videoElement.parentElement;e?.removeEventListener(`mouseenter`,this._handleContainerMouseEnter),e?.removeEventListener(`mouseleave`,this._handleContainerMouseLeave),e?.removeEventListener(`touchstart`,this._handleContainerTouchStart),e?.removeEventListener(`touchend`,this._handleContainerTouchEnd),e?.removeEventListener(`focusin`,this._handleContainerFocusIn),e?.removeEventListener(`focusout`,this._handleContainerFocusOut),this._overlay?.removeEventListener(`click`,this._handleOverlayClick),this._playButton?.removeEventListener(`click`,this._handlePlayClick),this._pauseButton?.removeEventListener(`click`,this._handlePauseClick),this._unmuteButton?.removeEventListener(`click`,this._handleUnmuteClick),this._muteButton?.removeEventListener(`click`,this._handleMuteClick),this._fullscreenButton?.removeEventListener(`click`,this._handleFullscreenClick),this._volumeSlider?.removeEventListener(`mouseup`,this._handleVolumeSliderMouseUp),this._overlayPlayButton?.removeEventListener(`keydown`,this._handleOverlayKeydown),this._playButton?.removeEventListener(`keydown`,this._handlePlayKeydown),this._pauseButton?.removeEventListener(`keydown`,this._handlePauseKeydown),this._unmuteButton?.removeEventListener(`keydown`,this._handleUnmuteKeydown),this._muteButton?.removeEventListener(`keydown`,this._handleMuteKeydown),this._volumeSliderContainer?.removeEventListener(`keydown`,this._handleVolumeSliderKeydown),this._onPlayClickCallback=void 0,this._onPauseClickCallback=void 0,this._onVolumeChangeCallback=void 0,this._onToggleFullscreenCallback=void 0,this._onKickoffAdPlaybackCallback=void 0}};SS=w([D(`VideoPlayerControls`)],SS);var CS=class extends I{constructor(e,t,n,r,i,a,o,s,c,l,u){super(),this._playerId=e,this._playlistId=t,this._playerType=n,this._pageElement=r,this.size=i,this._config=a,this._eventProxy=o,this._autoplay=s,this._id=c,this.playerNumber=l,this._shouldUseHardcodedAdPodDuration=u,C(this,`canPlay`,!0),C(this,`error`,new T),C(this,`seeking`,new T),C(this,`seeked`,new T),C(this,`isFirstPlay`,!0),C(this,`isVideoContent`,!1),C(this,`pause`,new T),C(this,`play`,new T),C(this,`click`,new T),C(this,`playerVolumeChange`,new T),C(this,`loadedMetaData`,new T),C(this,`ended`,new T),C(this,`timeupdate`,new T),C(this,`playlist`,[]),C(this,`ready`,new T),C(this,`kickoffAdPlayback`,new T),C(this,`state`,`idle`),C(this,`videoContentState`,`idle`),C(this,`_videoTitleDiv`,document.createElement(`DIV`)),C(this,`_videoDescriptionDiv`,document.createElement(`DIV`)),C(this,`_videoTitleOverlayContainer`,document.createElement(`DIV`)),C(this,`_wrapperTitleWrapperElement`,void 0),C(this,`_container`,document.createElement(`DIV`)),C(this,`_videoPlayerControls`,void 0),C(this,`_playerPosition`,document.createElement(`DIV`)),C(this,`_isMobile`,z()),C(this,`_isTablet`,Mo()),C(this,`_isDesktop`,!this._isMobile&&!this._isTablet),C(this,`_playerContainer`,document.createElement(`DIV`)),C(this,`imaManager`,void 0),C(this,`_videoElement`,document.createElement(`VIDEO`)),C(this,`_userClickedToPlay`,!1),C(this,`_intentionalPause`,!1),C(this,`_boundHandlers`,void 0),C(this,`_isInstream`,!1),C(this,`_instreamTypes`,[k.AutoInjected,k.EmbeddedStationary,k.RelatedSticky]),C(this,`_spaListeners`,[]),C(this,`requestVideoBids`,()=>(E.error(`VideoPlayerBase`,`requestVideoBids`,`Request video bids not set`),new Promise((e,t)=>t()))),C(this,`buildVideoUrl`,()=>{throw Error(`Build video url not set`)}),C(this,`waitForConsent`,()=>{throw Error(`Wait for consent not set`)}),C(this,`_callResumedCallback`,()=>this._resumedCallback()),C(this,`_muteVolume`,()=>this._videoPlayerControls?.muteVolume()),C(this,`_getVolumeLevel`,()=>this._videoPlayerControls?.volumeLevel??0),C(this,`_getPreventClick`,()=>this._videoPlayerControls?.preventClick??!1),C(this,`_getIntentionalPause`,()=>this._intentionalPause),C(this,`_getState`,()=>this.state),C(this,`_setPlayButtonState`,()=>this.setPlayButtonState()),C(this,`_setState`,e=>{this.state=e}),C(this,`_setIntentionalPause`,e=>{this._intentionalPause=e}),C(this,`_setUserClickedToPlay`,e=>{this._userClickedToPlay=e}),C(this,`_setIsVideoContent`,e=>{this.isVideoContent=e}),C(this,`_getIsVideoContent`,()=>this.isVideoContent),this._boundHandlers=new Map,this._isInstream=this._instreamTypes.includes(this._playerType),this._videoPlayerControls=this._setupVideoPlayerControls(),this.imaManager=new cS(a,n,()=>this.size,s,this._container,this._videoElement,this._eventProxy,this._getVolumeLevel,this._muteVolume,this._getPreventClick,this._setPlayButtonState,this._getState,this._setState,this._getIntentionalPause,this._setIntentionalPause,this._setUserClickedToPlay,this._callResumedCallback,this._setIsVideoContent,!!this._shouldUseHardcodedAdPodDuration)}_setupVideoPlayerControls(){return new SS({videoElement:this._videoElement,playerType:this._playerType,isDesktop:this._isDesktop,getIsVideoContent:this._getIsVideoContent})}attachEventHandlers(e){for(let t of e)this.addEventHandler(t.target,t.event,t.handler)}addEventHandler(e,t,n){let r=n.bind(this),i=this.getHandlerKey(e,t);this._boundHandlers.set(i,r),e.addEventListener(t,r,!1)}getHandlerKey(e,t){return`${e.constructor.name}_${t}`}async init(){try{await this.imaManager?.init()}catch{E.error(`VideoPlayer`,`init`,this._playerType,`Failed to initialize player. IMA is not defined.`);return}this.injectPlayer()}injectPlayer(){this._remove(),this._injectPlayer(),this._setupPageVisibilityListener(),this.ready.emit()}_injectPlayer(){this._isInstream&&this._injectInstreamPlayer(),this._container.id=`adthrive-${this._playerType}-container`,this._videoElement.setAttribute(`webkit-playsinline`,`true`),this._videoElement.setAttribute(`playsinline`,`true`),this._videoElement.setAttribute(`disablePictureInPicture`,`true`),this._pageElement.appendChild(this._container),this.imaManager?.setupOnInject()}setPlayButtonState(){let e=this.imaManager?.isAdActive&&this.state===`playing`||this.isVideoContent&&this.videoContentState===`playing`,t=this.imaManager?.isAdActive&&this.state===`paused`,n=this.isVideoContent&&this.videoContentState===`paused`;e?this._videoPlayerControls?.setPlayButtonState(`pause`):(t||n)&&this._videoPlayerControls?.setPlayButtonState(`play`)}_play(e){this.imaManager?.setIsAdActive(!1),this.isVideoContent=!0,this.videoContentState=`playing`,this.setPlayButtonState(),this.play.emit(e)}_playerClick(e){!this.isVideoContent||this._videoPlayerControls?.preventClick||(this.videoContentState===`playing`?this._pauseVideoPlayer(e):this.videoContentState===`paused`&&this._playVideoPlayer(),this.setPlayButtonState(),this.click.emit(e))}_playerVolumeChange(e){this.playerVolumeChange.emit(e)}_loadedMetaData(e){this.loadedMetaData.emit(e)}_pause(e){this.videoContentState=`paused`,this.setPlayButtonState(),this.pause.emit(e)}_error(e){this.error.emit(e)}_seeking(e){this.seeking.emit(e)}_seeked(e){this.seeked.emit(e)}_ended(e){this.videoContentState=`ended`,this.ended.emit(e)}_timeupdate(e){this.timeupdate.emit(e)}_resumedCallback(){this.playerNumber&&this._eventProxy.emitVideoPlayingEvent({playerNumber:this.playerNumber,playerType:this._playerType})}_remove(){this.imaManager?.remove()}_removePlayer(){this._container?.parentElement?.removeChild(this._container)}_injectInstreamPlayer(){let e=this._container,t=this._videoElement,n=this._playerPosition,r=this._playerType;this._initVideoListeners(),cn.isRolloutEnabled(`nsrp`)&&e.setAttribute(`data-nosnippet`,``),e.className=`adthrive-${r}-player-container`,(this._playerType===k.AutoInjected||this._playerType===k.RelatedSticky)&&e.classList.add(`adthrive-collapse-player`),n.classList.add(`raptive-player-position`),this._config.video.removeVideoTitleWrapper||this.createTitleOverlayContainer(),t.classList.add(`raptive-player-video`),this._playerContainer.classList.add(`raptive-player-container`,`raptive-player-reset`),this._isMobile&&this._playerContainer.classList.add(`raptive-player-container-mobile`),Lt()&&this._playerContainer.classList.add(`raptive-player-ios`),this._playerContainer.appendChild(t),this.imaManager&&this._playerContainer.appendChild(this.imaManager.adContainer),n.appendChild(this._playerContainer),e.appendChild(n);let i={play:this._playVideoPlayer.bind(this),pause:this._pauseVideoPlayer.bind(this),volume:this._onVolumeChange.bind(this),fullscreen:this._onToggleFullscreen.bind(this),onkickoffAdPlayback:()=>{this.kickoffAdPlayback.emit(),this._eventProxy.emitVideoPlayingEvent({playerNumber:this.playerNumber,playerType:this._playerType})}};this._videoPlayerControls?.enablePlayerControls(i)}_initVideoListeners(){this.attachEventHandlers([{target:this._videoElement,event:`ended`,handler:this._ended},{target:this._videoElement,event:`error`,handler:this._error},{target:this._videoElement,event:`seeking`,handler:this._seeking},{target:this._videoElement,event:`seeked`,handler:this._seeked},{target:this._videoElement,event:`loadedmetadata`,handler:this._loadedMetaData},{target:this._videoElement,event:`pause`,handler:this._pause},{target:this._videoElement,event:`play`,handler:this._play},{target:this._videoElement,event:`click`,handler:this._playerClick.bind(this)},{target:this._videoElement,event:`volumechange`,handler:this._playerVolumeChange},{target:this._videoElement,event:`timeupdate`,handler:this._timeupdate}])}createTitleOverlayContainer(e=!1){let t=this._playerType===k.AutoInjected||this._playerType===k.RelatedSticky&&e;this._videoTitleOverlayContainer.classList.add(`adthrive-title-overlay`);let n=document.createElement(`div`);n.classList.add(`adthrive-video-title-description-container`,`adthrive-video-text-cutoff`),this._videoTitleDiv.id=`adthrive-video-title-text`,this._videoDescriptionDiv.id=`adthrive-video-description-text`,n.appendChild(this._videoTitleDiv),this._isMobile||n.appendChild(this._videoDescriptionDiv),t?(this._wrapperTitleWrapperElement=document.createElement(`a`),this._wrapperTitleWrapperElement.classList.add(`adthrive-wrapper-title-wrapper`),this._wrapperTitleWrapperElement.appendChild(n),this._videoTitleOverlayContainer.appendChild(this._wrapperTitleWrapperElement)):this._videoTitleOverlayContainer.appendChild(n),this._playerContainer.appendChild(this._videoTitleOverlayContainer)}_pauseVideoPlayer(e){this._videoPlayerControls?.preventClick||(e&&(this._intentionalPause=!0),this.isVideoContent&&this.videoContentState!==`paused`?this._videoElement.pause():this.state!==`paused`&&this.imaManager?.adsManager?.pause())}_playVideoPlayer(){this._videoPlayerControls?.preventClick||(this._isInstream&&this.playerNumber&&this._eventProxy.emitVideoPlayingEvent({playerNumber:this.playerNumber,playerType:this._playerType}),this.videoContentState!==`playing`&&this.isVideoContent?this._videoElement.play():this.state!==`playing`&&(this._intentionalPause=!1,this.imaManager?.adsManager?.resume()))}_onVolumeChange(){let e=this._videoPlayerControls?.volumeLevel??0;this.isVideoContent?this._videoPlayerControls?.setVolume(e):this.imaManager?.adsManager?.setVolume(e)}_onToggleFullscreen(){let e=this._playerContainer;e&&(Lt()&&this._videoElement&&this._videoElement.webkitSupportsFullscreen?this._videoElement.webkitEnterFullscreen():document.fullscreenElement?document.exitFullscreen().then(()=>e.classList.remove(`raptive-player-fullscreen`)).catch(e=>{console.error(`Error attempting to exit fullscreen mode: ${e.message}`)}):e.requestFullscreen().then(()=>e.classList.add(`raptive-player-fullscreen`)).catch(e=>{console.error(`Error attempting to enable fullscreen mode: ${e.message}`)}))}_resetPlayerReferences(){this.imaManager?.resetAdContainer(),this._container=document.createElement(`DIV`),this._videoElement=document.createElement(`VIDEO`),this._videoPlayerControls=this._setupVideoPlayerControls(),this._playerContainer=document.createElement(`DIV`),this._playerPosition=document.createElement(`DIV`),this._videoDescriptionDiv=document.createElement(`DIV`),this._videoTitleDiv=document.createElement(`DIV`),this._videoTitleOverlayContainer=document.createElement(`DIV`)}_removeInstream(e=!1){e&&(this._removePlayer(),e&&this._resetPlayerReferences()),this.imaManager?.remove(e)}_handlePageVisibilityChange(e){}_setupPageVisibilityListener(){this._spaListeners.push(this._eventProxy.pageVisibility.on(this._handlePageVisibilityChange.bind(this)))}destroy(){this._spaListeners.forEach(e=>e()),this._spaListeners=[],this._videoPlayerControls?.destroy(),this._videoPlayerControls=null,this.imaManager?.destroy(),this.imaManager=null}},wS=class extends CS{constructor(e,t,n,r,i,a,o,s,c,l){super(e,t,n,r,a,s,i,o),this.adId=c,this._nativeOptions=l,C(this,`adPlaying`,!1),C(this,`_adDetails`,void 0),C(this,`_footerConfigEventBus`,void 0),C(this,`_footerVideoRibbonStateListenerOff`,void 0),C(this,`_containerWidth`,void 0),C(this,`_containerHeight`,void 0),C(this,`_videoWidth`,void 0),C(this,`_videoHeight`,void 0),C(this,`_handlePlayAd`,()=>{this.imaManager?.playAd(!0)}),C(this,`_handlePauseAd`,e=>{this.imaManager?.pauseAd({event:e})}),C(this,`_handleVolumeChange`,()=>{this._onVolumeChange()}),this._footerConfigEventBus=y.resolve(Pr),this.ready.on(this._handleReady.bind(this)),this.imaManager?.adStarted.on(this._handleAdStart.bind(this)),this.imaManager?.allAdsCompleted.on(this._handleAdErrorOrComplete.bind(this)),this.imaManager?.adError.on(this._handleAdErrorOrComplete.bind(this)),this.imaManager?.adLoaded.on(e=>{!this.imaManager||!this._handlePlayAd||!this._handlePauseAd||!this._handleVolumeChange||(this._videoPlayerControls?.enablePlayerControls({play:this._handlePlayAd,pause:this._handlePauseAd,volume:this._handleVolumeChange},this.imaManager?.adContainer),this._adDetails=e)}),[this._containerWidth,this._containerHeight,this._videoWidth,this._videoHeight]=this._setupDimensions(),this._listenForVideoRibbonFooter()}get adDetails(){return this._adDetails}_listenForVideoRibbonFooter(){this._footerVideoRibbonStateListenerOff=this._footerConfigEventBus.footerVideoRibbonStateChanged.on(e=>{e?this.imaManager?.pauseAd():this.state===`paused`&&!this._intentionalPause&&this.imaManager?.playAd()})}_handleReady(){this.adPlaying=!1;let e=document.getElementsByClassName(`adthrive-sticky-outstream-idle`)[0],t=document.getElementsByClassName(`adthrive-sticky-outstream-active`)[0];e?e.classList.add(`adthrive-new-outstream-player`):t&&this._toggleActive(!0)}_handleAdStart(){this.adPlaying=!0,this._toggleActive(!0),this._fireViewableEvent()}_handleAdErrorOrComplete(){this.adPlaying=!1,this._toggleActive(!1),this.destroy(),this._remove(),this._footerVideoRibbonStateListenerOff&&this._footerVideoRibbonStateListenerOff()}_toggleActive(e){let t=document.getElementsByClassName(`adthrive-new-outstream-player`)[0];t&&(e?(t.classList.add(`adthrive-sticky-outstream-active`),t.classList.remove(`adthrive-sticky-outstream-idle`)):(t.classList.remove(`adthrive-sticky-outstream-active`),t.classList.add(`adthrive-sticky-outstream-idle`)))}_injectPlayer(){let e=this._container,t=this._videoElement,n=this._playerType;n===k.StickyOutstream&&this._pageElement.classList.add(`adthrive-video-stickyoutstream-new-player`),e.className=`adthrive-${n}-container adthrive-player-idle`,e.style.width=`${this._containerWidth}px`,e.style.height=`${this._containerHeight}px`,t.style.width=`${this._videoWidth}px`,t.style.height=`${this._videoHeight}px`,this._nativeOptions&&(this._appendNativeVideoHeader(),this._setupContainerClickHandler(),this._fireAdOnPageEvent()),e.appendChild(t),this.imaManager&&e.appendChild(this.imaManager.adContainer),t.load(),super._injectPlayer()}_remove(){this._removePlayer(),super._remove()}_appendNativeVideoHeader(){if(!this._nativeOptions)return;let e=document.createElement(`raptive-native-video-header`);e.setAttribute(`href`,this._nativeOptions.href),e.setAttribute(`logo-src`,this._nativeOptions.logoSrc),this._container.classList.add(`raptive-player--native`),this._container.appendChild(e)}_setupContainerClickHandler(){if(!this._nativeOptions?.clickEvents)return;let e=this._nativeOptions.clickEvents;this._container.addEventListener(`click`,t=>{t.target.closest(`.adthrive-player-ad-controls`)||e.forEach(e=>{aS(e,`click`,`outstream`)})})}_fireAdOnPageEvent(){this._nativeOptions?.adOnPageEvent&&aS(this._nativeOptions.adOnPageEvent,`adOnPage`,`outstream`)}_fireViewableEvent(){this._nativeOptions?.viewableEvent&&aS(this._nativeOptions.viewableEvent,`viewable`,`outstream`)}_setupDimensions(){let[e,t]=this.size,n=e,r=e,i=t,a=t;if(this._nativeOptions){let t=Math.round(e/(16/9)),n=a<=100?2:0;i=t+40+n,a=t}return this.size=[r,a],[n,i,r,a]}destroy(){this._handlePlayAd=void 0,this._handlePauseAd=void 0,this._handleVolumeChange=void 0,super.destroy()}};let TS=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`VideoDeliveryExperiment`,this._lookup=`VDE`,this.abgroup=`vde`,this._default=!1}};TS=w([S()],TS);let ES=class{constructor(e,t,n,r,i,a,o){this._config=e,this._slotManager=t,this._videoEventProxy=n,this._slotEventBus=r,this._gamEventBus=i,this._prebidMethods=a,this._videoDeliveryExperiment=o,C(this,`_stickyOutstreamSize`,void 0),C(this,`_sharedConfig`,{context:`outstream`,mimes:[`video/mp4`,`application/javascript`],api:[2],skip:0,pos:1,protocols:[2,3,5,6,7,8],linearity:1,minduration:0,maxduration:this._config.video.maxDuration,playbackmethod:[2],plcmt:4}),C(this,`_forcedRefreshLimit`,3),C(this,`_imaEndpoint`,`https://imasdk.googleapis.com/js/sdkloader/ima3.js`),C(this,`_viewableImpressionDelay`,1001),C(this,`_erroredOutCreativeIds`,new Map),C(this,`_offEvents`,[]),C(this,`_outstreamPlayer`,void 0),C(this,`_lastRenderedAdId`,null),C(this,`_prebidBidDetails`,void 0),C(this,`_amazonBidDetails`,void 0);let{desktop:s,tablet:c}=this._config.site.breakpoints;this._stickyOutstreamSize=Tr(c,s)===`phone`?[178,100]:[227,150],this._gamEventBus.slotRenderEnded.on(e=>this._setTargetingForFill(e)),this._slotEventBus.gamEmptyNoBidResponse.on(e=>this._noFillForceRefresh(e)),this._slotEventBus.noBidResponses.on(e=>{let t=this._slotManager.getSlot(e);t&&(t.isRefreshing=!1,this._setSlotForceRefresh(t.id,!1,!0))})}get outstreamPlayer(){return this._outstreamPlayer}callRendererWithUrl(e,t,n=!1){this._amazonBidDetails=window.apsBidObject?.targetingMap;let r=n?k.StickyOutstream:k.Outstream,i=n?this._stickyOutstreamSize:[300,225];this._callRenderAd({adTagUrl:e},t,r,i)}get standardOutstreamConfig(){let e=this._config.video,t={...this._rendererConfig},n=e.outstreamPlacement;e.setStandardOutstreamBackupRenderer&&(t.renderer.backupOnly=!0);let r={playerSize:[640,480],...n&&{placement:n},...this._sharedConfig,...t};return this._videoDeliveryExperiment.result&&(r.delivery=[1,2]),r}get stickyOutstreamConfig(){let e={...this._sharedConfig,...this._rendererConfig,startdelay:0,placement:5,playerSize:this._stickyOutstreamSize};return this._videoDeliveryExperiment.result&&(e.delivery=[1,2]),e}get _rendererConfig(){return{renderer:{url:this._imaEndpoint,render:e=>{this._renderer(e)}}}}_logAdInterruption(e){let t=this._outstreamPlayer?.adDetails?.ad,n=e.refreshCount,r=t?.adId,i=t?.duration;E.event(`Outstream`,`_logAdInterruption`,{nref:n,adId:r,adDur:i})}_callRenderer(e,t,n,r=!1,i=null){let a=this._slotManager.getSlot(e),o=r?k.StickyOutstream:k.Outstream;a&&r&&(a.stickyOutstreamShortVideo=!1,a.stickyOutstreamLastAdErrored=!1,a.stickyOutstreamRefreshTimeout=5e3,a.stickyOutstreamErrorLogged=!1,a.stickyOutstreamRenderedTimestamp=Date.now(),this._outstreamPlayer?.adPlaying&&this._logAdInterruption(a)),this._callRenderAd(t,e,o,n,i)}_callRenderAd(e,t,n,r,i=null){let a=document.getElementById(t);if(a){let o=Math.floor(Math.random()*1e8).toString(),s=this._config;this._outstreamPlayer?.destroy(),this._slotEventBus.stickyOutstreamRegenerateCloseButton.emit(!!i);let c=this._outstreamPlayer=new wS(o,``,n,a,this._videoEventProxy,r,!0,s,t,i);this._setPlayerEvents(c,e),c.init().catch(()=>{E.error(`Outstream`,`_callRenderAd`,`Outstream failed to initialize`)})}}_handleAdImpression(e){let t=this._slotManager.getSlot(e);this._lastRenderedAdId=null,!(!e.includes(`StickyOutstream`)||!t)&&this._logCreativeIdWithPreviousError(t,e)}_handleComplete(e){this._slotManager.getSlot(e),e.includes(`StickyOutstream`)}_getAdDetailsForLogging(e){let{ad:t}=e.adDetails||{};return{adId:t?.adId,mediaFileURL:t?.mediaUrl,vastCreativeId:t?.creativeId,wrapperCreativeIds:t?.adWrapperCreativeIds,wrapperIds:t?.adWrapperIds,wrapperSystems:t?.adWrapperSystems}}_isStickyOutstream(e){return e.includes(`StickyOutstream`)}_getBidDetailsForLogging(e){let t=this._isStickyOutstream(e),n=t?this._amazonBidDetails:this._config.amazon.availableBids.get(e),r={amznbid:n?.amznbid,amznp:n?.amznp,amz_bidder:n?.[t?`amz_bidder`:`bidder`],amz_pb:n?.amz_pb},i=this._config.prebid.targetingKeyMap,a={adomain:this._prebidBidDetails?.[i.ADOMAIN],hb_bidder:this._prebidBidDetails?.[i.BIDDER],hb_crid:this._prebidBidDetails?.[i.CRID],hb_pb:this._prebidBidDetails?.[i.PRICE_BUCKET],hb_deal:this._prebidBidDetails?.[i.DEAL]};return{...r,...a}}_handleErrorEvent(e,t){this._handleOffEvent();let n=this._slotManager,r=e.adId,i=n.getSlot(r),a=e.imaManager?.imaSDKVersion;E.error(`Outstream`,`vastError`,{adUnitName:r,imaSDKVersion:a,...this._getAdDetailsForLogging(e),...this._getBidDetailsForLogging(r),...t}),!(!this._isStickyOutstream(r)||!i)&&(this._creativeFailureDetection(i,this._lastRenderedAdId??``),i.stickyOutstreamRefreshTimeout=2500,i.stickyOutstreamLastAdErrored=!0,this._lastRenderedAdId=null,this._setSlotForceRefresh(r,!0))}_creativeFailureDetection(e,t){let n=this._config,r=this._prebidMethods.getBidResponsesForAdUnitCode(e.id).bids||[],i=n.video.outstreamCreativeFailureThreshold;for(let e of r){let r=e.creativeId?.toString();if(e.adId===t&&r&&!n.prebid.blockedCreativeIds.includes(r)){let e=this._erroredOutCreativeIds.get(r)||0;e++,this._erroredOutCreativeIds.set(r,e),e>=i&&n.prebid.blockedCreativeIds.push(r);break}}}_logCreativeIdWithPreviousError(e,t){let n=this._prebidMethods.getBidResponsesForAdUnitCode(e.id).bids||[];for(let e of n)if(e.adId===t&&e.creativeId){this._erroredOutCreativeIds.get(e.creativeId.toString())&&E.event(`JWPlayer`,`_logCreativeIdWithPreviousError`,{creativeId:e.creativeId});break}}_handleAdTimeChange(e,t){let n=this._slotManager.getSlot(t),r=!1;if(!t.includes(`StickyOutstream`)||!n)return;let{duration:i,position:a}=e;n.stickyOutstreamTimeRemaining=i?i-a:void 0;let o=(i||30)-a,s=i<10,c=this._config.prebid.refreshStickyOutstreamAuctionCount!==1,l=a<100&&a>30&&a<i;if(r=c&&!s?o>0&&o<=10||l:o>0&&o<=5||l,r&&!n.isRefreshing){let e=c&&!s&&!n.renderedOutsideGAM?1e4:5e3;i<5&&(e=i*1e3),n.stickyOutstreamShortVideo=s,n.stickyOutstreamRefreshTimeout=e,this._setSlotForceRefresh(t)}}_handleAdSkip(e){let t=this._slotManager.getSlot(e);!e.includes(`StickyOutstream`)||!t||(t.stickyOutstreamRefreshTimeout=2500,this._setSlotForceRefresh(e))}_handleOffEvent(){this._offEvents=this._offEvents.filter(e=>(e(),!1))}_renderer(e){this._prebidBidDetails=e.adserverTargeting;let t=e.ad||e.vastXml,n=e.adUnitCode.indexOf(`StickyOutstream`)!==-1,r=n?this._stickyOutstreamSize:[300,225],i=t?{adResponse:t}:{adTagUrl:e.vastUrl};this._lastRenderedAdId=e.adId;let a=this._getNativeOptions(e);this._callRenderer(e.sharedBidInUse||e.adUnitCode,i,r,n,a)}_getNativeOptions(e){let{winEvent:t,viewableEvent:n,adOnPageEvent:r,clickEvents:i}=iS(e);e.bidder===G.TripleliftServer&&t&&aS(t,`winEvent`,`outstream`);let a=e?.ext?.native?.asset;if(!Array.isArray(a))return null;let o=a.find(e=>e?.image?.url&&typeof e.image.url==`string`),s=a.find(e=>e?.link?.url&&typeof e.link.url==`string`),c=o?.image?.url,l=s?.link?.url;return!c||!l?null:{href:l,logoSrc:c,clickEvents:i,adOnPageEvent:r,viewableEvent:n}}_setPlayerEvents(e,t){let n=this._offEvents;n.push(e.imaManager?.adImpression.on(()=>this._handleAdImpression(e.adId))),n.push(e.imaManager?.adError.on(t=>this._handleErrorEvent(e,t))),n.push(e.imaManager?.adCompleted.on(()=>this._handleComplete(e.adId))),n.push(e.ready.on(()=>{e.imaManager?.playAdOutStream(t)})),n.push(e.imaManager?.adProgress.on(t=>this._handleAdTimeChange(t,e.adId))),n.push(e.imaManager?.adSkipped.on(()=>this._handleAdSkip(e.adId)))}_setSlotForceRefresh(e,t=!1,n=!1){let r=this._slotManager,i=r.getSlot(e),a=e.includes(`StickyOutstream`),o=!t&&!n;if(!i||!a||i.isRefreshing)return;i.isRefreshing=!0;let s=t&&i.stickyOutstreamErrorCount!==void 0&&i.stickyOutstreamErrorCount<this._forcedRefreshLimit,c=n&&i.noAdRefreshCount!==void 0&&i.noAdRefreshCount<this._forcedRefreshLimit;s?(i.stickyOutstreamErrorCount++,o=!0):c?(i.noAdRefreshCount++,i.setSlotTargetingFlag(`fref`,[`${i.noAdRefreshCount}`],!0),o=!0):(i.stickyOutstreamErrorCount=0,i.setSlotTargetingFlag(`fref`,[`off`],!0));let l=o?this._viewableImpressionDelay:15e3;r.updateRefreshTimeout(i,l)}_setTargetingForFill({event:e,slotId:t}){let n=this._slotManager.getSlot(t);!n||n.location!==H.Video_StickyOutstream||e.isEmpty||(n.noAdRefreshCount=0,n.setSlotTargetingFlag(`fref`,[`${n.noAdRefreshCount}`],!0))}_noFillForceRefresh(e){let t=this._slotManager.getSlot(e);!t||t.location!==H.Video_StickyOutstream||(t.stickyOutstreamRefreshTimeout=2500,this._setSlotForceRefresh(t.id,!1,!0))}};ES=w([S(),N(0,b(J)),N(1,b(eS)),N(2,b(Dy)),N(3,b(Hs)),N(4,b(X)),N(5,b(P)),N(6,b(TS))],ES);let DS=class extends V{init(){this._key=`NativeDescriptionLength`,this._lookup=`NTVDL`}get result(){return this._result}};DS=w([S()],DS);let OS=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`NativeHoldout`,this._lookup=`NTVHO`}};OS=w([S()],OS);let kS=class extends V{init(){this._key=`NativeRecipeTitleLength`,this._lookup=`NTVRTL`}get result(){return this._result}};kS=w([S()],kS);let AS=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`AdditionalOutstreamUnitsExperiment`,this._lookup=`AOS`}isEnabled(){return super.isEnabled()}};AS=w([S()],AS);let jS=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`OneVideoStream`,this._lookup=`RMOS1`}};jS=w([S()],jS);let MS=class extends F{constructor(...e){super(...e),C(this,`_default`,!0)}init(){this._key=`OutstreamWithSOExperiment`,this._lookup=`OWSO`}run(){return super.run()}};MS=w([S()],MS);let NS=class extends V{init(){this._key=`SuppressOutreamSlowConnection`,this._lookup=`SOCON`}};NS=w([S()],NS);let PS=class{constructor(e,t,n,r,i,a,o,s,c,l){this._config=e,this._context=t,this._gam=n,this._outstream=r,this._outstreamWithSOExperiment=i,this._oneVideoStreamExperiment=a,this._soconExperiment=o,this._nativeDescriptionLengthExperiment=s,this._nativeHoldoutExperiment=c,this._nativeRecipeTitleLengthExperiment=l,C(this,`additionalOutstreamUnitsExperiment`,!1),C(this,`_standardOutstreamSlots`,new Set([H.Content_1,H.Below_Post,H.Video_StickyOutstream_1])),C(this,`_nativeEligibleSlots`,[H.Content,H.Recipe]),C(this,`_native`,void 0),this._native={size:[300,300],contentSize:[300,150],recipeSizes:[[320,300],[300,390]],recipeMobileSize:[300,300],titleLength:25,recipeTitleLength:this._nativeRecipeTitleLengthExperiment.result||25,descriptionLength:this._nativeDescriptionLengthExperiment.result||0}}runOneStreamExperiment(){let e=y.resolve(AS);this._gam.setTargeting({key:`abgroup`,value:this._config.abGroup.groups.join(`,`)}),this.additionalOutstreamUnitsExperiment=e.result,this.additionalOutstreamUnitsExperiment&&[H.Content_3,H.Content_5,H.Recipe_1].forEach(e=>{this._standardOutstreamSlots.add(e)})}isOutstreamAllowed(){return!this._oneVideoStreamExperiment.result||!this._config.video.hasJwPlayer}isSlowConnection(){let e=this._soconExperiment.result??0;return this._context.downlink===void 0?!1:this._context.downlink<=e}outstreamEnabled(e){let t=e.location===H.Video_StickyOutstream,n=!t&&this.isSlowConnection();return{outstreamCapable:(this._config.adTypes.outstreamEnabled||t)&&this.outstreamSlots.has(e.placementMapName)&&this.isOutstreamAllowed()&&!n}}nativeEnabled(e){let t=this._nativeHoldoutExperiment.result,n=this._config.adTypes.has(z()?`nativeMobile${e.location}`:`nativeDesktop${e.location}`),r=!t&&!!n&&!!this._nativeEligibleSlots.includes(e.location);return e.location.includes(H.Recipe)?r&&!!this.getNativeRecipeSize(e.sizes):r}getNativeRecipeSize(e){return z()?e.find(e=>e[1]===this._native.recipeMobileSize[1]):e.find(e=>e[0]===this._native.recipeSizes[0][0]&&e[1]===this._native.recipeSizes[0][1]||e[0]===this._native.recipeSizes[1][0]&&e[1]===this._native.recipeSizes[1][1])}getMediaType(e,t={}){let n={},{slot:r,video:i}=e;if(i&&this._config.video.instreamAdUnits.has(i.name)&&this._config.video.plcmtUnits.has(i.name))n.video=this.getInstreamConfig(i);else if(r){let e={sizes:r.sizes,...r.isHighlyViewable()&&{pos:1},...r.mainAuctionWidth&&r.mainAuctionHeight&&{w:r.mainAuctionWidth,h:r.mainAuctionHeight}};t.banner&&(n.banner=e),t.outstream&&(n.video=r.location===H.Video_StickyOutstream?this._outstream.stickyOutstreamConfig:this._outstream.standardOutstreamConfig),t.native&&(n.native=this._getNativeConfig(r.location,(r.sequence||1)-1,r.sizes))}return n}get outstreamSlots(){return this._outstreamWithSOExperiment.result?this._standardOutstreamSlots:new Set([H.Video_StickyOutstream_1])}getInstreamConfig(e){let t=sh(this._config.video.plcmtUnits,e);return{context:`instream`,playerSize:e.size,mimes:this._config.video.mimeType,protocols:this._config.video.videoProtocols?.protocols,...t&&{plcmt:t},maxduration:this._config.video.maxDuration,...this._config.video.playbackmethod?.get(e.name)&&{playbackmethod:this._config.video.playbackmethod.get(e.name)},...e.collapsible&&{playbackend:3},linearity:1,api:this._config.video.apiValue,w:e.size[0],h:e.size[1],pos:this._config.video.position.id,minduration:1,startdelay:0,placement:1,skip:0,delivery:[1,2]}}_getNativeSize(e,t){if(e.includes(H.Content))return this._native.contentSize;if(e.includes(H.Recipe))return this.getNativeRecipeSize(t)}_getAdditionalNativeParams(e){return{context:1,contextsubtype:10,privacy:0,seq:e}}_getNativeConfig(e,t,n){let r=this._native,i=this._getNativeSize(e,n)||r.size;return{ortb:{ver:`1.2`,plcmttype:1,eventtrackers:[{event:1,methods:[1,2]}],assets:[{id:1,required:1,title:{len:e.includes(H.Recipe)?r.recipeTitleLength:r.titleLength}},{id:2,required:1,img:{type:3,wmin:i[0],hmin:i[1]}},{id:3,required:1,img:{type:1,wmin:20,hmin:20}},{id:4,required:1,data:{type:1}},{id:5,required:1,data:{type:2,...r.descriptionLength&&{len:r.descriptionLength}}}],...this._config.prebid.sendAdditionalNativeParams&&this._getAdditionalNativeParams(t)}}}};PS=w([S(),N(0,b(J)),N(1,b(W)),N(2,b(Z)),N(3,b(ES)),N(4,b(MS)),N(5,b(jS)),N(6,b(NS)),N(7,b(DS)),N(8,b(OS)),N(9,b(kS))],PS);let FS=class{setOseq(e,t,n,r){let i=`${e.sequence}`,{id:a,bidPoolId:o}=e,{[r.BIDDER]:s,[r.AD_ID]:c}=n;if(t){for(let e=t.length-1;e>=0;e--)if(t[e].bidderCode===s&&t[e].adId===c){i=this.getSeqFromAdUnitCode(t[e].adUnitCode),t[e];break}}e&&e.setSlotTargetingFlag(`oseq`,[i],!0)}getSeqFromAdUnitCode(e){let t=(e||``).match(/AdThrive_.*?_(\d+)\_\S+$/);return t&&t.length?t[1]:``}};FS=w([D(`OSeq`),x()],FS);let IS=class extends V{init(){this._key=`DemandChain`,this._lookup=`DCO`}run(){return super.run()}};w([R()],IS.prototype,`run`,null),IS=w([S()],IS);let LS=class{constructor(e){this._config=e,C(this,`_checkPurpose1Consent`,e=>{if(typeof window.__cmp!=`function`)return!1;try{let t=window.__cmp(`getCMPData`);if(t){let n=t?.vendorConsents?.[e]===!0,r=t?.purposeConsents?.[1]===!0;return!n||!r}}catch(t){return console.warn(`Raptive::Error while checking consent for vendorId: ${e} `,t),!1}return!1})}_isCCPAConsentDenied(){return!!this._config.ccpa.userOptedOut}_isAct25ConsentDenied(){return this._config.act25.required&&!this._config.act25.consented}getAllowActivities(){let e={rules:[{condition:()=>this._isCCPAConsentDenied()||this._isAct25ConsentDenied(),allow:!1}]};return{reportAnalytics:{rules:[{condition:()=>this._isCCPAConsentDenied(),allow:!1}]},enrichUfpd:{...e},enrichEids:{...e},syncUser:{...e},transmitEids:{...e},transmitPreciseGeo:{...e},transmitUfpd:{...e},...this._config.gdpr.enabled&&{fetchBids:{rules:[{condition:({componentType:e,adapterCode:t})=>t===`ozone`&&e===`bidder`?this._checkPurpose1Consent(`s1119`):!1,allow:!1}]}}}}};LS=w([S(),N(0,b(J))],LS);let RS=class{constructor(e){this._config=e,C(this,`_clientVendorExceptions`,[`appnexus`]),C(this,`_serverVendorExceptions`,void 0),C(this,`_uspConfig`,{usp:this._getUspConfig()}),C(this,`_gdprConfig`,{}),this._serverVendorExceptions=this._config.prebid.s2s.bidders,this._gdprConfig={gdpr:{cmpApi:`iab`,timeout:25e3,defaultGdprScope:!0,rules:[{purpose:`storage`,enforcePurpose:!0,enforceVendor:!0},{purpose:`basicAds`,enforcePurpose:!0,enforceVendor:!0,vendorExceptions:this._clientVendorExceptions.concat(this._serverVendorExceptions)},{purpose:`personalizedAds`,enforcePurpose:!0,enforceVendor:!0},{purpose:`measurement`,enforcePurpose:!0,enforceVendor:!0}]}}}_getUspConfig(){return this._config.ccpa.required?{cmpApi:`iab`,timeout:0}:{cmpApi:`static`,consentData:{getUSPData:{uspString:`1---`}}}}getConsentManagementConfig(){return this._config.gdpr.enabled===!0?this._gdprConfig:this._uspConfig}};RS=w([S(),N(0,b(J))],RS);let zS=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`OpenPathLiveIntent`,this._lookup=`OPLI`}run(){return super.run()}};w([R()],zS.prototype,`run`,null),zS=w([D(`OpenPathLiveIntentExperiment`),S()],zS);var BS=zS;let VS=class extends V{init(){this._key=`Uid1AdserverExperiment`,this._lookup=`UID1SRC`}};VS=w([D(`Uid1AdserverExperiment`),S()],VS);let HS=class extends V{constructor(...e){super(...e),C(this,`eidMap`,new Map([[`idl`,`idl_env`],[`id5`,`id5id`],[`pubcid`,`pubcid`],[`uid1`,`tdid`],[`li_uid2`,`uid2`],[`cid`,`connectId`],[`lpid`,`lotamePanoramaId`],[`li_bdsw`,`bidswitch`]]))}init(){this._key=`FirstEidExperiment`,this._lookup=`1ST_EID2`}get result(){if(!(!this._result||this._result===`none`))return this.eidMap.get(this._result)}};HS=w([S()],HS);let US=class{constructor(e,t,n,r){this._config=e,this._openPathLiveIntentExperiment=t,this._firstEidExperiment=n,this._uid1AdserverExperiment=r}getUserSyncConfig(){return{...this._firstEidExperiment.result&&{firstEid:this._firstEidExperiment.result},syncEnabled:!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut,idPriority:{tdid:this._openPathLiveIntentExperiment.result?[`liveIntentId`,`unifiedId`]:[`unifiedId`,`liveIntentId`]},auctionDelay:this._config.prebid.auctionDelay,syncsPerBidder:1,aliasSyncEnabled:!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut,enableOverride:!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut,filterSettings:{iframe:{bidders:`*`,filter:`include`}},topics:{bidders:[{bidder:G.Pubmatic,iframeURL:`https://ads.pubmatic.com/AdServer/js/topics/topics_frame.html`}]},...this._uid1AdserverExperiment.result&&{uid1Adsrvr:this._uid1AdserverExperiment.result}}}};US=w([S(),N(0,b(J)),N(1,b(BS)),N(2,b(HS)),N(3,b(VS))],US);let WS={buckets:[{precision:2,max:.1,increment:.01},{precision:2,max:5,increment:.05},{precision:2,max:20,increment:.1},{precision:2,max:100,increment:.5}]},GS=class{constructor(e){this._config=e,C(this,`_configuration`,{suppressEmptyKeys:!0,sendStandardTargeting:!this._config.gam.isThirdPartyGam,adserverTargeting:[{key:this._config.prebid.targetingKeyMap.AD_ID,val:e=>e.adId},{key:this._config.prebid.targetingKeyMap.ADOMAIN,val:e=>e.meta&&e.meta.advertiserDomains?e.meta.advertiserDomains[0]:e.meta&&e.meta.advertiserId},{key:this._config.prebid.targetingKeyMap.SEAT,val:e=>e.meta?.seat||e?.meta?.advertiserId},{key:this._config.prebid.targetingKeyMap.ATTR,val:e=>{if(e.mediaType===`banner`&&e.meta?.mediaType===`video`||e.meta?.isInBannerVideo)return`ibv`}},{key:this._config.prebid.targetingKeyMap.BIDDER,val:e=>e.bidderCode},{key:this._config.prebid.targetingKeyMap.CRID,val:e=>e.creativeId},{key:this._config.prebid.targetingKeyMap.DEAL,val:e=>e.dealId},{key:this._config.prebid.targetingKeyMap.DSP,val:e=>this.getDsp(e)},{key:this._config.prebid.targetingKeyMap.DUR,val:e=>e.duration},{key:this._config.prebid.targetingKeyMap.FORMAT,val:e=>e.mediaType},{key:this._config.prebid.targetingKeyMap.PRICE_BUCKET,val:e=>e.pbCg},{key:this._config.prebid.targetingKeyMap.SIZE,val:e=>this._config.video.instreamAdUnits.has(e.adUnitCode)?``:e.size},{key:this._config.prebid.targetingKeyMap.SOURCE,val:e=>{let t=this._config.prebid,n=e?.pbsHost,r;if(t.s2s.bidders.includes(e.bidderCode)){let{ayServerEnabled:e}=t;r=n&&e?`sa`:`sr`}else r=`c`;return r}},{key:`ismobile`,val:e=>{let t=e.mediaType===`native`&&z();return t?String(t):void 0}}]})}get configuration(){return this._configuration}getDsp(e){let t=e.bidderCode,n=e.creativeId?.toString().split(`_`)?.[0],r=e.meta;if(n&&(t===G.TripleliftServer||t===G.Kargo))return n;if(t===G.TTD)return`ttd`;if(t===G.YahooSSP||t===G.YahooSSPServer)return`yahoo`;if(r?.dspid&&(t===G.IndexExchangeServer||t===G.PubmaticServer))return r.dspid;if(r?.demandSource&&t===G.MediaGrid)return r.demandSource;if(r)return r.networkId??r.networkName??r.dchain?.nodes.reverse()[0].bsid}};GS=w([S(),N(0,b(J))],GS);let KS=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d){this._config=e,this._prebidMethods=t,this._dcoExperiment=n,this._ortb2=r,this._standardPrebidBidderSetting=i,this._slotManager=a,this._slotManagerEventBus=o,this._slots=s,this._userSyncConfiguration=c,this._regulatoryConfiguration=l,this._allowActivitiesConfiguration=u,this._bidCPMAdjuster=d,C(this,`_map`,{Content:H.Content,Sidebar:H.Sidebar_1,Recipe:H.Recipe_1}),C(this,`_defaultConfig`,{allowActivities:this._allowActivitiesConfiguration.getAllowActivities(),auctionOptions:{secondaryBidders:[`unruly`,`undertone`,`33across`,`nativo`]},bidderSequence:`fixed`,bidPooling:{excludedBidders:[G.Teads]},cache:{url:`https://prebid.adnxs.com/pbc/v1/cache`,...this._config.gam.isThirdPartyGam&&{ignoreBidderCacheKey:!0}},consentManagement:{},dchain:{validation:this._dcoExperiment.result},disableAjaxTimeout:!0,enableTIDs:!0,enableSendAllBids:!0,eventHistoryTTL:0,gptPreAuction:{mcmEnabled:!0,enabled:!0,customPreAuction:this.customPreAuction.bind(this)},gvlMapping:{generic:this._config.gdpr.raptiveVendorId},maxRequestsPerOrigin:6,ortb2:this._ortb2.data,pageUrl:window.location.origin+window.location.pathname,priceGranularity:WS,requestQueue:{enabled:!0,timeout:this._config.prebid.requestQueueTimeout},schain:{validation:`strict`,config:new Tp().getSupplyChainConfig(this._config.site.id)},sendBidsControl:{bidLimit:this._config.gam.isThirdPartyGam?1:3},sizeConfig:[],targetingControls:{allowTargetingKeys:this._config.prebid.targetingKeys,allowSendAllBidsTargetingKeys:this._config.prebid.sendAllBidsTargetingKeys},useBidCache:!0,userSync:this._userSyncConfiguration.getUserSyncConfig()}),this._slotManagerEventBus.added.on(e=>{this._setIsSidebarNineAvailable(e)})}setDefaultConfig(e){let t=this._regulatoryConfiguration.getConsentManagementConfig(),n={...this._defaultConfig,...e&&{eventHistoryTTL:60},consentManagement:t,...this._config.prebid.currencyConversionEnabled&&{currency:{adServerCurrency:`USD`}}};this._prebidMethods.setConfig(n)}applyClientAndServerBidderSettings(e){this._prebidMethods.setBidderSettings(e.reduce((e,t)=>this._setupBidderSettings(e,t),{standard:this._standardPrebidBidderSetting.configuration}))}aliasBidders(e){[...new Set(e)].forEach(e=>{let t=e.gvlid,n=e.getBidderAliases();for(let[e,r]of n)this._setAlias(r,e,t)})}getRevertedFloor(e,t,n){let r=this._config.prebid.s2s.bidders.includes(e)?`server`:e;return this._bidCPMAdjuster.adjustFloorFromBidRequest(r,t,n)}customPreAuction(e,t){let n=e&&this._slotManager.getSlot(e.code);if(!(!t||!e))return this._getGPID(n,e.code,t)}_getGPID(e,t,n){let r=n.split(`/`),i=this._getGPIDLocation(e,t);return i?`/${r[1]}/AdThrive_${i}/${r[r.length-1]}`:n}_getGPIDLocation(e,t){let n=this._map,r=Ca.includes(t);if(e)return!r&&n[e.location]?n[e.location]:e.placementMapName;for(let e in n)if(t.includes(e))return n[e]}_setAlias(e,t,n){n?this._prebidMethods.setAliasBidder(e,t,{gvlid:n}):this._prebidMethods.setAliasBidder(e,t)}_setupBidderSettings(e,t){let{primary:n,secondary:r,supplemental:i}=t.bidderCodes;return e[n]=this.getBidderSettings(t,t.name),r&&(e[r]=this.getBidderSettings(t,r)),i?.forEach(n=>{e[n]=this.getBidderSettings(t,n)}),e.standard.adserverTargeting&&t.adServerTargeting&&e.standard.adserverTargeting.push(...t.adServerTargeting),e}_setIsSidebarNineAvailable(e){let t=this._slots.get(e);for(let e of t)if(e.location===H.Sidebar&&e.sequence===9){this._map.Sidebar=H.Sidebar_9;return}}getBidderSettings(e,t){return{bidCpmAdjustment:(e,n)=>this._bidCPMAdjuster.adjustCpmFromBidResponse(e,t,n),inverseBidAdjustment:(e,t)=>{let n=this._config.prebid.s2s.bidders.includes(t.bidder)?`server`:t.bidder;return this._bidCPMAdjuster.adjustFloorFromBidRequest(n,t,e,!0)},...e.settings}}};KS=w([S(),N(0,b(J)),N(1,b(P)),N(2,b(IS)),N(3,b(Jf)),N(4,b(GS)),N(5,b(eS)),N(6,b($f)),N(7,b(Y)),N(8,b(US)),N(9,b(RS)),N(10,b(LS)),N(11,b(wp))],KS);let qS=e=>`bidder`in e,JS=class extends V{init(){this._key=`S2STimeOutExperiment`,this._lookup=`S2STO`}};JS=w([S()],JS);let YS=class extends V{init(){this._key=`ayp`,this._lookup=`AYP`}};YS=w([x()],YS);let XS=class extends V{init(){this._key=`UserSyncLimit`,this._lookup=`CSYNC_LIM`}run(){try{let e=super.run();return this._validateResult(e),e}catch(e){return E.error(`UserSyncLimitExperiment`,`run`,e),-1}}_validateResult(e){if(typeof e!=`number`)throw Error(`Result is not a number: ${e}`);if(!Number.isInteger(e))throw Error(`Result is not an integer: ${e}`);if(e<0||e>100)throw Error(`Result out of range: ${e}`);return e}};w([R()],XS.prototype,`run`,null),XS=w([S()],XS);let ZS=class extends V{init(){this._key=`S2SRefreshTimeout`,this._lookup=`S2STORE`}};ZS=w([S()],ZS);var QS=class{constructor(){C(this,`_auctionSuffix`,`/openrtb2/auction`),C(this,`_syncSuffix`,`/cookie_sync`),C(this,`_baseUrl`,void 0),C(this,`_auctionUrl`,void 0),C(this,`_syncUrl`,void 0)}init(){this._setupURLs()}get auction(){return this._auctionUrl.toString()}get sync(){return this._syncUrl.toString()}get configName(){return this._name}_setupURLs(){this._baseUrl=new URL(this._url),this._auctionUrl=new URL(this._auctionSuffix,this._baseUrl),this._syncUrl=new URL(this._syncSuffix,this._baseUrl)}},$S=class extends QS{constructor(e){super(),this._experimentParam=e,C(this,`_name`,`ay`)}init(){this._setupExperimentParam(),super.init()}_setupExperimentParam(){let e=this._experimentParam===`off`?``:`?experiment=${this._experimentParam}`;this._auctionSuffix+=e}};let eC=class extends $S{constructor(e){super(e),C(this,`_url`,`https://pbs-raptive-eu.ay.delivery/`),this.init()}};eC=w([S()],eC);let tC=class extends $S{constructor(e){super(e),C(this,`_url`,`https://pbs-raptive-us.ay.delivery`),this.init()}};tC=w([S()],tC);let nC={Default:`default`,Experiment1:`experiment-1`,Experiment2:`experiment-2`,Experiment3:`experiment-3`,Experiment4:`experiment-4`,Experiment5:`experiment-5`,Experiment6:`experiment-6`,Experiment7:`experiment-7`,Experiment8:`experiment-8`,Experiment9:`experiment-9`,Experiment10:`experiment-10`,Experiment11:`experiment-11`,Experiment12:`experiment-12`,Holdback:`holdback`},rC=nC.Experiment8,iC=()=>rC,aC=class extends V{init(){this._key=`RaptivePBSMultistageAuctionExperiment`,this._lookup=`MULTISERVERAUC`}};aC=w([S()],aC);let oC=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`RaptivePrebidServerProxyExperiment`,this._lookup=`RPBSP`}};oC=w([S()],oC);var sC=class extends QS{constructor(...e){super(...e),C(this,`_name`,`rpbs`)}init(){this._setShouldUseProxy()&&this._setAuctionParams(),super.init()}_setAuctionParams(){this._handleSetVersionParam(iC())}_setShouldUseProxy(){return!!(y.resolve(oC).result&&y.resolve(aC).result!==`off`)}_handleSetVersionParam(e){this._shouldSetVersionParam(e)&&(this._setAuctionVersionParam(e),this._setSyncVersionParam(e))}_shouldSetVersionParam(e){return e!==nC.Default}_setAuctionVersionParam(e){this._auctionSuffix+=`?version=${e}`}_setSyncVersionParam(e){this._syncSuffix+=`?version=${e}`}};let cC=class extends sC{constructor(){super(),C(this,`_url`,`https://prebid.production.adthrive.com`),this.init()}};cC=w([S()],cC);let lC=class extends sC{constructor(){super(),C(this,`_url`,`https://prebid-eu.production.adthrive.com`),this.init()}};lC=w([S()],lC);let uC=class{constructor(e,t,n,r,i,a,o,s,c){this._config=e,this._context=t,this._prebidMethods=n,this._userSyncLimitExperiment=r,this._s2sTimeoutExperiment=i,this._ortb2=a,this._s2sRefreshTimeoutExperiment=o,this._aypExperiment=s,this._eidManager=c,C(this,`_appData`,void 0),C(this,`_useRaptivePBS`,!1),C(this,`_useAYPBS`,!1),C(this,`_accountId`,`1234`),C(this,`_appAccountId`,`6666`),C(this,`rpbsCookieSync`,{}),C(this,`_s2sConfig`,[]),C(this,`_highEntropyUserHints`,[`architecture`,`model`,`platform`,`platformVersion`,`fullVersionList`]),this._appData=vh(this._context.domain,this._ortb2.data.site),this._runRaptivePrebidServerExperiments()}_runRaptivePrebidServerExperiments(){let{rpbsEnabled:e,ayServerEnabled:t}=this._config.prebid;this._useRaptivePBS=e,this._useAYPBS=t}_generateAliases(e){let t=this._config.prebid.s2s.aliases;return Object.keys(t).reduce((n,r)=>(e.includes(r)&&(n[r]=t[r]),n),{})}_getRaptiveServer2ServerConfig(e,t){let n=this._getRPBSEndpoint(t);return this.rpbsCookieSync.url=n.sync,this._generateServer2ServerConfig(e,n)}_getAssertiveYieldServer2ServerConfig(e,t,n){let r=this._getAYPBSEndpoint(t);return this._generateServer2ServerConfig(e,r,n)}_getRPBSEndpoint(e=!1){let t=[`CN`,`HK`,`MY`,`PH`,`SG`,`TH`,`IN`,`SA`,`AE`].includes(this._context.country?.toUpperCase()??``);return!e&&(t||this._config.gdpr.enabled)?new lC:new cC}_getAYPBSEndpoint(e=!1){let t=this._aypExperiment.result;return e?new tC(t):new eC(t)}getServer2ServerConfigWithAppData(e,t,n=!1){let r=this._appData;if(!r||!this._config.prebid.appBidders.length)return;let i=this._config.prebid.s2s.additionalBidders??[],a=t?this._getRaptiveServer2ServerConfig(e,n):this._getAssertiveYieldServer2ServerConfig(e,n,i);if(a.accountId=this._appAccountId,r&&Object.keys(r).length!==0)return a.ignoreDuplicateBidders=!0,a.appData=r,a}_generateRpbsOrtb2(){let{country:e,region:t}=this._context;return{ortb2:{ext:{rpbs:{exp:this._config.prebid.pbsExperimentsResultsByLookupKey,...e&&{country:e},...t&&{region:t}}}}}}_generateServer2ServerConfig(e,t,n){let r=t.configName===`rpbs`&&this._generateRpbsOrtb2();return{accountId:this._accountId,configName:t.configName,enabled:!0,...this._config.prebid.ortbEnrich&&{secure:1},bidders:n??e,syncBidders:n?e:void 0,...r,extPrebid:{aliases:this._generateAliases(e),eidPermissions:[{source:`bidswitch.net`,bidders:e.filter(e=>e!==G.ThirtyThreeAcross)}],returnallbidstatus:!0},defaultTtl:300,timeout:this._s2sTimeoutExperiment.result??750,maxTimeout:this._s2sTimeoutExperiment.result??750,refreshTimeout:this._s2sRefreshTimeoutExperiment.result??1e3,adapter:`prebidServer`,coopSync:!1,userSyncLimit:this._userSyncLimitExperiment.result,endpoint:{p1Consent:t.auction,noP1Consent:t.auction},syncEndpoint:{p1Consent:!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut?t.sync:``,noP1Consent:!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut?t.sync:``}}}_buildS2SConfigs(){let e=this._config.prebid,t=e.s2s.bidders,n=e.s2s.additionalBidders||[],r=[`us`,`ca`].some(e=>e===this._context.country?.toLowerCase()),i=this._useRaptivePBS;this._useAYPBS&&this._s2sConfig.push(this._getAssertiveYieldServer2ServerConfig(t,r,n)),i&&this._s2sConfig.push(this._getRaptiveServer2ServerConfig(t,r));let a=this.getServer2ServerConfigWithAppData(t,i,r);a&&this._s2sConfig.push(a)}init(){this._buildS2SConfigs();let e={s2sConfig:this._s2sConfig.filter(e=>e.bidders.length)};e.firstPartyData={uaHints:this._highEntropyUserHints},this._prebidMethods.setConfig(e,!1),this._prebidMethods.getUserIdsAsync().then(()=>{this._s2sConfig?.forEach(e=>{let t=this._eidManager.getEidSourcesToBiddersAccessMap(e.bidders);[`adserver.org`,`adsrvr.org`].forEach(n=>{let r=t.get(n)||[];r.length&&e.extPrebid?.eidPermissions?.push({source:n,bidders:r})})}),this._prebidMethods.setConfig(e,!1)}).catch(e=>{})}};uC=w([S(),N(0,b(J)),N(1,b(W)),N(2,b(P)),N(3,b(XS)),N(4,b(JS)),N(5,b(Jf)),N(6,b(ZS)),N(7,b(YS)),N(8,b(Ym))],uC);let dC=class extends Cp{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,ee,te,ne,re,ie,ae,oe,se,ce,le,ue,de,fe,pe,me){super(),this._bootstrapConfig=t,this._config=n,this._context=r,this._gam=i,this._s2s=a,this._bidderSetup=o,this._mediaType=s,this._prebidMethods=c,this._prebidConfiguration=l,this._predictiveAnalysisExperiment=u,this._userSyncTriggerComponent=d,this._slots=f,this._creativeMonitoring=p,this._ortb2=m,this._oseq=h,this._gdprEnforcement=g,this._prebidEventBus=_,this._slotEventBus=v,this._videoEventBus=ee,this._floorsEventBus=te,this._sspTakeRateMonitorExperiment=ne,this._userIdComponent=re,this._sspUserSyncComponent=ie,this._googleAdManagerEventBus=ae,this._roadblocksDetection=oe,this._genericAnalytics=se,this._intentIqAnalytics=ce,this._liveRampSecureSignalsExperiment=le,this._assertiveYieldAnalytics=ue,this._creativeBlockEventBus=de,this._innovidLogExperiment=fe,this._limitBidPool=pe,this._abgroup=me,C(this,`_analytics`,void 0),C(this,`_orderedDisplayBidders`,void 0),C(this,`_orderedVideoBidders`,void 0),C(this,`_orderedMultiformatBidders`,void 0),C(this,`_videoCreativeIdMapping`,void 0),C(this,`_predictiveAnalysisResult`,void 0),C(this,`videoAdUnits`,[]),C(this,`bidsRequested`,new T),C(this,`_predictiveAnalysis`,void 0),C(this,`_isBeforeRequestEventLoaded`,!1),C(this,`_excludedSlots`,[H.Interstitial,H.Native_Recipe]),C(this,`_defaultVideoDuration`,30),C(this,`_appDataBidders`,void 0),C(this,`_bidResponseForAdUnitCount`,new Map),C(this,`_highRevGeoCountries`,[`US`,`CA`,`AU`,`DE`,`NZ`,`GB`,`UK`]),C(this,`_bseatAppRequests`,[`537073292`,`2307`,`377`,`39`,`5510`]),C(this,`_initialized`,!1),C(this,`_previousAuctionData`,new Map),C(this,`_previousBidRateData`,void 0),C(this,`_instreamAuctionRefreshByPlayer`,new Map),C(this,`_usedFloorAuctionIds`,[]),C(this,`_maxClearBidAttempts`,3),C(this,`_raptiveFilteredCrids`,new Map),C(this,`_amazonCompetitiveSeparationConfig`,{enabled:!1,featureRolloutKey:`amazon-holiday-campaign-2025`,advertiserDomainsRegex:/(^|\.)target\.com$|(^|\.)walmart\.com$/i,verticals:[`family and parenting`,`food`,`lifestyle`],excludedVerticals:[`news`],mcmps:[`BA_GFT19`,`BA_HENT19`,`BA_HLAC19`,`BA_HLSP19`,`BA_ENT23`],excludedMcmps:[`BA_AMZNK25`,`BA_AMZC`],siteCodes:[`MINO_2021`,`RMOI_24`],excludedBidders:[G.Teads,G.Undertone,G.UndertoneAY,G.UndertoneServer,G.AppNexus,G.AppNexusAY,G.MediaGrid,G.MediaGridAY,G.MediaGridVideo]}),C(this,`_processBidRequested`,e=>{this._setAuctionFloors(e),this._setIXServerSiteId(e),this.bidsRequested.emit()}),C(this,`_processBidResponse`,e=>{this._innovidLogExperiment.result&&this._processInnovidParams(e)}),C(this,`_setAuctionFloors`,e=>{let t=e?.auctionId&&!this._usedFloorAuctionIds.includes(e.auctionId),n=e.bids?.length>0&&e.bids?.[0]?.floorData,r=this._config.prebid.s2s.bidders.includes(e.bidderCode),i=this._config.prebid.serverBidderInflatorMap.get(e.bidderCode);t&&n&&this._setBidRequestedFloorData(e),n&&r&&i&&this._applyServerBidderInflator(e,i)}),this._orderedDisplayBidders=this._bidderSetup.orderedDisplayBidders,this._orderedVideoBidders=this._bidderSetup.orderedVideoBidders,this._videoCreativeIdMapping=this._bidderSetup.videoCreativeIdMapping,this._predictiveAnalysisResult=this._predictiveAnalysisExperiment.result||void 0,this._predictiveAnalysis=e.core.predictiveAnalysis,this._orderedMultiformatBidders=this._bidderSetup.multiFormatBidders,this._appDataBidders=this._config.prebid.appBidders,this._analytics=[this._intentIqAnalytics,this._genericAnalytics,this._assertiveYieldAnalytics].filter(e=>e.enabled)}init(){let e=this._prebidConfiguration,t=vh(this._context.domain,this._ortb2.data.site),n=this._appDataBidders,r=!!this._analytics.length;!this.shouldDisableAmazonCompetitiveSeparationDueToDateRange()&&this._isAmazonCompetitiveSeparationTargetingMatch()&&this._shouldEnableAmazonCompetitiveSeparation()&&(this._amazonCompetitiveSeparationConfig.enabled=!0,this._filterBiddersForAmazonOnly());let i=this._orderedDisplayBidders,a=this._orderedVideoBidders,o=[...i,...a];n.length&&this._prebidMethods.setConfig({appDataConfig:{appData:t,bidders:this._appDataBidders,bseat:this._bseatAppRequests}}),this._setEvents(),e.setDefaultConfig(r),this._userSyncTriggerComponent.triggerUserSyncBasedOnExperiment(`onConfigSet`),e.aliasBidders(o),o.filter(ki).forEach(e=>e.init!==void 0&&e.init()),this._config.prebid.distributeServerBidders(),this._s2s.init(),this._analytics.forEach(e=>e.init!==void 0&&e.init()),e.applyClientAndServerBidderSettings(o),Ah().then(()=>this._registerSignalSources()).catch(e=>{E.error(`PrebidAuctionManager`,`init`,`pageLoaded`,e)}),this._prebidEventBus.initialized.emit(),this._initialized=!0,this._limitBidPool.init()}get multiFormatBidders(){return this._orderedMultiformatBidders}lastAuctionData(e){return this._previousAuctionData.get(e)}_logAuctionDebug(){this._prebidEventBus.auctionDebug.on(e=>{e&&e.type===`ERROR`&&([...e.arguments].some(e=>typeof e==`string`&&e.indexOf(`Error trying to write ad`)>-1)||E.error(`PrebidAuctionManager`,`_logAuctionDebug`,`auctionDebug`,e))})}async _registerSignalSources(){if(this._config.ccpa.userOptedOut||this._config.gpc.gpcEnabled||this._config.gdpr.enabled&&!await this._gdprEnforcement.checkConsentForVendor(this._config.gdpr.raptiveVendorId,[1]))return;let e=[`esp.criteo.com`,`33across.com`,`crwdcntrl.net`];this._liveRampSecureSignalsExperiment.result&&e.push(`liveramp.com`),this._prebidMethods.setConfig({userSync:{encryptedSignalSources:{sources:[{source:e,encrypt:!1}],registerDelay:2e3}}}),this._prebidMethods.registerSignalSources()}_getNoBidReason(e,t){return Object.keys(e??{}).length?``:t??`noBid`}_setLastAuctionData(e,t,n,r){let i=this._previousAuctionData.get(e),a=i?.refresh,o=a===t&&i?i.bids.concat(n):n,s=a===t&&i?i.requests.concat(r):r;this._previousAuctionData.set(e,{bids:o,requests:s,refresh:t})}_handleAuctionEnd(){this._prebidEventBus.auctionEnd.on(e=>{let t=e.bidderRequests||[],n=e.bidsReceived||[],r=e.adUnits||[],i=Object.values(this._config.prebid.targetingKeyMap),a=n.filter(e=>e.app);n.forEach(e=>{e.adserverTargeting=Object.entries(e.adserverTargeting??{}).reduce((e,[t,n])=>(i.includes(t)&&(e[t]=n),e),{})}),r.forEach(e=>{let{code:r,noBidReason:i}=e,o=this._slots.get(r),s=o?o.id:r,c=o?o.refreshCount:this._instreamAuctionRefreshByPlayer.get(s)??0,l=this._prebidMethods.getAdserverTargetingForAdUnitCode(s),u=this._getNoBidReason(l,i);if(this._setLastAuctionData(s,c,n,t),o&&this._config.creativeBlock.creativeBlockEnabled&&(this._handleBlockingOfFilteredCrids(r),this._handleTargetingForRaptiveBlocking(o,r)),o)o?.setSlotAppBids(a,r),u&&o.googleTagSlot?.setTargeting(this._config.prebid.targetingKeyMap.BIDDER,u);else{let e=u?{noBid:u}:l;this._config.video.bidRate=(n.length/(t.length||1)).toFixed(2),this._slotEventBus.addPrebidSlotTargeting.emit({adUnitCode:r,slotTargeting:e})}}),this._setClearBidsTimeout(e.auctionId,e.bidsReceived)})}_handleBlockingOfFilteredCrids(e){let t=this._raptiveFilteredCrids.get(e)||new Set,n=new Set;t.forEach(e=>{e.creativeId&&e.raptiveBlockingSource&&n.add({value:e.creativeId.toString(),type:e.raptiveBlockingSource})}),n.size>0&&this._creativeBlockEventBus.blockCreativeIds.emit({source:`raptive`,crids:n})}_handleTargetingForRaptiveBlocking(e,t){let{bids:n}=this._prebidMethods.getBidResponsesForAdUnitCode(t),r=n.filter(e=>this._filterUnusedBids(e,t)),i=this._raptiveFilteredCrids.get(t)||new Set;for(let e of[...i])this._filterUnusedBids(e,t)||r.push(e);if(r.length>0){let n=r.reduce((e,t)=>t.cpm>e.cpm?t:e,r[0]);n?.creativeId&&n.blockedByRaptive&&e.rbWinningBidsFiltered.add(n.adId),this._raptiveFilteredCrids.set(t,new Set)}e.updateTargetingForRaptiveBlocking()}_getHighestBidTTL(e){let t=e.map(e=>e.ttl?e.ttl*1e3:0);return Math.max(6e4,...t)}_setupTTLTimeout(e,t,n=1){setTimeout(()=>{let t=this._prebidMethods.clearAuctionBids(e);if(t?.length&&n<this._maxClearBidAttempts){let r=this._getHighestBidTTL(t);this._setupTTLTimeout(e,r,++n)}},t)}_setClearBidsTimeout(e,t){if(!t.length)return;let n=this._getHighestBidTTL(t);this._setupTTLTimeout(e,n)}_getBidsInCache(e,t,n){let r=(this._getActiveBidsInPool(e,n)||[]).map(e=>({cpm:e.cpm})),{requests:i,responses:a}=this._previousBidRateData=this._getBiddingData(e);return{bids:r,requests:i,responses:a,refresh:t}}_handleAuctionInit(){this._prebidEventBus.auctionInit.on(e=>{this._setRpbsCookieSyncLatency(),e.adUnitCodes.forEach(t=>{let n=(this._prebidMethods.getPrebidAdUnits()||[]).filter(e=>e.code===t);n.length&&n.forEach(t=>{t.lastAuctionId=e.auctionId})})})}_handleBidWon(){this._prebidEventBus.bidWon.on(e=>{let t=this._slots.get(e.adUnitCode);t&&(t.servedPrebidBidResponse=e,this._slots.bidServed.emit(t),Math.floor(Math.random()*100)>=95&&this._sspTakeRateMonitorExperiment.result&&this._logBidResponseInfo(e.adUnitCode,t))})}_logBidResponseInfo(e,t){let n=this._prebidMethods.getBidResponsesForAdUnitCode(e).bids,r=this._bidResponseForAdUnitCount.get(e)||0;n.slice(r).forEach(e=>{let n=this._config.prebid.targetingKeyMap,{bidder:r,cpm:i,adUnitCode:a,dealId:o,originalCpm:s,responseCpm:c,meta:l,transactionId:u}=e,{[n.PRICE_BUCKET]:d,[n.FORMAT]:f}=e.adserverTargeting,{bp:p,wp:m}=this._extractPriceInfoFromPixelUrl(e);r&&i&&d&&a&&E.event(`PrebidAuctionManager`,`_logBidResponseInfo`,`Info from bid response`,{tid:u,bidder:r,cpm:i,originalCpm:s,responseCpm:c,hb_pb:d,hb_format:f,hb_crid:e.creativeId,meta:l,...p&&{bp:p},...m&&{wp:m},adUnitCode:a,nref:t.refreshCount,dealId:o})}),this._bidResponseForAdUnitCount.set(e,n.length)}_extractPriceInfoFromPixelUrl(e){let{ad:t,adUrl:n}=e,r,i;if(!t&&!n)return{bp:void 0,wp:void 0};if(t){let e=t.match(/[?&]bp=([^&]*)/),n=t.match(/[?&]wp=([^&]*)/);r=e&&e[1],i=n&&n[1]}if(n){let e=n.match(/[?&]bp=([^&]*)/),t=n.match(/[?&]wp=([^&]*)/);r=!r&&e&&e[1],i=!i&&t&&t[1]}return{bp:r,wp:i}}_handleSetTargeting(){this._prebidEventBus.setTargeting.on(e=>{for(let t in e){let n=this._slots.get(t);if(n){let{AD_ID:r,BIDDER:i}=this._config.prebid.targetingKeyMap,{[r]:a,[i]:o}=e[t];try{let e=this._getBidResponseBidsForSlot(n);this._oseq.setOseq(n,e,{hb_adid:a,hb_bidder:o},this._config.prebid.targetingKeyMap)}catch(e){let t=this._prebidMethods.getVersion();E.error(`PrebidAuctionManager`,`setEvents`,e,t)}}}})}_setRpbsCookieSyncLatency(){let e=this._s2s.rpbsCookieSync;if(e.url===void 0||e.latency!==void 0)return;let t=performance.getEntriesByName(e.url,`resource`).filter(e=>`initiatorType`in e&&(e.initiatorType===`fetch`||e.initiatorType===`xmlhttprequest`))?.[0];if(t&&typeof t.duration==`number`){let n=this._prebidMethods.getConfig(`ortb2`)??{};e.latency=Math.round(t.duration);let r={...n,ext:{...n.ext??{},rpbs:{...n.ext?.rpbs??{},l:e.latency}}};this._prebidMethods.setConfig({ortb2:r})}}_handleBeforeRequestEvent(){this._prebidEventBus.beforeRequestBids.on(e=>{this._prebidMethods.addToQueue(()=>{this._userSyncTriggerComponent.triggerUserSyncBasedOnExperiment(`onBeforeRequestEvent`),(this._mediaType.additionalOutstreamUnitsExperiment||!this._mediaType.isOutstreamAllowed())&&!this._isBeforeRequestEventLoaded&&this._updateHighImpactUnitTargeting();let t=this._userIdComponent.getTargetingData(),n=this._sspUserSyncComponent.getTargetingData(),r=[...t,...n];(this._ortb2.data.device?.ip||this._ortb2.data.device?.ipv6)&&r.push(`cfip`),e.forEach(e=>{this._setupSlotRequestTargeting(e,r)}),this._isBeforeRequestEventLoaded=!0})})}_handleGamOnLoad(){this._googleAdManagerEventBus.slotOnload.on(({slotId:e})=>{let t=this._slots.get(e);!t||t.lazy&&!t.refreshCount||setTimeout(()=>{this._prebidMethods.clearTargetingForSharedBidPool(t.id)},2e3)})}_processInnovidParams(e){let t=e.vastXml?.toLowerCase()||e.ad?.toLowerCase(),n=t?.includes(`innovid`)&&kh(t);if(n){let t=e.responseCpm||e.originalCpm,r=e.bidderCode;E.event(`PrebidAuctionManager`,`_processInnovidParams`,{originalCpm:t,bidderCode:r,...n})}}_setIXServerSiteId(e){e.bids?.forEach(t=>{t.bidder===G.IndexExchangeServer&&e.adUnitsS2SCopy?.forEach(e=>{e.bids.filter(e=>e.bidder===t.bidder).forEach(e=>{e.params.siteId&&(e.ortb2Imp??={},e.ortb2Imp.ext??={},e.ortb2Imp.ext.siteId=e.params.siteId)})})})}_applyServerBidderInflator(e,t){e.bids?.forEach(n=>{let{floor:r}=this._getFloor([n]),i=r?.floor;if(i){let r=i*t;e.adUnitsS2SCopy?.forEach(e=>{e.bids.filter(e=>e.bidder===n.bidder).forEach(e=>{e.ortb2Imp??={},e.ortb2Imp.bidfloor=r})})}})}_setBidRequestedFloorData(e){let{floor:t,floorData:n}=this._getFloor(e.bids),r=e.bids[0],i=this._config.prebid.s2s.bidders.includes(r.bidder)?`server`:r.bidder;if(t&&typeof t.floor==`number`||n?.skipped){let a=e.auctionId,o=n?.skipped?-1:this._prebidConfiguration.getRevertedFloor(i,r,t.floor);this._usedFloorAuctionIds.push(a),this._floorsEventBus.setAuctionFloorData.emit({auctionId:a,price:o,floorData:n,bidder:i})}}_getFloor(e){let t,n,r=e[0];try{n=r?.floorData||{},t=typeof e[0].getFloor==`function`&&r.getFloor()}catch(e){E.error(`PrebidAuctionManager`,`_handleBidRequested`,`could not call getFloor`,e)}return{floor:t,floorData:n}}_handleBidRequested(){this._prebidEventBus.bidRequested.on(this._processBidRequested.bind(this))}_handleBidResponse(){this._prebidEventBus.bidResponse.on(this._processBidResponse.bind(this))}_setEvents(){this._logAuctionDebug(),this._handleAuctionEnd(),this._handleBidWon(),this._handleSetTargeting(),this._handleBeforeRequestEvent(),this._handleBidRequested(),this._handleBidResponse(),this._handleGamOnLoad(),this._handleAuctionInit(),this._creativeMonitoring.setupCreativeEventListeners(),this._setBidsFilter(),this._setupEventListeners(),this._handleExpiredRender()}_setupEventListeners(){let e=this._prebidMethods,t=this._prebidEventBus;e.onEvent(`adRenderFailed`,e=>t.adRenderFailed.emit(e)),e.onEvent(`adRenderSucceeded`,e=>t.adRenderSucceeded.emit(e)),e.onEvent(`auctionDebug`,e=>t.auctionDebug.emit(e)),e.onEvent(`auctionEnd`,e=>t.auctionEnd.emit(e)),e.onEvent(`auctionInit`,e=>t.auctionInit.emit(e)),e.onEvent(`beforeRequestBids`,e=>t.beforeRequestBids.emit(e)),e.onEvent(`bidRequested`,e=>t.bidRequested.emit(e)),e.onEvent(`bidResponse`,e=>t.bidResponse.emit(e)),e.onEvent(`bidWon`,e=>t.bidWon.emit(e)),e.onEvent(`rubiconBidError`,e=>t.rubiconBidError.emit(e)),e.onEvent(`setTargeting`,e=>t.setTargeting.emit(e)),e.onEvent(`staleRender`,e=>t.staleRender.emit(e)),e.onEvent(`tcf2Enforcement`,e=>t.tcf2Enforcement.emit(e)),e.onEvent(`vastExceededLimit`,e=>t.vastExceededLimit.emit(e)),e.onEvent(`liveIntentResolved`,e=>t.liveIntentResolved.emit(e)),e.onEvent(`expiredRender`,e=>t.expiredRender.emit(e)),e.onEvent(`id5Resolved`,e=>t.id5Resolved.emit(e)),this._creativeBlockEventBus.cridsUpdated.on(()=>{this._setBidsFilter()})}_setBidsFilter(){let e=this._config.prebid,t=this._getPredictiveAnalysisInvalidBidMap(),n=this._config.creativeBlock.omCrids,r=this._config.creativeBlock.pmpCrids,i=this._config.creativeBlock.adomains,a=new Set([...e.blockedCreativeIds]);this._prebidMethods.setBidsReceivedFilter(e=>{if(!e)return!1;let o=!1,s=!1,c=e.creativeId?.toString(),l=c&&a.has(c),u=t[`${c},${e.bidder}`],d=!!e.dealId,{enabled:f,advertiserDomainsRegex:p}=this._amazonCompetitiveSeparationConfig;if(f){let t=e.meta?.advertiserDomains||[];if(t.some(e=>p.test(e)))return E.event(`PrebidAuctionManager`,`_setBidsFilter`,`bid filtered by AmazonCompetitiveSeparation experiment`,{advertiserDomains:t,verticals:this._config.site.verticals,mcmps:this._config.marmalade.mcmp,siteCodes:this._config.marmalade.filteredSiteCodes}),!1}let m=e.adserverTargeting?.[this._config.prebid.targetingKeyMap.ADOMAIN]||void 0;if(this._config.creativeBlock.creativeBlockEnabled){let t=this._slots.get(e.adUnitCode);if(t?.rbTotalBidsCompared.add(e.adId),o=d?!!c&&r.has(c):!!c&&n.has(c),m&&i.has(m)&&(s=!0),o){e.blockedByRaptive=!0,e.raptiveBlockingSource=d?`pmp`:`om`,t?.rbTotalBidsFiltered.add(e.adId);let n=this._raptiveFilteredCrids.get(e.adUnitCode)||new Set;n.add(e),this._raptiveFilteredCrids.set(e.adUnitCode,n)}s&&t?.rbBidsFilteredByADomain.add(e.adId)}return!l&&!o&&!s&&!u})}_getPredictiveAnalysisInvalidBidMap(){let e=e=>e===`1`===Ct(),t=e=>{let t=this._context.device;return e===`1`?t===`phone`:t===`tablet`||t===`desktop`},n=this._predictiveAnalysis.filter(n=>parseFloat(n.error_rate)>(this._predictiveAnalysisResult||.9)&&e(n.chrome)&&t(n.mobile)),r={};return this._predictiveAnalysis.length&&n.forEach(e=>{let t=`${e.crid},${e.bidder}`;r[t]=!0}),r}_updateSlotTargeting(e){if(!this._mediaType.outstreamSlots.has(`${e.placementMapName}`))return;let t=this._config.adTypes.enabledMinified.map(e=>e.toLowerCase()).filter(e=>e===`od`||e===`om`);t.length&&this._gam.setSlotTargeting({key:`hi_au`,value:t},e.googleTagSlot)}instlEnabled(e){return e===`Interstitial`&&this._config.adOptions.interstitial.prebid}get videoCreativeIdMapping(){return this._videoCreativeIdMapping}addSlots(e){let t=e.filter(e=>this._shouldIncludeSlot(e));this._applySlotFlags(t);let n=this._getBidsForSlots(t),r={bannerBidderBidRequests:n.banner,outstreamBidderBidRequests:n.outstream,nativeBidderBidRequests:n.native,multiFormatBannerVideoBidderBidRequests:n.multiformatOutstream,multiFormatBannerNativeBidderBidRequests:n.multiformatNative},i=t.sort((e,t)=>e.auctionPriority-t.auctionPriority).reduce((e,t)=>{let n=this._generateAdUnits(t,r);return e.concat(n)},[]);return this._prebidMethods.addAdUnits(i),this._setAdUnitOnSLot(t),this._setBidsFilter(),i}reset(e=!0){return this._prebidMethods.removeAllAdUnits(e)}_getUnitMap(e){let t={display:[],instream:[]};return e.forEach(e=>{`id`in e?t.display.push(e):t.instream?.push(e)}),t}_getBidsForSlots(e){let t={banner:new Map,outstream:new Map,native:new Map,instream:new Map,multiformatNative:new Map,multiformatOutstream:new Map},{display:n,instream:r}=this._getUnitMap(e);return n.length&&this._orderedDisplayBidders.forEach(e=>{e.getBidRequests(n,t)}),r.length&&this._orderedVideoBidders.forEach(e=>{e.getBidRequests(r,t)}),t}_applySlotFlags(e){e.forEach(e=>{this._mediaType.outstreamEnabled(e).outstreamCapable&&(e.location!==H.Video_StickyOutstream&&(e.multiformat=!0),e.outstreamEnabled=!0),this._mediaType.nativeEnabled(e)&&(e.multiformat=!0,e.nativeEnabled=!0)})}_generateAdUnits(e,t){let n=[],r=e.location===H.Video_StickyOutstream,i=this._mediaType.outstreamEnabled(e).outstreamCapable&&!r,a=this._mediaType.nativeEnabled(e);if(this._mediaType.additionalOutstreamUnitsExperiment&&this._updateSlotTargeting(e),!r)this.getDisplayAdUnitsFromRequests(e,n,i,a,t);else{let r=this._getOutstreamUnit(e,t.outstreamBidderBidRequests);r&&n.push(r)}return n}getDisplayAdUnitsFromRequests(e,t,n,r,i){let{bannerBidderBidRequests:a,outstreamBidderBidRequests:o,nativeBidderBidRequests:s,multiFormatBannerVideoBidderBidRequests:c,multiFormatBannerNativeBidderBidRequests:l}=i,u=this._getBannerUnit(e,a);if(u&&t.push(u),o.size&&n){let n=this._getOutstreamUnit(e,o);n?.bids.length&&t.push(n)}if(s.size&&r){let n=this._getNativeUnit(e,s);n?.bids.length&&t.push(n)}if(c.size&&e.multiformat){let n=this._getMultiformatBannerVideoUnit(e,c);n?.bids.length&&t.push(n)}if(l.size&&e.multiformat){let n=this._getMultiformatBannerNativeUnit(e,l);n?.bids.length&&t.push(n)}}_getMultiformatBannerNativeUnit(e,t){let n=this._mediaType.nativeEnabled(e)&&!0,r={banner:!0,native:this._mediaType.nativeEnabled(e)&&!0,outstream:!1},i={banner:!0,native:n,outstream:!1};return this._getBannerUnit(e,t,!0,i,r)}_getMultiformatBannerVideoUnit(e,t){let n={banner:!0,native:!1,outstream:this._mediaType.outstreamEnabled(e).outstreamCapable&&!0},r={banner:!0,native:!1,outstream:this._mediaType.outstreamEnabled(e).outstreamCapable&&!0};return this._getBannerUnit(e,t,!0,r,n)}_getBannerUnit(e,t,n=!1,r={banner:!0,native:!1,outstream:!1},i={banner:!0,native:!1,outstream:!1}){let a=this.instlEnabled(e.location),o=t.get(e.id),s=this._ortb2.addOrtb2Imp({slot:e},o,a),c=r.outstream,l=r.native;return o?{...n&&{multiformat:n,multiformatNative:l,multiformatVideo:c},...e.bidPoolId&&{bidPoolId:e.bidPoolId},...e.passiveBidPoolId&&{passiveBidPoolId:e.passiveBidPoolId},code:a?this._config.prebid.interstitialAdUnitCode:e.element.id,mediaTypes:this._mediaType.getMediaType({slot:e},i),...s?{ortb2Imp:s}:{},bids:o,viewability:e.viewability}:void 0}_getOutstreamUnit(e,t){let n=this.instlEnabled(e.location),r=t.get(e.id),i=this._ortb2.addOrtb2Imp({slot:e},r,n),a={outstream:!0};return r?{...e.bidPoolId&&{bidPoolId:e.bidPoolId},...e.passiveBidPoolId&&{passiveBidPoolId:e.passiveBidPoolId},code:n?this._config.prebid.interstitialAdUnitCode:e.element.id,mediaTypes:this._mediaType.getMediaType({slot:e},a),...i?{ortb2Imp:i}:{},viewability:e.viewability,bids:r}:void 0}_getNativeUnit(e,t){let n=this.instlEnabled(e.location),r=t.get(e.id),i=this._ortb2.addOrtb2Imp({slot:e},r,n),a={native:!0};return r?{...e.bidPoolId&&{bidPoolId:e.bidPoolId},...e.passiveBidPoolId&&{passiveBidPoolId:e.passiveBidPoolId},code:n?this._config.prebid.interstitialAdUnitCode:e.element.id,mediaTypes:this._mediaType.getMediaType({slot:e},a),...i?{ortb2Imp:i}:{},viewability:e.viewability,bids:r}:void 0}_setAdUnitOnSLot(e){e.length&&this._prebidMethods.addToQueue(()=>{let t=this._prebidMethods.getPrebidAdUnits();t&&e.forEach(e=>{let n=t.filter(t=>t.code===e.element.id);n.length&&(e.prebidAdUnit=n)})})}_updateSlots(e){e.forEach(e=>{this._updateAdUnitData(e,e.prebidAdUnit);let t=e.prebidAdUnit||[];t.length&&(this._updateAdUnitOrtb2Imp(e,t),this._updateBidderBidParams(e,t),this.updateBidsTrafficShapingLabels(e,t))})}updateBidsTrafficShapingLabels(e,t){t.forEach(t=>{if(!t.bids?.length)return;let{trafficShaping:n,prebid:r}=this._config;t.bids.filter(qS).forEach(t=>{n.applyHoldoutLabel(e,t),r.clientSideBidders.includes(t.bidder)&&n.applyMultistageLabel(e,t)})})}_updateAdUnitOrtb2Imp(e,t){let n=`location`in e,r=n?e:void 0,i=n?void 0:e;t.forEach(e=>{let t=this._ortb2.addOrtb2Imp({slot:r,video:i},e.bids);t.ext={...e?.ortb2Imp?.ext,...t?.ext},e.ortb2Imp=t})}_updateBidderBidParams(e,t){t.forEach(t=>{t.bids?.length&&t.bids.filter(qS).forEach(t=>{let n=this._bidderSetup.biddersParams.get(t.bidder);n&&e.highlyViewable&&n&&n.updateBidParams(t,e)})})}_updateAdUnitData(e,t){t&&e.location!==H.Video_StickyOutstream&&t.forEach(t=>{if(t.multiformat){let n={banner:!0,native:t.multiformatNative,outstream:t.multiformatVideo};t.mediaTypes=this._mediaType.getMediaType({slot:e},n)}t.viewability=e.refreshCount?Math.max(e.viewability,.7):e.viewability;let n=t.mediaTypes?.banner;n&&e.originalSizes&&e.refreshCount>0&&(e.sizes=e.originalSizes,e.originalSizes=void 0,n.sizes=e.sizes)})}_updateHighImpactUnitTargeting(){let e=this._gam;Z.pushToQueue(()=>{let t=`hi_au`,n=e.getTargetingValuesForKey(t).filter(e=>e!==`od`&&e!==`om`);n.length?e.setTargeting({key:t,value:n}):e.clearTargetingForKey(t)})}_shouldIncludeSlot(e){return!this._excludedSlots.includes(e.location)||e.location===H.Interstitial&&this.instlEnabled(e.location)}_addLabels(e,t,n,r){this._addInitialLabel(e,t),this._addRefreshLabel(e,t),this._addOutstreamLabel(e,t),this._addHvpLabel(e,t),this._addAuctionLabels(e,t,n,r)}_addOutstreamLabel(e,t){return this._mediaType.isOutstreamAllowed()&&e.forEach(e=>{this._mediaType.outstreamEnabled(e).outstreamCapable&&t.push(`outstreamCapable_${e.placementMapName}`)}),t}_addHvpLabel(e,t){e.forEach(e=>{e.isHighlyViewable()&&t.push(`hvp_${e.placementMapName}`)})}_addRefreshLabel(e,t){e.forEach(e=>{e.refreshCount>0&&t.push(`refresh`)})}_addInitialLabel(e,t){e.forEach(e=>{e.refreshCount===0&&t.push(`initial`)})}_addAuctionLabels(e,t,n,r){let i=(e.some(e=>e.location===H.Video_StickyOutstream)?this._config.prebid.refreshStickyOutstreamAuctionCount:this._config.prebid.refreshAuctionCount)||1;if(n&&!(n===1&&r)){t.push(`auction-${n}`);return}for(let e=0;e<i;e++){let n=e+1;t.push(`auction-${n}`)}}_getBidResponseBidsForSlot(e){return(e.bidPoolId?this._prebidMethods.getBidResponsesForBidPoolId(e.bidPoolId):this._prebidMethods.getBidResponsesForAdUnitCode(e.id)).bids}_setPgTargeting(e){let t=e?.googleTagSlot?.getTargeting(this._config.prebid.targetingKeyMap.AD_ID)||[],n=this._getBidResponseBidsForSlot(e).filter(e=>e.adId===t[0])[0]||{};Nh(n)&&e.setSlotTargetingFlag(`png`,[`1`])}_setDiscountTargeting(e){let t=e?.googleTagSlot?.getTargeting(this._config.prebid.targetingKeyMap.AD_ID)||[],n=this._getBidResponseBidsForSlot(e).filter(e=>e.adId===t[0])[0]||{},r=n.responseCpm;if(r){let t=r-n.cpm;e.setSlotTargetingFlag(`pbop`,[r.toFixed(6).toString()]),e.setSlotTargetingFlag(`pbpd`,[t.toFixed(6).toString()])}}async _setRefreshOnVideoAdUnit(e){let t=this._prebidMethods;await t.waitForQueue();let n=t.getPrebidAdUnits();e.forEach(e=>{let t=n?.filter(t=>t.code===e.name)[0];t&&(t.refresh=!0)})}async _awaitPrebidReady(){return new Promise(e=>{this._prebidEventBus.initialized.once(()=>{e()})})}_getBiddingData(e){let{bids:t,requests:n}=this._previousAuctionData.get(e)??{bids:[],requests:[]},r=[],i=[];return n.length?(n.forEach(e=>{let t=e.bidder??e.bidderCode;r.includes(t)||r.push(t)}),t.forEach(e=>{let t=e.bidderCode??e.bidder;i.includes(t)||i.push(t)}),{requests:r.length,responses:i.length}):this._previousBidRateData??{requests:0,responses:0}}async _setBidsInCache(e){let t=new Map;return new Promise(n=>{this.checkLibLoaded().then(async r=>{if(!r||!e.length){n(t);return}this._initialized||await this._awaitPrebidReady(),e.forEach(e=>{let n=`id`in e?e.id:e.name,r=(this._getActiveBidsInPool(n)||[]).length;t.set(n,r)}),n(t)}).catch(e=>{n(t)})})}_getBidCacheTargeting(e){let t=new Map;return new Promise(n=>{this.checkLibLoaded().then(async r=>{if(!r||!e.length){n(t);return}this._initialized||await this._awaitPrebidReady(),e.forEach(e=>{let n=`id`in e?e.id:e.name,r=`id`in e?e.refreshCount:e.prerollNum,i=`id`in e?e.bidPoolId:void 0;t.set(n,this._getBidsInCache(n,r,i))}),n(t)}).catch(e=>{n(t)})})}async setPreAuctionBidCacheData(e){return this._setBidsInCache(e)}setDisplayBidCacheTargeting(e){return this._getBidCacheTargeting(e)}setInstreamBidCacheTargeting(e){return this._getBidCacheTargeting(e)}clearAuctionTargeting(e){this._prebidMethods.clearSlotTargeting(e)}requestBids(e,t=this._config.timeouts.initialBidsRequest,n=[],r=0,i=!0,a=!1){return e=e.filter(e=>this._shouldIncludeSlot(e)),new Promise(o=>{this.checkLibLoaded().then(async s=>{let c=e.map(e=>e.name),l=rc.markStartTask(`microtask`,[`PrebidAuctionManager`,`requestBids`,`first`,`task`]);l.addMetadata({slotNames:c});let u=e.map(e=>this.instlEnabled(e.location)?this._config.prebid.interstitialAdUnitCode:e.element.id),d=!1,{reducer:f,sorter:p}=this._getBidSorters(u,e),m=()=>{d=!0,l.markEndTask(),o()},h=()=>{d||(i&&this._displayBidsBackhandler({},u,e,f,p),m())};if(!s||!e.length){m();return}l.markEndTask(),this._initialized||await this._awaitPrebidReady();let g=rc.markStartTask(`microtask`,[`PrebidAuctionManager`,`requestBids`,`second`,`task`]);g.addMetadata({slotNames:c}),this._addLabels(e,n,r,i),a&&this._updateSlots(e),this._buildRequest(u,e,t,n,i,m);let _=t+(e[0].refreshCount?0:this._config.prebid.failsafeTimeout),v=()=>{this._prebidMethods.addToQueue(()=>{setTimeout(h,_)})};this._bootstrapConfig.gptLibFailedToLoad?v():Z.pushToQueue(()=>v),g.markEndTask()}).catch(e=>{E.error(`PrebidAuctionManager`,`requestBids`,e),o()})})}_buildRequest(e,t,n=this._config.timeouts.initialBidsRequest,r=[],i=!0,a,o,s){this._prebidMethods.requestBids({adUnitCodes:e,timeout:n,bidsBackHandler:n=>{i&&this._displayBidsBackhandler(n,e,t,o,s),a()},labels:r})}_getBidSorters(e,t){let n=e.length>1,r=t[0]?.location===H.Video_StickyOutstream,i,a;return!n&&r&&(i=this.cpmByDurationReducer.bind(this),a=this.cpmByDurationSorter.bind(this)),{reducer:i,sorter:a}}_displayBidsBackhandler(e,t,n,r,i){if(this._bootstrapConfig.gptLibFailedToLoad){this.handleRenderingSlotsWhenGoogleAdManagerFailed(n);return}else{this._config.fledge.enabled&&this._prebidMethods.setPAAPIConfigForGPT({adUnitCode:t[0]});let a=n[0],o=a?.location===H.Footer?this._roadblocksDetection.isRoadblock(e):!1;o&&this._gam.setTargeting({key:`rb_crid`,value:String(this._roadblocksDetection.creativeId)});let s=o?2:1;this._prebidMethods.setTargetingForGPTAsync(t,null,a.bidPoolId,s,r,i),this._setDiscountTargeting(a),this._setPgTargeting(a),n.forEach(e=>{e.addRequestTypeSlotFlag(this._config.prebid.targetingKeyMap.AD_ID)}),this.setCurrencySlotTargetingFlag(a)}}_updateOrtb2WithJwPlayerSegments(e,t){let n=wv(t),r=n.site?.content?.data?.filter(e=>e.name!==`jwplayer.com`)||[],i={ext:{segtax:502},name:`jwplayer.com`,segment:e.jwPlayerSegments?.map(e=>({id:e}))??[]};return e.nextMediaId&&(i.ext.cids=[e.nextMediaId],i.cids=[e.nextMediaId]),r.push(i),n.site={...n.site,content:{...n.site?.content,data:r}},n}_updateVideoAdUnitData(e){e.forEach(e=>{let t=sh(this._config.video.plcmtUnits,e);t&&e.videoAdUnit?.mediaTypes?.video&&(e.videoAdUnit.mediaTypes.video.plcmt=t,e.plcmt=t)})}async requestVideoBids(e,t=this._config.timeouts.initialBidsRequest){return new Promise(n=>{let r=!1,i=()=>{n(),r=!0},a=()=>{r||n()};this.checkLibLoaded().then(async n=>{n||i(),this._initialized||await this._awaitPrebidReady(),e.forEach(e=>this._instreamAuctionRefreshByPlayer.set(e.name,e.prerollNum));let r=e.map(({name:e})=>e),o=this._prebidMethods.getConfig(`ortb2`)||{},s=this._updateOrtb2WithJwPlayerSegments(e[0],o);this._updateVideoAdUnitData(e),e.forEach(e=>{if(e.prerollNum>0){let t=this._prebidMethods.getPrebidAdUnits()?.filter(t=>t.code===e.name);t&&t.length&&(this._updateAdUnitOrtb2Imp(e,t),this.updateBidsTrafficShapingLabels(e,t))}}),this._setRefreshOnVideoAdUnit(e),this._prebidMethods.requestBids({adUnitCodes:r,timeout:t,bidsBackHandler:t=>{this._videoBidsBackhandler(t,e),i()},ortb2:s});let c=t+(e[0].prerollNum?0:this._config.prebid.failsafeTimeout),l=()=>{this._prebidMethods.addToQueue(()=>{setTimeout(a,c)})};this._bootstrapConfig.gptLibFailedToLoad?l():Z.pushToQueue(()=>l)}).catch(e=>{E.error(`PrebidAuctionManager`,`requestVideoBids`,e),i()})})}_getActiveBidsInPool(e,t){let n=this._prebidMethods;return((t?n.getBidResponsesForBidPoolId(t):n.getBidResponsesForAdUnitCode(e))??{}).bids?.filter(t=>this._filterUnusedBids(t,e))}_filterUnusedBids(e,t){let n=e.ttl||300;e.responseTimestamp=e.responseTimestamp||new Date().getTime();let r=e.responseTimestamp+n*1e3>new Date().getTime(),i=e&&(!e.sharedBidInUse||e.sharedBidInUse===t)&&e.status!==`rendered`;return r&&i}_videoBidsBackhandler(e,t){let n=t[0].videoAdUnit,r=n?.mediaTypes?.video?.maxduration;if(n&&r&&e[n.code]){let i=e[n.code].bids;i.forEach(e=>{e.maxDuration=r}),t[0].setPrebidBids(i)}}setCurrencySlotTargetingFlag(e){if(this._config.prebid.currencyConversionEnabled){let t=`bidcur`,n=[];n=e.bidPoolId?this._prebidMethods.getHighestCpmBidsForPoolId(e.bidPoolId):this._prebidMethods.getHighestCpmBids(e.id);let r=n?.[0],i=r?.originalCurrency,a=r?.currency;r&&a&&i!==a?e.setSlotTargetingFlag(t,[i||`undefined`,a],!0):e.clearSlotTargetingFlag([t])}}handleRenderingSlotsWhenGoogleAdManagerFailed(e){e.forEach(e=>{e.isRefreshing=!1,e.location===H.Video_StickyOutstream?setTimeout(()=>{this._slotEventBus.triggerRenderOutsideGam.emit(e.id)},(e.stickyOutstreamTimeRemaining??0)*1e3):this._slotEventBus.triggerRenderOutsideGam.emit(e.id)})}addVideoSlots(e){let t=this._getBidsForSlots(e).instream,n=e.map(e=>{let n=t.get(e.name),r=this._ortb2.addOrtb2Imp({video:e},n),i={code:e.name,ortb2Imp:r,mediaTypes:this._mediaType.getMediaType({video:e}),bids:n};return e.videoAdUnit=i,i});this._prebidMethods.addAdUnits(n),this._videoEventBus.videoAdUnitAdded.emit()}refreshBids(e,t=0,n=!0){return e.forEach(e=>{e.prebidAdUnit?.forEach(e=>e.refresh=!0)}),this.requestBids(e,this._config.timeouts.refreshBidsRequest,[],t,n,!0)}checkLibLoaded(){return new Promise(e=>{this._bootstrapConfig.bootstrapLoaders[ot.Prebid].then(()=>e(!0)).catch(()=>e(!1))})}shouldTurnOffPrebidBasedOnGeoAndDevice(){let e=this._context.country??`US`,t=!this._highRevGeoCountries.includes(e)&&z()&&wt(),n=cn.isRolloutEnabled(`disable-prebid-non-high-geo-mob-chromium`);return t?n:!1}get enabled(){return!(this.shouldTurnOffPrebidBasedOnGeoAndDevice()||xt())}cpmByDurationReducer(e,t){return this.getBidCpmByDuration(e)<this.getBidCpmByDuration(t)?t:e}cpmByDurationSorter(e,t){return this.getBidCpmByDuration(t)-this.getBidCpmByDuration(e)}getBidCpmByDuration(e){let t=Math.max(1,e.duration??this._defaultVideoDuration);return e.cpm/t}_setupSlotRequestTargeting(e,t){let n=this._slots.get(e.code),r=(e&&e.ortb2Imp&&e.ortb2Imp.ext&&e.ortb2Imp.ext.tid)??``;if(n){if(n.setTransactionId(r),n.setSlotTargetingFlag(`tid`,[n.transactionId],!0),n.setTargeting({key:`idp`,value:t}),n.multiformat&&n.refreshCount<2){let e=`b`;this._mediaType.nativeEnabled(n)&&(e+=`n`),this._mediaType.outstreamEnabled(n).outstreamCapable&&(e+=`v`),n.setSlotTargetingFlag(`mtr`,[e],!0)}this._amazonCompetitiveSeparationConfig.enabled&&n.setTargeting({key:`amzh25`,value:`true`})}}_handleExpiredRender(){this._prebidEventBus.expiredRender.on(e=>{let t=this._config.prebid.targetingKeyMap,{bidder:n,cpm:r,adUnitCode:i,dealId:a,originalCpm:o,responseCpm:s,meta:c}=e,{[t.PRICE_BUCKET]:l,[t.FORMAT]:u}=e.adserverTargeting,d=this._slots.get(i),f=d?d.refreshCount:``;E.event(`PrebidAuctionManager`,`_handleExpiredRender`,{bidder:n,cpm:r,originalCpm:o,responseCpm:s,hb_pb:l,hb_format:u,meta:c,adUnitCode:i,nref:f,dealId:a})})}_shouldEnableAmazonCompetitiveSeparation(){let e=this._amazonCompetitiveSeparationConfig.featureRolloutKey;if(cn.isRolloutAdministrativelyEnabled(e)){let t=cn.isRolloutEnabled(e);return this._abgroup.set(`acso`,t?`true`:`false`),t}return y.resolve(Lx).result}shouldDisableAmazonCompetitiveSeparationDueToDateRange(){let e=y.resolve(Ix).result;if(e){let t=It(),n=qn(new Date,e);return t&&n}return!1}_isAmazonCompetitiveSeparationTargetingMatch(){let e=this._config.site.verticals,t=this._config.marmalade,{excludedVerticals:n,excludedMcmps:r,mcmps:i,siteCodes:a,verticals:o}=this._amazonCompetitiveSeparationConfig,s=i.some(e=>t.mcmp.includes(e)),c=a.some(e=>t.filteredSiteCodes.includes(e)),l=e.some(e=>o.some(t=>e.toLowerCase().includes(t))),u=t.mcmp.some(e=>r.includes(e)),d=e.some(e=>n.some(t=>e.toLowerCase().includes(t)));return!u&&(c||s||l)&&!d}_filterBiddersForAmazonOnly(){let{excludedBidders:e}=this._amazonCompetitiveSeparationConfig;this._orderedDisplayBidders=this._orderedDisplayBidders.filter(t=>!e.includes(t.name)),this._orderedVideoBidders=this._orderedVideoBidders.filter(t=>!e.includes(t.name))}};dC=w([D(`PrebidAuctionManager`),S(),N(0,b(`AdThrive`)),N(1,b(on)),N(2,b(J)),N(3,b(W)),N(4,b(Z)),N(5,b(uC)),N(6,b(Nx)),N(7,b(PS)),N(8,b(P)),N(9,b(KS)),N(10,b(zx)),N(11,b(oh)),N(12,b(Y)),N(13,b(Fx)),N(14,b(Jf)),N(15,b(FS)),N(16,b(gp)),N(17,b(Qf)),N(18,b(Hs)),N(19,b(pc)),N(20,b(vp)),N(21,b(Bx)),N(22,b(ih)),N(23,b(zp)),N(24,b(X)),N(25,b(Ph)),N(26,b(Ey)),N(27,b(Py)),N(28,b(lh)),N(29,b(zh)),N(30,b(ch)),N(31,b(Rx)),N(32,b(rS)),N(33,b(Wt))],dC);let fC=class{constructor(e,t,n,r,i,a,o,s){this._config=e,this._slotEventBus=r,this._videoEventBus=i,this._gamEventBus=a,this._viewportSamplingExperiment=o,this._slots=s,C(this,`_auctionManagers`,void 0),C(this,`_bidsInCacheMap`,new Map),C(this,`_lastAuctionData`,new Map),this._auctionManagers=[n,t].filter(e=>e.enabled),this._setSlotEvents(),this._setVideoEvents()}_setSlotEvents(){this._slotEventBus.addSlots.on(e=>this._addSlots(e)),this._slotEventBus.requestingBids.on(e=>this._requestBids(e)),this._slotEventBus.beforeGoogleAdManagerRefreshSlots.on(e=>this._beforeGoogleAdManagerRefreshSlots(e)),this._slotEventBus.refreshingBids.on(e=>this._refreshBids(e.managedSlotsIds,e.auctionCount,e.setTargeting)),this._slotEventBus.addRangeSlotTargeting.on(e=>this._addRangeSlotTargeting(e)),this._gamEventBus.slotRenderEnded.on(e=>{this._clearLastAuctionKeyValueTargeting(e.slotId)})}_setVideoEvents(){this._videoEventBus.videoPlayerAdded.on(e=>this._addVideoSlots(e)),this._videoEventBus.requestingVideoBids.on(({videos:e,timeout:t})=>this._requestVideoBids(e,t)),this._videoEventBus.buildingVastAdURL.on(e=>this._setInstreamBidCacheTargeting(e))}_awaitMarmaladeLoaded(){return this._config.marmalade.marmaladeEventPromise}_awaitTrafficShapingLoaded(){return this._config.trafficShaping.trafficShapingEventPromise}_awaitRaptiveMLFloorsLoaded(){return this._config.floors.raptiveMLFloorsEventPromise}init(){this._auctionManagers.forEach(e=>void this._auctionManagerInit(e))}async _awaitSetup(){let e=this._config,t=[];e.marmalade.loaded||t.push(this._awaitMarmaladeLoaded()),e.trafficShaping.loaded||t.push(this._awaitTrafficShapingLoaded()),e.floors.raptiveMLFloorsLoaded||t.push(this._awaitRaptiveMLFloorsLoaded()),this._config.creativeBlock.creativeBlockEnabled&&!this._config.creativeBlock.cridsLoaded&&t.push(this._config.creativeBlock.cridEventPromise),await Promise.all(t)}async _auctionManagerInit(e){await this._awaitSetup(),e.init!==void 0&&e.init()}_clearLastAuctionKeyValueTargeting(e){let t=this._slots.get(e);t&&setTimeout(()=>{this._auctionManagers.forEach(e=>e.clearAuctionTargeting(t))},1e3)}_addRangeSlotTargeting(e){this._slots.get(e).forEach(e=>{let t=e.googleTagSlot,n=t?.getTargetingKeys()||[],r=[this._config.prebid.targetingKeyMap.PRICE_BUCKET,`amz_pb`,`amz_pb_sp`],i=this._config.prebid.targetingKeyMap.RPB,a=null;r.forEach(e=>{if(n.includes(e)){let n=Number(t?.getTargeting(e)[0]);(!a||a&&n>a)&&(a=n)}}),a&&e.setTargeting({key:i,value:hc(a)})})}async _beforeGoogleAdManagerRefreshSlots(e){let t=this._slots.get(e);await this._setDisplayBidCacheTargeting(t)}async _requestBids(e){let t=this._slots.get(e);await this._setPreAuctionBidCacheData(t),await vc(),await Promise.all(this._auctionManagers.map(e=>e.requestBids(t)))}async _setDisplayBidCacheTargeting(e){let t=await Promise.all(this._auctionManagers.map(t=>t.setDisplayBidCacheTargeting(e)));e.forEach(e=>{let n=this._getBidCacheTargeting(e.id,t,e.refreshCount);this._setDisplayBidCacheTargetingOnSlot(e,n)})}_setDisplayBidCacheTargetingOnSlot(e,t){let n=e.id,r=this._getTargetingMap(n,t);if(Object.keys(r).forEach(t=>{let n=t;e.setSlotTargetingFlag(t,[r[n]??`none`],!0)}),this._viewportSamplingExperiment.result){let t=e.getPositionFromViewport().toString();e.setSlotTargetingFlag(`v`,[t],!0)}}async _setInstreamBidCacheTargeting(e){let t=await Promise.all(this._auctionManagers.map(t=>t.setInstreamBidCacheTargeting(e)));e.forEach(e=>{let n=this._getBidCacheTargeting(e.name,t,e.prerollNum);this._setInstreamBidCacheTargetingMap(e,n)})}_getTargetingMap(e,t){let n=t.bids.sort((e,t)=>t.cpm-e.cpm),r=this._getBidRate(t)??`none`;return this._lastAuctionData.set(e,{...t,bidRate:r}),{bic:(this._bidsInCacheMap.get(e)??0).toString(),tbc:n?.[0]?.cpm.toFixed(2),"2bc":n?.[1]?.cpm.toFixed(2)??`none`,medb:this._getMedianBid(n)??`none`,bidr:r}}async _setPreAuctionBidCacheData(e){let t=await Promise.all(this._auctionManagers.map(t=>t.setPreAuctionBidCacheData(e)));e.forEach(e=>{let n=`id`in e?e.id:e.name,r=this._getBidsInCacheValue(n,t);this._setBidsInCache(n,r.bids)})}_setBidsInCache(e,t){this._bidsInCacheMap.set(e,t)}_getBidsInCacheValue(e,t){return t.reduce((t,n)=>{let r=n.get(e)??0;return t.bids+=r,t},{bids:0})}_getBidCacheTargeting(e,t,n){let r=this._lastAuctionData.get(e),i=r?.refresh===n?r:{bids:[],requests:0,responses:0,refresh:0,bidRate:0};return t.reduce((t,n)=>{let r=n.get(e);return r&&Object.keys(r).forEach(e=>{let n=e,i=r[n];i&&(n===`bids`&&Array.isArray(i)&&i.length?t[n]=[...t[n],...i]:n===`refresh`&&typeof i==`number`?t[n]=i:n!==`bids`&&typeof i==`number`&&(t[n]+=i))}),t},i)}_setInstreamBidCacheTargetingMap(e,t){let n=e.name;e.lastAuctionBidDetails=this._getTargetingMap(n,t)}_getBidRate(e){let{requests:t,responses:n}=e;return(n/(t||1)).toFixed(2)}_getMedianBid(e){let t=e.length;if(!t)return;let n;if(t===1)n=e[0].cpm;else{let r=t%2==0,i=Math.floor(t/2);n=r?(e[i].cpm+e[i-1].cpm)/2:e[i].cpm}return n.toFixed(2)}async _refreshBids(e,t=0,n=!0){let r=this._slots.get(e);r.forEach(e=>{e.googleTagSlot?.clearTargeting(this._config.prebid.targetingKeyMap.RPB)}),await this._setPreAuctionBidCacheData(r),await Promise.all(this._auctionManagers.map(e=>e.refreshBids(r,t,n)))}_addSlots(e){let t=this._slots.get(e);this._auctionManagers.forEach(e=>{e.addSlots!==void 0&&e.addSlots(t)})}_addVideoSlots(e){this._auctionManagers.filter(e=>e.videoEnabled&&e.addVideoSlots).forEach(t=>t.addVideoSlots(e))}async _requestVideoBids(e,t){await this._setPreAuctionBidCacheData(e),await Promise.all(this._auctionManagers.filter(e=>e.videoEnabled).map(n=>n.requestVideoBids(e,t)))}getPrebidAuctionManager(){for(let e of this._auctionManagers)if(e instanceof dC)return e}getAmazonAuctionManager(){for(let e of this._auctionManagers)if(e instanceof Ip)return e}};fC=w([D(`AuctionManagers`),S(),N(0,b(J)),N(1,b(dC)),N(2,b(Ip)),N(3,b(Hs)),N(4,b(pc)),N(5,b(X)),N(6,b(mc)),N(7,b(Y))],fC);let pC=class{constructor(e){C(this,`_commands`,void 0),this._commands=e.cmd||[]}init(){if(this._commands.length>0){for(let e of this._commands)this._isGamMethod(e.toString())?this._addToGamQueue(e):this._call(e);this._commands=[]}}push(e){this._commands.length>0?this._commands.push(e):this._isGamMethod(e.toString())?this._addToGamQueue(e):this._call(e)}_call(e){try{e.call(void 0)}catch(e){E.error(`CommandQueue`,`_call`,`Error calling command`,e)}}_isGamMethod(e){return e&&(e.includes(`setTargeting(`)||e.includes(`setTargetingFlag(`)||e.includes(`getTargeting(`)||e.includes(`getTargetingMap(`)||e.includes(`googletag`)||e.includes(`pubads`))}_addToGamQueue(e){Z.pushToQueue(()=>{this._call(e)})}};pC=w([S(),N(0,b(`AdThrive`))],pC);let mC=class extends qe{constructor(...e){super(...e),C(this,`footerSlotAdditionEnabled`,new T)}};mC=w([S()],mC);let hC=class extends I{constructor(e,t,n,r,i,a){super(),this._adTypes=e,this._gamEventBus=t,this._skylineEventBus=n,this._slotManagerEventBus=r,this._slotManager=i,this._slotEventBus=a,C(this,`_footerSlotAdded`,!1),C(this,`_skylineSearchDelayAfterRender`,750),C(this,`_skylineRenderDuration`,6e4),C(this,`_skylineUnitClassName`,`raptive-sales-sky`)}init(){let e=this._slotManagerEventBus.added.on(t=>{let n=this._slotManager.getSlots(t).find(e=>this._isHeaderSlot(e));n&&(this._setSkylineTargetingOnSlot(n),e())}),t=this._gamEventBus.slotOnload.on(({slotId:e})=>{let n=this._slotManager.getSlot(e);n&&this._isHeaderSlot(n)&&setTimeout(()=>{this._isSkylineAdUnit(n)?this._handleSkylineHeaderRender(n):this._enableFooterSlotAddition(),n.clearSlotTargetingFlag([`skl`]),t()},this._skylineSearchDelayAfterRender)})}_setSkylineTargetingOnSlot(e){e.setSlotTargetingFlag(`skl`,[`1`])}_isSkylineAdUnit(e){return this._isHeaderSlot(e)&&!!e.element.getElementsByClassName(this._skylineUnitClassName).length}_handleSkylineHeaderRender(e){this._slotManager.updateRefreshTimeout(e,this._skylineRenderDuration),this._listenForSkylineClosed();let t=this._slotEventBus.beforeGoogleAdManagerRefreshSlots.on(e=>{this._slotManager.getSlots(e).some(e=>this._isHeaderSlot(e))&&(this._enableFooterSlotAddition(),t())});this._handleSkylineAfter60Seconds(e)}_listenForSkylineClosed(){window.addEventListener(`message`,e=>{this._isSkylineClosedMessage(e)&&this._enableFooterSlotAddition()})}_isSkylineClosedMessage(e){let t=e.data;return!!t&&typeof t==`object`&&`type`in t&&typeof t.type==`string`&&t.type===`CeltraSkyline`&&`action`in t&&typeof t.action==`string`&&t.action===`closed`}_handleSkylineAfter60Seconds(e){setTimeout(()=>{this._footerSlotAdded||this._slotManager.refresh(e)},this._skylineRenderDuration)}_enableFooterSlotAddition(){this._footerSlotAdded=!0,this._skylineEventBus.footerSlotAdditionEnabled.emit()}get enabled(){return this._adTypes.skylineHeader&&It()}_isHeaderSlot(e){return e.location===H.Header}};hC=w([D(`SkylineAdsComponent`),S(),N(0,b(tr)),N(1,b(X)),N(2,b(mC)),N(3,b($f)),N(4,b(eS)),N(5,b(Hs))],hC);let gC=class extends I{get enabled(){return cn.isRolloutEnabled(`ad-fit-width`)}start(){document.body.classList.add(`adthrive-fit-content`)}};gC=w([x()],gC);var _C=class extends On{constructor(...e){super(...e),C(this,`_resultValidator`,()=>!0)}_isValidResult(e){return super._isValidResult(e,()=>this._resultValidator(e)||e===`control`)}run(){if(!this.experimentConfig||!this._mappedChoices||this._mappedChoices.length===0)return E.error(`WeightedChoiceSiteExperiment`,`run`,`No experiment config found`),`control`;let e=new Wn(this._mappedChoices).get();return this._isValidResult(e)?e:(E.error(`WeightedChoiceSiteExperiment`,`run`,`Invalid result from experiment choices. Defaulting to control.`,e),`control`)}};let vC=e=>/^[-_a-zA-Z]+[-_a-zA-Z0-9]*$/.test(e),yC=class extends _C{constructor(e,t,n,r){super(),this._siteExperiments=e,this._pubabgroup=t,this._cls=n,C(this,`_choices`,[]),C(this,`_mappedChoices`,[]),C(this,`_result`,``),C(this,`key`,hn.AdLayout),C(this,`_resultValidator`,e=>{if(typeof e!=`string`)return!1;let t=e.startsWith(`.`)?e.substring(1):e;return vC(t)}),r.siteAds?.siteExperiments?this.experimentConfig=new In(r.siteAds).getSiteExperimentByKey(this.key):this.experimentConfig=this._siteExperiments.getSiteExperimentByKey(this.key),this.enabled&&this._cls.siteExperimentsWeightedChoice&&this.key in this._cls.siteExperimentsWeightedChoice&&this._isValidResult(this._cls.siteExperimentsWeightedChoice[this.key])?(this._result=this._cls.siteExperimentsWeightedChoice[this.key],this.setExperimentTargeting()):this.enabled&&this.experimentConfig&&(this._choices=this.experimentConfig.variants,this._mappedChoices=this._mapChoices(),this._result=this.run(),this.setExperimentTargeting())}run(){if(!this.enabled)return E.error(`AdLayoutSiteExperiment`,`run`,`() => %o`,`No experiment config found. Defaulting to empty class name.`),``;let e=new Wn(this._mappedChoices).get();return this._isValidResult(e)?e:(E.error(`AdLayoutSiteExperiment`,`run`,`() => %o`,`Invalid result from experiment choices. Defaulting to empty class name for result`,e),``)}setExperimentTargeting(){if(!this.enabled||!this._isValidResult(this._result)){E.error(`AdLayoutSiteExperiment`,`setExperimentTargeting`,`() => %o`,`Experiment targeting requires an experiment config and valid result`);return}let e=this.experimentConfig,t=`${e.key.toLowerCase()}-${e.id}`,n=this._result;this._pubabgroup.set(t,n)}_mapChoices(){return this._choices.map(({weight:e,value:t})=>({weight:e,choice:t}))}};w([R()],yC.prototype,`run`,null),yC=w([S(),N(0,b(Ln)),N(1,b(ln)),N(2,b(pr)),N(3,b(`AdThrive`))],yC);let bC=class extends I{constructor(e){super(),this._adLayoutSiteExperiment=e}get enabled(){return this._adLayoutSiteExperiment.enabled}init(){let e=this._adLayoutSiteExperiment.result,t=e.startsWith(`.`)?e.substring(1):e;if(vC(t))try{document.body.classList.add(t)}catch(e){E.error(`AdLayoutComponent`,`init`,`Uncaught CSS Class Name error: ${e}`)}else E.error(`AdLayoutComponent`,`init`,`Invalid class name: ${e}`)}};bC=w([D(`AdLayoutComponent`),x(),N(0,b(yC))],bC);let xC=class extends I{constructor(e,t){super(),this._context=e,this._gam=t}init(){if(this._context.querystring.has(`ad_test`)){let e=this._context.querystring.get(`ad_test`);this._gam.setTargeting({key:`sec`,value:e.split(`,`).map(e=>`test${e}`)})}}};xC=w([D(`AdTestComponent`),x(),N(0,b(W)),N(1,b(Z))],xC);var SC=class{constructor(){C(this,`_map`,[])}add(e,t,n,r=document){this._map.push({el:e,coords:t,dynamicAd:n,target:r})}addSorted(e,t,n,r=document){let i=this._upperBoundIndex(t);this._map.splice(i,0,{el:e,coords:t,dynamicAd:n,target:r})}get map(){return this._map}sort(){this._map.sort(({coords:e},{coords:t})=>e-t)}filterUsed(){this._map=this._map.filter(({dynamicAd:e})=>!e.used)}findNeighborIndices(e){let t=this._upperBoundIndex(e),n=t-1>=0?t-1:null,r=t<this._map.length?t:null;return[n,r]}_upperBoundIndex(e){let t=0,n=this._map.length;for(;t<n;){let r=t+n>>>1;this._map[r].coords<=e?t=r+1:n=r}return t}reset(){this._map=[]}};let CC=class extends SC{};CC=w([S()],CC);let wC=e=>{let t=e.firstChild?e.firstChild:void 0,n=t?getComputedStyle(t).height:`0px`;return Number(n.slice(0,-2))},TC=e=>{let t=e.firstChild?e.firstChild:void 0,n=t?getComputedStyle(t).width:`0px`;return Number(n.slice(0,-2))},EC=(e=document)=>(e===document?document.body:e).getBoundingClientRect().top,DC=e=>e.includes(`,`)?e.split(`,`):[e],OC=(e=document)=>{let t=e.querySelectorAll(`article`);if(t.length===0)return null;let n=Array.from(t).reduce((e,t)=>t.offsetHeight>e.offsetHeight?t:e);return n&&n.offsetHeight>window.innerHeight*1.5?n:null},kC=(e,t,n=document)=>{let r=OC(n),i=r?[r]:[],a=[];e.forEach(e=>{let r=Array.from(n.querySelectorAll(e.elementSelector)).slice(0,e.skip);DC(e.elementSelector).forEach(o=>{let s=n.querySelectorAll(o);for(let n=0;n<s.length;n++){let o=s[n];if(t.map.some(({el:e})=>e.isEqualNode(o)))continue;let c=o&&o.parentElement;c&&c!==document.body?i.push(c):i.push(o),r.indexOf(o)===-1&&a.push({dynamicAd:e,element:o})}})});let o=EC(n),s=a.sort((e,t)=>e.element.getBoundingClientRect().top-o-(t.element.getBoundingClientRect().top-o));return[i,s]},AC=(e,t,n=document)=>{let[r,i]=kC(e,t,n);return r.length===0?[null,i]:[Array.from(r).reduce((e,t)=>t.offsetHeight>e.offsetHeight?t:e)||document.body,i]},jC=()=>{let e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},MC=()=>{let e=document.body,t=document.documentElement;return Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth)},NC=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`AdsToContentRatioLogging`,this._lookup=`ATCRL`}};NC=w([S()],NC);let PC=class extends I{constructor(e,t,n,r,i,a,o,s,c){super(),this._adsToContentRatioLoggingExperiment=e,this._slots=t,this._pageManager=n,this._videoEventBus=r,this._gamEventBus=i,this._dynamicAdsMapper=a,this._adInjectionMap=o,this._cls=s,this._context=c,C(this,`_videoPlayerElements`,new Map),C(this,`_slotRenderStatus`,new Map)}init(){this._setupVideoListeners(),this._setupPageLeaveListener(),this._setupSlotRenderListeners()}_setupSlotRenderListeners(){this._gamEventBus.slotRenderEnded.on(({slotId:e,event:t})=>{this._slotRenderStatus.set(e,{rendered:!0,isEmpty:t.isEmpty})})}_setupPageLeaveListener(){this._pageManager.beforeUnload.on(()=>{this._logAdsToContentRatioData()})}_setupVideoListeners(){this._videoEventBus.videoPlayerAdded.on(e=>{e.forEach(e=>{this._videoPlayerElements.set(e._playerId,e)})})}_logAdsToContentRatioData(){let e=this._slots.get().filter(e=>e?.element&&e?.id),t=this._getCreativeData(e),n=this._getTotalContainerAreaData(e),r={totalVideoArea:n.totalVideoArea,totalContainerArea:n.totalContainerArea,totalPageArea:n.totalPageArea,mainContentHeight:n.mainContentHeight,adToPageRatio:n.adToPageRatio,preSlotInsertionMainContentHeight:n.preSlotInsertionMainContentHeight,preSlotInsertionTotalPageArea:n.preSlotInsertionTotalPageArea},i=E.buildRequestUrl(`event`,`AdsToContentRatioComponent`,`_logAdsToContentRatioData`,[r]).length,a=E.maxCloudFrontUrlSize-i-1e3;this._batchAndLogData(t,a,`creativeData`,`_logCreativeDataBatch`),this._batchAndLogData(n.videoData,a,`videoData`,`_logVideoDataBatch`),this._batchAndLogData(n.slotData,a,`slotData`,`_logSlotDataBatch`),E.fetchEvent(`AdsToContentRatioComponent`,`_logAdsToContentRatioData`,r)}_getCreativeData(e){return e.map(e=>{let t=this._slotRenderStatus.get(e.id)||{rendered:!1,isEmpty:null},n=t.rendered,r=n?wC(e.element):0,i=n?TC(e.element):0,a=n?this._isCreativeSticky(e):!1,o=i*r;return{id:e.id,width:i,height:r,area:o,isSticky:a,rendered:n,isEmpty:t.isEmpty}})}_getTotalContainerAreaData(e){let t=this._getSlotData(e),n=this._calculateTotalArea(t),r=this._getVideoContainerData(),i=this._calculateTotalArea(r),a=n+i,o=jC(),s=MC(),c=o*s,l=c>0?a/c:0,[u]=AC(this._dynamicAdsMapper.get(),this._adInjectionMap),d=u?.scrollHeight??0,f=this._cls.preSlotInsertionMeasurements,p=this._context.preSlotInsertionMeasurements,m=f?.mainContentHeight??p?.mainContentHeight??0,h=f?.totalPageArea??p?.totalPageArea??0;return{totalVideoArea:i,totalContainerArea:a,totalPageArea:c,mainContentHeight:d,adToPageRatio:l,slotData:t,videoData:r,preSlotInsertionMainContentHeight:m,preSlotInsertionTotalPageArea:h}}_getSlotData(e){return e.map(e=>{if(!e.element)return{id:e.id,width:0,height:0,area:0,isSticky:e.sticky};let{width:t,height:n}=e.element.getBoundingClientRect();return{id:e.id,width:Math.round(t),height:Math.round(n),area:Math.round(t*n),isSticky:e.sticky}})}_getVideoContainerData(){let e=[];return this._videoPlayerElements.forEach((t,n)=>{if(t._container){let r=this._createVideoElementData(t._container,n);r&&e.push(r)}if(t._playerContainer&&this._isVideoCollapsed(t)){let r=this._createVideoElementData(t._playerContainer,`collapsed-${n}`);r&&e.push(r)}}),e}_isVideoCollapsed(e){return e.collapseCollection?.collapseTimer?.isRunning??!1}_createVideoElementData(e,t){let{width:n,height:r}=e.getBoundingClientRect();return{player:t,width:Math.round(n),height:Math.round(r),area:Math.round(n*r)}}_calculateTotalArea(e){return e.reduce((e,t)=>e+t.area,0)}_isCreativeSticky(e){let t=e.element;return t?!![`adthrive-sticky`,`adthrive-sticky-container`,`adthrive-recipe-sticky-container`,`adthrive-sticky-sidebar`].some(e=>t.classList.contains(e)):!1}_batchAndLogData(e,t,n,r){if(e.length===0)return;let i=this._createBatches(e,t,n);i.forEach((e,t)=>{E.fetchEvent(`AdsToContentRatioComponent`,r,{batchIndex:t+1,totalBatches:i.length,[n]:e})})}_createBatches(e,t,n){let r=[],i=[],a=0,o=encodeURIComponent(JSON.stringify({batchIndex:0,totalBatches:1,[n]:[]})).length,s=t-o;for(let t of e){let e=encodeURIComponent(JSON.stringify(t)).length;a+e>s&&i.length>0&&(r.push([...i]),i=[],a=0),i.push(t),a+=e}return i.length>0&&r.push(i),r}get enabled(){return this._adsToContentRatioLoggingExperiment.result}};PC=w([D(`AdsToContentRatioComponent`),x(),N(0,b(NC)),N(1,b(Y)),N(2,b(jr)),N(3,b(pc)),N(4,b(X)),N(5,b(Kr)),N(6,b(CC)),N(7,b(pr)),N(8,b(W))],PC);let FC=e=>{let t=document.body,n=`adthrive-device-${e}`;if(!t.classList.contains(n))try{t.classList.add(n)}catch(e){E.error(`BodyDeviceClassComponent`,`init`,{message:e.message});let t=`classList`in document.createElement(`_`);E.error(`BodyDeviceClassComponent`,`init.support`,{support:t})}},IC=class extends I{constructor(e){super(),this._context=e}init(){FC(this._context.device)}};IC=w([D(`BodyDeviceClassComponent`),x(),N(0,b(W))],IC);let LC=class extends F{constructor(...e){super(...e),C(this,`_default`,!0)}init(){this._key=`BrandMetrics`,this._lookup=`BMETRICS`}};LC=w([S()],LC);let RC=class extends I{constructor(e,t,n){super(),this._brandMetricsExperiment=e,this._gam=t,this._prebidAuctionManager=n,C(this,`_url`,`https://cdn.brandmetrics.com/tag/aa466d868b2742ffa2cc31bb6341dc12/cafemedia.js`)}init(){this._prebidAuctionManager.bidsRequested.once(()=>{this._load()})}get enabled(){return this._brandMetricsExperiment.result}_load(){Ih(this._url).then(()=>this._monitorSurvey()).catch(()=>{})}_monitorSurvey(){window._brandmetrics=window._brandmetrics||[],window._brandmetrics.push({cmd:`_querySurvey`,val:{callback:(e,t)=>{e&&t&&t.measurementId&&this._gam.setTargeting({key:`bms`,value:[t.measurementId.toString()]})}}})}};RC=w([D(`BrandMetrics`),x(),N(0,b(LC)),N(1,b(Z)),N(2,b(dC))],RC);let zC=class extends I{constructor(e){super(),this._footerConfigEventBus=e}init(){this._footerConfigEventBus.comscoreInitialized.on(e=>{e&&this._footerConfigEventBus.footerElementAdded.emit({order:3,element:`<span>A Raptive Partner Site</span>`})},{handleEventsAlreadyEmitted:!0})}};zC=w([x(),N(0,b(Pr))],zC);let BC=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`TopicsAPI`,this._lookup=`TPCAPI`}isEnabled(){return super.isEnabled()&&xr()}};BC=w([S()],BC);let VC=e=>new Promise(t=>setTimeout(t,e)),HC=class extends I{constructor(e,t,n,r,i){super(),this._config=e,this._context=t,this._gam=n,this._browsingTopicsAPIExperiment=r,this._browsingTopicsAPIEventBus=i,C(this,`_topics`,[]),C(this,`_topicsUrl`,`https://ads.adthrive.com/api/v2/topics`)}get enabled(){return!this._config.gdpr.enabled&&!this._config.ccpa.userOptedOut&&this._context.browsingTopicsSupported&&this._browsingTopicsAPIExperiment.result}get topics(){return this._topics}async start(){let e=await this.fetchTopics(),t=e.map(e=>`${e.id}`);t.length>0&&this._gam.setTargetingFlag(`topicapi`,t),this._topics=e,this._context.browsingTopics=e,this._browsingTopicsAPIEventBus.topicsReceived.emit(e)}async fetchTopics(){try{return(await(await window.fetch(`${this._topicsUrl}?ts=${Date.now()}`,{browsingTopics:!0})).json()).topics??[]}catch{return[]}}async pollForTopics(){let e=await this.fetchTopics();return e.length===0?(await VC(15e3),this.pollForTopics()):e}};HC=w([D(`BrowsingTopicsAPIComponent`),x(),N(0,b(J)),N(1,b(W)),N(2,b(Z)),N(3,b(BC)),N(4,b(bc))],HC);let UC=(e,t,n,r,i)=>{let a=document.createElement(e);return t&&a.setAttribute(`id`,t),n&&(a.className=n),r&&(a.innerHTML=r),i&&(a.href=i,e===`a`&&a.addEventListener(`click`,e=>{e.preventDefault()})),a},WC=()=>{let e=window.location.pathname?.toLowerCase()??``;return[`/privacy`,`/policy`,`/terms`,`/policies`,`/legal`,`/disclaimer`,`/disclosure`].some(t=>e.includes(t))},GC=class extends I{constructor(e,t,n,r,i){super(),this._config=e,this._consentEventBus=t,this._context=n,this._spaEventBus=r,this._gam=i,C(this,`_didSetupListeners`,!1),C(this,`_deviceAccess`,!1),C(this,`_deletionQueue`,[]),C(this,`ccpaRequired`,this._config.ccpa.required),C(this,`privacyString`,this._config.ccpa.privacyString),C(this,`ccpaNotApplicable`,this._config.ccpa.ccpaNotApplicable),C(this,`ccpaOptIn`,this._config.ccpa.ccpaOptIn),C(this,`ccpaOptOut`,this._config.ccpa.ccpaOptOut),C(this,`ccpaOptOutText`,this._config.ccpa.optOutText),C(this,`ccpaOptInText`,this._config.ccpa.optInText),C(this,`usCmpRequired`,this._config.ccpa.usCmpRequired),C(this,`gpcEnabled`,!!this._config.ccpa.gpcEnabled),C(this,`gpcUpdated`,!1),C(this,`globalPrivacyControl`,window.navigator.globalPrivacyControl),C(this,`ccpaLinkText`,this.privacyString===``||this.privacyString===this.ccpaOptIn?this.ccpaOptOutText:this.ccpaOptInText),C(this,`modal`,void 0),C(this,`modalContent`,void 0),C(this,`ccpaATag`,void 0),C(this,`ccpaOptOutDiv`,void 0),C(this,`ccpaOptOutDivId`,`adthrive-ccpa-link`)}init(){if(window.__uspapi=this.uspapi.bind(this),this.ccpaRequired){this._createModalElements(),this._addLocatorFrame(),window.__uspapi(`registerDeletion`,1,this._deleteData.bind(this)),this.setGpcString();let e=this.gpcEnabled||this._config.ccpa.privacyString===this.ccpaOptOut?this.ccpaOptOut:this.ccpaOptIn;this.setPrivacyString(e),this._setDeviceAccess(),this._setupListeners();let t=document.querySelector(`#${this.ccpaOptOutDivId}`),n=this._shouldDisplayOptOutFooterLink();!t&&!this._config.act25.required&&(this.addOptOutElements(n),this.injectFooter());let r=lr(`health-directed-treatment`);this._context.country===`US`&&r&&this._gam.setTargetingFlag(`hmt`,[dr(this._context.region)?`1`:`0`])}else this.setPrivacyString(this.ccpaNotApplicable);this.usCmpRequired&&this._consentEventBus.usCmpConsentCaptured.on(e=>{this.setPrivacyString(e?this.ccpaOptIn:this.ccpaOptOut),this._setDeviceAccess()},{handleEventsAlreadyEmitted:!0}),this._consentEventBus.showCCPAModal.on(()=>{this.ccpaRequired&&this._config.ccpa.privacyString===this.ccpaOptIn&&this.optUserInOrOut()},{handleEventsAlreadyEmitted:!0})}_createModalElements(){this.modal=UC(`div`,`adthrive-ccpa-modal`,`adthrive-ccpa-modal`),this.modalContent=UC(`div`,`adthrive-ccpa-modal-content`,`adthrive-ccpa-modal-content`),this.ccpaATag=UC(`a`,`ccpaTag`,void 0,this.ccpaLinkText,`/`)}setPrivacyString(e,t=!1){let n=this.ccpaRequired&&this.privacyString===this.ccpaNotApplicable,r=!this.ccpaRequired&&this.privacyString!==this.ccpaNotApplicable;(e||t===!0||n||r||this.gpcUpdated)&&(this._setPrivacyCookie(e),this.privacyString=e)}_setPrivacyCookie(e){let t=new Date(2147483647*1e3).toUTCString();document.cookie=`usprivacy=${e};path=/;expires=${t}`}setGpcString(){(this.gpcEnabled===null||this.gpcEnabled===!1)&&this.globalPrivacyControl?(L.setInternalLocalStorage(`adthrive_gpc`,`${this.globalPrivacyControl}`),this.gpcEnabled=!!`${this.globalPrivacyControl}`,this.gpcUpdated=!0):this.gpcEnabled===!0&&!this.globalPrivacyControl&&(L.deleteLocalStorage(`adthrive_gpc`),this.gpcEnabled=this.globalPrivacyControl,this.gpcUpdated=!0)}uspapi(e,t,n){switch(e){case`performDeletion`:this._deletionQueue.forEach(e=>e());break;case`registerDeletion`:this._deletionQueue.push(n);break;case`getUSPData`:{let r={command:e,version:t,uspString:L.readExternalCookie(`usprivacy`)};return n(r,!0)}default:return null}}_addLocatorFrame(){if(document.getElementById(`__uspapiLocator`)===null){let e=document.createElement(`iframe`);e.style.display=`none`,e.id=`__uspapiLocator`,e.name=`__uspapiLocator`,document.body.appendChild(e)}}_setCCPAEventListener(e,t,n,r){n&&this.modal?n.addEventListener(`click`,(()=>{e&&this.optUserInOrOut(),t&&this.modal&&(this.modal.style.display=`none`)}).bind(this)):r&&this.modal&&r.addEventListener(`click`,(e=>{e.target==this.modal&&(this.modal.style.display=`none`)}).bind(this))}optUserInOrOut(){this.privacyString===this.ccpaOptIn&&this.modal&&this.ccpaATag?(this.setPrivacyString(this.ccpaOptOut,!0),window.__uspapi(`performDeletion`,1),this.modal.style.display=`block`,this.ccpaATag.textContent=this.ccpaOptInText,this._config.ccpa.userOptedOut=!0):(this.setPrivacyString(this.ccpaOptIn,!0),this.ccpaATag&&(this.ccpaATag.textContent=this.ccpaOptOutText),this._config.ccpa.userOptedOut=!1),this._config.ccpa.consentChange.emit(this.privacyString),this._setDeviceAccess()}createCCPAModal(){if(!this.modal||!this.modalContent){E.error(`CCPAComponent`,`createCCPAModal`,`Attempt to access modal`);return}document.body.append(this.modal),this.modal.append(this.modalContent),this._setCCPAEventListener(!1,!0,void 0,window);let e=UC(`div`,`adthrive-ccpa-modal-close-btn-container`,void 0,`<span>&#10005;</span>`);this.modalContent.append(e),this._setCCPAEventListener(!1,!0,e);let t=UC(`div`,`adthrive-ccpa-modal-title`,void 0,this._config.ccpa.optOutText);this.modalContent.append(t);let n=UC(`span`,`adthrive-ccpa-modal-language`,void 0,`You have chosen to opt-out of the sale or sharing of your information from this site and any of its affiliates. To opt back in please click the "Customize my ad experience" link.<br>
    <br>This site collects information through the use of cookies and other tracking tools. Cookies and these tools do not contain any information that personally identifies a user, but personal information that would be stored about you may be linked to the information stored in and obtained from them. This information would be used and shared for Analytics, Ad Serving, Interest Based Advertising, among other purposes.<br>
    <br>For more information please visit this site's Privacy Policy.`);this.modalContent.append(n)}_createModalLowerButtons(){if(!this.modalContent){E.error(`CCPAComponent`,`_createModalLowerButtons`,`Attempt to access modalContent`);return}let e=UC(`div`,void 0,`adthrive-ccpa-lower-buttons-container`);this.modalContent.append(e);let t=UC(`div`,`adthrive-ccpa-modal-cancel-btn`,`adthrive-ccpa-modal-btn`,`CANCEL`);e.append(t),this._setCCPAEventListener(!0,!0,t);let n=UC(`div`,`adthrive-ccpa-modal-continue-btn`,`adthrive-ccpa-modal-btn`,`CONTINUE`);e.append(n),this._setCCPAEventListener(!1,!0,n)}addOptOutElements(e=!0){if(!this.ccpaATag){E.error(`CCPAComponent`,`addOptOutElements`,`Attempt to access ccpaTag`);return}this.ccpaOptOutDiv=UC(`div`,this.ccpaOptOutDivId,`adthrive-ccpa-link`,`Information from your device can be used to personalize your ad experience. <br><br>`),this.ccpaOptOutDiv.style.display=e&&!this._config.usCMP.required?`block`:`none`,this.ccpaOptOutDiv.appendChild(this.ccpaATag),this._setCCPAEventListener(!0,!1,this.ccpaATag),this.createCCPAModal(),this._createModalLowerButtons()}_shouldDisplayOptOutFooterLink(){return this._isHomeOrFPV()||WC()}_isHomeOrFPV(){return window.location.pathname===`/`||this._context.isFirstPageview}_setupListeners(){!this._didSetupListeners&&this._config.adOptions.spa&&(this._spaEventBus.routeChanged.once(()=>{this.init();let e=document.querySelector(`#${this.ccpaOptOutDivId}`),t=this._shouldDisplayOptOutFooterLink()?`block`:`none`;e&&(e.style.display=t)}),this._didSetupListeners=!0)}_deleteData(){}_setDeviceAccess(){this._deviceAccess=this.privacyString===this.ccpaOptIn}injectFooter(){Dr(`adt_clickwrap_footer`)===null&&this.ccpaOptOutDiv&&this._config.footer.elements.push({order:1,element:this.ccpaOptOutDiv})}};GC=w([D(`CCPAComponent`),x(),N(0,b(J)),N(1,b(un)),N(2,b(W)),N(3,b(xc)),N(4,b(Z))],GC);let KC=class extends I{constructor(e,t,n,r){super(),this._config=e,this._gam=t,this._context=n,this._cls=r,C(this,`debug`,!1),this.debug=this._context.debug}_isInApp(){return _h()||gh()||mh()}_getBrowserCharacter(e=!1){return this._isInApp()&&e?`a`:Ct()?`c`:Tt()?`s`:bt()?`f`:xt()?`i`:vt()?`e`:`o`}_getOSAndBrowserValue(){let e=Po().slice(0,1).toLowerCase();if(![`m`,`w`,`i`,`a`].includes(e))return`o`;let t=new Set([`m`,`a`]),n=this._getBrowserCharacter(!t.has(e)),r=`${e}${n}`;return new Set([`mc`,`ms`,`mf`,`wc`,`wi`,`we`,`wf`,`ws`,`ic`,`is`,`ia`,`io`,`ac`,`aa`,`ao`]).has(r)?r:`o`}_getConfigTargeting(){let e=this._config,t=this._context,n=this.debug,r=this._getOSAndBrowserValue(),i=[...this._getConfigGoogleAdManagerTargeting(e.gam.targeting),{key:`abgroup`,value:e.abGroup.groups},{key:`mvab`,value:e.abGroup.multiGroups},{key:`pubab`,value:e.pubAbGroup.groups},{key:`idho_p`,value:e.idho.percentages},{key:`bucket`,value:n?`unsupported`:t.bucket},{key:`sens`,value:e.site.sensitiveCategories},{key:`domain`,value:t.domain},{key:`plugin`,value:t.plugin},{key:`hi_au`,value:e.adTypes.enabledMinified},{key:`vpwxvph`,value:`${window.innerWidth}x${window.innerHeight}`},{key:`ri`,value:t.ri},{key:`st`,value:t.salesThrottle},{key:`rsi`,value:t.rsi},{key:`pvk`,value:t.pageviewKey},{key:`sess`,value:t.sessionKey},{key:`fab`,value:n?`unsupported`:t.bucket},{key:`branch`,value:t.branch},{key:`deployment`,value:n||t.invalidTraffic?`unsupported`:t.deployment},{key:`doba`,value:e.displayOpenBidding.bidders},{key:`gptv`,value:window.googletag.getVersion()},{key:`id_region`,value:e.locale.targetingValue},{key:`osb`,value:r}];return e.hbho.filteredBidders.length&&i.push({key:`hbho`,value:e.hbho.filteredBidders}),e.vbho.filteredBidders.length&&i.push({key:`vbho`,value:e.vbho.filteredBidders}),e.prebid.ayServerEnabled&&i.push({key:`enrch_grp`,value:`${e.audienceTargeting.ayEnrichmentGroup}`}),e.gam.isThirdPartyGam&&i.push({key:`rp_site`,value:this._config.site.id}),i}_getConfigGoogleAdManagerTargeting(e){let t=`verticals`,n=[];return e.forEach(e=>{e.key===t?n.push({key:t,value:this._fixGamVerticalsValue(e.value)}):n.push({key:e.key,value:e.value})}),n}_fixGamVerticalsValue(e){if(!Array.isArray(e))return this._fixGamVerticalsValue([e])[0];let t=new RegExp(/[";'\^=\(\)!<>\+\[\]#,\*~`]/,`g`);return e.map(e=>e.replace(t,``).replace(/&/g,`and`))}getConditionalTargeting(){let e=[],t=this._context,n=this._config.site,r=this._config.ccpa;return n.sensCategoriesOff.length&&e.push({key:`sens_off`,value:n.sensCategoriesOff}),t.connectionTargeting.length&&e.push({key:`connection`,value:t.connectionTargeting}),r.required&&e.push({key:`ccpaOptOut`,value:r.userOptedOut?`1`:`0`}),e}_getRefinedCountryOSandBrowserValues(){let e=this._config,t=e.floors.os,n=e.floors.browser||`*`,r=e.floors.country,i=[`Chrome`,`Safari`,`*`].includes(n),a=r&&r!==`*`?r:this._context.country||`other`,o=t&&t!==`*`?t:Po(),s=Nt()===`Others`?`other`:Nt(),c=i?s:n;return o.toLowerCase().includes(`mac`)&&(o=`Macintosh`),o.toLowerCase().includes(`ios`)&&(o=`Apple iOS`),{browser:c,os:o,country:a}}setConditionalFlagTargeting(){let e=this._context,t=Pt(),n=this._config.prebid.s2s.distributedBidders,{browser:r,os:i,country:a}=this._getRefinedCountryOSandBrowserValues();if(this._gam.setTargetingFlag(`co`,[a]),this._gam.setTargetingFlag(`os`,[i]),this._gam.setTargetingFlag(`br`,[r]),`cookieDeprecationLabel`in navigator&&this._gam.setTargetingFlag(`cookdep`,[this._config.fledge.cookieDeprecationLabel??``]),e.invalidTraffic&&this._gam.setTargetingFlag(`bot`,e.invalidTraffic),e.adsMinLoadDuration&&this._gam.setTargetingFlag(`adsmnche`,e.adsMinLoadDuration),this._config.gdpr.enabled&&this._gam.setTargetingFlag(`gdpr`,[`1`]),this._config.locale.region&&this._gam.setTargetingFlag(`region`,[this._config.locale.region]),Pt()!==null&&this._gam.setTargetingFlag(`brwsrv`,[`${t}`]),this._config.adOptions.pmp&&this._gam.setTargetingFlag(`pmp_elig`,[`1`]),It()&&this._config.adTypes.largeFormatsDesktop&&this._gam.setTargetingFlag(`lf_elig`,[`1`]),!It()&&this._config.adTypes.largeFormatsMobile&&this._gam.setTargetingFlag(`lf_elig`,[`1`]),this._cls&&(this._gam.setTargetingFlag(`clson`,[String(!!this._cls.injectedFromPlugin)]),this._gam.setTargetingFlag(`clsBranch`,[this._cls.branch||``]),this._gam.setTargetingFlag(`clsBucket`,[this._cls.bucket||``])),e.integration&&this._gam.setTargetingFlag(`integration`,[e.integration]),e.deliveryVersion&&this._gam.setTargetingFlag(`lmdv`,[e.deliveryVersion]),e.isWordPressLogin&&this._gam.setTargetingFlag(`wpadm`,[`1`]),this._config.trafficShaping.active?this._gam.setTargetingFlag(`ts`,[this._config.trafficShaping.modelVersion]):this._config.trafficShaping.experimentActive&&this._gam.setTargetingFlag(`ts`,[`noFile`]),n){let e=n.rpbsBidders.filter(e=>!ui.has(e)).map(e=>ci[e]),t=n.ayBidders.filter(e=>!ui.has(e)).map(e=>ci[e]);this._gam.setTargetingFlag(`db_r`,e,!0),this._gam.setTargetingFlag(`db_ay`,t,!0)}}init(){Z.pushToQueue(()=>{this._gam.setTargeting([...this._getConfigTargeting(),...this.getConditionalTargeting()]),this.setConditionalFlagTargeting()})}};KC=w([D(`ConfigTargetingComponent`),x(),N(0,b(J)),N(1,b(Z)),N(2,b(W)),N(3,b(pr))],KC);let qC=class extends I{constructor(e,t){super(),this._slots=e,this._gamEventBus=t}init(){this._gamEventBus.slotRenderEnded.on(e=>this.confirmedClickOverlay(e))}confirmedClickOverlay({event:e,slotId:t}){let n=this._slots.get(t);n&&Z.pushToQueue(()=>{let{id:t,location:r,sequence:i,nref:a}=n.getTargetingMap(),o=this.confirmedClickStatus(this._slots.get(e.slot.getSlotElementId()));Ay({event:e,ignoreOtherCompanyIds:!0})&&o&&E.event(`confirmedClickOverlay`,`status`,{id:t,location:r,sequence:i,nref:a,confirmedClick:o})})}confirmedClickStatus(e){let t=[`common_15click_overlay`,`common_15click_anchor`];try{let n=e?.element.querySelectorAll(`iframe[id^=google_ads_iframe]`),r;return n&&n?.length>0&&(r=n[0]),t.some(e=>r?.contentDocument?.getElementById(e)!=null)}catch(e){E.error(`ConfirmedClickComponent`,`confirmedClickStatus`,e)}return!1}};qC=w([D(`ConfirmedClicksComponent`),x(),N(0,b(Y)),N(1,b(X))],qC);let JC=class extends I{constructor(e){super(),this._config=e,C(this,`_customVendorList`,void 0),C(this,`_gtmGreenLightSent`,!1),C(this,`_handleConsentChange`,e=>{e&&!this._isUserOptedIn(e)||e&&this._sendGTMGreenLight()}),this._customVendorList=this._config.adOptions.consentMode.customVendorList}init(){this.enabled&&(this._sendGTMGreenLightIfOptedIn(),this._subscribeToConsentChanges())}get enabled(){return this._config.adOptions.consentMode.enabled&&!this._config.gdpr.enabled}_sendGTMGreenLight(){this._gtmGreenLightSent||=(window.gtag??=function(...e){(window.dataLayer??=[]).push(e)},window.gtag(`consent`,`update`,pn),(window.dataLayer??=[]).push({event:`cmpEvent`,cmpConsentVendors:this._customVendorList}),!0)}_sendGTMGreenLightIfOptedIn(){this._config.ccpa.userOptedOut||this._sendGTMGreenLight()}_subscribeToConsentChanges(){this._config.ccpa.consentChange.on(e=>this._handleConsentChange(e))}_isUserOptedIn(e){return e===this._config.ccpa.ccpaOptIn}};JC=w([D(`GoogleConsentModeComponent`),S(),N(0,b(J))],JC);let YC=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`ContentSizeLogging`,this._lookup=`CSL`}};YC=w([S()],YC);let XC=class extends I{constructor(e,t,n,r,i,a,o){super(),this._dynamicAdsMapper=e,this._adInjectionMap=t,this._contentSizeLoggingExperiment=n,this._slotManager=r,this._slotManagerEventBus=i,this._clsOptimizedAds=a,this._site=o,C(this,`_slotsForMainContent`,new Map),C(this,`_slotsForEnd`,new Map),C(this,`_mainContentSlot`,new Set([H.Content,H.Recipe])),C(this,`_initMainContentHeight`,null)}async start(){let[e]=AC(this._dynamicAdsMapper.get(),this._adInjectionMap);this._initMainContentHeight=e?.scrollHeight??0,this._calculateAndLogTotalSlotHeight(),await Ah().then(()=>{E.event(`ContentSizeLoggingComponent`,`init`,{fullPageHeight:jC(),mainContentHeight:this._initMainContentHeight}),this._logImageData()})}_calculateAndLogTotalSlotHeight(){this._slotManagerEventBus.displaying.once(()=>{this._slotManager.getSlots().forEach(e=>{if(this._shouldAddHeightToTotal(e)){let t=this._clsOptimizedAds.getDivHeight(e.name,z()?`phone`:`desktop`);this._mainContentSlot.has(e.location)?this._slotsForMainContent.set(e.id,t):this._slotsForEnd.set(e.id,t)}this._logSlotHeights()})})}_logSlotHeights(){let e=Array.from(this._slotsForMainContent.values()).reduce((e,t)=>e+t,0),t=e+Array.from(this._slotsForEnd.values()).reduce((e,t)=>e+t,0);E.event(`ContentSizeLoggingComponent`,`_logSlotHeights`,{mainAdSlotHeight:e,fullPageAdSlotHeight:t})}_shouldAddHeightToTotal(e){return!e.infinite&&!e.element.classList.contains(`adthrive-slicksearch`)&&!this._slotsForMainContent.has(e.name)&&!this._slotsForEnd.has(e.name)}_logImageData(){if(typeof performance>`u`)return;let e=performance.getEntriesByType(`resource`),t=0,n=0,r=0,i=0;e.forEach(e=>{e.initiatorType===`img`&&(e.encodedBodySize===0?n++:t++,r+=e.encodedBodySize,i+=e.decodedBodySize)});let a={zeroByteImagesCount:n,nonZeroByteImageCount:t,imagesCompressedSize:`${(r/(1024*1024)).toFixed(2)} MB`,imagesUncompressedSize:`${(i/(1024*1024)).toFixed(2)} MB`};if(JSON.stringify(a).length>8e3){E.error(`ContentSizeLoggingComponent`,`_logImageData`,`log size too large`,`siteId: ${this._site.id}`,`pageUrl: ${window.location.href}`);return}E.event(`ContentSizeLoggingComponent`,`_logImageData`,a)}get enabled(){return this._contentSizeLoggingExperiment.result}};XC=w([D(`ContentSizeLoggingComponent`),x(),N(0,b(Kr)),N(1,b(CC)),N(2,b(YC)),N(3,b(eS)),N(4,b($f)),N(5,b(Nr)),N(6,b(Zi))],XC);let ZC=e=>{let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset,bottom:t.bottom+window.pageYOffset,right:t.right+window.pageXOffset,width:t.right-t.left,height:t.bottom-t.top}},QC=e=>{let t=e.getBoundingClientRect(),n=window.innerHeight;return t.bottom<0?-Math.ceil(Math.abs(t.bottom)/n):t.top>n?Math.ceil((t.top-n)/n):0};var $C=class{constructor(e,t,n,r,i,a=!1,o=8,s,c=[],l=!0,u=!1,d=``){this.location=e,this.sequence=t,this.sizes=n,this.element=r,this.sticky=i,this.lazy=a,this.auctionPriority=o,this.stickyOverlapSelector=s,this.special=c,this.enabledForAuction=l,this.infinite=u,this.thirdPartyAdUnitName=d,C(this,`googleTagSlot`,void 0),C(this,`refreshPaused`,!1),C(this,`refreshTimeout`,void 0),C(this,`isRefreshing`,!1),C(this,`closed`,!1),C(this,`viewableSince`,void 0),C(this,`viewableDuration`,0),C(this,`slotFullyRenderedSince`,void 0),C(this,`slotFullyRenderedDuration`,0),C(this,`refreshInterval`,void 0),C(this,`outOfViewIO`,!0),C(this,`outOfViewGPT`,!0),C(this,`alwaysInView`,!1),C(this,`displayed`,!1),C(this,`refreshCount`,0),C(this,`viewability`,0),C(this,`highlyViewable`,!1),C(this,`hvp`,0),C(this,`servedPrebidBidResponse`,void 0),C(this,`noAdRefreshCount`,void 0),C(this,`bidPoolId`,void 0),C(this,`lazyDisabled`,!1),C(this,`transactionId`,``),C(this,`stickyOutstreamErrorCount`,void 0),C(this,`stickyOutstreamErrorLogged`,void 0),C(this,`stickyOutstreamRenderedTimestamp`,void 0),C(this,`stickyOutstreamShortVideo`,!1),C(this,`stickyOutstreamLastAdErrored`,!1),C(this,`stickyOutstreamRefreshTimeout`,5e3),C(this,`passiveBidPoolId`,void 0),C(this,`multiformat`,!1),C(this,`multiformatNative`,!1),C(this,`multiformatOutstream`,!1),C(this,`outstreamEnabled`,!1),C(this,`nativeEnabled`,!1),C(this,`googleTagSlotReadyEmitter`,new T),C(this,`googleTagSlotReady`,!1),C(this,`renderedOutsideGAM`,!1),C(this,`mainAuctionWidth`,void 0),C(this,`mainAuctionHeight`,void 0),C(this,`slotAppBids`,void 0),C(this,`rebuild`,!1),C(this,`impressionId`,Qo()),C(this,`stickyOutstreamTimeRemaining`,0),C(this,`rbTotalBidsCompared`,new Set),C(this,`rbTotalBidsFiltered`,new Set),C(this,`rbWinningBidsFiltered`,new Set),C(this,`rbBidsFilteredByADomain`,new Set),this.location===H.Video_StickyOutstream&&(this.stickyOutstreamErrorCount=0,this.noAdRefreshCount=0,this.stickyOutstreamErrorLogged=!1)}get id(){return this.element.id}get isSticky(){return this.sticky}get hasHighViewability(){return this.sticky||this.location===H.Recipe}refreshImpressionId(){this.impressionId=Qo()}setHighlyViewable(e){let t=this.viewability>=Number(e&&e.hvThreshold);this.highlyViewable=this.lazy||t}setBidPoolId(e){this.location.includes(H.Sidebar)?this.generateSidebarBidPoolId(e):this.generateContentBidPoolId(e),this.setSlotTargetingFlag(`bpe`,[this.bidPoolId?`1`:`0`])}generateSidebarBidPoolId(e){let t=this.lazy,n=this.sequence,r=`${this.location}_${this.sequence}`;if(n&&!Ca.includes(r)){let n=t?t?`_Lazy`:``:`_Nonlazy`;if(this.sizes.length<=2||!e.includes(this.location)||!n)return;this.bidPoolId=`${this.location}_BPID${n}`;return}}generateContentBidPoolId(e){let t=this.lazy,n=this.location.toLowerCase().includes(`content`),r=this.sequence,i=n&&r&&r>=4&&!t?`_Nonlazy`:n&&t?`_Lazy`:``;!e.includes(this.location)||n&&!i||(this.bidPoolId=`${this.location}_BPID${i}`)}setPassiveBidPoolId(){let e=this.lazy,t=this.location,n=`${t}_${this.sequence}`,r=t.includes(H.Content),i=t.includes(H.Sidebar)&&!Ca.includes(n);!e&&(r||i)&&(this.passiveBidPoolId=`${t}_BPID_Lazy`)}isHighlyViewable(){return this.highlyViewable||this.lazy||this.refreshCount>0}get isAboveTheFold(){return ZC(this.element).top>1e3}hasSize([e,t]){return this.sizes.some(([n,r])=>e===n&&t===r)}get name(){return[this.location,this.sequence].filter(uc).join(`_`)}get placementMapName(){return this.location===H.Content&&this.sequence&&this.sequence>9?H.Content_9:this.name.includes(H.Below_Post)?H.Below_Post:this.location===H.Sidebar&&this.sequence&&this.sequence>9?H.Sidebar_9:this.location===H.Recipe&&this.sequence&&this.sequence>5?H.Recipe_2:this.name}pushToQueue(e){let t=window.googletag;t&&t.cmd&&t.cmd.push(e)}setViewability(e){let t=e.adViewability.length&&e.adViewability[0].home!==void 0&&e.adViewability[0].depth!==void 0&&e.adViewability[0].lazy!==void 0,n=window.location.pathname===`/`?`1`:`0`,r=L.readInternalLocalStorage(`adthrive_session_fpv`),i=r===!0||r===null?`1`:`0`;e.adViewability.filter(r=>r.speed===e.speed&&window.innerWidth>=r.width[0]&&(!r.width[1]||window.innerWidth<=r.width[1])&&(!t||r.home===n&&r.depth===i&&this.lazy===r.lazy)).forEach(e=>{Object.keys(e.adUnits).forEach(t=>{t===this.name?this.viewability=e.adUnits[t]:this.location===H.Content&&this.sequence>9?this.viewability=e.adUnits[H.Content]:this.location===H.Below_Post&&this.sequence>1&&(this.viewability=e.adUnits[H.Below_Post])})})}clearTargeting(e){this.googleTagSlot?this.googleTagSlot.clearTargeting(e):E.error(`Slot`,`setTargeting`,`Attempted to clear targeting before slot was defined`,e)}setTargeting(e){this.googleTagSlotReady?this.applyTargeting(e):this.googleTagSlotReadyEmitter.once(()=>{this.applyTargeting(e)})}applyTargeting(e){this.pushToQueue(()=>{if(this.googleTagSlot){let t=Array.isArray(e)?e:[e];for(let e of t)this.googleTagSlot.setTargeting(e.key,e.value)}else E.error(`Slot`,`setTargeting`,`Attempted to set targeting before slot was defined`,e)})}setSlotTargetingFlag(e,t,n=!1){let r=()=>{if(this.googleTagSlot){let r=(this.googleTagSlot.getTargeting(`flag_slot`)||[]).filter(t=>{let[r]=t.split(`:`);return!n||r!==e});this.googleTagSlot.setTargeting(`flag_slot`,[...r,...t.map(t=>`${e}:${t}`)])}};t&&t.length>0&&this.pushToQueue(()=>r())}clearSlotTargetingFlag(e){let t=()=>{if(this.googleTagSlot){let t=(this.googleTagSlot.getTargeting(`flag_slot`)||[]).filter(t=>{let[n]=t.split(`:`);return!e.includes(n)});this.googleTagSlot.setTargeting(`flag_slot`,[...t])}};this.pushToQueue(()=>t())}getTargeting(e){return this.googleTagSlot?this.googleTagSlot.getTargeting(e):(E.error(`Slot`,`getTargeting`,`Attempted to get targeting before slot was defined`,e),[])}setTransactionId(e){this.transactionId=e}getTargetingMap(){if(this.googleTagSlot){let e=this.googleTagSlot;return e.getTargetingKeys().reduce((t,n)=>(t[n]=e.getTargeting(n),t),{})}else E.error(`Slot`,`getTargetingMap`,`Attempted to get targeting before slot was defined`);return{}}setSlotAppBids(e,t){let n=e.filter(e=>e.adUnitCode===t).map(e=>e.adId);n.length&&(this.slotAppBids=n)}getSlotAppBids(){return this.slotAppBids}addRequestTypeSlotFlag(e){if(this?.getSlotAppBids()?.length&&this?.googleTagSlot){let t=this.getSlotAppBids();this.googleTagSlot.getTargeting(e).some(e=>t?.includes(e))&&this.setSlotTargetingFlag(`reqtype`,[`app`],!0)}}getPositionFromViewport(){return QC(this.element)}updateTargetingForRaptiveBlocking(){this.googleTagSlot&&(this.setSlotTargetingFlag(`bc`,[this.rbTotalBidsCompared.size.toString()],!0),this.setSlotTargetingFlag(`fc`,[this.rbTotalBidsFiltered.size.toString()],!0),this.setSlotTargetingFlag(`wf`,[this.rbWinningBidsFiltered.size.toString()],!0),this.setSlotTargetingFlag(`adf`,[this.rbBidsFilteredByADomain.size.toString()],!0))}};let ew=class extends I{constructor(e,t,n,r,i,a){super(),this._slotManager=e,this._slotEventBus=t,this._slotManagerEventBus=n,this._pageManager=r,this._jumpToSlotManager=i,this._gamEventBus=a,C(this,`_destroyedSlots`,new Map),C(this,`_observerForDestroyingSlots`,null),C(this,`_observerForRestoringSlots`,null),C(this,`_lastScroll`,window.scrollY),C(this,`_featureRolloutEnabled`,!1),C(this,`_slotFilter`,void 0),C(this,`_shouldRestoreSlots`,!0),C(this,`_slotsRenderedFor30Seconds`,new Set),C(this,`_destructionVpThreshold`,-3),this._featureRolloutEnabled=cn.isRolloutEnabled(`ios-manage-content-slots`);let o=cn.getSiteRolloutConfig(`ios-manage-content-slots`);`restoreSlots`in o&&typeof o.restoreSlots==`boolean`&&(this._shouldRestoreSlots=o.restoreSlots);let s=e=>e.location===H.Content;this._slotFilter=this._featureRolloutEnabled?e=>!!s(e):e=>!!(s(e)&&e.sequence&&e.sequence<=3)}init(){this._shouldRestoreSlots?this._listenForSlotsAdded():this._listenForSlotsRendered(),this._featureRolloutEnabled?this._setScrollListenerAndCreateObservers():this._jumpToSlotManager.enabled&&(this._jumpToSlotManager._onJumpToRecipeTrackerClicked.once(()=>{this._setScrollListenerAndCreateObservers()}),this._jumpToSlotManager.preventedSlotsFromBeingAdded.on(e=>{e.forEach(e=>{this._storeSlotDataAndObserveForRestore(e.element,e)})}))}_setScrollListenerAndCreateObservers(){this._pageManager.scroll.on(Ao(()=>this._handleScroll.call(this,window.scrollY),100)),this._observerForDestroyingSlots=this._createObserverForDestroyingSlots(),this._shouldRestoreSlots&&(this._observerForRestoringSlots=this._createObserverForRestoringSlots())}_listenForSlotsAdded(){this._slotManagerEventBus.added.on(e=>{this._slotManager.getSlots(e).forEach(e=>{this._slotFilter(e)&&this._observerForDestroyingSlots&&!this._destroySlotIfAboveByTwoViewports(e)&&this._observerForDestroyingSlots.observe(e.element)})})}_listenForSlotsRendered(){this._gamEventBus.slotRenderEnded.on(({slotId:e})=>{let t=this._slotManager.getSlot(e);t&&t.location===H.Content&&setTimeout(()=>{t.getPositionFromViewport()<=this._destructionVpThreshold?this._destroySlot(t.element,t):(this._slotsRenderedFor30Seconds.add(t.id),this._observerForDestroyingSlots?.observe(t.element))},3e4)})}async _handleScroll(e){let t=(e-this._lastScroll)/window.innerHeight;if(t<=-1)for(let[e,t]of this._destroyedSlots){let n=document.getElementById(e);n&&QC(n)>=0&&await this._restoreSlot(n,t)}else t>=1&&this._slotManager.getSlots().forEach(e=>this._slotFilter(e)&&this._destroySlotIfAboveByTwoViewports(e));this._lastScroll=e}_destroySlotIfAboveByTwoViewports(e){return e.getPositionFromViewport()<=-3&&!this._destroyedSlots.has(e.id)?(this._destroySlot(e.element,e),!0):!1}_createObserverForDestroyingSlots(){return new IntersectionObserver(this._processSlotsForDeletion.bind(this),{root:null,rootMargin:`300% 0px -300% 0px`,threshold:[0]})}_createObserverForRestoringSlots(){return new IntersectionObserver(e=>{this._processSlotsForRestoration(e).catch(e=>E.error(`ContentSlotsIntersectionObserverComponent`,`_processSlotsForRestoration`,e))},{root:null,rootMargin:`200% 0px -200% 0px`,threshold:[0]})}_storeContentSlotConfig(e,t){let{location:n,sequence:r,sticky:i,lazy:a,stickyOverlapSelector:o,special:s,auctionPriority:c,element:l,sizes:u,infinite:d,thirdPartyAdUnitName:f}=t;this._destroyedSlots.set(e,{location:n,sequence:r,sticky:i,lazy:a,stickyOverlapSelector:o,special:s,auctionPriority:c,element:l,sizes:u,infinite:d,thirdPartyAdUnitName:f})}_processSlotsForDeletion(e){e.forEach(e=>{let t=this._slotManager.getSlot(e.target.id);t&&e.isIntersecting&&this._lastScroll<window.scrollY&&this._destroySlot(e.target,t)})}_destroySlot(e,t){this._observerForDestroyingSlots&&(this._observerForDestroyingSlots.unobserve(e),this._storeSlotDataAndObserveForRestore(e,t),this._slotEventBus.adSlotScrolledFarOutOfView.emit(t.id))}_storeSlotDataAndObserveForRestore(e,t){this._shouldRestoreSlots&&(this._storeContentSlotConfig(e.id,t),this._observerForRestoringSlots&&this._observerForRestoringSlots.observe(e))}async _processSlotsForRestoration(e){for(let t of e){let e=this._destroyedSlots.get(t.target.id);e&&t.isIntersecting&&this._lastScroll>window.scrollY&&await this._restoreSlot(t.target,e)}}async _restoreSlot(e,t){this._observerForRestoringSlots&&(this._observerForRestoringSlots.unobserve(e),this._destroyedSlots.delete(e.id),await this._slotManager.add(new $C(t.location,t.sequence,t.sizes,t.element,t.sticky,t.lazy,t.auctionPriority,t.stickyOverlapSelector,t.special,!0,t.infinite,t.thirdPartyAdUnitName||``)))}get enabled(){return Lt()&&z()&&(this._jumpToSlotManager.enabled||this._featureRolloutEnabled)&&`IntersectionObserver`in window&&`IntersectionObserverEntry`in window&&`intersectionRatio`in IntersectionObserverEntry.prototype}};ew=w([D(`ContentSlotsIntersectionObserverComponent`),S(),N(0,b(eS)),N(1,b(Hs)),N(2,b($f)),N(3,b(jr)),N(4,b(Xx)),N(5,b(X))],ew);let tw=(e,...t)=>e.reduce((e,n,r)=>e+n+(t[r]||``),``).split(`
`).map(e=>e.trim()).join(` `).replace(/\s+/g,` `).replace(/(\s+)?>\s+/g,`>`).replace(/(\s+)?\s+</g,`<`).trim(),nw=class extends I{constructor(e,t){super(),this._footerConfigEventBus=e,this._adOptions=t,C(this,`_cssPrefix`,`raptive-content-terms`),C(this,`_modal`,document.querySelector(`.raptive-content-terms-modal`)),C(this,`_handleModalDismiss`,e=>{e.target===this._modal&&this._modal?.close()})}get enabled(){return this._adOptions.contentTermsFooterEnabled}start(){this._createModal(),this._footerConfigEventBus.footerElementAdded.emit({order:2,element:this._createFooterElement()})}_createFooterElement(){let e=document.createElement(`div`);e.className=`${this._cssPrefix}-footer`;let t=document.createElement(`a`);return t.text=`Terms of Content Use`,t.className=`${this._cssPrefix}-footer-link`,t.addEventListener(`click`,this._handleFooterLinkClick.bind(this)),e.appendChild(t),e}_createModal(){if(this._modal)return this._modal;let e=document.createElement(`dialog`);return e.className=`${this._cssPrefix}-modal`,e.innerHTML=tw`
      <div class="${this._cssPrefix}-modal-content">
        <div class="${this._cssPrefix}-modal-header">
          <h2 class="${this._cssPrefix}-modal-title">Your Use of Our Content</h2>
          <span class="${this._cssPrefix}-modal-close">&#x2715;</span>
        </div>
        <div class="${this._cssPrefix}-modal-body">
          <p>
            The content we make available on this website [and through our other channels] (the Service) was created, developed, compiled, prepared,
            revised, selected, and/or arranged by us, using our own methods and judgment, and through the expenditure of substantial time and effort.
            This Service and the content we make available are proprietary, and are protected by these Terms of Service (which is a contract between
            us and you), copyright laws, and other intellectual property laws and treaties. This Service is also protected as a collective work or
            compilation under U.S. copyright and other laws and treaties. We provide it for your personal, non-commercial use only.
          </p>
          <p>
            You may not use, and may not authorize any third party to use, this Service or any content we make available on this Service in any manner
            that (i) is a source of or substitute for the Service or the content; (ii) affects our ability to earn money in connection with the
            Service or the content; or (iii) competes with the Service we provide. These restrictions apply to any robot, spider, scraper, web
            crawler, or other automated means or any similar manual process, or any software used to access the Service. You further agree not to
            violate the restrictions in any robot exclusion headers of this Service, if any, or bypass or circumvent other measures employed to
            prevent or limit access to the Service by automated means.
          </p>
        </div>
      </div>
    `,e.querySelector(`.${this._cssPrefix}-modal-close`)?.addEventListener(`click`,this._handleModalClose.bind(this)),document.body.appendChild(e),e.addEventListener(`click`,this._handleModalDismiss.bind(this)),this._modal=e,e}_handleModalClose(){this._modal?.close()}_handleFooterLinkClick(){this._modal?.showModal()}};nw=w([x(),N(0,b(Pr)),N(1,b(Kn))],nw);let rw=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`RaptiveBlockSendCrid`,this._lookup=`RBSC`}};rw=w([S()],rw);let iw=1800*1e3,aw=class extends I{constructor(e,t,n,r){super(),this._creativeBlock=e,this._creativeBlockEventBus=t,this._raptiveBlockSendCridExperiment=n,this._pageManager=r,C(this,`_previouslyBlockedCrids`,new Set),C(this,`_cridsLastLoadedAt`,null),C(this,`_cridsRefreshTimeout`,null),C(this,`_numFailedRefreshes`,0)}init(){this._creativeBlockEventBus.blockCreativeIds.on(e=>void this._blockCreativeIds(e)),this._setupRefreshManagement()}get enabled(){return!0}async _blockCreativeIds(e){if(e.source===`raptive`&&!this._raptiveBlockSendCridExperiment.result)return;let t=Array.from(e.crids).reduce((e,t)=>{let n=`${t.value}-${t.type}`;return this._previouslyBlockedCrids.has(n)||(this._previouslyBlockedCrids.add(n),e[t.type].push(t.value)),e},{om:[],pmp:[]});if(!(t.om.length===0&&t.pmp.length===0))return window.fetch(`https://api.adthrive.com/crid/block`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify(t)}).then(()=>{e.source===`confiant`&&E.event(`CreativeBlockComponent`,`_blockCreativeIds`,`Blocked creative IDs from Confiant`,t)}).catch(n=>{E.error(`CreativeBlockComponent`,`_blockCreativeIds`,`Error blocking creative IDs`,e.source,t,n)})}_setupRefreshManagement(){this._creativeBlock.cridEventPromise.then(()=>{this._cridsLastLoadedAt=new Date,this._startRefreshTimer()}).catch(()=>{E.error(`CreativeBlockComponent`,`_setupRefreshManagement`,`CRIDs failed initial load`)}),this._setupPageVisibilityHandlers()}_setupPageVisibilityHandlers(){this._pageManager.visibilityChange.on(()=>{document.visibilityState===`visible`?this._startRefreshTimer():this._clearRefreshTimer()}),this._pageManager.pageHide.on(()=>{this._clearRefreshTimer()})}_startRefreshTimer(){if(this._clearRefreshTimer(),!this._creativeBlock.cridsLoaded||!this._creativeBlock.creativeBlockEnabled||!this._cridsLastLoadedAt)return;let e=new Date().getTime()-this._cridsLastLoadedAt.getTime();if(e>=iw){this._refreshCrids();return}let t=iw-e;this._cridsRefreshTimeout=setTimeout(()=>{this._refreshCrids()},t)}_clearRefreshTimer(){this._cridsRefreshTimeout&&=(clearTimeout(this._cridsRefreshTimeout),null)}async _refreshCrids(){if(!(this._numFailedRefreshes>=3))try{let e=await fetch(`https://ads.adthrive.com/http-api/crids`);if(e.ok){this._cridsLastLoadedAt=new Date,this._numFailedRefreshes=0;let t=await e.json();t&&typeof t==`object`&&Array.isArray(t.om)&&Array.isArray(t.pmp)&&Array.isArray(t.adomains)&&(this._creativeBlock.omCrids=t.om,this._creativeBlock.pmpCrids=t.pmp,this._creativeBlock.adomains=t.adomains,this._creativeBlockEventBus.cridsUpdated.emit()),this._startRefreshTimer()}}catch(e){E.error(`CreativeBlockComponent`,`_refreshCrids`,`Error refreshing CRIDs`,e),this._numFailedRefreshes++,this._startRefreshTimer()}}};aw=w([S(),N(0,b(Lr)),N(1,b(ch)),N(2,b(rw)),N(3,b(jr))],aw);let ow=class extends I{constructor(e,t,n,r){super(),this._context=e,this._gamEventBus=t,this._slotManager=n,this._slotManagerEventBus=r,C(this,`_device`,void 0),C(this,`_headerDeclared`,!1),C(this,`_sidebarDeclared`,!1),this._device=this._context.device}init(){let e=this._slotManager;if(this._device===`phone`||this._device===`tablet`){this._gamEventBus.slotRenderEnded.on(({event:t,slotId:n})=>{let r=e.getSlot(n);r&&this.isDeclaredRefreshCompliantSlot(r)&&Ay({event:t})&&e.updateRefreshTimeout(n,24e4)});let t=this._slotManagerEventBus.added.on(e=>{this._slotManager.getSlots(e).forEach(e=>{this.isDeclaredRefreshCompliantSlot(e)&&Z.pushToQueue(()=>{e.setTargeting({key:`decref`,value:`240`})})})});this._headerDeclared&&this._sidebarDeclared&&this._slotManagerEventBus.added.off(t)}}_isSidebarDeclaredRefreshCompliant(e){let t=e.location===H.Sidebar;return t&&(this._sidebarDeclared=!0),t}_isHeaderDeclaredRefreshCompliant(e){let t=e.location===H.Header&&e.sequence===2;return t&&(this._headerDeclared=!0),t}isDeclaredRefreshCompliantSlot(e){return this._isSidebarDeclaredRefreshCompliant(e)||this._isHeaderDeclaredRefreshCompliant(e)}};ow=w([D(`DeclaredRefreshComponent`),x(),N(0,b(W)),N(1,b(X)),N(2,b(eS)),N(3,b($f))],ow);let sw=!1,cw=()=>{sw=!0},lw=()=>sw,uw=({location:e,sequence:t,sticky:n,lazy:r,stickyOverlapSelector:i,special:a,auctionPriority:o},s,c,l,u)=>new $C(e,t,c,s,n,r,o,i,a,!0,l,u||``),dw=(e,t)=>e.devices.includes(t),fw=(e,t)=>!e.disableAds.locations.has(t.location)&&!e.disableAds.all,pw=e=>e.length===0||!e.split(`,`).some(e=>document.querySelector(e)!==null),mw=e=>e.pageSelector.length===0||document.querySelector(e.pageSelector)!==null,hw=e=>{let t=e.offsetHeight,n=e.offsetWidth,r=e.getBoundingClientRect(),i=document.body,a=document.documentElement,o=window.pageYOffset||a.scrollTop||i.scrollTop,s=window.pageXOffset||a.scrollLeft||i.scrollLeft,c=a.clientTop||i.clientTop||0,l=a.clientLeft||i.clientLeft||0,u=Math.round(r.top+o-c),d=Math.round(r.left+s-l);return{top:u,left:d,bottom:u+t,right:d+n,width:n,height:t}},gw=e=>{if(e&&e.length){let t=0;for(let n=0;n<e.length;n++){let r=Ps(e[n]);if(r.valid&&r.elements&&r.elements[0]){t=hw(r.elements[0]).height;break}}return t}else return};function _w(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>`u`)){var r=document.head||document.getElementsByTagName(`head`)[0],i=document.createElement(`style`);i.type=`text/css`,n===`top`&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var vw=_w;let yw=e=>vw(`
  .adthrive-device-phone .adthrive-sticky-content {
    height: 450px !important;
    margin-bottom: 100px !important;
  }
  .adthrive-content.adthrive-sticky {
    position: -webkit-sticky;
    position: sticky !important;
    top: 42px !important;
    margin-top: 42px !important;
  }
  .adthrive-content.adthrive-sticky:after {
    content: " Advertisement. Scroll down to continue. ";
    font-size: 10pt;
    margin-top: 5px;
    margin-bottom: 5px;
    display:block;
    color: #888;
  }
  .adthrive-sticky-container {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    min-height:${e||400}px;
    margin: 10px 0 10px 0;
    background-color: #FAFAFA;
    padding-bottom:0px;
  }
  `),bw=e=>{vw(`
  .adthrive-recipe.adthrive-sticky {
    position: -webkit-sticky;
    position: sticky !important;
    top: 42px !important;
    margin-top: 42px !important;
  }
  .adthrive-recipe-sticky-container {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    min-height:${e||400}px !important;
    margin: 10px 0 10px 0;
    background-color: #FAFAFA;
    padding-bottom:0px;
  }
  `)},xw=(e=5)=>{vw(`
      .adthrive-sticky-container > div {
        flex-basis: unset;
        position: sticky !important;
        display: block;
        flex-direction: column;
        top: ${e>5?e:5}px;
      }
    `)},Sw=(e=5)=>{vw(`
      .adthrive-recipe-sticky-container > div {
        flex-basis: unset;
        position: sticky !important;
        display: block;
        flex-direction: column;
        top: ${e>5?e:5}px;
      }
    `)},Cw=(e,t)=>{vw(`
    .adthrive-ad.adthrive-sticky-sidebar {
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      min-height: ${e??1800}px !important;
      padding-bottom: 0px;
      margin: 10px 0 10px 0;
    }
    .adthrive-ad.adthrive-sticky-sidebar > div {
      flex-basis: unset;
      position: sticky !important;
      top: ${t??5}px;
    }
  `)},ww=e=>e.split(`?`)[0],Tw=()=>window.location.origin+`/`===ww(window.location.href),Ew=(e,t)=>!e||!t?!1:e?.length===t?.length&&e?.every((e,n)=>e===t[n]),Dw=(e,t)=>{let n=Ew(e?.devices,t?.dynamicAd?.devices),r=e?.dynamic?.elementSelector===t?.dynamicAd?.elementSelector;return n&&r},Ow=(e,t)=>{let n=``,r=``,i=t?.dynamicAd?.location?.replace(`_`,` `);for(let a of e){let e=a?.location===i,o=a?.dynamic?.position===t?.dynamicAd?.position,s=Dw(a,t),c=e&&o&&s,l=a?.sequence===t?.dynamicAd?.sequence;if(c&&l){n=a?.thirdPartyAdUnitName??``;break}c&&(r=a?.thirdPartyAdUnitName??``)}return n||r},kw=class{constructor(e,t){this._pageManager=e,this._slotManager=t,C(this,`_observer`,null),C(this,`_lastScroll`,window.scrollY),C(this,`_slotsAboveTheFold`,[]),C(this,`_scrollListenerOff`,()=>{}),this.enabled&&(this._scrollListenerOff=this._pageManager.scroll.on(Ao(()=>this._handleScroll.call(this,window.scrollY),100)))}start(e){if(e.length===0){this._scrollListenerOff();return}this._slotsAboveTheFold=e,this._observer=new IntersectionObserver((e,t)=>{e.forEach(e=>{let n=this._slotsAboveTheFold.findIndex(t=>t.id===e.target.id),r=this._slotsAboveTheFold[n];r&&e.isIntersecting&&(t.unobserve(e.target),this._slotsAboveTheFold.splice(n,1),this._addSlot(r))})},{threshold:[0],rootMargin:`100% 0px -100% 0px`,root:null});for(let t of e)this._observer.observe(t.element)}_handleScroll(e){(e-this._lastScroll)/window.innerHeight<=-1&&this._slotsAboveTheFold.forEach(e=>{e.element&&QC(e.element)>=-1&&(this._observer?.unobserve(e.element),this._addSlot(e))}),this._lastScroll=e}_addSlot(e){this._slotManager.add(e).catch(e=>{E.error(`DynamicAdsComponent`,`start`,`add`,e)})}get enabled(){return Lt()&&z()&&cn.isRolloutEnabled(`restrict-ads-atf-after-ios-refresh`)}};kw=w([D(`AboveTheFoldSlotsIntersectionObserver`),S(),N(0,b(jr)),N(1,b(eS))],kw);let Aw=class extends _C{constructor(e,t,n,r){super(),this._siteExperiments=e,this._pubabgroup=t,this._cls=n,C(this,`_choices`,[]),C(this,`_mappedChoices`,[]),C(this,`_result`,`control`),C(this,`_resultValidator`,e=>typeof e==`number`),C(this,`key`,hn.AdDensity),C(this,`abgroup`,hn.AdDensity),r.siteAds?.siteExperiments?this.experimentConfig=new In(r.siteAds).getSiteExperimentByKey(this.key):this.experimentConfig=this._siteExperiments.getSiteExperimentByKey(this.key),this.enabled&&this._cls.siteExperimentsWeightedChoice&&this.key in this._cls.siteExperimentsWeightedChoice&&this._isValidResult(this._cls.siteExperimentsWeightedChoice[this.key])?(this._result=this._cls.siteExperimentsWeightedChoice[this.key],this.setExperimentTargeting()):this.enabled&&this.experimentConfig&&(this._choices=this.experimentConfig.variants,this._mappedChoices=this._mapChoices(),this._result=this.run(),this.setExperimentTargeting())}run(){if(!this.enabled)return E.error(`TargetAdDensitySiteExperiment`,`run`,`() => %o`,`No experiment config found. Defaulting to control.`),`control`;let e=new Wn(this._mappedChoices).get();return this._isValidResult(e)?e:(E.error(`TargetAdDensitySiteExperiment`,`run`,`() => %o`,`Invalid result from experiment choices. Defaulting to control.`),`control`)}setExperimentTargeting(){if(!this.enabled||!this._isValidResult(this._result)){E.error(`TargetAdDensitySiteExperiment`,`setExperimentTargeting`,`() => %o`,`Experiment targeting requires an experiment config and valid result`);return}let e=this.experimentConfig,t=`${e.key.toLowerCase()}-${e.id}`,n=this._result===`control`?`control`:`${Math.round(this._result*100)}`;this._pubabgroup.set(t,n)}_mapChoices(){return this._choices.map(({weight:e,value:t})=>({weight:e,choice:typeof t==`number`?(t||0)/100:`control`}))}};w([R()],Aw.prototype,`run`,null),Aw=w([S(),N(0,b(Ln)),N(1,b(ln)),N(2,b(pr)),N(3,b(`AdThrive`))],Aw);let jw={Desktop:`desktop`,Mobile:`mobile`},Mw=(e,t,n,r=[],i,a,o=!1,s=!1)=>{if(i===H.Video_StickyOutstream&&s&&o)return null;let c=`<div id="${t}" class="adthrive-ad ${r.join(` `)}"></div>`;return i===H.Video_StickyOutstream&&(c=`<div class="adthrive-sticky-outstream adthrive-sticky-outstream-${t.includes(`phone`)?`mobile`:`desktop`}">`+c+`</div>`),a&&a.length&&a.some(e=>e.element.id===t)||e.insertAdjacentHTML(n,c),document.getElementById(t)},Nw=(e,t=document)=>t.querySelectorAll(e),Pw=e=>`adthrive-${e.location.replace(`_`,`-`).toLowerCase()}`,Fw=e=>`${Pw(e)}-${e.sequence}`,Iw=e=>{let t=e.clientWidth;if(getComputedStyle){let n=getComputedStyle(e,null);t-=parseFloat(n.paddingLeft||`0`)+parseFloat(n.paddingRight||`0`)}return t},Lw=`div #comments, section .comments`,Rw=(e,t=Lw)=>{let n=e.querySelector(t);return n?e.offsetHeight-n.offsetHeight:e.offsetHeight},zw=(e,t,n)=>{let r=e=>e?!!(e.classList.contains(`adthrive-ad`)||e.id.includes(`_${n}_`)):!1;switch(t){case`beforebegin`:return r(e.previousElementSibling);case`afterend`:return r(e.nextElementSibling);case`afterbegin`:return r(e.firstElementChild);case`beforeend`:return r(e.lastElementChild);default:return!1}};var Bw=class{constructor(e,t,n){this._adInjectionMap=e,this._context=t,this._cls=n,C(this,`_recipeCount`,0),C(this,`_mainContentHeight`,0),C(this,`_mainContentDiv`,null),C(this,`_totalAvailableElements`,[]),C(this,`_densityDevice`,jw.Desktop),C(this,`_pubLog`,{onePerViewport:!1,targetDensity:0,targetDensityUnits:0,combinedMax:0}),C(this,`_densityMax`,.99),C(this,`_smallerIncrementAttempts`,0),C(this,`_absoluteMinimumSpacingByDevice`,250),C(this,`_usedAbsoluteMinimum`,!1),C(this,`_isAcAlwaysStickyEnabled`,!1),C(this,`locationMaxLazySequence`,new Map([[H.Recipe,5]])),this._isAcAlwaysStickyEnabled=cn.isRolloutEnabled(`ac-always-sticky`)}inject(e,t=document){this._cls.targetDensityLog&&E.event(`BaseDynamicAdsInjector`,`_logDensityInfo`,this._cls.targetDensityLog),this._densityDevice=this._context.device===`desktop`?jw.Desktop:jw.Mobile,this._overrideDefaultAdDensitySettingsWithSiteExperiment();let n=this._config.targetDensity.enabled,r=e.filter(e=>n?e.location!==H.Content:e),i=e.filter(e=>n?e.location===H.Content:null);this._capturePreSlotInsertionPageAreaMeasurement();let a=r.length?this._injectNonDensitySlots(r,t):[],o=i.length?this._injectDensitySlots(i,t):[];return[...a,...o]}_injectNonDensitySlots(e,t=document){let n=[];for(let r of e)this._insertNonDensityAds(r,n,t);return n}_insertNonDensityAds(e,t,n=document){let r=0,i=0,a=0;e.spacing>0&&(r=window.innerHeight*e.spacing,i=r);let o=this._repeatDynamicAds(e),s=Nw(e.elementSelector,n);e.skip;for(let c=e.skip;c<s.length&&!(a+1>o.length);c+=e.every){let l=s[c];if(r>0){let{bottom:e}=hw(l);if(e<=i)continue;i=e+r}let u=o[a],d=`${u.location}_${u.sequence}`;if(t.some(e=>e.name===d)){a+=1;continue}let f=this.getDynamicElementId(u),p=Pw(e),m=Fw(e),h=e.location===H.Sidebar&&e.sticky&&e.sequence&&e.sequence<=5?`adthrive-sticky-sidebar`:``,g=e.location===H.Recipe&&e.sticky?`adthrive-recipe-sticky-container`:``,_=[h,g,p,m,...e.classNames],v=this._cls.injectedSlots;if(zw(l,e.position,e.location)&&e.location===H.Recipe)continue;let ee=Mw(l,f,e.position,_,e.location,v||[],this._config.video.collapsiblePlayerOnPage,this._isAcAlwaysStickyEnabled);if(ee){let r=this._filterAdUnitSizes(u,ee);r.length&&(t.push(uw(u,ee,r,n!==document,e.thirdPartyAdUnitName||``)),e.location===H.Recipe&&++this._recipeCount,a+=1),l=ee}}}_injectDensitySlots(e,t=document){try{this._calculateMainContentHeightAndAllElements(e,t),this._capturePreSlotInsertionMainContentMeasurement()}catch{return[]}let{onePerViewport:n,targetAll:r,targetDensityUnits:i,combinedMax:a,numberOfUnits:o}=this._getDensitySettings(e,t);return this._absoluteMinimumSpacingByDevice=n?window.innerHeight:this._absoluteMinimumSpacingByDevice,o?(this._adInjectionMap.filterUsed(),this._findElementsForAds(o,n,r,a,i,t),this._insertAds()):[]}_overrideDefaultAdDensitySettingsWithSiteExperiment(){let e=y.resolve(Aw);if(!e.enabled)return;let t=e.result;typeof t==`number`&&(this._config.targetDensity.enabled=!0,this._config.targetDensity.settings[this._densityDevice].adDensity=t)}_getDensitySettings(e,t=document){let n=this._config.targetDensity.settings,r=this._determineOverrides(n.pageOverrides),i=r.length?r[0]:n[this._densityDevice],a=i.adDensity,o=i.onePerViewport,s=this._shouldTargetAllEligible(a),c=this._getTargetDensityUnits(a,s),l=this._getCombinedMax(e,t),u=Math.min(this._totalAvailableElements.length,c,...l>0?[l]:[]);return this._pubLog={onePerViewport:o,targetDensity:a,targetDensityUnits:c,combinedMax:l},{onePerViewport:o,targetAll:s,targetDensityUnits:c,combinedMax:l,numberOfUnits:u}}_determineOverrides(e){return e.filter(e=>{let t=Ps(e.pageSelector);return e.pageSelector===``||t.elements&&t.elements.length}).map(e=>e[this._densityDevice])}_shouldTargetAllEligible(e){return e===this._densityMax}_getTargetDensityUnits(e,t){return t?this._totalAvailableElements.length:Math.floor(e*this._mainContentHeight/(1-e)/this._getMinDivHeight())-this._recipeCount}_getMinDivHeight(e=H.Content){return this._config.clsOptimizedAds.getDivHeight(e,this._context.device)}_getCombinedMax(e,t=document){return B(e.filter(e=>{let n;try{n=t.querySelector(e.elementSelector)}catch{}return n}).map(e=>Number(e.max)+Number(e.lazyMaxDefaulted?0:e.lazyMax)).sort((e,t)=>t-e)[0],0)}_elementLargerThanMainContent(e){return e.offsetHeight>=this._mainContentHeight&&this._totalAvailableElements.length>1}_elementDisplayNone(e){let t=window.getComputedStyle(e,null).display;return t&&t===`none`||e.style.display===`none`}_isBelowMaxes(e,t){return this._adInjectionMap.map.length<e&&this._adInjectionMap.map.length<t}_findElementsForAds(e,t,n,r,i,a=document){E.event(`BaseDynamicAdsInjector`,`_logDensityInfo`,{onePerViewport:t,combinedMax:r,targetDensityUnits:i,targetDensityPercentage:this._pubLog.targetDensity,mainContentHeight:this._mainContentHeight,recipeCount:this._recipeCount,numberOfEls:this._totalAvailableElements.length});let o=e=>{for(let{dynamicAd:t,element:o}of this._totalAvailableElements){if(this._logDensityInfo(o,t.elementSelector,e),!n&&this._elementLargerThanMainContent(o)||this._elementDisplayNone(o))continue;if(this._isBelowMaxes(r,i))this._checkElementSpacing({dynamicAd:t,element:o,insertEvery:e,targetAll:n,target:a});else break}!this._usedAbsoluteMinimum&&this._smallerIncrementAttempts<5&&(++this._smallerIncrementAttempts,o(this._getSmallerIncrement(e)))},s=this._getInsertEvery(e,t,i);o(s)}_getSmallerIncrement(e){let t=e*.6;return t<=this._absoluteMinimumSpacingByDevice&&(t=this._absoluteMinimumSpacingByDevice,this._usedAbsoluteMinimum=!0),t}_insertAds(){let e=[],t=0;return this._adInjectionMap.filterUsed(),this._adInjectionMap.map.forEach(({el:n,dynamicAd:r,target:i},a)=>{let o=Number(r.sequence)+a,s=r.max,c=r.lazy&&o>s;r.sequence=o,r.lazy=c;let l=this._addContentAd(n,r,i);l&&(r.used=!0,e.push(l),++t)}),e}_getInsertEvery(e,t,n){let r=this._absoluteMinimumSpacingByDevice;return this._moreAvailableElementsThanUnitsToInject(n,e)?(this._usedAbsoluteMinimum=!1,r=this._useWiderSpacing(n,e)):(this._usedAbsoluteMinimum=!0,r=this._useSmallestSpacing(t)),t&&window.innerHeight>r?window.innerHeight:r}_useWiderSpacing(e,t){return this._mainContentHeight/Math.min(e,t)}_useSmallestSpacing(e){return e&&window.innerHeight>this._absoluteMinimumSpacingByDevice?window.innerHeight:this._absoluteMinimumSpacingByDevice}_moreAvailableElementsThanUnitsToInject(e,t){return this._totalAvailableElements.length>e||this._totalAvailableElements.length>t}_logDensityInfo(e,t,n){let{onePerViewport:r,targetDensity:i,targetDensityUnits:a,combinedMax:o}=this._pubLog;this._totalAvailableElements.length}_checkElementSpacing({dynamicAd:e,element:t,insertEvery:n,targetAll:r,target:i=document}){(this._isFirstAdInjected()||this._hasProperSpacing(t,e,r,n))&&this._markSpotForContentAd(t,{...e},i)}_isFirstAdInjected(){return!this._adInjectionMap.map.length}_markSpotForContentAd(e,t,n=document){let r=t.position===`beforebegin`||t.position===`afterbegin`;this._adInjectionMap.addSorted(e,this._getElementCoords(e,r),t,n)}_hasProperSpacing(e,t,n,r){let i=t.position===`beforebegin`||t.position===`afterbegin`,a=t.position===`beforeend`||t.position===`afterbegin`,o=n||this._isElementFarEnoughFromOtherAdElements(e,r,i),s=a||this._isElementNotInRow(e,i),c=e.id.indexOf(`AdThrive_Below_Post`)===-1;return o&&s&&c}_isElementFarEnoughFromOtherAdElements(e,t,n){let r=this._getElementCoords(e,n),[i,a]=this._adInjectionMap.findNeighborIndices(r),o=i===null?void 0:this._adInjectionMap.map[i].coords,s=a===null?void 0:this._adInjectionMap.map[a].coords;return(o===void 0||r-t>o)&&(s===void 0||r+t<s)}_isElementNotInRow(e,t){let n=e.previousElementSibling,r=e.nextElementSibling,i=t?!n&&r||n&&e.tagName!==n.tagName?r:n:r;return i&&e.getBoundingClientRect().height===0?!0:i?e.getBoundingClientRect().top!==i.getBoundingClientRect().top:!0}_calculateMainContentHeightAndAllElements(e,t=document){let[n,r]=AC(e,this._adInjectionMap,t);if(!n)throw Error(`No Main Content Elements Found`);this._mainContentDiv=n,this._totalAvailableElements=r,this._mainContentHeight=Rw(n)}_getElementCoords(e,t=!1){let n=e.getBoundingClientRect();return(t?n.top:n.bottom)+window.scrollY}_addContentAd(e,t,n=document){let r=null,i=Pw(t),a=Fw(t),o=this._config.adOptions.stickyContentEnabled?`adthrive-sticky-container`:``,s=Mw(e,this.getDynamicElementId(t),t.position,[o,i,a,...t.classNames],t.location,this._cls.injectedSlots||[]);if(s){let e=this._filterAdUnitSizes(t,s);e.length&&(r=uw(t,s,e,n!==document,t?.thirdPartyAdUnitName||``))}return r}_filterAdUnitSizes(e,t){let n=Iw(t),r=e.sticky&&e.location===H.Sidebar;return e.sizes.filter(t=>{let i=e.autosize?t[0]<=n||t[0]<=320:!0,a=r?t[1]<=window.innerHeight-100:!0;return i&&a})}_repeatDynamicAds(e){let t=[],n=e.location===H.Recipe?99:this.locationMaxLazySequence.get(e.location),r=e.lazy?B(n,0):0,i=e.max,a=e.lazyMax,o=r===0&&e.lazy?i+a:Math.min(Math.max(r-e.sequence+1,0),i+a),s=Math.max(i,o);for(let n=0;n<s;n++){let r=Number(e.sequence)+n,a=e.lazy&&n>=i,o=r;e.name===`Recipe_1`&&r>=5&&(o=r+1),t.push({...e,sequence:o,lazy:a})}return t}_capturePreSlotInsertionMainContentMeasurement(){let e=this._mainContentHeight;this._context?.preSlotInsertionMeasurements?this._context.preSlotInsertionMeasurements.mainContentHeight=e:this._context.preSlotInsertionMeasurements={mainContentHeight:e}}_capturePreSlotInsertionPageAreaMeasurement(){let e=jC()*MC();this._context?.preSlotInsertionMeasurements?this._context.preSlotInsertionMeasurements.totalPageArea=e:this._context.preSlotInsertionMeasurements={totalPageArea:e}}};let Vw=class extends Bw{constructor(e,t,n,r){super(n,t,r),this._config=e,this._context=t,this._adInjectionMap=n,this._cls=r}getDynamicElementId(e){return`${this._config.gam.prefix}_${e.location}_${e.sequence}_${this._context.device}`}};Vw=w([D(`DynamicAdsInjector`),x(),N(0,b(J)),N(1,b(W)),N(2,b(CC)),N(3,b(pr))],Vw);let Hw=class extends I{constructor(e,t,n,r,i,a,o){super(),this._cls=e,this._config=t,this._context=n,this._injector=r,this._slotManager=i,this._skylineAdsEventBus=a,this._aboveTheFoldSlotsIntersectionObserver=o}hasClsInjectedContent(){if(this._cls&&this._cls.injectedSlots){for(let e of this._cls.injectedSlots)if(e.name.includes(H.Content))return!0}return!1}start(e=!1){let t=this.hasClsInjectedContent(),n=this._config.adOptions,r=n.dynamicStickySidebarHeight,i=gw(n.dynamicStickySidebarHeaderSelectors);Cw(r,i);let a=this._config.dynamicAds.filter(e=>fw(this._config,e)).filter(e=>dw(e,this._context.device)).filter(e=>!t||t&&e.location!==H.Content).filter(e=>e.location===H.Interstitial||e.location===H.Video_StickyOutstream?pw(e.pageSelector):mw(e)).filter(e=>!this.pluginInjected(e)).filter(e=>e.location!==H.Video_StickyOutstream||!this.shouldFilterStickyOutstream()),o=this._injector.inject(a);if(this._cls&&this._cls.enabled&&this._cls.injectedSlots&&this._cls.injectedSlots.length){let e=[];this._cls.injectedSlots?.forEach(t=>{let n=o.find(e=>e.name===t.name),r=e.find(e=>e.name===t.name);if(!n&&!r){let n=Ow(this._cls.adUnits||[],t);e.push(uw(t.dynamicAd,t.element,t.sizes,t.infinite,n||``))}}),o=o.concat(e)}let s=t=>{t.length!==0&&this._slotManager.add(t,e).catch(e=>{E.error(`DynamicAdsComponent`,`start`,`add`,e)})};if(lw()&&this._aboveTheFoldSlotsIntersectionObserver.enabled){let e=[];o=o.filter(t=>QC(t.element)<-1?(e.push(t),!1):!0),E.event(`DynamicAdsComponent`,`start`,`isIOSRefresh`,{slotsAboveTheFold:e.map(e=>e.id),dynamicSlots:o.map(e=>e.id)}),this._aboveTheFoldSlotsIntersectionObserver.start(e)}if(this._config.adTypes.skylineHeader&&It()&&o.some(e=>e.location===H.Header)){let e=o.findIndex(e=>e.location===H.Footer);if(e!==-1){let t=o.splice(e,1)[0],n=this._skylineAdsEventBus.footerSlotAdditionEnabled.on(()=>{s([t]),n()})}}s(o)}get enabled(){return this._config.dynamicAds.length>0}shouldFilterStickyOutstream(){return this._config.video.preventStickyOutstream||this._config.disableAds.video||!this._config.video.stickyOutstreamSettings.allowOnHomepage&&Tw()?!0:(this._config.video.hasStickyOutstream=!0,!1)}pluginInjected(e){let t={...e};delete t.thirdPartyAdUnitName;let n=JSON.stringify(t);return this._cls&&this._cls.injectedSlots&&this._cls.injectedSlots.length&&this._cls.injectedSlots.some(e=>JSON.stringify(e.clsDynamicAd)===n)}};Hw=w([D(`DynamicAdsComponent`),x(),N(0,b(pr)),N(1,b(J)),N(2,b(W)),N(3,b(Vw)),N(4,b(eS)),N(5,b(mC)),N(6,b(kw))],Hw);let Uw=class extends I{constructor(e,t,n,r,i,a,o,s,c,l){super(),this._pageManager=e,this._config=t,this._adInjectionMap=n,this._intersectionObserverManager=r,this._slotManager=i,this._prebidActionManager=a,this._dynamicAdsComponent=o,this._prebidMethods=s,this._slotEventBus=c,this._cls=l}start(){this._addDeviceOrientationListener()}_addDeviceOrientationListener(){this._pageManager.deviceOrientationChange.on(()=>this._handleDeviceOrientationChange())}_handleDeviceOrientationChange(){this._config.disableAds.clear(),this._intersectionObserverManager.unobserveAll(!1),this._adInjectionMap.reset(),this._slotManager.removeAllElements(!1),this._prebidActionManager.reset(!1),this._prebidMethods.clearAllAuctions();let e=this._slotManager.destroyAll(!1);Qe.resetTimeOrigin(),this._config.disableAds.init(),E.event(`DeviceOrientationComponent`,`_handleDeviceOrientationChange`),this._config.resetDynamicAds(),this._cls.injectedSlots?.splice(0,this._cls.injectedSlots.length),this._cls.injectedVideoSlots?.splice(0,this._cls.injectedVideoSlots.length),this._dynamicAdsComponent.start(!0),this._slotManager.rebuildAll();let t=this._slotEventBus;t.addRebuiltSlots.once(n=>{this._slotManager.getSlots(n).forEach(t=>{if(t.rebuild){let n=e.find(e=>e.id===t.id);n&&(t.refreshCount=n.refreshCount+1)}}),t.addSlots.emit(n)})}};Uw=w([D(`DeviceOrientationComponent`),x(),N(0,b(jr)),N(1,b(J)),N(2,b(CC)),N(3,b(Js)),N(4,b(eS)),N(5,b(dC)),N(6,b(Hw)),N(7,b(P)),N(8,b(Hs)),N(9,b(pr))],Uw);let Ww=class extends qe{constructor(...e){super(...e),C(this,`adRemoved`,new T),C(this,`adOnPage`,new T)}};Ww=w([S()],Ww);let Gw=class extends I{constructor(e,t,n,r){super(),this._slotManager=e,this._gamEventBus=t,this._directSoldInterscrollerAdEventBus=n,this._adTypes=r,C(this,`_directSoldInterscrollerClassName`,`raptive-sales-coll-mob-vid-ftr`),C(this,`_contentSlotKeyword`,`content`),C(this,`_footerSelector`,`.adthrive-footer`),C(this,`_hiddenClass`,`adthrive-hidden`),C(this,`_slotsWithAdOnPage`,new Map),C(this,`_slotsWithWatchingObservers`,new Map)}init(){this._setupListeners()}_setupListeners(){this._gamEventBus.slotRenderEnded.on(({slotId:e})=>this._addDirectSoldInterscrollerObserver(e))}_addDirectSoldInterscrollerObserver(e){if(e.toLowerCase().includes(this._contentSlotKeyword)){let t=this._slotManager.getSlot(e),n=t&&`${e}-${t.refreshCount}`;n&&!this._slotsWithAdOnPage.has(n)&&!this._slotsWithWatchingObservers.has(n)&&this._watchForInterscrollerAd(t.element,n)}}_watchForInterscrollerAd(e,t){if(this._hasInterscrollerAd(e)){this._handleAdOnPage(t),this._watchForInterscrollerAdRemoval(e,t);return}this._createAdDetectionObserver(e,t)}_watchForInterscrollerAdRemoval(e,t){this._createAdRemovalObserver(e,t)}_createAdDetectionObserver(e,t){let n=new MutationObserver(r=>{for(let i of r)if(this._isClassAttributeMutation(i)){let r=i.target;if(r instanceof Element&&r.classList.contains(this._directSoldInterscrollerClassName)){n.disconnect(),this._slotsWithWatchingObservers.delete(t),this._handleAdOnPage(t),this._watchForInterscrollerAdRemoval(e,t);return}}});this._slotsWithWatchingObservers.set(t,!0),this._observeElement(n,e)}_createAdRemovalObserver(e,t){let n=new MutationObserver(r=>{for(let i of r)if(this._isClassAttributeMutation(i)&&!this._hasInterscrollerAd(e)&&this._slotsWithAdOnPage.has(t)){n.disconnect(),this._handleAdRemoved(t);return}});this._observeElement(n,e)}_hasInterscrollerAd(e){return!!e.querySelector(`.${this._directSoldInterscrollerClassName}`)}_isClassAttributeMutation(e){return e.type===`attributes`&&e.attributeName===`class`}_observeElement(e,t){e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[`class`]})}_handleAdOnPage(e){this._isDirectSoldInterscrollerAdOnPage()||(this._directSoldInterscrollerAdEventBus.adOnPage.emit(),this._hideFooter()),this._slotsWithAdOnPage.set(e,!0)}_handleAdRemoved(e){this._slotsWithAdOnPage.delete(e),this._isDirectSoldInterscrollerAdOnPage()||(this._unhideFooter(),this._directSoldInterscrollerAdEventBus.adRemoved.emit())}_isDirectSoldInterscrollerAdOnPage(){return this._slotsWithAdOnPage.size>0}_hideFooter(){document.querySelector(this._footerSelector)?.classList.add(this._hiddenClass)}_unhideFooter(){document.querySelector(this._footerSelector)?.classList.remove(this._hiddenClass)}get enabled(){return z()&&this._adTypes.interscroller}};Gw=w([D(`DirectSoldInterscrollerAdsComponent`),S(),N(0,b(eS)),N(1,b(X)),N(2,b(Ww)),N(3,b(tr))],Gw),new Map([[H.Footer,1],[H.Header,2],[H.Sidebar,3],[H.Content,4],[H.Recipe,5],[`Sidebar_sticky`,6],[`Below Post`,7]]);let Kw=(e,t)=>{let n=Iw(t),r=e.sticky&&e.location===H.Sidebar;return e.sizes.filter(t=>{let i=e.autosize?t[0]<=n||t[0]<=320:!0,a=r?t[1]<=window.innerHeight-100:!0;return i&&a})},qw=(e,t)=>e.devices.includes(t),Jw=e=>e.pageSelector.length===0||document.querySelector(e.pageSelector)!==null,Yw=(e,t,n=0)=>{let r=[];for(let i=0;i<t;i++){let t=n+i;r.push({...e,sequence:t})}return r},Xw=e=>{let t=e.lastChild;if(t instanceof HTMLElement)return t.offsetTop+t.offsetHeight;if(t instanceof Text){let n=t.previousElementSibling;return n?n.offsetTop+n.offsetHeight:e.offsetTop}else return E.error(`util`,`determineSidebar9ElementTop`,`Could not determine the top of the sidebar9 child element`),e.offsetTop},Zw=(e,t,n=1200,r)=>{let i=t.hasChildNodes()?Xw(t):t.offsetTop,a=e-i,o=Math.floor(a/(n+10));return Math.min(o,r)},Qw=e=>e.some(e=>document.querySelector(e)!==null),$w=class extends I{constructor(e,t,n,r){super(),this._config=e,this._context=t,this._slotManager=n,this._cls=r}get enabled(){let e=this._config.adOptions.dynamicStickySidebarBlockedSelectors||[];return!Qw(e)&&!!this._config.adOptions.dynamicStickySidebarEnabled}async start(){let e=this._config.dynamicAds.filter(e=>e.location===H.Sidebar).filter(e=>e.sequence===9).filter(e=>fw(this._config,e)).filter(e=>qw(e,this._context.device)).filter(e=>Jw(e))[0];if(!e)return;let t=this.insertDynamicStickySidebarAds(e);t.length!==0&&await this._slotManager.add(t)}updateStylingForExistingStickySidebarAd(e){let t=this.getDynamicElementId(e);document.getElementById(t)?.classList.add(`adthrive-sticky-sidebar`)}getSidebarElement(e){return Nw(e.elementSelector,document).item(e.skip)}insertDynamicStickySidebarAds(e){let t=[],n=Nw(e.elementSelector,document).item(e.skip);if(n===null)return t;let r=this.repeatDynamicStickySidebar(e).filter(e=>document.querySelector(`#${this.getDynamicElementId(e)}`)===null);if(r.length<2)return t;this.updateStylingForExistingStickySidebarAd(e);for(let i=0;i<r.length;i++){let a=r[i],o=`${a.location}_${a.sequence}`;if(t.some(e=>e.name===o))continue;let s=this.getDynamicElementId(a),c=Pw(a),l=Fw(a),u=[i===r.length-1?``:`adthrive-sticky-sidebar`,c,l,...a.classNames],d=this._cls.injectedSlots,f=Mw(n,s,a.position,u,e.location,d||[]);if(f){let n=Kw(a,f);n.length&&t.push(uw(a,f,n,!1,e.thirdPartyAdUnitName||``))}}return t}getSidebarSlotHeight(){let e=this._config.adOptions.dynamicStickySidebarHeight;return e===0||e===void 0?(E.error(`EnhancedStickySidebarComponent`,`_getSidebarSlotHeight`,`Dynamic sticky sidebar height is not set in config`),1800):e}calculateNumberOfDynamicStickySidebars(e){let t=this.getSidebarElement(e);if(!t)return 0;let n=this.getSidebarSlotHeight(),r=e.stickyOverlapSelector&&document.querySelector(e.stickyOverlapSelector)?.offsetTop||document.body.scrollHeight;return Zw(r,t,n,25)}repeatDynamicStickySidebar(e){if(e.location!==H.Sidebar||e.sequence!==9||!e.sticky)return[e];let t=this.calculateNumberOfDynamicStickySidebars(e);return Yw(e,t,9).map(e=>(e.sequence!==9&&(e.lazy=!0),e))}getDynamicElementId(e){return`${this._config.gam.prefix}_${e.location}_${e.sequence}_${this._context.device}`}};$w=w([D(`EnhancedStickySidebarComponent`),x(),N(0,b(J)),N(1,b(W)),N(2,b(eS)),N(3,b(pr))],$w);let eT=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`EventStreamerExperiment`,this._lookup=`ESE`}};eT=w([S()],eT);let tT=class extends I{constructor(e,t,n,r,i,a){super(),this._config=e,this._context=t,this._gamEventBus=n,this._slotManager=r,this._videoEventProxy=i,this._eventStreamerExperiment=a,C(this,`_highEntropyHints`,[`brands`,`mobile`,`platform`,`bitness`,`model`,`platformVersion`,`uaFullVersion`,`fullVersionList`,`wow64`]),C(this,`_auctionTargetingKeys`,void 0),C(this,`_highEntropyHintsValues`,{bitness:``,brands:[],fullVersionList:[],mobile:!1,model:``,platform:``,platformVersion:``,uaFullVersion:``,wow64:!1}),C(this,`_getApproxDPR`,(e=6,t=.001)=>{if(typeof matchMedia!=`function`)return 1;let n=e=>matchMedia(`(min-resolution: ${e}dppx)`).matches||matchMedia(`(min-resolution: ${e*96}dpi)`).matches||matchMedia(`(-webkit-min-device-pixel-ratio: ${e})`).matches,r=.5,i=e;for(;i-r>t;){let e=(r+i)/2;n(e)?r=e:i=e}return Math.round(r*1e3)/1e3});let o=this._config.prebid.targetingKeyMap;this._auctionTargetingKeys=[o.CRID,o.BIDDER,o.DEAL,o.PRICE_BUCKET,`amz_bidder`,`amz_pb`,`amz_bidder_sp`,`amz_pb_sp`]}init(){this._getHighEntropyHints(),this._videoEventProxy.videoImpression.on(({videoAdDetails:e,player:t})=>{this._eventStreamerImpression(t,e)}),this._gamEventBus.slotRenderEnded.on(({event:e,slotId:t})=>{let n=this._slotManager.getSlot(t);n&&this._eventStreamerImpression(n,e)}),this._gamEventBus.impressionViewable.on(({event:e,slotId:t})=>{let n=this._slotManager.getSlot(t);n&&(n.location===H.Interstitial&&this._interstitialImpression(n,e),this._eventStreamerViewable(n))})}_interstitialImpression(e,t){let n=t.slot?.getResponseInformation?.(),r={...t,advertiserId:n?n.advertiserId:0,campaignId:n?n.campaignId:0,lineItemId:n?n.lineItemId:0,creativeId:n?n.creativeId:0,creativeTemplateId:n?n.creativeTemplateId:0,isEmpty:!1,size:[1,1],labelIds:[],slotContentChanged:!1,sourceAgnosticCreativeId:0,sourceAgnosticLineItemId:0,isBackfill:!1,yieldGroupIds:[],companyIds:[]};this._eventStreamerImpression(e,r)}_eventStreamerImpression(e,t){e.refreshImpressionId();let n=this._getBaseContext(`raptive.adcode.impression.v2.Impression`),r=this._getSlotContext(e),i=this._getGamContext(e,t),a=this._getAuctionContext(e,t),o=this._getSiteContext(),s=this._getWebContext(),c=this._getAdCodeContext(),l=e.impressionId,u=!t.isEmpty,d={adcodeContext:c,auctionContext:a,baseContext:n,gamContext:i,impressionId:l,isMeasurable:u,siteContext:o,slotContext:r,webContext:s};this._callEventStreamer(d,`impression`)}_eventStreamerViewable(e){let t=this._getBaseContext(`raptive.adcode.impression.v1.ViewableImpression`),n=this._getSiteContext(),r=e.impressionId,i={baseContext:t,impressionId:r,siteContext:n};this._callEventStreamer(i,`viewable`)}_getBaseContext(e){let t=new Date;return{messageId:Qo(),eventName:e,sentAt:t.toISOString(),sourceId:`adcode`}}_getWebContext(){return{page:{path:window.location.pathname,referrer:document.referrer,search:window.location.search,title:document.title,url:window.location.href},screen:{height:window.screen.height||0,width:window.screen.width||0,density:this._getApproxDPR()},userAgent:navigator.userAgent||``,userAgentData:this._highEntropyHintsValues,campaign:{name:this._context.utm.utm_campaign||``,source:this._context.utm.utm_source||``,term:this._context.utm.utm_term||``,medium:this._context.utm.utm_medium||``,content:this._context.utm.utm_content||``},geo:{country:this._context.country||``,region:this._context.region||``},connection:{downlink:this._context.downlink||0,effectiveType:this._context.effectiveType||``}}}_getSiteContext(){return{siteId:this._config.site.id,sessionKey:this._context.sessionKey,pageViewKey:this._context.pageviewKey,gamAccountId:this._config.gam.account||``}}_getSlotContext(e){let t=`id`in e;return{isLazy:t?e.lazy:!1,refreshes:t?e.refreshCount:0,videoRefreshes:t?0:e.prerollNum}}_getAdCodeContext(){return{abgroup:this._config.abGroup.groups,branch:this._context.branch,bucket:this._context.bucket,deployment:this._context.deployment,plugin:this._context.plugin,hbho:this._config.hbho.bidders,vbho:this._config.vbho.bidders,fpv:this._context.isFirstPageview||!1}}_getGamDisplayContext(e,t){let n=e.getTargetingMap().flag_slot||[];return{adUnitPath:t.slot.getAdUnitPath()||``,creativeId:String(t.creativeId)||``,isBackFill:!!t.isBackfill,isNullResponse:!e.googleTagSlot?.getResponseInformation(),lineItemId:String(t.lineItemId)||``,size:t.size&&typeof t.size!=`string`?t.size:[],slotElementId:t.slot.getSlotElementId()||``,flagSlot:n,advertiserId:String(t.advertiserId)||``,agnosticCreativeId:String(t.sourceAgnosticCreativeId)||``,agnosticLineItemId:String(t.sourceAgnosticLineItemId)||``,campaignId:String(t.campaignId)||``,companyIds:(t.companyIds||[]).map(String),serviceName:t.serviceName||``,yieldGroupIds:(t.yieldGroupIds||[]).map(String)}}_getGamVideoContext(e,t){let n=decodeURIComponent(this._getVideoTargetingData(t).flag_slot).split(`,`)||[];return{adUnitPath:Vt(t.tag.split(`?`)[1]).get(`iu`)||``,creativeId:String(t.gamCreativeId)||``,lineItemId:String(t.gamLineItemId)||``,size:e.size||[],slotElementId:t.adUnitName,flagSlot:n,advertiserId:``,agnosticCreativeId:``,agnosticLineItemId:``,campaignId:``,companyIds:[],serviceName:``,yieldGroupIds:[]}}_getGamContext(e,t){let n=`id`in e;return{flag:window.googletag.pubads().getTargeting(`flag`),...n?this._getGamDisplayContext(e,t):this._getGamVideoContext(e,t)}}_getAuctionContext(e,t){let n=`id`in e;return this._getAuctionTargetingKeyValues(n?e.getTargetingMap():this._getVideoTargetingData(t))}_getAuctionTargetingKeyValues(e){let t={};return this._auctionTargetingKeys.forEach(n=>{let r=e[n]||``,i=r;Array.isArray(r)&&(i=r[0]),[this._config.prebid.targetingKeyMap.PRICE_BUCKET,`amz_pb`,`amz_pb_sp`].includes(n)&&(i=Number(i)),t[n.replace(`rp`,`hb`)]=i}),t}async _getHighEntropyHints(){let e=new Promise(e=>{setTimeout(()=>{e(!1)},1e3)});this._highEntropyHintsValues=await Promise.race([navigator?.userAgentData?.getHighEntropyValues(this._highEntropyHints),e])||this._highEntropyHintsValues}_getVideoTargetingData(e){let t=e.tag,n=Vt(t.split(`?`)[1]);return Ht(this._getDecodedURI(n.get(`cust_params`)||``))}_getDecodedURI(e){try{return decodeURIComponent(e)}catch{return``}}get enabled(){return this._config.gam.isThirdPartyGam||this._eventStreamerExperiment.result}_callEventStreamer(e,t){fetch(`https://stormgate.production.raptive.com/v1`,{method:`POST`,headers:[[`Content-Type`,`application/json`]],body:JSON.stringify(e),keepalive:!0}).catch(e=>{E.error(`EventStreamerComponent`,`Failed to send ${t} event`,e)})}};tT=w([D(`EventStreamerComponent`),x(),N(0,b(J)),N(1,b(W)),N(2,b(X)),N(3,b(eS)),N(4,b(Dy)),N(5,b(eT))],tT);let nT=class extends I{constructor(e,t){super(),this._config=e,this._gamEventBus=t}init(){try{this._gamEventBus.slotOnload.once(()=>this.refreshExternal())}catch(e){E.error(`ExternalSlotsComponent`,`init`,e)}}refreshExternal(){Z.pushToQueue(()=>{let{account:e}=this._config.gam,t=window.googletag.pubads().getSlots().filter(t=>RegExp(`^\/?${e}\/`).exec(t.getAdUnitPath())===null).filter(e=>document.getElementById(e.getSlotElementId())!==null);t.length&&window.googletag.pubads().refresh(t)})}};nT=w([D(`ExternalSlotsComponent`),x(),N(0,b(J)),N(1,b(X))],nT);let rT={Version:`Version`,SharingNotice:`SharingNotice`,SaleOptOutNotice:`SaleOptOutNotice`,SharingOptOutNotice:`SharingOptOutNotice`,TargetedAdvertisingOptOutNotice:`TargetedAdvertisingOptOutNotice`,SensitiveDataProcessingOptOutNotice:`SensitiveDataProcessingOptOutNotice`,SensitiveDataLimitUseNotice:`SensitiveDataLimitUseNotice`,SaleOptOut:`SaleOptOut`,SharingOptOut:`SharingOptOut`,TargetedAdvertisingOptOut:`TargetedAdvertisingOptOut`,SensitiveDataProcessing:`SensitiveDataProcessing`,KnownChildSensitiveDataConsents:`KnownChildSensitiveDataConsents`,PersonalDataConsents:`PersonalDataConsents`,MspaCoveredTransaction:`MspaCoveredTransaction`,MspaOptOutOptionMode:`MspaOptOutOptionMode`,MspaServiceProviderMode:`MspaServiceProviderMode`,SubSectionType:`SubsectionType`,Gpc:`Gpc`},iT={NA:0,OptedOut:1,OptedIn:2},aT={"000000":`A`,"000001":`B`,"000010":`C`,"000011":`D`,"000100":`E`,"000101":`F`,"000110":`G`,"000111":`H`,"001000":`I`,"001001":`J`,"001010":`K`,"001011":`L`,"001100":`M`,"001101":`N`,"001110":`O`,"001111":`P`,"010000":`Q`,"010001":`R`,"010010":`S`,"010011":`T`,"010100":`U`,"010101":`V`,"010110":`W`,"010111":`X`,"011000":`Y`,"011001":`Z`,"011010":`a`,"011011":`b`,"011100":`c`,"011101":`d`,"011110":`e`,"011111":`f`,1e5:`g`,100001:`h`,100010:`i`,100011:`j`,100100:`k`,100101:`l`,100110:`m`,100111:`n`,101e3:`o`,101001:`p`,101010:`q`,101011:`r`,101100:`s`,101101:`t`,101110:`u`,101111:`v`,11e4:`w`,110001:`x`,110010:`y`,110011:`z`,110100:`0`,110101:`1`,110110:`2`,110111:`3`,111e3:`4`,111001:`5`,111010:`6`,111011:`7`,111100:`8`,111101:`9`,111110:`-`,111111:`_`},oT=class extends I{constructor(e,t,n,r,i,a,o,s){super(),this._gpc=e,this._ccpa=t,this._usCMP=n,this._context=r,this._ccpaComponent=i,this._ortb2=a,this._spaEventBus=o,this._consentEventBus=s,C(this,`ccpaRequired`,this._ccpa.required),C(this,`ccpaNotApplicable`,this._ccpa.ccpaNotApplicable),C(this,`gpcEnabled`,this._gpc.gpcEnabled),C(this,`gpcUpdated`,!1),C(this,`globalPrivacyControl`,window.navigator.globalPrivacyControl),C(this,`_sectionList`,[6,7]),C(this,`_supportedAPIs`,[`6:uspv1`,`7:usnat`]),C(this,`_usnatFieldOrder`,Object.values(rT)),C(this,`_usnatFields`,new Map([[rT.Version,{unencodedVal:1,fieldValLength:6}],[rT.SharingNotice,{unencodedVal:1,fieldValLength:2}],[rT.SaleOptOutNotice,{unencodedVal:1,fieldValLength:2}],[rT.SharingOptOutNotice,{unencodedVal:1,fieldValLength:2}],[rT.TargetedAdvertisingOptOutNotice,{unencodedVal:1,fieldValLength:2}],[rT.SensitiveDataProcessingOptOutNotice,{unencodedVal:0,fieldValLength:2}],[rT.SensitiveDataLimitUseNotice,{unencodedVal:0,fieldValLength:2}],[rT.SaleOptOut,{fieldValLength:2,optIn:iT.OptedIn,optOut:iT.OptedOut}],[rT.SharingOptOut,{fieldValLength:2,optIn:iT.OptedIn,optOut:iT.OptedOut}],[rT.TargetedAdvertisingOptOut,{fieldValLength:2,optIn:iT.OptedIn,optOut:iT.OptedOut}],[rT.SensitiveDataProcessing,{unencodedVal:[0,0,0,0,0,0,0,0,0,0,0,0],fieldValLength:24}],[rT.KnownChildSensitiveDataConsents,{unencodedVal:[0,0],fieldValLength:4}],[rT.PersonalDataConsents,{unencodedVal:0,fieldValLength:2}],[rT.MspaCoveredTransaction,{unencodedVal:2,fieldValLength:2}],[rT.MspaOptOutOptionMode,{unencodedVal:0,fieldValLength:2}],[rT.MspaServiceProviderMode,{unencodedVal:0,fieldValLength:2}],[rT.SubSectionType,{unencodedVal:0,fieldValLength:2}],[rT.Gpc,{unencodedVal:!!navigator.globalPrivacyControl,fieldValLength:1}]])),C(this,`_pingData`,this._setPingData()),C(this,`_sections`,this._setSections())}init(){let e=[...window.__gpp?.events||[]],t=[...window.__gpp?.queue||[]];window.__gpp=this._gpp.bind(this),window.__gpp.queue=t,this._usCMP.required?this._consentEventBus.usCmpConsentCaptured.on(()=>{this._initializeCoreGPPFunctions()},{handleEventsAlreadyEmitted:!0}):this._initializeCoreGPPFunctions(),e.forEach(e=>{this._addEventListener(e.callback,e.parameter||null)}),this._addLocatorFrame(),this._refreshPrivacyStrings(),this._spaEventBus.routeChanged.on(()=>{this._setPrebidGPPString()})}_setPingData(){return{gppVersion:`1.1`,cmpStatus:`loaded`,cmpDisplayStatus:`visible`,cmpId:1,supportedAPIs:this._supportedAPIs,signalStatus:this._usCMP.required&&this._usCMP.consent===null?`not ready`:`ready`,sectionList:this._sectionList,applicableSections:this._sectionList,gppString:this._createGPPString(),parsedSections:this._getParsedSections()}}_setSections(){return{tcfeuv1:null,tcfeuv2:null,"":null,"--":null,tcfca:null,uspv1:this._getParsedSections(),usnat:this._getUSNatObj(),usca:null,usva:null,usco:null,usut:null,usct:null}}_getParsedSections(){return{uspv1:this._ccpa.privacyString||null,usnat:this._getUSNatObj()}}_initializeCoreGPPFunctions(){this._enableEvents(),this._setPrebidGPPString(),this._refreshPingData()}_refreshPrivacyStrings(){this._pingData.gppString=this._createGPPString(),this._pingData.parsedSections&&this._pingData.parsedSections.uspv1&&(this._pingData.parsedSections.uspv1=this._callUSPAPI(`getUSPData`).uspString)}_refreshPingData(){this._usCMP.required?(this._pingData.signalStatus=this._usCMP.consent===null?`not ready`:`ready`,this._pingData.cmpDisplayStatus=this._usCMP.consent===null?`visible`:`hidden`):(this._pingData.signalStatus=`ready`,this._pingData.cmpDisplayStatus=`visible`)}_triggerEventCallbacks(e){let t=window.__gpp.events;if(t&&t.length){this._refreshPrivacyStrings();let n=this._pingData;t.forEach(t=>{let r={eventName:e,listenerId:t.id,data:this._getEventData(e),pingData:n};t.callback(r)})}}_getEventData(e){if(e===`sectionChange`)return this._supportedAPIs;if(e===`signalStatus`)return`ready`}_refreshGppData(){this._pingData=this._setPingData(),this._sections=this._setSections()}_enableEvents(){this._triggerEventCallbacks(`signalStatus`),this._ccpa.consentChange.on(()=>{this._refreshGppData(),this._triggerEventCallbacks(`sectionChange`),this._setPrebidGPPString(),this._triggerEventCallbacks(`signalStatus`)})}_setPrebidGPPString(){let e=this._createGPPString();this._ortb2.addOrtb2Reg(e,this._sectionList)}_addEventListener(e,t){window.__gpp=window.__gpp||{},window.__gpp.events=window.__gpp.events||[],`lastId`in window.__gpp||(window.__gpp.lastId=0),window.__gpp.lastId++;let n=window.__gpp.lastId;window.__gpp.events.push({id:n,callback:e,parameter:t}),e({eventName:`listenerRegistered`,listenerId:n,data:!0,pingData:this._pingData},!0)}_removeEventListener(e,t){let n=!1,r=t;window.__gpp=window.__gpp||{},window.__gpp.events=window.__gpp.events||[];for(let e=0;e<window.__gpp.events.length;e++)if(window.__gpp.events[e].id==r){window.__gpp.events.splice(e,1),n=!0;break}e({eventName:`listenerRemoved`,listenerId:r,data:n},!0)}_createUSNatString(){let e=this._usnatFieldOrder.reduce((e,t)=>`${e}${this._getUSNatData(t,!0)}`,``);if(e.length<66){let t=66-e.length;for(let n=0;n<t;n++)e=`${e}0`}return(e.match(/.{6}/g)||[]).map(e=>aT[e]||`A`).join(``)}_padStart(e,t){return e.padStart?e.padStart(t,`0`):`${e}${Array(t).join(`0`)}`}_encodedUSNat(e,t){let n=this._usnatFields.get(e)&&this._usnatFields.get(e).fieldValLength||0,r=(t>>>0).toString(2);return this._padStart(r,n)}_getUSNatData(e,t=!1){let n=this._usnatFields.get(e);if(!n)return``;if(n.unencodedVal!==void 0)return t?this._encodedUSNat(e,n.unencodedVal):n.unencodedVal;let r=this._ccpa.privacyString===this._ccpa.ccpaOptOut?n.optOut:n.optIn;return t?this._encodedUSNat(e,r||`0`):r}_getUSNatObj(){return this._usnatFieldOrder.map(e=>{let t=this._getUSNatData(e);return{[e]:t}}).reduce((e,t)=>({...e,...t}),{})}_getGPPData(){return{sectionId:3,gppVersion:1.1,sectionList:this._sectionList,applicableSections:this._sectionList,gppString:this._createGPPString(),pingData:this._pingData}}_hasSection(e){return!!this._sections[e]}_getSection(e){return this._sections[e]?this._sections[e]:null}_callUSPAPI(e){return this._ccpaComponent.uspapi(e,1,(e,t)=>{if(t)return e})}_getField(e){let t=e.split(`.`),n=t[0],r=t[1];if(this._hasSection(n)){if(n===`uspv1`)return this._callUSPAPI(r);if(n===`usnat`)return this._getUSNatData(r)}else return null}_addLocatorFrame(){if(document.getElementById(`__gppLocator`)===null){let e=document.createElement(`iframe`);e.style.display=`none`,e.id=`__gppLocator`,e.name=`__gppLocator`,document.body.appendChild(e),window.__gpp_msghandler=e=>{let t=typeof e.data==`string`,n;try{n=t?JSON.parse(e.data):e.data}catch{n=null}if(typeof n==`object`&&n&&`__gppCall`in n){let r=n.__gppCall;window.__gpp(r.command,(n,i)=>{let a={__gppReturn:{returnValue:n,success:i,callId:r.callId}};e.source.postMessage(t?JSON.stringify(a):a,`*`)},r.parameter)}}}(!(`__gpp`in window)||typeof window.__gpp!=`function`)&&(window.__gpp=window.__gpp_stub,window.addEventListener(`message`,window.__gpp_msghandler,!1),window.__gpp_addFrame(`__gppLocator`))}_createGPPString(){let e=this._callUSPAPI(`getUSPData`).uspString,t=this._createUSNatString();return`DBABzw~${e}~${t}`}_gpp(e,t,n){let r=typeof t==`function`;switch(e){case`ping`:return this._refreshGppData(),this._refreshPrivacyStrings(),r?t(this._pingData,!0):this._pingData;case`addEventListener`:return r?this._addEventListener(t,n):null;case`removeEventListener`:return r?this._removeEventListener(t,n):null;case`hasSection`:if(n){let e=this._hasSection(n);return r?t(e,!0):e}case`getSection`:if(n){let e=this._getSection(n);return r?t(e,!0):e}case`getField`:if(n){let e=this._getField(n);return r?t(e,!0):e}case`getGPPData`:return r?t(this._getGPPData()):this._getGPPData();default:break}}get enabled(){return this._context.country===`US`}};oT=w([D(`GPPComponent`),x(),N(0,b(mi)),N(1,b(U)),N(2,b(sr)),N(3,b(W)),N(4,b(GC)),N(5,b(Jf)),N(6,b(xc)),N(7,b(un))],oT);let sT=class extends I{constructor(e,t,n){super(),this._gdprEnforcement=e,this.gppComponent=t,this._config=n,C(this,`_cb`,null),C(this,`_facebookVendorId`,`s7`),C(this,`_fbEventsUrlPattern`,/connect\.facebook\.net\/en_US\/fbevents.js/),C(this,`_userInteractionEvents`,[`mousemove`,`keydown`,`touchstart`,`wheel`]),C(this,`_consent`,`revoke`),C(this,`_throttleInterval`,500)}init(){this.checkGPPConsentForFacebook(),this._config.gdpr.enabled&&this._gdprEnforcement.checkConsentOnLoad().then(e=>{e&&e.tcString?this.checkGDPRConsentForFacebook():this.listenForUserActionComplete()}).catch(()=>{})}checkGPPConsentForFacebook(){this.gppComponent.enabled&&(this._consent=this.gppComponent.gpcEnabled?`revoke`:`grant`,this._config.ccpa.consentChange.on(e=>{this._consent=e===this._config.ccpa.ccpaOptOut?`revoke`:`grant`,this.handleFacebookPixelConsent()}),this.handleFacebookPixelConsent())}checkGDPRConsentForFacebook(){this._gdprEnforcement.checkConsentForVendor(this._facebookVendorId,[1]).then(e=>{this._consent=e?`grant`:`revoke`,this.handleFacebookPixelConsent()}).catch(()=>{})}listenForUserActionComplete(){window.__tcfapi(`addEventListener`,2,(e,t)=>{t&&e&&e.eventStatus===`useractioncomplete`&&this.checkGDPRConsentForFacebook()})}checkFBEventsJSExists(){return Array.from(document.querySelectorAll(`head > script:not([src]), body > script:not([src])`)).some(e=>this._fbEventsUrlPattern.test(e.innerHTML))}removeUserInteractionListeners(){this._cb&&=(this._userInteractionEvents.forEach(e=>window.removeEventListener(e,this._cb)),null)}addUserInteractionListeners(e){this._cb=Ao(()=>{e()&&this.removeUserInteractionListeners()},this._throttleInterval,{leading:!1}),this._userInteractionEvents.forEach(e=>window.addEventListener(e,this._cb))}handleFacebookPixelConsent(){window.fbq&&typeof window.fbq==`function`?(window.fbq(`consent`,this._consent),this.removeUserInteractionListeners()):!this._cb&&this.checkFBEventsJSExists()&&this.addUserInteractionListeners(this.handleFacebookPixelConsent.bind(this))}get enabled(){return this._config.gdpr.enabled||this.gppComponent.enabled}};sT=w([D(`FacebookPixelComponent`),x(),N(0,b(gp)),N(1,b(oT)),N(2,b(J))],sT);let cT=class extends I{constructor(e,t,n,r,i,a){super(),this._gam=e,this._gdprEvents=t,this._config=n,this._context=r,this._gdprEnforcement=i,this._spaEventBus=a}init(){let e=this._context.isFirstPageview?`1`:`0`,t=[1];this._config.gdpr.enabled?this._gdprEvents.consentResponseCaptured.on(()=>{this._gdprEnforcement.checkConsentForVendor(this._config.gdpr.raptiveVendorId,t).then(t=>{t&&this.setFPV(e)}).catch(()=>{})}):this.setFPV(e),this.handleSPARouteChange()}setFPV(e=`0`){+e&&L.setInternalLocalStorage(`adthrive_fpv`,new Date().toString()),this._gam.setTargeting({key:`fpv`,value:e})}handleSPARouteChange(){this._spaEventBus.routeChanged.on(()=>{this._context.isFirstPageview=!1,this.setFPV(`0`),L.setInternalLocalStorage(`adthrive_session_fpv`,L.readInternalLocalStorage(`adthrive_session_fpv`)===null)})}};cT=w([D(`FirstPageviewComponent`),x(),N(0,b(Z)),N(1,b(mp)),N(2,b(J)),N(3,b(W)),N(4,b(gp)),N(5,b(xc))],cT);let lT=class extends V{init(){this._key=`PaapiBuyerTimeout`,this._lookup=`PAAPIBTO`}};lT=w([S()],lT);let uT=class extends V{init(){this._key=`PaapiReportingTimeout`,this._lookup=`PAAPIRTO`}};uT=w([S()],uT);let dT=class extends V{init(){this._key=`PaapiSellerTimeout`,this._lookup=`PAAPISTO`}};dT=w([S()],dT);let fT=class extends I{constructor(e,t,n,r,i,a,o){super(),this._config=e,this._context=t,this._gam=n,this._prebidMethods=r,this._paapiBuyerTimeoutExperiment=i,this._paapiSellerTimeoutExperiment=a,this._paapiReportingTimeoutExperiment=o,C(this,`_ownerUrl`,void 0),C(this,`_sellerUrl`,void 0),C(this,`_decisionLogicUrl`,void 0),C(this,`_bidderCodeList`,[G.OpenX,G.OpenXServer,G.Criteo,G.IndexExchange,G.Rubicon,G.CriteoServer]),this._ownerUrl=`https://${this._context.host}`,this._sellerUrl=`https://${this._context.privacySandboxHost}`,this._decisionLogicUrl=this._getDecisionLogicUrl()}get enabled(){return this._config.fledge.enabled}init(){this.enabled&&(this._gam.setTargeting({key:`fledge`,value:`true`}),this._setPrebidPAAPIConfig())}_getDecisionLogicUrl(){return`https://${this._context.privacySandboxHost}/decision-logic.js`}_setPrebidPAAPIConfig(){let e=this._paapiBuyerTimeoutExperiment.result??500,t=this._paapiSellerTimeoutExperiment.result??500,n=this._paapiReportingTimeoutExperiment.result??500,r={seller:this._sellerUrl,decisionLogicUrl:this._decisionLogicUrl,interestGroupBuyers:[this._ownerUrl,`https://grid-mercury.criteo.com`,`https://ads.optable.co`],auctionSignals:{raptive:{...E.data,debug:this._context.debug,chromeLabel:this._config.fledge.cookieDeprecationLabel,siteId:this._config.site.id,siteName:this._config.site.name,pvk:this._context.pageviewKey,sess:this._context.sessionKey,deployment:this._context.deployment,branch:this._context.branch,bucket:this._context.bucket}},perBuyerTimeouts:{"*":e},perBuyerCumulativeTimeouts:{"*":e},sellerTimeout:t,reportingTimeout:n},i={enabled:!0,defaultForSlots:1,bidders:this._bidderCodeList,componentSeller:{auctionConfig:r,separateAuctions:!1},parallel:!1,gpt:{configWithTargeting:!1}};this._prebidMethods.setConfig({paapi:i},!1)}};fT=w([D(`FledgeComponent`),S(),N(0,b(J)),N(1,b(W)),N(2,b(Z)),N(3,b(P)),N(4,b(lT)),N(5,b(dT)),N(6,b(uT))],fT);let pT=class extends V{init(){this._key=`LazyFloorMultiplier`,this._lookup=`BPFLMULT2`}get result(){return this._result}};pT=w([S()],pT);var mT=class extends I{constructor(e,t){super(),this._config=e,this._prebidMethods=t,C(this,`_expirationThreshold`,5),C(this,`_host`,window.location.hostname)}_setValues(e,t,n){e.values[`${this._host}|${t}`]=n>0?n:0}_getDefaultFloorConfig(){return{...wv(this._config.floors.defaultFloorData),modelVersion:`legacy.${this.floorsType}`}}_updateBidTTL(e,t,n=``){(n?this._prebidMethods.getBidResponsesForBidPoolId(n):this._prebidMethods.getBidResponsesForAdUnitCode(e)).bids.filter(e=>e.status!==`rendered`&&e.ttl&&!e.expired&&!e.sharedBidInUse).forEach(n=>{let r=n.responseTimestamp,i=n.ttl,a=(e.includes(H.Video_StickyOutstream)?this._config.prebid.multistageStickyOutstreamActive:this._config.prebid.multistageActive)?2:1,o=i-this._expirationThreshold*a;Number(r)+Number(o)*1e3<t&&(n.ttl=0,n.expired=!0)})}};let hT=class extends mT{constructor(e,t,n,r,i,a,o){super(e,t),this._config=e,this._prebidMethods=t,this._floorsExperiment=n,this._slotManagerEventBus=r,this._lazyFloorMultiplierExperiment=i,this._floorsEventBus=a,this._slots=o,C(this,`floorsType`,Zr.lazyBidPool),C(this,`_enabledAdUnits`,[H.Content,H.Recipe,H.Below_Post])}init(){this._slotManagerEventBus.requestingBids.on(e=>this.handleRequestingBids(e))}handleRequestingBids(e){let t=this._slots.get(e)||[];this._prebidMethods.addToQueue(()=>{this._setLazyBidPoolFloors(t.filter(e=>this._enabledAdUnits.includes(e.location)&&!e.refreshCount&&e.lazy&&e.bidPoolId).map(e=>({adUnitCode:e.id,refreshCount:e.refreshCount,bidPoolId:e.bidPoolId})))})}_getLazyMultiplier(){let e=this._lazyFloorMultiplierExperiment.result;return typeof e==`number`?e:1}_getFloorValue(e,t,n,r){this._updateBidTTL(e,t,r);let[i]=r?this._prebidMethods.getHighestCpmBidsForPoolId(r):this._prebidMethods.getHighestCpmBids(e);return i?.cpm*n}_setLazyBidPoolFloors(e){let t=this._getDefaultFloorConfig(),n=this._getLazyMultiplier();for(let r of e){let{adUnitCode:e,bidPoolId:i}=r,a=Jn(),o=this._getFloorValue(e,a,n,i);o&&this._setValues(t,e,o),this._floorsEventBus.storeModuleFloorData.emit({floorData:t,type:this.floorsType,code:r.adUnitCode})}}get active(){return this.enabled}get enabled(){return this._floorsExperiment.result.legacy===!0}};hT=w([D(`FloorsLazyBidPoolComponent`),x(),N(0,b(J)),N(1,b(P)),N(2,b(ei)),N(3,b($f)),N(4,b(pT)),N(5,b(vp)),N(6,b(Y))],hT);let gT=class extends mT{constructor(e,t,n,r){super(e,t),this._config=e,this._prebidMethods=t,this._floorsExperiment=n,this._floorsEventBus=r,C(this,`floorsType`,Zr.raptive)}init(){let e=this._config.floors.floorsData;e?this._createFloorsMap(e):this._config.floors.floorsDataReady.once(()=>{this._createFloorsMap(this._config.floors.floorsData)})}_createFloorsMap(e){if(e&&Object.keys(e).length){let t=this._floorsExperiment.result,n=t.fbrap||t.raptive,r=(e?.modelGroups?.[0])?.schema?.fields||[];this._config.floors.setAdditionalSchemaFields(r),n&&this._floorsEventBus.storeRaptiveFloorData.emit(e)}else E.error(`FloorsRaptiveComponent`,`init`,`Raptive floor data not found`)}get active(){return this.enabled}get enabled(){return this._floorsExperiment.result.raptive}};gT=w([D(`FloorsRaptiveComponent`),x(),N(0,b(J)),N(1,b(P)),N(2,b(ei)),N(3,b(vp))],gT);let _T=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`AdditiveRefreshFloors`,this._lookup=`ARF`}};_T=w([S()],_T);let vT=class extends V{init(){this._key=`FloorsStickyOutstreamRefresh`,this._lookup=`REFSOFLR`}};vT=w([S()],vT);let yT={banner:`banner`,instream:`instream`,stickyOutstream:`stickyOutstream`},bT=class extends mT{constructor(e,t,n,r,i,a,o,s,c){super(e,t),this._config=e,this._prebidMethods=t,this._videoRequestManager=n,this._floorsExperiment=r,this._stickyOutstreamExperiment=i,this._slotManagerEventBus=a,this._floorsEventBus=o,this._additiveRefreshFloorsExperiment=s,this._slots=c,C(this,`floorsType`,Zr.refresh),C(this,`_raptiveMLSkipRate`,void 0),C(this,`_stickyOutstreamMLEnabled`,!1),C(this,`_multipliers`,new Map([[yT.banner,{low:1.3,high:1.1}],[yT.instream,{low:1.3,high:1.1}],[yT.stickyOutstream,{low:1.1,high:1}]])),this._raptiveMLSkipRate=this._config.floors.raptiveMLRefreshFloors?.skipRate;let l=this._stickyOutstreamExperiment.result;typeof l==`number`&&l>0?this._multipliers.set(yT.stickyOutstream,{low:l,high:l}):l===`ml`&&(this._stickyOutstreamMLEnabled=!0)}init(){this._slotManagerEventBus.refreshAuctionStart.on(e=>this._handleBannerRefreshAuction(e)),this._videoRequestManager.refreshingVideoBids.on(e=>this._handleInstreamRefreshAuction(e))}_handleBannerRefreshAuction(e){let t=this._slots.get(e);this._prebidMethods.addToQueue(()=>{this._setRefreshFloors(t.map(e=>({adUnitCode:e.id,refreshCount:e.refreshCount,bidPoolId:e.bidPoolId,setSlotTargetingFlag:(t,n,r)=>{e.setSlotTargetingFlag(t,n,r)}})))})}_handleInstreamRefreshAuction(e){this._prebidMethods.addToQueue(()=>{this._setRefreshFloors(e.map(e=>({adUnitCode:e.name,refreshCount:e.prerollNum})))})}_getFloorData(e,t,n,r,i){let a,o,s=0,c,l;if(i)({multiplier:o,multiplierWeight:c,addition:s,additionWeight:l}=this._getRefreshInflateMultiplierWithWeight(r,t,n)),a=e&&Math.max(e*o+s,0);else{let i=r<=5?`low`:`high`,s=this._getMultiplierType(t,n);o=this._multipliers.get(s)[i],a=e&&Math.max(e*o,0)}return{floor:a,multiplier:o,addition:s,multiplierWeight:c,additionWeight:l}}_getMultiplierType(e,t){let n=yT.banner;return e?n=yT.instream:t&&(n=yT.stickyOutstream),n}_getHighestCPM(e,t,n){this._updateBidTTL(e,t,n);let[r]=n?this._prebidMethods.getHighestCpmBidsForPoolId(n):this._prebidMethods.getHighestCpmBids(e),i=this._config.floors.amazonSlotCpm.get(e)||0,a=r?.cpm||0;return Math.max(a,i)}_generateFloorData(e){let{adUnitCode:t,bidPoolId:n,refreshCount:r}=e,i=Jn(),a=this._getHighestCPM(t,i,n),o=this._config.video.instreamAdUnits.has(t),s=t.includes(H.Video_StickyOutstream),{shouldUseRaptiveInflators:c,isRaptiveSkipApplied:l,canApplyRaptiveMLRefreshInflators:u}=this._shouldApplyRaptiveMLRefreshFloors(s),{floor:d,multiplier:f,addition:p,multiplierWeight:m,additionWeight:h}=this._getFloorData(a,o,s,r,c);return{cpm:a,floor:d,multiplier:f,addition:p,multiplierWeight:m,additionWeight:h,isInstream:o,shouldUseRaptiveInflators:c,canApplyRaptiveMLRefreshInflators:u}}_setRefreshFloors(e){let t=this._getDefaultFloorConfig();for(let n of e){let e=n.adUnitCode,{cpm:r,floor:i,isInstream:a,multiplier:o,addition:s,shouldUseRaptiveInflators:c,multiplierWeight:l,additionWeight:u,canApplyRaptiveMLRefreshInflators:d}=this._generateFloorData(n);i?(this._setValues(t,e,i),this._setFmlriTargetingFlagSlot(i,n,a,o,s,l,u,!c,d)):r&&this._setFmlriTargetingFlagSlot(r,n,a,o,s,l,u,!c,d),this._floorsEventBus.storeModuleFloorData.emit({floorData:t,type:this.floorsType,code:n.adUnitCode,cpm:r,floor:i})}}_setFmlriTargetingFlagSlot(e,t,n,r,i,a,o,s,c){let{adUnitCode:l,setSlotTargetingFlag:u}=t,d=`${e}@${r}@${i}@${a??0}@${o??0}${c?s?`h`:``:`e`}`;u?u(`fmlri`,[d],!0):n&&this._config.video.setVideoFlagSlot(l,{fmlri:d})}_shouldApplyRaptiveMLRefreshFloors(e=!1){let t=e?!this._stickyOutstreamMLEnabled:!1,n=this._floorsExperiment.result.fbrap&&this._raptiveMLSkipRate!==void 0,r=new rn((this._raptiveMLSkipRate??0)/100).get();return{shouldUseRaptiveInflators:n&&!r&&!t,isRaptiveSkipApplied:n&&r,canApplyRaptiveMLRefreshInflators:n}}_getRefreshInflateMultiplierWithWeight(e,t,n){let{inflator:r=[],defaultInflatorMultipliers:i=[],defaultInflatorAdditions:a=[],defaultInstreamInflatorMultipliers:o=[],defaultInstreamInflatorAdditions:s=[],defaultStickyOutstreamMultipliers:c=[],defaultStickyOutstreamInflatorAdditions:l=[],inflatorWeights:u}=this._config.floors.raptiveMLRefreshFloors,d=Qi(u),f=Qi(u),p=0;if(d.index===-1)return{multiplier:1,addition:p,multiplierWeight:-1,additionWeight:-1};let m=r.find(t=>e>=t.minRefresh&&e<=t.maxRefresh),h,g;return t?(h=m?.instreamMultipliers??o,g=m?.instreamAdditions??s):n?(h=m?.stickyOutstreamMultipliers??c,g=m?.stickyOutstreamAdditions??l):(h=m?.multipliers??i,g=m?.additions??a),this._additiveRefreshFloorsExperiment.result&&g[f.index]&&(p=g[f.index]),{multiplier:h[d.index]||1,addition:p,multiplierWeight:d.weight,additionWeight:f.weight}}get active(){return this.enabled}get enabled(){return this._floorsExperiment.result.legacy===!0}};bT=w([D(`FloorsRefreshComponent`),x(),N(0,b(J)),N(1,b(P)),N(2,b(lp)),N(3,b(ei)),N(4,b(vT)),N(5,b($f)),N(6,b(vp)),N(7,b(_T)),N(8,b(Y))],bT);let xT=(e,t)=>{if(e.length<=1)return 0;if(e.sort((e,t)=>e-t),t<=0)return e[0];if(t>=1)return e[e.length-1];let n=t*(e.length+1),r=Math.floor(n)-1,i=r+1,a=Number((n%1).toFixed(1));return n<1?e[0]:i>=e.length?e[r]:e[r]+a*(e[i]-e[r])},ST=(e,t)=>Math.floor(e*1e5).toString(t),CT=(e,t)=>parseInt(e,t)/1e5,wT=(e,t=33)=>Object.keys(e).reduce((n,r)=>{let i=e[r].map(e=>CT(e,t));return{...n,[r]:[...i]}},{}),TT=(e,t=33)=>Object.keys(e).reduce((n,r)=>{let i=e[r].map(e=>ST(e,t));return{...n,[r]:i}},{}),ET=(e,t)=>{e.length>=t&&e.splice(Math.floor(Math.random()*e.length),1)},DT=class extends V{init(){this._key=`SessionFloorDisplayPercentileExperiment`,this._lookup=`SESFLRDIS`}get result(){return this._result}};DT=w([S()],DT);let OT=class extends V{init(){this._key=`SessionFloorStickyOutstreamPercentileExperiment`,this._lookup=`SESFLRSO`}get result(){return this._result}};OT=w([S()],OT);let kT=class extends V{init(){this._key=`SessionFloorVideoPercentileExperiment`,this._lookup=`SESFLRVID2`}get result(){return this._result}};kT=w([S()],kT);let AT=class extends mT{constructor(e,t,n,r,i,a,o,s,c,l,u,d){super(e,t),this._config=e,this._prebidMethods=t,this._videoRequestManager=n,this._floorsExperiment=r,this._spaEventBus=i,this._slotManagerEventBus=a,this._slotEventBus=o,this._displaySessionPercentileExperiment=s,this._stickyOutstreamSessionPercentileExperiment=c,this._videoSessionPercentileExperiment=l,this._floorsEventBus=u,this._slots=d,C(this,`floorsType`,Zr.session),C(this,`_savedBids`,void 0),C(this,`_percentile`,.6),C(this,`_rdx`,33),C(this,`_defaultSavedBids`,{Content:[],Recipe:[],Header:[],Below_Post:[],Sidebar:[],Footer:[],"Video_In-Post_ClicktoPlay_SoundOn":[],Video_Collapse_Autoplay_SoundOff:[],Video_Individual_Autoplay_SOff:[],Video_Coll_SOff_Smartphone:[],Video_StickyOutstream_1:[],Video_StickyOutstream:[]}),C(this,`_eventListenersSet`,!1),C(this,`_offEvents`,[()=>{}]),C(this,`_sessionNonFPV`,L.readInternalLocalStorage(`adthrive_session_fpv`)===!1);let f=L.readInternalLocalStorage(`adthrive_bc`);this._savedBids={...this._defaultSavedBids,...f&&wT(f,this._rdx)}}init(){this._eventListenersSet||this._setupEventListeners()}_setupEventListeners(){this._eventListenersSet=!0,this._spaEventBus.routeChanged.on(()=>{this._eventListenersSet=!1,this._offEvents.forEach(e=>{e()}),this._offEvents=[],this.init()}),this._offEvents.push(this._slotManagerEventBus.requestedBids.on(e=>this._handleRequestedBids(e)),this._slotEventBus.amazonBidResponseReceived.on(e=>this._handleAmazonDisplayBidResponse(e)),this._videoRequestManager.requestingVideoBids.on(e=>this._handleRequestingVideoBids(e)),this._videoRequestManager.amazonVideoBidResponseReceived.on(e=>this._handleAmazonVideoBidResponse(e)),...this._sessionNonFPV?[this._slotManagerEventBus.requestingBids.on(e=>this._handleRequestingBids(e))]:[])}_handleRequestingBids(e){(this._slots.get(e)||[]).filter(e=>Object.keys(this._savedBids).includes(e.location)).forEach(e=>{let{floor:t,percentile:n,sessionFloorData:r}=this._getFloorValues(e.location,e.id);e.setSlotTargetingFlag(`fmlsi`,[`${t}@${n}`],!0),this._floorsEventBus.storeModuleFloorData.emit({floorData:r,type:this.floorsType,code:e.id})})}_handleAmazonDisplayBidResponse(e){e.forEach(({location:e,cpm:t,slotId:n})=>{Object.keys(this._savedBids).includes(e)&&t>0&&this._prebidMethods.addToQueue(()=>{this._saveAmazonSlotBid(n,t,e)})}),L.setInternalLocalStorage(`adthrive_bc`,TT(this._savedBids,this._rdx))}_handleRequestingVideoBids(e){e.forEach(e=>{if(Object.keys(this._savedBids).includes(e.name)&&(this._prebidMethods.addToQueue(()=>{this.saveVideoSlotBids(e)}),this._sessionNonFPV)){let{floor:t,percentile:n,sessionFloorData:r}=this._getFloorValues(e.name);this._config.video.setVideoFlagSlot(e.name,{fmlsi:[`${t}@${n}`]}),this._floorsEventBus.storeModuleFloorData.emit({floorData:r,type:this.floorsType,code:e.name})}}),L.setInternalLocalStorage(`adthrive_bc`,TT(this._savedBids,this._rdx))}_handleAmazonVideoBidResponse(e){e.forEach(({video:e,cpm:t})=>{Object.keys(this._savedBids).includes(e.name)&&t>0&&this._prebidMethods.addToQueue(()=>{this._saveAmazonVideoSlotBid(e,t)})}),L.setInternalLocalStorage(`adthrive_bc`,TT(this._savedBids,this._rdx))}_getFloorValues(e,t){let n=this._getDefaultFloorConfig(),r=this._getPercentile(e),i=xT(this._savedBids[e],r);return i>0&&this._setValues(n,t??e,i),{floor:i,percentile:r,sessionFloorData:n}}_handleRequestedBids(e){this._slots.get(e).forEach(e=>{Object.keys(this._savedBids).includes(e.location)&&this._prebidMethods.addToQueue(()=>{this.saveSlotBids(e)})}),L.setInternalLocalStorage(`adthrive_bc`,TT(this._savedBids,this._rdx))}_saveBids(e,t){this._prebidMethods.getBidResponsesForAdUnitCode(e).bids.forEach(n=>{ET(this._savedBids[t??e],1e3),n.cpm&&this._savedBids[t??e].push(n.cpm)})}saveSlotBids(e){this._saveBids(e.id,e.location)}_saveAmazonSlotBid(e,t,n){ET(this._savedBids[n],1e3),t&&this._savedBids[n].push(t)}saveVideoSlotBids(e){this._saveBids(e.name)}_saveAmazonVideoSlotBid(e,t){ET(this._savedBids[e.name],1e3),t&&this._savedBids[e.name].push(t)}_getPercentile(e){let t;return t=e.includes(H.Video_StickyOutstream)?this._stickyOutstreamSessionPercentileExperiment.result:e.includes(`Video`)?this._videoSessionPercentileExperiment.result:this._displaySessionPercentileExperiment.result,t||this.defaultPercentile}get defaultPercentile(){return this._percentile}get active(){return this.enabled&&this._sessionNonFPV}get enabled(){return this._floorsExperiment.result.legacy===!0}};AT=w([D(`FloorsSessionComponent`),x(),N(0,b(J)),N(1,b(P)),N(2,b(lp)),N(3,b(ei)),N(4,b(xc)),N(5,b($f)),N(6,b(Hs)),N(7,b(DT)),N(8,b(OT)),N(9,b(kT)),N(10,b(vp)),N(11,b(Y))],AT);let jT=class extends I{get prioritizedFloorsByUnit(){return this._prioritizedFloorsByUnit}get floorAbbrv(){return this._floorAbbrv}get skipAbbrv(){return this._skipAbbrv}constructor(e,t,n,r,i,a,o,s,c,l,u,d){super(),this._config=e,this._floorsConfig=t,this._prebidMethods=n,this._prebidEventBus=r,this._slotEventBus=i,this._videoEventBus=a,this._floorsEventBus=o,this._slots=d,C(this,`_prioritizedFloorsByUnit`,new Map),C(this,`_raptiveFloors`,void 0),C(this,`_floorPriority`,this._config.floors.cmPriority),C(this,`_floorResetTypes`,[Zr.refresh,Zr.lazyBidPool,Zr.lazy]),C(this,`_vidDiscountRules`,{}),C(this,`_host`,window.location.hostname),C(this,`_floorAbbrv`,{[Zr.refresh]:`lr`,[Zr.lazyBidPool]:`lbp`,[Zr.lazy]:`ll`,[Zr.session]:`ls`}),C(this,`_skipAbbrv`,{random:`sr`,not_found:`se`,session:`sks`,lazy:`sl`}),C(this,`_refreshFloors`,new Map),C(this,`_auctionFloors`,new Map),C(this,`_floorsComponents`,void 0),C(this,`_activeFloorComponentTargeting`,[]),this._floorsComponents=[s,c,l,u].filter(e=>e.enabled)}init(){this._setupEventListeners(),this._setVideoDiscountRules(),this._initiateSubComponents()}_initiateSubComponents(){this._floorsComponents.forEach(e=>{let t=e.floorsType,n=t!==`raptive`;e.init(),e.active&&(this._floorsConfig.addActiveFloorsType(t),n&&this._activeFloorComponentTargeting.push((this._floorAbbrv[t]??t).slice(0,2)))})}getDefaultFloorConfig(){return{...wv(this._floorsConfig.defaultFloorData)}}_setupEventListeners(){let{fbrap:e,legacy:t}=this._floorsConfig.floorsExperiment,n=t||e,r=n?`on`:`once`;this._handleAuctionRequestEvents(r),this._handleAuctionEndEvents(n),this._handleFloorEvents(),this._handleAddedEvent()}_handleAddedEvent(){let e=this._activeFloorComponentTargeting;this._slotEventBus.addSlots.on(t=>{this._slots.get(t).forEach(t=>t.setSlotTargetingFlag(`fle`,e,!0))}),this._videoEventBus.videoPlayerAdded.on(t=>{t.forEach(t=>t.eligibleFloorComponents=e)})}_handleFloorEvents(){this._floorsEventBus.storeModuleFloorData.on(e=>this._storeLegacyFloorData(e)),this._floorsEventBus.storeRaptiveFloorData.on(e=>this._storeRaptiveFloorData(e)),this._floorsEventBus.setAuctionFloorData.on(e=>this._setAuctionFloorData(e)),this._floorsEventBus.clearAllFloorData.on(()=>{this._handleClearAllFloorData()})}_handleAuctionRequestEvents(e){e?(this._slotEventBus.preRequestBids[e](this._setBannerAuctionFloor.bind(this)),this._videoEventBus.preRequestVideoBids[e](this._setVideoAuctionFloor.bind(this))):this._setLocationAuctionFloor()}_handleAuctionEndEvents(e){this._prebidEventBus.auctionEnd.on(t=>this._handleAuctionEnd(t,e)),this._slotEventBus.auctionsCompleted.on(e=>this._handleSlotAuctionComplete(e)),this._videoEventBus.auctionsCompleted.on(e=>this._handleVideoAuctionComplete(e))}_storeLegacyFloorData(e){let t=e.cpm;if(t&&this._refreshFloors.set(e.code,t),!Object.keys(e.floorData.values||{}).length)return;let n={...this._prioritizedFloorsByUnit.get(e.code),[e.type]:{floorData:e.floorData,...t&&{cpm:t}}};this._prioritizedFloorsByUnit.set(e.code,n)}_storeRaptiveFloorData(e){this._raptiveFloors=e}_setAuctionFloorData({auctionId:e,price:t,floorData:n,bidder:r}){this._auctionFloors.set(e,{price:t,floorData:n,bidder:r})}_handleAuctionEnd(e,t){t&&e.adUnitCodes.forEach(e=>this._clearRefreshFloorValue(`${this._host}|${e}`))}_handleSlotAuctionComplete(e){this._slots.get(e).forEach(e=>{this._clearRefreshFloorValue(e.id),this._setSlotFloorTargeting(e)})}_handleVideoAuctionComplete(e){e.forEach(e=>{this._clearRefreshFloorValue(e.name),this._setVideoFloorTargeting(e)})}_handleClearAllFloorData(){this._prioritizedFloorsByUnit=new Map}_setVideoDiscountRules(){Object.keys(A).forEach(e=>{let t=`${this._host}|${A[e]}`;this._vidDiscountRules[t]=1e-5})}_getCombinedLegacyData(e,t){let n=this.getDefaultFloorConfig();n.modelVersion=`legacy.${t}`;for(let e of this._prioritizedFloorsByUnit.values())for(let t of this._floorPriority){let r=e[t]?.floorData;if(r){n.values={...n.values||{},...r.values},n.modelWeight=100;break}}return n.values={...n.values,...e.values},n}_clearRefreshFloorValue(e){this._floorResetTypes.forEach(t=>{let n=this._prioritizedFloorsByUnit.get(e),r=n?.[t]?.floorData,i=r?.values[e];r&&i&&(delete n[t],this._config.floors.savePriorityFloorData(e,r,t))})}_awaitRaptiveMLFloorsLoaded(){return this._config.floors.raptiveMLFloorsEventPromise}async _setBannerAuctionFloor(e){this._config.floors.raptiveMLFloorsLoaded||await this._awaitRaptiveMLFloorsLoaded(),this._slots.get(e).forEach(e=>{let t=e.prebidAdUnit?.[0]?.code;this._setLocationAuctionFloor(t,e)})}async _setVideoAuctionFloor(e){this._config.floors.raptiveMLFloorsLoaded||await this._awaitRaptiveMLFloorsLoaded(),e.videos.forEach(e=>{let t=e.name;this._setLocationAuctionFloor(t,e)})}_setLocationAuctionFloor(e,t){!e||!t||this._setAuctionFloor(e,t)}_setAuctionFloor(e,t){let n={},r=this._raptiveFloors,i=this._floorPriority;this._setLegacyFloorValues(n,i,e,t),n={floors:r,type:Zr.raptive,...n};let a=this._excludeSettingFloors(n.type);n.floors?.modelGroups.length?(this._setAmazonFloors(n.floors,n.floors.currency,n.type,a),this._setPrebidFloors(n.floors,n.type,n.type===Zr.raptive,a)):(this._setPrebidFloors(this._getBackupFloorValues(),Zr.fallback,!1),this._setAmazonFloors(this._getBackupFloorValues(),`USD`,n.type))}_setLegacyFloorValues(e,t,n,r){let i=[],a=!1;for(let r=0;r<=t.length;r++){let o=this._prioritizedFloorsByUnit.get(n)?.[t[r]]?.floorData;o?.values?.[`${this._host}|${n}`]&&(a||(e.floors=this._getLegacyFloorsSchema(o,t[r]),e.type=t[r]),i.push(t[r]),a=!0)}let o=i.map(e=>(this._floorAbbrv[e]??e).slice(0,2));`id`in r?r.setSlotTargetingFlag(`fla`,o.length?o:[`none`],!0):r.appliedFloorComponents=o}_getBackupFloorValues(){return this._getLegacyFloorsSchema({values:{...this._vidDiscountRules},schema:{}},Zr.fallback)}_getLegacyFloorsSchema(e,t){let n=this._getCombinedLegacyData(e,t),r=Zr.lazy===t||Zr.session===t?1:0,i=this._config.floors;return!i.floorsExperiment.fbrap&&i.floorsData||{floorProvider:`legacy`,floorProviderType:t,floorsSchemaVersion:2,currency:`USD`,modelGroups:[{modelWeight:100,modelVersion:`legacy`,...n,skipRate:r}]}}_excludeSettingFloors(e){if(!e||e&&!this._config.floors.floorsTypeExcludes.has(e))return!1;let{ccpa:t,gdpr:n}=this._config,r=t.enabled&&t.ccpaOptOut===t.privacyString,i=n.enabled&&n.revokedPurposeConsent;return e&&(r||i)}_setPrebidFloors(e,t,n,r=!1){let i=r?{}:{floors:{enforcement:{enforceJS:!1},data:e,...n&&{additionalSchemaFields:this._config.floors.customSchemaFields}}};this._prebidMethods.setConfig(i,!1)}_setAmazonFloors(e,t=`USD`,n=``,r=!1){let i=[],a=(e?.modelGroups?.[0]||{})?.values||{},o=n===`raptive`;Object.keys(a).forEach(e=>{let n=e.split(`|`),s=n.length&&n[o?this._config.floors.getSchemaFieldOrder(`adUnitCode`)??1:1]||e,c=s;if(o&&n.length>2){let e=n[this._config.floors.getSchemaFieldOrder(`hvp`)||1];c=`${s}-${e}`}i.push({code:c.toLowerCase(),value:r?0:a[e],currency:t||`USD`})}),this._floorsEventBus.setAmazonFloors.emit(i)}_getTargetingValue(e){let t=e?.modelVersion,n=e.floorProviderType??t?.replace(`legacy.`,``),r=e?.floorProvider===`legacy`&&(n&&this._floorAbbrv[n]||`L`),i=!1;e?.skipped&&(i=this._skipAbbrv[e.skippedReason]||`s`,i===`se`&&E.event(`Floors`,`_getTargetingValue`,`fv:se`));let a=r?-1:t&&e?.modelTimestamp||0;return{modelVersion:i||r||t||`none`,modelTimestamp:a,isLegacy:r}}_getLoggedFloorValuesForAdUnit(e,t){let n=t?`:`:`%3A`,r=[];return this._config.floors.activeFloorsTypes.forEach(t=>{let i=this._prioritizedFloorsByUnit.get(e),a=i?.[t]?.cpm,o=i?.[t]?.floorData,s=a||(o?.values?.[`${this._host}|${e}`]??0);s&&r.push(`${Qr[t]}${n}${s.toFixed(4)}`)}),r.length,r}_getFloorTargeting(e,t){let n=t?t.prebidAdUnit?.[0]:this._getVideoPlayerPrebidUnit(e),r=this._getLoggedFloorValuesForAdUnit(e,!0),{floorPrice:i,floorData:a,bidder:o}=this.getAuctionFloors(n?.lastAuctionId),{modelVersion:s,modelTimestamp:c,isLegacy:l}=this._getTargetingValue(a);return a?.skipped,{bidder:o,fcv:r,floorPrice:i,modelTimestamp:c,modelVersion:s,shouldSendModelTimestamp:!l&&Number(c)>=0}}_getVideoPlayerPrebidUnit(e){return(this._prebidMethods.isPrebidLoaded()&&this._prebidMethods.getPrebidAdUnits()||[]).filter(t=>t.code===e)[0]}_setSlotFloorTargeting(e){let{bidder:t,fcv:n,floorPrice:r,modelTimestamp:i,modelVersion:a,shouldSendModelTimestamp:o}=this._getFloorTargeting(e.id,e);e.setSlotTargetingFlag(`fv`,[a],!0),e.setSlotTargetingFlag(`hbf`,[r],!0),e.setSlotTargetingFlag(`hbb`,[t??`none`],!0),o&&e.setSlotTargetingFlag(`flrti`,[`${i}`],!0),n.length&&e.setTargeting({key:`fcv`,value:n})}_setVideoFloorTargeting(e){let t=e.name,{fcv:n,floorPrice:r,modelTimestamp:i,modelVersion:a,shouldSendModelTimestamp:o}=this._getFloorTargeting(t),s={fv:a,hbf:r,...n.length&&{fcv:n},...o&&{flrti:`${i}`}};this._config.video.setVideoFlagSlot(t,s)}getAuctionFloors(e){let{price:t,floorData:n,bidder:r}=e&&this._auctionFloors.get(e)||{},i=n||{};return{floorPrice:!n?.skipped&&t?t.toFixed(4):`none`,floorData:i,bidder:r}}};jT=w([x(),N(0,b(J)),N(1,b(ti)),N(2,b(P)),N(3,b(Qf)),N(4,b(Hs)),N(5,b(pc)),N(6,b(vp)),N(7,b(hT)),N(8,b(gT)),N(9,b(bT)),N(10,b(AT)),N(11,b(Y))],jT);let MT=class extends I{constructor(e,t,n){super(),this._config=e,this._spaEventBus=t,this._footerConfigEventBus=n,C(this,`_footerClassNames`,[`adthrive-comscore`,`adthrive-footer-message`]),C(this,`_footer`,{}),this._added()}start(){if(this._config.footer.elements.length){this._footer=document.createElement(`div`),this._footer.classList.add(...this._footerClassNames),this._config.footer.elements.sort((e,t)=>e.order-t.order).forEach(({element:e})=>{e instanceof Element?this._footer.insertAdjacentElement(`beforeend`,e):this._footer.insertAdjacentHTML(`beforeend`,e)});let e=this._config.adOptions.footerSelector===``?`.adthrive-mobile #page-wrapper`:this._config.adOptions.footerSelector;(document.querySelector(e)||document.body).insertAdjacentElement(`beforeend`,this._footer),this._setupListeners()}}_setupListeners(){this._spaEventBus.routeChanged.once(()=>{document.querySelector(`.${this._footerClassNames.join(`.`)}`)||this.start()})}_added(){this._footerConfigEventBus.footerElementAdded.on(e=>{this._config.footer.elements.push(e)},{handleEventsAlreadyEmitted:!0})}};MT=w([D(`FooterComponent`),x(),N(0,b(J)),N(1,b(xc)),N(2,b(Pr))],MT);let NT=class{constructor(){C(this,`_apiUrl`,`https://hem-router.production.raptive.com`)}async subscribe(e){try{let t=await fetch(`${this._apiUrl}/subscribe`,{method:`POST`,headers:{"Content-Type":`application/json`,Accept:`application/json`},referrerPolicy:`no-referrer-when-downgrade`,body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw n;return E.event(`EmailServiceProviderAPI`,`subscribe`,`Successfully subscribed user`),n}catch(e){let t=e?.message||`Unknown error`;return E.error(`EmailServiceProviderAPI`,`subscribe`,`Error subscribing user`,t),!1}}};NT=w([D(`EmailServiceProviderAPI`),x()],NT);let PT=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`HemCaptureGatedPrint`,this._lookup=`HCGP`}run(){return super.run()}};w([R()],PT.prototype,`run`,null),PT=w([S()],PT);let FT=class extends I{constructor(e,t,n,r,i,a,o){super(),this._site=e,this._adOptions=t,this._emailServiceProviderAPI=n,this._gatedPrintExperiment=r,this._config=i,this._gdprEnforcement=a,this._gdprEvents=o,C(this,`_startTask`,void 0)}get enabled(){return this._forceTest||this._gatedPrintExperiment.result&&!!this._adOptions.gatedPrint?.enabled}start(){this._startTask=this.isIdentified().then(e=>{this.shouldApplyGatedPrintExperience(e)&&(this._config.gdpr.enabled?this._gdprEvents.consentResponseCaptured.on(()=>{im(this._config.gdpr.raptiveVendorId,[1])&&this.createModal()}):this.createModal())})}started(){return this._startTask??Promise.resolve()}get _forceTest(){let e=Vt().get(`test_gated_print`);return e===`true`||e===`1`}shouldApplyGatedPrintExperience(e){return Bt(`26`)?!1:this._forceTest||this.isPrintPage()&&!e}get gatedPrintClasses(){return[`wprm-print`,`wprm-print-recipe`,`tasty-recipes-print-view`,`tasty-recipes-print-display-images`,`tasty-recipes-print-display-description`,`tasty-recipes-print-display-notes`,`tasty-recipes-print-text-size-medium`,`dr-print-outer-wrap`,`mv-create-print-view`,...this._adOptions.gatedPrint?.printClasses??[]]}isPrintPage(){return this.gatedPrintClasses.some(e=>!!document.querySelector(`.${e}`))}async isIdentified(){let e=await Wo(!0);if(!e)return!1;let t=e.graph1p?.d?.bridgingMethod===`rcid`,n=e.direct?.d?.collectionMethod===`direct`;return t||n}createModal(){let e=this._adOptions.gatedPrint?.newsletterPromptEnabled??!1,t=e&&this._adOptions.gatedPrint?.defaultOptIn,n=this._adOptions.gatedPrint?.closeButtonEnabled??!1;E.event(`GatedPrintComponent`,`createModal`,`Gated print modal is enabled`);let r=tw`
      <div class="raptive-gated-print-modal-container" style="display: block">
        <div class="raptive-gated-print-modal-content">
          ${n?`<div id="raptive-gated-print-modal-close" class="raptive-gated-print-modal-close">&times;</div>`:``}
          <span class="raptive-gated-print-modal-title">
            Get instant access to printable posts
          </span>
          <span class="raptive-gated-print-modal-body">
            Enter your email below to access the printable version of every post on my
            site.
          </span>
          <form id="raptive-gated-print-modal-form" novalidate>
            <input
              id="raptive-gated-print-modal-input"
              class="raptive-gated-print-modal-input"
              type="email"
              name="email"
              inputmode="email"
              autocomplete="email"
              placeholder="Email*"
              required
            />

            <div id="raptive-gated-print-modal-actions" class="raptive-gated-print-modal-actions">
              ${e?`
      <div class="raptive-gated-print-modal-checkbox-container">
        <input
          id="raptive-gated-print-modal-checkbox"
          class="raptive-gated-print-modal-checkbox"
          type="checkbox"
          name="newsletter"
          ${t?`checked`:``}
        />
        <label
          for="raptive-gated-print-modal-checkbox"
          class="raptive-gated-print-modal-checkbox-label"
        >
          Subscribe to newsletter
        </label>
      </div>
      `:`<span></span>`}
              <button
                id="raptive-gated-print-modal-button"
                class="raptive-gated-print-modal-button"
                type="submit"
                disabled
              >
                PRINT
              </button>
            </div>
          </form>
        </div>
      </div>
      `,i=UC(`div`,void 0,void 0,r),a=i.querySelector(`.raptive-gated-print-modal-container`),o=i.querySelector(`#raptive-gated-print-modal-form`),s=o?.querySelector(`#raptive-gated-print-modal-input`),c=o?.querySelector(`#raptive-gated-print-modal-button`),l=o?.querySelector(`#raptive-gated-print-modal-checkbox`),u=i.querySelector(`#raptive-gated-print-modal-close`);if(!a||!s||!c||!o){E.error(`GatedPrintComponent`,`createModal`,`Failed to create gated print modal`);return}let d=()=>{o.onsubmit=null,s.oninput=null,u&&(u.onclick=null),i&&i.parentNode&&i.parentNode.removeChild(i)};o.onsubmit=e=>{e.preventDefault();let t=s.value;c&&(c.disabled=!0,c.innerText=`Submitting...`),this._submitEmail(t,l?.checked??!1).then(()=>{d()})},s.oninput=()=>{c.disabled=!lm(s.value)},u&&(u.onclick=()=>this._onCloseButtonClick(d)),document.body.appendChild(i)}_onCloseButtonClick(e){E.event(`GatedPrintComponent`,`_onCloseButtonClick`,`Gated print modal closed via close button`),e()}async _submitEmail(e,t){if(!lm(e)){E.error(`GatedPrintComponent`,`_submitEmail`,`Invalid email address`,this._site.id);return}if(!t){E.event(`GatedPrintComponent`,`_submitEmail`,`Newsletter checkbox is not checked, not subscribing user`,this._site.id);return}let n=0;for(;n<=1;)try{await this._emailServiceProviderAPI.subscribe({email:e,source:`gated-print`,site_esp_id:this._adOptions.gatedPrint?.siteEmailServiceProviderId,site_id:this._site.id}),E.event(`GatedPrintComponent`,`_submitEmail`,`Successfully registered email for newsletter`,this._site.id);return}catch(e){E.error(`GatedPrintComponent`,`_submitEmail`,`Error registering email for print on site ${this._site.id}`,e),n++,n<=1&&await new Promise(e=>setTimeout(e,1e3))}E.error(`GatedPrintComponent`,`_submitEmail`,`Failed to register email for print on site ${this._site.id} after 1 attempts`)}};FT=w([D(`GatedPrintComponent`),x(),N(0,b(Zi)),N(1,b(Kn)),N(2,b(NT)),N(3,b(PT)),N(4,b(J)),N(5,b(gp)),N(6,b(mp))],FT);let IT=()=>{let e=document.querySelector(`.adthrive-footer`),t=52;return e&&e.style.display===`none`?t=102:e&&(t=Math.max(e.getBoundingClientRect().height,t)),t},LT=e=>!Gx(e);var RT=class{constructor(e,t,n){C(this,`_element`,void 0),C(this,`_overlap`,null),C(this,`_stuck`,!1),C(this,`_start`,0),C(this,`_cutoff`,0),C(this,`_cutoffBuffer`,20),C(this,`_stickyClass`,`adthrive-stuck`),C(this,`_stickyOutstreamStyleBottom`,51),C(this,`_onScrollEvent`,()=>{}),C(this,`_onThrottledScrollEvent`,()=>{}),C(this,`_onThrottledResizeEvent`,()=>{}),C(this,`_closed`,!1);let r=e.location===H.Video_StickyOutstream;this._element=e.element;let i=r?n.video.footerSelector:``;if(t){if(e.stickyOverlapSelector)this._overlap=document.querySelector(e.stickyOverlapSelector);else if(i.length){let e=document.querySelector(i);e&&!LT(e)&&(this._overlap=e)}else this._overlap=this._findOverlap(this._element);this._overlap,r&&this._stick(r)}this._setupEventListeners(e,r)}_setupEventListeners(e,t){this._onScrollEvent=()=>{if(!this._element||e.closed){this._removeEventListeners();return}this._check(t)},this._onThrottledScrollEvent=Ao(()=>this._update(),500),this._onThrottledResizeEvent=Ao(()=>{if(!this._element||e.closed){this._removeEventListeners();return}this._unstick(),this._update(),this._check(t)},500),window.addEventListener(`scroll`,this._onThrottledScrollEvent),window.addEventListener(`resize`,this._onThrottledResizeEvent),window.addEventListener(`scroll`,this._onScrollEvent)}_removeEventListeners(){window.removeEventListener(`scroll`,this._onScrollEvent),window.removeEventListener(`scroll`,this._onThrottledScrollEvent),window.removeEventListener(`resize`,this._onThrottledResizeEvent),this._onThrottledScrollEvent&&this._onThrottledScrollEvent.cancel&&this._onThrottledScrollEvent.cancel(),this._onThrottledResizeEvent&&this._onThrottledResizeEvent.cancel&&this._onThrottledResizeEvent.cancel(),this._element=null,this._overlap=null,this._closed=!0}_update(){this._element&&(this._stuck||(this._start=this._getTop(this._element)),this._overlap&&(this._cutoff=this._getTop(this._overlap)))}_updateStickyOutstreamPosition(e){if(window.pageYOffset+window.innerHeight-this._stickyOutstreamStyleBottom>=e){let t=`${window.innerHeight+window.pageYOffset-e}px`;this._element.style.bottom=t,this._element.parentElement.style.bottom=t}else{let e=IT();this._element.parentElement.style.bottom=`${e}px`}}_check(e){if(!this._closed){if(this._start!==0){let t=window.pageYOffset,n=this._element.offsetHeight+this._cutoffBuffer,r=this._cutoff!==0&&t+n>this._cutoff;this._start<t&&!r?this._stick(e):e||this._unstick()}if(e&&this._overlap){let e=this._getTop(this._overlap);this._updateStickyOutstreamPosition(e)}}}_stick(e){if(!this._stuck){let t=getComputedStyle(this._element,null),n=this._element.parentElement;if(n){let t=getComputedStyle(n,null);n.style.minHeight=t.getPropertyValue(`height`),e&&n.classList.add(this._stickyClass)}this._element.style.width||(this._element.style.width=t.getPropertyValue(`width`)),e||this._element.classList.add(this._stickyClass),this._stuck=!0}}_unstick(){this._stuck&&=(this._element.classList.remove(this._stickyClass),!1)}_getTop(e){return e.getBoundingClientRect().top+window.pageYOffset}_findOverlap(e){let t=null;for(;e.parentElement;){e=e.parentElement;let n=e.nextElementSibling;for(;n&&LT(n);)n=n.nextElementSibling;n&&n.offsetTop>0&&(!t||n.offsetTop<t.offsetTop)&&(t=n)}return t}};let zT=class extends I{constructor(e,t,n,r,i,a,o,s,c,l){super(),this._config=e,this._googleAdManagerEventBus=t,this._prebidMethods=n,this._prebidEventBus=r,this._slotManager=i,this._slotEventBus=a,this._videoEventBus=o,this._amazonMethods=s,this._slots=c,this._skylineAdsEventBus=l,C(this,`_lastSidebarSequence`,void 0),C(this,`_lastSidebarSticky`,void 0)}init(){this._slotEventBus.triggerRenderOutsideGam.on(this._onTriggerRenderOutsideGam.bind(this)),this._googleAdManagerEventBus.slotRenderEnded.on(this._slotRenderedHandler.bind(this)),this._prebidEventBus.bidWon.on(this._bidWonEventHandler.bind(this)),this._videoEventBus.triggerRenderVideoAdOutsideGam.on(this._onTriggerRenderVideoAdOutsideGam.bind(this))}_slotRenderedHandler({event:e,slotId:t}){let n=this._slotManager.getSlot(t);if(!n)return;let r=[H.Native_Recipe,H.Interstitial],i=this._isGAMDisabled(n);(e.isEmpty||i)&&!r.includes(n.location)&&this._onTriggerRenderOutsideGam(n.id)}_bidWonEventHandler(e){let t=this._getSlot(e);t&&this._isGAMDisabled(t)&&this._handleGptLibFailedToLoad(e,t)}_handleGptLibFailedToLoad(e,t){this._slotEventBus.adRenderedOutsideGAM.emit({bidResponse:e,slotId:t.id}),this._skylineAdsEventBus.footerSlotAdditionEnabled.emit()}_getSlot(e){return this._slotManager.getSlot(e.sharedBidInUse||e.adUnitCode)}_isGAMDisabled(e){return!e?.googleTagSlot?.getResponseInformation()}_onTriggerRenderOutsideGam(e){this.clearSharedBidPool(e);let t=this._slotManager.getSlot(e);if(t&&t.location===H.Header&&this._skylineAdsEventBus.footerSlotAdditionEnabled.emit(),!this._config.gdpr.enabled){if(t&&lc(t,{logContext:`GoogleAdManagerFallback`}))return;E.event(`GoogleAdManagerFallbackComponent`,`init`,`slotIsEmpty`,`adding prebid render to queue`),this.renderSlotOutsideGAM(e)}}clearSharedBidPool(e){this._prebidMethods.clearTargetingForSharedBidPool(e)}_playVideoAd(e,t){this._videoEventBus.videoAdRenderingOutsideGam.emit(e.name),e?.imaManager?.requestAd({adTagUrl:t})}_getVideoAdUrl(e){let t=``;if(e&&`vastUrl`in e&&e.vastUrl)t=e.vastUrl,t.includes(`uuid=undefined`)&&`videoCacheKey`in e&&e.videoCacheKey&&(t=t.replace(`uuid=undefined`,`uuid=${e.videoCacheKey}`));else if(e&&`amznbid`in e&&e.amznbid&&e.amzniid){let n=e,r=Hn(0,1e9);t=`https://aax.amazon-adsystem.com/e/dtb/vast?b=${n.amzniid}&rnd=${r}&pp=${n.amznbid}`}return t}_onTriggerRenderVideoAdOutsideGam({player:e,topBid:t}){let n=this._getVideoAdUrl(t);n&&this._playVideoAd(e,n)}_createGoogleAdManagerFallbackDiv(e){e.iframe=this._createGoogleAdManagerFallbackIframe();let t=document.createElement(`div`);t.className=`google-ad-manager-fallback-container`,t.style.margin=`auto`,this._isSidebar9Slot(e)&&this._applySidebar9Styling(t,e),e.location===H.Video_StickyOutstream&&(t.style.height=`0`,e.iframe.style.width=`0`,e.iframe.style.height=`0`),t.appendChild(e.iframe),this._clearSlotDiv(e),e.element.children.length<2&&e.element.appendChild(t),this._slotEventBus.googleAdManagerFallbackDivAdded.emit(e.id)}_createEmptyFallbackDiv(e){let t=document.createElement(`div`);t.className=`google-ad-manager-fallback-container`,t.style.margin=`auto`,t.style.height=`0`,this._isSidebar9Slot(e)&&this._applySidebar9Styling(t,e),this._clearSlotDiv(e),e.element?.children.length<2&&e.element.appendChild(t),this._slotEventBus.googleAdManagerFallbackDivAdded.emit(e.id)}_clearSlotDiv(e){let t=e.element?.firstElementChild;t?.className===`google-ad-manager-fallback-container`&&e.element.removeChild(t)}_createGoogleAdManagerFallbackIframe(){let e=document.createElement(`iframe`);return e.style.border=`0`,e.style.display=`inline!important`,e.scrolling=`no`,e.frameBorder=`0`,e.marginHeight=`0`,e.marginWidth=`0`,e.style.height=`1`,e.style.width=`1`,e}_getTopPrebidBid(e){let{slotId:t,bidPoolId:n,passiveBidPoolId:r}=e,i=n?this._prebidMethods.getBidResponsesForBidPoolId(n)?.bids.filter(e=>e.status!==`rendered`&&e.mediaType!==`native`&&!e.sharedBidInUse).sort((e,t)=>t.cpm-e.cpm)?.[0]||this._prebidMethods.getHighestCpmBidsForPoolId(n)?.[0]:this._prebidMethods.getHighestCpmBids(t)?.[0];return i&&(n||r)&&(i.sharedBidInUse=t),i}renderSlotOutsideGAM(e){this._prebidMethods.addToQueue(()=>{let t=this._slotManager.getSlot(e);if(!t)return;let n=this._getTopBid(t);if(!lc(t,{winningBid:n,logContext:`GoogleAdManagerFallback`})){if(!n){this._createEmptyFallbackDiv(t),this._slotEventBus.gamEmptyNoBidResponse.emit(e);return}this._createGoogleAdManagerFallbackDiv(t),this._removePreviousSiblingDiv(t),this._setDisplayProperty(t),this._emitEventAndRenderAd(t,n)}})}_getAmazonBidData(e){let t=this._config.amazon.availableBids.get(e.id);if(t)return t.pmpCpm&&t.cpm<t.pmpCpm?{amznbid:t.pmpAmznBid,amzniid:t.pmpAmazoniid,bidder:t.pmpBidder,cpm:t.pmpCpm,deal:t.pmpDeal,mediaType:t.pmpMediaType,size:t.pmpSize,slotID:t.slotID}:{amznbid:t.amznbid,amzniid:t.amzniid,bidder:t.bidder,cpm:t.cpm,mediaType:t.mediaType,size:t.size,slotID:t.slotID}}_getTopBid(e){let t=this._getTopPrebidBid({slotId:e.id,bidPoolId:e.bidPoolId,passiveBidPoolId:e.passiveBidPoolId}),n=this._getAmazonBidData(e);if(!(!t&&!n))return!t||n&&n.cpm>t.cpm?n:t}_removePreviousSiblingDiv(e){let t=e.iframe&&e.iframe.parentElement;t&&t.previousSibling?.remove()}_setDisplayProperty(e){let t=document.getElementById(e.element.id);t&&(this._isSidebar9Slot(e)?this._applySidebar9Styling(t,e):t.style.setProperty(`display`,`block`))}_emitEventAndRenderAd(e,t){let n=e.iframe?.contentWindow?.document,r=ic(t);if(!lc(e,{winningBid:t,logContext:`GoogleAdManagerFallback`})&&n){if(this._slotEventBus.adRenderingOutsideGAM.emit({bidResponse:t,slotId:e.id}),e.location===H.Video_StickyOutstream&&r)return;r?this._amazonMethods.renderImp(n,t.amzniid).catch(()=>{E.error(`GoogleAdManagerFallback`,`_emitEventAndRenderAd`,` Failed to render Amazon impression`)}):this._prebidMethods.renderAd(n,t.adId)}}_applySidebar9Styling(e,t){this._lastSidebarSequence===void 0&&this._calculateLastSidebarSequence();let n=t.sequence===this._lastSidebarSequence;n||e.style.setProperty(`position`,`relative`),e.style.removeProperty(`margin`),e.classList.add(`adthrive-sidebar9-fallback`),n?(t.element.classList.add(`adthrive-sticky`),this._lastSidebarSticky||=new RT(t,!0,this._config)):e.parentElement?.classList.remove(`adthrive-stuck`)}_calculateLastSidebarSequence(){let e=this._slots.get().filter(e=>e.location===H.Sidebar&&e.sequence&&e.sequence>=9);this._lastSidebarSequence=e[e.length-1]?.sequence}_isSidebar9Slot(e){return e.location===H.Sidebar&&e.sequence!==void 0&&e.sequence>=9}};zT=w([D(`GoogleAdManagerFallbackComponent`),x(),N(0,b(J)),N(1,b(X)),N(2,b(P)),N(3,b(Qf)),N(4,b(eS)),N(5,b(Hs)),N(6,b(pc)),N(7,b(Pp)),N(8,b(Y)),N(9,b(mC))],zT);let BT=class extends I{constructor(e,t){super(),this._slots=e,this._slotManagerEventBus=t}init(){let e=!1;this._slots.bidServed.on(t=>{t.servedPrebidBidResponse&&t.servedPrebidBidResponse.bidder===`gumgum`&&t.location===H.Footer&&(e=!0)}),this._slotManagerEventBus.refreshing.on(t=>{this._slots.get(t).filter(e=>e.location===H.Footer).length>0&&e&&(e=!1,typeof window.GUMGUM?.removeISAd==`function`&&window.GUMGUM.removeISAd())})}};BT=w([D(`GumGumInScreenComponent`),x(),N(0,b(Y)),N(1,b($f))],BT);let VT=class extends I{init(){let e=L.readInternalLocalStorage(`adt_ei`);this._isStoredHemValid(e)||this._cleanUpStoredValue(e)}get enabled(){return!0}_isStoredHemValid(e){let t=typeof e==`object`&&typeof e?.sha256Hash==`object`,n=typeof e==`string`&&(e.match(/sha256Hash/g)?.length??!1);return!t&&!n}_cleanUpStoredValue(e){let t=JSON.stringify(e),n=``,r=``,i=/sha256Hash":"(\w+)"/.exec(t),a=/sha1Hash":"(\w+)"/.exec(t);i&&i.length===2&&(n=i[1]),a&&a.length===2&&(r=a[1]);let o={sha256Hash:n,sha1Hash:r};L.setInternalLocalStorage(`adt_ei`,o)}};VT=w([D(`HemStorageCleanupComponent`),x()],VT);let HT=class extends I{constructor(e,t,n,r){super(),this._emailCaptureHandler=e,this._config=t,this._gdprEnforcement=n,this._identityEventBus=r,C(this,`_hasRun`,!1)}init(){this._identityEventBus.identityApiDataSubmitted.on(({data:e,cb:t})=>this.identityOptIn(e,t).catch(()=>{})),window.addEventListener(`message`,e=>{if(window===window.top&&e&&e.origin===window.origin&&e.data&&e.data.message===`adthriveIdentityAPI`&&e.data.info){let t={message:`adthriveIdentityFinished`,response:{}};this.identityOptIn(e.data.info,n=>{!(e.source instanceof MessagePort)&&!(e.source instanceof ServiceWorker)&&(t.response=n,e.source?.postMessage(t,e.origin))}).catch(()=>{})}},!1)}start(){this._identityEventBus.identityApiReady.emit()}validateData(e){if(!e.source||typeof e.source!=`string`||e.source.length>20)throw Error(`source required with 20 characters or less`);if(!e.plainText&&!e.sha256&&!e.sha1)throw Error(`plainText, sha256 or sha1 required`);if(e.plainText&&(typeof e.plainText!=`string`||!lm(e.plainText)))throw Error(`plainText not string or not valid email: ${e.plainText}`);if(e.sha256&&(typeof e.sha256!=`string`||e.sha256.length!==64))throw Error(`sha256 not string or not encoded properly: ${e.sha256}`);if(e.sha1&&(typeof e.sha1!=`string`||e.sha1.length!==40))throw Error(`sha256 not string or not encoded properly: ${e.sha1}`)}categorizeSource(e){let t=e.source,n=t!==`slickstream`&&!t?.startsWith(q.PII_SOURCE.PREFIXES.SLICKSTREAM),r=!t?.startsWith(q.PII_SOURCE.PREFIXES.HEM_CAPTURE),i=![`url`,`urlh`,`urlhck`].includes(t||``);n&&r&&i&&(E.event(`IdentityAPI`,`optIn`,`source:${t}`),e.source=`api`)}buildPII(e){let t=e.source;t||(t=`api_unknown`,E.error(`IdentityAPI`,`buildPII`,`source not provided with: `,e)),this._emailCaptureHandler.checkSources(t);let n={source:`${t}${q.PII_SOURCE.SUFFIXES.CAPTURE}`,sourceCollectedDate:um()};return e.plainText&&(n.email=e.plainText),e.sha256&&(n.sha256Hash=e.sha256),e.sha1&&(n.sha1Hash=e.sha1),n}async identityOptIn(e,t){try{if(this._hasRun)throw Error(`Identity API Already Successfully Called`);if(this._config.ccpa.userOptedOut)throw Error(`User has opted out of CCPA`);if(this._config.gdpr.enabled&&!await this._gdprEnforcement.checkConsentForVendor(this._config.gdpr.raptiveVendorId,[1]))throw Error(`CafeMedia does not have Purpose 1 consent.`);this.validateData(e),this.categorizeSource(e);let n=this.buildPII(e);this._emailCaptureHandler.emailCaptured.emit({pii:n,identityDataSource:`identityApi`}),t({success:!0,data:{message:`OK`}}),this._hasRun=!0}catch(e){t({success:!1,data:{message:e.message}})}}};HT=w([D(`IdentityAPIComponent`),x(),N(0,b(fm)),N(1,b(J)),N(2,b(gp)),N(3,b($s))],HT);let UT=class extends I{constructor(e,t,n,r,i,a){super(),this._config=e,this._gam=t,this._videoEventProxy=n,this._gamEventBus=r,this._slotEventBus=i,this._slots=a,C(this,`_renderedSlotKey`,new Map),C(this,`_filterKeys`,new Set([`abgroup`,`pvk`,`bucket`,`fab`,`branch`,`deployment`,`siteName`,`siteId`,`site_code`,`mcmp`,`sense`]))}init(){this._gamEventBus.slotRenderEnded.on(e=>this._bannerSlotRenderEnded(e)),this._videoEventProxy.videoSlotRendered.on(this._videoSlotRenderEnded.bind(this)),this._slotEventBus.adRenderedOutsideGAM.on(this._onRenderedOutsideGAM.bind(this)),this._slotEventBus.adRenderingOutsideGAM.on(this._onRenderingOutsideGAM.bind(this)),this._videoEventProxy.loggingBidWon.on(this._onVideoRenderedOutsideGAM.bind(this))}get enabled(){return!0}_onVideoRenderedOutsideGAM({topBid:e,vprenum:t,vastErrorCode:n}){this._onBidWonEvent(e,void 0,t,n)}_onRenderedOutsideGAM(e){this._onBidWonEvent(e.bidResponse,e.slot)}_onBidWonEvent(e,t,n,r){let i=t&&this._slots.get(t),a=this._createEventData(wv(e),i||void 0),o={};n!=null&&(o.vprenum=n),r!=null&&(o.vastErrorCode=r);let s={...a,...o};E.event(`ImpressionLogComponent`,`bidWon`,s)}_onRenderingOutsideGAM(e){ic(e.bidResponse)&&this._onBidWonEvent(e.bidResponse,e.slotId)}_getDecodedURI(e){try{return decodeURIComponent(e)}catch{return``}}_getTargetingData(e){let t=Vt(e.split(`?`)[1]);return{custParams:this._getDecodedURI(t.get(`cust_params`)||``),iu:t.get(`iu`)||``,sz:this._sizeStringToArray(t.get(`sz`))||[1,1]}}_sizeStringToArray(e){if(e)return e.split(`x`).map(e=>parseInt(e))}_bannerSlotRenderEnded({event:e,slotId:t}){let n=this._slots.get(t);if(!n)return;let r=e.slot.getAdUnitPath(),i=br();this._renderedSlotKey.set(r,i);let a={adUnitPath:r,advertiserId:e.advertiserId,agnosticCreativeId:e.sourceAgnosticCreativeId,agnosticLineItemId:e.sourceAgnosticLineItemId,campaignId:e.campaignId,companyIds:e.companyIds,creativeId:e.creativeId,isEmpty:e.isEmpty,lineItemId:e.lineItemId,serviceName:e.serviceName,siteTargeting:this._filterTargeting(this._gam.getTargetingMap()),size:e.size,slotElementId:n.id,slotKey:i,slotTargeting:this._filterTargeting(n.getTargetingMap()),yieldGroupIds:e.yieldGroupIds,transactionId:n.transactionId};this._logImpressionEvent(a)}_videoSlotRenderEnded(e){let t=this._getTargetingData(e.tag),n={adUnitPath:t.iu,creativeId:e.gamCreativeId,isEmpty:e.isEmpty,lineItemId:e.gamLineItemId,size:t.sz,slotElementId:e.adUnitName,slotKey:br(),slotTargeting:this._filterTargeting(Ht(t.custParams))};this._logImpressionEvent(n)}_filterTargeting(e){return Object.keys(e).filter(t=>!this._filterKeys.has(t)&&e[t].length).reduce((t,n)=>(t[n]=e[n],t),{})}_logImpressionEvent(e){E.event(`SlotRenderEnded`,`adImpression`,e)}_getPrebidData(e,t){let{adUnitCode:n,adserverTargeting:{[this._config.prebid.targetingKeyMap.PRICE_BUCKET]:r},bidder:i,adId:a,auctionId:o,width:s,height:c,cpm:l,meta:u,requestTimestamp:d,responseTimestamp:f,timeToRespond:p,expired:m,dealId:h,size:g,source:_,mediaType:v,ttl:ee,originalCpm:te}=e;return{adUnitPath:n,adomain:u?.advertiserDomains||[],hb_pb:r,bidder:i,adId:a,auctionId:o,width:s,height:c,cpm:l,requestTimestamp:d,responseTimestamp:f,timeToRespond:p,expired:m,dealId:h,size:g,source:_,mediaType:v,ttl:ee,originalCpm:te,isEmpty:!0,...t&&{location:t.location,sequence:t.sequence,nref:t.refreshCount,...t.googleTagSlot&&{slotTargeting:this._filterTargeting(t.getTargetingMap())}}}}_getAmazonData(e,t){let{amzniid:n,bidder:r,deal:i,cpm:a,mediaType:o,size:s}=e,[c,l]=(s||``).split(`x`);return{amzniid:n,bidder:r,cpm:a,...i&&{deal:i},height:l,isEmpty:!0,mediaType:o===`default`?`banner`:o,size:s,width:c,...t&&{adUnitPath:t.id,location:t.location,sequence:t.sequence,nref:t.refreshCount,...t.googleTagSlot&&{slotTargeting:this._filterTargeting(t.getTargetingMap())}}}}_createEventData(e,t){return ic(e)?this._getAmazonData(e,t):this._getPrebidData(e,t)}};UT=w([D(`ImpressionLogComponent`),x(),N(0,b(J)),N(1,b(Z)),N(2,b(Dy)),N(3,b(X)),N(4,b(Hs)),N(5,b(Y))],UT);let WT=class{constructor(){C(this,`contentAdded`,new T)}};WT=w([D(`InfiniteScrollEvents`),S()],WT);let GT=class extends I{constructor(e,t){super(),this._config=e,this._events=t,C(this,`_ajaxSelector`,`#ajax-load-more`),C(this,`_heightThreshold`,1e3),C(this,`_infiniteScrollElement`,null)}start(){this.detectInfiniteScroll()}detectInfiniteScroll(){let e=(e,t)=>{e.filter(({type:e,addedNodes:t})=>e===`childList`&&t.length>0).reduce((e,{addedNodes:t})=>[...e,...Array.prototype.slice.call(t)],[]).filter(e=>e instanceof HTMLElement&&e.clientHeight>this._heightThreshold).forEach(e=>{e.parentElement&&(t.disconnect(),t.observe(e.parentElement,{childList:!0}),this._infiniteScrollElement&&t.observe(this._infiniteScrollElement,{childList:!0,subtree:!0}));try{this._events.contentAdded.emit(e)}catch(e){E.error(`InfiniteScrollDetectionComponent`,`addMutationObserver`,`added`,e)}})};this.checkForCustomConfig();let t=new MutationObserver(e);this._infiniteScrollElement?t.observe(this._infiniteScrollElement,{childList:!0,subtree:!0}):Array.prototype.slice.call(document.querySelectorAll(`body *`)).filter(e=>e instanceof HTMLElement&&e.offsetHeight>this._heightThreshold).forEach(e=>{t.observe(e,{childList:!0})})}checkForCustomConfig(){let{heightThreshold:e,selector:t}=this._config.adOptions.infiniteScrollOptions,n=t?document.querySelector(t):null;if(n)this._infiniteScrollElement=n;else{let e=document.querySelector(this._ajaxSelector);e&&(this._config.infiniteScroll.ajaxType=!0,this._infiniteScrollElement=e)}e&&e>0&&(this._heightThreshold=e)}get enabled(){return this._config.adOptions.infiniteScroll&&`MutationObserver`in window}};GT=w([D(`InfiniteScrollDetectionComponent`),x(),N(0,b(J)),N(1,b(WT))],GT);let KT=class extends Bw{constructor(e,t,n,r){super(t,n,r),this._config=e,this._adInjectionMap=t,this._context=n,this._cls=r,C(this,`_count`,1)}getDynamicElementId(){return`${this._config.gam.prefix}_Infinite_${this._count++}`}};KT=w([D(`InfiniteScrollDynamicAdsInjector`),x(),N(0,b(J)),N(1,b(CC)),N(2,b(W)),N(3,b(pr))],KT);let qT=class extends I{constructor(e,t,n,r,i,a){super(),this._config=e,this._context=t,this._events=n,this._injector=r,this._slotManager=i,this._gam=a,C(this,`_page`,1)}init(){this._events.contentAdded.on(e=>{this._page++,this._context.pageviewKey=br(),this._gam.setTargeting({key:`pvk`,value:this._context.pageviewKey}),this.slotsAlreadyInjectedInElement(e)||this.addSlots(e)})}slotsAlreadyInjectedInElement(e){return!!e.querySelector(`[id*='AdThrive_Content']`)}addSlots(e){let t=this._config.dynamicAds.filter(e=>!(this._config.infiniteScroll.ajaxType&&e.location===H.Sidebar)).filter(e=>fw(this._config,e)).filter(e=>dw(e,this._context.device)).filter(e=>mw(e)),n=this._injector.inject(t,e);n.length!==0&&this._slotManager.add(n).then(e=>{e.forEach(e=>{Z.pushToQueue(()=>{e.setTargeting({key:`inf_scroll`,value:this._page.toString()})})})}).catch(e=>{E.error(`InfiniteScrollDynamicAdsComponent`,`addSlots`,e)})}get enabled(){return this._config.adOptions.infiniteScroll}};qT=w([D(`InfiniteScrollDynamicAdsComponent`),x(),N(0,b(J)),N(1,b(W)),N(2,b(WT)),N(3,b(KT)),N(4,b(eS)),N(5,b(Z))],qT);var JT=class{constructor(e){this._wait=e,C(this,`_timeouts`,new Map)}async limit(e){return new Promise(t=>{this._timeouts.has(e)&&window.clearTimeout(this._timeouts.get(e));let n=window.setTimeout(()=>{t()},this._wait);this._timeouts.set(e,n)})}};let YT=class extends I{constructor(e,t,n,r){super(),this._config=e,this._events=t,this._slotManager=n,this._slots=r,C(this,`_observer`,void 0),C(this,`_debounce`,new JT(1e3))}start(){this._observer=this.getIntersectionObserver(),this._events.contentAdded.on(e=>{this._observer&&this._observer.observe(e)})}getIntersectionObserver(){return new IntersectionObserver(e=>{for(let t of e)t.intersectionRatio>0&&t.isIntersecting&&this._debounce.limit(t.target.id).then(()=>this.refresh()).catch(e=>{E.error(`InfiniteScrollRefreshComponent`,`getIntersectionObserver`,`refresh`,e)})},{threshold:[.08]})}refresh(){this._config.adOptions.infiniteScrollRefresh&&this._slots.get().filter(e=>this._config.infiniteScroll.refreshSlots.has(e.location)&&e.isSticky&&!e.isRefreshing).forEach(e=>{this._slotManager.updateRefreshTimeout(e,1001)})}get enabled(){return this._config.adOptions.infiniteScroll&&`IntersectionObserver`in window}};YT=w([D(`InfiniteScrollRefreshComponent`),x(),N(0,b(J)),N(1,b(WT)),N(2,b(eS)),N(3,b(Y))],YT);let XT=class extends Jx{constructor(){super(),C(this,`selectors`,[`.wprm-recipe-jump-video`]),this.elements=Array.prototype.slice.call(document.querySelectorAll(this.selectors.join()))}start(e){let t=[];e&&t.push(e=>{let t=e.target.classList;E.event(`JumpToTracker`,`_logEvent`,qx.Video.toLowerCase(),t)}),this.init(t)}};XT=w([x()],XT);let ZT=class extends I{constructor(e,t,n,r){super(),this._jumpToRecipeTracker=n,this._jumpToVideoTracker=r,C(this,`enableLogging`,void 0),this.enableLogging=!e.gpcEnabled&&!t.userOptedOut}start(){this._jumpToRecipeTracker.start(this.enableLogging),this._jumpToVideoTracker.start(this.enableLogging)}};ZT=w([x(),D(`JumpToTrackerComponent`),N(0,b(mi)),N(1,b(U)),N(2,b(Yx)),N(3,b(XT))],ZT);var QT;let $T=QT=class extends I{constructor(e){super(),this._adOptions=e}get enabled(){return this._adOptions.interstitial.prebid}async start(){try{typeof window<`u`&&window.top&&(window.top.ksoSiteId=`6000197`,await Ih(QT.SPOTLIGHT_SCRIPT_URL,!0,!1,!0))}catch(e){E.error(`KargoSpotlightComponent`,`start`,`Failed to load Kargo Spotlight script: %o`,e)}}};C($T,`SPOTLIGHT_SCRIPT_URL`,`https://socialcanvas-cdn.kargo.com/js/rh.min.js`),$T=QT=w([x(),N(0,b(Kn))],$T);let eE=(e,t=0,n=!1,r=74)=>{if(!e.parentElement||t===r)return;let i=getComputedStyle(e.parentElement).overflow;(i===`hidden`||i===`auto`)&&(e.parentElement.style.overflow=`visible`,n||(n=!0,E.event(`util`,`checkForOverflow`,`parent element with overflow detected`))),eE(e.parentElement,++t,n,r)},tE=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`AdxStickyOutstream`,this._lookup=`ADXISO`}};tE=w([S()],tE);let nE={InContainer:1,OutContainerLeft:2,OutContainerRight:3,TopCollapse:4},rE=class extends I{constructor(e){super(),this._config=e,C(this,`_hasTitleBar`,!1),C(this,`_adxStickyOutstreamExperiment`,y.resolve(tE).result)}createPlayerCloseButton(e,t,n,r=!1,i,a){this._hasTitleBar=r;let o=this._getPosition(t,i,a),s=this._config.isStickyOutstreamTopCenterColorsDisabled&&t===`sticky outstream`;if(s){let e=document.createElement(`style`);e.textContent=`#adthrive-sticky-outstream-close > svg > * { stroke: white; }`,document.head.appendChild(e)}let c=this._getButtonClasses(o),l=o===nE.TopCollapse&&(t===`instream`||!s)?this._config.adOptions.secColor:null,u=this._getSvgOptions(o,l),d=this._createCloseButton(c,n,u,o);return d.onclick=e,d.onkeydown=e=>{e.code===`Space`&&e.preventDefault()},d.onkeyup=t=>{[`Space`,`Enter`].includes(t.code)&&e()},o===nE.InContainer?this.applyCloseButtonWrapper(d):d}_getPosition(e,t,n){return t?this._getPositionForMobile(e,t,n):this._getPositionForDesktop(e,n)}_getPositionForMobile(e,t,n){return t===`top-center`?nE.TopCollapse:e===`sticky outstream`?n||this._adxStickyOutstreamExperiment?t===`bottom-right`?nE.OutContainerRight:nE.OutContainerLeft:nE.InContainer:nE.OutContainerLeft}_getPositionForDesktop(e,t){return e===`sticky outstream`?t||this._adxStickyOutstreamExperiment?nE.OutContainerRight:nE.InContainer:nE.OutContainerLeft}_getButtonClasses(e){let t=[`adthrive-video-close`],n={[nE.TopCollapse]:[`adthrive-top-collapse-close`],[nE.OutContainerLeft]:[`adthrive-wrapper-float-close`,`adthrive-top-left-outer`,`adthrive-video-close-float-left`],[nE.OutContainerRight]:[`adthrive-wrapper-float-close`,`adthrive-top-right-outer`,`adthrive-video-close-float-right`],[nE.InContainer]:[`adthrive-close-in-container`]}[e]??[];return[...t,...n]}_getSvgOptions(e,t){let n=`white`,r=`black`;return(e===nE.InContainer||e===nE.TopCollapse)&&(n=`transparent`,r=`white`),t&&(r=t),{fillColor:n,strokeColor:r}}_buildNewCloseButton(e,t){e.appendChild(this._createCloseButtonX(t)),e.appendChild(this._createCloseButtonCircleThatGoesAroundTheX(t))}_createCloseButton(e,t,n,r){let{fillColor:i,strokeColor:a}=n,o=this._createButtonHtml(e,t),s=this._createSvg(i);if(r===nE.TopCollapse)this._buildNewCloseButton(s,a);else{let e=this._createPath(a);s.appendChild(e)}return o.appendChild(s),o}_createButtonHtml(e,t){let n=document.createElement(`div`);return n.tabIndex=0,n.className=e.join(` `),n.id=t,n}_createSvg(e){let t=document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);return t.setAttribute(`width`,`18`),t.setAttribute(`height`,`18`),t.setAttribute(`text-anchor`,`middle`),t.setAttribute(`dominant-baseline`,`central`),t.setAttribute(`fill`,e),t.setAttribute(`text-anchor`,`middle`),t.setAttribute(`dominant-baseline`,`central`),t}_createPath(e){let t=document.createElementNS(`http://www.w3.org/2000/svg`,`path`);return t.setAttribute(`d`,`M 0.5 9 A 5 5 0 0 0 17.5 9 A 5 5 0 0 0 0.5 9 M 9 9 L 7 7 L 11 11 M 9 9 L 7 11 L 11 7`),t.setAttribute(`stroke`,e),t.setAttribute(`stroke-width`,`1`),t}_createCloseButtonCircleThatGoesAroundTheX(e){let t=document.createElementNS(`http://www.w3.org/2000/svg`,`circle`);return t.setAttribute(`cx`,`9`),t.setAttribute(`cy`,`9`),t.setAttribute(`r`,`8`),t.setAttribute(`stroke`,e),t.setAttribute(`stroke-width`,`2`),t.setAttribute(`fill`,`none`),t}_createCloseButtonX(e){let t=document.createElementNS(`http://www.w3.org/2000/svg`,`text`);return t.setAttribute(`x`,`9`),t.setAttribute(`y`,`9`),t.setAttribute(`text-anchor`,`middle`),t.setAttribute(`stroke`,e),t.setAttribute(`fill`,e),t.setAttribute(`stroke-width`,`1px`),t.setAttribute(`font-size`,`13px`),t.setAttribute(`alignment-baseline`,`middle`),t.textContent=`x`,t}applyCloseButtonWrapper(e){let t=document.createElement(`div`),n=[`adthrive-wrapper-float-close`,`adthrive-wrapper-close-bkgd-50`];return this._hasTitleBar?n.push(`adthrive-top-left-inner-wrapper`):n.push(`adthrive-top-left-inner`),t.classList.add(...n),t.appendChild(e),t}};rE=w([D(`VideoCloseButtonComponent`),x(),N(0,b(J))],rE);let iE=class{constructor(){C(this,`_pushVideoPlayerDown`,()=>{}),C(this,`_pushVideoPlayerUp`,()=>{}),C(this,`_header`,null),C(this,`_isHeaderVisible`,!0),C(this,`_open`,!1),C(this,`handleUncollapse`,(e,t)=>{let{playerContainer:n,topBackgroundElement:r}=e;if(n.style.removeProperty(`top`),r.style.removeProperty(`top`),t){this.collapsiblePersistentHeaderObserver.disconnect();let e=this.getSiteHeader(t);e&&(e.onclick=null)}}),C(this,`handleCollapse`,e=>{if(e.mobileHeaderSelector){this.anchorVideoPlayerBelowNavbar(e,e.mobileHeaderSelector);let t=this.getSiteHeader(e.mobileHeaderSelector);t&&(this.collapsiblePersistentHeaderObserver.observe(t),t.onclick=()=>{this._open=!this._open,this._open?(e.programmaticPause(),e.playerContainer.style.display=`none`):(e.programmaticPlay(),e.playerContainer.style.display=`block`)})}}),C(this,`collapsiblePersistentHeaderObserver`,new IntersectionObserver(e=>{for(let t of e)this._isHeaderVisible=t.isIntersecting,this._isHeaderVisible?this._pushVideoPlayerDown():this._pushVideoPlayerUp()},{threshold:.95}))}pushElementBelowHeader(e,t){t!==null&&e.style.setProperty(`top`,`${t}px`)}anchorVideoPlayerBelowNavbar(e,t){let{playerContainer:n,topBackgroundElement:r}=e,i=()=>{let e=this.getHeaderHeight(t);if(e!==null){this.pushElementBelowHeader(r,e),this.pushElementBelowHeader(n,e);let t=n.querySelector(`.adthrive-top-collapse-wrapper-bar`);t&&this.pushElementBelowHeader(t,e)}},a=()=>{r.style.top=`0`,n.style.top=`0`};this._isHeaderVisible?i():a(),this._pushVideoPlayerDown=i,this._pushVideoPlayerUp=a}getHeaderHeight(e){let t=this.getSiteHeader(e);return t?this.getElementHeight(t):null}getElementHeight(e){return e.getBoundingClientRect().height}getSiteHeader(e){if(this._header)return this._header;let t=document.querySelector(e);return t?(this._header=t,this._header):null}};iE=w([S(),D(`TopCenterVideoPlayerForPersistentHeaderUtils`)],iE);let aE=(e,t=50)=>{let n=e.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight;return(n.bottom-r)/n.height*100>=t};var oE;let sE=Ms.getScrollTop(),cE,$=oE=class{static changeState(e,t){let n=this._handleOtherVideoPlaying(t,e),r=e.playerState!==j.Unstarted,i=this._isLoading(e),a=t===M.InView||t===M.OutOfView||t===M.Overlapping;if(r&&i&&a)return e.playerState;if(!(e.playerState&&(e.playerState===j.UserPauseCollapsed||n||e.playerState===j.UserPauseUncollapsed)&&t===M.UserClick)){let n=this._shouldCollapse(e);switch(e.playerState){case j.Unstarted:this._handleUnstarted(t,e);break;case j.UncollapsedPlay:this._handleUncollapsedPlay(t,n,e);break;case j.CollapsedPlay:this._handleCollapsedPlay(t,n,e);break;case j.UserPauseUncollapsed:this._handleUserPauseUncollapsed(t,n,e);break;case j.UserPauseCollapsed:this._handleUserPauseCollapsed(t,n,e);break;case j.PausedNotVisible:this._handlePausedNotVisible(t,e);break;case j.Overlapped:this._handleOverlapped(t,n,e);break;default:return e.playerState}}return e.playerState}static _isLoading(e){let t=e.playerContainer.querySelector(`.adthrive-loading-spinner-container`);return!!t&&t instanceof HTMLElement&&t.style.display!==`none`}static _handleUnstarted(e,t){if(this.offsetheight||=t.playerContainer.offsetHeight,e===M.InView||e===M.OutOfView&&t.isAcAlwaysStickyEnabled){let n=!1;e===M.InView?n=!t.isAcAlwaysStickyEnabled||!t.playerCollapsed:e===M.OutOfView&&(n=!!t.isAcAlwaysStickyEnabled),n&&(t.programmaticPlay({logEvent:!1}),t.collapseTimer.firstInView||(t.collapseTimer.firstInView=new Date)),oE.startEvent.emit(),t.playerState=j.UncollapsedPlay,e===M.OutOfView&&n&&(this.collapse(t),t.playerState=j.CollapsedPlay)}}static _setPlayerClosed(e){e.playerState=j.Closed,this._isTopCollapse(e)&&y.resolve(pc).topCenterVideoClosed.emit()}static _handleOtherVideoPlaying(e,t){let{programmaticPause:n}=t;return e===M.OtherVideoPlaying?(this.uncollapse(t),n({pausedByOtherPlayer:!0}),this._setPlayerClosed(t),!0):!1}static _handleUncollapsedPlay(e,t,n){let{programmaticPause:r,programmaticPlay:i}=n;e===M.InView?t&&(this.collapse(n),n.playerState=j.CollapsedPlay):e===M.OutOfView?t?(i(),this.collapse(n),n.playerState=j.CollapsedPlay):n.playerState!==j.UserPauseUncollapsed&&(r(),n.playerState=j.PausedNotVisible):e===M.UserClick&&(n.playerState=j.UserPauseUncollapsed)}static _handleCollapsedPlay(e,t,n){let{programmaticPause:r,playerContainer:i}=n;e===M.InView?t||(this.uncollapse(n),n.playerState=j.UncollapsedPlay):e===M.OutOfView?t||(this.uncollapse(n),r(),n.playerState=j.PausedNotVisible):e===M.UserClick?n.playerState=j.UserPauseCollapsed:e===M.Overlapping?(n.lastCollapsedClasses=i.className,this.uncollapse(n),r(),n.playerState=j.Overlapped):e===M.Close&&(this.uncollapse(n),r(),this._setPlayerClosed(n))}static _handleUserPauseCollapsed(e,t,n){let{programmaticPause:r}=n,i=!It()&&this._isTopOfPage()&&n.isTopCenterCollapse;(e===M.InView||i)&&!t?(this.uncollapse(n),n.playerState=j.UserPauseUncollapsed):e===M.UserClick?n.playerState=j.CollapsedPlay:e===M.Close&&(this.uncollapse(n),r(),this._setPlayerClosed(n))}static _handleUserPauseUncollapsed(e,t,n){let{programmaticPlay:r}=n;e===M.InView&&t?t?(this.collapse(n),n.playerState=j.UserPauseCollapsed):r():e===M.UserClick&&(n.playerState=j.UncollapsedPlay)}static _handlePausedNotVisible(e,t){let{programmaticPlay:n}=t;e===M.InView&&(n(),t.playerState=j.UncollapsedPlay)}static _handleOverlapped(e,t,n){let{programmaticPlay:r}=n;t&&!this.playerWouldOverlapFooter(n)&&(this.collapse(n),r(),n.playerState=j.CollapsedPlay)}static handleResize(e){this._isCollapsed(e.playerState)&&e.collapseType===dt.Mobile&&e.collapseMobileSubType===`adthrive-collapse-top-center`&&e.topBackgroundElement&&(e.topBackgroundElement.style.height=`${e.playerContainer.offsetHeight}px`,e.topBackgroundElement.style.width=`${window.innerWidth}px`)}static handleScroll(e){let{playerState:t,playerContainer:n,playbackStarted:r}=e,i=Ms.getScrollTop(),a=i>sE;sE=i;let o=this._shouldCollapseOnScrollUp(e),s=!Ms.playerViewable(n)&&(o?!r:!0),c=this._isWarmupComplete(e),l;l=s?e.isAcAlwaysStickyEnabled&&!e.playbackStarted?M.InView:M.OutOfView:this.playerWouldOverlapFooter(e)?M.Overlapping:M.InView;let u=aE(n)&&t===j.PausedNotVisible&&!c;this._isTopOfPage()?(this.stopCollapseWarmupTimer(e),e.isTopCenterCollapse&&!It()&&(l=M.OutOfView)):a&&u?(this.startCollapseWarmupTimer(e),l=M.OutOfView,clearTimeout(cE),cE=setTimeout(()=>{this._isWarmupComplete(e)&&(this.stopCollapseWarmupTimer(e),e.playerState=j.UncollapsedPlay,this.changeState(e,l))},this._collapseTimerDuration)):c&&this.stopCollapseWarmupTimer(e),this.changeState(e,l),e.playerState===j.CollapsedPlay||e.playerState===j.UserPauseCollapsed?oE.startCollapseTimer(e):oE.stopCollapseTimer(e)}static handleOtherVideoPlaying(e){this.changeState(e,M.OtherVideoPlaying)}static handlePageVisibilityChange(e,t){if(t.playerState!==j.Closed&&t.playerState!==j.Unstarted&&t.playerState!==j.UserPauseUncollapsed&&t.playerState!==j.UserPauseCollapsed&&t.playerState!==j.PausedNotVisible&&t.playerState!==j.Overlapped){let{programmaticPause:n,programmaticPlay:r}=t;e?n():r()}}static handleWidthBreak(e,t){t.playerState===j.Closed||t.playerState===j.Unstarted||(e.matches?(this._isCollapsed(t.playerState)&&(this.toggleCollapsedPlayerClasses(!1,t),t.forceMobile=!0,this.toggleCollapsedPlayerClasses(!0,t)),t.forceMobile=!0):(this.toggleCollapsedPlayerClasses(!1,t),t.forceMobile=!1,this._isCollapsed(t.playerState)&&this.toggleCollapsedPlayerClasses(!0,t)))}static handleClose(e,t=0,n=`closeButton`){oE.closeEvent.emit(),n===`soCloseButton`?(e.programmaticPause(),e.playerState=j.PausedNotVisible,oE.uncollapse(e)):this.changeState(e,M.Close),oE.stopCollapseTimer(e),E.event(`RaptivePlayer`,`handleClose`,{timeElapsed:e.collapseTimer.timeCollapsed,device:It()?`desktop`:`mobile`,playerType:e.playerType,vp:t,closedBy:n})}static handleUserClick(e){this.changeState(e,M.UserClick)}static collapse(e){let{playerContainer:t,topBackgroundElement:n,programmaticPause:r,programmaticPlay:i}=e;if(this.disableCollapse)return;e.playerCollapsed=!0,e.hidePlayer(),this.toggleCollapsedPlayerClasses(!0,e),e.showPlayer(),this.repositionCollapseMobile(e,!0),e.hasPreviouslyCollapsed=!0,this.collapseEvent.emit(),n&&y.resolve(iE).handleCollapse({topBackgroundElement:n,mobileHeaderSelector:e.mobileHeaderSelector,playerContainer:t,programmaticPause:r,programmaticPlay:i}),setTimeout(e=>{this.displayCloseButton(e)},0,e);let a=y.resolve(pc);a.topCenterVideoCollapsed.emit(e),a.videoCollapsed.emit(e)}static displayCloseButton(e){this._isCollapsed(e.playerState)&&(e.closeButton.style.display=`inline-flex`)}static uncollapse(e){let{playerContainer:t,topBackgroundElement:n,mobileHeaderSelector:r}=e,i=y.resolve(pc);e.hidePlayer(),this.toggleCollapsedPlayerClasses(!1,e),e.showPlayer(),this.repositionCollapseMobile(e,!1),this._unstickFromSidebar(t),e.playerCollapsed=!1,oE.uncollapseEvent.emit(),e.closeButton.style.display=`none`,n&&(y.resolve(iE).handleUncollapse({playerContainer:t,topBackgroundElement:n},r),i.topCenterVideoUnCollapsed.emit()),i.videoUnCollapsed.emit()}static _shouldCollapse(e){let{playbackStarted:t,playerPosition:n}=e;if(!e.isAcAlwaysStickyEnabled&&!t)return!1;let r=this._shouldCollapseOnScrollUp(e);if(Ms.isMobileLandscape())return!1;let i=this._isTopCollapse(e);if(i){let t=!!e.collapseTimer.warmupStartTime,n=this._isWarmupComplete(e);if(this._isTopOfPage()||t&&!n)return!1}let a=Ms.getScrollTop(),o=Ms.getScrollBottom(),s=hw(n),c=this.offsetheight,l=s.top,u=l+c,d=a>=u||r&&o<=l,f=a>=l+c/2||r&&o<=l+c/2;return i?d:f}static _shouldCollapseOnScrollUp(e){let{collapseTimer:{firstInView:t}}=e;return!!t}static _isCollapsed(e){return e===j.CollapsedPlay||e===j.UserPauseCollapsed}static _isWarmupComplete(e){let{collapseTimer:t}=e;return t.warmupStartTime?Date.now()-t.warmupStartTime.getTime()>this._collapseTimerDuration:!1}static _isTopOfPage(){return window.scrollY<1}static _isTopCollapse(e){return e.collapseMobileSubType&&e.collapseMobileSubType===`adthrive-collapse-top-center`}static _stickToSidebar(e){e.stickyElement&&(e.playerContainer.style.left=`${e.stickyElement.getBoundingClientRect().left}px`,e.playerContainer.style.width=`${e.stickyElement.clientWidth}px`),e.playerContainer.style.top=`${e.topMargin}px`}static _unstickFromSidebar(e){e.style.bottom=``,e.style.removeProperty(`transform`)}static playerWouldOverlapFooter(e){if(!e.footerElement||LT(e.footerElement))return!1;if(e.playerContainer.className.includes(`adthrive-collapse-bottom`)||e.lastCollapsedClasses&&e.lastCollapsedClasses.includes(`adthrive-collapse-bottom`)){let t=IT();return!(window.innerHeight-t<e.footerElement.getBoundingClientRect().top)}return!((e.topMargin||0)+e.playerContainer.getBoundingClientRect().height<e.footerElement.getBoundingClientRect().top)}static _castArray(e){return Array.isArray(e)?e:[e]}static toggleClass(e,t,n){t=this._castArray(t),t.forEach(t=>{n?e.playerContainer.classList.add(t):e.playerContainer.classList.remove(t)})}static toggleCollapsedPlayerClasses(e,t){this.toggleClass(t,`raptive-player-collapse`,e),t.forceMobile?(this.toggleClass(t,dt.Mobile,e),this.toggleClass(t,t.collapseMobileSizeType,e),this.toggleClass(t,t.collapseMobileSubType,e),this.classesToggled.emit()):(this.toggleClass(t,t.collapseType,e),t.collapseSubType&&this.toggleClass(t,t.collapseSubType,e),t.collapseMobileSizeType&&this.toggleClass(t,t.collapseMobileSizeType,e),t.collapseType===dt.Mobile&&t.collapseMobileSubType&&this.toggleClass(t,t.collapseMobileSubType,e),this.classesToggled.emit())}static repositionCollapseMobile(e,t){e.isAcAlwaysStickyEnabled&&e.lastCollapseMobileSubType!==e.collapseMobileSubType&&(e.playerContainer.style.removeProperty(`top`),e.playerContainer.style.removeProperty(`bottom`));let n=e.collapseMobileSubType===pt.BottomLeft||e.collapseMobileSubType===pt.BottomRight||e.collapseMobileSubType===pt.StickyOutstreamBottomLeft||e.collapseMobileSubType===pt.StickyOutstreamBottomRight,r=e.collapseMobileSubType===pt.TopCenter;n?this.repositionCollapseMobileBottom(e):r&&this.repositionCollapseMobileTop(e,t)}static repositionCollapseMobileTop(e,t){e.topBackgroundElement&&(t?e.topBackgroundElement.style.height=`${e.playerContainer.offsetHeight}px`:(e.topBackgroundElement.style.height=`0`,e.topBackgroundElement.classList.remove(`extra-height`)))}static repositionCollapseMobileBottom(e){if(e.playerContainer.className.includes(`adthrive-collapse-bottom`)||e.collapseMobileSubType&&e.collapseMobileSubType.indexOf(`bottom`)>-1){let t=IT();e.playerContainer.style.setProperty(`top`,`auto`,`important`),e.playerContainer.style.setProperty(`bottom`,`${t}px`,`important`)}}static startCollapseTimer(e){e.collapseTimer.isRunning||(e.collapseTimer.startTime?e.collapseTimer.lastCollapsedTime=new Date:(e.collapseTimer.startTime=new Date,e.collapseTimer.lastCollapsedTime=e.collapseTimer.startTime),e.collapseTimer.isRunning=!0)}static stopCollapseTimer(e){e.collapseTimer.isRunning&&(e.collapseTimer.lastCollapsedTime&&(e.collapseTimer.timeCollapsed+=Jn()-e.collapseTimer.lastCollapsedTime.getTime()),e.collapseTimer.isRunning=!1)}static startCollapseWarmupTimer(e){e.collapseTimer.warmupStartTime||(e.collapseTimer.warmupStartTime=new Date)}static stopCollapseWarmupTimer(e){e.collapseTimer.warmupStartTime&&(e.collapseTimer.warmupStartTime=void 0)}};C($,`_collapseTimerDuration`,300),C($,`collapseEvent`,new T),C($,`uncollapseEvent`,new T),C($,`classesToggled`,new T),C($,`closeEvent`,new T),C($,`startEvent`,new T),C($,`disableCollapse`,!1),C($,`offsetheight`,0),$=oE=w([D(`CollapseUtils`)],$);let lE={firstOnload:`so-fo`,onload:`so-o`,closeBtnVisible:`so-cbv`,closeClicked:`so-cc`,closeSinceFirstImp:`so-csfi`,closeSinceOnload:`so-cso`,closeSinceBtnVisible:`so-csbv`};var uE=class e{constructor(e,t,n,r,i,a,o,s,c,l){this._config=e,this._context=t,this._slotManager=n,this._slot=r,this._videoCloseButton=i,this._gamEventBus=a,this._footerEventBus=o,this._eventProxy=s,this._slotEventBus=c,this._directSoldInterscrollerAdEventBus=l,C(this,`_isRendered`,!1),C(this,`_isClosed`,!1),C(this,`_removeListener`,void 0),C(this,`_elementClassNamePrefix`,`adthrive-sticky-outstream`),C(this,`_mobileHeaderSelector`,void 0),C(this,`_mobileLocation`,void 0),C(this,`_prebidAmazonAdvertiserIds`,void 0),C(this,`_isMobile`,this._context.device===`phone`),C(this,`_hiddenClassName`,`adthrive-player-hidden`),C(this,`_markNames`,[lE.firstOnload,lE.onload,lE.closeClicked,lE.closeBtnVisible]),C(this,`_measureNames`,[lE.closeSinceFirstImp,lE.closeSinceOnload,lE.closeSinceBtnVisible]),C(this,`_observer`,void 0),C(this,`_closeButton`,void 0),C(this,`_scrollEventHandler`,()=>{}),C(this,`_footerBottom`,52),C(this,`_isFooterRibbonOnPage`,!1),C(this,`_isDirectSoldInterscrollerOnPage`,!1),C(this,`_handleCloseClick`,()=>{performance.mark(lE.closeClicked),this._handleClose(`closeClick`)}),this._prebidAmazonAdvertiserIds=[e.prebid.advertiserId,e.amazon.advertiserId];let{mobileHeaderSelector:u,mobileLocation:d}=this._config.video.stickyOutstreamSettings;this._mobileHeaderSelector=u,this._mobileLocation=B(d,`bottom-right`),this._addSlickDialogListeners(),this._footerEventBus.footerHeightChanged.on(e=>{this._addOffset(e)}),this._slotEventBus.stickyOutstreamRegenerateCloseButton.on(e=>{this._appendCloseButton(e)})}_listenForStationaryRelatedPlaying(){this._eventProxy.videoPlaying.on(e=>{e.playerType===k.EmbeddedStationary&&this._handleClose(`stationaryRelatedInitiated`)})}setup(){this._isRendered||(this._isRendered=!0,this._appendCloseButton(),this._activate()),this._slot.setSlotTargetingFlag(`fref`,[`${this._slot.noAdRefreshCount}`],!0),$.collapseEvent.on(()=>{this._closeOnRelatedCollapse()}),this._listenForFooterRibbon(),this._listenForDirectSoldInterscroller(),this._listenForStationaryRelatedPlaying()}get renderState(){return this._isRendered}_listenForFooterRibbon(){this._footerEventBus.footerVideoRibbonStateChanged.on(e=>{this._isFooterRibbonOnPage=e,this._hideIfConflictingAdPresent()})}_listenForDirectSoldInterscroller(){this._directSoldInterscrollerAdEventBus.adOnPage.on(()=>{this._isDirectSoldInterscrollerOnPage=!0,this._hideIfConflictingAdPresent()}),this._directSoldInterscrollerAdEventBus.adRemoved.on(()=>{this._isDirectSoldInterscrollerOnPage=!1,this._hideIfConflictingAdPresent()})}_hideIfConflictingAdPresent(){let e=this._slot.element.parentElement;e&&(this._isFooterRibbonOnPage||this._isDirectSoldInterscrollerOnPage?e.classList.add(`adthrive-hidden`):e.classList.remove(`adthrive-hidden`))}_activate(){this._handleWidthBreak();let e=this._slot.element.parentElement;e&&(e.classList.add(`${this._elementClassNamePrefix}-idle`),this._isMobile&&this._setElementStyle(e),this._gamEventBus.slotRequested.on(this._handleSlotRequested.bind(this)),this._gamEventBus.slotRenderEnded.on(this._handleSlotRenderEnded.bind(this)),this._gamEventBus.slotOnload.on(this._handleSlotOnload.bind(this)))}_setElementStyle(e){if(this._mobileLocation===`top-center`)this._setTopCenterStyle(e);else{let t=this._mobileLocation?this._mobileLocation.split(`-`)[1]:`right`;e.classList.add(`${this._elementClassNamePrefix}-mobile-${t}`)}}_setScrollListener(e,t,n){this._scrollEventHandler=Ao(()=>{let r=t.getBoundingClientRect().bottom,i=n&&n.getBoundingClientRect().bottom,a=r>i?r:i;e.style.setProperty(`top`,`${a}px`)},20),window.addEventListener(`scroll`,this._scrollEventHandler)}_setTopCenterStyle(e){let t=this._mobileHeaderSelector?Ps(this._mobileHeaderSelector):null,n=t&&t.valid&&t.elements&&t.elements[0]||null,r=0;if(n){let t=document.querySelector(`.slick-film-strip`);r=t?t.getBoundingClientRect().bottom:n.getBoundingClientRect().bottom,this._setScrollListener(e,n,t)}e.classList.add(`${this._elementClassNamePrefix}-top-center`);let i=this._config.isStickyOutstreamTopCenterColorsDisabled?`#000000`:this._config.adOptions.bgColor;e.style.setProperty(`background-color`,i),e.style.setProperty(`top`,`${r}px`)}_handleSlotOnload({slotId:e}){this._slotManager.getSlot(e)?.location===`Video_StickyOutstream`&&(performance.mark(lE.onload),performance.getEntriesByName(lE.firstOnload).length||performance.mark(lE.firstOnload))}_handleSlotRenderEnded({event:e,slotId:t}){if(this._slotManager.getSlot(t)?.location===`Video_StickyOutstream`&&!e.isEmpty&&(!e.advertiserId||!this._prebidAmazonAdvertiserIds.includes(e.advertiserId))){this._hideIfConflictingAdPresent();let e=this._slot.element.parentElement;if(!e)return;e.classList.add(`${this._elementClassNamePrefix}-active`),e.classList.remove(`${this._elementClassNamePrefix}-idle`)}}_handleSlotRequested({slotId:e}){if(this._slotManager.getSlot(e)?.location===`Video_StickyOutstream`){let e=this._slot.element.parentElement;if(!e||e.classList.contains(`${this._elementClassNamePrefix}-idle`))return;e.classList.remove(`${this._elementClassNamePrefix}-active`),e.classList.add(`${this._elementClassNamePrefix}-idle`)}}_createObserver(e){this._observer=new MutationObserver(e=>{e.forEach(e=>{e.target.classList.contains(`${this._elementClassNamePrefix}-active`)?this._displayCloseButton():this._hideCloseButton()})}),this._observer.observe(e.parentElement||e,{attributes:!0,attributeFilter:[`class`]})}_hideCloseButton(){let e=this._closeButton;e&&(e.style.display=`none`)}_displayCloseButton(){let e=this._closeButton;e&&setTimeout(()=>{e.style.display=`inline-flex`,performance.mark(lE.closeBtnVisible)},this._config.video.stickyOutstreamCloseButtonTimeout)}_removeCloseButton(){this._closeButton?.removeEventListener(`click`,this._handleCloseClick),this._closeButton?.remove(),this._closeButton=void 0}_appendCloseButton(e=!1){this._removeCloseButton();let t=this._slot.element,n=this._videoCloseButton.createPlayerCloseButton(this._handleCloseClick,`sticky outstream`,`${this._elementClassNamePrefix}-close`,!1,this._isMobile?this._mobileLocation:void 0,e);this._hideCloseButton(),t.parentNode?.insertBefore(n,t),this._closeButton=n,this._createObserver(t)}_addSlickDialogListeners(){document.addEventListener(`slick-auth-dialog-opened`,()=>{this._slot.element.classList.add(this._hiddenClassName)}),document.addEventListener(`slick-auth-dialog-closed`,()=>{this._slot.element.classList.remove(this._hiddenClassName)})}_getMeasure(e,t,n){try{return(performance.measure(e,t,n).duration/1e3).toFixed(2)}catch{return-1}}_getDurations(){let e=this._getMeasure(lE.closeSinceOnload,lE.onload,lE.closeClicked),t=this._getMeasure(lE.closeSinceBtnVisible,lE.closeBtnVisible,lE.closeClicked),n=this._getMeasure(lE.closeSinceFirstImp,lE.firstOnload,lE.closeClicked),r=(performance.now()/1e3).toFixed(2);return{slotTime:e,btnTime:t,firstImp:n,pageLoad:r,refresh:this._slot.refreshCount}}_cleanUpLogging(){this._observer?.disconnect(),this._markNames.forEach(e=>performance.clearMarks&&performance.clearMarks(e)),this._measureNames.forEach(e=>performance.clearMeasures&&performance.clearMeasures(e))}_logPlayerClose(t){e.closeEvent.emit(),E.event(`StickyOutstream`,`handleClose`,{device:It()?`desktop`:`mobile`,closeReason:t,...this._getDurations()}),this._cleanUpLogging(),window.removeEventListener(`scroll`,this._scrollEventHandler)}_closeOnRelatedCollapse(){this._handleClose(`relatedCollapse`)}_handleClose(e){if(this._isClosed)return;this._isClosed=!0;let t=this._slot.element,n=t.parentElement;this._logPlayerClose(e),n&&(n.removeChild(t),n.classList.remove(`${this._elementClassNamePrefix}-active`),this._slotManager.destroy(t.id),e===`closeClick`&&this._slotEventBus.stickyOutstreamSlotDestroyedUserClick.emit(this._slot.id),this._removeListener())}_handleWidthBreak(){this._removeListener=this._footerEventBus.footerResponseReceived.on(this._handleFooterResponseReceivedEvent.bind(this)),this._repositionCollapseBottom()}_handleFooterResponseReceivedEvent(){this._repositionCollapseBottom()}_repositionCollapseBottom(){this._isMobile&&this._mobileLocation!==`top-center`&&(this._footerBottom=IT(),this._slot.element.parentElement&&(this._slot.element.parentElement.style.setProperty(`top`,`auto`,`important`),this._slot.element.parentElement.style.setProperty(`bottom`,`${this._footerBottom}px`,`important`)))}_addOffset(e){let t=this._config.video.stickyOutstreamSettings.mobileLocation===`bottom-right`&&document.querySelector(`slick-sticky-toolbar`),n=e-this._footerBottom,r=t?-76:0;this._slot.element.parentElement&&this._slot.element.parentElement.style.setProperty(`transform`,`translate(${r}px, -${n}px)`,`important`),document.querySelectorAll(`.raptive-sales-footer`)&&this._adjustPositionForCeltraAds()}_adjustPositionForCeltraAds(){this._hideIfConflictingAdPresent();let e=document.querySelector(`#AdThrive_Video_StickyOutstream_1_phone`);if(!e)return;let t=()=>{e.style.position===`fixed`&&e.style.setProperty(`position`,`static`)};new MutationObserver(()=>{t()}).observe(e,{attributes:!0,attributeFilter:[`class`]}),t()}};C(uE,`closeEvent`,new T);let dE=class extends I{constructor(e,t,n,r,i,a,o,s,c,l,u,d){super(),this._slots=e,this._config=t,this._context=n,this._slotManager=r,this._videoCloseButton=i,this._outstream=a,this._amazonMethods=o,this._gamEventBus=s,this._slotEventBus=c,this._footerEventBus=l,this._videoEventProxy=u,this._directSoldInterscrollerAdEventBus=d,C(this,`_sticky`,[]),C(this,`_stickyOutstream`,void 0),this._slots.added.on(e=>{if(e?.location!==H.Recipe&&e&&e.sticky){if(e.element.classList.add(`adthrive-sticky`),e.location===H.Sidebar){let t=e.sequence&&e.sequence<=5,n=this._config.adOptions.dynamicStickySidebarEnabled&&e.sequence&&e.sequence>=9;t||n&&e.element.classList.contains(`adthrive-sticky-sidebar`)?eE(e.element):this._sticky.push(new RT(e,!0,this._config))}e.location===H.Video_StickyOutstream&&(this._stickyOutstream=new uE(this._config,this._context,this._slotManager,e,this._videoCloseButton,this._gamEventBus,this._footerEventBus,this._videoEventProxy,this._slotEventBus,this._directSoldInterscrollerAdEventBus),this._sticky.push(new RT(e,!0,this._config)))}}),this._amazonMethods.isAmazonLoaded()&&this._config.amazon.enabled&&(this._gamEventBus.slotOnload.on(({slotId:e})=>{let t=this._slots.get(e),n=window.apsBidObject?window.apsBidObject.VAST:null;t?.location===H.Video_StickyOutstream&&n&&(this._outstream.callRendererWithUrl(n,t.id,!0),delete window.apsBidObject)}),this._slotEventBus.adRenderingOutsideGAM.on(({slotId:e,bidResponse:t})=>{this._callAmazonVastEndpoint(e,t)}))}_callAmazonVastEndpoint(e,t){let n=this._slots.get(e);if(!n||!ic(t))return;let r=Math.floor(Math.random()*1e11),i=`https://aax.amazon-adsystem.com/e/dtb/vast?b=${t.amzniid}&rnd=${r}&pp=${t.amznbid}`;this._outstream.callRendererWithUrl(i,n.id,!0)}stickyOutstreamReady(){this._stickyOutstream&&!this._stickyOutstream.renderState&&this._stickyOutstream.setup()}};dE=w([D(`StickyComponent`),S(),N(0,b(Y)),N(1,b(J)),N(2,b(W)),N(3,b(eS)),N(4,b(rE)),N(5,b(ES)),N(6,b(Pp)),N(7,b(X)),N(8,b(Hs)),N(9,b(Pr)),N(10,b(Dy)),N(11,b(Ww))],dE);let fE=class extends I{constructor(e,t,n,r,i,a,o){super(),this._slotManager=e,this._sticky=t,this._intersectionObserverManager=n,this._slotManagerEventBus=r,this.jumpToRecipeTracker=i,this._dynamicContentSlotLazyLoadingComponent=a,this._lazyLoadWithIntersectionObserversExperiment=o,C(this,`_useLazyLoadIntersectionObserversExperiment`,void 0),this._useLazyLoadIntersectionObserversExperiment=this._lazyLoadWithIntersectionObserversExperiment.isActive()}init(){let e=this._slotManager;this.jumpToRecipeTracker.onJumpToRecipeClicked.once(()=>{this._intersectionObserverManager.reobserveAll()}),this._slotManagerEventBus.added.on(t=>{let n=this._slotManager.getSlots(t);for(let t of n)if(t.lazy){let e=this._useLazyLoadIntersectionObserversExperiment?!this._dynamicContentSlotLazyLoadingComponent.lazyLoadingEnabledForSlot(t):!1;Z.pushToQueue(()=>{t.googleTagSlot.setTargeting(`lazy`,`true`)}),this._intersectionObserverManager.observe(t,e)}else t.location===H.Video_StickyOutstream?(this._sticky.stickyOutstreamReady(),e.display([t]).catch(e=>{E.error(`GoogleLazyLoadComponent`,`init`,`display stickyOutstream slot`,e)})):(Z.pushToQueue(()=>{t.googleTagSlot.setTargeting(`lazy`,`false`)}),e.display(t).catch(e=>{E.error(`GoogleLazyLoadComponent`,`init`,`display non lazy slot`,e)}))})}};fE=w([D(`GoogleLazyLoadComponent`),x(),N(0,b(eS)),N(1,b(dE)),N(2,b(Js)),N(3,b($f)),N(4,b(Yx)),N(5,b(Ys)),N(6,b(Ks))],fE);let pE=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`MagniteCarbon`,this._lookup=`MGNCRBN`}run(){return super.run()}};w([R()],pE.prototype,`run`,null),pE=w([S()],pE);let mE=class extends I{constructor(e,t,n,r,i,a,o,s){super(),this._gpc=e,this._ccpa=t,this._gdpr=n,this._magniteCarbonExperiment=r,this._prebidMethods=i,this._prebidEventBus=a,this._events=o,this._gdprEnforcement=s,C(this,`ANALYTICS_VERSION`,`v1.0`),C(this,`PROFILE_ID_KEY`,`carbon_ccuid`),C(this,`PROFILE_ID_COOKIE`,`ccuid`),C(this,`SESSION_ID_COOKIE`,`ccsid`),C(this,`MAGNITE_CARBON_GVLID`,493),C(this,`PARENT_ID`,`8fea659f19`),C(this,`ANALYTICS_HOST`,`https://pb-ing.ccgateway.net`),C(this,`pageViewId`,``),C(this,`profileId`,``),C(this,`sessionId`,``),C(this,`_pageEngagement`,{ttl:60,count:0,id:0,startTime:0,timeLastEngage:0}),C(this,`_auctionEndEventCount`,0)}init(){this._gdpr.enabled?this._events.consentResponseCaptured.on(()=>{this._gdprEnforcement.checkConsentForVendor(this.MAGNITE_CARBON_GVLID,[1]).then(e=>{e&&this._beginEventLogging()}).catch(()=>{})}):this._beginEventLogging()}async _beginEventLogging(){this._pageEngagement.id=this._generateUUID(),this._pageEngagement.startTime=Date.now(),this._pageEngagement.timeLastEngage=Date.now(),this.pageViewId=this._generateUUID().toString(),this.profileId=this._getProfileId(),this.sessionId=this._getSessionId();let e=await this._createBaseEngagementEvent();this._sendEngagementEvent(e,`page_load`),this._prebidEventBus.auctionEnd.once(()=>{this._auctionEndEvent()}),this._prebidEventBus.tcf2Enforcement.on(e=>{this.tcf2EnforcementEvent(e)})}async tcf2EnforcementEvent(e){if(e.storageBlocked?.length>0||e.biddersBlocked?.length>0||e.analyticsBlocked?.length>0){this._registerEngagement();let t=await this._createBaseEngagementEvent();t.tcf_events=e,this._sendEngagementEvent(t,`tcf_enforcement`)}}async _auctionEndEvent(){if(this._auctionEndEventCount++,this._auctionEndEventCount===1){this._registerEngagement();let e=await this._createBaseEngagementEvent();this._sendEngagementEvent(e,`auction_end`)}}async _createBaseEngagementEvent(){let e={profile_id:this.profileId,session_id:this.sessionId,pageview_id:this.pageViewId,engagement_id:this._pageEngagement.id,engagement_count:this._pageEngagement.count,engagement_ttl:this._pageEngagement.ttl,start_time:this._pageEngagement.startTime,end_time:Date.now(),script_id:window.location.host,url:window.location.href,referrer:document.referrer,consent:await this._getConsentData()};return e.external_ids=await this.getExternalIds(),e}_registerEngagement(){let e=Date.now(),t=(e-this._pageEngagement.timeLastEngage)/1e3;this._pageEngagement.timeLastEngage=e,!(t<this._pageEngagement.ttl)&&(this._pageEngagement.count++,this._pageEngagement.startTime=e,this._pageEngagement.id=this._generateUUID())}async _getConsentData(){let e={};return this._ccpa.required&&(e.ccpa_consent=this._ccpa.privacyString??``),this._gdpr.enabled&&this._gdpr.consentCaptured&&this._gdpr.consentCapturedData?.consentString?e.gdpr_consent=this._gdpr.consentCapturedData.consentString:this._gdpr.enabled&&typeof window.__tcfapi==`function`&&(e.gdpr_consent=await new Promise(e=>{window.__tcfapi(`getTCData`,2,(t,n)=>{n&&t&&t.tcString&&t.tcString.length?e(t.tcString):e(``)})})),e}async getExternalIds(){let e={},t=[];return await this._prebidMethods.waitForQueue().then(n=>{n===!0&&(t=this._prebidMethods.getUserIdsAsEids()),t.forEach(t=>{t.source&&t?.uids.length&&(e[t.source]=t.uids.map(e=>e.id))})}),e}_sendEngagementEvent(e,t){let n=`${this.ANALYTICS_HOST}/${this.ANALYTICS_VERSION}/parent/${this.PARENT_ID}/engagement/trigger/${t}`;fetch(n,{method:`POST`,headers:{"Content-Type":`application/json`},credentials:`include`,body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{try{this._updateProfileId(e)}catch{E.error(`MagniteCarbonComponent`,`importScript`,`unable to parse API response`)}}).catch(e=>E.error(`MagniteCarbonComponent`,`importScript`,e))}_updateProfileId(e){e?.update&&e?.id!=``&&(L.setExternalCookie(this.PROFILE_ID_COOKIE,e.id,{expiry:{unit:`days`,value:89},sameSite:`Lax`}),L.setExternalLocalStorage(this.PROFILE_ID_KEY,e.id))}_getProfileId(){let e=L.readExternalLocalStorage(this.PROFILE_ID_KEY),t=L.readExternalCookie(this.PROFILE_ID_COOKIE);if(e)return L.setExternalCookie(this.PROFILE_ID_COOKIE,e,{expiry:{unit:`days`,value:89},sameSite:`Lax`}),e;if(t)return L.setExternalLocalStorage(this.PROFILE_ID_KEY,t),t;let n=this._generateUUID();return L.setExternalLocalStorage(this.PROFILE_ID_KEY,n.toString()),L.setExternalCookie(this.PROFILE_ID_COOKIE,n.toString(),{expiry:{unit:`days`,value:89},sameSite:`Lax`}),n.toString()}_getSessionId(){let e=L.readExternalCookie(this.SESSION_ID_COOKIE);if(e&&e!=``)return L.setExternalCookie(this.PROFILE_ID_COOKIE,e,{expiry:{unit:`minutes`,value:5},sameSite:`Lax`}),e;let t=this._generateUUID();return L.setExternalCookie(this.PROFILE_ID_COOKIE,t.toString(),{expiry:{unit:`minutes`,value:5},sameSite:`Lax`}),t.toString()}_generateUUID(e){let t=0;return t=window&&window.crypto&&window.crypto.getRandomValues!==void 0?crypto.getRandomValues(new Uint8Array(1))[0]%16:Math.random()*16,e?(e^t>>e/4).toString(16):`10000000-1000-4000-8000-100000000000`.replace(/[018]/g,this._generateUUID)}get enabled(){return this._magniteCarbonExperiment.result&&!this._gpc.gpcEnabled&&!this._ccpa.userOptedOut}};mE=w([D(`MagniteCarbonComponent`),S(),N(0,b(mi)),N(1,b(U)),N(2,b(pi)),N(3,b(pE)),N(4,b(P)),N(5,b(Qf)),N(6,b(mp)),N(7,b(gp))],mE);let hE=class extends I{constructor(e,t){super(),this._slotManagerEventBus=e,this._slots=t}init(){this._slotManagerEventBus.added.on(e=>{let t=this._slots.get(e);Z.pushToQueue(()=>{for(let e of t){let t=wc(e)||0;e.hvp=t,t>=50&&e.setTargeting({key:`hvp`,value:t.toString()})}})}),this._slotManagerEventBus.refreshing.on(e=>{let t=this._slots.get(e);Z.pushToQueue(()=>{for(let e of t)if(e?.refreshCount<=2&&(!e?.hvp||e?.hvp<80)){let t=Cc(e)||0;e.hvp=t,t>=60&&e.setTargeting({key:`hvp`,value:`${t}`})}})})}};hE=w([D(`HvpComponent`),x(),N(0,b($f)),N(1,b(Y))],hE);let gE=(e,t)=>{window.addEventListener(`message`,n=>{try{let{origin:r,source:i}=n,a=JSON.parse(n.data),o=a&&a.message===t.message;if(!(r&&r.match(e))||!o)return;i.postMessage(JSON.stringify(t),r)}catch{return}})},_E=class{constructor(e,t){this._config=e,this._gam=t,this._config.marmalade.selectorMatches=this.filterBasedOnSettings()}inject(){try{return this._config.marmalade.selectorMatches.reduce(this.processMatch.bind(this),[])}catch(e){E.error(`MarmaladeInjector`,`inject`,e)}return[]}filterBasedOnSettings(){let e=this._config.adTypes,t=z()?e.inRecipeRecommendationMobile:e.inRecipeRecommendationDesktop,n=z()?e.sponsorTileMobile:e.sponsorTileDesktop;return this._config.marmalade.selectorMatches.filter(({adUnit:e})=>e.location===`Native_Recipe`?(t&&this._gam.setTargetingFlag(`irrEligible`,[`true`],!0),t):e.location===`Sponsor_Tile`?(n&&this._gam.setTargetingFlag(`stEligible`,[`true`],!0),n):!0)}processMatch(e,t){let{adUnit:n,match:r}=t,i=this.getElementId(n.location,n.sequence);if(!e.some(e=>e.location===n.location&&e.sequence===n.sequence)){let t=this.addAd(r,i,n.position,n.classNames);if(t){let r=new $C(n.location,n.sequence,n.size,t,!1,n.lazy);e.push(r)}}return e}getElementId(e,t){return[this._config.gam.prefix,e,t].filter(uc).join(`_`)}addAd(e,t,n,r=[]){let i=`<div id="${t}" class="adthrive-ad ${r.join(` `)}"></div>`;return e.insertAdjacentHTML(n,i),document.getElementById(t)}};_E=w([D(`MarmaladeInjector`),x(),N(0,b(J)),N(1,b(Z))],_E);let vE=class extends I{constructor(e,t,n,r,i,a,o,s,c,l){super(),this._config=e,this._marmaladeInjector=t,this._slotManager=n,this._gam=r,this._prebidMethods=i,this.gamEventBus=a,this._marmaladeEventBus=o,this._slotEventBus=s,this._slotManagerEventBus=c,this._slots=l,C(this,`_mcmp`,[]),C(this,`_siteCodes`,[]),C(this,`_filteredSiteCodes`,[]),C(this,`_siteCodeObject`,{}),this._setMarmaladeData()}async _setMarmaladeData(){let e=this._config.marmalade;await e.marmaladeEventPromise,this._mcmp=e.mcmp.filter(ki),this._siteCodes=e.siteCodes,this._filteredSiteCodes=e.filteredSiteCodes,this._siteCodeObject=this._filteredSiteCodes.reduce((e,t)=>(e[t]=`True`,e),{})}init(){this._setup()}async _setup(){await this._config.marmalade.marmaladeEventPromise,this._marmaladeEventBus.marmaladeResponseLoaded.on(()=>{this._initializeMarmalade()}),this._slotEventBus.preRequestBids.on(e=>{this._slots.get(e).forEach(e=>{Z.pushToQueue(()=>{e.setTargeting(this.getMcmpTargeting())})})}),this._addDynamicSlots(),this._addFlpMessaging(),this._setPageLevelTargeting(),this._setIXTargeting();let e=()=>{this._setMcmpTargeting(),this._setIXTargeting()};this._config.marmalade.rfDataProcessed.emitted?e():this._config.marmalade.rfDataProcessed.on(()=>e())}getMcmpTargeting(){let e=[...this._mcmp,...this._getRfCodes(`gam`)],t=this._config.trackScroll,n=t.trackScrollEnabled&&t.getTargetingValue();return n&&e.push(...n),{key:`mcmp`,value:e}}_initializeMarmalade(){this._mcmp=this._config.marmalade.mcmp.filter(ki),this._siteCodes=this._config.marmalade.siteCodes,this._filteredSiteCodes=this._config.marmalade.filteredSiteCodes,this._siteCodeObject=this._filteredSiteCodes.reduce((e,t)=>(e[t]=`True`,e),{}),this.init()}_getRfCodes(e){let t=[];if(e){let n=this._config.marmalade;[...n.rfMcmpCodes,...n.rfIabCodes].forEach(n=>{let r=n[0];n[1].includes(e)&&t.push(r)})}return t}_setMcmpTargeting(){let e=this._getRfCodes(`gam`);this._config.marmalade.mcmpTargeting=[...this._mcmp,...e]}_setIXTargeting(){let e=this._getRfCodes(`ix`),t=this._config.trackScroll.getTargetingValue(),n=t?[t]:[];ap({MCMP:[...e,...this._mcmp,...n].join(`#MCMP:`),...this._siteCodeObject},this._prebidMethods)}_setPageLevelTargeting(){this._slotManagerEventBus.requestingBids.once(()=>{this._gam.setTargetingFlag(`rf`,[String(this._marmaladeEventBus.recencyFrequencyDataSet.emitted)])}),this._setMcmpTargeting(),this._gam.setTargeting({key:`site_code`,value:this._siteCodes}),this._gam.setTargeting({key:`marmalade`,value:this._config.marmalade.loaded?`true`:`false`});let e=this._config.marmalade.albertonsBrands;e?.length&&this._gam.setTargeting({key:`aci_brand`,value:e[0]})}_addDynamicSlots(){let e=this._marmaladeInjector.inject();e.forEach(e=>e.refreshInterval=0),e.length>0&&this.gamEventBus.started.on(async()=>{await this._slotManager.add(e).catch(e=>{E.error(`MarmaladeComponent`,`init`,e)})})}_addFlpMessaging(){let e=this._config.marmalade.flpProdIds.filter(ki);e&&gE(/https:\/\/\S*\.safeframe.googlesyndication.com/i,{message:`adthriveFlippData`,flippData:e})}get enabled(){return!this._config.disableAds.all}};vE=w([D(`MarmaladeComponent`),x(),N(0,b(J)),N(1,b(_E)),N(2,b(eS)),N(3,b(Z)),N(4,b(P)),N(5,b(X)),N(6,b(Oi)),N(7,b(Hs)),N(8,b($f)),N(9,b(Y))],vE);let yE=e=>{let t=encodeURIComponent(location.href),n=`https://ads.adthrive.com/api/v1/marmalade?siteid=${e}&url=${t}&experiments=recencyFrequency`;return fetch?fetch(n).then(e=>e.json()).catch(e=>(E.error(`getMarmaladeData`,`Unable to get marmalade data. Error:`,e),null)):new Promise(e=>{let t=new XMLHttpRequest;t.onload=()=>{t.status===200&&e(t.response)},t.open(`GET`,n,!0),t.responseType=`json`,t.send()})},bE=class extends I{constructor(e,t,n){super(),this._spaEventBus=e,this._marmaladeEventBus=t,this._config=n,C(this,`_siteId`,void 0),this._siteId=this._config.site.id}init(){this._spaEventBus.routeChanged.on(async()=>{let e=await yE(this._siteId);e&&(this._config.marmalade.updateMarmalade(e),this._marmaladeEventBus.marmaladeResponseLoaded.emit(e))})}get enabled(){return!cn.isRolloutEnabled(`spa-refresh-improvements`)}};bE=w([D(`SPAMarmaladeComponent`),x(),N(0,b(xc)),N(1,b(Oi)),N(2,b(J))],bE);let xE=class extends I{constructor(e,t){super(),this._slots=e,this._gamEventBus=t,C(this,`_pendingAdjustments`,new Map),C(this,`_excludedLocations`,[H.Footer,H.Video_StickyOutstream,H.Recipe])}get enabled(){return!0}init(){this._gamEventBus.slotRenderEnded.on(this._handleSlotRenderEnded.bind(this))}_handleSlotRenderEnded({event:e,slotId:t}){let n=this._slots.get(t);if(!n||!this._isOneByOneAd(e.size)||this._excludedLocations.includes(n.location))return;let r=this._pendingAdjustments.get(t);r&&clearTimeout(r);let i=setTimeout(()=>{this._checkAndAdjustHeight(n),this._pendingAdjustments.delete(t)},5e3);this._pendingAdjustments.set(t,i)}_isOneByOneAd(e){return e?!!(Array.isArray(e)&&e.length===2&&e[0]===1&&e[1]===1||typeof e==`string`&&e===`1x1`):!1}_checkAndAdjustHeight(e){try{let t=e.element;if(!t)return;let n=getComputedStyle(t),r=parseFloat(n.minHeight),i=t.offsetHeight;i>r&&(t.style.minHeight=`${i}px`)}catch(t){E.error(`OneByOneHeightAdjustmentComponent`,`_checkAndAdjustHeight`,`Error checking/adjusting height for slot ${e.id}:`,t)}}};xE=w([D(`OneByOneHeightAdjustmentComponent`),x(),N(0,b(Y)),N(1,b(X))],xE);let SE={EMAIL:`e:`,IP4:`i4:`,GPID:`c:`,RCID:`c3`,UID1:`c5:`},CE={PUBMATIC_SSP_ID:`c1:`},wE=()=>({totalClusterCount:0,totalSourceCount:0,uniqueSources:[],uniqueIds:[],uniqueTraits:[],lastSeen:null,lastSeenSource:null,lastSeenSourceClusterCount:0,lastSeenSourceIds:[],lastSeenSourceTraits:[]}),TE=(e,t)=>e<t?-1:e>t?1:0,EE=(e,t)=>(t.lastSeen??0)-(e.lastSeen??0),DE=e=>Array.from(new Set(e)).sort(TE),OE=e=>{let t={metadata:wE(),sources:{mediawallah:{clusters:[]},truedata:{clusters:[]},id5:{clusters:[]}},lmpid:e.lmpid??``};return e.clusters?(e.clusters.forEach(e=>{let n=e.ids??[],r=null;e.traits.forEach(e=>{let{key:i,value:a}=e;i===`metadata`&&a&&a.split(`|`).forEach(e=>{let{id:i,metadata:a}=JSON.parse(e),{last_seen:o,percentile:s,source:c,cookie_type:l}=a,u=c?.toLowerCase(),d=i;u?.includes(`mediawallah`)?r=`mediawallah`:u?.includes(`truedata`)?r=`truedata`:u?.includes(`id5`)&&(r=`id5`,d=`id5:${d}`);let f=Array.from(new Set([d,...n])).sort(TE),p={lastSeen:new Date(o*1e3).getTime(),...r===`id5`?{cookieType:l.toLowerCase().replace(/\s/g,``)}:{},...(r===`mediawallah`||r===`truedata`)&&s!==void 0?{percentile:parseInt(s)}:{}};r&&(t.metadata.uniqueIds.push(...f),t.metadata.uniqueSources.push(r),t.metadata.uniqueTraits.push(...Object.keys(p)),t.sources[r].clusters.push({ids:f,traits:p})),(!t.metadata.lastSeen&&p.lastSeen||t.metadata.lastSeen&&p.lastSeen&&p.lastSeen>t.metadata.lastSeen)&&(t.metadata.lastSeen=p.lastSeen,t.metadata.lastSeenSource=r,t.metadata.lastSeenSourceIds=DE([...n,d]),t.metadata.lastSeenSourceTraits=Object.keys(p).sort(TE))})})}),t.metadata.totalClusterCount=Object.values(t.sources).reduce((e,t)=>e+t.clusters.length,0),t.metadata.lastSeenSourceClusterCount=t.metadata.lastSeenSource===`mediawallah`?t.sources.mediawallah.clusters.length:t.sources.truedata.clusters.length,t.metadata.uniqueSources=DE(t.metadata.uniqueSources),t.metadata.uniqueIds=DE(t.metadata.uniqueIds),t.metadata.uniqueTraits=DE(t.metadata.uniqueTraits),t.metadata.totalSourceCount=t.metadata.uniqueSources.length,Object.values(t.sources).forEach(e=>{e.clusters.sort((e,t)=>EE(e.traits,t.traits))}),t):t},kE=e=>{let t={metadata:wE(),sources:{raptive:{clusters:[]}}};if(!e.clusters)return t;let n=[],r=[];return e.clusters.forEach(e=>{let i={cookieDeprecationLabel:[],lastSeen:null,hemCollectionDate:[],hemSites:[],hemSources:[],browser:[],device:[],os:[],trueDataHems:[]};e.traits.forEach(e=>{let{key:t,value:n}=e;switch(t){case`cookieDeprecationLabel`:i.cookieDeprecationLabel.push(n);break;case`hem_cd`:{let e=new Date(n).getTime();i.hemCollectionDate.push(e),e>(i.lastSeen??0)&&(i.lastSeen=e);break}case`hem_dates`:{let e=new Date(n).getTime();e>(i.lastSeen??0)&&(i.lastSeen=e);break}case`hem_sites`:i.hemSites.push(n);break;case`hem_sources`:i.hemSources.push(n);break;case`browser`:i.browser.push(n);break;case`device`:i.device.push(n);break;case`os`:i.os.push(n);break;case`td_hems`:i.trueDataHems.push(n);break;default:break}}),Object.entries(i).forEach(([e,t])=>{Array.isArray(t)&&(i[e]=Array.from(new Set(t)).sort(TE))}),t.sources.raptive.clusters.push({ids:Array.from(new Set(e.ids??[])).sort(TE),traits:i}),t.metadata.uniqueIds.push(...e.ids),t.metadata.uniqueTraits.push(...Object.keys(i)),i.lastSeen&&(!t.metadata.lastSeen||i.lastSeen>t.metadata.lastSeen)&&(t.metadata.lastSeen=i.lastSeen,t.metadata.lastSeenSource=`raptive`,n=e.ids,r=Object.keys(i))}),t.metadata.lastSeenSourceIds=DE(n),t.metadata.lastSeenSourceTraits=DE(r),t.metadata.totalClusterCount=t.sources.raptive.clusters.length,t.metadata.lastSeenSourceClusterCount=t.sources.raptive.clusters.length,t.metadata.totalSourceCount=1,t.metadata.uniqueSources.push(`raptive`),t.metadata.uniqueIds=DE(t.metadata.uniqueIds),t.metadata.uniqueTraits=DE(t.metadata.uniqueTraits),Object.values(t.sources).forEach(e=>{e.clusters.sort((e,t)=>EE(e.traits,t.traits))}),t},AE=class{constructor(e,t){this._gdprEvents=e,this._gdpr=t,C(this,`_gdprConsentAccepted`,void 0),C(this,`_cmdQueue`,[])}async load(e,t){let n=`s-${e}`;window.optable?.instance&&window.optable?.auth&&window.optable?.site===n&&window.optable.auth?.site===n||(window.optable=window.optable||{cmd:[]},window.optable.site=n,window.optable.geo=t===`CA`?`US`:t,window.optable.auth||(window.optable.auth={}),window.optable.auth.site=n,window.optable.instance||(window.optable.instance={},window.optable.instance.dcn=window.optable.instance.dcn||{}),window.optable.tests||(window.optable.tests={}),this._gdpr.enabled&&this._gdprEvents.consentResponseCaptured.on(()=>this._handleGdprConsentCapture(),{handleEventsAlreadyEmitted:!0}),await Ih(`https://raptive.solutions.cdn.optable.co/public-assets/raptive-sdk.js`))}setDCNExperiments(e){window.optable?.instance&&(window.optable.instance.dcn=window.optable.instance.dcn||{},window.optable.instance.dcn.experiments=e)}loaded(){return!!window.optable?.site&&!!window.optable?.instance&&!!window.optable?.auth}_handleGdprConsentCapture(){if(this._gdprConsentAccepted=im(this._gdpr.raptiveVendorId,[1]),this._gdprConsentAccepted&&this._cmdQueue.length>0)for(;this._cmdQueue.length>0;){let e=this._cmdQueue.shift();e&&e.fn&&this._addToOptableQueue(e.fn)}else this._gdprConsentAccepted}addToQueue(e,t){if(!this._gdpr.enabled||this._gdprConsentAccepted)this._addToOptableQueue(e);else{let n={fn:e,type:t,createdAt:new Date};this._cmdQueue.push(n)}}_addToOptableQueue(e){window.optable=window.optable||{cmd:[]},window.optable.cmd=window.optable.cmd||[],window.optable.cmd.push(e)}async resolveRaptiveClusters(e){return new Promise((t,n)=>{this.addToQueue(()=>{window.optable?.auth?.resolve?window.optable.auth.resolve(e).then(e=>{let n=kE(e);t(n)}).catch(n):n(`Optable SDK 'resolve' method not available after loading SDK`)},`resolve1p`)})}async resolveThirdPartyClusters(e,t=!1){return new Promise((n,r)=>{this.addToQueue(()=>{let i=t?window.optable?.tests:window.optable?.instance;i?.resolve?i.resolve(e).then(e=>{let t=OE(e);n(t)}).catch(r):r(`Optable SDK 'resolve' method not available after loading SDK`)},`resolve3p`)})}cid(e,t=0){return new Promise((n,r)=>{this.addToQueue(()=>{if(!window.optable?.SDK?.cid)r(`Optable SDK 'SDK.cid' method not available after loading SDK`);else{let r=window.optable.SDK.cid(e,t);n(r)}},`cid`)})}eid(e){return new Promise((t,n)=>{this.addToQueue(()=>{if(!window.optable?.SDK?.eid)n(`Optable SDK 'SDK.eid' method not available after loading SDK`);else{let n=window.optable.SDK.eid(e);t(n)}},`eid`)})}async identify(...e){return new Promise((t,n)=>{this.addToQueue(()=>{window.optable?.auth?.identify?window.optable.auth.identify(...e).then(t).catch(n):n(`Optable SDK 'identify' method not available after loading SDK`)},`identify`)})}async profile(e){return new Promise((t,n)=>{this.addToQueue(()=>{window.optable?.auth?.profile?window.optable.auth.profile(e).then(t).catch(n):n(`Optable SDK 'auth.profile' method not available after loading SDK`)},`profile`)})}async targeting(){return new Promise((e,t)=>{this.addToQueue(()=>{window.optable?.auth?.targeting?window.optable.auth.targeting().then(e).catch(t):t(`Optable SDK 'auth.targeting' method not available after loading SDK`)},`targeting`)})}async tokenize(e){return new Promise((t,n)=>{this.addToQueue(()=>{window.optable?.instance?.tokenize?window.optable.instance.tokenize(e).then(e=>t(e)).catch(n):n(`Optable SDK 'instance.tokenize' method not available after loading SDK`)},`tokenize`)})}installGPTSecureSignals(){return new Promise(e=>{this.addToQueue(()=>{window.googletag=window.googletag||{cmd:[]};let t=window.googletag;t.cmd.push(()=>{t.secureSignalProviders||=[],t.secureSignalProviders.push({id:`loblawmedia.ca`,collectorFunction:()=>window.optable?.auth?.lmpidFromCache?Promise.resolve(window.optable.auth.lmpidFromCache()??``):Promise.resolve(``)})}),e()},`gptSecureSignals`)})}};AE=w([D(`OptableSdkWrapper`),S(),N(0,b(mp)),N(1,b(pi))],AE);let jE=class extends I{constructor(e,t,n){super(),this._marmalade=e,this._optableConfig=t,this._optableSdkWrapper=n}get enabled(){return this._optableConfig.enabled}start(){this._sendIABAToOptable(),this._sendMCMPToOptable(),this._sendSiteCodesToOptable()}async _sendIABAToOptable(){let e=this._marmalade.ortbSegments.get(`iaba`);if(!e||e.length===0)return;let t=e.map(e=>e.id).join(`,`);return await vc(),await this._optableSdkWrapper.profile({iaba_segments:t})}async _sendMCMPToOptable(){let e=this._marmalade.getAllMcmps();if(!(!e||e.length===0))return await vc(),await this._optableSdkWrapper.profile({mcmp:e.toString()})}async _sendSiteCodesToOptable(){let e=this._marmalade.siteCodes;if(!(!e||e.length===0))return await vc(),await this._optableSdkWrapper.profile({site_codes:e.toString()})}};jE=w([D(`OptableAudienceCurationComponent`),x(),N(0,b(Mi)),N(1,b(Fi)),N(2,b(AE))],jE);let ME=new Map([[`api`,q.PII_SOURCE.VALUES.API],[`comment`,q.PII_SOURCE.VALUES.COMMENT],[`cookies`,q.PII_SOURCE.VALUES.COOKIE],[`growme`,q.PII_SOURCE.VALUES.GRWM],[`gatedPrint`,q.PII_SOURCE.VALUES.GATED_PRINT],[`localStorage`,q.PII_SOURCE.VALUES.LOCAL_STORAGE],[`newsletter`,q.PII_SOURCE.VALUES.NEWSLETTER],[`form`,q.PII_SOURCE.VALUES.FORM],[`other`,q.PII_SOURCE.VALUES.OTHER],[`url`,q.PII_SOURCE.VALUES.URL],[`urlHashed`,q.PII_SOURCE.VALUES.URLH],[`urlConvertKit`,q.PII_SOURCE.VALUES.URLHCK],[`identityIframe`,q.PII_SOURCE.VALUES.IDENTITY_IFRAME],[`slickstream`,q.PII_SOURCE.VALUES.SLICKSTREAM]]),NE=new Map([[`truedata`,q.PII_SOURCE.VALUES.TD],[`mediawallah`,q.PII_SOURCE.VALUES.MW]]);var PE=class{constructor(e){C(this,`collectionMethod`,`direct`),C(this,`type`,void 0),C(this,`sha256Hash`,void 0),C(this,`sha1Hash`,void 0),C(this,`collectionSiteId`,void 0),C(this,`collectionDate`,void 0),C(this,`collectionSource`,void 0),C(this,`iframe`,void 0),C(this,`directSource`,void 0),this.type=e.type,this.sha256Hash=e.sha256Hash,this.sha1Hash=e.sha1Hash,this.collectionSiteId=e.collectionSiteId,this.collectionDate=e.collectionDate,this.collectionSource=e.collectionSource,this.iframe=e.iframe,this.directSource=e.directSource}},FE=class{constructor(e){C(this,`collectionMethod`,`graph3p`),C(this,`type`,void 0),C(this,`sha256Hash`,void 0),C(this,`sha1Hash`,void 0),C(this,`alternateIds`,void 0),C(this,`collectionSiteId`,void 0),C(this,`collectionDate`,void 0),C(this,`collectionSource`,void 0),C(this,`iframe`,void 0),C(this,`graphSource`,void 0),C(this,`graphTraits`,void 0),C(this,`bridgingMethod`,void 0),C(this,`bridgingValue`,void 0),this.type=e.type,this.sha256Hash=e.sha256Hash,this.sha1Hash=e.sha1Hash,this.alternateIds=e.alternateIds,this.collectionSiteId=e.collectionSiteId,this.collectionDate=e.collectionDate,this.collectionSource=e.collectionSource,this.iframe=e.iframe,this.graphSource=e.graphSource,this.graphTraits=e.graphTraits,this.bridgingMethod=e.bridgingMethod,this.bridgingValue=e.bridgingValue}},IE=class{constructor(e){C(this,`collectionMethod`,`graph1p`),C(this,`type`,void 0),C(this,`sha256Hash`,void 0),C(this,`sha1Hash`,void 0),C(this,`alternateIds`,void 0),C(this,`collectionSiteId`,void 0),C(this,`collectionDate`,void 0),C(this,`collectionSource`,void 0),C(this,`iframe`,void 0),C(this,`bridgingMethod`,void 0),C(this,`bridgingValue`,void 0),this.type=e.type,this.sha256Hash=e.sha256Hash,this.sha1Hash=e.sha1Hash,this.alternateIds=e.alternateIds,this.collectionSiteId=e.collectionSiteId,this.collectionDate=e.collectionDate,this.collectionSource=e.collectionSource,this.iframe=e.iframe,this.bridgingMethod=e.bridgingMethod}},LE=class{constructor(e){C(this,`collectionMethod`,`liveIntent`),C(this,`type`,void 0),C(this,`sha256Hash`,void 0),C(this,`sha1Hash`,void 0),C(this,`collectionSiteId`,void 0),C(this,`collectionDate`,void 0),C(this,`collectionSource`,void 0),C(this,`iframe`,void 0),C(this,`withUid2`,void 0),this.type=e.type,this.sha256Hash=e.sha256Hash,this.sha1Hash=e.sha1Hash,this.collectionSiteId=e.collectionSiteId,this.collectionDate=e.collectionDate,this.collectionSource=e.collectionSource,this.iframe=e.iframe,this.withUid2=e.withUid2}},RE=class{static createIdentityData(e,t){switch(e){case`direct`:return new PE(t);case`graph3p`:return new FE(t);case`graph1p`:return new IE(t);case`liveIntent`:return new LE(t)}}};let zE=(e,t)=>{let n=[`direct`,`graph1p`,`graph3p`,`liveIntent`],r=[`pubm`,`id5id`,`ip`,`unknown`],i=[`rcid`,`shid`,`gpid`,`lpid`,`unknown`],a=n.indexOf(e.collectionMethod),o=n.indexOf(t.collectionMethod);if(a<o)return-1;if(a>o)return 1;if(e.collectionMethod===`graph3p`&&t.collectionMethod===`graph3p`){let n=e.bridgingMethod||`unknown`,i=t.bridgingMethod||`unknown`,a=r.indexOf(n),o=r.indexOf(i);if(a<o)return-1;if(a>o)return 1}if(e.collectionMethod===`graph1p`&&t.collectionMethod===`graph1p`){let n=e.bridgingMethod||`unknown`,r=t.bridgingMethod||`unknown`,a=i.indexOf(n),o=i.indexOf(r);if(a<o)return-1;if(a>o)return 1}return 0},BE=e=>e.includes(`${q.PII_SOURCE.PREFIXES.RAPTIVE_AUTH}${q.PII_SOURCE.VALUES.GPID}`)||e.includes(`${q.PII_SOURCE.PREFIXES.RAPTIVE_AUTH}${q.PII_SOURCE.VALUES.RCID}`)||e.includes(`${q.PII_SOURCE.PREFIXES.RAPTIVE_AUTH}${q.PII_SOURCE.VALUES.LPID}`)||e.includes(`${q.PII_SOURCE.PREFIXES.RAPTIVE_AUTH}${q.PII_SOURCE.VALUES.SHID}`),VE=e=>e.includes(q.PII_SOURCE.VALUES.ID5ID)?`id5id`:e.includes(q.PII_SOURCE.VALUES.PUBM)?`pubm`:`ip`,HE=e=>e.includes(q.PII_SOURCE.VALUES.GPID)?`gpid`:e.includes(q.PII_SOURCE.VALUES.RCID)?`rcid`:e.includes(q.PII_SOURCE.VALUES.LPID)?`lpid`:e.includes(q.PII_SOURCE.VALUES.SHID)?`shid`:`unknown`,UE=e=>e.includes(q.PII_SOURCE.VALUES.TD)?`truedata`:e.includes(q.PII_SOURCE.VALUES.MW)?`mediawallah`:`unknown`,WE=e=>typeof e==`string`&&e.trim().length>0,GE=e=>e.direct??e.graph1p??e.graph3p??e.liveIntent,KE=e=>{let t=e.startsWith(q.PII_SOURCE.PREFIXES.IDENTITY_IFRAME)?e.slice(q.PII_SOURCE.PREFIXES.IDENTITY_IFRAME.length):e;return t.includes(q.PII_SOURCE.VALUES.SLICKSTREAM)||t.includes(`slickstream`)?`slickstream`:t.includes(q.PII_SOURCE.VALUES.URLHCK)?`urlConvertKit`:t.includes(q.PII_SOURCE.VALUES.URLH)?`urlHashed`:t.includes(q.PII_SOURCE.VALUES.URL)?`url`:t.includes(q.PII_SOURCE.VALUES.API)?`api`:t.includes(q.PII_SOURCE.VALUES.COOKIE)?`cookies`:t.includes(q.PII_SOURCE.VALUES.GRWM)?`growme`:t.includes(q.PII_SOURCE.VALUES.NEWSLETTER)?`newsletter`:t.includes(q.PII_SOURCE.VALUES.IDENTITY_IFRAME)?`identityIframe`:t.includes(`${q.PII_SOURCE.VALUES.LOCAL_STORAGE}_`)?`localStorage`:t.includes(`${q.PII_SOURCE.VALUES.GATED_PRINT}_`)?`gatedPrint`:t.includes(`${q.PII_SOURCE.VALUES.COMMENT}_`)?`comment`:t.includes(`${q.PII_SOURCE.VALUES.FORM}_`)?`form`:t.includes(`${q.PII_SOURCE.VALUES.OTHER}_`)?`other`:`unknown`},qE=(e,t,n,r,i,a,o)=>{if(e===`iframe`||e===`browserStorage`)return null;let s={type:`email`,sha256Hash:i.sha256Hash,sha1Hash:i.sha1Hash?i.sha1Hash:void 0,collectionSiteId:n,collectionDate:a||um(),collectionSource:`capture`},c=null;if(e===`emailCapture`||e===`urlCapture`||e===`identityApi`){let e={...s,collectionMethod:`direct`,directSource:KE(t),...r&&{email:r}};c=RE.createIdentityData(`direct`,e)}else if(e===`raptiveDCN`){let e={...s,collectionMethod:`graph1p`,bridgingMethod:HE(t),alternateIds:o};c=RE.createIdentityData(`graph1p`,e)}else if(e===`externalDCN`){let e={...s,collectionMethod:`graph3p`,graphSource:UE(t),bridgingMethod:VE(t),alternateIds:o};c=RE.createIdentityData(`graph3p`,e)}else if(e===`sdkli`){let e={...s,collectionMethod:`liveIntent`,withUid2:!t.includes(`sdklir`)};c=RE.createIdentityData(`liveIntent`,e)}else E.error(`createIdentityDataFromCapturedData`,`Unknown identity data source:`,e);return c},JE=e=>ME.get(e)||`unk`,YE=e=>NE.get(e)||`unk`,XE=e=>{switch(e){case`id5id`:return`id5`;case`pubm`:return`pub`;case`ip`:return`ip`;case`unknown`:return`unk`}},ZE=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`OptableId5ResolveHems`,this._lookup=`ROGID5HEM`}};ZE=w([S()],ZE);let QE=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`OptableId5ResolveRouteTest`,this._lookup=`OPTID5RRT`}};QE=w([S()],QE);let $E=e=>{if(typeof e!=`string`&&typeof e!=`number`||typeof e==`string`&&isNaN(parseInt(e,10))||typeof e==`number`&&isNaN(e))return`E`;let t=Date.now(),n=typeof e==`string`?parseInt(e,10):e,r=Math.floor((t-n)/864e5);return r<=1?`1`:r<=2?`2`:r<=3?`3`:r<=4?`4`:r<=14?`14`:`15`},eD=e=>{if(e){if(e.includes(`.`))return`i4:${e}`;if(e.includes(`:`))return`i6:${e}`}},tD=(e,t)=>{let n=null,r=null,i=0;for(let a of Object.keys(e.sources)){let o=e.sources[a].clusters;for(let e of o){let o=e.ids.find(e=>e.startsWith(t));if(!o)continue;let s=e.traits.lastSeen;typeof s==`number`&&s>i&&(i=s,n=o.replace(t,``),r=a)}}return{hem:n,source:r}},nD={thetradedesk:`adserver.org`,appnexus:`adnxs.com`,bidswitch:`bidswitch.net`,indexexchange:`indexexchange.com`,kargo:`kargo.com`,pubmatic:`pubmatic.com`,magnite:`rubiconproject.com`,triplelift:`triplelift.com`,yieldmo:`yieldmo.com`,unknown:``},rD=class extends I{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g){super(),this._context=e,this._siteConfig=t,this._optableConfig=n,this._gpcConfig=r,this._ccpaConfig=i,this._gdpr=a,this._user=o,this._userIds=s,this._optableSdkWrapper=c,this._ortb2=l,this._emailCaptureHandler=u,this._identityEventBus=d,this._optableId5ResolveHemsExperiment=f,this._optableId5ResolveRouteTestExperiment=p,this._gdprEvents=m,this._gdprEnforcement=h,this._prebidEventBus=g}get enabled(){let e=this._optableConfig.enabled&&this._userIds.get(`id5Id`)?.enabled,t=!this._gpcConfig.gpcEnabled&&!this._ccpaConfig.userOptedOut;return!!e&&!!t}start(){this.enabled&&(this._gdpr.enabled?this._gdprEvents.consentResponseCaptured.on(()=>{this._gdprEnforcement.checkConsentForVendor(this._gdpr.raptiveVendorId,[1]).then(e=>{e&&this._id5Resolution()}).catch(()=>{})},{handleEventsAlreadyEmitted:!0}):this._id5Resolution())}async _id5Resolution(){try{Tt()||(await vc(),await this._waitForIdentityIframeSync()),await vc(),await this._waitForOptableWaterfall(),await vc();let e=await Wo(),t=e?.graph3p?.d;if(t?.alternateIds?.length){this._setAlternateIdsAsEids(t.alternateIds??[]);return}let n=this._readId5FromStorage();n?await this._resolveAndStoreId5(n,e,t,!0):this._prebidEventBus.id5Resolved.on(async r=>{r?.universal_uid&&(n=r.universal_uid,await this._resolveAndStoreId5(n,e,t,!1))})}catch(e){E.error(`OptableID5ResolverComponent`,`start`,e)}}async _resolveAndStoreId5(e,t,n,r){try{if(e.length===0||!e.toLowerCase().startsWith(`id5`)){E.error(`OptableID5ResolverComponent`,`_resolveAndStoreId5`,`Invalid id5id format`,{id5Id:e});return}let r=t,i=n,a=await this._user.identityData(),o=a&&(a.collectionMethod===`graph1p`||a.collectionMethod===`direct`);if(i?.alternateIds?.length&&o)return;r=await Wo(),i=r?.graph3p?.d;let{hem:s,source:c,alternateIds:l}=await this._resolveIdsWithId5Id(e),u=this._optableId5ResolveHemsExperiment.result&&s&&c,d=l?.length?l:i?.alternateIds?.length?i.alternateIds:[];if(u){let e=!o;await this._storeIdentifiers(s,c,d,e)}d.length&&this._setAlternateIdsAsEids(d)}catch(t){E.error(`OptableID5ResolverComponent`,`_resolveAndStoreId5`,{id5Id:e,ls:r,err:t})}}_readId5FromStorage(){let e=L.readExternalLocalStorage(`id5id`);if(!e)return null;try{return JSON.parse(decodeURIComponent(e)).universal_uid}catch(e){return E.error(`OptableID5ResolverComponent`,`_readId5IdFromStorage`,`Error parsing id5 id.`,e),null}}async _waitForIdentityIframeSync(){return new Promise(e=>{let t=()=>{this._identityEventBus.iframeDataSynced.off(t),e()};this._identityEventBus.iframeDataSynced.on(t,{handleEventsAlreadyEmitted:!0}),setTimeout(()=>{this._identityEventBus.iframeDataSynced.off(t),e()},3e3)})}async _waitForOptableWaterfall(){return new Promise(e=>{let t=()=>{this._identityEventBus.optableWaterfallCompleted.off(t),e()};this._identityEventBus.optableWaterfallCompleted.on(t,{handleEventsAlreadyEmitted:!0}),setTimeout(()=>{this._identityEventBus.optableWaterfallCompleted.off(t),e()},3e3)})}async _resolveIdsWithId5Id(e){let t=await this._optableSdkWrapper.resolveThirdPartyClusters(`id5:${e}`,this._optableId5ResolveRouteTestExperiment.result),{hem:n,source:r}=tD(t,`e:`),i=this._getAlternateIdsFromGraphResponse(t);return{hem:n,source:r,alternateIds:i}}_getLegacyBridgedHemSource(e){let t={mediawallah:`MW`,truedata:`TD`}[e];if(!t)throw Error(`No legacy mapping found for source: ${e}`);let{PREFIXES:n,VALUES:r,SUFFIXES:i}=q.PII_SOURCE;return`${n.IDG}${r[t]}-${r.ID5ID}${i.CAPTURE}`}_getAlternateIdsFromGraphResponse(e){return(e?.sources?.id5?.clusters?.map(e=>{let t=(e.ids?.find(e=>e.startsWith(`id5:`))??``).replace(`id5:`,``),n=e.traits.cookieType,r=e.traits?.lastSeen;return{id:t,type:n,lastSeen:r}})??[]).reduce((e,t)=>{let n=e.find(e=>e.type===t.type);return n?t.lastSeen>n.lastSeen&&(e[e.indexOf(n)]=t):e.push(t),e},[]).map(({id:e,type:t})=>({id:e,type:t}))}_setAlternateIdsAsEids(e){if(!e.length)return;let t=e.reduce((e,t)=>{let n=nD[t.type],r=e.find(e=>e.source===n);return r?r.uids.push({atype:3,id:t.id}):n&&e.push({source:n,matcher:`id5-sync.com`,inserter:`cafemedia.com`,mm:5,uids:[{atype:3,id:t.id}]}),e},[]);this._ortb2.addEidsToOrtb2(t)}async _storeIdentifiers(e,t,n,r){let i=this._getLegacyBridgedHemSource(t),a=um(),o=e,s=`externalDCN`;if(r)this._emailCaptureHandler.emailCaptured.emit({pii:{sha256Hash:o,source:i,sourceCollectedDate:a,alternateIds:n},identityDataSource:s});else{let e=qE(s,i,this._siteConfig.id,void 0,{sha256Hash:o},a,n);e&&await Jo(e,this._siteConfig.id,this._context.querystring.get(`adt_encrypt`)!==`false`)}}};rD=w([D(`OptableID5ResolverComponent`),x(),N(0,b(W)),N(1,b(Zi)),N(2,b(Fi)),N(3,b(mi)),N(4,b(U)),N(5,b(pi)),N(6,b($o)),N(7,b(Nm)),N(8,b(AE)),N(9,b(Jf)),N(10,b(fm)),N(11,b($s)),N(12,b(ZE)),N(13,b(QE)),N(14,b(mp)),N(15,b(gp)),N(16,b(Qf))],rD);let iD=class extends qe{constructor(...e){super(...e),C(this,`stickyContainerContentAdStylingApplied`,new O)}};iD=w([S()],iD);let aD=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`ParallaxAdLogError`,this._lookup=`PALE`}};aD=w([S()],aD);let oD=class extends I{constructor(e,t,n,r,i,a,o,s,c){super(),this._pageManager=e,this._slotManager=t,this._stickyContainerAdsEventBus=n,this._videoEventBus=r,this._config=i,this._parallaxAdLogErrorExperiment=a,this._gamEventBus=o,this._slotEventBus=s,this._slotManagerEventBus=c,C(this,`_parallaxSlotMap`,new Map),C(this,`_parallaxScrollEventOffMap`,new Map),C(this,`_slotRebuildComplete`,new Map),C(this,`_stickyContainerAdsApplied`,!1),C(this,`_scrollStartPosition`,300),C(this,`_slotScrollStartPosition`,new Map)}get enabled(){return!1}start(){this._setupListeners()}_setupListeners(){this._stickyContainerAdsEventBus.stickyContainerContentAdStylingApplied.on(()=>{this._stickyContainerAdsApplied=!0},{handleEventsAlreadyEmitted:!0}),this._videoEventBus.topCenterVideoCollapsed.on(()=>{this._scrollStartPosition=500}),this._videoEventBus.topCenterVideoUnCollapsed.on(()=>{this._scrollStartPosition=300}),this._gamEventBus.slotOnload.on(({slotId:e})=>this._parallaxSetup(e)),this._slotEventBus.adRenderedOutsideGAM.on(({slotId:e})=>this._parallaxSetup(e)),this._slotManagerEventBus.refreshing.on(e=>{this._slotManager.getSlots(e).forEach(e=>{let t=e.element.id;e.location===H.Content&&!this._slotRebuildComplete.get(t)&&!this._parallaxSlotMap.get(t)&&!this._stickyContainerAdsApplied&&this._rebuildSlot(e)})})}_parallaxSetup(e){let t=this._slotManager.getSlot(e);if(t&&t.location===H.Content){let e=t.element;if(this._stickyContainerAdsApplied&&this._removeParallaxCSS(e),this._removeParallaxScrollEvent(e),this._isParallaxAd(e)){E.event(`ParallaxComponent`,`_setupListeners`,`parallax_rendered`,t.element.id,t.refreshCount);let n=e.firstChild?e.firstChild:null;this._parallaxSlotMap.set(e.id,!0),this._setParallaxSlotCSS(e,n),this._parallaxAdOnScroll(e),this._parallaxAdLogErrorExperiment.result&&this._checkParallaxAdVisibilityPercent(e,n)}}}_setParallaxSlotCSS(e,t){e.classList.add(`adthrive-parallax-slot`),t&&t.classList.add(`adthrive-parallax-ad`)}_removeParallaxCSS(e){e.classList.remove(`adthrive-parallax-slot`);let t=e.firstChild;t&&t.classList.remove(`adthrive-parallax-ad`)}_removeParallaxScrollEvent(e){let t=this._parallaxScrollEventOffMap.get(e.id);t&&t()}_parallaxAdOnScroll(e){let t=Number(e.getBoundingClientRect().top)+window.pageYOffset,n=()=>{let n=e.firstChild?e.firstChild:void 0,r=this._isParallaxAd(e),i=t<window.pageYOffset+window.innerHeight,a=this._getScrollStartPosition(i,e),o=(window.pageYOffset-t+a)*.5,s=o>205?205:o;n&&r&&(n.style.transform=`translateY(-${s}px)`)};this._parallaxScrollEventOffMap.set(e.id,this._pageManager.scroll.on(()=>n()))}_getScrollStartPosition(e,t){return e?this._slotScrollStartPosition.get(t.id)||this._scrollStartPosition:(this._slotScrollStartPosition.get(t.id)!==this._scrollStartPosition&&this._slotScrollStartPosition.set(t.id,this._scrollStartPosition),this._scrollStartPosition)}_isParallaxAd(e){let t=wC(e);return t>=600&&t<=750}_rebuildSlot(e){e.sizes=e.sizes.filter(e=>e[1]<600),this._slotManager.rebuild(e),this._slotRebuildComplete.set(e.element.id,!0)}_checkParallaxAdVisibilityPercent(e,t){let n=new IntersectionObserver(r=>{r.forEach(r=>{let i=r.intersectionRatio*100,a=400/wC(e)*100;a-i>2&&this._logParallaxAdError(e,t,`adVisibility`,Math.floor(a-i)),n.unobserve(r.target)})},{root:e});t&&n.observe(t)}_logParallaxAdError(e,t,n,r){E.error(`ParallaxComponent`,`_logParallaxAdError`,`parallax ad error: ${n}, visibility percent lost:`,r,`siteId: ${this._config.site.id}`,`pageUrl: ${window.location.href}`,`containerId: ${e.id}`,`creativeId: ${t?.id}`)}};oD=w([x(),D(`ParallaxAdsComponent`),N(0,b(jr)),N(1,b(eS)),N(2,b(iD)),N(3,b(pc)),N(4,b(J)),N(5,b(aD)),N(6,b(X)),N(7,b(Hs)),N(8,b($f))],oD);let sD=class{constructor(e,t,n,r,i,a,o,s,c){this._emailCaptureHandler=e,this._gdprEvents=t,this._ccpa=n,this._gdpr=r,this._site=i,this._context=a,this._gam=o,this._identityEventBus=s,this._optableConfig=c,C(this,`_consent`,``),C(this,`_gdprConsentAccepted`,!1),C(this,`_emailCounted`,!1),C(this,`_dataCapturedEmitted`,!1),C(this,`_identityDataTargetingSet`,!1),C(this,`_emailCaptureQueue`,[]),C(this,`_queuePromise`,Promise.resolve())}init(){this._emailCaptureHandler.emailCaptured.on(e=>{this._handleEmailCapture(e)},{handleEventsAlreadyEmitted:!0}),this._gdprEvents.consentResponseCaptured.on(e=>this._handleGdprConsentCapture(e),{handleEventsAlreadyEmitted:!0}),this._ccpa.consentChange.on(e=>this._handleCCPAConsentChange(e??``))}_handleEmailCapture(e){this._emailCaptureQueue.push(e),(!this._gdpr.enabled||this._gdprConsentAccepted)&&(this._queuePromise=this._queuePromise.then(()=>this._processEmailCaptureQueue()))}_handleGdprConsentCapture(e){this._gdprConsentAccepted=im(this._gdpr.raptiveVendorId,[1]),this._consent=e,this._gdprConsentAccepted&&this._emailCaptureQueue.length>0?this._queuePromise=this._queuePromise.then(()=>this._processEmailCaptureQueue()):this._gdprConsentAccepted}async _processEmailCaptureQueue(){for(;this._emailCaptureQueue.length>0;){if(this._gdpr.enabled&&!this._gdprConsentAccepted)return;let e=this._emailCaptureQueue.shift();if(!e)return;let{pii:{email:t,source:n,sourceCollectedDate:r,alternateIds:i}={},identityDataSource:a,identityDataMap:o}=e,s=await this._makeHashObject(e),c={email:t,source:n??``,sourceCollectedDate:r??null,hashObj:s},l;if(a===`iframe`||a===`browserStorage`){if(o){let e=GE(o);e&&(l=typeof e.d==`string`?await Uo(e.d,e.s):e.d),a===`iframe`&&(l.iframe=!0),a===`browserStorage`&&(l.collectionSource=`storage`)}}else l=qE(a,c.source,this._site.id,t,c.hashObj,c.sourceCollectedDate,i);l&&await this._processPii(l,a),this._processPiiLegacy(c)}}_processPiiLegacy(e){this._gdpr.enabled&&!this._gdprConsentAccepted||(L.setInternalLocalStorage(`adt_emsrc`,e.source),L.setInternalLocalStorage(`adt_ei`,e.hashObj),this._setGamTargetingFlags([{key:`emsrc`,value:[e.source]},{key:`hem`,value:[`1`]}]),e.sourceCollectedDate&&(L.setInternalLocalStorage(`adt_emsrc_cd`,e.sourceCollectedDate),this._setGamTargetingFlags([{key:`hem_cd`,value:[e.sourceCollectedDate]}])),this._identityEventBus.dataCapturedLegacy.emit({email:e.email,...e.hashObj,consent:this._consent,source:e.source,sourceCollectedDate:e.sourceCollectedDate}))}async _processPii(e,t){if(this._gdpr.enabled&&!this._gdprConsentAccepted||!e)return;let n=await Wo(!0);if(!this.shouldShareWithPartners(e))return;let r=this.shouldCaptureIdentityData(e,n);r&&(this._identityEventBus.dataCaptured.emit(e),this._dataCapturedEmitted=!0,this._setGamTargetingFlags([{key:`hem_shared`,value:[`1`]}])),this._identityEventBus.dataCapturedForIframe.emit(e),await this._storeOrSetTargeting(e,t,n,r),t===`iframe`&&this._identityEventBus.iframeDataSynced.emit()}async _storeOrSetTargeting(e,t,n,r){r||this.shouldStoreIdentityData(e,n)?await Jo(e,this._site.id,this._context.querystring.get(`adt_encrypt`)!==`false`).then(t=>{e&&this._convertAndSetIdentityDataToGamTargetingValue(t).catch(()=>{})}):(this._identityDataTargetingSet||this._convertAndSetIdentityDataToGamTargetingValue(n||{}).catch(()=>{}),this._context.querystring.get(`adt_encrypt`)===`false`&&Yo())}_setGamTargetingFlags(e){for(let{key:t,value:n,overwrite:r}of e)this._gam.setTargetingFlag(t,n,r??!0)}shouldShareWithPartners(e){return!(e.collectionMethod===`graph3p`&&!this._optableConfig.enabled)}shouldCaptureIdentityData(e,t){if(!this._dataCapturedEmitted||!t)return!0;let n=GE(t);if(!n||typeof n.d==`string`)return!0;let r=n.d,i=zE(e,r);if(i<0)return!0;if(i>0)return!1;let a=new Date(e.collectionDate||``),o=new Date(r.collectionDate||``);return a>o?!0:a<o||e.collectionSiteId===r.collectionSiteId?!1:e.collectionSiteId===this._site.id}shouldStoreIdentityData(e,t){if(!e)return!1;if(!t||!Object.keys(t).length)return!0;let n=t[e.collectionMethod];if(typeof n?.d!=`object`)return!0;let r=n.d,i=zE(e,r);if(i<0)return!0;if(i>0)return!1;if(r.collectionDate&&e.collectionDate){let t=new Date(r.collectionDate),n=new Date(e.collectionDate);if(n>t)return!0;if(n<t||n.getTime()===t.getTime()&&(e.collectionSiteId===r.collectionSiteId||r.collectionSiteId===this._site.id))return!1}return!0}async _convertAndSetIdentityDataToGamTargetingValue(e){let t=[],n=await Go(e);if(n){switch(n.collectionMethod){case`direct`:if(t.push(`cm:d`),n.directSource){let e=JE(n.directSource);t.push(`ds:${e}`)}break;case`graph1p`:t.push(`cm:dcn1`),n.bridgingMethod&&t.push(`bm1:${n.bridgingMethod}`);break;case`graph3p`:if(t.push(`cm:dcn2`),n.graphSource){let e=YE(n.graphSource);t.push(`gs:${e}`)}if(n.bridgingMethod){let e=n.bridgingMethod;if(e){let n=XE(e);t.push(`bm3:${n}`)}}break;case`liveIntent`:t.push(`cm:sdkli`),n.withUid2&&t.push(`u2`);break}switch(n.collectionSource){case`capture`:t.push(`cs:c`);break;case`storage`:t.push(`cs:s`);break}t.push(`cd:${n.collectionDate}`),n.collectionSiteId!==this._site.id&&t.push(`xs`),n.iframe&&t.push(`if`),e.direct&&t.push(`d`),e.graph1p&&t.push(`dcn1`),e.graph3p&&t.push(`dcn2`),e.liveIntent&&t.push(`sdkli`),this._gam.setTargeting({key:`adt_i`,value:t}),this._identityDataTargetingSet=!0}}async _makeHashObject(e){let{pii:{email:t,sha256Hash:n,sha1Hash:r}={}}=e,i={sha256Hash:``,sha1Hash:``};if(n||r)i={sha256Hash:n||``,sha1Hash:r||``};else if(t){let e=await this._getHashObjectFromEmail(t);e&&(i=e)}return i}async _getHashObjectFromEmail(e){if(!(`msCrypto`in window)&&location.protocol===`https:`&&`crypto`in window&&`TextEncoder`in window){let t=new TextEncoder().encode(e),[n,r]=await Promise.all([this._convertToSpecificHashType(`SHA-256`,t),this._convertToSpecificHashType(`SHA-1`,t)]);return{sha256Hash:n,sha1Hash:r}}}async _convertToSpecificHashType(e,t){let n=await crypto.subtle.digest(e,t);return Array.from(new Uint8Array(n)).map(e=>(`00`+e.toString(16)).slice(-2)).join(``)}_handleCCPAConsentChange(e=``){let t=L.readInternalLocalStorage(`adt_ei`),n=L.readInternalLocalStorage(`adt_emsrc`),r=e===this._ccpa.ccpaOptOut;if(this._consent=e??``,wt()){let e=L.readInternalCookie(`adt_ei`),t=L.readInternalCookie(`adt_emsrc`);(e||t)&&r&&(L.deleteCookie(`adt_ei`),L.deleteCookie(`adt_emsrc`),L.deleteCookie(`adt_i`))}(t||n)&&r&&(L.deleteLocalStorage(`adt_ei`),L.deleteLocalStorage(`adt_emsrc`),L.deleteLocalStorage(`adt_emsrc_cd`),L.deleteLocalStorage(`adt_i`))}};sD=w([D(`PiiManager`),S(),N(0,b(fm)),N(1,b(mp)),N(2,b(U)),N(3,b(pi)),N(4,b(Zi)),N(5,b(W)),N(6,b(Z)),N(7,b($s)),N(8,b(Fi))],sD);let cD=()=>new Promise(e=>{if(document.readyState===`interactive`||document.readyState===`complete`)return e();document.addEventListener(`DOMContentLoaded`,()=>e())}),lD=class extends Zm{constructor(e,t,n){super(e),this._config=e,this._amazonMethods=t,this._bootstrapConfig=n,C(this,`_name`,`amz`),C(this,`_tokenKey`,`AMZN-Token`),C(this,`_gdprEnabled`,this._config.gdpr.enabled),C(this,`_userOptedOut`,this._config.ccpa.userOptedOut)}init(){this._regulatoryValidation(),this._config.ccpa.consentChange.on(()=>{this._userOptedOut=this._config.ccpa.userOptedOut,this._regulatoryValidation()})}get enabled(){return super.enabled&&!this._config.tkho.tracker.includes(this._name)}async processPii(e){let t={...this._getHashedRecords(e.sha256Hash),...this._getGDPRConfig(this._config.gdpr.consentCapturedData.consentString),...this._getOptOut()};await cD().then(async()=>{await this._bootstrapConfig.bootstrapLoaders[ot.Amazon],await this._amazonMethods.rpa(t)})}_getHashedRecords(e=``){return{hashedRecords:[{type:`email`,record:e}]}}_getGDPRConfig(e){let t=this._gdprEnabled;return{gdpr:{enabled:t,...t&&{consent:e}}}}_getOptOut(){return{optOut:this._userOptedOut}}_regulatoryValidation(){L.readExternalCookie(this._tokenKey)&&this._userOptedOut&&this._optOut()}_optOut(){this._amazonMethods.upa({hashedRecords:[],optOut:!0}).catch(()=>{E.error(`AmazonPIIPartner`,`_optOut`,`Failed to run Amazon optout`)})}};lD=w([D(`AmazonPublisherAudiencesPiiPartner`),x(),N(0,b(J)),N(1,b(Pp)),N(2,b(on))],lD);let uD=class extends Zm{constructor(e,t){super(e),this._config=e,this._prebidMethods=t}get enabled(){let e=this._config.partners;return super.enabled&&!!(e.display.get(G.Criteo)||e.video.get(G.Criteo))}processPii(e){this._prebidMethods.addToQueue(()=>{this.run(e)})}run(e){e&&(e.sha256Hash??e.sha1Hash)&&this._prebidMethods.setBidderConfig({bidders:[G.Criteo],config:{ortb2:{user:{ext:{data:{eids:[{source:`cafemedia.com`,uids:[{id:e.sha256Hash??e.sha1Hash,atype:3,ext:{stype:`hemsha256`}}]}]}}}}}})}};uD=w([x(),D(`CriteoBidderPiiPartner`),N(0,b(J)),N(1,b(P))],uD);let dD=class extends Zm{constructor(e,t,n,r){super(e),this._config=e,this._prebidMethods=t,this._userIds=n,this._userIdEventBus=r,C(this,`_name`,`fabrickId`),C(this,`_userId`,void 0),this._userId=this._userIds.get(this._name)}get enabled(){return super.enabled&&(this._userId?.enabled??!1)}processPii(e){}_run(e){let t=this._prebidMethods.getConfig(`userSync.userIds`)??[],n=t.find(e=>e.name===this._name),r=t.filter(e=>e.name!==this._name),i=!!n,a=this._userId&&this._userId.id.params&&Object.prototype.hasOwnProperty.call(this._userId.id.params,`e`);i&&!a&&(this._prebidMethods.setConfig({userSync:{userIds:[...r,{...n,params:{...n?.params,e:e.sha256Hash}}]}},!1),this._userIdEventBus.userIdNeedsRefresh.emit({options:{submoduleNames:[this._name]},callback:()=>void 0}))}};dD=w([x(),D(`FabrickPiiPartner`),N(0,b(J)),N(1,b(P)),N(2,b(Nm)),N(3,b(Bp))],dD);let fD=class extends Zm{constructor(e,t,n,r,i){super(e),this._config=e,this._prebidMethods=t,this._userIds=n,this._userIdEventBus=r,this._id5IdModule=i,C(this,`_name`,`id5Id`),C(this,`_userId`,void 0),this._userId=this._userIds.get(this._name)}get enabled(){return super.enabled&&(this._userId?.enabled??!1)}processPii(e){this._prebidMethods.addToQueue(()=>{this.run(e)})}updateUserIds(){return(this._prebidMethods.getConfig(`userSync.userIds`)??[]).map(e=>(this._userId&&e.name===this._userId.id.name&&(e=this._userId.id),e))}async run(e){if(e.sha256Hash&&this._userId&&this._userId.id.params){let t=this.updateUserIds();if(e.collectionMethod===`graph3p`)return;e.sha256Hash&&(this._userId.id.params.pd=await this._id5IdModule.getPdString(e.sha256Hash)),this._prebidMethods.setConfig({userSync:{userIds:t}},!1),this._userIdEventBus.userIdNeedsRefresh.emit({options:{submoduleNames:[this._userId.id.name]},callback:()=>void 0})}}};fD=w([x(),D(`Id5PiiPartner`),N(0,b(J)),N(1,b(P)),N(2,b(Nm)),N(3,b(Bp)),N(4,b($p))],fD);let pD=class extends Zm{constructor(e,t,n,r,i){super(e),this._config=e,this._events=t,this._prebidMethods=n,this._userIdEventBus=i,C(this,`_name`,`liveIntentId`),C(this,`_userId`,void 0),this._userId=r.get(this._name),this._config.gdpr.enabled?this._events.consentResponseCaptured.on(e=>void this._pixelSync(e)):this._pixelSync()}get enabled(){return super.enabled&&(this._userId?.enabled??!1)}async _getGdprConsent(){let e=`tcunavailable`;return typeof window.__tcfapi==`function`&&(e=await new Promise(t=>{window.__tcfapi(`getTCData`,2,n=>{n&&n.tcString&&n.tcString.length?t(n.tcString):t(e)})})),`&gdpr=1&gdpr_consent=${e}`}async _pixelSync(e){let t=``;this._config.gdpr.enabled&&(t=e?`&gdpr=1&gdpr_consent=${e}`:await this._getGdprConsent());let n=this._config.ccpa.required?`&us_privacy=${this._config.ccpa.privacyString}`:``,r=`https://pixel.rubiconproject.com/token?pid=49096${t}${n}`,i=new Image;i.src=r,i.style.display=`none`,i.alt=``,document.body.appendChild(i)}processPii(e){this._prebidMethods.addToQueue(()=>{this.run(e)})}run(e){let t=window.liQ_instances?.[0];if(t?.ready&&e.collectionMethod!==`graph3p`&&e.collectionMethod!==`liveIntent`&&e.sha256Hash&&this._userId&&this._userId.id.params){let n=e.sha256Hash;n&&n.length>64&&(E.event(`LiveIntentPiiPartner`,`run`,`Detected nested sha256Hash value. Attempting to extract value before sending to liveConnect.`),n=this._retrieve64BitString(n)),this._userId.id.params.emailHash=n;let r=this.updateUserIds();this._prebidMethods.setConfig({userSync:{userIds:r}},!1),this._userIdEventBus.userIdNeedsRefresh.emit({options:{submoduleNames:[this._userId.id.name]},callback:()=>void 0}),t.push({hash:n??``})}}updateUserIds(){return(this._prebidMethods.getConfig(`userSync.userIds`)??[]).map(e=>(this._userId&&e.name===this._userId.id.name&&(e=this._userId.id),e))}_retrieve64BitString(e){let t=e.match(/\w{64}/);return t?t[0]:void 0}};pD=w([x(),D(`LiveIntentPiiPartner`),N(0,b(J)),N(1,b(mp)),N(2,b(P)),N(3,b(Nm)),N(4,b(Bp))],pD);var mD=class{constructor(){}};let hD=class extends mD{constructor(...e){super(...e),C(this,`truedataHems`,[])}};hD=w([S()],hD);let gD=class extends Zm{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f){super(t),this._optableConfig=e,this._config=t,this._fledgeConfig=n,this._userAgentConfig=r,this._siteConfig=i,this._optableStore=a,this._optableSdkWrapper=o,this._userIds=s,this._userIdTargeting=c,this._identityEventBus=l,this._prebidMethods=u,this._userSyncConfig=d,this._ortb2=f,C(this,`_userIdSources`,[{userId:this._userIds.get(`id5Id`),variant:0},{userId:this._userIds.get(`unifiedId`),variant:5},{userId:this._userIds.get(`sharedId`),variant:6}]),C(this,`_sspSources`,[{source:`liveintent.sovrn.com`,variant:1},{source:`pubmatic.com`,variant:2},{source:`flashtalking.com`,variant:4},{source:`crwdcntrl.net`,variant:7},{source:`openx.net`,variant:8},{source:`rubiconproject.com`,variant:9}]),C(this,`_identityValidators`,{e:vn,i4:vn,i6:vn,p:vn,c:xn,c1:Sn(10),c2:yn,c3:yn,c4:bn,c5:yn,c6:yn,c7:vn,c8:yn,c9:Sn(10)})}get enabled(){return this._optableConfig.enabled&&super.enabled}async init(){if(this.enabled)try{this._setupEventListeners();let e=L.readInternalLocalStorage(`adt_otpgrd`);e&&this._setPubmaticSspIdAsEidFromGraphResponse(e);let[t,n]=await Promise.all([this._collectIdentifiersFromSSP(),this._collectIdentifiersFromUserIds()]);await this._processIdentifiers([...t,...n]);let r={os:this._userAgentConfig.os,browser:this._userAgentConfig.browser,device:this._userAgentConfig.device,cookieDeprecationLabel:this._fledgeConfig.cookieDeprecationLabel??``};await this._processTraits(r)}catch{}}processPii(e){if(!e||!this.enabled||!window.optable?.auth||e.collectionMethod===`liveIntent`)return;let t={},n=[];if(e.collectionDate&&(t.hem_cd=e.collectionDate),e.collectionMethod===`direct`||e.collectionMethod===`graph1p`){let r=`${SE.EMAIL}${e.sha256Hash}`;n.push(r),t.hem_sources=(e.collectionMethod===`direct`&&e.directSource?e.directSource:e.collectionMethod===`graph1p`&&e.bridgingMethod?e.bridgingMethod:`unknown`)??`unknown`,t.hem_dates=um(),t.hem_sites=`s-${this._siteConfig.id}`,this._optableStore.truedataHems.length&&(t.td_hems=this._optableStore.truedataHems.join(`,`))}this._processIdentifiers(n),this._processTraits(t)}_setupEventListeners(){this._identityEventBus.optableIdentitiesCaptured.on(e=>{this._processIdentifiers(e)},{handleEventsAlreadyEmitted:!0}),this._identityEventBus.optableTraitsCaptured.on(e=>{this._processTraits(e)},{handleEventsAlreadyEmitted:!0}),this._identityEventBus.optableUid1Captured.on(e=>{this._handleOptableUid1Captured(e)},{handleEventsAlreadyEmitted:!0}),this._identityEventBus.optableThirdPartyGraphResolved.on(e=>{e&&this._setPubmaticSspIdAsEidFromGraphResponse(e)},{handleEventsAlreadyEmitted:!0})}async _collectIdentifiersFromUserIds(){try{let e=this._userIdSources.reduce((e,{userId:t,variant:n})=>{if(!t)return e;let r=this._userIdTargeting.getParsedUserIdStoredValue(t);return r?[...e,this._optableSdkWrapper.cid(r,n)]:e},[]);return Promise.all(e)}catch(e){return E.error(`OptablePiiPartner`,`_collectIdentifiersFromUserIds`,`Failed to collect identifiers from UserIds`,e),[]}}async _collectIdentifiersFromSSP(){try{await VC(3e3);let e=this._prebidMethods.getUserIdsAsEids(),t=this._sspSources.reduce((t,{source:n,variant:r})=>{if(!n)return t;let i=e?.find(e=>e.source===n);return i&&i.uids.length>0?[...t,this._optableSdkWrapper.cid(i.uids[0].id,r)]:t},[]);return Promise.all(t)}catch(e){return E.error(`OptablePiiPartner`,`_collectIdentifiersFromSSP`,`Failed to collect identifiers from SSPs`,e),[]}}async _processIdentifiers(e){try{let t=this._santitizeIdentifiers(e);if(!t.length)return;await this._optableSdkWrapper.identify(...t)}catch(t){E.error(`OptablePiiPartner`,`_processIdentifiers`,`Failed to process identifiers`,{identifiers:e,error:t})}}_santitizeIdentifiers(e){return e.filter(e=>{if(typeof e!=`string`||!e.length)return!1;let[t,n]=e.split(`:`,2),r=this._identityValidators[t];return r?r(n):!1})}async _processTraits(e){try{let t=this._sanitizeTraits(e);if(!Object.keys(t).length)return;await this._optableSdkWrapper.profile(t)}catch(t){E.error(`OptablePiiPartner`,`_processTraits`,`Failed to process traits`,{traits:e,error:t})}}_sanitizeTraits(e){return Object.entries(e).reduce((e,[t,n])=>(typeof n==`string`&&n.length&&(e[t]=n),e),{})}_handleOptableUid1Captured(e){this._ortb2.addEidsToOrtb2(e)}async _setPubmaticSspIdAsEidFromGraphResponse(e){if(!e?.sources?.mediawallah?.clusters?.length||(await this._prebidMethods.waitForQueue(),this._userSyncConfig.isPubmaticEidSetByLiveIntent))return;let t=(e?.sources?.mediawallah?.clusters).reduce((e,t)=>{let n=t.ids??[];return[...e,...n]},[]).filter(e=>e.startsWith(CE.PUBMATIC_SSP_ID));if(!t?.length)return!1;let n=t[Math.floor(Math.random()*t.length)].replace(CE.PUBMATIC_SSP_ID,``);this._prebidMethods.setBidderConfig({bidders:[G.Pubmatic],config:{ortb2:{user:{ext:{data:{eids:[{source:`mediawallah.com`,uids:[{id:n}]}]}}}}}}),this._userSyncConfig.pubmaticBidderLevelEidSource=`mediawallah-dcn`}};gD=w([D(`OptablePiiPartner`),x(),N(0,b(Fi)),N(1,b(J)),N(2,b(Yr)),N(3,b(Fo)),N(4,b(Zi)),N(5,b(hD)),N(6,b(AE)),N(7,b(Nm)),N(8,b(th)),N(9,b($s)),N(10,b(P)),N(11,b(Lp)),N(12,b(Jf))],gD);let _D=class extends Zm{constructor(e,t,n){super(),this._prebidMethods=e,this._userIds=t,this._userIdEventBus=n,C(this,`_name`,`33acrossId`),C(this,`_userId`,void 0),this._userId=this._userIds.get(this._name)}get enabled(){return this._userId?.enabled??!1}processPii(e){this._prebidMethods.addToQueue(()=>{this.run(e)})}run(e){if(this._userId&&e.sha256Hash&&this._userId.id.params){if(e.collectionMethod===`graph3p`)return;this._userId.id.params.hem=e.sha256Hash;let t=this.updateUserIds();this._prebidMethods.setConfig({userSync:{userIds:t}},!1),this._userIdEventBus.userIdNeedsRefresh.emit({options:{submoduleNames:[this._name]},callback:()=>void 0})}}updateUserIds(){return(this._prebidMethods.getConfig(`userSync.userIds`)??[]).map(e=>(this._userId&&e.name===this._userId.id.name&&(e=this._userId.id),e))}};_D=w([D(`ThirtyThreeAcrossPiiPartner`),x(),N(0,b(P)),N(1,b(Nm)),N(2,b(Bp))],_D);let vD=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`DeclareBridgedUid2`,this._lookup=`DBUID2`}};vD=w([S()],vD);let yD=class extends Zm{constructor(e,t,n,r,i,a,o,s,c){super(e),this._config=e,this._prebidMethods=t,this._userIds=n,this._userIdEventBus=r,this._idGraphUid2Experiment=i,this._optableSdkWrapper=a,this._liveIntentUid2HemExperiment=o,this._declareBridgedUid2Experiment=s,this._googleAdManager=c,C(this,`_name`,`uid2`),C(this,`_uid2ServerTokenKey`,`__uid2_server_token`),C(this,`_uid2Url`,`https://ads.adthrive.com/api/v2/uid`),C(this,`_userId`,void 0),this._userId=this._userIds.get(this._name)}get enabled(){return super.enabled&&(this._userId?.enabled??!1)}processPii(e){this._prebidMethods.addToQueue(()=>{this.run(e).catch(t=>{E.error(`Uid2PiiPartner`,`processPii`,`Error processing PII`,{pii:e,error:t})})})}async run(e){let t=e.collectionMethod===`direct`||e.collectionMethod===`graph1p`,n=this._idGraphUid2Experiment.result;if(!(!(this._liveIntentUid2HemExperiment.result&&e.collectionMethod===`liveIntent`&&!e.withUid2)&&e.collectionMethod===`liveIntent`)&&!this._config.gdpr.enabled&&e.sha256Hash){if(t)return this.setTTDUId2ServerToken(e,`raptive`);if(n)return this.setTTDUId2ServerToken(e,`optable`)}}updateUserIds(){return(this._prebidMethods.getConfig(`userSync.userIds`)??[]).map(e=>(this._userId&&e.name===this._name&&(e=this._userId.id),e))}async setTTDUId2ServerToken(e,t){let n=L.readExternalLocalStorage(this._uid2ServerTokenKey);if(n&&!(t===`raptive`&&n.provider!==`raptive`))return;let r;try{t===`raptive`?r=await this._getTTDUId2ServerTokenFromRaptive(e):t===`optable`&&(r=await this._getTTDUId2ServerTokenFromOptable(e))}catch{return}r?(L.setExternalLocalStorage(this._uid2ServerTokenKey,r),this._setUid2WithUpdatedToken({token:r,declareBridged:this._shouldDeclareBridgedUid2(e)})):E.error(`Uid2PiiPartner`,`setTTDUId2ServerToken`,`No UID2 token returned from ${t}`)}_shouldDeclareBridgedUid2(e){let t=e.collectionMethod===`liveIntent`&&!e.withUid2;return(e.collectionMethod===`graph3p`||t)&&this._declareBridgedUid2Experiment.result}_getMacher(e){if(e.collectionMethod===`liveIntent`&&!e.withUid2)return`liveintent.com`;let t=e.graphSource;if(t===`truedata`)return`truedata.com`;if(t===`mediawallah`)return`mediawallah.com`}async _getTTDUId2ServerTokenFromOptable(e){try{let t=await this._optableSdkWrapper.tokenize(`e:${e.sha256Hash}`),n;if(t?.refs?.[`0`]?.advertising_token)n=t.refs[0];else if(t?.user?.eids){let e=t.user.eids.find(e=>e.source===`uidapi.com`);if(!e){E.error(`Uid2PiiPartner`,`_getTTDUId2ServerTokenFromOptable`,`No uidapi.com EID included in response`);return}if(n=e.uids?.[0]?.ext,!n?.advertising_token){E.error(`Uid2PiiPartner`,`_getTTDUId2ServerTokenFromOptable`,`No UID2 token or no advertising token included in response`);return}}else{E.error(`Uid2PiiPartner`,`_getTTDUId2ServerTokenFromOptable`,`No valid UID2 token found in either new or legacy format`,`Identity object is`,t);return}if(n.provider=`optable`,this._shouldDeclareBridgedUid2(e)){n.matcher=this._getMacher(e);let t=vm(n.matcher);t&&this._googleAdManager.setTargetingFlag(`uid2b`,[t],!0)}return n}catch(e){E.error(`Uid2PiiPartner`,`_getTTDUId2ServerTokenFromOptable`,`Failed to tokenize PII`,e);return}}async _getTTDUId2ServerTokenFromRaptive(e){return new Promise((t,n)=>{if(!WE(e.sha256Hash))return E.event(`Uid2PiiPartner`,`_getTTDUId2ServerTokenFromRaptive`,`piiData.sha256Hash is invalid type or length`,{sha256Hash:e.sha256Hash}),n();let r=new Date().setUTCHours(0,0,0,0),i=`${this._uid2Url}?format=email_hash&value=${e.sha256Hash}&optout_check=1&ts=${r}`;fetch(i).then(async e=>{let{body:r,status:i}=await e.json(),a=r;return i===`optout`?(L.deleteLocalStorage(this._uid2ServerTokenKey),n()):a?.advertising_token?(a.provider=`raptive`,a.matcher=`cafemedia.com`,t(a)):n()}).catch(e=>(E.error(`Uid2PiiPartner`,`_getTTDUId2ServerTokenFromRaptive`,`Failed to fetch uid2 token`,e),n(e)))})}_setUid2WithUpdatedToken(e){if(!e.token||e.token.provider===`optable`&&e.token.matcher===`liveintent.com`)return;let t=this._prebidMethods.getConfig(`userSync.userIds`);this._prebidMethods.setConfig({userSync:{userIds:t.map(t=>(t.name===this._name&&t.params&&(t.params.uid2Token=e.token,e.declareBridged&&(t.params.declareBridged=e.declareBridged)),t))}},!1),this._userIdEventBus.userIdNeedsRefresh.emit({options:{submoduleNames:[this._name]},callback:()=>{this._userIdEventBus.uid2Refreshed.emit()}})}};yD=w([x(),D(`Uid2PiiPartner`),N(0,b(J)),N(1,b(P)),N(2,b(Nm)),N(3,b(Bp)),N(4,b(Am)),N(5,b(AE)),N(6,b(bm)),N(7,b(vD)),N(8,b(Z))],yD);let bD=class extends Zm{constructor(e,t,n,r,i){super(e),this._config=e,this._prebidMethods=t,this._userIds=n,this._userIdEventBus=r,this._yahooConnectBridgingDeclarationExperiment=i,C(this,`_name`,`connectId`),C(this,`_userId`,void 0),this._userId=this._userIds.get(this._name)}get enabled(){return super.enabled&&(this._userId?.enabled??!1)}updateUserIds(){return(this._prebidMethods.getConfig(`userSync.userIds`)??[]).map(e=>(this._userId&&e.name===this._userId.id.name&&(e=this._userId.id),e))}processPii(e){this._prebidMethods.addToQueue(()=>{this.run(e)})}run(e){if(this._userId&&e.sha256Hash&&this._userId.id.params){if(this._userId.id.params.he=e.sha256Hash,this._yahooConnectBridgingDeclarationExperiment.result){let t=Vp(e);t&&(this._userId.id.params.provenance=t)}let t=this.updateUserIds();this._prebidMethods.setConfig({userSync:{userIds:t}},!1),this._userIdEventBus.userIdNeedsRefresh.emit({options:{submoduleNames:[this._name]},callback:()=>void 0})}}};bD=w([D(`YahooPiiPartner`),x(),N(0,b(J)),N(1,b(P)),N(2,b(Nm)),N(3,b(Bp)),N(4,b(qp))],bD);let xD=class extends I{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p){super(),this._config=e,this._context=t,this._piiManager=n,this._identityEventBus=r,C(this,`_partners`,void 0),this._partners=[i,a,o,s,c,l,u,d,f,p].filter(e=>e.enabled&&!this._context.isWordPressLogin),this._identityEventBus.dataCaptured.on(e=>{e.collectionMethod===`liveIntent`&&!this._config.audienceTargeting.liveIntentEnabled||this._partners.filter(e=>e.enabled).forEach(t=>{t.processPii(e)})})}start(){this.enabled&&(this._partners.forEach(e=>e.init&&void e.init()),this._piiManager.init())}get enabled(){return!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut}};xD=w([D(`PiiCaptureComponent`),x(),N(0,b(J)),N(1,b(W)),N(2,b(sD)),N(3,b($s)),N(4,b(lD)),N(5,b(uD)),N(6,b(dD)),N(7,b(fD)),N(8,b(pD)),N(9,b(Qm)),N(10,b(gD)),N(11,b(bD)),N(12,b(yD)),N(13,b(_D))],xD);let SD=class extends I{constructor(e,t,n){super(),this._config=e,this._context=t,this._optableSdkWrapper=n,C(this,`_cloudflareWorkerUrl`,``),C(this,`_isFirstPageview`,!1),C(this,`_siteHasCloudflareWorker`,!1);let r=this._config.site.id;this._cloudflareWorkerUrl=window.location.origin.replace(`https://`,`https://${r}.`).replace(`www.`,``),this._isFirstPageview=this._context.isFirstPageview,this._siteHasCloudflareWorker=this._config.site.deployedCloudflareVersion!==null}get enabled(){let e=Vt().get(`rptbt24`),t=this._context.invalidTraffic&&e!==`true`,n=this._context.country===`US`||this._context.country===`CA`&&this._context.region!==`QC`||e===`true`;return this._siteHasCloudflareWorker&&!t&&n}async start(){try{let e=L.readExternalCookie(`_rcid`);(!e&&this._isFirstPageview||e&&await this._shouldRefreshCookie(e))&&await this._requestRcid(),await this._logCookie()}catch(e){E.error(`RaptiveConnectedIdComponent`,`start`,`Error starting Raptive Connected ID component`,e)}}async _shouldRefreshCookie(e){let t=e;if(typeof t==`string`){t=await zo(t,this._config.site.id);let e=new Date(t.metadata.capturedOn).getTime(),n=new Date().getTime();return Math.floor((n-e)/(1e3*60*60*24))>340}return!0}async _logCookie(){let e=L.readExternalCookie(`_rcid`);if(!e)return;typeof e==`string`&&(e=await zo(e,this._config.site.id)),E.event(`RaptiveConnectedIdComponent`,`_logCookie`,`Raptive Connected ID`,e);let t=await this._optableSdkWrapper.cid(e.value.sharedId,3);await this._optableSdkWrapper.identify(t);let n=eD(e.metadata.clientIp);n&&await this._optableSdkWrapper.identify(n)}async _requestRcid(){E.event(`RaptiveConnectedIdComponent`,`_requestRcid`,`Requesting Raptive Connected ID`);try{let e=await fetch(this._cloudflareWorkerUrl,{credentials:`include`});e.ok||(e.status===404?E.error(`RaptiveConnectedIdComponent`,`_requestRcid`,`Handler not found at ${this._cloudflareWorkerUrl}`):E.error(`RaptiveConnectedIdComponent`,`_requestRcid`,`Error fetching Raptive Connected ID`))}catch(e){E.error(`RaptiveConnectedIdComponent`,`_requestRcid`,`Error fetching Raptive Connected ID`,e)}}};SD=w([D(`RaptiveConnectedIdComponent`),S(),N(0,b(J)),N(1,b(W)),N(2,b(AE))],SD);let CD=class extends qe{constructor(...e){super(...e),C(this,`realizedAdDensityCompReady`,new T),C(this,`metricsRequested`,new T)}};CD=w([S()],CD);let wD=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`AdDensity`,this._lookup=`ADDENS`}};wD=w([S()],wD);let TD=class extends I{constructor(e,t,n,r,i,a,o,s,c,l){super(),this._config=e,this._realizedAdDensityExperiment=t,this._slots=n,this._pageManager=r,this._userPageDataLogEvents=i,this._adInjectionMap=a,this._realizedAdDensityEventBus=o,this._gamEventBus=s,this._slotManagerEventBus=c,C(this,`_initialSlotsTimeout`,1e4),C(this,`_device`,void 0),C(this,`_addToMainContent`,new Set([H.Below_Post])),C(this,`_slotsForAdDensity`,new Set([H.Content,H.Recipe,H.Footer])),C(this,`_slotsForMainContent`,void 0),C(this,`_slotsForEnd`,void 0),C(this,`_mainContent`,null),C(this,`_commentElem`,null),C(this,`_observer`,void 0),C(this,`_elementBeingObserved`,null),C(this,`_initMainContentHeight`,null),C(this,`_endMainContentHeight`,null),C(this,`_slotsHeightEnd`,null),C(this,`_slotsHeightVideo`,null),this._slotsForMainContent=new Set,this._slotsForEnd=new Set,this._device=l.device}init(){this._realizedAdDensityEventBus.metricsRequested.on(e=>e(this._getAdDensity()));let e=this.getAdDensityDynamicAds();if(e.length===0)return;let[t]=AC(e,this._adInjectionMap);this._mainContent=t,this._mainContent!==null&&(this._gamEventBus.slotOnload.once(()=>{setTimeout(()=>{this._getSlotHeights(),this._mainContent&&this._initObserver(this._mainContent)},this._initialSlotsTimeout)}),this._slotManagerEventBus.added.on(e=>{let t=this._slots.get(e);t.some(e=>e.infinite)||this._addSlots(t)}),this._userPageDataLogEvents.addCallbackToQueue([this._pageManager.beforeUnload],()=>this._logAdDensity()))}getAdDensityDynamicAds(){return this._config.dynamicAds.filter(e=>e.location===H.Content).filter(e=>fw(this._config,e)).filter(e=>dw(e,this._device)).filter(e=>mw(e))}_getAdDensity(){return this.enabled,{...this._endMainContentHeight&&this._slotsHeightEnd&&{addensend:Math.round(this._slotsHeightEnd/this._endMainContentHeight*100)}}}_logAdDensity(){let e=this._getAdDensity();Object.keys(e).length>0&&this._userPageDataLogEvents.setUserPageData({AdDensityComponent:e})}_addSlots(e){e.filter(e=>this._slotsForAdDensity.has(e.location)).filter(e=>!e.element.classList.contains(`adthrive-slicksearch`)).forEach(e=>{!e.lazy&&this._addToMainContent.has(e.location)&&this._slotsForMainContent.add(e.name),this._slotsForEnd.add(e.name)})}isSlotInMainContent(e){return!!(this._mainContent?.querySelector(`#${e.id}`)&&!this.isSlotInComment(e))}isSlotInComment(e){return!!(this._commentElem&&this._commentElem.querySelector(`#${e.id}`))}_getSlotHeights(){let e=0;this._slots.get().forEach(t=>{this._slotsForMainContent.has(t.name)&&(e+=t.element.offsetHeight)}),this._mainContent&&(this._initMainContentHeight=Rw(this._mainContent),this._initMainContentHeight+=e)}_commentElementHasAdSlots(e){return this._slots.get().some(t=>e.querySelector(`#${t.id}`)&&t.location===H.Below_Post)}_initObserver(e){let t=e.querySelector(Lw);this._observer=this.getIntersectionObserver(t),t!==null&&this._commentElementHasAdSlots(t)?(this._commentElem=t,this._elementBeingObserved=`comment`,this._observer.observe(this._commentElem)):(this._elementBeingObserved=`mainContent`,this._observer.observe(e))}getIntersectionObserver(e){return new IntersectionObserver(t=>{for(let n of t)this._initMainContentHeight!==null&&(this._elementBeingObserved===`mainContent`&&n.isIntersecting&&(this._calculateSlotHeightsAtEnd(),this._observer?.unobserve(this._mainContent)),e!==null&&this._elementBeingObserved===`comment`&&n.boundingClientRect.top>0&&(this._calculateSlotHeightsAtEnd(),this._observer?.unobserve(e)))},{})}_calculateSlotHeightsAtEnd(){let e=0,t=0;if(this._slots.get().forEach(n=>{if(this._slotsForEnd.has(n.name)&&(n.location!==H.Content||this.isSlotInMainContent(n))){let t=wC(n.element);t&&t>1?e+=t:e+=n.element.offsetHeight}this._slotsForMainContent.has(n.name)&&(t+=n.element.offsetHeight)}),this._slotsHeightEnd=e,this._mainContent&&(this._endMainContentHeight=Rw(this._mainContent),this._endMainContentHeight+=t),this._config.video.playlistPlayerAdded){let t=document.querySelector(`.adthrive-collapse-player`);e+=t?t.offsetHeight:0}this._config.video.relatedPlayerAdded&&document.querySelectorAll(`.adthrive-video-player`).forEach(t=>{e+=t.offsetHeight}),this._slotsHeightVideo=e}get enabled(){return this._realizedAdDensityExperiment.result&&`IntersectionObserver`in window&&!(document.querySelector(`body.home`)!==null||document.querySelector(`body.archive`)!==null)&&!Tw()}start(){this._realizedAdDensityEventBus.realizedAdDensityCompReady.emit()}};TD=w([D(`RealizedAdDensityComponent`),x(),N(0,b(J)),N(1,b(wD)),N(2,b(Y)),N(3,b(jr)),N(4,b(Ma)),N(5,b(CC)),N(6,b(CD)),N(7,b(X)),N(8,b($f)),N(9,b(W))],TD);let ED=class extends I{constructor(e,t){super(),this._slotManagerEventBus=e,this._slots=t,C(this,`_maxSlotRefreshCount`,4)}init(){this._slotManagerEventBus.displaying.on(e=>{let t=this._slots.get(e);Z.pushToQueue(()=>{t.forEach(e=>{this._setSlotTargeting(e)})})}),this._slotManagerEventBus.refreshing.on(e=>{let t=this._slots.get(e);Z.pushToQueue(()=>{t.forEach(e=>{this._setSlotTargeting(e)})})})}_setSlotTargeting(e){if(!e||e.refreshCount===void 0||e.setTargeting===void 0)return;let t=`0${Math.min(e.refreshCount,this._maxSlotRefreshCount)}`.slice(-2);e.setTargeting({key:`refresh`,value:t}),e.setTargeting({key:`nref`,value:e.refreshCount.toString()})}};ED=w([D(`RefreshCountComponent`),x(),N(0,b($f)),N(1,b(Y))],ED);let DD=class extends F{constructor(...e){super(...e),C(this,`_default`,!0)}init(){this._key=`RefreshRebuild`,this._lookup=`REBUILDSLOT`}run(){return super.run()}};w([R()],DD.prototype,`run`,null),DD=w([S()],DD);let OD=class extends I{constructor(e,t,n){super(),this._slotManager=e,this._refreshRebuildExperiment=t,this._slotManagerEventBus=n}init(){this._slotManagerEventBus.refreshing.on(e=>{this._slotManager.getSlots(e).filter(this.slotHasHighRefreshCountIncrement).forEach(e=>this._slotManager.rebuild(e))})}slotHasHighRefreshCountIncrement(e){return e.refreshCount%100==0}get enabled(){return this._refreshRebuildExperiment.result}};OD=w([D(`RefreshRebuildComponent`),x(),N(0,b(eS)),N(1,b(DD)),N(2,b($f))],OD);let kD=class extends V{init(){this._key=`RefreshUserIdsDebounce`,this._lookup=`REFDEB`}};kD=w([S()],kD);let AD=class extends I{constructor(e,t,n){super(),this._userIdEventBus=e,this._prebidMethods=t,this._debounceExperiment=n,C(this,`_requestQueue`,[]),C(this,`_isProcessingQueue`,!1),C(this,`_pendingSubmodules`,new Set),C(this,`_debounceTimer`,null),C(this,`_callbackMap`,new Map),C(this,`_debounceTimeout`,150),this._debounceTimeout=this._debounceExperiment.result}init(){this._userIdEventBus.userIdNeedsRefresh.on(e=>{this._collectRefreshRequest(e)})}_collectRefreshRequest(e){e.options.submoduleNames.forEach(t=>{this._pendingSubmodules.add(t),e.callback&&this._callbackMap.set(t,e.callback)}),this._debounceTimer??=window.setTimeout(()=>{let e=Array.from(this._pendingSubmodules),t=Array.from(this._callbackMap.values());this._pendingSubmodules.clear(),this._callbackMap.clear(),this._debounceTimer=null,this._enqueueRequest({options:{submoduleNames:e},callback:()=>t.forEach(e=>e?.())})},this._debounceTimeout)}_enqueueRequest(e){this._requestQueue.push(e),this._isProcessingQueue||this._processQueue().catch(e=>{E.error(`RefreshUserIdsComponent`,`_enqueueRequest`,`Error processing request queue`,e)})}async _processQueue(){if(this._requestQueue.length===0){this._isProcessingQueue=!1;return}let e=this._requestQueue.shift();if(!e){this._isProcessingQueue=!1;return}return this._isProcessingQueue=!0,await this._prebidMethods.refreshUserIds(e.options,e.callback),this._processQueue()}};AD=w([D(`RefreshUserIdsComponent`),S(),N(0,b(Bp)),N(1,b(P)),N(2,b(kD))],AD);let jD=class extends I{constructor(e,t){super(),this.gamEventBus=e,this._slots=t}init(){this.gamEventBus.slotResponseReceived.on(({slotId:e})=>{let t=this._slots.get(e);t&&this.slotResponseReceived(t)})}slotResponseReceived(e){e.alwaysInView=e.location===H.Footer||e.location===H.Video_StickyOutstream}};jD=w([D(`AlwaysInViewComponent`),x(),N(0,b(X)),N(1,b(Y))],jD);let MD=class extends I{constructor(e){super(),this._slotManager=e,window.addEventListener(`message`,e=>{e&&e.data&&e.data.message===`set_adthrive_slot_timeout`&&e.data.slot_id&&e.data.refresh_interval>=0&&this._slotManager.updateRefreshTimeout(e.data.slot_id,e.data.refresh_interval)},!1)}};MD=w([D(`ChangeSlotRefreshComponent`),x(),N(0,b(eS))],MD);let ND=class extends I{constructor(e,t,n){super(),this._slotManager=e,this._slots=t,this._pageManager=n}init(){this._pageManager.visibilityChange.on(()=>this.documentVisibilityChanged())}documentVisibilityChanged(){let e=document.visibilityState,t=this._slots.get();e===`visible`?this._slotManager.resumeRefresh(t):e===`hidden`&&this._slotManager.pauseRefresh(t)}};ND=w([D(`DocumentHiddenPauseRefreshComponent`),x(),N(0,b(eS)),N(1,b(Y)),N(2,b(jr))],ND);let PD=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`StickyOutstreamFooterCollision`,this._lookup=`SOFC`}};PD=w([S()],PD);let FD=class extends I{constructor(e,t,n,r){super(),this._config=e,this._context=t,this._eventBus=n,this._stickyOutstreamFooterCollisionExperiment=r,C(this,`_lastAdHeight`,void 0),C(this,`_maxRetries`,void 0),this._lastAdHeight=52,this._maxRetries=12}init(){this._eventBus.footerResponseReceived.on(this.pollForFooterAdHeight.bind(this))}get enabled(){let e=this._stickyOutstreamFooterCollisionExperiment.result,t=this._context.device===`phone`,{stickyOutstreamSettings:n,players:r}=this._config.video,i=n.mobile.enabled&&n.mobileLocation!==`top-center`,a=r?.some(e=>e.mobileLocation.includes(`bottom`))||!1;return e&&t&&(i||a)}pollForFooterAdHeight(){let e=0,t=setInterval(()=>{this.checkForFooterAdHeightChange(),e++,e>=this._maxRetries&&clearInterval(t)},500)}checkForFooterAdHeightChange(){let e=this.getFooterAdHeight();e!==this._lastAdHeight&&(this._eventBus.footerHeightChanged.emit(e),this._lastAdHeight=e)}isElementAtBottomOfPage(e){let t=e.getBoundingClientRect();if(t.width&&t.height){let e=t.bottom||(t.top||t.y)+t.height;if(Math.abs(window.innerHeight-e)<100)return!0}return!1}getFooterAdHeight(){let e=52;return this._config.footer.footerSelectorsForHeightCheck.forEach(t=>{let n=document.querySelector(t.trim());if(n&&Gx(n)&&this.isElementAtBottomOfPage(n)){let t=n.getBoundingClientRect().height;t>e&&(e=t)}}),e}};FD=w([D(`FooterAdRefreshComponent`),S(),N(0,b(J)),N(1,b(W)),N(2,b(Pr)),N(3,b(PD))],FD);let ID=class extends I{constructor(e,t){super(),this._slotManager=e,this._googleAgManagerEventBus=t,C(this,`_inViewPercentage`,50)}init(){this._googleAgManagerEventBus.impressionViewable.on(({slotId:e})=>{this.processImpressionViewable(e)}),this._googleAgManagerEventBus.slotVisibilityChanged.on(({slotId:e,event:t})=>{this.processVisibilityChanged(e,t)})}processImpressionViewable(e){let t=this._slotManager.getSlot(e);t&&(t.outOfViewGPT=!1,this._slotManager.inView(t))}processVisibilityChanged(e,t){let n=this._slotManager.getSlot(e);n&&this.check(n,t.inViewPercentage)}check(e,t){t&&t>=this._inViewPercentage||e.location===H.Video_StickyOutstream?(e.outOfViewGPT=!1,this._slotManager.inView(e)):(e.outOfViewGPT=!0,this._slotManager.outOfView(e))}};ID=w([D(`ImpressionViewableRefreshComponent`),x(),N(0,b(eS)),N(1,b(X))],ID);let LD=class extends I{constructor(e,t,n,r,i){super(),this._slotManager=e,this._slots=t,this._gamEventBus=n,this._slotEventBus=r,this._slotManagerEventBus=i,C(this,`_inViewPercentage`,50),C(this,`_observer`,void 0),C(this,`_trackSlotEvents`,new Map)}init(){this._observer=this._getIntersectionObserver(),this._slotEventBus.googleAdManagerFallbackDivAdded.on(e=>{this.slotResponseReceived(e)}),this._gamEventBus.slotResponseReceived.on(({slotId:e})=>{this.slotResponseReceived(e),this._trackSlotEvents.set(e,`slotResponseReceived`)}),this._gamEventBus.slotRenderEnded.on(({slotId:e})=>{this.slotResponseReceived(e),this._trackSlotEvents.delete(e)}),this._gamEventBus.slotRequested.on(({slotId:e})=>{this._trackSlotEvents.set(e,`slotRequested`)}),this._slotManagerEventBus.refreshing.on(e=>{let t=this._slotManager.getSlots(e);for(let e of t)this._trackSlotEvents.get(e.id)&&(this._slotManager.rebuild(e),this._trackSlotEvents.delete(e.id));this.refreshing(t)})}get enabled(){return`IntersectionObserver`in window}slotResponseReceived(e){let t=this._slots.get(e);t&&this._observer&&t.element&&this._observer.observe(t.element)}_googleAdManagerFallbackDivAdded(e){this._observer&&e&&this._observer.observe(e)}refreshing(e){if(this._observer)for(let t of e)t.element&&this._observer.unobserve(t.element),Array.from(t.element.children).forEach(e=>{e.classList.contains(`google-ad-manager-fallback-container`)&&this._observer.unobserve(e)})}_getIntersectionObserver(){return new IntersectionObserver(e=>{for(let t of e){let e=t.target.id.length?this._slots.get(t.target.id):null;if(e)this._check(e,t.intersectionRatio*100);else{let e=t.target.parentElement&&t.target.parentElement.classList.contains(`adthrive-ad`)&&this._slots.get(t.target.parentElement.id);e&&this._check(e,t.intersectionRatio*100)}}},{threshold:[0,this._inViewPercentage/100]})}_check(e,t){t>=this._inViewPercentage||e.location===H.Video_StickyOutstream?(e.outOfViewIO=!1,this._slotManager.inView(e)):(e.outOfViewIO=!0,this._slotManager.outOfView(e))}};LD=w([D(`IntersectionObserverRefreshComponent`),x(),N(0,b(eS)),N(1,b(Y)),N(2,b(X)),N(3,b(Hs)),N(4,b($f))],LD);let RD=class extends qe{constructor(...e){super(...e),C(this,`velocityChange`,new T)}};RD=w([S()],RD);let zD=class extends I{constructor(e,t){super(),this._pageManager=e,this._scrollVelocityTrackerEventBus=t,C(this,`_lastScrollTop`,0),C(this,`_lastTimestamp`,0),C(this,`_scrollVelocityPxPerMs`,0),C(this,`_scrollStopTimeout`,null)}get enabled(){return!1}init(){this._lastScrollTop=window.scrollY,this._lastTimestamp=performance.now(),this._pageManager.scroll.on(()=>this._handleScroll())}_handleScroll(){this._calculateScrollVelocity(),this._scrollStopTimeout&&clearTimeout(this._scrollStopTimeout),this._scrollStopTimeout=setTimeout(()=>{this._scrollVelocityPxPerMs=0,this._scrollVelocityTrackerEventBus.velocityChange.emit(this._scrollVelocityPxPerMs)},200)}_calculateScrollVelocity(){let e=performance.now(),t=window.scrollY,n=e-this._lastTimestamp,r=t-this._lastScrollTop;if(this._userScrolled(n,r)){let e=r/n;this._scrollVelocityPxPerMs=.5*this._scrollVelocityPxPerMs+.5*e,this._scrollVelocityTrackerEventBus.velocityChange.emit(this._scrollVelocityPxPerMs)}this._lastScrollTop=t,this._lastTimestamp=e}get scrollVelocityPxPerMs(){return this._scrollVelocityPxPerMs}_userScrolled(e,t){return e>0&&t!==0}};zD=w([x(),N(0,b(jr)),N(1,b(RD))],zD);let BD=class extends I{constructor(e,t,n){super(),this._config=e,this._prebidMethods=t,this._googleAdManager=n,C(this,`_ids`,[`flashtalking.com`,`neustar.biz`,`media.net`,`liveintent.triplelift.com`,`liveintent.sovrn.com`])}init(){Z.pushToQueue(async()=>{try{Object.keys(localStorage).filter(e=>e.startsWith(`_GESPSK-`)).forEach(e=>{let t=L.readExternalLocalStorage(e);if(t){let e=JSON.parse(t)[1];e&&typeof e==`string`&&this._googleAdManager.setTargetingFlag(`ssp_len`,[e.length.toString()])}})}catch{}await this._prebidMethods.waitForQueue().then(e=>{if(e===!0){let e=this._mapIdsToEids();window.googletag.secureSignalProviders&&window.googletag.secureSignalProviders.push({networkCode:this._config.gam.networkCode,collectorFunction:async()=>{let t=(await this.fetchAsyncSignals(e)).obfuscate();return this._googleAdManager.setTargetingFlag(`ssp_len`,[t.length.toString()]),t}})}})})}_mapIdsToEids(){return this._prebidMethods.getUserIdsAsEids().filter(e=>this._ids.includes(e.source)).map(e=>{let{id:t,ext:n}=e.uids[0];return{source:e.source,data:t,...n&&`provider`in n&&{provider:n.provider},isPubCreated:!0}})}fetchAsyncSignals(e){return Promise.resolve({obfuscate:()=>btoa(JSON.stringify({signals:[...e,{source:`mcmp`,data:this._config.marmalade.mcmp,isPubCreated:!0},{source:`sens`,data:this._config.site.sensitiveCategories,isPubCreated:!0}]}))})}};BD=w([D(`SecureSignalsComponent`),x(),N(0,b(J)),N(1,b(P)),N(2,b(Z))],BD);let VD=class extends I{constructor(e){super(),this._config=e}start(){window.camAddRouteObserver&&window.camAddRouteObserver()}get enabled(){return!this._config.adOptions.spa}};VD=w([D(`CamSinglePageAppManagerComponent`),x(),N(0,b(J))],VD);let HD=async({condition:e,delay:t=500,maxAttempts:n=10,executedAttempts:r=0})=>{if(!e()){if(r>=n)throw Error(`Max waitFor attempts reached without resolution`);return await VC(t),await HD({condition:e,delay:t,maxAttempts:n,executedAttempts:r+1})}},UD=e=>{let t=!1;return async()=>{if(!t){try{await HD(e)}catch{}t=!0}}},WD=e=>{let t;return t=e instanceof Error?e.message:String(e),t},GD=e=>e.split(`#`)[0],KD=class extends I{constructor(e,t,n,r,i,a,o,s,c,l,u){super(),this._config=e,this._context=t,this._spaEventBus=n,this._slotManager=r,this._prebidActionManager=i,this._prebidMethods=a,this._dynamicAdsComponent=o,this._intersectionObserverManager=s,this._gam=c,this._adInjectionMap=l,this._cls=u,C(this,`_spaRefreshImprovementsEnabled`,cn.isRolloutEnabled(`spa-refresh-improvements`)),C(this,`_routeChangeBufferDuration`,this._spaRefreshImprovementsEnabled?100:500),C(this,`_observerDebounceDuration`,this._spaRefreshImprovementsEnabled?100:500),C(this,`_observerSettledDuration`,this._spaRefreshImprovementsEnabled?25:1e3),C(this,`_lastContentMutationTimestamp`,1/0),C(this,`_priorHref`,GD(document.location.href)),C(this,`_priorFinalPath`,void 0),C(this,`_isTransitioning`,!1);let d=document.location.href.split(`/`);this._priorFinalPath=d[d.length-1]}start(){this._addRouteChangeObserver(),this._setupRouteChangeListener()}get enabled(){return cn.isRolloutEnabled(`spa-refresh-improvements`)||this._config.adOptions.spa}_setupRouteChangeListener(){this._spaEventBus.routeChanged.on(e=>{this._handleRouteChange().catch(e=>{E.error(`SinglePageAppManagerComponent`,`routeChanged`,e),this._isTransitioning=!1})})}_resetStatefulEmitters(){Ke.forEach(e=>{e.resetEmitted(),e.resetOnces()})}async _handleRouteChange(){let e=()=>{let e=GD(document.location.href),t=e&&e!==this._priorHref;if(!this._spaRefreshImprovementsEnabled)return t;let n=document.location.href.split(`/`),r=n[n.length-1];return t&&(r===`#`?null:r)!==this._priorFinalPath};if(this._isTransitioning=!0,this._config.disableAds.clear(),this._intersectionObserverManager.unobserveAll(!1),this._adInjectionMap.reset(),await VC(this._routeChangeBufferDuration),e())throw Error(`Handler canceled after route change buffer.`);if(this._slotManager.removeAllElements(),this._prebidActionManager.reset(),this._prebidMethods.clearAllAuctions(),this._slotManager.destroyAll(),this._refreshPageviewKey(),Qe.resetTimeOrigin(),this._config.disableAds.init(),this._context.sessionKey=this._context.setSessionKey(),this._context.isFirstPageview=Er(),this._context.pageUrl=window.location.href,await this._waitForPageMutations(),e())throw Error(`Handler canceled after page settled.`);this._resetStatefulEmitters(),this._config.resetDynamicAds(),this._cls.injectedSlots?.splice(0,this._cls.injectedSlots.length),this._cls.injectedVideoSlots?.splice(0,this._cls.injectedVideoSlots.length),this._dynamicAdsComponent.start(),this._spaEventBus.resetCompleted.emit(),this._gam.setTargetingFlag(`spa_rc`,[`1`]),this._isTransitioning=!1}_refreshPageviewKey(){let e=this._context.pageviewKey,t=br();return this._context.pageviewKey=t,this._gam.setTargeting({key:`pvk`,value:t}),e}_addRouteChangeObserver(){if(!document.body){E.error(`SinglePageAppManagerComponent`,`_addRouteChangeObserver`,`DOM is not ready`);return}new MutationObserver(Do(e=>{let t=GD(document.location.href),n=document.location.href.split(`/`),r=n[n.length-1];if(t&&this._priorHref!==t||this._spaRefreshImprovementsEnabled&&r!==`#`&&this._priorFinalPath!==r){try{this._spaEventBus.routeChanged.emit({to:t,from:this._priorHref,toFinalPath:r,fromFinalPath:this._priorFinalPath})}catch(e){E.error(`SinglePageAppManagerComponent`,`_addRouteChangeObserver`,`Error while emitting "routeChanged" event`,WD(e))}this._priorHref=t,this._priorFinalPath=r||``}else this._isTransitioning&&this._hasPageContentMutated(e)&&(this._lastContentMutationTimestamp=Date.now())},this._observerDebounceDuration,{leading:!0})).observe(document.body,{childList:!0,subtree:!0,attributes:!0})}async _waitForPageMutations(){try{return await HD({condition:()=>Date.now()-this._lastContentMutationTimestamp>this._observerSettledDuration,...this._spaRefreshImprovementsEnabled?{delay:5,maxAttempts:50,executedAttempts:0}:{}})}catch{return}}_hasPageContentMutated(e){return e.some(e=>{let t=e.type===`childList`,n=e.addedNodes.length>0||e.removedNodes.length>0,r=e.target,i=r?.id.includes(`AdThrive_`)||r?.id.includes(`google_ad`);return t&&n&&!i})}};KD=w([D(`SinglePageAppManagerComponent`),x(),N(0,b(J)),N(1,b(W)),N(2,b(xc)),N(3,b(eS)),N(4,b(dC)),N(5,b(P)),N(6,b(Hw)),N(7,b(Js)),N(8,b(Z)),N(9,b(CC)),N(10,b(pr))],KD);let qD=e=>{let t=document.createElement(`link`);t.rel=`stylesheet`,t.type=`text/css`,t.href=e,document.head.appendChild(t)},JD=(e,t,n)=>{let r=document.createElement(`link`);r.rel=t,r.href=e,n&&n.length&&n.forEach(e=>{r.setAttribute(e.name,e.value)}),document.head.appendChild(r)},YD=class extends I{constructor(e,t){super(),this._config=e,this._context=t}start(){this._config.site.style&&this._config.site.style.length>0?vw(this._config.site.style):this._context.styleUrl&&qD(this._context.styleUrl)}};YD=w([D(`SiteStyleComponent`),x(),N(0,b(J)),N(1,b(W))],YD);let XD=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`SlotResize`,this._lookup=`SRE`}};XD=w([S()],XD);let ZD=class extends I{constructor(e,t,n,r){super(),this.slotResizeExperiment=t,this._slots=r,C(this,`_gamSlotOnLoad`,void 0),C(this,`_slotSizeMap`,new Map),C(this,`_stickyContentEnabled`,void 0),this._gamSlotOnLoad=n.slotOnload,this._stickyContentEnabled=e.adOptions.stickyContentEnabled||!1}get enabled(){return this.slotResizeExperiment.result}start(){this._setupListeners()}_setupListeners(){this._gamSlotOnLoad.on(({slotId:e})=>{let t=this._slots.get(e);t?.location===`Content`&&this._compareSlot(t)})}_compareSlot(e){let t=this._slotSizeMap.get(e.id),n=getComputedStyle(e.element).height,r=Number(n.slice(0,-2));(!t||t<r)&&(this._resize(e.element,n),this._setSlotSizeMap(e.element.id,r)),this._stickyContentEnabled||this._align(e.element)}_resize(e,t){e.style.minHeight=t}_setSlotSizeMap(e,t){this._slotSizeMap.set(e,t)}_align(e){let{top:t,bottom:n}=e.getBoundingClientRect(),r=t,i=window.innerHeight-n;e.style.alignContent=r<i?`end`:`start`}};ZD=w([x(),D(`SlotResizeComponent`),N(0,b(J)),N(1,b(XD)),N(2,b(X)),N(3,b(Y))],ZD);let QD=class{constructor(e){C(this,`stickyHeaderHeight`,void 0),C(this,`stickyBlockedSelectors`,[]),this.stickyHeaderHeight=gw(e.adOptions.stickyHeaderSelectors),this.stickyBlockedSelectors=e.adOptions.stickyBlockedSelectors||[]}logOverflow(e){let t=document.querySelector(e);t&&eE(t)}getStickyAdTopProperty(e){let{playerContainer:t,topBackgroundElement:n,collapseMobileSubType:r,mobileHeaderSelector:i}=e;if(r===`adthrive-collapse-bottom-left`||r===`adthrive-collapse-bottom-right`)return this.stickyHeaderHeight;{let e=n?Number(n.getBoundingClientRect().height):Number(t.getBoundingClientRect().height),r=gw([i||``]);return r?Number(r)+e:e}}};QD=w([D(`StickyContainerAdsUtil`),x(),N(0,b(J))],QD);let $D=class extends I{constructor(e,t,n){super(),this._videoEventBus=t,this._stickyContainerAdEventBus=n,C(this,`_stickyContentHeight`,void 0),C(this,`_stickyAdTopProperty`,void 0),C(this,`_stickyContainerAdsUtil`,void 0),C(this,`_stickyContentEnabled`,!1),this._stickyContainerAdsUtil=new QD(e),this._stickyContentHeight=e.adOptions.stickyContentHeight??(It()?250:void 0),this._stickyContentEnabled=e.adOptions.stickyContentEnabled||!1}get enabled(){return this._stickyContentEnabled&&!Qw(this._stickyContainerAdsUtil.stickyBlockedSelectors)}start(){this.setCSS(),this._stickyContainerAdsUtil.logOverflow(`.adthrive-sticky-container`),this._stickyContainerAdEventBus.stickyContainerContentAdStylingApplied.emit()}setCSS(){yw(this._stickyContentHeight),xw(this._stickyContainerAdsUtil.stickyHeaderHeight),this.addListeners()}addListeners(){this._videoEventBus.topCenterVideoCollapsed.on(e=>{this._stickyAdTopProperty||=this._stickyContainerAdsUtil.getStickyAdTopProperty(e),xw(this._stickyAdTopProperty)}),this._videoEventBus.topCenterVideoUnCollapsed.on(()=>{xw(this._stickyContainerAdsUtil.stickyHeaderHeight)})}};$D=w([D(`StickyContainerContentAdsComponent`),x(),N(0,b(J)),N(1,b(pc)),N(2,b(iD))],$D);let eO=class extends I{constructor(e,t){super(),this._videoEventBus=t,C(this,`_stickyRecipeHeight`,void 0),C(this,`_stickyAdTopProperty`,void 0),C(this,`_stickyContainerAdsUtil`,void 0),this._stickyContainerAdsUtil=new QD(e),this._stickyRecipeHeight=e.adOptions.stickyRecipeHeight}get enabled(){return!Qw(this._stickyContainerAdsUtil.stickyBlockedSelectors)}start(){this.setCSS(),this._stickyContainerAdsUtil.logOverflow(`.adthrive-recipe-sticky-container`)}setCSS(){bw(this._stickyRecipeHeight),Sw(this._stickyContainerAdsUtil.stickyHeaderHeight),this.addListeners()}addListeners(){this._videoEventBus.topCenterVideoCollapsed.on(e=>{this._stickyAdTopProperty||=this._stickyContainerAdsUtil.getStickyAdTopProperty(e),Sw(this._stickyAdTopProperty)}),this._videoEventBus.topCenterVideoUnCollapsed.on(()=>{Sw(this._stickyContainerAdsUtil.stickyHeaderHeight)})}};eO=w([D(`StickyContainerRecipeAdsComponent`),x(),N(0,b(J)),N(1,b(pc))],eO);let tO=class extends I{constructor(e,t,n,r,i){super(),this._config=e,this._context=t,this._slotManager=n,this._gamEventBus=r,this._slotEventBus=i,C(this,`_locations`,[H.Footer]),C(this,`_closeButton`,null),C(this,`_handleCloseButtonClick`,(e,t,n,r)=>{let i=document.createEvent(`Event`);n===H.Footer&&L.setSessionStorage(`adthrive_footer_closed`,`true`),i.initEvent(`adthrive${n}Close`,!0,!0),e.remove(),this._closeButton=null;let a=t.parentElement;a&&(window.dispatchEvent(i),a.removeChild(t),E.event(`CloseButtonComponent`,`logCloseFooter`,`User clicked footer close button`,{nref:r}),this._slotManager.destroy(t.id))})}init(){this._gamEventBus.slotRenderEnded.on(({slotId:e,event:t})=>{this.slotRenderEnded(e,t)})}slotRenderEnded(e,t){let n=this._slotManager.getSlot(e);n&&!t.isEmpty&&t.size?.length===2&&(n.element&&this._locations.includes(n.location)&&n.sticky&&(n.element.setAttribute(`closable`,`true`),this._addCloseButton(n.id)),this._slotEventBus.adRenderedOutsideGAM.on(e=>{this._addCloseButton(e.slotId)}))}_addCloseButton(e){let t=this._slotManager.getSlot(e);if(!t)return;let{element:n,location:r,refreshCount:i}=t;t.element&&this._locations.includes(t.location)&&t.sticky&&n.hasAttribute(`closable`)&&(this._closeButton===null&&(this._closeButton=this._createButton(n,r,i)),this._changeCloseButtonLocation(this._closeButton),n.appendChild(this._closeButton))}_createButton(e,t,n){let r=document.createElement(`span`);return r.innerHTML=`&times;`,r.className=`adthrive-close`,r.addEventListener(`click`,()=>this._handleCloseButtonClick(r,e,t,n)),r}_changeCloseButtonLocation(e){e.style.right=`initial`,e.style.left=It()?`10px`:`5px`}get enabled(){return this._config.adOptions.footerCloseButtonMigrated?this._context.device===`phone`?this._config.adOptions.footerCloseButtonMobile:this._config.adOptions.footerCloseButtonDesktop:this._config.adOptions.footerCloseButton}};tO=w([D(`CloseButtonComponent`),x(),N(0,b(J)),N(1,b(W)),N(2,b(eS)),N(3,b(X)),N(4,b(Hs))],tO);let nO=class extends I{constructor(e){super(),this._config=e,C(this,`_name`,`cmscr`),C(this,`_comscoreId`,`6035453`),C(this,`_gdprEnabled`,!1),C(this,`_isValidTraffic`,!1),this._gdprEnabled=this._config.gdpr.enabled,this._isValidTraffic=!window.adthrive.invalidTraffic}init(){let e=this._config.ccpa.comscoreParams||`0`,t={c1:`2`,c2:this._comscoreId,cs_fpid:L.readExternalCookie(`_pubcid`)||L.readExternalLocalStorage(`_pubcid`),cs_fpit:`o`,cs_fpdm:`*null`,cs_fpdt:`*null`,options:{enableFirstPartyCookie:!0},...this._gdprEnabled&&{cs_ucfr:`1`},...this._config.ccpa.required&&{cs_ucfr:e}};window._comscore=window._comscore||[],window._comscore.push(t),this._import()}_import(){let e=`https://sb.scorecardresearch.com/cs/${this._comscoreId}/beacon.js`;if(document.querySelector(`[src^="${e}"]`)){E.event(`ComscoreTrackerComponent`,`init`,`Comscore script already loaded`);return}Ih(e).catch(e=>{let t=this._gdprEnabled?`GDPR`:`non-GDPR`;E.error(`ComscoreTrackerComponent`,`init`,`Error during Comscore beacon.js import in ${t} region: `,e)})}get enabled(){return!this._config.tkho.tracker.includes(this._name)&&this._isValidTraffic&&!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut}};nO=w([D(`ComscoreTrackerComponent`),x(),N(0,b(J))],nO);let rO=class extends V{init(){this._key=`ConfiantProperty`,this._lookup=`CNFTP`}run(){return super.run()}};rO=w([S()],rO);let iO=new Map([[1,{type:`manual`,description:`Deprecated`}],[2,{type:`creative`,description:`Creative-based detection`}],[3,{type:`provider_security`,description:`Domain-based detection for unsafe domains`}],[4,{type:`banned_domain`,description:`Domain-based detection for bannded domains`}],[5,{type:`provider_ibv`,description:`Domain-based detection for in-banner-video`}],[6,{type:`unsafejs`,description:`JavaScript-based detection for unsafe ads`}],[7,{type:`hrap`,description:`Domain-based detection for high risk ad platform domains`}],[10,{type:`adv_brand_safety`,description:`Ads that act as placeholders when a brand safety blocklist prohibits the original ad from displaying.`}]]),aO=class extends I{constructor(e,t,n,r,i){super(),this._config=e,this._confiantPropertyExperiment=t,this._creativeBlockingExperiment=n,this._creativeBlockEventBus=r,this._prebidMethods=i,C(this,`_name`,`conf`),C(this,`_confiantEnabledFeatureRollout`,void 0),C(this,`_confiantDisabledFeatureRollout`,void 0),this._confiantEnabledFeatureRollout=cn.isRolloutEnabled(`confiant-blocking-enabled`),this._confiantDisabledFeatureRollout=cn.isRolloutEnabled(`confiant-blocking-disabled`)}init(){let e=this._confiantPropertyExperiment.result??`mOinGM9MTu5v-Lto835XLhlrSPY`;this._confiantEnabledFeatureRollout&&(e=`wyN88rwU6FImxcXgha7IWE-FzsE`);let t=`https://cdn.confiant-integrations.net/${e}/gpt_and_prebid/config.js`;return window.confiant=window.confiant||{},window.confiant.callback=(e,t,n,r,i,a)=>{let o=iO.get(e),s=typeof a==`object`?a?.tp_crid:void 0;E.event(`ConfiantTrackerComponent`,`adBlocked`,{blockingTypeIntegerValue:e,blockingType:o?o.type:`unknown`,description:o?o.description:`unknown`,tagId:i,wrapperId:r,blockingId:t,isBlocked:n,...s&&{tpCrid:s}}),o?.type!==`adv_brand_safety`&&s&&this._extractCridForBlocking(s)},Ih(t)}get enabled(){let e=this._config,t=!e.gpc.gpcEnabled&&!e.ccpa.userOptedOut,n=!0,r=this._creativeBlockingExperiment.result===`ct`||this._creativeBlockingExperiment.result===`both`;return n=this._confiantDisabledFeatureRollout?!1:this._confiantEnabledFeatureRollout?!0:r,t&&n}_isPMPCrid(e){return this._prebidMethods.getAllWinningBids().find(t=>t.creativeId?.toString()===e&&!!t.dealId)!==void 0}_extractCridForBlocking(e){if(e.startsWith(`PB:`)||e.startsWith(`IM:`)){let t=e.split(`;`),n=t[t.length-1],r=this._isPMPCrid(n);n.endsWith(`-1`)?n=n.slice(0,-2):n.endsWith(`-video`)&&(n=n.slice(0,-6)),n&&this._creativeBlockEventBus.blockCreativeIds.emit({source:`confiant`,crids:new Set([{value:n,type:r?`pmp`:`om`}])})}}};aO=w([D(`ConfiantTrackerComponent`),x(),N(0,b(J)),N(1,b(rO)),N(2,b(Ir)),N(3,b(ch)),N(4,b(P))],aO);let oO=class extends I{constructor(e,t,n,r){super(),this._gam=e,this._config=t,this._gamEventBus=n,this._context=r,C(this,`_name`,`hawk`)}init(){this._gamEventBus.slotOnload.once(()=>{this.import().then(()=>this.syncData()).catch(e=>E.error(`HawkeyeTrackerComponent`,`init`,`slotOnload`,e))})}get enabled(){return!this._config.tkho.tracker.includes(this._name)&&!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut}async import(){return await Ih(`https://pghub.io/js/pandg-sdk.js`,!0)}async syncData(){let e={ccpa:this._config.ccpa.privacyString?this._config.ccpa.privacyString:null,bp_id:`cafemedia`};await window.Tapad.init(e,{name:`P&G`,pixelUrl:`https://pandg.tapad.com/tag`}).sync({iabc:this._config.marmalade.ortbSegments.get(`iabc`)||[],iaba:this._config.marmalade.ortbSegments.get(`iaba`)||[],lotamePanoramaId:_m(),gpid:this._context.gpid}),this._gam.setTargetingFlag(`het_sync`,[`1`])}};oO=w([D(`HawkeyeTrackerComponent`),x(),N(0,b(Z)),N(1,b(J)),N(2,b(X)),N(3,b(W))],oO);let sO=class extends I{constructor(e,t,n){super(),this._config=e,this._gdprEvents=t,this._gdprEnforcement=n,C(this,`_name`,`ats`)}init(){try{this._config.gdpr.enabled?this._gdprEvents.consentResponseCaptured.on(()=>{this._gdprEnforcement.checkConsentForVendor(this._config.gdpr.raptiveVendorId,[1]).then(e=>{e&&this._importATS()}).catch(()=>{E.error(`LiveRampAtsTrackerComponent`,`init`,`Failed to check consent for vendor`)})}):this._importATS()}catch(e){E.error(`LiveRampAtsTrackerComponent`,`init`,e)}}get enabled(){return this._config.liveRampAts.enabled&&!this._config.disableAds.all&&!this._config.tkho.tracker.includes(this._name)&&!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut}_setECSTags(){let e={},t=this._config.marmalade.mcmp;for(let n of t)e[n]=`mcmp`;window.__launchpad(`ecst`,e,e=>{})}_setListener(){window.addEventListener(`lrEnvelopePresent`,()=>{this._setECSTags()})}_importATS(){this._setListener(),Ih(this._config.liveRampAts.url).then(()=>{}).catch(e=>{E.error(`LiveRampAtsTrackerComponent`,`error importing liveramp with ATS`,e)})}};sO=w([D(`LiveRampAtsTrackerComponent`),x(),N(0,b(J)),N(1,b(mp)),N(2,b(gp))],sO);let cO=class extends I{constructor(e,t,n){super(),this._config=e,this._gamEventBus=t,this._context=n,C(this,`_name`,`nlsn`)}init(){try{this._gamEventBus.slotOnload.once(()=>{this.loadImage()})}catch(e){E.error(`NielsenTrackerComponent`,`init`,e)}}get enabled(){return Ct()&&!this._config.tkho.tracker.includes(this._name)&&!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut}loadImage(){let e=this._context.device,t=`https://secure-gl.imrworldwide.com/cgi-bin/m?am=3&at=view&rt=banner&st=image&cr=adthrive&ce=cafemedia`,n={phone:`nlsn290957`,tablet:`nlsn291137`,desktop:`nlsn291136`}[e],r={phone:`nlsn287186`,tablet:`nlsn287188`,desktop:`nlsn287187`},i=rp(this._context.savedReferrer);i&&(i.toLowerCase().includes(`instagram.com`)||i.toLowerCase().includes(`pinterest.com`))&&(n=r[e]),t+=`&ci=nlsnci542&ca=${n}&pc=${window.location.host}&r=${Date.now()}`,new Image().src=`${t}`}};cO=w([D(`NielsenTrackerComponent`),x(),N(0,b(J)),N(1,b(X)),N(2,b(W))],cO);let lO=class extends I{constructor(e){super(),this._config=e,C(this,`_name`,`pbmss`),C(this,`_publisherId`,`157333`),C(this,`_scriptUrl`,`https://ads.pubmatic.com/AdServer/js/publisher-esp.js`)}get enabled(){return!this._config.tkho.tracker.includes(this._name)&&!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut}init(){this._importTrackerScript().then(e=>{e instanceof HTMLScriptElement}).catch(e=>{E.error(`PubmaticTrackerComponent`,`init`,`Error importing Pubmatic script`,{error:e&&e.message})})}_importTrackerScript(){return window.pubmatic_esp=window.pubmatic_esp||{p:this._publisherId},Ih(this._scriptUrl)}};lO=w([D(`PubmaticTrackerComponent`),S(),N(0,b(J))],lO);let uO=[`.adthrive`,`.adthrive-ad`,`.adthrive-sidebar`],dO=class extends I{constructor(e,t,n){super(),this._config=e,this._gamEventBus=t,this._slotManagerEventBus=n,C(this,`_name`,`tgtaff`),C(this,`_accountId`,`2773249`),C(this,`_adId`,`81938`),C(this,`_configId`,`2092`),C(this,`_affDomain`,`goto.target.com`),C(this,`_targetDomain`,`target.com`),C(this,`_commonParams`,``),C(this,`_commonPath`,``),this._commonParams=Ut({subid1:this._config.site.id,subid2:location.href,sharedid:this._config.site.name}),this._commonPath=`${this._accountId}/${this._adId}/${this._configId}`}init(){try{let e=setTimeout(()=>{this.rewriteAllTargetLinksOnPage()},5e3);this._slotManagerEventBus.added.once(()=>{this._gamEventBus.slotOnload.once(()=>{e&&clearTimeout(e),this.rewriteAllTargetLinksOnPage()})})}catch(e){E.error(`TargetRewriteTrackerComponent`,`getAllTargetLinksOnPage`,e)}}rewriteAllTargetLinksOnPage(){let e=0;Array.prototype.map.call(document.querySelectorAll(`a[href*="${this._targetDomain}"]`),e=>e).filter(e=>this.isEligibleForRewrite(e)).forEach(t=>{this.fireImpression(t.href),this.replaceTargetLink(t),e++}),e&&E.event(`TargetRewriteTrackerComponent`,`logTargetRewrite`,{message:`targetRewrite`,countRewrite:e})}fireImpression(e){let t=this.getImpressionPixel(e);return new Image().src=t}getImpressionPixel(e){let t=`https://${this._affDomain}/i/${this._commonPath}?`,n=`U1|${this.getUUID()}`;t+=`_ir=${encodeURIComponent(n)}&`+this._commonParams+`&subid3=`+encodeURIComponent(e);let r=e.split(`?`);return r.length>1&&(t+=`&`+r[1]),t}getUUID(){return`${Jn().toString()}.${Math.random().toString(36).substring(2,15)}`}replaceTargetLink(e){let t=this.removeHashtagsFromUrl(e.href),n=encodeURIComponent(t);e.classList.add(`noskimlinks`,`norewrite`),e.href=`https://${this._affDomain}/c/${this._commonPath}?${this._commonParams}&subid3=${n}&u=${n}#donotlink`}removeHashtagsFromUrl(e){return e.split(`#`)[0]}isEligibleForRewrite(e){return this.isTargetLink(e)&&!this.shouldExcludeLink(e)}isTargetLink(e){let t=this.extractDomain(e.href);return t&&!t.includes(this._affDomain)}shouldExcludeLink(e){return uO.some(t=>e.matches(t))||e.matches(`.raptive-affiliate-ignore`)}extractDomain(e){let t=/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i.exec(e);return t&&t[1]||``}get enabled(){return!this._config.tkho.tracker.includes(this._name)&&!this._config.ccpa.enabled&&this._config.adOptions.targetAff&&!this._config.gpc.gpcEnabled&&!this._config.ccpa.userOptedOut}};dO=w([D(`TargetRewriteTrackerComponent`),x(),N(0,b(J)),N(1,b(X)),N(2,b($f))],dO);let fO=class extends I{constructor(e,t,n,r){super(),this._gpcConfig=e,this._ccpaConfig=t,this._tkho=n,this._gamEventBus=r,C(this,`_name`,`ttdt`)}init(){try{this._gamEventBus.slotOnload.once(()=>{this.loadImage()})}catch(e){E.error(`TheTradeDeskTrackerComponent`,`init`,e)}}get enabled(){return!this._tkho.tracker.includes(this._name)&&!this._gpcConfig.gpcEnabled&&!this._ccpaConfig.userOptedOut}loadImage(){new Image().src=`https://insight.adsrvr.org/track/evnt/?adv=z127r4i&ct=0:p21aj7j&fmt=3`}};fO=w([D(`TheTradeDeskTrackerComponent`),x(),N(0,b(mi)),N(1,b(U)),N(2,b(Fa)),N(3,b(X))],fO);let pO=class extends I{constructor(e,t){super(),this._gam=e,this._context=t}init(){let e=this.getReferrer();e!==null&&this._gam.setTargeting({key:`doc_ref`,value:e})}getReferrer(){let e=rp(this._context.savedReferrer);return e&&e.length&&L.setExpirableInternalLocalStorage(`adthrive_referrer`,e,{expiry:{value:30,unit:`minutes`}}),e}};pO=w([D(`TrafficSourceComponent`),x(),N(0,b(Z)),N(1,b(W))],pO);let mO=class extends I{constructor(e,t){super(),this._slotManagerEventBus=e,this._slots=t}init(){this._slotManagerEventBus.added.on(e=>{this._slots.get(e).forEach(e=>{e.element.classList.add(`adthrive-ad-debug`),e.element.addEventListener(`click`,()=>{console.warn(`%c Debug Info for ${e.id}`,`background: #6B65FF; color: #F0EDEB; padding: 1px; border-radius: 3px;`,e)})})})}get enabled(){let e=Dr(`at_ui_debug`);return e===`true`||e===`1`}};mO=w([D(`UIDebugComponent`),S(),N(0,b($f)),N(1,b(Y))],mO);let hO=class{constructor(){C(this,`wasClosed`,!1),C(this,`wasStarted`,!1),C(this,`totalTimeCollapsed`,0),C(this,`startedCollapsedTime`,void 0),C(this,`playerName`,void 0)}};hO=w([D(`CollapsibleVideoLoggingStore`),S()],hO);let gO=class{constructor(e){this._identityEventBus=e,C(this,`knownCookieKeys`,[`AMZN-Token`,`ccuid`,`ccsid`,`usprivacy`,`_pubcid`,`_pubcid_exp`,`connectId`,`lidid`,`TAPAD`,`panaoramaId`,`panaoramaId_expiry`,`krg_crb`,`krg_uid`,`cto_bundle`,`__li_idex_cache_e30`]),C(this,`cookieEvents`,[]),this._identityEventBus.dataCaptured.on(()=>{setTimeout(()=>this.calculateCookieSizes(`piiSubmitted`),2e3)})}init(){}calculateCookieSizes(e){let t=L.getAllCookies(),n=0,r=0;t.forEach(e=>{let t=new Blob([e.value]).size;this.knownCookieKeys.includes(e.name)?n+=t:r+=t}),this.cookieEvents.push({e,knownSize:n,unknownSize:r})}};gO=w([D(`CookieDataStorage`),S(),N(0,b($s))],gO);let _O=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`UserPageDataLogging`,this._lookup=`UPL`}};_O=w([S()],_O);let vO=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`UserPageDataPrivacyLogging`,this._lookup=`DATAPRIV`}};vO=w([S()],vO);let yO=class extends I{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f){super(),this._bootstrapConfig=e,this._cls=t,this._config=n,this._context=r,this._pageManager=i,this._spaEventBus=a,this._prebidMethods=o,this._userPageDataLoggingExperiment=s,this._userPageDataPrivacyLoggingExperiment=c,this._userPageDataLogEvents=l,this._collapsibleVideoLoggingStore=u,this._cookieDataStorage=d,this._slotManagerEventBus=f,C(this,`_userPrivacyData`,{}),C(this,`_timingData`,void 0),C(this,`_performanceTimingData`,{}),C(this,`_setupSlotManagerEventListeners`,async()=>{let{reasons:e}=this._config.disableAds,t=e.size!==0,n={requestingBids:null,requestedBids:null,displayed:null},r={...n,pageLoaded:!1},i=()=>{r={...r,...n}},a=(e,t)=>{r[e]=t,typeof r.requestingBids==`number`&&typeof r.requestedBids==`number`&&typeof r.displayed==`number`&&r.pageLoaded&&(this._setTimingData(r.requestingBids,r.requestedBids,r.displayed),i())};t?(r.requestedBids=0,r.requestingBids=0,r.displayed=0):(this._slotManagerEventBus.requestingBids.once(()=>a(`requestingBids`,$e())),this._slotManagerEventBus.requestedBids.once(()=>a(`requestedBids`,$e())),this._slotManagerEventBus.displayed.once(()=>a(`displayed`,$e()))),await Ah().then(()=>a(`pageLoaded`,!0))}),C(this,`_setupUserPageDataLogEventCallbacks`,()=>{z()&&this._userPageDataLogEvents.addCallbackToQueue([this._pageManager.visibilityChange],()=>{document.visibilityState===`hidden`&&this._logUserData()}),this._userPageDataLogEvents.addCallbackToQueue([this._pageManager.beforeUnload,this._pageManager.pageHide,this._spaEventBus.routeChanged],()=>void this._logUserData())}),C(this,`_getUserData`,()=>({...this._getBuildData(),device:this._context.device,gptv:googletag&&googletag.getVersion&&googletag.getVersion(),timePageOpen:$e()-this._config.timing.started,timeOnPage:this._config.timing.totalTimeOnPage,viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,video:{nonclose:!this._collapsibleVideoLoggingStore.wasClosed,playerName:this._collapsibleVideoLoggingStore.playerName,totalTimeCollapsed:this._collapsibleVideoLoggingStore.totalTimeCollapsed,wasStarted:this._collapsibleVideoLoggingStore.wasStarted},cookieEvents:this._cookieDataStorage.cookieEvents,...this._userPrivacyData,...!this._config.gdpr.enabled&&!this._config.ccpa.userOptedOut&&{uid1:this._getUIDForSource(`adserver.org`,this._prebidMethods.isPrebidLoaded())}})),C(this,`_getUIDForSource`,(e,t)=>{if(t){for(let t of this._prebidMethods.getUserIdsAsEids())if(t.source&&t.source===e&&t.uids&&t.uids.length>0&&t.uids[0].id)return t.uids[0].id}return null})}async init(){await this._setupSlotManagerEventListeners(),this._setupUserPageDataLogEventCallbacks(),this._logUserPrivacyData().catch(()=>{E.error(`_logUserPrivacyData: `,`Could not log user privacy.`)}),this._setLoadTimingProperties()}get enabled(){return this._userPageDataLoggingExperiment.result}_getBuildData(){let e=this._cls&&this._cls.buildDate;return{bundleBuildDate:window.adthrive.buildDate,...e?{clsBuildDate:e}:{}}}_setTimingData(e,t,n){let r=window.performance?.timing;if(r&&r.navigationStart!==0){let i={pageLoad:r.loadEventStart-r.navigationStart,domainLookup:r.domainLookupEnd-r.domainLookupStart,connect:r.connectEnd-r.connectStart,request:r.responseStart-r.requestStart,response:r.responseEnd-r.responseStart,navigation:r.fetchStart-r.navigationStart,domInteractive:r.domInteractive-r.navigationStart,domContentLoaded:r.domContentLoadedEventStart-r.navigationStart};if(Object.keys(i).map(e=>i[e]).every(e=>!isNaN(e)&&e>=0&&e<36e5)){this._setNonBlockingLibraryTimingData();let{reasons:r}=this._config.disableAds;this._timingData={...i,...this._config.timing.timingData,disableAds:r.size>0?[...r].join(`,`):`none`,cookieDeprecationLabel:this._config.fledge.cookieDeprecationLabel??`none`,auctionStarted:e,auctionFinished:t,displayed:n}}}}_setNonBlockingLibraryTimingData(){this._config.timing.setNonBlockingLibraryTimingData(this._bootstrapConfig.bootstrapResult)}async _logUserData(){await this._prebidMethods.waitForQueue(),this._cookieDataStorage.calculateCookieSizes(`userDataLogged`),this._userPageDataLogEvents.loggingData.emit(),this._userPageDataLogEvents.setUserPageData({...this._timingData&&{UserPageTimingData:this._timingData},UserPageDataLoggingComponent:this._getUserData(),performanceTimingData:this._performanceTimingData})}async _logUserPrivacyData(){this._userPageDataPrivacyLoggingExperiment.result&&(this._userPrivacyData=await this._getUserPrivacyData())}async _getUserPrivacyData(){return{gpc:`navigator`in window&&`globalPrivacyControl`in window.navigator?window.navigator.globalPrivacyControl:null,dcp:await this._getDataConsent()}}async _getDataConsent(){if(`dataConsentPreference`in document)try{return await document.dataConsentPreference()}catch{return null}return null}_getEventTiming(e,t){return(window.performance?.getEntriesByType(e).filter(t)||[])[0]??{}}_getEventTimingProperties(e,t,n){let r={},i=this._getEventTiming(e,t);return n.forEach(e=>{r[e]=i?.[e]??null}),r}_getEventRegex(e){switch(e){case`adsmin`:return/ads\.adthrive\.com\/sites\/.*\/ads\.min\.js\?.*/;case`marmalade`:return/ads\.adthrive\.com\/api\/.*\/marmalade\?.*/;case`floors`:return/ads\.adthrive\.com\/api\/.*\/raptiveFloors\.*/}return RegExp(``)}_setLoadTimingProperties(){let{duration:e}=this._getEventTimingProperties(`resource`,e=>e.name.includes(`adthrive.min.js`),[`duration`]),t=this._getEventRegex(`adsmin`),{duration:n,startTime:r}=this._getEventTimingProperties(`resource`,e=>t.test(e.name),[`duration`,`startTime`]),{duration:i,responseEnd:a}=this._getEventTimingProperties(`resource`,e=>e.name.includes(`gpt.js`),[`responseEnd`,`duration`]),o=this._getEventRegex(`marmalade`),{responseEnd:s}=this._getEventTimingProperties(`resource`,e=>o.test(e.name),[`responseEnd`]),c=this._getEventRegex(`floors`),{responseEnd:l}=this._getEventTimingProperties(`resource`,e=>c.test(e.name),[`responseEnd`]),u=Math.max(s,a,l),{domContentLoadedEventEnd:d,startTime:f,responseEnd:p,domInteractive:m,domContentLoadedEventStart:h,domComplete:g,loadEventStart:_,loadEventEnd:v}=this._getEventTimingProperties(`navigation`,e=>!!e,[`domContentLoadedEventEnd`,`startTime`,`responseEnd`,`domInteractive`,`domContentLoadedEventStart`,`domComplete`,`loadEventStart`,`loadEventEnd`]);this._performanceTimingData={durations:{adsMinLoadDuration:n,adCodeLoadDuration:e,gptLoadDuration:i},endTimes:{marmaladeEndTime:s,gptEndTime:a,floorsEndTime:l,domReadyEndTime:d},totalLoadTime:u-r,startTime:f,responseEnd:p,domInteractive:m,domContentLoadedEventStart:h,domContentLoadedEventEnd:d,domComplete:g,loadEventStart:_,loadEventEnd:v}}};yO=w([D(`UserPageDataLoggingComponent`),x(),N(0,b(on)),N(1,b(pr)),N(2,b(J)),N(3,b(W)),N(4,b(jr)),N(5,b(xc)),N(6,b(P)),N(7,b(_O)),N(8,b(vO)),N(9,b(Ma)),N(10,b(hO)),N(11,b(gO)),N(12,b($f))],yO);let bO=class extends I{constructor(e,t){super(),this._context=e,this._gam=t}init(){Object.keys(this._context.utm).forEach(e=>{let t=this._context.utm[e];this._gam.setTargeting({key:e,value:t})}),L.setExpirableInternalLocalStorage(`adthrive_utm`,this._context.utm,{expiry:{value:30,unit:`minutes`}})}};bO=w([D(`UTMComponent`),x(),N(0,b(W)),N(1,b(Z))],bO);let xO=class extends qe{constructor(...e){super(...e),C(this,`hidden`,new T)}};xO=w([S()],xO);let SO=class extends On{constructor(e,t,n){super(),this._siteExperiments=e,this._pubabgroup=t,C(this,`storagePrefix`,`se`),C(this,`_choices`,[]),C(this,`_result`,!1),C(this,`key`,hn.StickyOutstreamOnStickyPlayer),this.experimentConfig=this._siteExperiments.getSiteExperimentByKey(this.key),this.enabled&&this.experimentConfig&&Wr(n)&&(this._choices=this.experimentConfig.variants,this._result=this.run(),this.setExperimentTargeting())}run(){let e=this._choices[0].weight/100;return new rn(e).get()}setExperimentTargeting(){if(!this.enabled||!this.experimentConfig){E.error(`StickyOutstreamOnStickyPlayerPagesSiteExperiment`,`setExperimentTargeting`,`() => %o`,`Experiment targeting requires an experiment config`);return}let e=`${this.experimentConfig.key.toLowerCase()}-${this.experimentConfig.id}`,t=this._result?`on`:`off`;this._pubabgroup.set(e,t)}};w([R()],SO.prototype,`run`,null),SO=w([S(),N(0,b(Ln)),N(1,b(ln)),N(2,b(`AdThrive`))],SO);var CO=class extends I{constructor(e,t,n){super(),this._videoConfig=e,this._component=t,this._context=n,C(this,`_potentialPlayerMap`,void 0),C(this,`_device`,void 0),C(this,`_stickyRelatedOnPage`,!1),C(this,`_relatedMediaIds`,[]),this._device=It()?`desktop`:`mobile`,this._potentialPlayerMap=this.setPotentialPlayersMap()}setPotentialPlayersMap(){let e=this._videoConfig.players||[],t=this._filterPlayerMap();return t.stationaryRelated=e.filter(e=>e.type===`stationaryRelated`&&e.enabled),this._potentialPlayerMap=t,this._potentialPlayerMap}_filterPlayerMap(){let e=this._videoConfig.players,t={stickyRelated:[],stickyPlaylist:[],stationaryRelated:[]};return e&&e.length?e.filter(e=>e.devices?.includes(this._device)).reduce((e,t)=>(e[t.type]||(E.event(this._component,`constructor`,`Unknown Video Player Type detected`,t.type),e[t.type]=[]),t.enabled&&e[t.type].push(t),e),t):t}_checkPlayerSelectorOnPage(e){for(let t of this._potentialPlayerMap[e]){let e=this._getPlacementElement(t);if(e)return{player:t,playerElement:e}}return{player:null,playerElement:null}}_getOverrideElement(e,t,n){if(e&&t){let r=document.createElement(`div`);t.insertAdjacentElement(e.position,r),n=r}else{let{player:e,playerElement:t}=this._checkPlayerSelectorOnPage(`stickyPlaylist`);if(e&&t){let r=document.createElement(`div`);t.insertAdjacentElement(e.position,r),n=r}}return n}_shouldOverrideElement(e){let t=e.getAttribute(`override-embed`);return t===`true`||t===`false`?t===`true`:this._videoConfig.relatedSettings?this._videoConfig.relatedSettings.overrideEmbedLocation:!1}_checkPageSelector(e,t,n=[]){return e&&t&&n.length===0?(window.location.pathname!==`/`&&E.event(`VideoUtils`,`getPlacementElement`,Error(`PSNF: ${e} does not exist on the page`)),!1):!0}_getElementSelector(e,t,n){return t&&t.length>n?t[n]:(E.event(`VideoUtils`,`getPlacementElement`,Error(`ESNF: ${e} does not exist on the page`)),null)}_getPlacementElement(e){let{pageSelector:t,elementSelector:n,skip:r}=e,{valid:i,elements:a,...o}=Ps(t),{valid:s,elements:c,...l}=Ns(n);return t!==``&&!i?(E.error(`VideoUtils`,`getPlacementElement`,Error(`${t} is not a valid selector`),o),null):s?this._checkPageSelector(t,i,a)&&this._getElementSelector(n,c,r)||null:(E.error(`VideoUtils`,`getPlacementElement`,Error(`${n} is not a valid selector`),l),null)}_getEmbeddedPlayerType(e){let t=e.getAttribute(`data-player-type`);return(!t||t===`default`)&&(t=this._videoConfig.relatedSettings?this._videoConfig.relatedSettings.defaultPlayerType:`static`),this._stickyRelatedOnPage&&(t=`static`),t}_getMediaId(e){let t=e.getAttribute(`data-video-id`);return t?(this._relatedMediaIds.push(t),t):!1}_createRelatedPlayer(e,t,n,r){t===`collapse`?this._createCollapsePlayer(e,n):t===`static`&&this._createStaticPlayer(e,n,r)}_createCollapsePlayer(e,t){let{player:n,playerElement:r}=this._checkPlayerSelectorOnPage(`stickyRelated`),i=n||this._potentialPlayerMap.stationaryRelated[0];i&&i.playerId?(this._shouldOverrideElement(t)&&(t=this._getOverrideElement(n,r,t)),t=document.querySelector(`#cls-video-container-${e} > div`)||t,this._createStickyRelatedPlayer({...i,mediaId:e},t)):E.error(this._component,`_createCollapsePlayer`,`No video player found`)}_createStaticPlayer(e,t,n){if(this._potentialPlayerMap.stationaryRelated.length&&this._potentialPlayerMap.stationaryRelated[0].playerId){let r=this._potentialPlayerMap.stationaryRelated[0];this._createStationaryRelatedPlayer({...r,mediaOrPlaylistId:e},t,n)}else E.error(this._component,`_createStaticPlayer`,`No video player found`)}_shouldRunAutoplayPlayers(){return!!(this._isVideoAllowedOnPage()&&(this._potentialPlayerMap.stickyRelated.length||this._potentialPlayerMap.stickyPlaylist.length))}_setPlaylistMediaIdWhenStationaryOnPage(e,t){if(this._potentialPlayerMap.stationaryRelated.length&&this._potentialPlayerMap.stationaryRelated[0].playerId&&e&&e.length){let n=e[0].getAttribute(`data-video-id`);return n?{...t,mediaId:n}:t}return t}_determineAutoplayPlayers(e){let t=this._component,n=t===`VideoManagerComponent`,r=this._context;if(this._stickyRelatedOnPage){E.event(t,`stickyRelatedOnPage`,n&&{device:r&&r.device,isDesktop:this._device}||{});return}let{playerElement:i}=this._checkPlayerSelectorOnPage(`stickyPlaylist`),{player:a}=this._checkPlayerSelectorOnPage(`stickyPlaylist`);a&&a.playerId&&i?(a=this._setPlaylistMediaIdWhenStationaryOnPage(e,a),this._createPlaylistPlayer(a,i)):Math.random()<.01&&setTimeout(()=>{E.event(t,`noStickyPlaylist`,n&&{vendor:`none`,device:r&&r.device,isDesktop:this._device}||{})},1e3)}_initializeRelatedPlayers(e){let t=new Map;for(let n=0;n<e.length;n++){let r=e[n],i=r.offsetParent,a=this._getEmbeddedPlayerType(r),o=this._getMediaId(r);if(i&&o){let e=(t.get(o)||0)+1;t.set(o,e),this._createRelatedPlayer(o,a,r,e)}}}};let wO=UD({condition:()=>!1,delay:500,maxAttempts:8}),TO=e=>document.querySelector(`meta[name=${e}]`)?.content??null,EO=()=>(TO(`generator`)||``).includes(`Wix`)||!!window.wixPerformanceMeasurements||!!window[`wix-perf-measure`]||!!window.wixDevelopersAnalytics;var DO=class extends HTMLElement{static get observedAttributes(){return[`href`,`logo-src`]}constructor(){super(),C(this,`_href`,``),C(this,`_logoSrc`,``),C(this,`shadow`,void 0),this.shadow=this.attachShadow({mode:`open`})}attributeChangedCallback(e,t,n){n!==null&&(e===`href`&&(this._href=n),e===`logo-src`&&(this._logoSrc=n),this.render())}connectedCallback(){this.hasAttribute(`href`)&&(this._href=this.getAttribute(`href`)),this.hasAttribute(`logo-src`)&&(this._logoSrc=this.getAttribute(`logo-src`)),this.render()}render(){let e=`
      <a href="${this._href}" target="_blank">
        <span>Sponsored by</span>
        <img src="${this._logoSrc}" alt="Sponsor logo">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="white"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <line x1="7" y1="17" x2="17" y2="7"></line>
          <polyline points="7 7 17 7 17 17"></polyline>
        </svg>
      </a>
    `;this.shadow.innerHTML=`
      <style>
        :host {
          display: flex;
          height: 42px;
          box-sizing: border-box;
          z-index: 1000;
          background: white;
          width: 100%;
        }
 
        a {
          display: flex;
          align-items: center;
          text-decoration: none;
          color: inherit;
          gap: 0.4em;
          font-family: sans-serif;
          font-size: 0.5em;
          padding: 8px;
          width: 100%;
        }

        img {
          max-height: 10px;
          margin-left: 2px;
        }

        svg {
          width: 2em;
          height: 2em;
          flex-shrink: 0;
          background: black;
          margin-left: auto;
        }
      </style>
    `+e}},OO;let kO=OO=class{constructor(){C(this,`_adCountDownElement`,document.createElement(`div`)),C(this,`_canStartAdCountDown`,!1),C(this,`_count`,0),C(this,`_hardcodedTimeLeft`,void 0),C(this,`_builtInCountdownElements`,[`adAttribution`,`countdown`]),C(this,`_hiddenClassElement`,`adthrive-hidden`),this._adCountDownElement.classList.add(`adthrive-count-down`)}get canStartAdCountDown(){return this._canStartAdCountDown}addAdTimer(e){this._adCountDownElement.classList.add(this._hiddenClassElement),e.appendChild(this._adCountDownElement)}displayAdTimer(){this._adCountDownElement.classList.remove(this._hiddenClassElement)}hideAdTimer(){this._adCountDownElement.classList.add(this._hiddenClassElement),this._canStartAdCountDown=!1}setAdTimer(e,t,n){let{uiElements:r}=e?.ad;this._canStartAdCountDown=!(r?.length&&this._hasBuiltInCountdownElements(r))||t,!this._hardcodedTimeLeft&&t&&(this._hardcodedTimeLeft=n)}reset(){this._hardcodedTimeLeft=void 0,this._count=0}updateAdCountdown(e,t){let n=Math.round(e-t);if(n!==this._count&&n>=0){this._count=n;let e=this._hardcodedTimeLeft===void 0?n:this._hardcodedTimeLeft;this._updateCountdownText(e),this._hardcodedTimeLeft&&this._hardcodedTimeLeft--}else n<=0&&this.hideAdTimer()}_updateCountdownText(e){let t=this._hardcodedTimeLeft?OO.POD_COUNTDOWN_TEXT:OO.INDIVIDUAL_COUNTDOWN_TEXT;this._adCountDownElement.innerHTML=`${t} ${e}`}_hasBuiltInCountdownElements(e){return e.includes(this._builtInCountdownElements[0])&&e.includes(this._builtInCountdownElements[1])}};C(kO,`INDIVIDUAL_COUNTDOWN_TEXT`,`Ad ends in`),C(kO,`POD_COUNTDOWN_TEXT`,`Ads end in`),kO=OO=w([D(`AdCountDownTimer`)],kO);let AO=class{constructor({optimizeVideoPlayersForEarnings:e,isCollapsible:t,adPodAuctionCutoffSeconds:n,isMax30SecPodFeatureEnabled:r}){C(this,`_isCollapsible`,void 0),C(this,`_optimizeVideoPlayersForEarnings`,!1),C(this,`_isMax30SecPodFeatureEnabled`,!1),C(this,`_adPlayMap`,new Map),C(this,`_prerollNumber`,0),C(this,`_firstAdHasPlayed`,!1),C(this,`_prerollAdCountInPod`,1),C(this,`_adPodAuctionCutoffSeconds`,0),C(this,`_logPrefix`,`AdPodManager`),C(this,`_numberOfVideoContentPlayed`,0),C(this,`_totalAdPodDuration`,0),C(this,`_consecutiveUnfilledRequests`,0),C(this,`vpodnum`,0),this._optimizeVideoPlayersForEarnings=e,this._isCollapsible=!!t,this._adPodAuctionCutoffSeconds=n,this._isMax30SecPodFeatureEnabled=r}get adPlayMap(){return this._adPlayMap}get prerollNumber(){return this._prerollNumber}get adPodDuration(){return this._totalAdPodDuration}get adPodSize(){return this._prerollAdCountInPod}get canFallBackAuction(){return!this._isMax30SecPodFeatureEnabled&&this.adPodDuration<=30||this._isMax30SecPodFeatureEnabled&&this._prerollAdCountInPod===1}get firstAdHasPlayed(){return this._firstAdHasPlayed}setAdPlayMap(e,t){this._adPlayMap.set(e,t)}markFirstAdCompleted(){this._firstAdHasPlayed||=!0}reset(){this._adPlayMap=new Map,this.resetAdCountInPod()}resetAdCountInPod(){this._prerollAdCountInPod=0,this._totalAdPodDuration=0,this._numberOfVideoContentPlayed=0,this.resetUnfilledRequests()}prepareForNextAdPod(){this.resetAdCountInPod(),this.incrementSessionPrerollNumber(),this.vpodnum++}_incrementPrerollAdCountInPod(){this._prerollAdCountInPod++}incrementSessionPrerollNumber(){this._prerollNumber++,this._incrementPrerollAdCountInPod()}incrementVideoContentPlayCount(){this._numberOfVideoContentPlayed++}canApplyAdPodExperience(){return this._optimizeVideoPlayersForEarnings&&this._isCollapsible}canFetchNextAdInPod(){return!(this.adPodDuration>=this._adPodAuctionCutoffSeconds)}canPlayAdPodPrerollAd(){return!this._adPlayMap.has(this.prerollNumber)}isFirstInAdPod(){return this._prerollAdCountInPod===1}isLastInAdPod(){return this._prerollAdCountInPod>=4}get shouldFetchNextAd(){return this.shouldFetchNextAdAfterAdvancing()}shouldFetchNextAdAfterAdvancing(){return this._numberOfVideoContentPlayed>1||this.adPodDuration<=30}addCreativeDuration(e=30){this._totalAdPodDuration+=e}incrementUnfilledRequests(){this._consecutiveUnfilledRequests++}resetUnfilledRequests(){this._consecutiveUnfilledRequests>0&&(this._consecutiveUnfilledRequests=0)}hasMaxUnfilledRequestsReached(){return this._consecutiveUnfilledRequests>=4}get consecutiveUnfilledRequests(){return this._consecutiveUnfilledRequests}};AO=w([D(`AdPodManager`)],AO);let jO={AWAITING_START:1,AWAITING_FETCH_AD:2,AWAITING_SHOW_BUTTONS:3,AWAITING_ADVANCE:4},MO=class extends V{init(){this._key=`AdvancePlaylistTimer`,this._lookup=`advt`}};MO=w([S()],MO);var NO=class{constructor(e,t,n,r,i,a,o,s){this._parentElement=e,this._wasAdFetched=t,this._fetchAd=n,this._advanceToAd=r,this._advanceToContent=i,this._nextButtonClick=a,this._stayButtonClick=o,this._cancel=s,C(this,`_logPrefix`,`AdvancePlaylist`),C(this,`_buttons`,void 0),C(this,`_isVisible`,!1),C(this,`_state`,jO.AWAITING_FETCH_AD),C(this,`_lastVisibilityState`,document.visibilityState),C(this,`_intervalId`,void 0),C(this,`_startTime`,0),C(this,`_elapsedTime`,0),C(this,`_hiddenStartTime`,0),C(this,`_defaultAdvancePlaylistDuration`,30),C(this,`_fetchAdThreshold`,0),C(this,`_showButtonsThreshold`,0),C(this,`_advanceThreshold`,0),C(this,`_shouldAdvanceToContent`,!1),C(this,`_nextAdvancePlaylistDuration`,void 0),C(this,`_shouldUseCumulativeContentDuration`,!1),C(this,`_cumulativeContentDuration`,0),C(this,`_multiplier`,1),C(this,`_interactionHandler`,this._handleInteractation.bind(this)),C(this,`_adPodDuration`,0),C(this,`_adPodSize`,0),C(this,`_stateHandlers`,{[jO.AWAITING_START]:this._handleAwaitingStart.bind(this),[jO.AWAITING_FETCH_AD]:this._handleAwaitingFetchAd.bind(this),[jO.AWAITING_SHOW_BUTTONS]:this._handleAwaitingShowButtons.bind(this),[jO.AWAITING_ADVANCE]:this._handleAwaitingAdvance.bind(this)}),C(this,`_throttledKeydownHandler`,Ao((e,t)=>{[`Space`,`Enter`].includes(e.code)&&(e.preventDefault(),t())},100)),this._buttons=this._createButtons(),this._parentElement.appendChild(this._buttons),this._parentElement.addEventListener(`click`,this._interactionHandler),this._parentElement.addEventListener(`keyup`,this._interactionHandler),this._multiplier=B(y.resolve(MO).result,1)}start(e,t=30,n=1){this.isActive()||(this.reset(),this._startTime=Date.now(),e<this._defaultAdvancePlaylistDuration&&(E.event(this._logPrefix,`_shouldUseCumulativeContentDuration`,{contentDuration:e}),this._shouldUseCumulativeContentDuration=!0),this._adPodDuration||=Math.floor(t),this._adPodSize||=n,this._setupShouldAdvanceToContent(e,this._adPodDuration,this._adPodSize),this._setupThresholds(e,this._adPodDuration,this._adPodSize),document.addEventListener(`visibilitychange`,this._handleVisibilityChange.bind(this)),this._intervalId=window.setInterval(()=>this._handleTimeInterval(),200))}show(){this._buttons&&(this._buttons.style.display=`flex`,this._buttons.classList.add(`active`),this._isVisible=!0)}reset(e=!1){this._clearInterval(),this._hide(),this._state=jO.AWAITING_START,this._elapsedTime=0,this._startTime=0,this._hiddenStartTime=0,document.removeEventListener(`visibilitychange`,this._handleVisibilityChange.bind(this)),e&&(this._adPodDuration=0,this._adPodSize=0,this._nextAdvancePlaylistDuration=void 0,this._shouldAdvanceToContent=!1,this._shouldUseCumulativeContentDuration=!1,this._cumulativeContentDuration=0)}destroy(){this._parentElement.removeEventListener(`click`,this._interactionHandler),this._parentElement.removeEventListener(`keyup`,this._interactionHandler),this._buttons?.parentNode?.removeChild(this._buttons),this._buttons=void 0,document.removeEventListener(`visibilitychange`,this._handleVisibilityChange.bind(this))}isActive(){return this._intervalId!==void 0}_setupShouldAdvanceToContent(e,t,n){let r=n>1,i=t>this._defaultAdvancePlaylistDuration,a=t>e,o=!this._nextAdvancePlaylistDuration,s=t>e+this._cumulativeContentDuration;this._shouldAdvanceToContent=this._shouldUseCumulativeContentDuration?r&&s:r&&i&&a&&o,this._shouldAdvanceToContent&&!this._shouldUseCumulativeContentDuration&&(this._nextAdvancePlaylistDuration=Math.max(t-this._defaultAdvancePlaylistDuration,10))}_handleTimeInterval(){this._updateElapsedTime(),this._stateHandlers[this._state]?.()}_handleAwaitingStart(){this._state=this._shouldAdvanceToContent?jO.AWAITING_SHOW_BUTTONS:jO.AWAITING_FETCH_AD}_handleAwaitingFetchAd(){this._shouldFetchAd()&&(this._fetchAd(),this._state=jO.AWAITING_SHOW_BUTTONS)}_handleAwaitingShowButtons(){this._shouldShowButtons()&&(this.show(),this._state=jO.AWAITING_ADVANCE)}_handleAwaitingAdvance(){this._shouldAdvance()&&(this._shouldAdvanceToContent?(this._advanceToContent(),this.reset()):(this._advanceToAd(),this.reset(!0)))}_getAdvancePlaylistDuration(e,t,n){if(this._shouldAdvanceToContent){let t=this._shouldUseCumulativeContentDuration?Math.min(this._defaultAdvancePlaylistDuration,e):this._defaultAdvancePlaylistDuration;return this._shouldUseCumulativeContentDuration&&(this._cumulativeContentDuration+=t),this._multiplier*t}if(this._nextAdvancePlaylistDuration){let e=this._nextAdvancePlaylistDuration;return this._multiplier*e}if(t&&n&&n>1&&this._shouldUseCumulativeContentDuration&&this._cumulativeContentDuration>0){let e=Math.max(10,t-this._cumulativeContentDuration);return this._multiplier*e}if(t&&n&&n>1){let e=Math.max(15,t);return this._multiplier*e}if(t){let n=Math.max(15,Math.min(t,this._defaultAdvancePlaylistDuration)),r=Math.min(e,n);return this._multiplier*r}let r=Math.min(e,this._defaultAdvancePlaylistDuration);return this._multiplier*r}_setupThresholds(e,t,n){let r=this._getAdvancePlaylistDuration(e,t,n);this._fetchAdThreshold=r-10,this._showButtonsThreshold=r-5,this._advanceThreshold=r}_thresholdReached(e){return this._elapsedTime>=e-this._thresholdBufferForCumulativeDuration()&&this._elapsedTime<=e+.5}_thresholdBufferForCumulativeDuration(){return this._shouldUseCumulativeContentDuration&&this._state===jO.AWAITING_ADVANCE?.5:0}_shouldFetchAd(){return this._thresholdReached(this._fetchAdThreshold)&&!this._shouldAdvanceToContent&&!this._isVisible&&!this._wasAdFetched()}_shouldShowButtons(){return this._thresholdReached(this._showButtonsThreshold)&&!this._isVisible}_shouldAdvance(){return this._thresholdReached(this._advanceThreshold)&&this._isVisible}_getAdvanceType(){return this._shouldAdvanceToContent?`content`:`ad`}_updateElapsedTime(){this._elapsedTime=(Date.now()-this._startTime)/1e3}_clearInterval(){this._intervalId&&=(clearInterval(this._intervalId),void 0)}_handleVisibilityHidden(){this._hiddenStartTime=Date.now(),this._clearInterval()}_handleVisibilityVisible(){if(this._startTime===0)return;let e=Date.now()-this._hiddenStartTime;this._startTime+=e,this._updateElapsedTime(),this._intervalId=window.setInterval(()=>this._handleTimeInterval(),200)}_handleVisibilityChange(){let e=document.visibilityState;e!==this._lastVisibilityState&&(this._lastVisibilityState=e,e===`hidden`?this._handleVisibilityHidden():this._handleVisibilityVisible())}_createButtons(){let e=document.createElement(`div`);e.id=`next-stay-container`,e.style.display=`none`;let t=this._createButton(`next`,()=>this._nextButtonClick(this._shouldAdvanceToContent)),n=this._createButton(`stay`,()=>this._stayButtonClick());return e.appendChild(t),e.appendChild(n),e}_createButton(e,t){let n=document.createElement(`div`),r=document.createElement(`span`);return n.id=this._getButtonId(e),r.textContent=e,n.appendChild(r),n.onclick=t,n.onkeydown=e=>this._throttledKeydownHandler(e,t),n}_getButtonId(e){return`${e}-video`}_hide(){this._buttons&&(this._buttons.style.display=`none`,this._buttons.classList.remove(`active`),this._isVisible=!1)}_handleInteractation(e){if(e instanceof MouseEvent&&e.type!==`click`||e instanceof KeyboardEvent&&![`Space`,`Enter`,`ArrowLeft`,`ArrowRight`].includes(e.code)||!this.isActive())return;let t=e.composedPath(),n=[this._getButtonId(`next`),this._getButtonId(`stay`)];t.some(e=>n.includes(e.id))||this._cancel()}},PO=class{constructor(){C(this,`_orientationListener`,null),C(this,`_pageManager`,y.resolve(jr))}setupListener(e,t,n){let{tablet:r,desktop:i}=n,a=window.innerHeight>window.innerWidth;this._orientationListener=this._setResizeListener.bind(this,{device:t,desktopBreakpoint:i,tabletBreakpoint:r,originallyPortraitView:a,pageElement:e}),this._pageManager.resize.on(this._orientationListener)}_removeCLSMinHeight(e){e.parentElement?.style.removeProperty(`min-height`)}_setResizeListener({device:e,desktopBreakpoint:t,tabletBreakpoint:n,originallyPortraitView:r,pageElement:i}){let a=e===`phone`&&window.innerWidth>=n,o=e===`tablet`&&(window.innerWidth<=n||window.innerWidth>=t),s=e===`desktop`&&window.innerWidth<=t,c=a||o||s,l=r&&window.innerWidth>window.innerHeight,u=!r&&window.innerHeight>window.innerWidth;(c||l||u)&&(this._removeCLSMinHeight(i),this._orientationListener&&this._pageManager.resize.off(this._orientationListener),this._orientationListener=null)}};let FO=class extends V{constructor(...e){super(...e),C(this,`abgroup`,`acpod`)}init(){this._key=`AccompanyingContentAdPodDuration`,this._lookup=`ACPOD`}run(){return super.run()}};w([R()],FO.prototype,`run`,null),FO=w([S()],FO);let IO=class extends V{init(){this._key=`AdDurationControl`,this._lookup=`ADC`}};IO=w([S()],IO);let LO=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`JwBoost`,this._lookup=`JWB`}run(){return super.run()}};w([R()],LO.prototype,`run`,null),LO=w([S()],LO);let RO=class extends V{constructor(...e){super(...e),C(this,`locationMap`,{tc:`top-center`,bl:`bottom-left`,br:`bottom-right`})}init(){this._key=`VideoCollapsedLocations`,this._lookup=`SPLTV2`}get mobileLocation(){if(this.result&&this.result!==`off`)return this.locationMap[this.result]}};RO=w([S()],RO);let zO=class extends _C{constructor(e,t){super(),this._siteExperiments=e,this._pubabgroup=t,C(this,`_positions`,[`bottom-left`,`bottom-right`,`bottom-center`,`top-left`,`top-right`,`top-center`]),C(this,`_choices`,[]),C(this,`_mappedChoices`,[]),C(this,`_resultValidator`,e=>this._positions.includes(e)),C(this,`_result`,`control`),C(this,`key`,hn.MobileStickyPlayerPosition),this.experimentConfig=this._siteExperiments.getSiteExperimentByKey(this.key),this.enabled&&this.experimentConfig&&(this._choices=this.experimentConfig.variants,this._mappedChoices=this._mapChoices(),this._result=this.run(),this.setExperimentTargeting())}run(){return super.run()}setExperimentTargeting(){if(!this.enabled||!this.experimentConfig||!this._isValidResult(this._result)){E.error(`MobileStickyPlayerPositionSiteExperiment`,`setExperimentTargeting`,`() => %o`,`Experiment targeting requires an experiment config and valid result`);return}let e=`${this.experimentConfig.key.toLowerCase()}-${this.experimentConfig.id}`,t=`${this._result}`;this._pubabgroup.set(e,t)}_mapChoices(){return this._choices.map(({weight:e,value:t})=>({weight:e,choice:String(t)}))}};w([R()],zO.prototype,`run`,null),zO=w([S(),N(0,b(Ln)),N(1,b(ln))],zO);let BO=class extends V{init(){this._key=`RaptiveInstreamRerequestOnError`,this._lookup=`RIROE`}};BO=w([S()],BO);let VO=class extends V{init(){this._key=`RaptiveTearDownPlayer`,this._lookup=`RPTD`}};VO=w([S()],VO);let HO=class extends V{init(){this._key=`staleBufferTime`,this._lookup=`RPSPDBT`}run(){return super.run()}};HO=w([S()],HO);var UO=class{constructor(e,t){this.eventBus=t,C(this,`_container`,document.createElement(`DIV`)),this._container.className=`adthrive-loading-spinner-container`,this._container.style.display=`none`,this._container.appendChild(this._createSpinner()),e.appendChild(this._container)}_createSpinner(){let e=document.createElement(`DIV`);return e.className=`adthrive-loading-spinner`,e}get el(){return this._container}show(){this._container.style.display=`inline-flex`}hide(){this._container.style.display=`none`,this.eventBus.hidden.emit()}},WO=class e{constructor(e){C(this,`_logPrefix`,`RaptivePlayer`),C(this,`_jsonld`,null),C(this,`_mediaid`,null),C(this,`_el`,null),this._mediaid=e.mediaid,this._jsonld=this.transform(e)}render(e=document.head){this._el&&this._el.remove(),this._el=document.createElement(`script`),this._el.type=`application/ld+json`,this._el.dataset.mediaid=this._mediaid||``,this._el.textContent=JSON.stringify(this._jsonld,null,2),e.appendChild(this._el)}transform(t){return{"@context":`https://schema.org`,"@type":`VideoObject`,name:t.title||`Untitled`,description:t.description||``,thumbnailUrl:t.images?.map(e=>e.src)||[],uploadDate:e.formatDate(t.pubdate||0),duration:e.formatDuration(t.duration||0),contentUrl:t.sources?.find(e=>e.type===`video/mp4`)?.file||``,embedUrl:t.link||``}}static formatDuration(e){let t=Math.floor(e/60),n=e%60;return`PT${t}M${n}S`}static formatDate(e){return new Date(e*1e3).toISOString()}};let GO=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`VideoAuctionDurationFallbackExperiment`,this._lookup=`VADF`}};GO=w([S()],GO);var KO=class{constructor(e,t,n,r){C(this,`_isCollapsible`,void 0),C(this,`_name`,void 0),C(this,`_prebidMethods`,void 0),C(this,`_fallbackDuration`,void 0),C(this,`_firstBidDuration`,15),C(this,`_currentAuctionNumber`,0),C(this,`_amzBids`,[]),C(this,`_prebidBids`,[]),C(this,`_prioritizeShorterVideoAds`,!1),C(this,`_optimizeForEarnings`,!1),C(this,`_hasFallenBack`,!1),C(this,`_enabledViaExperiment`,!1),C(this,`_logPrefix`,`VideoAuctionManager`),C(this,`_amznAdUnitName`,void 0),C(this,`_config`,void 0),this._isCollapsible=!!r,this._name=e,this._config=n,this._prebidMethods=t,this._fallbackDuration=n.video.maxDuration,this._prioritizeShorterVideoAds=!n.gdpr.enabled&&n.adOptions.prioritizeShorterVideoAds,this._optimizeForEarnings=n.adOptions.optimizeVideoPlayersForEarnings,this._enabledViaExperiment=y.resolve(GO).result,this._amznAdUnitName=this._getInitialAmznAdUnitName()}beforeBidRequest(e=!1,t=!0){this.enabled&&(!e&&this._currentAuctionNumber===1?this._setupFirstAuctionAdUnits():this._isSecondAuctionWithFallback(e,t)&&this._setupSecondAuctionAdUnits())}get enabled(){return this._enabledViaExperiment&&this._optimizeForEarnings&&this._prioritizeShorterVideoAds&&this._isCollapsible}get currentAuctionNumber(){return this._currentAuctionNumber}get hasFallenBack(){return this._hasFallenBack}get amznAdUnitName(){return this._amznAdUnitName}setAmznBids(e){this._amzBids=e}setPrebidBids(e){this._prebidBids=e}incrementCurrentAuctionNumber(){this._currentAuctionNumber++}reset(){this._hasFallenBack=!1,this._currentAuctionNumber=0,this._amzBids=[],this._prebidBids=[],this._amznAdUnitName=this._getInitialAmznAdUnitName()}_getAmazonHighestBidData(e){let t=this._config.amazon.availableBids.get(e);if(!t)return;let n=t.pmpCpm&&t.cpm<t.pmpCpm,{amznbid:r,amzniid:i,bidder:a,cpm:o,mediaType:s,size:c,slotID:l,pmpAmznBid:u,pmpAmazoniid:d,pmpBidder:f,pmpCpm:p,pmpDeal:m,pmpMediaType:h,pmpSize:g}=t;return{amznbid:n?u:r,amzniid:n?d:i,bidder:n?f:a,cpm:n?p:o,mediaType:n?h:s,size:n?g:c,slotID:l,...n&&m&&{deal:m}}}getTopVideoBid(e,t){let n=(this._prebidMethods.getBidResponsesForAdUnitCode(t)||{}).bids.filter(t=>{let n=t.ttl||300,r=t.responseTimestamp+n*1e3>new Date().getTime(),i=t&&t.status!==`rendered`,a=!0;return e&&t.maxDuration&&(a=t.maxDuration===e.max_ad_duration/1e3),r&&i&&a}).sort((e,t)=>t.cpm-e.cpm)[0],r=this._getAmazonHighestBidData(this._name),i=r?.cpm??0,a=n?.cpm??0;return i>a?r:n}_setupFirstAuctionAdUnits(){let e=this._getInitialAmznAdUnitName();this._updatePrebidAdUnitForNextAuction(this._firstBidDuration),this._updateAmznAdUnitForNextAuction(e)}_setupSecondAuctionAdUnits(){this._updatePrebidAdUnitForNextAuction(this._fallbackDuration),this._updateAmznAdUnitForNextAuction(this._name),this._hasFallenBack=!0}_getInitialAmznAdUnitName(){return this.enabled?`${this._name}_15s`:this._name}_updateAmznAdUnitForNextAuction(e){this._amznAdUnitName=e}_updatePrebidAdUnitForNextAuction(e){let t=this._prebidMethods.getAdUnit(this._name);t?.mediaTypes?.video&&(t.mediaTypes.video.maxduration=e)}_shouldIncrementMaxDuration(){if(this._currentAuctionNumber===0)return!1;let e=this._prebidBids.length===0,t=this._amzBids.length===0;return e&&t}_isSecondAuctionWithFallback(e,t){return e||this._currentAuctionNumber===2&&this._shouldIncrementMaxDuration()&&t}},qO=(e,t=100,n)=>new Promise((r,i)=>{window[e]&&r(window[e]);let a,o=setInterval(()=>{window[e]&&(n&&a&&clearTimeout(a),clearInterval(o),r(window[e]))},t);n&&(a=window.setTimeout(()=>{clearInterval(o),i()},n))}),JO=class e{constructor(e){C(this,`_logPrefix`,`HlsManager`),C(this,`_sdkVersion`,`1.4.12`),C(this,`_src`,`https://cdn.jsdelivr.net/npm/hls.js@${this._sdkVersion}/dist/hls.light.min.js`),C(this,`_scriptElId`,`raptive-hls`),C(this,`_integrityHash`,`sha384-XAJJQ2R4Pf0ZH2rqTMz+G7DAbEpZPAstOOQu/Wb8fkMEDa3EhcCDK5i1hbuF89zi`),C(this,`_config`,void 0),C(this,`_fatalErrorCallback`,void 0),C(this,`_hls`,null),C(this,`_videoEl`,void 0),C(this,`_setupComplete`,!1),this._config=e.config,this._fatalErrorCallback=e.fatalErrorCallback,this._videoEl=e.videoEl,this._loadScript()}async init(){if(await qO(`Hls`,5e3),!window.Hls?.isSupported()){this._videoEl.canPlayType(`application/vnd.apple.mpegurl`)||E.error(this._logPrefix,`HLS is not supported`);return}let e=this._getConfig();this._hls=new window.Hls(e),this._registerEvents()}async _loadScript(){if(Object.prototype.hasOwnProperty.call(window,`Hls`)||document.getElementById(this._scriptElId))return Promise.resolve();if(e._loadingPromise)return e._loadingPromise;e._loadingPromise=this._importScript();try{await e._loadingPromise}catch(t){return e._loadingPromise=null,E.error(this._logPrefix,`failed to import HLS script`,t),Promise.reject(t)}}_importScript(){return new Promise((e,t)=>{let n=this._createScript();n.addEventListener(`error`,()=>t()),n.addEventListener(`load`,()=>e()),document.body.appendChild(n)})}_createScript(){let e=document.createElement(`script`);return e.id=this._scriptElId,e.type=`text/javascript`,e.src=this._src,e.defer=!0,e.async=!0,e.integrity=this._integrityHash,e.crossOrigin=`anonymous`,e}isSupported(){return window.Hls?.isSupported()??!1}loadSource(e){this._hls?.loadSource(e),this._hls?.attachMedia(this._videoEl),this._registerEvents()}setMaxBufferLength(e){this._hls&&!this._config.maxMaxBufferReset&&this._hls.config.maxMaxBufferLength!==e&&(this._hls.config.maxBufferLength=e)}reset(){!this._hls||!window.Hls||(this._hls.destroy(),this._hls=new window.Hls,this._setupComplete=!1)}_getConfig(){return{backBufferLength:this._config.backBufferLength,maxMaxBufferLength:this._config.maxMaxBufferLength,maxBufferSize:this._config.maxBufferSize,maxBufferLength:this._config.maxBufferLength,frontBufferFlushThreshold:this._config.frontBufferThreshold}}_registerEvents(){this._setupComplete||!this._hls||!window.Hls||(this.setMaxBufferLength(1),this._hls.on(window.Hls.Events.ERROR,this._onError.bind(this)),this._setupComplete=!0)}_onError(e,t){t.fatal&&(E.error(this._logPrefix,`_onError`,{event:e,data:t}),this._handleFatalHLSError(e,t))}_handleFatalHLSError(e,t){if(E.error(this._logPrefix,`_handleFatalHLSError`,{event:e,data:t}),!(!this._hls||!window.Hls))switch(t.type){case window.Hls.ErrorTypes.MEDIA_ERROR:this._hls?.recoverMediaError();break;case window.Hls.ErrorTypes.NETWORK_ERROR:default:this._fatalErrorCallback();break}}};C(JO,`_loadingPromise`,null);var YO=class e extends CS{constructor(e,t,n,r=1,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,ee,te,ne,re){super(n,i,a,o,s,c,u,d,t,v,re),this._directSoldInterscrollerAdEventBus=e,this._id=t,this._mediaIdCount=r,this._mediaOrPlaylistId=i,this._context=l,this.name=f,this._isCollapsible=p,this._prebidMethods=m,this._auctionManagers=h,this._prebidEventBus=g,this._videoEventBus=_,this._playerNumber=v,this._loadingSpinnerEventBus=ee,this._collapseSettings=te,this._playlistPlayerMediaId=ne,C(this,`type`,`RaptivePlayer`),C(this,`collapseCollection`,null),C(this,`nextMediaId`,void 0),C(this,`jwPlayerSegments`,void 0),C(this,`plcmt`,void 0),C(this,`impressionId`,Qo()),C(this,`_logPrefix`,`RaptivePlayer`),C(this,`_adCountDown`,void 0),C(this,`_winningBidDetails`,null),C(this,`_adDurationLogged`,!1),C(this,`_adFetched`,!1),C(this,`_adHasLoadedPromise`,new sS),C(this,`_adKickoffCompletePromise`,new sS),C(this,`_adsDisabled`,!1),C(this,`_advancePlaylist`,void 0),C(this,`_auctionManager`,void 0),C(this,`_stalePlayerTimeoutBuffer`,void 0),C(this,`_adDetails`,null),C(this,`_adPlaying`,!1),C(this,`_bidMarkedOnCurrentAd`,!1),C(this,`_canTearDown`,!1),C(this,`_didTearDown`,!1),C(this,`_closeButton`,void 0),C(this,`_contentSpecificPlaylistId`,null),C(this,`_currentAdDurationWithBuffer`,0),C(this,`_currentAdTime`,0),C(this,`_defaultAdDuration`,30),C(this,`_disableAdsEventBus`,void 0),C(this,`_eventsToSkipLogging`,[`volume`]),C(this,`_firstAdCompletePromise`,new sS),C(this,`_hlsManager`,void 0),C(this,`_isAdvancePlaylistEnabled`,!1),C(this,`_isProgrammaticPause`,!0),C(this,`_isProgrammaticPlay`,!0),C(this,`_isVideoEnded`,!1),C(this,`_jwBoostExperiment`,void 0),C(this,`_loadingSpinner`,void 0),C(this,`_mobileStickyPlayerPositionSiteExperiment`,void 0),C(this,`_mobileStickyPlayerPositionCoreExperiment`,void 0),C(this,`_playerState`,j.Unstarted),C(this,`_videoContentObject`,void 0),C(this,`_playlistIndex`,0),C(this,`_prebidAuctionManager`,void 0),C(this,`_prerollAdUrl`,``),C(this,`_reInitAttempts`,0),C(this,`_state`,j.Unstarted),C(this,`_stalePlayerTimeoutId`,null),C(this,`_stickyElement`,void 0),C(this,`_tearDownAfterNextAd`,!1),C(this,`_tearDownPlayerTimeout`,0),C(this,`_tearDownTimer`,null),C(this,`_topBackgroundElement`,null),C(this,`_topCollapseVideoTitleElement`,void 0),C(this,`_transactionId`,``),C(this,`_userIdTargetingData`,[]),C(this,`_userIdComponent`,void 0),C(this,`_sspUserSyncComponent`,void 0),C(this,`_videoAdUnit`,void 0),C(this,`_videoCloseButtonComponent`,void 0),C(this,`_videoLink`,``),C(this,`_videoStarted`,!1),C(this,`_videoTitle`,``),C(this,`_videoTitleElement`,void 0),C(this,`_wasSeeking`,!1),C(this,`_wrapperBar`,void 0),C(this,`_wrapperText`,void 0),C(this,`_raptiveInstreamRerequestOnErrorResult`,void 0),C(this,`_retryAttempts`,0),C(this,`_maxRetries`,void 0),C(this,`_playlistMaxRetries`,4),C(this,`_relatedPlayerMaxRetries`,2),C(this,`_stalePlayerBufferTimeExperiment`,void 0),C(this,`_erroredOutCreativeIds`,new Map),C(this,`_topCenterBackgroundColor`,`black`),C(this,`_adPodManager`,void 0),C(this,`_handlingAdError`,!1),C(this,`_adDurationControlExperiment`,void 0),C(this,`_slickHeartbeatPresent`,!1),C(this,`_translateX`,0),C(this,`_translateY`,0),C(this,`_playerHasPreviouslyUncollapsed`,!1),C(this,`_preventCollapseUntilInView`,!1),C(this,`_lastAuctionBidDetails`,void 0),C(this,`_isGamCalled`,!1),C(this,`_outsideGamRenderTriggered`,!1),C(this,`_bidWonData`,{topBid:{},vprenum:0,vastErrorCode:0}),C(this,`_metadata`,null),C(this,`_isMetadataEnabled`,!1),C(this,`_isMax30SecPodFeatureEnabled`,!1),C(this,`_eligibleFloorComponents`,[]),C(this,`_appliedFloorComponents`,[]),C(this,`_isAcAlwaysStickyEnabled`,!1),C(this,`_lastCollapseMobileSubType`,null),C(this,`_playerCollapsedByDirectSoldInterscroller`,!1),C(this,`_handleAllAdsComplete`,async()=>{this._shouldUseHardcodedAdPodDuration||this._adCountDown.hideAdTimer(),await this._loadHlsSourceForFirstContent()}),C(this,`_handleContentResumeRequested`,async()=>{if(this._shouldUseHardcodedAdPodDuration||this._adCountDown.hideAdTimer(),await this._loadHlsSourceForFirstContent(),this._videoStarted=!1,this._handlingAdError){E.event(this._logPrefix,`_handleContentResumeRequested`,`PrematureContentResumeRequested`,this._playerType);return}if(this._adPodManager.canApplyAdPodExperience()&&this._adPodManager.canPlayAdPodPrerollAd()){this._runPrerollAdInAdPod();return}this._adCountDown.hideAdTimer(),this._adCountDown.reset(),this._tearDownAfterNextAd&&(this._incrementPlaylistIndex(),this._tearDownPlayer()),this._continuePlayingNextContent()}),C(this,`_makeGamCall`,async()=>{await this._videoEventBus.auctionsCompleted.legacyEmit([this]),this._prerollAdUrl=await this._getPrerollAdUrl(),this.imaManager?.requestAd({adTagUrl:this._prerollAdUrl}),this._adPodManager.setAdPlayMap(this.prerollNum,!0),this._isGamCalled=!0,this._outsideGamRenderTriggered=!1}),C(this,`_continuePlayingNextContent`,async()=>{await this._loadHlsSourceForFirstContent(),this._isAcAlwaysStickyEnabled&&this._handleCollapsingPlayer(),this._handlingAdError=!1,this._adPlaying=!1,this.isFirstPlay?(await this._hlsManager.init(),await this._initializeHlsOrMp4()):(this._hlsManager.setMaxBufferLength(600),this.setNextVideo());let e=this._shouldStartAdvancePlaylist();this.isFirstPlay=!1,!this._adsDisabled&&this._reInitAttempts<1&&(this._removeInstream(),this.imaManager?.reInitIMA(),this._reInitAttempts++),this._resetAdVars(),this._programmaticPlayVideo({logEvent:!1}).then(async()=>{this._adjustStylesForContentPlayback(),this._logRaptivePlayerEvent(`Play`);let{adPodDuration:t,adPodSize:n}=this._adPodManager;e&&this._advancePlaylist?.start(this._videoElement.duration,t,n),this._adPodManager.canApplyAdPodExperience()&&this._adPodManager.incrementVideoContentPlayCount(),await VC(1),this.imaManager?.adsLoader?.contentComplete()}).catch(()=>{})}),C(this,`_loadHlsSourceForFirstContent`,async()=>{this.isFirstPlay&&(this._firstAdCompletePromise.resolve(),await this._firstAdCompletePromise.promise)}),this._isRelatedPlayer()&&this._config.video.setupAdvanceRelatedExperiment(!1),this.plcmt=sh(this._config.video.plcmtUnits,this)??2,this._disableAdsEventBus=y.resolve(Rr),this._isMetadataEnabled=!cn.isRolloutEnabled(`disableJwpSeo`),this._isMax30SecPodFeatureEnabled=!this._config.adOptions.longerVideoAdPod,this._stalePlayerBufferTimeExperiment=y.resolve(HO),this._stalePlayerTimeoutBuffer=B(this._stalePlayerBufferTimeExperiment.result,10),this._isAcAlwaysStickyEnabled=cn.isRolloutEnabled(`ac-always-sticky`),this._raptiveInstreamRerequestOnErrorResult=y.resolve(BO).result,this._maxRetries=this._isAutoInjectedPlayer()?this._playlistMaxRetries:this._relatedPlayerMaxRetries,this._userIdComponent=y.resolve(ih),this._sspUserSyncComponent=y.resolve(zp),this._videoCloseButtonComponent=y.resolve(rE),this._mobileStickyPlayerPositionSiteExperiment=y.resolve(zO),this._mobileStickyPlayerPositionCoreExperiment=y.resolve(RO),this._jwBoostExperiment=y.resolve(LO),this._prebidAuctionManager=this._auctionManagers.getPrebidAuctionManager(),this._adCountDown=y.resolve(kO),this._adDurationControlExperiment=y.resolve(IO),this._auctionManager=new KO(f,m,c,this._isCollapsible),this._hlsManager=this._createHlsManager(),this._onBeforeRequestBids(),this._setupPlayer(),this._setupListeners(),this._loadingSpinner=new UO(this._playerContainer,this._loadingSpinnerEventBus),this._loadingSpinnerEventBus.hidden.on(()=>{this.collapseCollection&&$.handleScroll(this.collapseCollection)}),this._adPodManager=new AO({optimizeVideoPlayersForEarnings:c.adOptions.optimizeVideoPlayersForEarnings,isCollapsible:this._isCollapsible,adPodAuctionCutoffSeconds:this.getAdPodAuctionCutoffSeconds(),isMax30SecPodFeatureEnabled:this._isMax30SecPodFeatureEnabled}),this.ready.on(()=>this._handlePlayerReady())}get prerollNum(){return this._adPodManager.prerollNumber}get eligibleFloorComponents(){return this._eligibleFloorComponents}set eligibleFloorComponents(e){this._eligibleFloorComponents=e}get appliedFloorComponents(){return this._appliedFloorComponents}set appliedFloorComponents(e){this._appliedFloorComponents=e}get muted(){return this._videoPlayerControls?.muted}hide(){this._playerContainer.classList.add(`raptive-player-hidden`)}show(){this._playerContainer.classList.remove(`raptive-player-hidden`)}refreshImpressionId(){this.impressionId=Qo()}_isAutoInjectedPlayer(){return this._playerType===k.AutoInjected}getAdPodAuctionCutoffSeconds(){if(this._isCollapsible&&this._config.adOptions.optimizeVideoPlayersForEarnings&&!this._isMax30SecPodFeatureEnabled){let e=y.resolve(FO).result;if(e!==void 0)return e}return this._isMax30SecPodFeatureEnabled?16:46}async _handlePlayerReady(){await this.getPlayerContent(),this._setupMetadata(),this._logRaptivePlayerEvent(`Embed`),this._collapseSettings&&this._createCollapsibleCollection(),this._isAutoInjectedPlayer()&&new PO().setupListener(this._pageElement,this._context.device,this._config.site.breakpoints),this._autoplay&&this._kickoffAdPlayback()}async _kickoffAdPlayback(){this._loadingSpinner.show();let e=this._didTearDown,t=this._config.gdpr;!t.consentCaptured&&t.enabled&&await this.waitForConsent(),this._startTearDownTimer(),this._autoplay?this._loadingSpinner.show():this._logRaptivePlayerEvent(`CTP-initiated`),e||await this._fetchLinearAd(),this.collapseCollection?this._triggerPlayFirstAd(this.collapseCollection):this._programmaticPlayVideo(),this._checkVideoClose()&&(this._state=j.Closed)}_setupPlayer(){this._setupCollapseListeners(),this._setupContentSpecificPlaylists(),this._setupMatchMedia(),this._setupCollapse(),this._setupTitleContainer(),this._setupAdvancePlaylist(),this._adCountDown.addAdTimer(this._playerContainer),this._setupTearDown(),this._setupDataAttributes()}_createHlsManager(){return new JO({videoEl:this._videoElement,config:this._config.video,fatalErrorCallback:this._hlsFatalErrorCallback.bind(this)})}_isRelatedPlayer(){return this._isEmbeddedStationary()||this._playerType===k.RelatedSticky}_isFirstRelatedPlayerVideo(){return this._isRelatedPlayer()&&this._playlistIndex===0}_getPlaylistIdForLogger(){return this._isFirstRelatedPlayerVideo()?null:this._playlistId}_setupMetadata(){if(!this._isMetadataEnabled||this._metadata||!this._isRelatedPlayer()||!this._videoContentObject)return;let e=this._videoContentObject.playlist[0];this._metadata=new WO(e),this._metadata.render()}_setupTearDown(){(this._playerType===k.Related&&this._config.video.advancePlaylist||this._isCollapsible)&&(this._tearDownPlayerTimeout=y.resolve(VO).result??0,this._canTearDown=this._tearDownPlayerTimeout>0,this._getPlaylistIdForLogger())}_setupDataAttributes(){this._playerId&&(this._playerContainer.dataset.playerId=this._playerId,this._playerContainer.dataset.name=this.name)}_setupCollapse(){if(this._collapseSettings){this._isTopCenterWithTitle()||this._playerContainer.appendChild(this._createPlayerCloseButton()),this._handleTitleContainerOnCollapseAndUnCollapse(),this._collapsePlayerLogic(),this._createCollapsibleCollection();let e=this._collapseSettings.title;if(this._isAutoInjectedPlayer()&&e){let t=document.createElement(`h3`);t.innerText=e,t.className=`adthrive-player-title`,t.id=`adthrive-collapse-title`;let n=this._container.firstChild;n?this._container.insertBefore(t,n):this._container.appendChild(t)}}}_setupMatchMedia(){if(window.matchMedia){let e=window.matchMedia(`only screen and (max-width: ${this._config.site.breakpoints.desktop-1}px)`);e.addListener(this._handleWidthBreak.bind(this)),this._handleWidthBreak(e)}}_setupAdvancePlaylist(){let{playlistPlayer:e,relatedPlayer:t}=this._config.video.advancePlaylist;this._isAdvancePlaylistEnabled=this._isAutoInjectedPlayer()?e.enabled:t.enabled,!(!this._isAdvancePlaylistEnabled||this._adsDisabled)&&(this._advancePlaylist=new NO(this._playerContainer,()=>this._adFetched,()=>void this._handleAdvancePlaylistFetchAd(),this._handleAdvancePlaylistAdvanceToAd.bind(this),this._handleAdvancePlaylistAdvanceToContent.bind(this),this._handleAdvancePlaylistNextButtonClick.bind(this),this._handleAdvancePlaylistStayButtonClick.bind(this),this._handleAdvancePlaylistCancel.bind(this)))}_setupContentSpecificPlaylists(){let e=this._config.video.contentSpecificPlaylists,t=e&&Ls(e);this._getPlaylistIdForLogger(),t&&t.playlistId&&(this._contentSpecificPlaylistId=t.playlistId)}_handleTitleContainerOnCollapseAndUnCollapse(){this._videoEventBus.videoCollapsed.on(e=>{e.playerContainer===this.collapseCollection?.playerContainer&&(this._videoDescriptionDiv.classList.add(`adthrive-display-none`),this._videoTitleDiv.classList.add(`adthrive-small-text`))}),this._videoEventBus.videoUnCollapsed.on(()=>{this._videoDescriptionDiv.classList.remove(`adthrive-display-none`),this._videoTitleDiv.classList.remove(`adthrive-small-text`)})}_setupTitleContainer(){this._config.video.removeVideoTitleWrapper?this._playerContainer.classList.add(`adthrive-player-without-wrapper-text`):this._createVideoContentTitle()}async _handleAdvancePlaylistFetchAd(){this._adPodManager.prepareForNextAdPod(),this._reInitAttempts=0,await this._fetchLinearAd()}_handleAdvancePlaylistAdvanceToAd(){this._handleVideoElementEnded()}_handleAdvancePlaylistAdvanceToContent(){this._programmaticPauseVideo({pauseContent:!0,logEvent:!1}),this._continuePlayingNextContent()}_handleAdvancePlaylistNextButtonClick(e=!1){let t={playerType:this._playerType,mediaId:this.mediaOrPlaylistId,playlistIndex:this._playlistIndex};E.event(this._logPrefix,`nextButtonClicked`,t),e?this._handleAdvancePlaylistAdvanceToContent():this._handleAdvancePlaylistAdvanceToAd()}_handleAdvancePlaylistStayButtonClick(){let e={playerType:this._playerType,mediaId:this.mediaOrPlaylistId,playlistIndex:this._playlistIndex};E.event(this._logPrefix,`stayButtonClicked`,e),this._advancePlaylist?.reset()}_handleAdvancePlaylistCancel(){if(this._adPlaying)return;let e={playerType:this._playerType,mediaId:this.mediaOrPlaylistId,playlistIndex:this._playlistIndex};E.event(this._logPrefix,`advancePlaylistCancelled`,e),this._advancePlaylist?.reset()}_setWrapperBar(){this._wrapperBar=this._playerPosition.querySelector(`.adthrive-wrapper-bar`)}_shouldStartAdvancePlaylist(){return this._isAdvancePlaylistEnabled?this.isFirstPlay&&this._isRelatedPlayer()?this._isEmbeddedStationary()?!1:this._config.video.advancePlaylist.relatedPlayer.applyToFirst:!0:!1}_isEmbeddedStationary(){return this._playerType===k.EmbeddedStationary}_createVideoContentTitle(){this._isMobileTopCenterCollapse()?this._addTopCenterWrapper():this._addPlayerWithoutWrapper()}_isTopCenterWithTitle(){return!this._config.video.removeVideoTitleWrapper&&this._isMobileTopCenterCollapse()}_checkVideoClose(){return this._collapseSettings&&this._collapseSettings.saveVideoCloseState&&this._config.video.videoWasClosed}_prepareToPausePlayer(){this._handleAdvancePlaylistCancel(),this._loadingSpinner.hide(),this._videoPlayerControls?.toggleControlsFullWidth(!0),this._videoPlayerControls?.setPlayButtonState(`play`),this.collapseCollection&&$.handleOtherVideoPlaying(this.collapseCollection)}async _triggerPlayFirstAd(e){await this._adHasLoadedPromise.promise,$.handleScroll(e)}_collapsePlayerLogic(){this.collapsible&&(this._setWrapperBar(),this._wrapperBar&&this._wrapperBar.style.setProperty(`display`,`flex`),this._isMobileTopCenterCollapse()&&this._createTopCenterBackground(this._playerPosition),this._stickyElement=null)}_shouldShufflePlaylist(){let{hasContentSpecificPlaylist:e,contentSpecificPlaylistshuffle:t,defaultPlaylistShuffle:n}=this._config.video.jwPlaylistObj;return e&&t||!e&&n}_shuffleKeepingFirstItem(e){let[t,...n]=e,r=Ms.shufflePlaylist(n);return[t,...r]}_updatePlaylistItemsWithShuffle(){if(!this._videoContentObject||!this._videoContentObject.playlist||this._videoContentObject.playlist.length<2||!this._shouldShufflePlaylist())return;let e=this._videoContentObject.playlist;this._videoContentObject.playlist=this._isRelatedPlayer()||this._playlistPlayerMediaId?this._shuffleKeepingFirstItem(e):Ms.shufflePlaylist(e)}async getPlayerContent(){this._videoContentObject=await this._getVideoContent(),this._updatePlaylistItemsWithShuffle(),this._setVideoElementAttributes()}async _initializeHlsOrMp4(){let e=this._getCurrentVideoHlsSource();if(e&&this._hlsManager.isSupported())this.isFirstPlay&&await this._firstAdCompletePromise.promise,this._hlsManager.loadSource(e);else if(e&&this._videoElement.canPlayType(`application/vnd.apple.mpegurl`))this._videoElement.src=e;else{E.event(this._logPrefix,`_initializeHlsOrMp4`,`falling back to mp4`);let e=this._getVideoUsingIndex().sources;this._setMp4Source(e)}}_setMp4Source(e){let t=this._getLowestBitrateMp4Rendition(e);if(t){this._videoElement.src=t;return}E.error(this._logPrefix,`_setMp4Source`,{message:`No mp4 sources found`})}_getLowestBitrateMp4Rendition(e){let t;for(let n of e){if(n.type!==`video/mp4`)continue;(!t||n.bitrate&&t.bitrate&&n.bitrate<t.bitrate)&&(t=n)}return t?.file}_hlsFatalErrorCallback(){let e=this._getVideoUsingIndex();if(!e){E.error(this._logPrefix,`_hlsFatalErrorCallback`,{message:`No video found`});return}let t=e.sources.filter(e=>e.type===`video/mp4`),n=this._videoElement.currentTime;this._hlsManager.reset(),t.length>0&&this._switchToMp4Source(n,t)}_switchToMp4Source(e,t){this._setMp4Source(t),this._videoElement.currentTime=e,this._videoElement.load(),this._advancePlaylist?.reset(),this._programmaticPlayVideo({logEvent:!1}).then(()=>{(this._isMobile||this._isTablet)&&this._videoPlayerControls?.hideControls(),this._shouldStartAdvancePlaylist()&&this._advancePlaylist?.start(this._videoElement.duration),this._toggleTitle(!0),this._videoPlayerControls?.toggleProgressBar(!0)}).catch(()=>{})}_getVideoUsingIndex(e=this._playlistIndex){let t=this._videoContentObject;if(t)return t?t.playlist[e]:void 0}_getNextIndex(){let e=this._videoContentObject;if(e)return e.playlist.length-1===this._playlistIndex||this.isFirstPlay?0:this._playlistIndex+1}_incrementPlaylistIndex(){let e=this._getNextIndex();e!==void 0&&(this._playlistIndex=e)}setNextVideo(){this._videoContentObject&&(this._incrementPlaylistIndex(),this._setVideoElementAttributes(),this._initializeHlsOrMp4())}_setVideoElementAttributes(){let e=this._getCurrentVideo();e&&(this._videoPlayerControls?.setTracks(e.tracks),this._config.video.removeVideoTitleWrapper||this._setVideoTitle(e),this._videoElement.poster=this.isFirstPlay?e.image:``,this._videoElement.controls=!1,this._videoElement.preload=`metadata`)}_getCurrentVideo(){return this._videoContentObject?.playlist[this._playlistIndex]}_getCurrentVideoHlsSource(){let e=this._getCurrentVideo()?.sources;if(e)return e.find(e=>e.type===`application/vnd.apple.mpegurl`)?.file}_setVideoTitle(e){let{title:t,link:n}=e;this._videoTitle=t,this._videoLink=n,this._topCollapseVideoTitleElement&&(this._topCollapseVideoTitleElement.innerHTML=this._videoTitle),this._videoTitleDiv.innerHTML=`<span class='adthrive-video-text-cutoff'>${t}</span>`,this._videoDescriptionDiv.innerHTML=`<span class='adthrive-video-text-cutoff'>${e.description}</span>`;let r=this._linkProvidedByPublisher(this._videoLink);if(this._toggleLearnMoreLink(r),r&&this._wrapperTitleWrapperElement){this._wrapperTitleWrapperElement?.querySelector(`svg`)?.remove();let e=this._createLinkIcon(this._playlistId);this._wrapperTitleWrapperElement.appendChild(e),this._wrapperTitleWrapperElement.href=n,this._wrapperTitleWrapperElement.target=`_blank`,this._wrapperTitleWrapperElement.onclick=this._handleTitleClick.bind(this),this._videoTitleOverlayContainer.prepend(this._wrapperTitleWrapperElement),this._wrapperTitleWrapperElement.classList.remove(`adthrive-no-pointer-events`)}else this._wrapperTitleWrapperElement&&(this._wrapperTitleWrapperElement?.querySelector(`svg`)?.remove(),this._wrapperTitleWrapperElement.classList.add(`adthrive-no-pointer-events`))}_toggleLearnMoreLink(e){let t=document.getElementById(`${this._playlistId}-learn-more-link`);if(!t)return;let n=`raptive-player-learn-more-link-active`;e?t.classList.add(n):t.classList.remove(n)}_updateAdUnitMediaId(e){let t={playerID:this._playerId,mediaID:this.nextMediaId};e.ortb2Imp={...e.ortb2Imp,ext:{...e.ortb2Imp?.ext,data:{...e.ortb2Imp?.ext?.data,jwTargeting:t}}},this._prebidMethods.updateAdUnit(e.code,e)}_onBeforeRequestBids(){this._prebidEventBus.beforeRequestBids.on(e=>{e.forEach(e=>{this._prebidMethods.addToQueue(()=>this._setTargetingData(e))})})}_setTargetingData(e){let t=e.code===this.name;if(!t)return;let n=this._userIdComponent.getTargetingData(),r=this._sspUserSyncComponent.getTargetingData(),i=[...n,...r];i&&(this.userIdTargetingData=i);let a=(e.ortb2Imp&&e.ortb2Imp.ext&&e.ortb2Imp.ext.tid)??``;t&&a&&(this.transactionId=a)}_setupCollapseListeners(){this._collapseSettings&&($.classesToggled.on(()=>{this._handleResizeAd()}),$.collapseEvent.on(()=>{this._handleResizeAd(),this._handleTransformForCollapse()}),$.uncollapseEvent.on(()=>{this._handleResizeAd()}))}_setupListeners(){if(this.collapsible){let e=y.resolve(Pr);e.footerResponseReceived.on(this._handleFooterResponseReceivedEvent.bind(this)),this._getCollapseMobileSubType().includes(`bottom`)&&(e.footerHeightChanged.on(e=>this._handleFooterHeightChange(e)),e.footerVideoRibbonStateChanged.on(e=>this._handleFooterVideoRibbonStateChange(e)))}this._disableAdsEventBus.disableAds.on(e=>void this._disableAds(e),{handleEventsAlreadyEmitted:!0}),this._directSoldInterscrollerAdEventBus.adOnPage.on(()=>this._handleDirectSoldInterscrollerOnPage()),this._directSoldInterscrollerAdEventBus.adRemoved.on(()=>this._handleDirectSoldInterscrollerRemoved()),this.kickoffAdPlayback.on(this._kickoffAdPlayback.bind(this)),this.imaManager?.adLoaded.on(this._handleAdLoaded.bind(this)),this.imaManager?.adStarted.on(this._handleAdStart.bind(this)),this.imaManager?.adProgress.on(this._handleAdProgress.bind(this)),this.imaManager?.adPause.on(this._handleAdPause.bind(this)),this.imaManager?.adPlay.on(this._handleAdPlay.bind(this)),this.imaManager?.adError.on(this._handleAdError.bind(this)),this.imaManager?.adImpression.on(this._handleAdImpression.bind(this)),this.imaManager?.log.on(this._handleLogEvent.bind(this)),this.play.on(this._handleVideoElementPlay.bind(this)),this.pause.on(this._handleVideoElementPause.bind(this)),this.seeked.on(this._handleVideoElementSeeked.bind(this)),this.seeking.on(this._handleVideoElementSeeking.bind(this)),this.timeupdate.on(this._handleVideoElementTimeUpdate.bind(this)),this.ended.on(this._handleVideoElementEnded.bind(this)),this.imaManager?.allAdsCompleted.on(this._handleAllAdsComplete.bind(this)),this.imaManager?.contentResumeRequested.on(this._handleContentResumeRequested.bind(this)),this._spaListeners.push(this._eventProxy.resize.on(this._handleResizeAd.bind(this))),this._collapseSettings&&this._spaListeners.push(this._eventProxy.scroll.on(this._handleScroll.bind(this))),this._videoPlayerControls?.videoActionEvents.on(e=>this._listenForPlayerEventsToLog(e)),this._listenForLargeVastError()}_listenForLargeVastError(){this._prebidEventBus.vastExceededLimit.on(e=>{let t=e.bids?.[0];if(!t)return;let{adId:n,bidder:r,creativeId:i,meta:a}=t,{maxSizeAllowed:o,responseSize:s}=e,c={meta:a,bidder:r,adId:n,creativeId:i,responseSize:s,maxSizeAllowed:o};E.error(this._logPrefix,`listenForLargeVastError`,c)})}_listenForPlayerEventsToLog(e){let{action:t,context:n,details:r}=e,i=this._getPlaylistIdForLogger(),a=this._videoContentObject?.playlist?.[this._playlistIndex]?.mediaid,o={playerType:this._playerType,mediaId:a,playlistId:i,siteId:this._config.site.id,playerId:this._playerId,mediaIdCount:`${this._mediaIdCount||0}`,context:n,...r};this._eventsToSkipLogging.includes(t)||E.event(this._logPrefix,t,o)}get collapsible(){return this._isCollapsible}get isPlayerType(){return this._playerType}get transactionId(){return this._transactionId}set transactionId(e){this._transactionId=e}get vp(){return this.prerollNum<=1?this.prerollNum:this.prerollNum<=9?2:3}get retryAttempts(){return this._retryAttempts}set userIdTargetingData(e){this._userIdTargetingData=e}get userIdTargetingData(){return this._userIdTargetingData}set videoAdUnit(e){this._videoAdUnit=e}get videoAdUnit(){return this._videoAdUnit}get mediaOrPlaylistId(){return this._mediaOrPlaylistId}get vpodnum(){return this._adPodManager.canApplyAdPodExperience()?this._adPodManager.vpodnum:void 0}fetchVideoContent(e,t){let n=`https://cdn.jwplayer.com/v2/${e}/${t}`;return this._isEmbeddedStationary()?Rs(n):Rs(Ms.addMaxResolutionQueryParam(n))}async _prependEmbeddedMedia(e){let t=this._isRelatedPlayer()?this._mediaOrPlaylistId:this._playlistPlayerMediaId;if(t){let n=await this.fetchVideoContent(`media`,t);e.playlist.unshift(n.playlist[0])}}async _handleAdvancePlaylist(e){let t=await this._config.video.jwPlaylistObj.playlist;this._isAdvancePlaylistEnabled&&(e.playlist=e.playlist.concat(t.playlist))}async _getVideoContent(){try{let t=this._isRelatedPlayer()&&!this._contentSpecificPlaylistId?`media`:`playlists`,n=this._contentSpecificPlaylistId||this._mediaOrPlaylistId,r=await this.fetchVideoContent(t,n);return(!r.playlist||r.playlist.length===0)&&(E.error(this._logPrefix,`_getVideoContent`,`Empty playlist detected, using fallback playlist`,{originalMediaId:n}),r=await this.fetchVideoContent(`playlists`,e.FALLBACK_PLAYLIST_ID)),!this._isRelatedPlayer()&&!this._playlistPlayerMediaId||(this._contentSpecificPlaylistId||this._playlistPlayerMediaId?await this._prependEmbeddedMedia(r):await this._handleAdvancePlaylist(r)),r}catch{}}_getSegmentsForNextContent(){let e=this._getNextIndex();return this._videoContentObject?.playlist?.[e]?.jwpseg??[]}_enrichBidsWithJwTargeting(){if(this._jwBoostExperiment.result){if(!this._videoAdUnit?.bids){this._videoEventBus.videoAdUnitAdded.once(()=>{this._enrichBidsWithJwTargeting()});return}this.jwPlayerSegments=this._getSegmentsForNextContent(),this._videoAdUnit.bids.filter(qS).forEach(e=>this._applyJwTargetingToBid(e,this.jwPlayerSegments))}}_applyJwTargetingToBid(e,t){let n=e.rtd||{},r={jwplayer:{...n.jwplayer,targeting:{content:{id:`jw_${this.nextMediaId}`},segments:t}}};e.rtd={...n,...r}}_getFormattedAdDetails(e){let t=this._getAdDetailsFromAd(e);return t?{...this._winningBidDetails,adId:t.adId,wrapperIds:t.adWrapperIds,gamCreativeId:t.adWrapperCreativeIds[t.adWrapperCreativeIds.length-1],gamLineItemId:t.adWrapperIds[t.adWrapperIds.length-1],wrapperCreativeIds:t.adWrapperCreativeIds,vastCreativeId:t.creativeId,mediaFileURL:t.mediaUrl,adUnitName:this.name,tag:this._prerollAdUrl,isEmpty:!1,wrapperSystems:t.adWrapperSystems,duration:t.duration}:null}async _handleAdLoaded(e){if(this.isFirstPlay&&this._adHasLoadedPromise.resolve(),this._config.video.logAdLifeCycle&&E.event(this._logPrefix,`_handleAdLoaded`,this._playerType,this._getEventInfo(e)),this._addWinningBidDetails(),this._adDetails=this._getFormattedAdDetails(e),this.imaManager?.adPlayReady||await this._awaitAdReady(),this._adKickoffCompletePromise.resolve(),this._adsDisabled){this._continuePlayingNextContent();return}if(this._videoPlayerControls?.toggleProgressBar(!1),this.imaManager?.prematureAdPlay){this.imaManager?.setPrematureAdPlay(!1),this._handleContentResumeRequested();return}else this.imaManager?.playAdInStream();this._setStaleAdDetection(`adLoaded`)}async _disableAds(e){e.has(`all_page`)&&(this._adsDisabled=!0,await this._adKickoffCompletePromise.promise,this._advancePlaylist?.destroy(),this._advancePlaylist=void 0,this._videoPlayerControls?.toggleProgressBar(!0),this.imaManager?.disable(),this._adPlaying&&this._continuePlayingNextContent())}_handleCollapsingPlayer(){this.isFirstPlay&&this.collapseCollection&&!this.collapseCollection.playbackStarted&&!this.collapseCollection.playerCollapsed&&($.collapse(this.collapseCollection),this.collapseCollection.playerState=j.CollapsedPlay)}_handleAdStart(e){this._isAcAlwaysStickyEnabled&&this._handleCollapsingPlayer(),this.imaManager?.adPlayReady||E.event(this._logPrefix,`_handleAdStart`,`PrematureStart`,this._getEventInfo(e)),this._videoPlayerControls?.setPlayButtonState(`pause`),this._retryAttempts=0,this._adPodManager.canApplyAdPodExperience()&&this._adPodManager.resetUnfilledRequests(),this._clearStaleTimers(),this._handleResizeAd();let t=this._isMax30SecPodFeatureEnabled?30:60;this._adCountDown.setAdTimer(e,!!this._shouldUseHardcodedAdPodDuration,t),this._adPodManager.markFirstAdCompleted(),this._adCountDown.canStartAdCountDown&&this._adCountDown.displayAdTimer(),this.collapseCollection&&(this.collapseCollection.playbackStarted=!0,this._handleScroll()),this._videoPlayerControls?.setMediaStarted(!0),(this._isMobile||this._isTablet)&&this._videoPlayerControls?.showControls(),this._videoPlayerControls?.toggleControlsFullWidth(!1),this._addWinningBidDetails(),this._adDetails=this._getFormattedAdDetails(e),this._currentAdDurationWithBuffer=(this._adDetails&&this._adDetails.duration||e.duration||this._defaultAdDuration)+this._stalePlayerTimeoutBuffer,this._setStaleAdDetection(`adStart`);let n=this._adDetails||{};this._eventProxy.emitVideoSlotRenderedEvent(n),this._checkRenderedAdDetails(),this._adPlaying=!0,this._adPodManager.addCreativeDuration(this._adDetails?.duration),this._adPodManager.canApplyAdPodExperience()&&this._requestNextAdAuctionInPod(),this._toggleTitle(!1),this._loadingSpinner.hide()}_handleAdProgress(e){if(!this.canPlay){try{this._prepareToPausePlayer(),this._programmaticPauseVideo({logEvent:!0,pausedByOtherPlayer:!0})}catch(e){E.error(this._logPrefix,`handleAdProgress`,`Error trying to pause player`,e)}return}let{duration:t,position:n}=e;if(this._adCountDown.canStartAdCountDown&&this._adCountDown.updateAdCountdown(t,n),this._currentAdTime=n,this._config.video.logAdDuration&&!this._adDurationLogged){let e={adDuration:t,roundedAdDuration:Math.round(t)};E.event(this._logPrefix,`_handleAdProgress`,`VideoAdDuration`,e),this._adDurationLogged=!0}}_handleAdImpression(e){this._outsideGamRenderTriggered&&this._eventProxy.loggingBidWon.emit(this._bidWonData),this._handlingAdError=!1,this._isGamCalled=!1;let t=this._getFormattedAdDetails(e)??{};this._eventProxy.emitVideoImpressionEvent({videoAdDetails:t,player:this}),this._config.video.logAdLifeCycle&&E.event(this._logPrefix,`_handleAdImpression`,this._playerType,this._getEventInfo(e))}_handleAdPause(){if(this._clearStaleTimers(),this.imaManager?.adPlay.once(e=>{this._currentAdTime!==0&&(this._currentAdDurationWithBuffer=(this._getFormattedAdDetails(e)?.duration||this._defaultAdDuration)+this._stalePlayerTimeoutBuffer,this._setStaleAdDetection())}),this.collapseCollection){if(this._isProgrammaticPause)this._isProgrammaticPause=!1;else if(this.collapseCollection){if(this.collapseCollection?.playerState===j.Closed)return;this.collapseCollection.playerState=this.collapseCollection.playerCollapsed?j.UserPauseCollapsed:j.UserPauseUncollapsed}}}_handleAdPlay(){if(this._isProgrammaticPlay)this._isProgrammaticPlay=!1;else if(this.collapseCollection){if(this.collapseCollection?.playerState===j.Closed)return;this.collapseCollection.playerState=this.collapseCollection.playerCollapsed?j.CollapsedPlay:j.UncollapsedPlay}}async _runPrerollAdInAdPod(){this._loadingSpinner.show(),this._adFetched||(this._adPodManager.incrementSessionPrerollNumber(),await this._doubleRequestVideoBids()),this._resetIMA(),await this._makeGamCall(),this._resetAdVars(),this.imaManager?.adReady.emit(),this.imaManager?.playAd()}_maxRetriesReached(){let e=this._raptiveInstreamRerequestOnErrorResult===`vpr`&&this.prerollNum>5,t=this._raptiveInstreamRerequestOnErrorResult===`vpr2`&&this._retryAttempts>=2,n=this._retryAttempts>=this._maxRetries;return e||t||n}_resetIMA(){this._reInitAttempts=0,this._removeInstream(),this.imaManager?.reInitIMA()}async _adFailedLogic(){let e=this._maxRetriesReached(),t=this._adPodManager.canApplyAdPodExperience(),n=this._adPodManager.hasMaxUnfilledRequestsReached();if(e||this._raptiveInstreamRerequestOnErrorResult===`off`||t){if(n){this._continuePlayingNextContent();return}this._adPodManager.canFetchNextAdInPod()?(this._adFetched=!1,await this._runPrerollAdInAdPod()):this._continuePlayingNextContent();return}this._retryAttempts+=1,this._prebidMethods.getHighestCpmBids(this.name).length||(this._auctionManager.beforeBidRequest(!0),await this.requestVideoBids([this])),this._resetIMA(),this._makeGamCall(),this._loadingSpinner.show()}async _awaitAdReady(){return new Promise(e=>{this.imaManager?.adReady.once(()=>{e()})})}_isGAMServerFailure(e){return this._isGamCalled&&e.code===lt.FAILED_TO_REQUEST_ADS}async _handleAdError(e){this._handlingAdError=!0,this.imaManager?.adPlayReady||await this._awaitAdReady(),this._adKickoffCompletePromise.resolve(),this._clearStaleTimers();let t=this._prerollAdUrl;this._bidMarkedOnCurrentAd=!1,this._adDetails||=(this._addWinningBidDetails(),{...this._winningBidDetails,adUnitName:this.name,tag:t,isEmpty:!0});let n={...e,...this._getPlayerVersions(),...this._getErrorLogAdDetails()};if(E.error(this._logPrefix,`vastError`,this._playerType,n),this._shouldUseHardcodedAdPodDuration||this._adCountDown.hideAdTimer(),this._adsDisabled){this._continuePlayingNextContent();return}if(this._isGAMServerFailure(e)){let t=this.getMinMaxDurationsForGAM(),n=this._auctionManager.getTopVideoBid(t,this.name);if(n){this._bidWonData={topBid:n,vprenum:this.prerollNum,vastErrorCode:e.code||-1},this._isGamCalled=!1,this._outsideGamRenderTriggered=!0,this._videoEventBus.triggerRenderVideoAdOutsideGam.emit({player:this,topBid:n}),n&&`adId`in n&&this._prebidMethods.markWinningBidAsUsed({adUnitCode:this.name,adId:n.adId});return}}this._outsideGamRenderTriggered=!1,this._checkRenderedAdDetails(!0),this._checkIfEmptyResponse(e),e.code===900&&this._eventProxy.emitVideoSlotRenderedEvent(this._adDetails),this._adFailedLogic()}_checkIfEmptyResponse(e){(e.code===lt.VAST_EMPTY_RESPONSE||e.code===lt.VAST_NO_ADS_AFTER_WRAPPER)&&this._adPodManager.canApplyAdPodExperience()&&this._adPodManager.incrementUnfilledRequests()}_handleLogEvent(e){let t=e.getAdData()?.adError?.getMessage();if(E.event(this._logPrefix,`_handleLogEvent`,`LOG`,`non-fatal error occured for ad id: ${this._adDetails?.adId||`unavailable`}`,{error:t,adDetails:this._adDetails}),!this._adDetails||!this._prebidAuctionManager){E.event(this._logPrefix,`_handleLogEvent`,`LOG`,`no ad details available`,{error:t});return}let n=this._markPrebidBidAsUsed(this._adDetails.gamCreativeId,this._prebidAuctionManager,this._adDetails.wrapperSystems);if(this._bidMarkedOnCurrentAd){let e=n?`marked bid as used for ad id: ${n}`:`marked winning bid as used`;E.event(this._logPrefix,`_handleLogEvent`,`LOG`,e,{error:t,adDetails:this._adDetails})}}_setupBeforeFirstAdPlay(e,t){this._videoPlayerControls?.toggleProgressBar(!1),this._advancePlaylist?.reset(!0),this.imaManager?.adContainerReady.then(()=>{this._toggleAdContainer(!0),this.imaManager?.adReady.emit(),e()}).catch(e=>{E.error(this._logPrefix,`_setupBeforeFirstAdPlay`,`IMA ad container error`,{error:e instanceof Error?e.message:String(e),playerId:this._playerId}),t()})}_programmaticPlayVideo({logEvent:e}={logEvent:!0}){return new Promise((t,n)=>{if(e&&this._listenForPlayerEventsToLog({action:`programmaticPlay`,context:this._adPlaying?`ad`:`content`}),!this._adsDisabled&&!this._adPodManager.firstAdHasPlayed)return this._setupBeforeFirstAdPlay(t,n);if(!this._adPlaying)this._isProgrammaticPlay=!0,this._videoElement.play().then(t).catch(n);else try{this.imaManager?.playAd(),t()}catch(e){E.error(this._logPrefix,`_programmaticPlayVideo`,`Error trying to play ad: ${e instanceof Error?e.message:String(e)}`),n(e)}})}_handleVideoElementPlay(){if(this._videoPlayerControls?.setMediaStarted(!0),!this._adsDisabled&&this._wasSeeking&&(this._isVideoEnded||this._videoElement.currentTime===0)){this._videoPlayerControls?.toggleProgressBar(!1),this._toggleAdContainer(!0),this._adCountDown.hideAdTimer(),this._programmaticPauseVideo({pauseContent:!0,logEvent:!1});return}if(this._videoPlayerControls?.toggleControlsFullWidth(!0),this._videoPlayerControls?.toggleProgressBar(!0),this._isProgrammaticPlay)this._isProgrammaticPlay=!1;else if(this.collapseCollection){if(this.collapseCollection?.playerState===j.Closed)return;this.collapseCollection.playerState=this.collapseCollection.playerCollapsed?j.CollapsedPlay:j.UncollapsedPlay}}_programmaticPauseVideo(e={logEvent:!0}){let{pauseContent:t,logEvent:n,pausedByOtherPlayer:r}=e;this._isProgrammaticPause=!0;let i;!this._adPlaying||t?(i=`content`,this._videoElement.pause()):(i=`ad`,this.imaManager?.pauseAd({pausedByOtherPlayer:r})),n&&this._listenForPlayerEventsToLog({action:`programmaticPause`,context:i})}_handleVideoElementPause(){if(!this._adPlaying&&!this.isFirstPlay&&(this._toggleTitle(!0),this._adCountDown.hideAdTimer()),this.collapseCollection){if(this._isProgrammaticPause)this._isProgrammaticPause=!1;else if(this.collapseCollection){if(this.collapseCollection?.playerState===j.Closed)return;this.collapseCollection.playerState=this.collapseCollection.playerCollapsed?j.UserPauseCollapsed:j.UserPauseUncollapsed}}}_handleVideoElementSeeking(e){e.type===`seeking`&&(this._wasSeeking=!0)}_handleVideoElementSeeked(e){e.type===`seeked`&&(this._wasSeeking=!1)}async _handleVideoElementTimeUpdate(){let e=this._videoElement,t=e.currentTime,n=e.duration-t;if(t>=.5&&!this._videoStarted&&(this._videoStarted=!0,this._isVideoEnded=!1,this._loadingSpinner.hide(),this.collapseCollection&&(this.collapseCollection.playbackStarted=!0,this._handleScroll())),!this.canPlay){this._prepareToPausePlayer(),this._programmaticPauseVideo({pauseContent:!0,pausedByOtherPlayer:!0,logEvent:!0});return}t>3&&this._videoTitleOverlayContainer.classList.contains(`active`)&&!this._wasSeeking&&this._toggleTitle(!1),!this._adsDisabled&&n<10&&!this._adFetched&&this._adPodManager.shouldFetchNextAd&&await this._handleAdvancePlaylistFetchAd()}async _getPrerollAdUrl(){if(`rvp_vastOverride`in window){let e=await window.rvp_vastOverride(this.prerollNum);if(e)return e}let e=this._adDurationControlExperiment.result;return e&&e!==`off`?`https://vast-tags.com/category/${e}?prerollNum=${this.prerollNum}`:(await this._videoEventBus.buildingVastAdURL.legacyEmit([this]),this.buildVideoUrl(this))}_requestNextAdAuctionInPod(){this._adPodManager.canFetchNextAdInPod()&&(this._adPodManager.incrementSessionPrerollNumber(),this._auctionManager.reset(),this._doubleRequestVideoBids())}async _doubleRequestVideoBids(){this._adFetched=!0,await this._requestBids(),await this._requestBids()}async _requestBids(){this._auctionManager.incrementCurrentAuctionNumber(),this._auctionManager.beforeBidRequest(!1,this._adPodManager.canFallBackAuction),await this.requestVideoBids([this])}_setNextMediaId(){this.nextMediaId=this._getVideoUsingIndex(this._getNextIndex())?.mediaid??`nf`}async _fetchLinearAd(){if(this._setNextMediaId(),this._adsDisabled){this._continuePlayingNextContent();return}this._jwBoostExperiment.result&&this.videoAdUnit&&this._updateAdUnitMediaId(this.videoAdUnit),this._config.ccpa.userOptedOut||this._enrichBidsWithJwTargeting(),await this._doubleRequestVideoBids(),this._makeGamCall()}_handleVideoElementEnded(){if(this._isVideoEnded=!0,this._videoStarted=!1,this._advancePlaylist?.reset(),this._videoPlayerControls?.toggleProgressBar(!1),this._toggleTitle(!1),this._loadingSpinner.show(),this._adsDisabled){this._continuePlayingNextContent();return}this._programmaticPauseVideo({pauseContent:!0,logEvent:!1}),this._adFetched?(this._toggleAdContainer(!0),this._advancePlaylist?.reset(!0),this.imaManager?.adReady.emit()):this._continuePlayingNextContent()}_handleResizeAd(){this.imaManager?.resize()}_addWinningBidDetails(){let e=this._prerollAdUrl,t=e&&this._getCustParamsFromQueryString(e),n=this._config.prebid.targetingKeyMap,{[n.AD_ID]:r,[n.ADOMAIN]:i,[n.BIDDER]:a,[n.PRICE_BUCKET]:o,[n.DEAL]:s,amznp:c,amznbid:l,amz_bidder:u,amz_pb:d}=t||{};this._winningBidDetails={hb_adid:`${r}`,adomain:`${i}`,hb_bidder:`${a}`,amznp:`${c}`,hb_pb:`${o}`,amznbid:`${l}`,hb_deal:`${s}`,amz_bidder:`${u}`,amz_pb:`${d}`}}_checkRenderedAdDetails(e=!1){let t=this._prebidAuctionManager,n=this._adDetails;if(!t||!n||this._bidMarkedOnCurrentAd)return;let r=n.gamCreativeId,i=n.wrapperSystems;this._markPrebidBidAsUsed(r,t,i,e)}_clearStaleTimers(){this._stalePlayerTimeoutId&&=(clearTimeout(this._stalePlayerTimeoutId),null)}_adjustStylesForContentPlayback(){(this._isMobile||this._isTablet)&&this._videoPlayerControls?.hideControls(),this._toggleTitle(!0),this._toggleAdContainer(!1),this._loadingSpinner.hide(),this._videoPlayerControls?.toggleProgressBar(!0),this._adCountDown.hideAdTimer()}_enableRemoveRaptivePLayer(){this._tearDownAfterNextAd=!0,this._getPlaylistIdForLogger()}_getAdDetailsFromAd(e){return e&&Object.keys(e).length>0?e[Object.keys(e)[0]]:null}_getCustParamsFromQueryString(e){let t=e&&Vt(e.split(`?`)[1]),n=t&&t.get(`cust_params`);return n&&Ht(this._getDecodedURI(n))}_getDecodedURI(e){try{return decodeURIComponent(e)}catch{return``}}_getErrorLogAdDetails(){let{BIDDER:e,PRICE_BUCKET:t,DEAL:n}=this._config.prebid.targetingKeyMap;return(({wrapperIds:r,wrapperCreativeIds:i,wrapperSystems:a,vastCreativeId:o,mediaFileURL:s,adId:c,adUnitName:l,adomain:u,[e]:d,amznp:f,[t]:p,amznbid:m,[n]:h,amz_bidder:g,amz_pb:_})=>({wrapperIds:r,wrapperCreativeIds:i,wrapperSystems:a,vastCreativeId:o,mediaFileURL:s,adId:c,adUnitName:l,adomain:u&&encodeURIComponent(u),hb_bidder:d,amznp:f,hb_pb:p,amznbid:m,hb_deal:h,...g&&{amz_bidder:g},..._&&{amz_pb:_}}))(this._adDetails||{})}_getEventInfo(e){let{adId:t,adSystem:n,adWrapperIds:r,mediaurl:i,adWrapperSystems:a,apiFramework:o,duration:s,height:c,title:l,vpaid:u}=e.ad;return{vprenum:this.prerollNum,playerName:this.name,adId:t,adSystem:n,adWrapperIds:r,mediaurl:i,adWrapperSystems:a,apiFramework:o,duration:s,height:c,title:l,vpaid:u}}_getPlayerVersions(){return{imaSDKVersion:this.imaManager?.imaSDKVersion}}_getWrapperSystems(e=[]){let t={isGamWrapper:!1,isPrebidWrapper:!1,isAmazonWrapper:!1};return e.forEach(e=>{let n=e.toLowerCase();n===`gdfp`&&(t.isGamWrapper=!0),n===`prebid.org wrapper`?t.isPrebidWrapper=!0:n===`amazon`&&(t.isAmazonWrapper=!0)}),t}_markPrebidBidAsUsed(e=``,t,n=[],r=!1){let i=e&&t.videoCreativeIdMapping.get(e),a=this._adDetails,o=a&&a.tag&&this._getCustParamsFromQueryString(a.tag)||{},s=o[this._config.prebid.targetingKeyMap.AD_ID],{isPrebidWrapper:c,isGamWrapper:l,isAmazonWrapper:u}=this._getWrapperSystems(n);if(i){let e=(o||{})[`${this._config.prebid.targetingKeyMap.AD_ID}_${i}`.substring(0,20)];if(e)return this._prebidMethods.markWinningBidAsUsed({adUnitCode:this.name,adId:e,...!r&&{analytics:!0}}),this._bidMarkedOnCurrentAd=!0,r?this._creativeFailureDetection(e):this._logCreativeIdWithPreviousError(e),e}else e&&s&&c?(this._bidMarkedOnCurrentAd=!0,this._prebidMethods.markWinningBidAsUsed({adUnitCode:this.name,adId:s,...!r&&{analytics:!0}})):e?E.event(this._logPrefix,`_markPrebidBidAsUsed`,{message:`Creative Id Not Found`,gamCreativeId:e}):((c||l&&!u||!n.length)&&(this._bidMarkedOnCurrentAd=!0,this._prebidMethods.markWinningBidAsUsed({adUnitCode:this.name,...!r&&{analytics:!0}})),E.event(this._logPrefix,`_markPrebidBidAsUsed`,{message:`Missing Creative Id`}))}_creativeFailureDetection(e){let t=this._prebidMethods.getBidResponsesForAdUnitCode(this.name).bids||[],n=this._config,r=n.video.instreamCreativeFailureThreshold;for(let i of t){let t=i.creativeId?.toString();if(i.adId===e&&t){let e=this._erroredOutCreativeIds.get(t)||0;e++,this._erroredOutCreativeIds.set(t,e),e>=r&&n.prebid.blockedCreativeIds.push(t);break}}}_logCreativeIdWithPreviousError(e){let t=this._prebidMethods.getBidResponsesForAdUnitCode(this.name).bids||[];for(let n of t)if(n.adId===e&&n.creativeId){this._erroredOutCreativeIds.get(n.creativeId.toString())&&E.event(this._logPrefix,`_logCreativeIdWithPreviousError`,{creativeId:n.creativeId});break}}_resetAdVars(){this._bidMarkedOnCurrentAd=!1,this._adDetails=null,this._adFetched=!1,this._adDurationLogged=!1,this._currentAdTime=0,this._currentAdDurationWithBuffer=0,this._clearStaleTimers(),this.imaManager?.setAdPlayReady(!1),this.imaManager?.setPrematureAdPlay(!1),this._retryAttempts=0,this._auctionManager.reset()}_resetPlayerProperties(){this._adPodManager.reset(),this._adPlaying=!1,this._canTearDown=!1,this._isProgrammaticPause=!0,this._isProgrammaticPlay=!0,this._isVideoEnded=!1,this._playerState=j.Unstarted,this._tearDownAfterNextAd=!1,this._videoStarted=!1,this._preventCollapseUntilInView=!1,this._videoPlayerControls?.toggleProgressBar(!0)}_setStaleAdDetection(e=`adPlay`){let t=e===`adLoaded`,n=e===`adStart`?0:this._currentAdTime,r=t?this._config.video.staleLoadThreshold:this._currentAdDurationWithBuffer-n,i=`RaptivePlayer encountered an unknown error ${t?`attempting to play the ad`:`during ad play`}`;this._stalePlayerTimeoutId||=window.setTimeout(()=>{E.error(this._logPrefix,`stalePlayer`,{message:i,...this._getPlayerVersions(),...this._getErrorLogAdDetails()}),this._tearDownPlayerTimeout===-1?(this._enableRemoveRaptivePLayer(),this._tearDownPlayer()):this._continuePlayingNextContent()},r*1e3)}_startTearDownTimer(){this._didTearDown=!1;let e=this._tearDownPlayerTimeout,t=this._canTearDown;t&&e/1e3,this._getPlaylistIdForLogger(),t&&(this._tearDownTimer=window.setTimeout(this._enableRemoveRaptivePLayer.bind(this),e))}_tearDownPlayer(){let e=this._getPlaylistIdForLogger(),t=this._videoContentObject?.playlist?.[this._playlistIndex]?.mediaid,n={adUnit:this._videoAdUnit?.code,playerType:this._playerType,playerId:this._playerId,playlistId:e,mediaId:t,state:this._state,collapseState:this.collapseCollection?.playerState,vp:this.prerollNum};E.event(this._logPrefix,`_tearDownPlayer`,n),this._tearDownTimer&&clearTimeout(this._tearDownTimer),this._removeInstream(!0),this._advancePlaylist?.destroy(),this._hlsManager.reset(),this.injectPlayer(),this._hlsManager=this._createHlsManager(),this._setupPlayer(),this.imaManager?.reInitIMA(),this._resetAdVars(),this._resetPlayerProperties(),this._handleScroll(),this._didTearDown=!0}_toggleAdContainer(e){let t=this._playerContainer.querySelector(`#adthrive-${this._playerType}-ad-container`);t&&(e?(this._playerContainer.classList.add(`raptive-player-ad-loading`),t.classList.add(`adthrive-player-ad-container-loading`),t.classList.remove(`raptive-player-ad-container-idle`)):(this._playerContainer.classList.remove(`raptive-player-ad-loading`),t.classList.remove(`adthrive-player-ad-container-loading`),t.classList.add(`raptive-player-ad-container-idle`)))}_toggleTitle(e){this._config.video.removeVideoTitleWrapper||(e?this._videoTitleOverlayContainer.classList.add(`active`):this._videoTitleOverlayContainer.classList.remove(`active`))}_logRaptivePlayerEvent(e){let t=this._playerId,n=this._getPlaylistIdForLogger(),r=this._playerType,i=this._videoContentObject?.playlist?.[this._playlistIndex]?.mediaid,a=this._mediaIdCount;E.event(this._logPrefix,e,{playerId:t,playlistId:n,mediaId:i,playerType:r,mediaIdCount:a})}_createCollapsibleCollection(){this.collapseCollection={adContainer:this.imaManager?.adContainer,closeButton:this._closeButton,collapseMobileSizeType:this._collapseSettings.collapseMobileSizeType,collapseMobileSubType:this._getCollapseMobileSubType(),collapseSubType:pt.BottomRight,collapseTimer:{timeCollapsed:0,isRunning:!1},collapseType:this._collapseSettings.collapseType,footerElement:this._config.video.footerSelector?document.querySelector(this._config.video.footerSelector):null,forceMobile:this._context.device!==`desktop`,hasPreviouslyCollapsed:!1,playbackStarted:!1,mobileHeaderSelector:this._collapseSettings.mobileHeaderSelector,playerCollapsed:!1,playerContainer:this._playerContainer,playerPosition:this._playerPosition,playerState:this._playerState,playerType:this._playerType,programmaticPause:this._programmaticPauseVideo.bind(this),programmaticPlay:e=>void this._programmaticPlayVideo(e),saveVideoCloseState:this._collapseSettings.saveVideoCloseState,stickyElement:this._stickyElement,title:this._collapseSettings.title,topBackgroundElement:this._topBackgroundElement,showPlayer:this.show.bind(this),hidePlayer:this.hide.bind(this),isAcAlwaysStickyEnabled:this._isAcAlwaysStickyEnabled,isTopCenterCollapse:this._isTopCollapse,lastCollapseMobileSubType:this._lastCollapseMobileSubType}}_getCollapseMobileSubType(){if(!this._playerHasPreviouslyUncollapsed&&this._isAcAlwaysStickyEnabled){let e=this._config.video.stickyOutstreamSettings.mobileLocation,t=B(e,`bottom-right`);return Ms.setMobileLocation(t,!0)}return this._mobileStickyPlayerPositionSiteExperiment.enabled&&this._mobileStickyPlayerPositionSiteExperiment.result!==`control`?Ms.setMobileLocation(this._mobileStickyPlayerPositionSiteExperiment.result):this._mobileStickyPlayerPositionCoreExperiment.mobileLocation?Ms.setMobileLocation(this._mobileStickyPlayerPositionCoreExperiment.mobileLocation):this._collapseSettings?.mobileLocation}_updateToAccompanyingContentLocation(){if(!this.collapseCollection)return;this._playerHasPreviouslyUncollapsed=!0;let e=this._getCollapseMobileSubType();this.collapseCollection.collapseMobileSubType=e,this.collapseCollection.lastCollapseMobileSubType=e,this._closeButton&&this._closeButton.parentNode?.removeChild(this._closeButton),this._isTopCollapse?(this._createTopCenterBackground(this._playerPosition),this.collapseCollection.topBackgroundElement=this._topBackgroundElement):(this._topBackgroundElement=null,this.collapseCollection.topBackgroundElement=null),this._closeButton=this._createPlayerCloseButton(),this._playerContainer.appendChild(this._closeButton),this.collapseCollection.closeButton=this._closeButton}async _handleScroll(){let e=this._config.gdpr;if(!e.consentCaptured&&e.enabled&&await this.waitForConsent(),this.collapseCollection){let e=this.collapseCollection.playerCollapsed;this._preventCollapseUntilInView&&Ms.playerViewable(this.collapseCollection.playerContainer)&&(this._preventCollapseUntilInView=!1),this._preventCollapseUntilInView||$.handleScroll(this.collapseCollection),this._isAcAlwaysStickyEnabled&&!this._playerHasPreviouslyUncollapsed&&e&&!this.collapseCollection.playerCollapsed&&this._updateToAccompanyingContentLocation()}}_handleResize(){this.collapseCollection&&$.handleResize(this.collapseCollection)}_handlePageVisibilityChange(e){this.collapseCollection?$.handlePageVisibilityChange(e,this.collapseCollection):e?this._programmaticPauseVideo({logEvent:!1}):this._intentionalPause||this._programmaticPlayVideo({logEvent:!1})}_handleTransformForCollapse(){if(!this.collapseCollection?.playerCollapsed)return;this._handleSlickHeartBeat();let e=this._translateX===0?``:`translateX(${this._translateX}px)`,t=this._translateY===0?``:`translateY(-${this._translateY}px)`,n=`${e} ${t}`.trim();this.collapseCollection?.playerContainer.style.setProperty(`transform`,n,`important`)}_handleSlickHeartBeat(){let e=this._getCollapseMobileSubType(),t=this._lastCollapseMobileSubType!==e;if(this._slickHeartbeatPresent&&!t)return;this._lastCollapseMobileSubType=e;let n=e===`adthrive-collapse-bottom-right`||e===`raptive-player-sticky-bottom-right`;this._slickHeartbeatPresent=!!document.querySelector(`slick-heartbeat`),this._translateX=this._slickHeartbeatPresent&&n?-60:0}_handleFooterHeightChange(e){if(!this.collapseCollection?.playerCollapsed)return;let t=IT();this._translateY=e-t,$.repositionCollapseMobileBottom(this.collapseCollection),this._handleTransformForCollapse()}_handleFooterVideoRibbonStateChange(e){this.collapseCollection?.playerCollapsed&&e&&$.handleClose(this.collapseCollection,this.prerollNum,`videoRibbonFooter`)}_displayCloseButton(){this.collapseCollection&&$.displayCloseButton(this.collapseCollection)}_linkProvidedByPublisher(e){return!e.startsWith(`https://cdn.jwplayer.com`)}_handleClose(){if(!this.collapseCollection)return;let e=this._isInStickyOutstreamLocation();e?(this._preventCollapseUntilInView=!0,this._updateToAccompanyingContentLocation()):this._collapseSettings.saveVideoCloseState&&L.setExpirableInternalLocalStorage(`adthrive_video_closed`,!0,{expiry:{value:30,unit:`minutes`}}),this._isAdvancePlaylistEnabled&&!e&&this._advancePlaylist?.reset();let t=this._preventCollapseUntilInView?`soCloseButton`:`closeButton`;$.handleClose(this.collapseCollection,this.prerollNum,t)}_handleWidthBreak(e){this.collapseCollection&&$.handleWidthBreak(e,this.collapseCollection)}_handleTitleClick(e){this.collapseCollection?.collapseTimer.firstInView&&E.event(this._logPrefix,`_handleTitleClick`,{timeElapsed:Date.now()-this.collapseCollection.collapseTimer.firstInView.valueOf(),link:e.currentTarget.getAttribute(`href`)})}_handleFooterResponseReceivedEvent(){this.collapseCollection&&this.collapseCollection.playerCollapsed&&$.repositionCollapseMobileBottom(this.collapseCollection)}_handleDirectSoldInterscrollerOnPage(){this.collapseCollection&&(this.canPlay=!1,$.disableCollapse=!0,this.collapseCollection.playerCollapsed&&($.uncollapse(this.collapseCollection),this._playerCollapsedByDirectSoldInterscroller=!0))}_handleDirectSoldInterscrollerRemoved(){this.collapseCollection&&(this.canPlay=!0,$.disableCollapse=!1,this._playerCollapsedByDirectSoldInterscroller&&=($.collapse(this.collapseCollection),this.collapseCollection.playerState=j.CollapsedPlay,!1),(this.collapseCollection.playerCollapsed||Ms.playerViewable(this._playerContainer))&&this._programmaticPlayVideo({logEvent:!1}))}get _isTopCollapse(){return this._getCollapseMobileSubType()===`adthrive-collapse-top-center`}_createTopCenterBackground(e){this._topBackgroundElement=this._createPlayerCollapseBackgroundElement(),this._topCenterBackgroundColor=this._config.adOptions.bgColor,this._topCenterBackgroundColor&&(this._topBackgroundElement.style.backgroundColor=this._topCenterBackgroundColor),e.appendChild(this._topBackgroundElement)}_createLinkIcon(e){let t=document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);t.setAttribute(`width`,`24`),t.setAttribute(`height`,`24`),t.setAttribute(`style`,`vertical-align:top;margin-right:10px`);let n=document.createElementNS(`http://www.w3.org/2000/svg`,`path`);return n.setAttribute(`d`,`M 16 1 H 23 V 8 Z M 19.5 12.5 V 23 H 1 V 4.5 H 12 l 1 1 H 2 V 22 H 18.5 V 11.5 l 1 1 v 1 M 19 4 L 11.5 11.5 l 1 1 L 20 5`),n.setAttribute(`stroke`,`white`),n.setAttribute(`stroke-width`,`2`),n.setAttribute(`stroke-linejoin`,`round`),t.appendChild(n),t.id=`${e}-svg-link`,t}_addTopCenterWrapper(){this._playerContainer.appendChild(this._createPlayerWrapper()),this._playerContainer.appendChild(this._createTopCollapseWrapper()),this._playerContainer.classList.add(`adthrive-player-with-wrapper-text`)}_addPlayerWithoutWrapper(){this._playerContainer.appendChild(this._createPlayerWrapper()),this._playerContainer.classList.add(`adthrive-player-without-wrapper-text`)}_createPlayerWrapper(){let e=this._videoTitleOverlayContainer;return this._videoTitleElement=document.createElement(`span`),this._videoTitleElement.classList.add(`adthrive-video-text-cutoff`,`adthrive-video-title`),e.classList.add(`adthrive-wrapper-bar`),e}_createLearnMoreLink(e,t){let n=document.createElement(`a`),r=[`raptive-player-learn-more-link`,`adthrive-learn-more-link`,...t?[`raptive-player-learn-more-link-active`]:[]];return n.classList.add(...r),n.innerText=`Tap here to learn more.`,n.id=`${e}-learn-more-link`,n.style.color=this._topCenterBackgroundColor===`#FFFFFF`?`black`:`white`,n}_createTopCollapseWrapper(){let e=this._isAutoInjectedPlayer(),t=document.createElement(`div`);t.className=`adthrive-top-collapse-wrapper-bar`,this._closeButton=this._createPlayerCloseButton();let n=document.createElement(`div`);n.className=`adthrive-top-collapse-close-spacer`,n.appendChild(this._closeButton),t.appendChild(n),this._wrapperText=document.createElement(`a`);let r=this._linkProvidedByPublisher(this._videoLink);r&&e&&(this._wrapperText.href=this._videoLink),this._topCollapseVideoTitleElement=document.createElement(`span`),this._topCollapseVideoTitleElement.classList.add(`adthrive-top-collapse-wrapper-video-title`);let i=this._config.adOptions.secColor;if(i&&(this._topCollapseVideoTitleElement.style.color=i,this._topCollapseVideoTitleElement.innerHTML=this._videoTitle),this._wrapperText.appendChild(this._topCollapseVideoTitleElement),e){let e=this._createLearnMoreLink(this._playlistId,r);this._wrapperText.appendChild(e),this._wrapperText.onclick=this._handleTitleClick.bind(this)}return t.appendChild(this._wrapperText),t}_isInStickyOutstreamLocation(){if(!this.collapseCollection)return!1;let e=this.collapseCollection.collapseMobileSubType;return typeof e==`string`&&e.startsWith(`raptive-player-sticky`)}_isMobileTopCenterCollapse(){return this._collapseSettings?.collapseType===dt.Mobile&&this._isTopCollapse}_createPlayerCloseButton(){let e=this._wrapperTitleWrapperElement||this._videoTitleElement;return this._closeButton=this._videoCloseButtonComponent.createPlayerCloseButton(this._handleClose.bind(this),`instream`,`adthrive-collapse-close`,!!e,this._isMobileTopCenterCollapse()?`top-center`:this._collapseSettings?.collapseType),this._closeButton}_createPlayerCollapseBackgroundElement(){let e=document.createElement(`div`);return e.classList.add(`adthrive-collapse-mobile-background`),e.style.width=`${window.innerWidth}px`,e.style.display=`inline`,e.style.height=`0`,e}setAmznBids(e){this._auctionManager.setAmznBids(e)}setPrebidBids(e){this._auctionManager.setPrebidBids(e)}get amzName(){return this._auctionManager.amznAdUnitName}getMinMaxDurationsForGAM(){if(this._auctionManager.enabled)return this._auctionManager.hasFallenBack||this._retryAttempts>0?void 0:{min_ad_duration:1e3,max_ad_duration:15e3}}set lastAuctionBidDetails(e){this._lastAuctionBidDetails=e}get lastAuctionBidDetails(){return this._lastAuctionBidDetails}get captionLanguage(){return this._videoPlayerControls?.captionLanguage}};C(YO,`FALLBACK_PLAYLIST_ID`,`RyalYm9a`),C(YO,`DEFAULT_MAX_NUMBER_OF_ADS_IN_POD`,4),C(YO,`MAX_ADS_IN_30SEC_POD`,2);var XO=class extends YO{_setNextVideoTitle(){if(!this._config.video.removeVideoTitleWrapper&&!this.isFirstPlay){let e=this._getVideoUsingIndex(this._getNextIndex());e&&this._setVideoTitle(e)}}_handleAdvancePlaylistAdvanceToAd(){this._setNextVideoTitle(),super._handleAdvancePlaylistAdvanceToAd()}_handleAdvancePlaylistAdvanceToContent(){this._setNextVideoTitle(),super._handleAdvancePlaylistAdvanceToContent()}_handleVideoElementEnded(){this._setNextVideoTitle(),super._handleVideoElementEnded()}_updateWrapperTextForRelatedPlayer(e){if(!this._wrapperText)return;this._wrapperText.href=e.link;let t=this._linkProvidedByPublisher(e.link);if(!this._wrapperText.querySelector(`.raptive-player-learn-more-link`)){let e=this._createLearnMoreLink(this._playlistId,t);this._wrapperText.appendChild(e)}this._playerPosition.querySelector(`.adthrive-top-collapse-wrapper-bar`)?.appendChild(this._wrapperText)}_isNonInitialRelatedVideo(){return this._getNextIndex()!==0}_updateTopCollapseTitle(e){this._topCollapseVideoTitleElement&&(this._topCollapseVideoTitleElement.innerHTML=e)}_setWrapperTitleAttributes(e){this._wrapperTitleWrapperElement&&(this._wrapperTitleWrapperElement.href=e,this._wrapperTitleWrapperElement.target=`_blank`,this._wrapperTitleWrapperElement.onclick=this._handleTitleClick.bind(this))}_updateWrapperTitleWrapper(e,t){if(this._wrapperTitleWrapperElement)if(this._wrapperTitleWrapperElement.querySelector(`svg`)?.remove(),e){let e=this._createLinkIcon(this._playlistId);this._wrapperTitleWrapperElement.appendChild(e),this._isNonInitialRelatedVideo()&&(this._setWrapperTitleAttributes(t),this._videoTitleOverlayContainer.prepend(this._wrapperTitleWrapperElement),this._wrapperTitleWrapperElement.classList.remove(`adthrive-no-pointer-events`))}else this._wrapperTitleWrapperElement.classList.add(`adthrive-no-pointer-events`)}_setVideoTitle(e){this._isNonInitialRelatedVideo()&&this._updateWrapperTextForRelatedPlayer(e),this._getNextIndex()===1&&this.createTitleOverlayContainer(!0);let{title:t,link:n}=e;this._videoTitle=t,this._videoLink=n,this._updateTopCollapseTitle(t),this._videoTitleDiv.innerHTML=`<span class='adthrive-video-text-cutoff'>${t}</span>`,this._videoDescriptionDiv.innerHTML=`<span class='adthrive-video-text-cutoff'>${e.description}</span>`;let r=this._linkProvidedByPublisher(this._videoLink);this._toggleLearnMoreLink(r),this._updateWrapperTitleWrapper(r,n)}_createTopCollapseWrapper(){return this._wrapperText&&this._linkProvidedByPublisher(this._videoLink)&&this._isNonInitialRelatedVideo()&&(this._wrapperText.href=this._videoLink),super._createTopCollapseWrapper()}};let ZO=class{constructor(e,t,n,r,i,a,o){this._config=e,this._gam=t,this._irisTvTracker=n,this._videoEventBus=r,this._slotEventBus=i,this._prebidMethods=a,this._openBiddingTrafficShapingExperiment=o,C(this,`_apstagSlotBids`,new Map),C(this,`_prebidSlotTargetingMap`,new Map),C(this,`_amazonTargetingKeysToRemove`,[`amznp`,`amznp_sp`]),C(this,`shouldPrebidRun`,!1),this._videoEventBus.addAPStagSlotBidResponse.on(({playlistId:e,bid:t,discounts:n})=>this._addAPStagSlotBidResponse(e,t,n)),this._slotEventBus.addPrebidSlotTargeting.on(({adUnitCode:e,slotTargeting:t})=>this._addPrebidSlotTargeting(e,t))}_addAPStagSlotBidResponse(e,t,n){this._apstagSlotBids.set(e,{bid:t,discounts:n})}_addPrebidSlotTargeting(e,t){this._prebidSlotTargetingMap.set(e,t)}getVideoTargeting(e,t){let n=this._irisTvTracker.enabled?this._irisTvTracker.irisContextualData:void 0,r={};return Object.keys(t).forEach(e=>{let n=t[e];r[e]=encodeURIComponent(n.toString())}),r.mcmp=this._getMcmpValues(),r.vprenum=String(e.prerollNum),r.imav=e?.imaManager?.imaSDKVersion??``,r.voba=this._config.videoOpenBidding.bidders.toString(),n&&(r.iris_context=n.toString()),this._setVideoTargetingForTrafficShaping(r,e),r}_setVideoTargetingForTrafficShaping(e,t){let n=this._config.trafficShaping;if(n.active&&this._openBiddingTrafficShapingExperiment.result){let r=n.getRule(t.name,t.prerollNum);e.obts=(r&&r?.ob?.length>0?r.ob:`none`).toString()}}_extractBidsDuration(e){if(!e||!e.length)return{};let t={},n=this._config.prebid.targetingKeyMap;return e.forEach(e=>{let r=`${n.DUR}_${e.bidder}`;if(!e||t[r])return;let i=e.duration;i&&!isNaN(i)&&(t[r]=i)}),t}_getMcmpValues(){let e=this._getTrackScrollTargeting(),t=[...this._config.marmalade.mcmpTargeting];return e&&t.push(...e),t.toString()}_getTrackScrollTargeting(){let e=this._config.trackScroll;return e.trackScrollEnabled&&e.getTargetingValue()}_getVideoBid(e){let t=this._apstagSlotBids.get(e),n=t?.bid,r=t?.discounts;return n?(this._apstagSlotBids.delete(e),{bid:n,discounts:r}):{}}getPrebidNoBidTargeting(e){let t=this.getPrebidSlotTargeting(e).noBid;if(t)return{hb_bidder:t}}getPrebidSlotTargeting(e){return this._prebidSlotTargetingMap.get(e)||{}}_convertFlagSlotValues(e){let t=[];return Object.keys(e).forEach(n=>{let r=e[n];typeof r==`string`?t.push(`${n}%3A${r}`):Array.isArray(r)&&r.length>0&&t.push(r.map(e=>`${n}%3A${e}`).join(`,`))}),t.join(`,`)}_addAmazonDiscountTargeting(e,t){let{standard:n,pmp:r}=e,i=(e,n)=>{this._config.video.setVideoFlagSlot(t,{[e]:[n.toFixed(6).toString()]})};n.originalCpm&&i(`aop`,n.originalCpm),n.discount&&i(`apd`,n.discount),r.originalCpm&&i(`aopp`,r.originalCpm),r.discount&&i(`appd`,r.discount)}_removeSpecificAmazonTargetingKey(e){this._amazonTargetingKeysToRemove.forEach(t=>{delete e[t]})}_getAmazonBidTargeting(e,t){let{bid:n,discounts:r}=this._getVideoBid(e);if(n){let e={};for(let t in n)t===`targeting`?e={...e,...n[t]}:this._config.amazon.amznTargetingKeys.includes(t)&&(e[t]=n[t]);return this._removeSpecificAmazonTargetingKey(e),r&&this._addAmazonDiscountTargeting(r,t),e}return{}}_setPrebidDiscountTargeting(e){let{cpm:t,responseCpm:n}=this._prebidMethods.getHighestCpmBids(e)[0]||{},r=(n||0)-(t||0);n&&r&&this._config.video.setVideoFlagSlot(e,{pbop:[t.toFixed(6).toString()],pbpd:[r.toFixed(6).toString()]})}_getFloorsTargeting(e){let t=this._config.video.videoFlagSlot[e]||{};return t&&this._config.video.clearVideoFlagSlot(e),t}_getTopCPMValue(e,t){return Number.isFinite(t)&&(!Number.isFinite(e)||t>e)?t:e}_getCPMRange(e,t){let n=e?.adserverTargeting?.[this._config.prebid.targetingKeyMap.PRICE_BUCKET],r=Number(n),i=t?.amz_pb,a=Number(i),o=t?.amz_pb_sp,s=Number(o),c=i&&o?Math.max(a,s):a||s,l=this._getTopCPMValue(r,c);return hc(l)}_getCustParams(e,t=!0){let n=this._gam.getTargetingMap(),r=this._getAmazonBidTargeting(e._playlistId,e.name),i=t&&this._getActiveBidsInPool(e),a=this._extractBidsDuration(i),o=e.lastAuctionBidDetails??{bic:`0`,tbc:`none`,"2bc":`none`,medb:`none`,bidr:`0`},s=i?i[0]:void 0,c=this._getCPMRange(s,r),l=Nh(s),u={...(e.isPlayerType===k.Playlist||e.isPlayerType===k.AutoInjected)&&{plid:e._playlistId},jwpid:e._playerId??``,jwmid:e.nextMediaId||e.mediaOrPlaylistId,...this._getFloorsTargeting(e.name),tid:`transactionId`in e?e.transactionId:``,iroe:`retryAttempts`in e?e.retryAttempts.toString():`0`,player:`r`,cclang:e.captionLanguage??``,fle:e.eligibleFloorComponents,fla:e.appliedFloorComponents,...o,...typeof e.vpodnum==`number`&&{vpodnum:e.vpodnum.toString()},...l&&{png:`1`}};return{...u&&{flag_slot:this._convertFlagSlotValues(u)},...this.getVideoTargeting(e,n),...this.getPrebidNoBidTargeting(e.name),...r,...a,idp:e.userIdTargetingData.join(`,`),...c&&{hb_rpb:c}}}_getActiveBidsInPool(e){let t=(this._prebidMethods.getBidResponsesForAdUnitCode(e.name)||{}).bids,n=e.getMinMaxDurationsForGAM();return t&&t.filter(e=>{let t=e.ttl||300,r=e.responseTimestamp+t*1e3>new Date().getTime(),i=e&&e.status!==`rendered`,a=!0;return n&&e.maxDuration&&(a=e.maxDuration===n.max_ad_duration/1e3),r&&i&&a}).sort((e,t)=>t.cpm-e.cpm)}handleGdprConsent(){let e={gdpr:1,gdpr_consent:`tcunavailable`},t=!!this._config.gdpr.consentCapturedData.consentString,n=!!this._config.gdpr.consentCapturedData.additionalConsent,r=typeof window.__tcfapi==`function`;return t&&(e.gdpr_consent=this._config.gdpr.consentCapturedData.consentString),n&&(e.addtl_consent=this._config.gdpr.consentCapturedData.additionalConsent),!t&&r&&window.__tcfapi(`getTCData`,2,t=>{let n=!!(t&&t.tcString),r=!!(t&&t.addtlConsent);n&&(e.gdpr_consent=t.tcString),r&&(e.addtl_consent=t.addtlConsent)}),e}getConsentParams(){if(this._config.gdpr.enabled)return this.handleGdprConsent();if(this._config.ccpa.privacyString)return{us_privacy:this._config.ccpa.privacyString}}getDefaultVideoUrlParams(e){let t=window.location.origin,n=e.getMinMaxDurationsForGAM(),r=e.plcmt||sh(this._config.video.plcmtUnits,e),i=this._getPlayerAdUnitName(e.name);return{iu:`/${this._config.gam.account}/${i}/${this._config.site.id}`,sz:e.size.join(`x`),hl:`en`,output:`vast`,url:`__page-url__`,vad_type:`linear`,description_url:`${encodeURIComponent(encodeURIComponent(t))}`,pp:`10_VAST%20redirects_video%2Fmp4_VPAID%20JavaScript`,vpos:`preroll`,vpmute:this._getVpmute(e.name),wta:1,tfcd:ur()||fr()?1:0,...r&&{plcmt:r},...n}}buildGAMVideoUrl(e){let t=this.getConsentParams(),n=Ms.createQueryString(this._getCustParams(e,!1)),r=Ms.createEncodedQueryString({cust_params:n}),i=this.getDefaultVideoUrlParams(e),a={env:`vp`,gdfp_req:`1`,unviewed_position_start:`1`,...i,...t};return`https://securepubads.g.doubleclick.net/gampad/ads?${Ms.createQueryString(a)}&${r}`}buildGAMVideoUrlPrebid(e){let t=e.videoAdUnit||{};this._setPrebidDiscountTargeting(e.name);let n=this._getCustParams(e),r=this.getDefaultVideoUrlParams(e);return this._prebidMethods.buildVideoURL(t,r,n)??this.buildGAMVideoUrl(e)}buildVideoUrl(e){return this.shouldPrebidRun?this.buildGAMVideoUrlPrebid(e):this.buildGAMVideoUrl(e)}_getVpmute(e){return e===A.Video_In_Post_ClicktoPlay_SoundOn?0:1}_getPlayerAdUnitName(e){if(this._config.gam.isThirdPartyGam){let t=this._config.gam.thirdPartyAdUnitMapping.get(e.toLowerCase())?.[`*`];if(t)return t;E.error(`VideoUrlBuilder`,`getPlayerAdUnitName`,`No third party unit name mapping found for player: ${e}`)}return`${this._config.gam.prefix}_${e}`}};ZO=w([D(`VideoUrlBuilder`),S(),N(0,b(J)),N(1,b(Z)),N(2,b(dp)),N(3,b(pc)),N(4,b(Hs)),N(5,b(P)),N(6,b(Zx))],ZO);let QO=class extends CO{async init(){EO()&&await wO(),this._defineCustomElements(),this._setupSpaListeners(),this._handleCollapsibleVideoLogging(),this._initializePlayers(),this._mediaType.runOneStreamExperiment()}constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g){super(r.video,`VideoManagerComponent`,i),this._auctionManagers=e,this._bootstrapConfig=t,this._collapsibleVideoLoggingStore=n,this._config=r,this._context=i,this._directSoldInterscrollerAdEventBus=a,this._eventProxy=o,this._events=s,this._irisTvTracker=c,this._mediaType=l,this._prebidEventBus=u,this._prebidMethods=d,this._spaEventBus=f,this._videoEventBus=p,this._userPageDataLoggingEvent=m,this._videoRequestManager=h,this._videoUrlBuilder=g,C(this,`_html5Players`,[]),C(this,`_spaListeners`,[]),C(this,`_IN_POST_SELECTOR`,`.adthrive-video-player`),C(this,`_shouldUseHardcodedAdPodDuration`,!1),C(this,`_stickyOutstreamOnStickyPlayerPagesSiteExperiment`,void 0),this._shouldUseHardcodedAdPodDuration=cn.isRolloutEnabled(`max-video-ad-duration`),this._eventProxy.videoPlaying.on(this.setPlayerAsPlaying.bind(this)),this._stickyOutstreamOnStickyPlayerPagesSiteExperiment=y.resolve(SO)}setPlayerAsPlaying({playerNumber:e}){this._html5Players.forEach(t=>{t.canPlay=t.playerNumber===e})}_defineCustomElements(){let e={"raptive-native-video-header":DO};Object.entries(e).forEach(([e,t])=>{customElements.get(e)||customElements.define(e,t)})}_setupSpaListeners(){this._spaEventBus.routeChanged.on(()=>{this._removeExistingSpaListeners(),this._stickyRelatedOnPage=!1,this._relatedMediaIds=[],this.setPotentialPlayersMap()}),this._spaEventBus.resetCompleted.on(()=>{this._handleCollapsibleVideoLogging(),this._initializePlayers()})}_removeExistingSpaListeners(){this._spaListeners.forEach(e=>e()),this._spaListeners.length=0}_initializePlayers(){let e=document.querySelectorAll(this._IN_POST_SELECTOR);if(e.length&&this._initializeRelatedPlayers(e),!this._shouldRunAutoplayPlayers()){try{this._importScripts(),this._initHtml5Players()}catch(e){E.error(`VideoManagerComponent`,`initializePlayers`,e)}return}this._determineAutoplayPlayers(e);try{this._importScripts(),this._initHtml5Players()}catch(e){E.error(`VideoManagerComponent`,`initializePlayers`,e)}}_createStationaryRelatedPlayer(e,t,n){let r=this._device===`mobile`?[400,225]:[640,360],i=A.Video_In_Post_ClicktoPlay_SoundOn,a=this._config,o=this._prebidMethods,s=this._prebidEventBus,c=this._context;{let l=this._html5Players.length+1,u=new YO(this._directSoldInterscrollerAdEventBus,e.id.toString(),e.playerId,n||1,e.mediaOrPlaylistId,k.EmbeddedStationary,t,r,a,c,this._eventProxy,!1,i,!1,o,this._auctionManagers,s,this._videoEventBus,l,new xO,this._shouldUseHardcodedAdPodDuration);this._html5Players.push(u)}}_createStickyRelatedPlayer(e,t){let n=this._device===`mobile`?[400,225]:[640,360],r=A.Video_Individual_Autoplay_SOff;this._collapsibleVideoLoggingStore.playerName=r,this._stickyRelatedOnPage=!0,this._config.video.mobileStickyPlayerOnPage=this._device===`mobile`,this._config.video.collapsiblePlayerOnPage=!0;let i=this._prebidEventBus,a=this._getCollapseType(),o=this.buildCollapseSettings(e,a),s=this._html5Players.length+1,c=new XO(this._directSoldInterscrollerAdEventBus,e.id.toString(),e.playerId,1,e.mediaId,k.RelatedSticky,t,n,this._config,this._context,this._eventProxy,!0,r,!0,this._prebidMethods,this._auctionManagers,i,this._videoEventBus,s,new xO,o,void 0,this._shouldUseHardcodedAdPodDuration);this._html5Players.push(c)}_createPlaylistPlayer(e,t){let n=e.playerId,r=e.playlistId,i=this._getCollapseType(),a=i===dt.Mobile?[400,225]:[640,360],o=this._config,s=this._context,c=this._device===`mobile`?A.Video_Coll_SOff_Smartphone:A.Video_Collapse_Autoplay_SoundOff,l=this._prebidMethods,u=this._prebidEventBus;t=document.querySelector(`#cls-video-container-${r} > div`)||t;let d=this.buildCollapseSettings(e,i);this._config.video.mobileStickyPlayerOnPage=!0,this._config.video.collapsiblePlayerOnPage=!0;let f=this._html5Players.length+1,p=new YO(this._directSoldInterscrollerAdEventBus,e.id.toString(),n,1,r,k.AutoInjected,t,a,o,s,this._eventProxy,!0,c,!0,l,this._auctionManagers,u,this._videoEventBus,f,new xO,d,e.mediaId,this._shouldUseHardcodedAdPodDuration);this._collapsibleVideoLoggingStore.playerName=c,this._html5Players.push(p)}async gdprConsentWait(){return new Promise(e=>{this._events.consentResponseCaptured.on(t=>{t&&e(!0)})})}async _initHtml5Players(){let e=this._videoRequestManager;for(let t of this._html5Players){let n=t.isPlayerType===k.EmbeddedStationary;await this._bootstrapConfig.bootstrapLoaders[ot.Prebid].then(()=>{this._videoUrlBuilder.shouldPrebidRun=!0}).catch(()=>{}),n&&this._relatedMediaIds[0]&&await this._irisTvTracker.setContextualData(this._relatedMediaIds[0]),e.addVideoSlots([t]),t.requestVideoBids=async t=>await e.requestVideoBids(t),t.waitForConsent=this.gdprConsentWait.bind(this),Z.pushToQueue(()=>{t.buildVideoUrl=this._videoUrlBuilder.buildVideoUrl.bind(this._videoUrlBuilder),t.init()})}}_importScripts(){this._config.video.preventStickyOutstream!==!0&&(this._config.video.preventStickyOutstream=this._disableStickyOutstreamInPresenceOfCollapsiblePlayer())}_hasCollapsiblePlayer(e){return e.length?e.some(e=>e.collapsible):!1}_disableStickyOutstreamInPresenceOfCollapsiblePlayer(){if(!this._hasCollapsiblePlayer(this._html5Players))return!1;let e=this._stickyOutstreamOnStickyPlayerPagesSiteExperiment;return e.enabled?!e.result:!this._config.video.stickyOutstreamSettings.allowForPageWithStickyPlayer.enabled}_isVideoAllowedOnPage(){return this._config.disableAds.video?(this._config.disableAds.reasons.has(`video_tag`)?E.error(`VideoManagerComponent`,`isVideoAllowedOnPage`,Error(`DBP: Disabled by publisher via video tag`)):this._config.disableAds.reasons.has(`video_plugin`)?E.error(`VideoManagerComponent`,`isVideoAllowedOnPage`,Error(`DBP: Disabled by publisher via video plugin`)):this._config.disableAds.reasons.has(`video_page`)?E.error(`VideoManagerComponent`,`isVideoAllowedOnPage`,Error(`DBP: Disabled by publisher via command queue`)):E.error(`VideoManagerComponent`,`isVideoAllowedOnPage`,Error(`DBP: Disabled by publisher via other`)),!1):!0}_getCollapseType(){return this._device===`mobile`?dt.Mobile:dt.Float}_handleCollapsibleVideoLogging(){this._spaListeners.push($.collapseEvent.on(()=>{this._collapsibleVideoLoggingStore.startedCollapsedTime=$e()})),this._spaListeners.push($.uncollapseEvent.on(()=>{this._collapsibleVideoLoggingStore.totalTimeCollapsed+=this._collapsibleVideoLoggingStore.startedCollapsedTime?$e()-this._collapsibleVideoLoggingStore.startedCollapsedTime:0,this._collapsibleVideoLoggingStore.startedCollapsedTime=void 0})),this._spaListeners.push($.closeEvent.on(()=>{this._collapsibleVideoLoggingStore.wasClosed=!0})),$.startEvent.once(()=>{this._collapsibleVideoLoggingStore.wasStarted=!0}),this._spaListeners.push(this._userPageDataLoggingEvent.loggingData.on(()=>{this._collapsibleVideoLoggingStore.startedCollapsedTime&&(this._collapsibleVideoLoggingStore.totalTimeCollapsed+=$e()-this._collapsibleVideoLoggingStore.startedCollapsedTime)}))}buildCollapseSettings(e,t){return{classNames:[],collapseMobileSizeType:ft.Medium,collapseType:t,elementSelector:e.elementSelector,enabled:!0,mobileHeaderSelector:e.mobileHeaderSelector,mobileLocation:e.mobileLocation,pageSelector:e.pageSelector,position:e.position,saveVideoCloseState:e.saveVideoCloseState,skip:e.skip,title:e.title}}};QO=w([D(`VideoManagerComponent`),x(),N(0,b(fC)),N(1,b(on)),N(2,b(hO)),N(3,b(J)),N(4,b(W)),N(5,b(Ww)),N(6,b(Dy)),N(7,b(mp)),N(8,b(dp)),N(9,b(PS)),N(10,b(Qf)),N(11,b(P)),N(12,b(xc)),N(13,b(pc)),N(14,b(Ma)),N(15,b(lp)),N(16,b(ZO))],QO);let $O=class extends I{constructor(e){super(),this._footerEventBus=e}init(){this._footerEventBus.footerRenderEnded.on(e=>{e&&setTimeout(()=>{this._checkIsFooterRibbon()},500)})}_checkIsFooterRibbon(){document.querySelectorAll(`.raptive-sales.raptive-sales-footer.raptive-sales-vidrbn`).length?this._footerEventBus.footerVideoRibbonStateChanged.emit(!0):this._footerEventBus.footerVideoRibbonStateChanged.emit(!1)}get enabled(){return z()}};$O=w([x(),N(0,b(Pr))],$O);let ek=class extends I{constructor(e,t,n,r){super(),this._config=e,this._gamEventBus=t,this._emailCaptureEventBus=n,this._slots=r,C(this,`_adsOfInterest`,new Set([H.Footer,H.Video_StickyInstream,H.Video_StickyOutstream])),C(this,`_viewportSize`,[window.innerWidth,window.innerHeight]),C(this,`_slickstreamHeartbeat`,null),C(this,`_emailServiceProviderSelectors`,new Set([`div[id$="-optin"]`])),C(this,`_loggedEmailPopups`,new Set(`div[id$="-optin"]`)),C(this,`_deviceType`,No()),C(this,`operatingSystem`,Po())}init(){this._gamEventBus.slotOnload.on(({slotId:e})=>this._getAdCoverage(e)),this._slickstreamHeartbeat=document.querySelector(`slick-heartbeat`),this._addOptinMonsterPopupEventListener()}start(){this._getSlickstreamCoverage()}_getSlickstreamCoverage(){let e=this._slickstreamHeartbeat&&this._slickstreamHeartbeat.shadowRoot;if(e){let t=e.querySelector(`#iconsPanel`);t&&this._logCoverage(`slickstream`,{panelSize:this._getSizeFromElement(t)})}}_addOptinMonsterPopupEventListener(){this._emailCaptureEventBus.selectorFound.on(e=>{this._emailServiceProviderSelectors.has(e.selector)&&this._getEmailCoverage(e)})}_getEmailCoverage(e){let{selector:t,providerName:n,divs:r}=e;r.length&&r.forEach(e=>{if(!this._loggedEmailPopups.has(e.id)){let r=this._getSizeFromElement(e);this._logCoverage(`email`,{divSelector:t,size:r,divId:e.id,providerName:n}),this._loggedEmailPopups.add(e.id)}})}_getAdCoverage(e){let t=this._slots.get(e);t&&this._adsOfInterest.has(t.location)&&setTimeout(()=>{let e=this._getAdDimensions(t);this._logCoverage(`ad`,e)},2e3)}_getAdDimensions(e){let t=this._config.prebid.targetingKeyMap,n=e.googleTagSlot.getTargeting(t.SIZE)[0]??``,r=e.googleTagSlot.getTargeting(t.BIDDER)[0]??``,i=this._getSizeFromElement(e.element),a=e.element.firstElementChild?.cloneNode(!0),o=this._getSizeFromElement(a),s=a.firstElementChild?.cloneNode(!0),c=this._getSizeFromElement(s);return e.location.includes(H.Video_StickyOutstream)?{adSlotSize:i,hbSize:n,gptContainerSize:o,iframeSize:c,stickyOutstreamContainerSize:this._getStickyOutstreamContainerSize(),hbBidder:r,location:e.location}:{adSlotSize:i,hbSize:n,gptContainerSize:o,iframeSize:c,hbBidder:r,location:e.location}}_getSizeFromElement(e){let t=[this._getSizeFromRectangle.bind(this),this._getSizeFromOffsetProperties.bind(this),this._getSizeFromNamedWidthAndHeightAttributes.bind(this),this._getSizeFromNamedStyleAttribute.bind(this)];for(let n of t){let t=n(e);if(!this._invalidSize(t))return t}return[-1,-1]}_getSizeFromRectangle(e){let t=e.getBoundingClientRect(),n=t.height;return[t.width,n]}_getSizeFromOffsetProperties(e){return[e.offsetWidth,e.offsetHeight]}_getSizeFromNamedWidthAndHeightAttributes(e){let t=+(e.attributes.getNamedItem(`width`)?.nodeValue??-1),n=+(e.attributes.getNamedItem(`height`)?.nodeValue??-1);return[t,n]}_getSizeFromNamedStyleAttribute(e){let t=e.attributes.getNamedItem(`style`)?.nodeValue,n=[-1,-1];return t?.replace(/\s/g,``).split(`;`).forEach(e=>{let[t,r]=e.split(`:`);t===`width`?n[0]=parseInt(r):t===`height`&&(n[1]=parseInt(r))}),n}_getStickyOutstreamContainerSize(){let e=document.querySelector(`#adthrive-stickyoutstream-container`);if(e)return this._getSizeFromElement(e)}_logCoverage(e,t){E.event(`ViewportCoverageComponent`,`_logCoverage`,this._constructLog(e,t))}_constructLog(e,t){return{coverageType:e,data:t,viewportSize:this._viewportSize,deviceType:this._deviceType,operatingSystem:this.operatingSystem}}_invalidSize(e){let[t,n]=e;return n===t&&t<=1||!n||!t}};ek=w([S(),N(0,b(J)),N(1,b(X)),N(2,b(rm)),N(3,b(Y))],ek);let tk=class extends V{init(){this._key=`WakeLockDurationMultiplier`,this._lookup=`WLDM`}run(){return super.run()}};w([R()],tk.prototype,`run`,null),tk=w([S()],tk);let nk=class extends I{constructor(e,t,n){super(),this._pageManager=e,this._adOptions=t,this._wakeLockDurationExperiment=n,C(this,`_wakeLock`,null),C(this,`_timeoutId`,null),C(this,`_mobileDefaultDuration`,15),C(this,`_desktopDefaultDuration`,30),C(this,`_scalingFactor`,1),C(this,`convertMinutesToMilliseconds`,e=>e*60*1e3),this._scalingFactor=this._wakeLockDurationExperiment.result??1}init(){this._pageManager.visibilityChange.on(this._handleVisibilityChange.bind(this))}async start(){Tt()?this._pageManager.setupOnceEvent(`click`,()=>void this._acquireWakeLock()):await this._acquireWakeLock()}async _handleVisibilityChange(){document.visibilityState!==`visible`||this._wakeLock&&!this._wakeLock.released||await this._acquireWakeLock()}_getMaxDurationMinutes(){return(It()?this._adOptions.wakeLock?.desktopValue??this._desktopDefaultDuration:this._adOptions.wakeLock?.mobileValue??this._mobileDefaultDuration)*this._scalingFactor}_resetWakeLock(){this._wakeLock=null,this._timeoutId&&clearTimeout(this._timeoutId)}async _acquireWakeLock(){if(!(this._wakeLock&&!this._wakeLock.released))try{this._wakeLock=await navigator.wakeLock.request(`screen`),this._wakeLock.addEventListener(`release`,()=>{this._resetWakeLock()});let e=this._getMaxDurationMinutes();this._timeoutId=setTimeout(()=>{this._wakeLock&&this._wakeLock.release().then(()=>{this._wakeLock=null})},this.convertMinutesToMilliseconds(e))}catch{this._resetWakeLock()}}get enabled(){return`wakeLock`in navigator&&this._wakeLockEnabledInAdOptions()}_wakeLockEnabledInAdOptions(){return this._adOptions.wakeLock===void 0?!0:this._adOptions.wakeLock===null?!1:z()||Mo()?this._adOptions.wakeLock.mobileEnabled:It()?this._adOptions.wakeLock.desktopEnabled:!0}};nk=w([S(),D(`WakeLockComponent`),N(0,b(jr)),N(1,b(Kn)),N(2,b(tk))],nk);var rk,ik,ak=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType(`navigation`)[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},ok=function(e){if(document.readyState===`loading`)return`loading`;var t=ak();if(t){if(e<t.domInteractive)return`loading`;if(t.domContentLoadedEventStart===0||e<t.domContentLoadedEventStart)return`dom-interactive`;if(t.domComplete===0||e<t.domComplete)return`dom-content-loaded`}return`complete`},sk=function(e){var t=e.nodeName;return e.nodeType===1?t.toLowerCase():t.toUpperCase().replace(/^#/,``)},ck=function(e,t){var n=``;try{for(;e&&e.nodeType!==9;){var r=e,i=r.id?`#`+r.id:sk(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?`.`+r.classList.value.trim().replace(/\s+/g,`.`):``);if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+`>`+n:i,r.id)break;e=r.parentNode}}catch{}return n},lk=-1,uk=function(){return lk},dk=function(e){addEventListener(`pageshow`,(function(t){t.persisted&&(lk=t.timeStamp,e(t))}),!0)},fk=function(){var e=ak();return e&&e.activationStart||0},pk=function(e,t){var n=ak(),r=`navigate`;return uk()>=0?r=`back-forward-cache`:n&&(document.prerendering||fk()>0?r=`prerender`:document.wasDiscarded?r=`restore`:n.type&&(r=n.type.replace(/_/g,`-`))),{name:e,value:t===void 0?-1:t,rating:`good`,delta:0,entries:[],id:`v4-${Date.now()}-${Math.floor(8999999999999*Math.random())+0xe8d4a51000}`,navigationType:r}},mk=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},hk=function(e,t,n,r){var i,a;return function(o){t.value>=0&&(o||r)&&((a=t.value-(i||0))||i===void 0)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?`poor`:e>t[0]?`needs-improvement`:`good`}(t.value,n),e(t))}},gk=function(e){document.addEventListener(`visibilitychange`,(function(){document.visibilityState===`hidden`&&e()}))},_k=function(e){var t=!1;return function(){t||=(e(),!0)}},vk=-1,yk=function(e){document.visibilityState===`hidden`&&vk>-1&&(vk=e.type===`visibilitychange`?e.timeStamp:0,bk())},bk=function(){removeEventListener(`visibilitychange`,yk,!0),removeEventListener(`prerenderingchange`,yk,!0)},xk=function(e){document.prerendering?addEventListener(`prerenderingchange`,(function(){return e()}),!0):e()},Sk=0,Ck=1/0,wk=0,Tk=function(e){e.forEach((function(e){e.interactionId&&(Ck=Math.min(Ck,e.interactionId),wk=Math.max(wk,e.interactionId),Sk=wk?(wk-Ck)/7+1:0)}))},Ek=function(){return rk?Sk:performance.interactionCount||0},Dk=function(){`interactionCount`in performance||rk||(rk=mk(`event`,Tk,{type:`event`,buffered:!0,durationThreshold:0}))},Ok=[],kk=new Map,Ak=0,jk=function(){var e=Math.min(Ok.length-1,Math.floor((Ek()-Ak)/50));return Ok[e]},Mk=[],Nk=function(e){if(Mk.forEach((function(t){return t(e)})),e.interactionId||e.entryType===`first-input`){var t=Ok[Ok.length-1],n=kk.get(e.interactionId);if(n||Ok.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};kk.set(r.id,r),Ok.push(r)}Ok.sort((function(e,t){return t.latency-e.latency})),Ok.length>10&&Ok.splice(10).forEach((function(e){return kk.delete(e.id)}))}}},Pk=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=_k(e),document.visibilityState===`hidden`?e():(n=t(e),gk(e)),n},Fk=[200,500],Ik=function(e,t){`PerformanceEventTiming`in self&&`interactionId`in PerformanceEventTiming.prototype&&(t||={},xk((function(){Dk();var n,r=pk(`INP`),i=function(e){Pk((function(){e.forEach(Nk);var t=jk();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,n())}))},a=mk(`event`,i,{durationThreshold:t.durationThreshold??40});n=hk(e,r,Fk,t.reportAllChanges),a&&(a.observe({type:`first-input`,buffered:!0}),gk((function(){i(a.takeRecords()),n(!0)})),dk((function(){Ak=Ek(),Ok.length=0,kk.clear(),r=pk(`INP`),n=hk(e,r,Fk,t.reportAllChanges)})))})))},Lk=[],Rk=[],zk=0,Bk=new WeakMap,Vk=new Map,Hk=-1,Uk=function(e){Lk=Lk.concat(e),Wk()},Wk=function(){Hk<0&&(Hk=Pk(Gk))},Gk=function(){Vk.size>10&&Vk.forEach((function(e,t){kk.has(t)||Vk.delete(t)}));var e=Ok.map((function(e){return Bk.get(e.entries[0])})),t=Rk.length-50;Rk=Rk.filter((function(n,r){return r>=t||e.includes(n)}));for(var n=new Set,r=0;r<Rk.length;r++){var i=Rk[r];Xk(i.startTime,i.processingEnd).forEach((function(e){n.add(e)}))}var a=Lk.length-1-50;Lk=Lk.filter((function(e,t){return e.startTime>zk&&t>a||n.has(e)})),Hk=-1};Mk.push((function(e){e.interactionId&&e.target&&!Vk.has(e.interactionId)&&Vk.set(e.interactionId,e.target)}),(function(e){var t,n=e.startTime+e.duration;zk=Math.max(zk,e.processingEnd);for(var r=Rk.length-1;r>=0;r--){var i=Rk[r];if(Math.abs(n-i.renderTime)<=8){(t=i).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},Rk.push(t)),(e.interactionId||e.entryType===`first-input`)&&Bk.set(e,t),Wk()}));var Kk,qk,Jk,Yk,Xk=function(e,t){for(var n,r=[],i=0;n=Lk[i];i++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;r.push(n)}return r},Zk=function(e,t){ik||=mk(`long-animation-frame`,Uk),Ik((function(t){var n=function(e){var t=e.entries[0],n=Bk.get(t),r=t.processingStart,i=n.processingEnd,a=n.entries.sort((function(e,t){return e.processingStart-t.processingStart})),o=Xk(t.startTime,i),s=e.entries.find((function(e){return e.target})),c=s&&s.target||Vk.get(t.interactionId),l=[t.startTime+t.duration,i].concat(o.map((function(e){return e.startTime+e.duration}))),u=Math.max.apply(Math,l),d={interactionTarget:ck(c),interactionTargetElement:c,interactionType:t.name.startsWith(`key`)?`keyboard`:`pointer`,interactionTime:t.startTime,nextPaintTime:u,processedEventEntries:a,longAnimationFrameEntries:o,inputDelay:r-t.startTime,processingDuration:i-r,presentationDelay:Math.max(u-i,0),loadState:ok(t.startTime)};return Object.assign(e,{attribution:d})}(t);e(n)}),t)},Qk={passive:!0,capture:!0},$k=new Date,eA=function(e,t){Kk||(Kk=t,qk=e,Jk=new Date,rA(removeEventListener),tA())},tA=function(){if(qk>=0&&qk<Jk-$k){var e={entryType:`first-input`,name:Kk.type,target:Kk.target,cancelable:Kk.cancelable,startTime:Kk.timeStamp,processingStart:Kk.timeStamp+qk};Yk.forEach((function(t){t(e)})),Yk=[]}},nA=function(e){if(e.cancelable){var t=(e.timeStamp>0xe8d4a51000?new Date:performance.now())-e.timeStamp;e.type==`pointerdown`?function(e,t){var n=function(){eA(e,t),i()},r=function(){i()},i=function(){removeEventListener(`pointerup`,n,Qk),removeEventListener(`pointercancel`,r,Qk)};addEventListener(`pointerup`,n,Qk),addEventListener(`pointercancel`,r,Qk)}(t,e):eA(t,e)}},rA=function(e){[`mousedown`,`keydown`,`touchstart`,`pointerdown`].forEach((function(t){return e(t,nA,Qk)}))};let iA=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`INPExperiment`,this._lookup=`INP`}};iA=w([S()],iA);let aA=class extends I{constructor(e){super(),this.inpExperiment=e}init(){Zk(this.logInpWithAttribution.bind(this),{reportAllChanges:!0})}logInpWithAttribution(e){E.event(`AttributionINPComponent`,`logInpWithAttribution`,e)}get enabled(){return Ct()&&this.inpExperiment.result}};aA=w([D(`AttributionINPComponent`),S(),N(0,b(iA))],aA);let oA=e=>e.id?`id:${e.id}`:e.classList&&e.classList.value?`class:${e.classList.value.split(` `).join(`.`)}`:`node:${e.nodeName.toLowerCase()}`,sA={good:`good`,needsImprovement:`needs improvement`,poor:`poor`},cA=class extends I{constructor(e,t,n){super(),this._pageManager=e,this._loggerEventBus=t,this._inpExperiment=n,C(this,`_existingInteractions`,new Map),C(this,`_totalInteractionEvents`,0),C(this,`_observer`,void 0),C(this,`_maxCharsAvailableInSendEvent`,0),C(this,`_currentContextualDataSize`,0),C(this,`_lengthOfCurrentLogRequest`,0),C(this,`_logData`,{INPData:[]})}init(){this._observer=this._createPerformanceObserver(),this._observer.observe({type:`event`,buffered:!0,durationThreshold:0}),this._pageManager.pageHide.on(()=>{this._logINPEventsData(),this._logINPCounts()}),this._currentContextualDataSize=encodeURIComponent(JSON.stringify(E.data)).length,this._setMaxCharsAvailableToLog(),this._loggerEventBus.newContextDataEncodingSize.on(e=>this._updateCharLimits(e))}_createPerformanceObserver(){return new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this._isEntryPerformanceEventTimingType(e)&&this._hasNonZeroInteractionId(e)&&this._processEntry(e)})})}_processEntry(e){let t=e.interactionId,n=this._getInteractionEventInfo(e),r=this._existingInteractions.get(t);(!r||n.inp>r.maxINP)&&this._updateINPForInteraction(t,n);let i={...n,interactionId:t};this._updateINPLog(i),this._totalInteractionEvents++}_isEntryPerformanceEventTimingType(e){return e.entryType===`event`}_hasNonZeroInteractionId(e){return!!e.interactionId&&e.interactionId!==0}_getInteractionEventInfo(e){let t=e.duration,n=e.startTime,r=e.processingStart,i=e.processingEnd,a=e.target;return{inp:t,startTime:n,startDelay:r-n,processingStart:r,processingEnd:i,processingTime:i-r,...this._getTargetIdentifiers(a),qualitativeScore:this._getQualitativeINPScore(t),eventType:e.name}}_updateINPForInteraction(e,t){let n={maxINP:t.inp,qualitativeScore:t.qualitativeScore};this._existingInteractions.set(e,n)}_setMaxCharsAvailableToLog(){let e=E.buildRequestUrl(`event`,`INPComponent`,`_logINPEventsData`,[]).length,t=this._calculateCharsOfEncodedDataObject(this._logData)+this._calculateCharsFromEncodedCommas(1);this._maxCharsAvailableInSendEvent=E.maxCloudFrontUrlSize-e-t}_updateCharLimits(e){let t=this._maxCharsAvailableInSendEvent;this._maxCharsAvailableInSendEvent+=this._currentContextualDataSize-e,this._currentContextualDataSize=e,this._maxCharsAvailableInSendEvent<t&&this._lengthOfCurrentLogRequest>=this._maxCharsAvailableInSendEvent&&this._saveExcessEventsAndLogRemaining()}_saveExcessEventsAndLogRemaining(){let e=[];for(;this._lengthOfCurrentLogRequest>=this._maxCharsAvailableInSendEvent;){let t=this._logData.INPData.pop();if(t){e.push(t);let n=this._countAdditionalEncodedChars(t);this._lengthOfCurrentLogRequest-=n}}e.forEach(e=>this._updateINPLog(e))}_countAdditionalEncodedChars(e){let t=!!this._logData.INPData.length;return this._calculateCharsOfEncodedDataObject(e)+(t?this._calculateCharsFromEncodedCommas(1):0)}_updateINPLog(e){let t=this._countAdditionalEncodedChars(e);t+this._lengthOfCurrentLogRequest>this._maxCharsAvailableInSendEvent&&(this._logINPEventsData(),this._clearLogData(),this._lengthOfCurrentLogRequest=0),this._addINPData(e),this._lengthOfCurrentLogRequest+=t}_addINPData(e){this._logData.INPData.push(e)}_logINPEventsData(){E.event(`INPComponent`,`_logINPEventsData`,this._logData)}_logINPCounts(){let e=-1/0;for(let[,t]of this._existingInteractions.entries())t.maxINP>e&&(e=t.maxINP);E.event(`INPComponent`,`_logINPCounts`,{...this._getNumberOfEventsAndInteractions(),maxINP:e})}_clearLogData(){this._logData.INPData.length=0}_calculateCharsOfEncodedDataObject(e){return encodeURIComponent(JSON.stringify(e)).length}_calculateCharsFromEncodedCommas(e){return e*3}_getTargetIdentifiers(e){let t={nodeIdentifier:``,innerText:``};return e instanceof HTMLElement?(t.nodeIdentifier=oA(e),t.innerText=e.innerText&&e.innerText.length<300?e.innerText:``,t):(e instanceof Node&&(t.nodeIdentifier=`node:${e.nodeName}`),t)}_getQualitativeINPScore(e){return e<=200?sA.good:e<=500?sA.needsImprovement:sA.poor}_getNumberOfEventsAndInteractions(){return{totalInteractions:this._existingInteractions.size,totalInteractionEvents:this._totalInteractionEvents}}get enabled(){return`PerformanceObserver`in window&&PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes(`event`)&&`interactionId`in PerformanceEventTiming.prototype&&this._inpExperiment.result}};cA=w([D(`INPComponent`),x(),N(0,b(jr)),N(1,b(Je)),N(2,b(iA))],cA);var lA,uA,dA,fA,pA,mA=-1,hA=function(e){addEventListener(`pageshow`,(function(t){t.persisted&&(mA=t.timeStamp,e(t))}),!0)},gA=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType(`navigation`)[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},_A=function(){var e=gA();return e&&e.activationStart||0},vA=function(e,t){var n=gA(),r=`navigate`;return mA>=0?r=`back-forward-cache`:n&&(document.prerendering||_A()>0?r=`prerender`:document.wasDiscarded?r=`restore`:n.type&&(r=n.type.replace(/_/g,`-`))),{name:e,value:t===void 0?-1:t,rating:`good`,delta:0,entries:[],id:`v4-${Date.now()}-${Math.floor(8999999999999*Math.random())+0xe8d4a51000}`,navigationType:r}},yA=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},bA=function(e,t,n,r){var i,a;return function(o){t.value>=0&&(o||r)&&((a=t.value-(i||0))||i===void 0)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?`poor`:e>t[0]?`needs-improvement`:`good`}(t.value,n),e(t))}},xA=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},SA=function(e){document.addEventListener(`visibilitychange`,(function(){document.visibilityState===`hidden`&&e()}))},CA=function(e){var t=!1;return function(){t||=(e(),!0)}},wA=-1,TA=function(){return document.visibilityState!==`hidden`||document.prerendering?1/0:0},EA=function(e){document.visibilityState===`hidden`&&wA>-1&&(wA=e.type===`visibilitychange`?e.timeStamp:0,OA())},DA=function(){addEventListener(`visibilitychange`,EA,!0),addEventListener(`prerenderingchange`,EA,!0)},OA=function(){removeEventListener(`visibilitychange`,EA,!0),removeEventListener(`prerenderingchange`,EA,!0)},kA=function(){return wA<0&&(wA=TA(),DA(),hA((function(){setTimeout((function(){wA=TA(),DA()}),0)}))),{get firstHiddenTime(){return wA}}},AA=function(e){document.prerendering?addEventListener(`prerenderingchange`,(function(){return e()}),!0):e()},jA=[1800,3e3],MA=function(e,t){t||={},AA((function(){var n,r=kA(),i=vA(`FCP`),a=yA(`paint`,(function(e){e.forEach((function(e){e.name===`first-contentful-paint`&&(a.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-_A(),0),i.entries.push(e),n(!0)))}))}));a&&(n=bA(e,i,jA,t.reportAllChanges),hA((function(r){i=vA(`FCP`),n=bA(e,i,jA,t.reportAllChanges),xA((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))},NA=function(e){var t=e.nodeName;return e.nodeType===1?t.toLowerCase():t.toUpperCase().replace(/^#/,``)},PA=function(e,t){var n=``;try{for(;e&&e.nodeType!==9;){var r=e,i=r.id?`#`+r.id:NA(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?`.`+r.classList.value.trim().replace(/\s+/g,`.`):``);if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+`>`+n:i,r.id)break;e=r.parentNode}}catch{}return n},FA=[.1,.25],IA=function(e,t,n){t||={},MA(CA((function(){var r,i=vA(`CLS`,0),a=0,o=[],s=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],r=o[o.length-1];a&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(a+=e.value,o.push(e)):(a=e.value,o=[e])}if(n&&typeof n==`function`){var i=e.sources.map((function(e){var t=e.node,n=e.previousRect,r=e.currentRect;return{target:PA(t),previousRect:n,currentRect:r}}));n(Object.assign(e.toJSON(),{sources:i}))}})),a>i.value&&(i.value=a,i.entries=o,r())},c=yA(`layout-shift`,s);c&&(r=bA(e,i,FA,t.reportAllChanges),SA((function(){s(c.takeRecords()),r(!0)})),hA((function(){a=0,i=vA(`CLS`,0),r=bA(e,i,FA,t.reportAllChanges),xA((function(){return r()}))})),setTimeout(r,0))})))},LA=0,RA=1/0,zA=0,BA=function(e){e.forEach((function(e){e.interactionId&&(RA=Math.min(RA,e.interactionId),zA=Math.max(zA,e.interactionId),LA=zA?(zA-RA)/7+1:0)}))},VA=function(){return lA?LA:performance.interactionCount||0},HA=function(){`interactionCount`in performance||lA||(lA=yA(`event`,BA,{type:`event`,buffered:!0,durationThreshold:0}))},UA=[],WA=new Map,GA=0,KA=function(){var e=Math.min(UA.length-1,Math.floor((VA()-GA)/50));return UA[e]},qA=[],JA=function(e){if(qA.forEach((function(t){return t(e)})),e.interactionId||e.entryType===`first-input`){var t=UA[UA.length-1],n=WA.get(e.interactionId);if(n||UA.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};WA.set(r.id,r),UA.push(r)}UA.sort((function(e,t){return t.latency-e.latency})),UA.length>10&&UA.splice(10).forEach((function(e){return WA.delete(e.id)}))}}},YA=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=CA(e),document.visibilityState===`hidden`?e():(n=t(e),SA(e)),n},XA=[200,500],ZA=function(e,t){`PerformanceEventTiming`in self&&`interactionId`in PerformanceEventTiming.prototype&&(t||={},AA((function(){HA();var n,r=vA(`INP`),i=function(e){YA((function(){e.forEach(JA);var t=KA();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,n())}))},a=yA(`event`,i,{durationThreshold:t.durationThreshold??40});n=bA(e,r,XA,t.reportAllChanges),a&&(a.observe({type:`first-input`,buffered:!0}),SA((function(){i(a.takeRecords()),n(!0)})),hA((function(){GA=VA(),UA.length=0,WA.clear(),r=vA(`INP`),n=bA(e,r,XA,t.reportAllChanges)})))})))},QA=[2500,4e3],$A={},ej=function(e,t,n){t||={},AA((function(){var r,i=kA(),a=vA(`LCP`),o=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<i.firstHiddenTime&&(a.value=Math.max(e.startTime-_A(),0),n&&n(e,a.value,PA(e.element)),a.entries=[e],r())}))},s=yA(`largest-contentful-paint`,o);if(s){r=bA(e,a,QA,t.reportAllChanges);var c=CA((function(){$A[a.id]||(o(s.takeRecords()),s.disconnect(),$A[a.id]=!0,r(!0))}));[`keydown`,`click`].forEach((function(e){addEventListener(e,(function(){return YA(c)}),{once:!0,capture:!0})})),SA(c),hA((function(n){a=vA(`LCP`),r=bA(e,a,QA,t.reportAllChanges),xA((function(){a.value=performance.now()-n.timeStamp,$A[a.id]=!0,r(!0)}))}))}}))},tj=[800,1800],nj=function e(t){document.prerendering?AA((function(){return e(t)})):document.readyState===`complete`?setTimeout(t,0):addEventListener(`load`,(function(){return e(t)}),!0)},rj=function(e,t){t||={};var n=vA(`TTFB`),r=bA(e,n,tj,t.reportAllChanges);nj((function(){var i=gA();i&&(n.value=Math.max(i.responseStart-_A(),0),n.entries=[i],r(!0),hA((function(){n=vA(`TTFB`,0),(r=bA(e,n,tj,t.reportAllChanges))(!0)})))}))},ij={passive:!0,capture:!0},aj=new Date,oj=function(e,t){uA||(uA=t,dA=e,fA=new Date,lj(removeEventListener),sj())},sj=function(){if(dA>=0&&dA<fA-aj){var e={entryType:`first-input`,name:uA.type,target:uA.target,cancelable:uA.cancelable,startTime:uA.timeStamp,processingStart:uA.timeStamp+dA};pA.forEach((function(t){t(e)})),pA=[]}},cj=function(e){if(e.cancelable){var t=(e.timeStamp>0xe8d4a51000?new Date:performance.now())-e.timeStamp;e.type==`pointerdown`?function(e,t){var n=function(){oj(e,t),i()},r=function(){i()},i=function(){removeEventListener(`pointerup`,n,ij),removeEventListener(`pointercancel`,r,ij)};addEventListener(`pointerup`,n,ij),addEventListener(`pointercancel`,r,ij)}(t,e):oj(t,e)}},lj=function(e){[`mousedown`,`keydown`,`touchstart`,`pointerdown`].forEach((function(t){return e(t,cj,ij)}))},uj=[100,300],dj=function(e,t){t||={},AA((function(){var n,r=kA(),i=vA(`FID`),a=function(e){e.startTime<r.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},o=function(e){e.forEach(a)},s=yA(`first-input`,o);n=bA(e,i,uj,t.reportAllChanges),s&&(SA(CA((function(){o(s.takeRecords()),s.disconnect()}))),hA((function(){var r;i=vA(`FID`),n=bA(e,i,uj,t.reportAllChanges),pA=[],dA=-1,uA=null,lj(addEventListener),r=a,pA.push(r),sj()})))}))};let fj=class{constructor(){C(this,`_enabled`,void 0),this._enabled=new rn(.01).get()}handleEvent(e){E.event(`CustomCLSReporter`,`handleEvent`,e)}get enabled(){return this._enabled}};fj=w([D(`CustomCLSReporter`),S()],fj);let pj=class{constructor(){C(this,`_enabled`,void 0),this._enabled=new rn(.02).get()}handleEvent(e,t,n){E.event(`CustomLCPReporter`,`handleEvent`,{...e.toJSON(),lcpValue:t,elementSelector:n})}get enabled(){return this._enabled}};pj=w([D(`CustomLCPReporter`),S()],pj);let mj=class extends I{constructor(e,t,n,r){super(),this._bootstrapConfig=e,this._googleAdManager=t,this._customCLSReporter=n,this._customLCPReporter=r,C(this,`_maxTimeOnPage`,36e5),C(this,`_webVitals`,[]),C(this,`_webVitalsSent`,!1),C(this,`_visibilityChangeOff`,void 0)}init(){cD().then(()=>{let e=this.addWebVital.bind(this);dj(e),IA(e,{reportAllChanges:!0,durationThreshold:0},this._customCLSReporter.enabled?this._customCLSReporter.handleEvent:void 0),ej(e,{reportAllChanges:!0},this._customLCPReporter.enabled?this._customLCPReporter.handleEvent:void 0),MA(e),ZA(e,{reportAllChanges:!0}),rj(e),document.addEventListener(`visibilitychange`,()=>this.logWebVitals(),{once:!0})}).catch(()=>!1),setTimeout(()=>{this.logWebVitals()},this._maxTimeOnPage)}addWebVital({name:e,delta:t,value:n,id:r}){this._webVitals.push({name:e,delta:t,value:n,id:r})}_getFlagTargeting(){try{return this._googleAdManager.getTargetingValuesForKey(`flag`)}catch{return[]}}logWebVitals(){if(this._webVitalsSent)return;let e=this._getFlagTargeting(),t={webVitals:this._webVitals,DOMSize:document.querySelectorAll(`*`).length,gptLoad:!0,gptv:googletag&&googletag.getVersion&&googletag.getVersion(),flagTargeting:e};this._webVitalsSent=!0,this._visibilityChangeOff?.(),this._bootstrapConfig.gptLibFailedToLoad&&(t.gptLoad=!1),E.fetchEvent(`WebVitalsComponent`,`logWebVital`,t)}get enabled(){return this._bootstrapConfig.webVitalsEnabled}};mj=w([D(`WebVitalsComponent`),x(),N(0,b(on)),N(1,b(Z)),N(2,b(fj)),N(3,b(pj))],mj);let hj=class extends I{constructor(e,t){super(),this._slots=e,this._slotManagerEventBus=t}init(){let e=!1;this._slots.bidServed.on(t=>{let n=t.servedPrebidBidResponse&&(t.servedPrebidBidResponse.bidder===G.Yieldmo||t.servedPrebidBidResponse.bidder===G.YieldmoAY);t.location===H.Footer&&n&&(e=!0)}),this._slotManagerEventBus.refreshing.on(t=>{if(this._slots.get(t).filter(e=>e.location===H.Footer).length>0&&e){e=!1;let t=document.querySelectorAll(`[class^="ym-adhesion"]`)[0]?.closest(`.ym`);t&&t?.remove()}})}};hj=w([x(),N(0,b(Y)),N(1,b($f))],hj);let gj=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,ee,te,ne,re,ie,ae,oe,se,ce,le,ue,de,fe,pe,me,he,ge,_e,ve,ye,be,xe,Se,Ce,we,Te,Ee,De,Oe,ke,Ae,je,Me,Ne,Pe,Fe,Ie,Le,Re,y,ze,b,Be,x,Ve,S,He,Ue,We,w,Ge,Ke,T,qe,Je,Ye,Xe,E,Ze,Qe,$e,et,tt,nt,D,rt,it,at,ot,O,st,ct,k,lt,ut,A,dt){C(this,`_components`,void 0),C(this,`_deferrableComponents`,void 0),this._components=[t,n,r,i,a,o,c,l,u,d,f,p,m,h,_,v,ee,te,ne,re,ie,ae,oe,se,ce,le,ue,de,pe,he,fe,ge,_e,ve,ye,be,xe,Se,Ce,we,Te,Ee,De,Oe,$e,ke,Ae,je,Me,Ne,Ie,Le,Re,Pe,Fe,y,x,lt,Ve,S,He,me,We,Ue,w,Ge,Ke,T,Je,Ze,Qe,tt,rt,nt,D,O,st,k,A],this._deferrableComponents=[ut,s,at,g,Xe,qe,e,ct,ot,ze,b,Be,Ye,E,it,et,dt]}init(e=!1){(e?this._deferrableComponents:this._components).forEach(e=>{try{e.init&&e.enabled&&e.init()}catch(t){E.error(`Components`,`init`,`${e.constructor.name} failed to initialize:`,t)}})}start(e=!1){(e?this._deferrableComponents:this._components).forEach(e=>{try{e.start&&e.enabled&&e.start()}catch(t){E.error(`Components`,`start`,`${e.constructor.name} failed to start:`,t)}})}};gj=w([D(`Components`),x(),N(0,b(TD)),N(1,b(xC)),N(2,b(jD)),N(3,b(RC)),N(4,b(IC)),N(5,b(GC)),N(6,b(MD)),N(7,b(tO)),N(8,b(zC)),N(9,b(nw)),N(10,b(nO)),N(11,b(KC)),N(12,b(qC)),N(13,b(aO)),N(14,b(ow)),N(15,b(Uw)),N(16,b(ND)),N(17,b(Hw)),N(18,b(tT)),N(19,b(UT)),N(20,b(nT)),N(21,b(sT)),N(22,b(cT)),N(23,b(pp)),N(24,b(jT)),N(25,b(MT)),N(26,b(FD)),N(27,b(zT)),N(28,b(fE)),N(29,b(oT)),N(30,b(BT)),N(31,b(HT)),N(32,b(oO)),N(33,b(VT)),N(34,b(hE)),N(35,b(ID)),N(36,b(GT)),N(37,b(qT)),N(38,b(YT)),N(39,b(LD)),N(40,b(ZT)),N(41,b($T)),N(42,b(sO)),N(43,b(vE)),N(44,b(mE)),N(45,b(cO)),N(46,b(HC)),N(47,b(fT)),N(48,b(xD)),N(49,b(ED)),N(50,b(OD)),N(51,b(BD)),N(52,b(YD)),N(53,b(ZD)),N(54,b(xE)),N(55,b(KD)),N(56,b(VD)),N(57,b(bE)),N(58,b(zp)),N(59,b(dE)),N(60,b($D)),N(61,b(eO)),N(62,b(dO)),N(63,b(fO)),N(64,b(lO)),N(65,b(pO)),N(66,b(yO)),N(67,b(ih)),N(68,b(bO)),N(69,b(QO)),N(70,b($O)),N(71,b(mj)),N(72,b(oD)),N(73,b(bC)),N(74,b(Qs)),N(75,b($w)),N(76,b(mO)),N(77,b(cA)),N(78,b(aA)),N(79,b(AD)),N(80,b(nk)),N(81,b(SD)),N(82,b(rD)),N(83,b(jE)),N(84,b(gC)),N(85,b(ek)),N(86,b(XC)),N(87,b(hC)),N(88,b(ew)),N(89,b(FT)),N(90,b(zD)),N(91,b(JC)),N(92,b(aw)),N(93,b(PC)),N(94,b(hj)),N(95,b(Gw))],gj);let _j=class extends Xe{};_j=w([x()],_j);let vj=new _j,yj=class extends I{constructor(e,t){super(),this._config=e,this._consentEventBus=t,C(this,`_consented`,void 0),C(this,`_cssPrefix`,`adthrive-act25`),C(this,`_modal`,null),C(this,`_footer`,null),C(this,`_footerLink`,null),C(this,`_footerLinkOptOutText`,`Ne vendez pas ou ne partagez pas mes informations personnelles / Do not sell or share my personal information`),C(this,`_footerLinkOptInText`,`Personnalisez mon exprience publicitaire / Customize my ad experience`),C(this,`_storageKey`,`adthrive_act25-consent`),C(this,`_timer`,null),C(this,`_timeout`,3e4),C(this,`_storageTimeout`,13),this._consented=this._config.act25.consented}get consented(){return this._consented}get modal(){return this._modal}get footer(){return this._footer}init(){this._modal=this._createConsentModal(),this._footer=this._createFooterElement(),this._consented===null?(this._modal?.classList.add(`show`),this._startTimer()):this._consentEventBus.act25consentCaptured.emit(this._consented),this._injectFooterElement()}checkConsent(){return new Promise(e=>{this._consented!==null&&e(this._consented),this._consentEventBus.act25consentCaptured.on(t=>{this._timer&&=(clearTimeout(this._timer),null),e(t)})})}_createConsentModal(){if(this._modal)return this._modal;let e=document.createElement(`div`);e.className=`${this._cssPrefix}-modal`;let t=document.createElement(`div`);t.className=`${this._cssPrefix}-modal-content`;let n=document.createElement(`span`);n.className=`${this._cssPrefix}-modal-close`,n.innerText=``,n.addEventListener(`click`,()=>this._handleClose());let r=document.createElement(`div`);r.className=`${this._cssPrefix}-modal-body`,r.innerHTML=`
    <p>
    Soucieux doffrir une exprience optimale, nous et nos partenaires utilisons des technologies telles que les cookies pour enregistrer et/ou accder
    aux informations des appareils. Le consentement  ces technologies nous permettra,  nous et  nos partenaires, de traiter des donnes personnelles
    telles que le comportement de navigation ou les identifiants uniques sur ce site. Les cookies dposs par nos partenaires ou fournisseurs tiers sont
    des cookies tiers dposs dans le but de placer des publicits sur nos produits et Services sur dautres sites web. Lutilisation des cookies par
    ces tiers est rgie par leurs politiques de confidentialit.
    </p>
    <p>
    Cliquez sur  accepter  ou  dclin  ci-dessous. Vous pouvez mettre  jour vos choix  tout moment en cliquant sur ne vendez pas en
    bas de la page.
    </p>

    <br />

    <p>
    To provide the best experiences, we and our partners use technologies like cookies to store and/or access device information.
    Consenting to these technologies will allow us and our partners to process personal data such as browsing behavior or unique IDs on this site.
    Cookies placed by our partners or third-party suppliers are third-party cookies placed for the purpose of placing advertisements on our products
    and Services on other websites. The use of cookies by these third parties is governed by their privacy policies.
    </p>
    <p>
    Click "accept" or decline" below. You can update your choices at any time by clicking on the Do not sell link in the bottom of the page.
    </p>
    `;let i=document.createElement(`div`);i.className=`${this._cssPrefix}-modal-footer`;let a=document.createElement(`button`);a.className=`${this._cssPrefix}-modal-accept`,a.innerText=`Accepter/Accept`,a.addEventListener(`click`,()=>this._handleAccept());let o=document.createElement(`button`);return o.className=`${this._cssPrefix}-modal-decline`,o.innerText=`Dclin/Decline`,o.addEventListener(`click`,()=>this._handleDecline()),r.appendChild(n),i.appendChild(o),i.appendChild(a),t.appendChild(r),t.appendChild(i),e.appendChild(t),document.body.appendChild(e),e}_createFooterElement(){if(this._footer)return this._footer;let e=document.createElement(`div`);e.className=`${this._cssPrefix}-footer`;let t=document.createElement(`p`);t.className=`${this._cssPrefix}-footer-text`,t.innerText=`
    Les informations de votre appareil peuvent tre utilises pour personnaliser votre exprience publicitaire. /
      Information from your device can be used to personalize your ad experience.`;let n=document.createElement(`a`);return n.innerText=this._consented?this._footerLinkOptOutText:this._footerLinkOptInText,n.className=`${this._cssPrefix}-footer-link`,n.addEventListener(`click`,()=>this._handleFooterLinkClick(this._consented??!1)),this._footerLink=n,e.appendChild(t),e.appendChild(n),e}_injectFooterElement(){if(Dr(`adt_clickwrap_footer`)!==null)return;let e=this._config.footer.elements;this._footer&&e.find(e=>e.element===this._footer)||e.push({order:1,element:this._footer})}_destroyConsentModal(){this._modal?.classList.remove(`show`)}_handleAccept(){this._toggleConsent(!0),E.event(`Act25EnforcementComponent`,`handleUserAction`,`qbccmp:acc`)}_handleDecline(){this._toggleConsent(!1),E.event(`Act25EnforcementComponent`,`handleUserAction`,`qbccmp:dec`)}_handleClose(){this._toggleConsent(!1),E.event(`Act25EnforcementComponent`,`handleUserAction`,`qbccmp:clo`)}_handleTimeout(){this._toggleConsent(!1),E.event(`Act25EnforcementComponent`,`handleUserAction`,`qbccmp:tim`)}_handleFooterLinkClick(e){e?this._handleDecline():this._modal?.classList.add(`show`)}_toggleConsent(e){L.setExpirableInternalLocalStorage(this._storageKey,e,{expiry:{value:this._storageTimeout,unit:`months`}}),this._consented=e,this._destroyConsentModal(),this._updateFooterLink(e),this._consentEventBus.act25consentCaptured.emit(e)}_updateFooterLink(e){this._footerLink&&(this._footerLink.innerText=e?this._footerLinkOptOutText:this._footerLinkOptInText)}_startTimer(){this._timer=window.setTimeout(()=>{this._handleTimeout()},this._timeout)}};yj=w([D(`Act25EnforcementComponent`),S(),N(0,b(J)),N(1,b(un))],yj);let bj=class{constructor(e,t){this.pageviewKey=e,this.pageManager=t}start(){let e=L.readSessionStorage(`previousUrl`),t=L.readSessionStorage(`previousPVK`),n=L.readSessionStorage(`previousPageHide`),r=L.readSessionStorage(`previousBeforeUnload`);this.pageManager.beforeUnload.on(()=>{L.setSessionStorage(`previousBeforeUnload`,!0)}),this.pageManager.pageHide.on(()=>{L.setSessionStorage(`previousPageHide`,!0)});let i=Xn();if(e&&e===window.location.href){let e=L.readSessionStorage(`previousLoadTime`),a=e?Zn(e,i):void 0,o=performance.getEntriesByType(`navigation`)[0]?.type;o===`navigate`&&n===!1&&cw(),E.event(`PageRefreshMonitor`,`refresh`,{timeSinceLastLoad:a,navigationType:o,legacyNavigationType:window.performance?.navigation?.type,previousPVK:t,previousPageHide:n,previousBeforeUnload:r})}L.setSessionStorage(`previousUrl`,window.location.href),L.setSessionStorage(`previousLoadTime`,i),L.setSessionStorage(`previousPVK`,this.pageviewKey),L.setSessionStorage(`previousPageHide`,!1),L.setSessionStorage(`previousBeforeUnload`,!1)}};bj=w([x(),N(0,b(`PageviewKey`)),N(1,b(jr))],bj);let xj=class{constructor(e,t,n,r,i){this._slotEventBus=e,this._pageManager=t,this._prebidEventBus=n,this._gamEventBus=r,this._videoEventProxy=i,C(this,`_adRequests`,0),C(this,`_adSlots`,0),C(this,`_prebidResponses`,0),C(this,`_prebidResponseCPMs`,[]),C(this,`_domContentLoaded`,-1/0),C(this,`_startTime`,-1/0),C(this,`_timeOnPage`,-1/0),C(this,`_timeToFirstAdReq`,-1/0),C(this,`_displayImpressions`,0),C(this,`_videoImpressions`,0)}init(){this._slotEventBus.requestingBids.once(()=>this._setTimeToFirstAdRequest()),this._slotEventBus.requestingBids.on(()=>this._adRequested()),this._slotEventBus.addSlots.on(e=>this._addSlots(e.length)),this._gamEventBus.slotRenderEnded.on(({event:e})=>{e&&!e.isEmpty&&this._addDisplaySlotImpression()}),this._videoEventProxy.videoSlotRendered.on(e=>{e&&!e.isEmpty&&this._addVideoSlotImpression()}),this._trackDomContentLoadedAndStartTime(),this._pageManager.beforeUnload.on(()=>{this._calculateTimeOnPage(),this._sendCounts()}),this._prebidEventBus.bidWon.on(e=>{this._prebidResponses++,this._prebidResponseCPMs.push(Number(e.cpm.toFixed(2)))})}_setTimeToFirstAdRequest(){this._timeToFirstAdReq=this._domContentLoaded===-1/0?-1/0:Qe.now()-this._domContentLoaded}_adRequested(){this._adRequests++}_addSlots(e){this._adSlots+=e}_addDisplaySlotImpression(){this._displayImpressions++}_addVideoSlotImpression(){this._videoImpressions++}_trackDomContentLoadedAndStartTime(){let e=window.performance?.getEntriesByType(`navigation`);if(e&&e[0]){let{domContentLoadedEventEnd:t,startTime:n}=e[0];typeof t==`number`&&t>=0&&(this._domContentLoaded=e[0].domContentLoadedEventEnd),typeof n==`number`&&n>=0&&(this._startTime=e[0].startTime)}}_calculateTimeOnPage(){this._timeOnPage=this._startTime===-1/0?-1/0:Qe.now()-this._startTime}_sendCounts(){vj.event(`SystemPulse`,`counts`,{adRequests:this._adRequests,prebidsWon:this._prebidResponses,prebidCPMs:this._prebidResponseCPMs,adSlots:this._adSlots,displayImps:this._displayImpressions,videoImps:this._videoImpressions,timeToFirstAdReq:this._timeToFirstAdReq,timeOnPage:this._timeOnPage})}};xj=w([S(),N(0,b(Hs)),N(1,b(jr)),N(2,b(Qf)),N(3,b(X)),N(4,b(Dy))],xj);let Sj=class extends Vr{init(){this._setAbGroup=!1,this._key=`DialDownLogsExperiment2`,this._lookup=`DSLE2`,this._default=[`none`]}};Sj=w([S()],Sj);let Cj=class extends I{constructor(e,t){super(),this._config=e,this._consentEventBus=t,C(this,`_cssPrefix`,`adthrive-us-cmp`),C(this,`_modal`,null),C(this,`_footer`,null),C(this,`_footerLink`,null),C(this,`_footerLinkOptOutText`,`Do not sell or share my personal information.`),C(this,`_footerLinkOptInText`,`Customize my ad experience.`),C(this,`_timer`,null),C(this,`_timeout`,25e3)}get modal(){return this._modal}get footer(){return this._footer}init(){if(this._modal=this._createConsentModal(),this._footer=this._createFooterElement(),this._shouldSkipCmp()){let e=this._config.usCMP.consent??!!this._config.usCMP.defaultOptIn;this._consentEventBus.usCmpConsentCaptured.emit(e)}else this._config.usCMP.consent===null?(this._modal?.classList.add(`show`),this._startTimer(),this._config.usCMP.defaultOptIn&&this._consentEventBus.usCmpConsentCaptured.emit(!0)):this._consentEventBus.usCmpConsentCaptured.emit(this._config.usCMP.consent);this._injectFooterElement()}checkConsent(){return new Promise(e=>{this._config.usCMP.consent!==null&&e(this._config.usCMP.consent),this._consentEventBus.usCmpConsentCaptured.on(t=>{this._timer&&=(clearTimeout(this._timer),null),e(t)},{handleEventsAlreadyEmitted:!0})})}_createConsentModal(){if(this._modal)return this._modal;let e=document.createElement(`div`);e.className=`${this._cssPrefix}-modal`;let t=document.createElement(`div`);t.className=`${this._cssPrefix}-modal-content`;let n=document.createElement(`span`);n.className=`${this._cssPrefix}-modal-close`,n.innerText=``,n.addEventListener(`click`,()=>this._handleClose());let r=document.createElement(`div`);r.className=`${this._cssPrefix}-modal-body`;let i=this._config.usCMP.termsOfServiceUrl?`${this._config.usCMP.termsOfServiceUrl}/#skip-cmp=1`:`#`,a=this._config.usCMP.privacyPolicyUrl?`${this._config.usCMP.privacyPolicyUrl}/#skip-cmp=1`:`#`,o=`
      <p>
    To provide the best experiences, we and our partners use technologies like cookies to store and/or access device information.
    Consenting to these technologies will allow us and our partners to process personal data such as browsing behavior or unique IDs on this site.
    Cookies placed by our partners or third-party suppliers are third-party cookies placed for the purpose of placing advertisements on our products
    and Services on other websites. The use of cookies by these third parties is governed by their privacy policies.
    </p>`;this._config.usCMP.strictMode?o+=`<p>Your use of this website is subject to your agreement to the <a href="${i}" target="_blank" rel="noopener noreferrer">Terms of Service</a> and <a href="${a}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>. The Terms of Service contain a binding arbitration clause and other important terms. You may not use the website if you do not agree to the Terms of Service and Privacy Policy.</p>`:o+=`<p>
        Click "accept" or decline" below. You can update your choices at any time by clicking on the Do not sell link in the bottom of the page.
        </p>`,r.innerHTML=o;let s=document.createElement(`div`);s.className=`${this._cssPrefix}-modal-footer`;let c=document.createElement(`button`);c.className=`${this._cssPrefix}-modal-accept ${this._config.usCMP.strictMode?`adthrive-us-cmp-modal-accept-strict-mode`:``}`,c.innerText=`Accept`,c.addEventListener(`click`,()=>this._handleAccept());let l=document.createElement(`button`);return l.className=`${this._cssPrefix}-modal-decline`,l.innerText=`Decline`,l.addEventListener(`click`,()=>this._handleDecline()),this._config.usCMP.strictMode||(r.appendChild(n),s.appendChild(l)),s.appendChild(c),t.appendChild(r),t.appendChild(s),e.appendChild(t),document.body.appendChild(e),e}_createFooterElement(){if(this._footer)return this._footer;let e=document.createElement(`div`);e.className=`${this._cssPrefix}-footer`;let t=document.createElement(`p`);t.className=`${this._cssPrefix}-footer-text`,t.innerText=`Information from your device can be used to personalize your ad experience.`;let n=document.createElement(`a`),r=this._config.usCMP.defaultOptIn?!0:this._config.usCMP.consent;return n.innerText=r?this._footerLinkOptOutText:this._footerLinkOptInText,n.className=`${this._cssPrefix}-footer-link`,n.addEventListener(`click`,()=>this._handleFooterLinkClick(r??!1)),this._footerLink=n,e.appendChild(t),e.appendChild(n),e}_injectFooterElement(){if(Dr(`adt_clickwrap_footer`)!==null)return;let e=this._config.footer.elements;this._footer&&e.find(e=>e.element===this._footer)||e.push({order:1,element:this._footer})}_destroyConsentModal(){this._modal?.classList.remove(`show`)}_handleAccept(){this._toggleConsent(!0),E.event(`USCMPEnforcementComponent`,`handleUserAction`,`uscmp:acc`)}_handleDecline(){this._toggleConsent(!1),E.event(`USCMPEnforcementComponent`,`handleUserAction`,`uscmp:dec`)}_handleClose(){this._toggleConsent(!1),E.event(`USCMPEnforcementComponent`,`handleUserAction`,`uscmp:clo`)}_handleTimeout(){this._toggleConsent(!0),E.event(`USCMPEnforcementComponent`,`handleUserAction`,`uscmp:tim`)}_handleFooterLinkClick(e){e?this._handleDecline():this._modal?.classList.add(`show`)}_toggleConsent(e){this._consentEventBus.usCmpConsentCaptured.emit(e),this._destroyConsentModal(),this._updateFooterLink(e)}_updateFooterLink(e){this._footerLink&&(this._footerLink.innerText=e?this._footerLinkOptOutText:this._footerLinkOptInText)}_startTimer(){this._timer=window.setTimeout(()=>{this._handleTimeout()},this._timeout)}_shouldSkipCmp(){let e=window.location.search??``,t=window.location.hash??``;return this._hasSkipCmpParam(e)||this._hasSkipCmpParam(t)}_hasSkipCmpParam(e){return/(?:^|[?#&])skip-cmp=1(?:&|$)/.test(e)}};Cj=w([D(`USCMPEnforcementComponent`),S(),N(0,b(J)),N(1,b(un))],Cj);let wj=e=>e.indexOf(`hbs-q`)===0,Tj=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p){this.cls=e,this.config=t,this.context=n,this.cmd=r,this.slotManager=i,this.slots=a,this._auctionManagers=o,this._coreExperimentConfig=s,this._googleAdManager=c,this._components=l,this._siteExperimentEventBus=u,this._realizedAdDensityEventBus=d,this._identityEventBus=f,this._consentEventBus=p,C(this,`branch`,void 0),C(this,`bucket`,void 0),C(this,`invalidTraffic`,void 0),C(this,`deployment`,void 0),C(this,`abgroup`,void 0),C(this,`pubab`,void 0),C(this,`plugin`,void 0),C(this,`siteAds`,void 0),C(this,`buildDate`,void 0),C(this,`coreExperiments`,void 0),C(this,`windowPerformance`,void 0),C(this,`deliveryFeatures`,void 0),C(this,`cookieDeprecationLabel`,void 0),C(this,`preloadLibResults`,void 0),C(this,`marmalade`,{mcmp:null}),C(this,`marmaladeFinished`,e=>e),C(this,`raptiveFloorsFinished`,e=>e),C(this,`rubiconFloorsFinished`,e=>e),C(this,`trafficShapingFinished`,e=>e),C(this,`rbcridFinished`,e=>e),C(this,`cv2Finished`,e=>e),C(this,`api`,{browserStorage:{setLocalStorage:L.setExternalLocalStorage.bind(L),readLocalStorage:L.readExternalLocalStorage.bind(L),setInternalLocalStorage:L.setInternalLocalStorage.bind(L)}}),C(this,`_identipyApiReady`,new Promise(e=>e(!1))),C(this,`_adDensityReady`,new Promise(e=>e(!1))),this.bucket=this.context.bucket,this.branch=this.context.branch,this.invalidTraffic=this.context.invalidTraffic,this.deployment=this.context.deployment,this.abgroup=this.config.abGroup.groups,this.pubab=this.config.pubAbGroup.groups,this.siteAds=window.adthrive.siteAds,this.buildDate=window.adthrive.buildDate,this.windowPerformance=window.adthrive.windowPerformance,this.marmaladeFinished=window.adthrive.marmaladeFinished||this.marmaladeFinished,this.raptiveFloorsFinished=window.adthrive.raptiveFloorsFinished||this.raptiveFloorsFinished,this.trafficShapingFinished=window.adthrive.trafficShapingFinished||this.trafficShapingFinished,this.rbcridFinished=window.adthrive.rbcridFinished||this.rbcridFinished,this.cv2Finished=window.adthrive.cv2Finished||this.cv2Finished,this.coreExperiments=this._coreExperimentConfig.coreExperiments,this.deliveryFeatures=window.adthrive.deliveryFeatures,this.cookieDeprecationLabel=window.adthrive.cookieDeprecationLabel,this.preloadLibResults=window.adthrive.preloadLibResults||{},this.siteAds.targeting={push:e=>this._googleAdManager.setTargeting(e)},this._siteExperimentEventBus.targetingReady.on(()=>{this.pubab=this.config.pubAbGroup.groups,this._googleAdManager.setTargeting({key:`pubab`,value:this.pubab})}),Vt().get(`at_sticky`)===`off`&&this.clearSticky()}async init(){let e=rc.markStartTask(`microtask`,[`index`,`setupAdthrive`,`after-yield`,`1`]),t=wj(window.adthrive.bucket)||Math.random()<.01;t&&this.cmd.push(()=>vj.event(`AdThrive`,`init`,`hcstart`)),this._identipyApiReady=new Promise(e=>this._identityEventBus.identityApiReady.on(()=>e(!0),{handleEventsAlreadyEmitted:!0})),this._adDensityReady=new Promise(e=>this._realizedAdDensityEventBus.realizedAdDensityCompReady.on(()=>e(!0)));let n=e=>{e.data={abgroup:this.config.abGroup.groupsAsObject,pubab:this.config.pubAbGroup.groupsAsObject,sess:this.context.sessionKey,pvk:this.context.pageviewKey,hbho:this.config.hbho.bidders,vbho:this.config.vbho.bidders,spa:this.config.adOptions.spa,...this.context.deliveryVersion&&{lmdv:this.context.deliveryVersion},...this.cls&&this.cls.branch&&{clsBranch:this.cls.branch},...this.cls&&this.cls.bucket&&{clsBucket:this.cls.bucket}}},r=y.resolve(Sj);y.resolve(Je).dialDownLogs.emit({result:r.result,choices:r._choices}),n(E),E.sending.on(()=>n(E)),vj.sending.on(()=>n(vj)),e.markEndTask(),await vc();let i=rc.markStartTask(`microtask`,[`index`,`setupAdthrive`,`after-yield`,`2`]);if(this.cmd.init(),this._auctionManagers.init(),this._googleAdManager.init(),y.resolve(xj).init(),this.config.act25.required){let e=y.resolve(yj);e.init();let t=e.checkConsent();i.markEndTask(),await t}else if(this.config.usCMP.required){let e=y.resolve(Cj);if(e.init(),this.config.usCMP.defaultOptIn)i.markEndTask();else{let t=e.checkConsent();i.markEndTask(),await t}}else i.markEndTask();await vc(),y.resolve(bj).start(),Lt()&&lw()&&cn.isRolloutEnabled(`disable-sticky-outstream-ios-refresh`)&&(this.config.video.preventStickyOutstream=!0);let a=rc.markStartTask(`microtask`,[`index`,`setupAdthrive`,`after-yield`,`3`]);this._components.init(),a.markEndTask(),await vc();let o=rc.markStartTask(`microtask`,[`index`,`setupAdthrive`,`after-yield`,`3b`]);this._components.init(!0),o.markEndTask(),await vc();let s=rc.markStartTask(`microtask`,[`index`,`setupAdthrive`,`after-yield`,`4`]);this._googleAdManager.start(),this._components.start(),this._components.start(!0),this.cls&&this.cls.error&&E.error(`AdThrive`,`init`,`Problem with AdThriveCLS SiteAds. CLS Disabled`),t&&vj.event(`AdThrive`,`init`,`hcend`),s.markEndTask(),await vc();let c=rc.markStartTask(`microtask`,[`index`,`setupAdthrive`,`after-yield`,`5`]);new URLSearchParams(window.location.search).get(`womm`)===`true`&&Ih(`https://ads.adthrive.com/debug/womm.js`).then(()=>{}).catch(()=>{E.error(`AdThrive`,`init`,`Error loading womm`)}),c.markEndTask()}identityApi(e,t){return this._identipyApiReady.then(()=>{this._identityEventBus.identityApiDataSubmitted.emit({data:e,cb:t})})}disableAds(e){this.config.disableAds.disableAllAds(e)}disableContentAds(e){this.config.disableAds.disableContentAds(e)}disablePlaylistPlayers(e){this.config.disableAds.disablePlaylistPlayers(e)}showPrivacyPreferences(){window.__tcfapi&&window.__tcfapi(`showGDPRScreenAdvanced`)}showCCPAModal(){this._consentEventBus.showCCPAModal.emit()}getConsentData(){window.__tcfapi&&window.__tcfapi(`getTCData`,2,e=>{})}getAdthriveFlippData(){return this.config.marmalade.flpProdIds.filter(ki)}setTargetingFlag(e,t,n=!1){!e||typeof e!=`string`||!t||!Array.isArray(t)||t.length===0||this._googleAdManager.setTargetingFlag(e,t,n)}setTargeting(e){this._googleAdManager.setTargeting(e)}getTargeting(){return this._googleAdManager.getTargeting()}getTargetingMap(){return this._googleAdManager.getTargetingMap()}logError(e,t,n){E.error(e,t,n)}log(e,t,n,r){switch(e){case`error`:E.error(t,n,r);break;case`info`:break;case`log`:E.log(t,n,r);break;case`warn`:break}}refreshSlots(e){let t=this.slots.get();e&&e.length&&(t=t.filter(t=>e.includes(t.id))),t.forEach(e=>{this.slotManager.refresh(e,!1).then(()=>{this.slotManager.clearRefreshTimeout(e,!0)}).catch(()=>{})})}nmr(){return E.event(`adthrive`,`nmr`,`adthrive.nmr() has been called`),this.slotManager.updateRefreshTimeout(this.slots.get(),0)}clearSticky(){E.event(`adthrive`,`clearSticky`,`adthrive.clearSticky() has been called`),L.deleteLocalStorage(`adthrive_abgroup`),L.deleteLocalStorage(`adt_pe`)}async getAdDensity(){let e=null;return await this._adDensityReady.then(()=>{this._realizedAdDensityEventBus.metricsRequested.emit(t=>e=t)}).catch(()=>{}),e}logAdDensity(){this._adDensityReady.then(()=>{this._realizedAdDensityEventBus.metricsRequested.emit(e=>{})}).catch(()=>{})}};Tj=w([D(`AdThrive`),S(),N(0,b(pr)),N(1,b(J)),N(2,b(W)),N(3,b(pC)),N(4,b(eS)),N(5,b(Y)),N(6,b(fC)),N(7,b(Yt)),N(8,b(Z)),N(9,b(gj)),N(10,b(Dn)),N(11,b(CD)),N(12,b($s)),N(13,b(un))],Tj);let Ej=class{constructor(e,t,n){this._bootstrapConfig=e,this._ccpaConfig=t,this._marmaladeEventBus=n,C(this,`_host`,`https://${this._bootstrapConfig.host}`),C(this,`_baseUrl`,this._bootstrapConfig.baseUrl),C(this,`_frame`,document.createElement(`iframe`))}async start(){this._ccpaConfig.enabled||(await this.addIframeToPage(),this._marmaladeEventBus.marmaladeResponseLoaded.on(e=>{let t=e.recencyFrequency;Array.isArray(t)&&t.length&&this.setMcmpData(t)},{handleEventsAlreadyEmitted:!0}),this._ccpaConfig.consentChange.on(e=>{e===this._ccpaConfig.ccpaOptOut&&this.deleteMcmpData()}))}get recencyFrequencyIframeLocation(){return`${this._baseUrl}/html/rnf.html`}addIframeToPage(){let e,t=new Promise(t=>{e=t});this._frame.onload=()=>{e()};try{this._frame.src=this.recencyFrequencyIframeLocation,this._frame.id=`adthrive-mcmp`,this._frame.style.display=`none`,document.body.appendChild(this._frame)}catch(e){E.error(`RecencyAndFrequencyIFrameManager`,`addIframeToPage`,`Failed to append rnf iframe to document`,e)}return t}deleteMcmpData(){try{this._frame.contentWindow&&this._frame.contentWindow.postMessage({message:`deleteMcmpData`},this._host)}catch(e){E.error(`RecencyAndFrequencyIFrameManager`,`deleteMcmpData`,`Failed to delete mcmp data`,e)}}setMcmpData(e){try{this._frame.contentWindow&&(window.addEventListener(`message`,e=>{let t=e.data,n=t.message;e.origin===this._host&&n===`mcmpDataResponse`&&this._marmaladeEventBus.recencyFrequencyDataSet.emit(t.mcmpData)}),this._frame.contentWindow.postMessage({message:`setMcmpData`,mcmpData:e},this._host))}catch(e){E.error(`RecencyAndFrequencyIFrameManager`,`setMcmpData`,`Failed to set mcmp data`,e)}}};Ej=w([D(`RecencyAndFrequencyIFrameManager`),S(),N(0,b(on)),N(1,b(U)),N(2,b(Oi))],Ej);let Dj=class{constructor(e,t,n){this._bootstrapConfig=t,this._amazonMethods=n,C(this,`type`,at.Amazon),C(this,`wait`,!0),C(this,`_url`,`https://c.aps.amazon-adsystem.com/apstag.js`),C(this,`_link`,`https://c.aps.amazon-adsystem.com`),C(this,`_amazonUAM`,void 0),this._amazonUAM=e.siteAds.adOptions.amazonUAM}async load(){return this._bootstrapConfig.amazonEnabled&&this._amazonUAM?(this._init(),this._bootstrapConfig.isAmazonPreloaded?Promise.resolve(!0):(this._addAmazonLinks(),this._addApstag())):Promise.resolve(!1)}async _addApstag(){let e=await Ih(this._url,!1,!1,!0);return this._bootstrapConfig.amazonLibFailedToLoad=!1,e}_addAmazonLinks(){let e=this._link;JD(e,`dns-prefetch`),JD(e,`preconnect`,[{name:`crossorigin`,value:``}])}_init(){this._amazonMethods.isAmazonLoaded()||this._amazonMethods.setupAmazonWindow((e,t)=>{this._amazonMethods.queuePush(e,t)})}};Dj=w([D(`AmazonBootstrap`),x(),N(0,b(`AdThrive`)),N(1,b(on)),N(2,b(Pp))],Dj);var Oj=class{constructor(e,t){this._bootstrapConfig=e,this._bootstrapEventBus=t}async run(){return this.loadNonBlockingLibraries(),Promise.all([cD(),...this._dependencies])}loadNonBlockingLibraries(){let e;this._orderedLibraryList.forEach(t=>{let n=t.type,r=this._run(()=>{let r=t.load().catch(r=>{throw n===at.GAM&&(this.gamFallback(r?.message??r?.result,e),e.then(e=>{this._bootstrapEventBus[`${n}LibraryLoadComplete`].emit(Promise.resolve(e))}).catch(()=>!1)),this._bootstrapEventBus.libraryLoadFailed.emit({bootstrapType:t.type}),r instanceof Error?r:Error(typeof r==`string`?r:JSON.stringify(r))});return this._bootstrapConfig.bootstrapLoaders[t.type]=r,r},t.type,{wait:t.wait}).then(e=>(this._bootstrapEventBus[`${t.type}LibraryLoadComplete`].emit(Promise.resolve(e)),e)).catch(()=>!1);t.type===at.Marmalade&&(e=r)})}async gamFallback(e,t){return this._bootstrapConfig.gptLibFailedToLoad=!0,this._bootstrapConfig.webVitalsEnabled||(this._bootstrapConfig.webVitalsEnabled=!0),t.then(t=>Promise.reject({message:e,marmalade:t}))}_run(e,t,{required:n=!1,wait:r=!0}={}){let i=$e(),a=e=>{let n=$e(),r={result:e,started:i,finished:n,duration:n-i};return this._bootstrapConfig.bootstrapResult.set(t,r),r},o=e().then(a,e=>(E.error(`Bootstrap`,`_start error`,t,e),n?Promise.reject(a(e.message)):a(e.message)));return this._forceWait||r?o:Promise.resolve(a(!0))}};let kj=class{constructor(e,t){this._creativeBlock=t,C(this,`type`,at.cridBlock),C(this,`wait`,!1),C(this,`_timeout`,1500),C(this,`_enabled`,void 0),C(this,`_isCv2Enabled`,!1),e.deliveryFeatures?.includes(`cv2`)?(this._enabled=!0,this._isCv2Enabled=!0):e.deliveryFeatures?.includes(`rbcrid`)?this._enabled=!0:this._enabled=!1}async _resolveCreativeIdData(e){let t=await e;if(!t)return{};if(this._isCv2Enabled){let{pmp:e=[],om:n=[],adomains:r=[]}=t;return this._creativeBlock.pmpCrids=e,this._creativeBlock.omCrids=n,this._creativeBlock.adomains=r,t}let n=t.crids;return n?(this._creativeBlock.omCrids=n,t):{}}async load(){if(!this._enabled||!this._creativeBlock.creativeBlockEnabled)return this._resolveCreativeIdData(Promise.resolve({}));let e;if(e=this._isCv2Enabled?window.adthrive.cv2:window.adthrive.rbcrid,e)return this._resolveCreativeIdData(e);let t=new Promise(e=>{this._isCv2Enabled?window.adthrive.cv2Finished=e:window.adthrive.rbcridFinished=e}),n=new Promise(e=>{setTimeout(()=>{e({})},this._timeout)});return await Promise.race([t,n]),this._resolveCreativeIdData(this._isCv2Enabled?window.adthrive.cv2:window.adthrive.rbcrid)}};kj=w([D(`CreativeBlockBootstrap`),x(),N(0,b(`AdThrive`)),N(1,b(Lr))],kj);let Aj=class extends V{init(){this._key=`FloorBootstrap`,this._lookup=`FTO`}run(){return super.run()}};Aj=w([S()],Aj);let jj=class{constructor(e,t){this._floorsConfig=e,this._timeoutExp=t,C(this,`type`,at.Floors),C(this,`wait`,!1),C(this,`_isRaptive`,!1),C(this,`_floorsFinishedTimeout`,this._timeoutExp.result?this._timeoutExp.result*1e3:3e3),this._isRaptive=this._floorsConfig.floorsExperiment.raptive}async _resolveFloorsData(e){let t=await e;return new Promise(e=>{if(t&&Object.keys(t).length)if(`floors`in t){let{floors:n,refreshFloors:r,os:i,browser:a,country:o,hourGroup:s}=t;this._floorsConfig.floorsData=n,this._floorsConfig.raptiveMLRefreshFloors=r,this._floorsConfig.modelTimestamp=n.modelTimestamp??0,this._floorsConfig.floorsDataReady.emit(),this._floorsConfig.os=i,this._floorsConfig.hourGroup=s,this._floorsConfig.browser=a,this._floorsConfig.country=o,e(n)}else e(t);e({})})}async load(){if(!this._isRaptive)return Promise.resolve({});let e=window.adthrive.raptiveFloors;if(e)return this._resolveFloorsData(e);let t=new Promise(e=>{window.adthrive.raptiveFloorsFinished=e}),n=new Promise(e=>{setTimeout(()=>{e({})},this._floorsFinishedTimeout)});return await Promise.race([t,n]),this._resolveFloorsData(window.adthrive.raptiveFloors)}};jj=w([D(`FloorsBootstrap`),x(),N(0,b(ti)),N(1,b(Aj))],jj);let Mj=class{constructor(e){this._bootstrapConfig=e,C(this,`type`,at.GAM),C(this,`wait`,!0),C(this,`_url`,`https://securepubads.g.doubleclick.net/tag/js/gpt.js`)}async load(){if(this._bootstrapConfig.isGPTPreloaded)return Promise.resolve(!0);this.init();let e=await Ih(this._url);return this._bootstrapConfig.gptLibFailedToLoad=!1,e}init(){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[]}};Mj=w([D(`GAMBootstrap`),x(),N(0,b(on))],Mj);let Nj=class extends V{init(){this._key=`MarmaladeBootstrap`,this._lookup=`MTO`}run(){return super.run()}};Nj=w([S()],Nj);let Pj=class{constructor(e,t){this._eventBus=e,this._timeoutExp=t,C(this,`type`,at.Marmalade),C(this,`wait`,!0),C(this,`_marmaladeFinishedTimeout`,this._timeoutExp.result?this._timeoutExp.result*1e3:3e3),C(this,`_timeoutId`,void 0)}setMarmaladeFinishedTimeout(e){this._marmaladeFinishedTimeout=e}async load(){if(window.adthrive.marmalade){let e=await window.adthrive.marmalade;return this._emitMarmaladeResponse(e),e}let e=new Promise(e=>{window.adthrive.marmaladeFinished=t=>(clearTimeout(this._timeoutId),e(t),t)}).then(e=>(this._emitMarmaladeResponse(e),e)),t=new Promise(e=>{this._timeoutId=window.setTimeout(()=>{let t=window.adthrive.marmalade||{};this._emitMarmaladeResponse(t),e(t)},this._marmaladeFinishedTimeout)});return Promise.race([e,t])}_emitMarmaladeResponse(e){e&&Object.keys(e).length>0&&this._eventBus.marmaladeResponseLoaded.emit(e)}};Pj=w([D(`MarmaladeBootstrap`),x(),N(0,b(Oi)),N(1,b(Nj))],Pj);let Fj=class extends F{constructor(...e){super(...e),C(this,`_default`,!1)}init(){this._key=`OptTknEndpoint`,this._lookup=`OTKE`,this.abgroup=`otke`}};Fj=w([S()],Fj);let Ij=class extends V{init(){this._key=`IdentityIframeSyncWait`,this._lookup=`IISW`}};Ij=w([S()],Ij);let Lj=class{constructor(e,t,n,r,i,a,o,s,c,l,u){this._optableStore=e,this._gpcConfig=t,this._ccpaConfig=n,this._context=r,this._user=i,this._emailCaptureHandler=a,this._identityEventBus=o,this._optableSdkWrapper=s,this._identityIframeSyncWaitExperiment=c,this._optableConfig=l,this._idho=u}get enabled(){let e=!this._gpcConfig.gpcEnabled&&!this._ccpaConfig.userOptedOut;return!!this._optableConfig.enabled&&!!e}async start(){if(this.enabled){await vc();try{let e=await this._user.identityData(),t=e?.sha256Hash??e?.sha1Hash,n=!!t,r=e?.collectionMethod===`graph3p`,i=n&&e?.collectionMethod===`liveIntent`,a=n&&r,o=n&&(e?.collectionMethod===`direct`||e?.collectionMethod===`graph1p`);a||i?await this._resolveHemFromGraph({resolveRaptiveDCN:!0,resolveExternalSourceDCN:!1,storeNewHem:!0,storedHem:t}):o?await this._resolveHemFromGraph({resolveRaptiveDCN:!1,resolveExternalSourceDCN:!0,storeNewHem:!1,storedHem:t}):!n&&this._context.isFirstPageview&&await this._resolveHemFromGraph({resolveRaptiveDCN:!0,resolveExternalSourceDCN:!0,storeNewHem:!0,storedHem:t})}catch(e){E.error(`OptableHemResolver`,`start`,e)}finally{this._identityEventBus.optableWaterfallCompleted.emit()}}}async _resolveHemFromGraph(e){let t=[SE.RCID,SE.EMAIL],n=this._user.getRcid().catch(e=>{}),r=Tt()||bt()?Promise.resolve(!1):(async()=>{await this._waitForIdentityIframeSync();let e=await Ko();return!!e&&(e.collectionMethod===`direct`||e.collectionMethod===`graph1p`)})().catch(e=>!1),i;if(e.resolveRaptiveDCN){let e=[];e.push(async()=>{let e=(await n)?.value?.sharedId;return e?this._resolveHemFromRaptiveDCN(e,3,q.PII_SOURCE.VALUES.RCID,t).catch(e=>{}):void 0}),e.push(async()=>{let e=Gp();return e?this._resolveHemFromRaptiveDCN(e,6,q.PII_SOURCE.VALUES.SHID,t).catch(e=>{}):void 0}),e.push(async()=>{let{gpid:e}=this._context;return e?this._resolveHemFromRaptiveDCN(e,0,q.PII_SOURCE.VALUES.GPID,t).catch(e=>{}):void 0}),e.push(async()=>{let e=_m();return e?this._resolveHemFromRaptiveDCN(e,7,q.PII_SOURCE.VALUES.LPID,t).catch(e=>{}):void 0});let r=e.map(e=>e());for(let e of r){let t=await e;if(t?.hem){i=t;break}}}if(!i?.hem&&e.resolveExternalSourceDCN){let{pubmatic:t}=Fm()??{};if(t&&(i=await this._resolveHemFromThirdPartyDCN(e,`pubm`,`c1:`+t).catch(e=>{})),!i?.hem){let t=await n.catch(()=>void 0),r=this._optableConfig.identifierOverride??eD(t?.metadata?.clientIp);i=await this._resolveHemFromThirdPartyDCN(e,`ip`,r).catch(e=>{})}}let a=await r;i&&e.storeNewHem&&!a&&this._emailCaptureHandler.emailCaptured.emit({pii:{sha256Hash:i.hem,source:i.source,sourceCollectedDate:um()},identityDataSource:BE(i.source)?`raptiveDCN`:`externalDCN`}),i?.additionalResolvedIds?.length&&this._identityEventBus.optableIdentitiesCaptured.emit(i.additionalResolvedIds),Up(this._idho,`raptiveDcn1Uid1Id`)&&this._handleUid1Capture(i?.uid1)}async _resolveHemFromRaptiveDCN(e,t,n,r=[]){if(!WE(e)){E.event(`OptableHemResolver`,`_resolveHemFromRaptiveDCN`,`resolveId is not a string or empty`,{resolveId:e});return}let i=await this._optableSdkWrapper.cid(e,t),a=await this._optableSdkWrapper.resolveRaptiveClusters(i);this._identityEventBus.optableRaptiveGraphResolved.emit(a);let o=a.sources.raptive.clusters,s=this._extractIdFromClusters(i,o,r),c=s.get(SE.EMAIL),l=c?.[Math.floor(Math.random()*c.length)],u=l?.id.substring(SE.EMAIL.length),d;Up(this._idho,`raptiveDcn1Uid1Id`)&&!L.readInternalLocalStorage(`adt_uid1`)&&(d=this._extractUid1FromCluster(l?.cluster));let f=u?1:0;if(this._identityEventBus.optableResolveAnalytics.emit(`dcn1-${n}-${f}`),u){let e;if(r.length>0)for(let t of r){let n=s.get(t);n&&(e=[...e??[],...n.map(e=>e.id)])}return{hem:u,source:`${q.PII_SOURCE.PREFIXES.RAPTIVE_AUTH}${n}${q.PII_SOURCE.SUFFIXES.CAPTURE}`,uid1:d,...e&&{additionalResolvedIds:e}}}else return}_extractIdFromClusters(e,t,n){let r=new Map;for(let i of n){let n=[];for(let r of t){if(!r.ids.includes(e))continue;for(let e of r.ids)e.startsWith(i)&&n.push({id:e,cluster:r})}r.set(i,n)}return r}_extractUid1FromCluster(e){if(!e)return;let t=e.ids.find(e=>e.startsWith(SE.UID1));if(t){let n=Nt();if(e.traits.browser&&e.traits.browser.length>0&&e.traits.browser.every(e=>e===n))return t.replace(SE.UID1,``)}}async _resolveHemFromThirdPartyDCN(e,t,n){let r=await this._optableSdkWrapper.resolveThirdPartyClusters(n);L.setInternalLocalStorage(`adt_otpgrd`,r),this._identityEventBus.optableThirdPartyGraphResolved.emit(r),this._optableConfig.loblawEnabled&&r.lmpid&&L.setExternalLocalStorage(q.OPTABLE_LMPID.KEY,r.lmpid);let i=Math.floor(Date.now()/1e3)-2160*60*60,a=[...r.sources.truedata.clusters,...r.sources.mediawallah.clusters].sort((e,t)=>t.traits.lastSeen-e.traits.lastSeen).filter(e=>{let t=e.traits.lastSeen,n=`percentile`in e.traits?e.traits.percentile:void 0;return t?t>=i:n?n>=55:!1}),o=a.reduce((e,t)=>{let n=t.ids.filter(e=>e.startsWith(SE.EMAIL));return[...e,...n]},[]),s=r.sources.truedata.clusters.reduce((e,t)=>{let n=t.ids.filter(e=>e.startsWith(SE.EMAIL));return[...e,...n]},[]),c=o.length>0?1:0;this._identityEventBus.optableResolveAnalytics.emit(`dcn2-${t}-${c}`),o.length>0&&(this._optableStore.truedataHems=s);let l={clusterCount:a.length,hemCount:o.length,traits:a[0]?.traits??{},accuracyResult:{status:`no-stored-hem`},recencyGroup:a[0]?$E(a[0].traits.lastSeen):`NA`};if(e.storedHem){let t=a.filter(t=>t.ids.some(t=>t.includes(e.storedHem))),n=a.reduce((e,n,r)=>t.includes(n)?r:e,-1);n===-1?l.accuracyResult={status:`no-stored-hem`}:(l.accuracyResult={status:`hem-found`,matchingClusterIndex:n},l.traits=a[n]?.traits||[]),E.event(`OptableHemResolver`,`_resolveHemFromExternalSourceDCN`,l)}if(this._identityEventBus.optableResolved.emit(l),!o.length||!e.storeNewHem||!a.length||!o.length)return;let u=o[Math.floor(Math.random()*o.length)],d=SE.EMAIL.length,f=u?.substring(d);if(!WE(f)){E.event(`OptableHemResolver`,`_resolveHemFromExternalSourceDCN`,`Extracted HEM is not a string or empty`,{hem:f});return}let p=this._getHemSourceResolveResponseData(r,u)===`truedata`?q.PII_SOURCE.VALUES.TD:q.PII_SOURCE.VALUES.MW,m=``;if(p&&(t===`pubm`&&(p=(e=>`${e}-${q.PII_SOURCE.VALUES.PUBM}`)(p)),m=`${q.PII_SOURCE.PREFIXES.IDG}${p}${q.PII_SOURCE.SUFFIXES.CAPTURE}`),!(!f||!m))return{hem:f,source:m}}_getHemSourceResolveResponseData(e,t){for(let n of Object.keys(e.sources))for(let r of e.sources[n].clusters)if(r.ids.includes(t))return n;return null}_waitForIdentityIframeSync(){let e=this._identityIframeSyncWaitExperiment.result??0;return new Promise(t=>{let n=setTimeout(()=>{this._identityEventBus.iframeDataSynced.off(r),t()},e),r=()=>{clearTimeout(n),this._identityEventBus.iframeDataSynced.off(r),t()};this._identityEventBus.iframeDataSynced.on(r,{handleEventsAlreadyEmitted:!0})})}_handleUid1Capture(e){let t=L.readInternalLocalStorage(`adt_uid1`);if(!t&&e&&(L.setInternalLocalStorage(`adt_uid1`,e),t=e),t){let e={source:`adserver.org`,matcher:`raptive.com`,inserter:`cafemedia.com`,mm:5,uids:[{atype:1,id:t,ext:{dcn:`dcn1`}}]};this._identityEventBus.optableUid1Captured.emit(e)}}};Lj=w([D(`OptableHemResolver`),S(),N(0,b(hD)),N(1,b(mi)),N(2,b(U)),N(3,b(W)),N(4,b($o)),N(5,b(fm)),N(6,b($s)),N(7,b(AE)),N(8,b(Ij)),N(9,b(Fi)),N(10,b(xi))],Lj);let Rj=class{constructor(e,t,n,r,i,a,o,s){this._optableConfig=t,this._gpcConfig=n,this._ccpaConfig=r,this._optableSdkWrapper=i,this._optableTokenizeEndpointExperiment=a,this._context=o,this._optableHemResolver=s,C(this,`type`,at.Optable),C(this,`wait`,!1),C(this,`_optableTimingData`,{}),C(this,`_siteId`,``),this._siteId=e.siteAds.siteId}async load(){try{if(this._optableTimingData.bootstrapStarted=$e(),await this._checkAndInitSDK(),!this._optableConfig.enabled||this._gpcConfig.gpcEnabled||this._ccpaConfig.userOptedOut)return;this._optableTimingData.bootstrapFinished=$e()}catch(e){E.error(`OptableBootstrap`,`load`,`Failed to bootstrap Optable SDK`,e);return}this._optableTimingData.resolveStarted=$e(),await this._optableHemResolver.start(),this._optableTimingData.resolveFinished=$e(),this._shouldLogTimingData()&&E.event(`OptableBootstrap`,`load`,`Optable timing data`,this._optableTimingData)}async _checkAndInitSDK(){this._optableConfig.enabled&&(this._gpcConfig.gpcEnabled||this._ccpaConfig.userOptedOut||await this._initOptableSDK())}_shouldLogTimingData(){return Math.random()>=.95}async _initOptableSDK(){this._optableSdkWrapper.loaded()||await this._optableSdkWrapper.load(this._siteId,this._context.country??``),this._optableTokenizeEndpointExperiment.result&&this._optableSdkWrapper.setDCNExperiments([`tokenize-v2`]),this._optableConfig.loblawEnabled&&(this._optableSdkWrapper.installGPTSecureSignals().catch(e=>{}),this._optableSdkWrapper.targeting().catch(e=>{}))}};Rj=w([D(`OptableBootstrap`),S(),N(0,b(`AdThrive`)),N(1,b(Fi)),N(2,b(mi)),N(3,b(U)),N(4,b(AE)),N(5,b(Fj)),N(6,b(W)),N(7,b(Lj))],Rj);let zj=class{constructor(e,t,n){this._prebidMethods=e,this._bootstrapEventBus=t,this._bootstrapConfig=n,C(this,`type`,at.Prebid),C(this,`wait`,!0),C(this,`_url`,void 0),C(this,`prebidEventPromise`,void 0),C(this,`_prebidOffEvent`,void 0);let{baseUrl:r,targetPath:i}=this._bootstrapConfig;this._url=`${r}/vendor/prebid${i}/prebid.min.js`,this.prebidEventPromise=new Promise(e=>{this._prebidOffEvent=this._bootstrapEventBus.prebidLibraryLoadComplete.on(()=>{e(),this._prebidOffEvent?.()},{handleEventsAlreadyEmitted:!0})}),this._prebidMethods.setupPrebidWindow(this.prebidEventPromise)}async load(){if(this.init(),this._bootstrapConfig.isPrebidPreloaded)return`preloaded`;let e=await Ih(this._url,!1,!1,!0);return this._bootstrapConfig.prebidLibFailedToLoad=!1,e}init(){}};zj=w([D(`PrebidBootstrap`),x(),N(0,b(P)),N(1,b(st)),N(2,b(on))],zj);let Bj=class{constructor(e,t){this.trafficShaping=t,C(this,`type`,at.TrafficShaping),C(this,`wait`,!1),C(this,`timeout`,3e3),C(this,`trafficShapingDeliveryFeatureEnabled`,!1),this.trafficShapingDeliveryFeatureEnabled=e.deliveryFeatures?.includes(`trafficShaping`)??!1}async _resolveTrafficShapingData(e){let t=await e;return new Promise(e=>{t?.trafficShaping&&t?.trafficShaping?.shaping?.modelGroups?.length?(this.trafficShaping.setupData(t.trafficShaping),e(t)):e({})})}async load(){if(!this.trafficShapingDeliveryFeatureEnabled||!this.trafficShaping.experimentActive)return Promise.resolve({});let e=window.adthrive.trafficShaping;if(e)return this._resolveTrafficShapingData(e);let t=new Promise(e=>{window.adthrive.trafficShapingFinished=e}),n=new Promise(e=>{setTimeout(()=>{e({})},this.timeout)});return await Promise.race([t,n]),this._resolveTrafficShapingData(window.adthrive.trafficShaping)}};Bj=w([D(`TrafficShapingBootstrap`),x(),N(0,b(`AdThrive`)),N(1,b(ea))],Bj);let Vj=class extends Oj{constructor(e,t,n,r,i,a,o,s,c,l,u){super(e,n),this._bootstrapConfig=e,this._user=t,this._bootstrapEventBus=n,this._amazon=r,this._optable=i,this._gam=a,this._marmalade=o,this._prebid=s,this._floors=c,this._trafficShaping=l,this._cridBlock=u,C(this,`_orderedLibraryList`,[this._marmalade,this._gam,this._prebid,this._amazon,this._optable,this._floors,this._trafficShaping,this._cridBlock]),C(this,`_forceWait`,!1),C(this,`_dependencies`,[this._user.getRcid()]),this._bootstrapConfig.isGDPR||y.resolve(Ej).start().catch(e=>{E.error(`Bootstrap`,`constructor`,`Failed to start RecencyAndFrequencyIFrameManager`,e)})}};Vj=w([x(),N(0,b(on)),N(1,b($o)),N(2,b(st)),N(3,b(Dj)),N(4,b(Rj)),N(5,b(Mj)),N(6,b(Pj)),N(7,b(zj)),N(8,b(jj)),N(9,b(Bj)),N(10,b(kj))],Vj);let Hj={domain:`ads.adthrive.com`,branch:`main`,bucket:`prod`,cmp:!0},Uj=[`siteId`,`siteName`,`adOptions`,`breakpoints`,`adUnits`],Wj=(e,t=Uj)=>{if(!e)return window.adthriveCLS&&(window.adthriveCLS.disabled=!0),!1;for(let n=0;n<t.length;n++)if(!e[t[n]])return window.adthriveCLS&&(window.adthriveCLS.disabled=!0),!1;return!0},Gj=()=>{let e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),t=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);return{width:e,height:t}},Kj=()=>{let e=new RegExp(`python,apis,googleweblight,spider,crawler,curl,wget,ia_archiver,insights,baidu,bot,monitor,scraper,A6-Indexer,addthis,admantx,agentslug,alexa,anderspink,apache-httpclient,apachebench,apis-google,appengine-google,ask jeeves,asynchttpclient,awe.sm,baidu,barkrowler,biglotron,bingpreview,brandverify,bubing,butterfly,buzztalk,cf-uc,chatgpt,check_http,cloudflare,cmradar/0.1,coldfusion,comodo ssl checker,convera,copypants,crowsnest,curl,dap/nethttp,daumoa,deepseek,deepseekbot,developers.google.com/+/web/snippet/,digitalpersona fingerprint software,drupact,duckduck,elb-healthchecker,embedly,eoaagent,europarchive,eventmachine httpclient,evrinid,exaleadcloudview,ezooms,ez publish,facebookexternalhit,feedburner,feedfetcher-google,findlink,findthatfile,flipboardproxy,garlik,genieo,getprismatic.com,ghost,gigablast,go http package,google( page speed insights| web preview|google-site-verification|-structured-data-testing-tool|-structureddatatestingtool),gpt,gptbot,hatena,headless,heritrix,htmlparser,http(_request2|client|s|unit),httrack,hubspot,ichiro,icoreservice,idmarch,in(agist|sieve|stapaper),ips-agent,jack,jakarta commons,java,jetslide,jobseeker,js-kit,kimengi,knows.is,kraken,laconica,libwww,lighthouse,linode,lipperhey,longurl,ltx71,lwp-trivial,mappydata,mastodon,mediapartners-google,megaindex.ru,metauri,mfe_expand,mixnode,mon(tastic|tools),moreover,mrchrome,nberta,net(craft|researchserver|state|vibes),newrelicpinger,newspaper,newsme,ning,nightmare,nmap,nutch,online-domain-tools,openai,paessler,page(peek|sinventory|thing),panopta,peerindex,phantomjs,pingdom,plukkie,proximic,pu_in,publiclibraryarchive.org,python-(httplib2|requests|urllib),quanti,queryseeker,quicklook,qwanti,re-animator,readability,rebelmouse,relateiq,riddler,rssmicro,ruby,scrapy,seo-audit,seodiver,seokicks,shopwiki,shortlinktranslate,siege,sincera,sistrix,site24x7,siteexplorer,skypeuripreview,slack,slurp,socialrank,sogou,spinn3r,squider,statuscake,stripe,summify,teeraid,teoma,test certificate info,tineye,traackr,ttd-content,tweetedtimes,twikle,twitjobsearch,twitmunin,twurly,typhoeus,unwindfetch,uptim(e|ia),uptm.io,vagabondo,vb project,vigil,vkshare,wappalyzer,watchsumo,webceo,webdatascout,webmon,webscout,wesee,wget,whatsapp,whatweb,wikido,wordpress,wormly,wotbox,xenu link sleuth,xing-contenttabreceiver,yandex,yanga,yeti,yff35,yourls,zelist.ro,zibb,^Mozilla/5\\.0$,Viv/2`.split(`,`).join(`|`),`i`),t=window.navigator.userAgent.toLowerCase();return e.test(t)};var qj=class{constructor(){C(this,`runTests`,()=>{let e=!1;return window&&document&&(e=[`webdriver`in window,`_Selenium_IDE_Recorder`in window,`callSelenium`in window,`_selenium`in window,`__webdriver_script_fn`in document,`__driver_evaluate`in document,`__webdriver_evaluate`in document,`__selenium_evaluate`in document,`__fxdriver_evaluate`in document,`__driver_unwrapped`in document,`__webdriver_unwrapped`in document,`__selenium_unwrapped`in document,`__fxdriver_unwrapped`in document,`__webdriver_script_func`in document,document.documentElement.getAttribute(`selenium`)!==null,document.documentElement.getAttribute(`webdriver`)!==null,document.documentElement.getAttribute(`driver`)!==null].some(e=>e)),e})}isSelenium(){return this.runTests()}};let Jj=()=>{if(navigator&&navigator.userAgent&&Kj())return`uav`},Yj=()=>{let e=Gj();if(e.width>5e3||e.height>5e3)return`vpv`},Xj=()=>{if(new qj().isSelenium())return`selenium`},Zj=()=>{let e=[Yj(),Jj(),Xj()].filter(e=>!!e);return e.length?e:void 0},Qj=()=>window.adthriveCLS,$j=e=>{let t={index:-1,weight:-1};if(!e||e.length===0)return t;let n=e.reduce((e,t)=>e+t,0);if(n===0)return t;let r=Math.random()*n,i=0,a=e[i];for(;r>a;)a+=e[++i];return{index:i,weight:e[i]}};var eM=class{static isValidExperiment(e){return e.reduce((e,t)=>e+t,0)===100}static setExperimentABGroup(e,t){this._experimentABGroup=`${e}_${t.id}`}static getExperimentConfig(e){let t=e.experimentChoices,n=this.getStickyResult(e);if(n)return this.setExperimentABGroup(e.id,n),n;let r=t.map(e=>e.weight);if(!this.isValidExperiment(r))return;let i=$j(r);this.setExperimentABGroup(e.id,t[i.index]);let a=t[i.index];return this.setStickyResult(e.id,a),a}static get experimentABGroup(){return this._experimentABGroup}static getStickyResult(e){try{let t=L.readInternalLocalStorage(this._localStorageKey);if(!t)return null;let n=t[e.id];return!n||!e.experimentChoices.find(e=>e.id===n.id)?null:n}catch{return E.error(`ProfileExperimentsUtil`,`unabled to parse sticky experiment value`),null}}static setStickyResult(e,t){let n=L.readInternalLocalStorage(this._localStorageKey)||{};n[e]=t,L.setInternalLocalStorage(this._localStorageKey,n)}};C(eM,`_localStorageKey`,`adt_pe`),C(eM,`_experimentABGroup`,null);let tM=()=>{let e=z()?`mobile`:`tablet`;return It(_t)?`desktop`:e},nM=e=>{let t=Ft(),n=tM(),r=e.siteAdsProfiles,i=null;if(r&&r.length)for(let e of r){let r=e.targeting.device,a=e.targeting.browserEngine,o=r&&r.length&&r.includes(n),s=a&&a.length&&a.includes(t);o&&s&&(i=e)}return i};var rM=class{static _getSiteAdsProfile(e){let t=nM(e);return t&&(this._profileID=t.profileId),t}static updateSiteAds(e){let t=this._getSiteAdsProfile(e.siteAds),n=t&&t.experiment?eM.getExperimentConfig(t.experiment):void 0;if(t){let r={adOptions:t.adOptions,adTypes:t.adTypes,videoPlayers:t.videoPlayers};e.siteAds.adOptions=Object.assign(e.siteAds.adOptions,r.adOptions,n?.adOptions),e.siteAds.adTypes&&Object.assign(e.siteAds.adTypes,r.adTypes,n?.adTypes),e.siteAds.videoPlayers&&t.videoPlayers&&(e.siteAds.videoPlayers=Object.assign(e.siteAds.videoPlayers,t.videoPlayers,n?.videoPlayers)),this._profileID=t.profileId.toString(),this.setTargeting(n)}}static get profileID(){return this._profileID}static setTargeting(e){let t=y.resolve(Wt);t.set(`aprf`,this._profileID),e&&eM.experimentABGroup&&t.set(`pe`,eM.experimentABGroup)}static updateBodyClass(){let e=`raptive-profile-${this._profileID}`;this._profileID!==`def`&&!document.body.classList.contains(e)&&document.body.classList.add(e)}};C(rM,`_profileID`,`def`);let iM=class extends qe{constructor(...e){super(...e),C(this,`iframeReady`,new O)}};iM=w([S()],iM);let aM={SetInterestGroupsData:`adthrive_SetInterestGroupsData`},oM=class{constructor(e,t,n,r,i){this._bootstrapConfig=e,this._fledgeConfig=t,this._privacySandboxEventBus=n,this._browserTopicsAPIEventBus=r,this._marmaladeEventBus=i,C(this,`_host`,`https://${this._bootstrapConfig.host}`),C(this,`_frame`,document.createElement(`iframe`)),C(this,`_baseUrl`,this._bootstrapConfig.baseUrl),C(this,`_frameSrc`,`${this._baseUrl.replace(`/gdpr`,``)}/html/ps.html`),this.enabled&&this._addIframeToPage().then(()=>{this._privacySandboxEventBus.iframeReady.emit(),this._setupEventListeners()}).catch(e=>{E.error(`PrivacySandboxIframeManager`,`constructor`,`Failed to initialize Privacy Sandbox iframe`,e)})}get enabled(){return this._fledgeConfig.enabled}setInterestGroups(e){try{if(this._frame.contentWindow){let t={action:aM.SetInterestGroupsData,groupNames:e};this._frame.contentWindow.postMessage(t,this._host)}}catch(e){E.error(`PrivacySandboxIframeManager`,`setInterestGroups`,`Failed to set interest groups.`,e)}}_addIframeToPage(){return new Promise(e=>{this._frame.src=this._frameSrc,this._frame.id=`adthrive-privacy-sandbox`,this._frame.style.display=`none`,this._frame.onload=()=>{e()},document.body.appendChild(this._frame)})}_setupEventListeners(){this._browserTopicsAPIEventBus.topicsReceived.on(e=>{let t=e.map(e=>`${e.id}`);this.setInterestGroups(t)},{handleEventsAlreadyEmitted:!0}),this._marmaladeEventBus.marmaladeResponseLoaded.on(({recencyFrequency:e})=>{let t=e?.map(({rf_code:e})=>e)??[];this.setInterestGroups(t)},{handleEventsAlreadyEmitted:!0})}};oM=w([D(`PrivacySandboxIframeManager`),S(),N(0,b(on)),N(1,b(Yr)),N(2,b(iM)),N(3,b(bc)),N(4,b(Oi))],oM);let sM=class extends $t{constructor(){super(),C(this,`classList`,[`EmailCaptureHandler`]),C(this,`_result`,!1),C(this,`_choices`,[{choice:!0},{choice:!1}]),C(this,`abgroup`,`logfltr`),C(this,`key`,`LoggerFilter`),C(this,`lookup`,`LOGFLTR`),this._result=this.run()}get result(){return this._result}run(){return new rn(0).get()}};sM=w([S()],sM);let cM=()=>[`__nativePromise`,`__nativeURL`,`__nativePerformance`,`__nativeFetch`,`__ElementMatches`,`__HTMLElementBoundingClientRect`].some(e=>Object.prototype.hasOwnProperty.call(window,e)),lM=()=>navigator.userAgent&&(navigator.userAgent.search(/GTmetrix/i)>-1||navigator.userAgent.search(/pingdom/i)>-1||navigator.userAgent.search(/Google Page Speed Insights/i)>-1||navigator.userAgent.search(/Chrome-Lighthouse/i)>-1)?!0:!!cM(),uM=()=>{let e=window?.location?.host;return e?!`megadiscounts.world,securedspot.vip,inrk.info,stealthedealz.world,jiyin.info,groug.com,lifesfouhealth.com,2hihkhkthrg.com,trybox.cyou,andrewgreenbaumdesign.com,lolitatops.com,goapplydeal.com,nexofrost.com,soldes-vetements.store,egobhps.info,negozio-di-valigi.com,zlqwrm.info,flavorjourney.blog,sweethomedigest.com,bakerycakesprices.com,bevvy.co,natureplusme.com,petjurni.com,lifevacs.com,showbizcast.com,metromindful.com,dmnews.com,natureofhome.com,drinkstack.com,hairmotive.com,fluffyplanet.com,hairstylesecrets.com,dogdorable.com,theabsolutefoodie.com,anorganizedchaos.com,mealprepify.com,sawshub.com,photographyforrealestate.net,terrierhub.com,softwaretesttips.com,scripturesavvy.com,stealthygaming.com,androidnature.com,otakusnotes.com,seinenmanga.com,unitopten.com,worldanimalfoundation.org,manthatlooksgood.com,wineandmommytime.org,uvindextoday.com,playerassist.com,factualamerica.com,corexbox.com,linuxways.net,linuxhint.com,brightstuffs.com,hellolidy.com,indoorgardenweb.co,indiagardening.com,cradiori.co,castoroil-guide.com,crocht.com,balconygardenweb.com,parentswonder.net,rennieorchards.com,trickyfish.co,websitebuilderinsider.com,addrecipes.com,skillsrecipes.com,blog.gaminguides.com,fictiontalk.com,farmsunseed.com,petedu.net,wordselector.com,melodyinsight.com,synonympro.com`.split(`,`).find(t=>e.includes(t)):!0},dM=e=>e instanceof Tj||e instanceof Promise,fM=y.resolve(Na),pM=(e,t)=>{fM.loading=e,fM.bootstrapFinished=t},mM=(e,t)=>{fM.gamStarted=e.started,fM.gamFinished=e.finished,fM.gamDuration=e.duration,fM.marmaladeStarted=t.started,fM.marmaladeFinished=t.finished,fM.marmaladeDuration=t.duration},hM=async()=>{await vc();let e=rc.markStartTask(`microtask`,[`index`,`resolveLongAdThriveDependencies`,`1`]),t=y.resolve(J);y.resolve(eS),e.markEndTask(),await vc();let n=rc.markStartTask(`microtask`,[`index`,`resolveLongAdThriveDependencies`,`2`]);return y.resolve(Z),y.resolve(fC),n.markEndTask(),await vc(),t},gM=async(e,t,n)=>{pM(t,n);let r=await e.gam.gamEventPromise,i=await e.marmalade.marmaladeEventPromise;mM(r,i)},_M=async e=>{let t=rc.markStartTask(`microtask`,[`index`,`setupAdthrive`,`before-yield`,`1`]),n=$e();t.markEndTask();let r=await hM(),i=rc.markStartTask(`microtask`,[`index`,`setupAdthrive`,`before-yield`,`2`]);return window.adthrive=y.resolve(Tj),gM(r,e,n),i.markEndTask(),await vc(),window.adthrive.init()},vM=async e=>{let t=e.marmalade,n=e.message||e;return t&&Object.prototype.hasOwnProperty.call(t,`result`)&&y.register(`RecencyFrequencyMarmaladeResponse`,{useValue:t.result}),y.resolve(mj).init(),window.adthrive=y.resolve(Tj),await window.adthrive.init(),Promise.reject(n)},yM=async e=>{let t=$e(),n=window.adthrive.branch,r=L.readInternalLocalStorage(`adthrive_branch`),i=n===r?.branch;return L.setInternalLocalStorage(`adthrive_branch`,{branch:n,enabled:i}),L.setInternalLocalStorage(`adthrive_session_fpv`,L.readInternalLocalStorage(`adthrive_session_fpv`)===null),y.register(`Build`,{useValue:Hj}),y.register(`AdThrive`,{useValue:e}),y.resolve(om),y.resolve(oM),E.gamAccountId=y.resolve(ii).account,await y.resolve(Vj).run().then(()=>_M(t)).catch(e=>void vM(e))},bM=({gdpr:e,baseUrl:t})=>e===`true`?`${t}/gdpr`:t,xM=()=>{let e=window.adthrive.siteAds,t=window.adthriveCLS,n=t&&t.siteAds,r=window.adthrive.siteAds.videoPlayers&&window.adthrive.siteAds.videoPlayers.contentSpecificPlaylists,i=r?[...r]:[];return n&&Wj(n)&&(e.adUnits=n.adUnits,e.video=n.video,e.videoPlayers=n.videoPlayers,e.breakpoints=n.breakpoints,e.videoPlayers&&(e.videoPlayers.contentSpecificPlaylists=i.filter(e=>!e.isDraft))),e},SM=e=>{let t=y.resolve(jr).setupOnceEventWithPromise,n=[t(`scroll`),t(`mousemove`),t(`keyup`)];It()||n.push(t(`touchstart`));let r=[t(`load`).then(()=>Wx(e))];return lM()?n:r.concat(n)},CM=e=>{let t;if(B(e.siteAds.adOptions.delayLoading,!1)){let n=e.siteAds.adOptions.delayLoadingTime,r=n?n*1e3:50,i=SM(r);t=Promise.race(i)}else t=Promise.resolve();return t},wM=()=>{let e=Qj(),t={};return e&&(t.error=e.error,t.injectedSlots=e.injectedSlots,t.injectedVideoSlots=e.injectedVideoSlots,t.experiments=e.experiments,t.experimentsWeightedChoice=e.experimentsWeightedChoice,t.siteExperiments=e.siteExperiments,t.siteExperimentsWeightedChoice=e.siteExperimentsWeightedChoice,t.targetDensityLog=e.targetDensityLog,t.buildDate=e.buildDate,t.branch=e.branch,t.bucket=e.bucket,t.injectedFromPlugin=e.injectedFromPlugin,t.injectedFromSiteAds=e.injectedFromSiteAds,t.disabled=e.disabled,t.adUnits=e.siteAds?.adUnits,t.preSlotInsertionMeasurements=e.preSlotInsertionMeasurements),t},TM=()=>{window.location.search.includes(`padCLS`)||(window.adthriveCLS=void 0)},EM=()=>{if(!uM())return;y.register(`PageviewKey`,{useValue:br()}),window.adthrive.siteAds=xM();let e=window.adthrive;y.register(`CoreExperimentValues`,{useValue:e.core.coreExperiments});let t=bM(e),n=Zj(),r=wj(e.bucket),i=n||r?`unsupported`:e.bucket,a=y.resolve(sM),o=a.result?[]:a.classList,s=y.resolve(pr),c=wM();TM();let l={...e,bucket:i,baseUrl:t,invalidTraffic:n,loggerFilters:o};L.init(l),vj.init(l),E.init(l),s.init(c),rM.updateSiteAds(l),rM.updateBodyClass();let u=$e();CM(l).then(()=>{let e=rc.markStartTask(`microtask`,[`handleDelayLoading`]);fM.delay=$e()-u;let t=yM(l);return e.markEndTask(),t}).then(()=>void 0).catch(e=>{typeof e==`string`?E.error(`index`,`load`,Error(e)):E.error(`index`,`load`,e)})};try{dM(window.adthrive)||EM()}catch(e){E.error(`index`,`pre-init`,e)}return window.adthrive})();if(adtpm){adtpm.duration=Date.now()-adtpm.startTime;let t=[{timingData:adtpm,taskMetadata:{}},{abgroup:`taskmonitor-log`,pubab:`taskmonitor-log`,sess:`taskmonitor-log`,pvk:`taskmonitor-log`,hbho:[`taskmonitor-log`],vbho:[`taskmonitor-log`],spa:!1}],n=encodeURIComponent(window.adthrive.siteAds.siteId||``),r=encodeURIComponent(window.adthrive.siteAds.siteName||``),i=encodeURIComponent(window.adthrive.bucket||``),a=encodeURIComponent(window.adthrive.branch||``),o=encodeURIComponent(window.adthrive.deployment||``),s=encodeURIComponent(window.location.origin+window.location.pathname),c=encodeURIComponent(JSON.stringify(t)),l=`https://logger.adthrive.com/event?`+[`siteId=`+n,`siteName=`+r,`bucket=`+i,`branch=`+a,`deployment=`+o,`message=TaskMonitor%3A%3A_logData`,`pageurl=`+s,`body=`+c].join(`&`),u=new XMLHttpRequest;u.open(`get`,l,!0),u.send()};