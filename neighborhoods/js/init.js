/**
 * @file init.js
 * @description Production ES module initialization for Neighborhood Finderâ„¢.
 * @copyright 2025 Kimberly Bauman, P.A. All rights reserved.
 */
import{CONFIG as o}from"./config.js";import{STATE as e}from"./state.js";import{loadNeighborhoods as s}from"./data.js";import{formatPrice as r}from"./utils.js";import{store as a}from"./core/store.js";import{eventBus as i,Events as t}from"./core/eventBus.js";import{initEventDelegation as n,registerCommonHandlers as d}from"./core/events.js";import{animateCount as w}from"./animations/index.js";import"./map/centering.js";import"./map/boundaries.js";import"./ui/results.js";import"./ui/infoWindow.js";import{initWizard as c}from"./ui/wizard.js";import"./filters/index.js";import"./search/index.js";import"./keyboard/index.js";n(),d(),window.CONFIG=o,window.PRICE_STEPS=o.ui.priceSteps,o.data.geojsonPath="/assets/mls/ecar/boundaries/",o.data.areaPresetsFile="/assets/mls/ecar/presets/areas.json.b64",o.data.manifestFile="/assets/mls/ecar/manifest.json",o.data.neighborhoodFiles=["/assets/mls/ecar/neighborhoods/7ea1bf14d884d192.json.b64","/assets/mls/ecar/neighborhoods/b762bb338ba328e5.json.b64","/assets/mls/ecar/neighborhoods/d2ea7fdfc87ff3e7.json.b64","/assets/mls/ecar/neighborhoods/d897c3d107c48ccc.json.b64","/assets/mls/ecar/neighborhoods/dcb3d8a92cc6eb54.json.b64","/assets/mls/ecar/neighborhoods/e0e3b36d8e692892.json.b64","/assets/mls/ecar/neighborhoods/f7e6349b564cdbb2.json.b64"];const m=await s();console.log("Loaded",m.length,"neighborhoods from production data");const l=await async function(){try{const e=o.data.areaPresetsFile||"/assets/mls/ecar/presets/areas.json.b64",s=await fetch(e);if(!s.ok)throw new Error("Failed to load area presets");const r=await s.text(),a=(new TextDecoder).decode(Uint8Array.from(atob(r),o=>o.charCodeAt(0)));return JSON.parse(a)}catch(o){return console.error("Error loading area presets:",o),null}}();l&&console.log("Loaded",l.presets?.length||0,"area presets"),window.neighborhoods=m,window.filteredNeighborhoods=[...m],window.areaPresets=l,e.neighborhoods=m,e.allFilteredNeighborhoods=[...m],window.markers=window.markers||[],window.map=window.map||null,window.infoWindow=window.infoWindow||null,window.sortOrder=window.sortOrder||"listings-desc",window.formatPrice=r,window.toSlug=function(o){return o.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")},window.dataReady=!0,window.dispatchEvent(new Event("dataLoaded")),window.tryInitializeMarkers&&window.tryInitializeMarkers(),c();