/**
 * @file core/eventBus.js
 * @description Pub/sub event bus for cross-module communication.
 * @copyright 2025 Kimberly Bauman, P.A. All rights reserved.
 */
export function createEventBus(){const e=new Map;return{on(t,E){return e.has(t)||e.set(t,new Set),e.get(t).add(E),()=>this.off(t,E)},off(t,E){e.has(t)&&e.get(t).delete(E)},emit(t,E){e.has(t)&&e.get(t).forEach(e=>{try{e(E)}catch(e){console.error(`Error in event handler for "${t}":`,e)}})},once(e,t){const E=n=>{this.off(e,E),t(n)};return this.on(e,E)},clear(t){t?e.delete(t):e.clear()},listenerCount:t=>e.has(t)?e.get(t).size:0}}export const eventBus=createEventBus();export const Events={DATA_LOADED:"data:loaded",DATA_FILTERED:"data:filtered",MAP_READY:"map:ready",MAP_IDLE:"map:idle",MAP_THEME_CHANGED:"map:themeChanged",MARKER_CLICKED:"marker:clicked",MARKER_HOVERED:"marker:hovered",MARKERS_UPDATED:"markers:updated",FILTERS_CHANGED:"filters:changed",FILTERS_CLEARED:"filters:cleared",PANEL_OPENED:"ui:panelOpened",PANEL_CLOSED:"ui:panelClosed",SIDEBAR_TOGGLED:"ui:sidebarToggled",DROPDOWN_OPENED:"ui:dropdownOpened",DROPDOWN_CLOSED:"ui:dropdownClosed",SEARCH_CHANGED:"search:changed",SEARCH_PERFORMED:"search:performed",SEARCH_RESULT_SELECTED:"search:resultSelected",BOUNDARY_SHOWN:"boundary:shown",BOUNDARY_HIDDEN:"boundary:hidden",NEIGHBORHOOD_NAVIGATED:"nav:neighborhoodNavigated",FLY_TO_STARTED:"nav:flyToStarted",FLY_TO_COMPLETED:"nav:flyToCompleted",ANIMATION_STARTED:"animation:started",ANIMATION_COMPLETED:"animation:completed",ANIMATION_CANCELLED:"animation:cancelled"};"undefined"!=typeof window&&(window.eventBus=eventBus,window.Events=Events);