/**
 * @file utils.js
 * @description Utility functions for formatting, URL parsing, and helpers.
 * @copyright 2025 Kimberly Bauman, P.A. All rights reserved.
 * @author John Bauman
 */
import{CONFIG as e}from"./config.js";import{STATE as t}from"./state.js";export function escapeHtml(e){return e?String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""}export function formatPrice(e){return e?e>=1e6?"$"+(e/1e6).toFixed(2)+"M":e>=1e3?"$"+(e/1e3).toFixed(0)+"K":"$"+e.toLocaleString():"$0"}export function formatSliderPrice(e){return e>=1e6?"$"+(e/1e6).toFixed(e%1e6==0?0:1)+"M":e>=1e3?"$"+(e/1e3).toFixed(0)+"K":"$"+e}export function getAreaStats(e,t){const o=(t||"").toLowerCase();return"homes"===o?e.homeStats||e.stats||{}:"condos"===o?e.condoStats||e.stats||{}:e.stats||{}}export function getAreaNeighborhoods(e,t){const o=(t||"").toLowerCase();return"homes"===o?e.homeNeighborhoods||e.neighborhoods||[]:"condos"===o?e.condoNeighborhoods||e.neighborhoods||[]:e.neighborhoods||[]}export function normalizeZip(e){if(!e)return null;const t=String(e).match(/\d{5}/);return t?t[0]:null}export function getThemeColor(e){return getComputedStyle(document.documentElement).getPropertyValue(e).trim()}export function getUrlParams(){const e=new URLSearchParams(window.location.search);return{neighborhood:e.get("neighborhood"),mode:e.get("mode")?e.get("mode").trim():null,zoom:e.get("zoom")?parseInt(e.get("zoom")):null,lat:e.get("lat")?parseFloat(e.get("lat")):null,lng:e.get("lng")?parseFloat(e.get("lng")):null,autoOpen:"true"===e.get("autoOpen"),autopan:"true"===e.get("autopan"),offsetPx:null!==e.get("offsetPx")?parseFloat(e.get("offsetPx")):null,offsetPct:null!==e.get("offsetPct")?parseFloat(e.get("offsetPct")):null,marker:e.get("marker"),propertyType:e.get("propertyType"),controls:e.get("controls")}}export function toSlug(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}export function parseRange(e){if(!e||"N/A"===e)return null;const t=e.replace(/[$,\s]/g,"").split("-");if(2===t.length){const e=parseFloat(t[0]),o=parseFloat(t[1]);if(!isNaN(e)&&!isNaN(o))return{min:e,max:o}}else if(1===t.length){const e=parseFloat(t[0]);if(!isNaN(e))return{min:e,max:e}}return null}export function debounce(e,t){let o;return function(...n){clearTimeout(o),o=setTimeout(()=>e.apply(this,n),t)}}export function throttle(e,t){let o=!1,n=null;return function(...r){o?n=r:(e.apply(this,r),o=!0,setTimeout(()=>{o=!1,n&&(e.apply(this,n),n=null)},t))}}export function createAnimation(e){let t=null,o=!1;const n=r=>{if(o)return;const a=e(r);t=!1===a||o?null:requestAnimationFrame(n)};return t=requestAnimationFrame(n),{cancel(){o=!0,null!==t&&(cancelAnimationFrame(t),t=null)},get isRunning(){return null!==t&&!o}}}export const Easing={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1};export function clamp(e,t,o){return Math.min(o,Math.max(t,e))}export function updateUrlParams(e){const t=new URLSearchParams(window.location.search);for(const o in e)e[o]&&e[o].length>0?t.set(o,e[o].join(",")):t.delete(o);return`${window.location.pathname}?${t.toString()}`}"undefined"!=typeof window&&(window.parseRange=parseRange,window.getAreaStats=getAreaStats,window.getAreaNeighborhoods=getAreaNeighborhoods);