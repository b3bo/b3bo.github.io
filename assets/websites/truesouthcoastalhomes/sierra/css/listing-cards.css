/* ========================================
   Listing Cards - Embed Mode Styles
   For /property-search/results/?embed=true
   Styles Sierra Interactive cards to match
   TrueSouth Coastal Homes tailwind theme

   Sierra DOM Structure (actual):
   [data-testid="gallery-item"]
   ├── ._top-content-container (photo section)
   │   └── .main-image-container
   │       ├── button[aria-label="Add to favorite"]
   │       ├── a.js-listing-detail > .gallery-container
   │       │   └── .image-gallery
   │       │       ├── .tw-slider-button (prev/next)
   │       │       ├── .image-gallery-slides
   │       │       └── .image-gallery-bullet (dots)
   │       └── status container
   └── div (info section - flex flex-col)
       ├── span.font-extrabold (price)
       ├── div > spans (beds/baths/sqft)
       ├── a.js-listing-detail (address)
       ├── div (subdivision)
       └── .listing-brokerage (MLS)
   ======================================== */

/* === HIDE SITE CHROME === */
/* Sierra Interactive specific elements */
body.embed-mode header,
body.embed-mode footer,
body.embed-mode nav:not([data-testid]) {
  display: none !important;
}

/* Common site chrome classes */
body.embed-mode .site-header,
body.embed-mode .site-footer,
body.embed-mode .navbar,
body.embed-mode .nav-wrapper,
body.embed-mode #header,
body.embed-mode #footer {
  display: none !important;
}

/* Reset body spacing and hide overflow while loading */
body.embed-mode {
  --ts-card-border-color: #d0d5dc;
  --ts-card-radius: 0.5rem;
  --ts-accent-color: #4c8f96;
  --ts-divider-color: #e3e5e7;
  --ts-text-color: #313842;
  --ts-muted-color: #697381;
  --ts-grid-max-width: 1200px;
  --ts-grid-gap: 1.5rem;
  --ts-filter-padding: 1.5rem;
  --ts-photo-height: 200px;
  padding-top: 0 !important;
  margin-top: 0 !important;
  overflow: hidden !important;
}

body.embed-mode.ready {
  overflow: auto !important;
}

/* === HIDE ELEMENTS === */
/* Page heading, breadcrumb, results count, Property Search title */
body.embed-mode h1,
body.embed-mode h6,
body.embed-mode [class*="breadcrumb"] {
  display: none !important;
}

/* Remove padding from grid container */
body.embed-mode .grid.px-5,
body.embed-mode .grid.pb-3 {
  padding: 0 !important;
}

/* Hide search input */
body.embed-mode .raw-focus,
body.embed-mode .focus-within-base.mr-2\.5 {
  display: none !important;
}

/* Style filter buttons with border */
body.embed-mode .bg-table-bg-row-gray.h-\[48px\],
body.embed-mode .bg-gray-100.h-\[48px\] {
  border: 1px solid var(--ts-card-border-color) !important;
}

/* Hide "14 Properties", pagination "1/2", and "Property Search" header row */
body.embed-mode [class*="property-count"],
body.embed-mode [class*="listing-count"],
body.embed-mode [class*="results-count"],
body.embed-mode [class*="total-count"] {
  display: none !important;
}

/* Hide the entire top bar with "14 Properties | 1/2 | Property Search | Sort" */
/* This is typically a flex row above the filter bar */
body.embed-mode > div > div:first-child:has([class*="sort"]),
body.embed-mode [class*="results-header"],
body.embed-mode [class*="search-header"] {
  display: none !important;
}

/* Hide photo nav arrows (prev/next buttons) */
body.embed-mode .tw-slider-button {
  display: none !important;
}

/* Hide photo carousel dots */
body.embed-mode .image-gallery-bullets,
body.embed-mode .image-gallery-bullet {
  display: none !important;
}

/* Hide subdivision name in card info (redundant on subdivision pages) */
/* The subdivision is the 4th child in the info section */
body.embed-mode [data-testid="gallery-item"] > div:last-child > div:nth-child(4):not(.listing-brokerage) {
  display: none !important;
}

/* === FAVORITE HEART STYLING === */
/* Heart uses Font Awesome icons: .fa-heart (filled) and .fa-heart-o (outline) */
body.embed-mode [data-testid="gallery-item"] button[aria-label="Add to favorite"] {
  background: transparent !important;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  padding: 0 !important;
}

/* Hide the filled translucent heart, show only outline */
body.embed-mode [data-testid="gallery-item"] button[aria-label="Add to favorite"] .fa-heart:not(.fa-heart-o) {
  display: none !important;
}

/* Style the outline heart */
body.embed-mode [data-testid="gallery-item"] button[aria-label="Add to favorite"] .fa-heart-o {
  color: white !important;
  text-shadow: 0 1px 3px rgba(0,0,0,0.5);
}

body.embed-mode [data-testid="gallery-item"] button[aria-label="Add to favorite"]::before,
body.embed-mode [data-testid="gallery-item"] button[aria-label="Add to favorite"]::after {
  content: none !important;
}

body.embed-mode [data-testid="gallery-item"] button[aria-label="Add to favorite"]:focus-visible {
  outline: 2px solid var(--ts-accent-color) !important;
  outline-offset: 2px !important;
}

/* === FILTER BAR STYLING === */
/* Align filter bar width with card grid */
body.embed-mode [data-testid="search-container"],
body.embed-mode [class*="search-bar"],
body.embed-mode [class*="filter-bar"] {
  box-shadow: none !important;
  border-bottom: 1px solid var(--ts-divider-color);
  max-width: var(--ts-grid-max-width) !important;
  margin-left: auto !important;
  margin-right: auto !important;
  padding-left: var(--ts-filter-padding) !important;
  padding-right: var(--ts-filter-padding) !important;
}
/* Layout: 3-Column Max */
/* Target the grid container that holds gallery-items */

/* === LAYOUT: 3-COLUMN MAX === */
/* Target the grid container that holds gallery-items */
body.embed-mode div:has(> [data-testid="gallery-item"]) {
  display: grid !important;
  padding: var(--ts-grid-gap) var(--ts-grid-gap) var(--ts-grid-gap) !important;
  gap: var(--ts-grid-gap) !important;
  max-width: var(--ts-grid-max-width) !important;
  padding: var(--ts-grid-gap) !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Neutralize Sierra's mt-36 spacer on the gallery wrapper */
body.embed-mode [data-testid="property-gallery"] {
  margin-top: 0 !important;
}

@media (max-width: 992px) {
  body.embed-mode div:has(> [data-testid="gallery-item"]) {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}

@media (max-width: 576px) {
  body.embed-mode div:has(> [data-testid="gallery-item"]) {
    grid-template-columns: 1fr !important;
  }
}

/* === PHOTO ASPECT RATIO === */
/* Fix photo cropping - ensure full image shows */
body.embed-mode [data-testid="gallery-item"] .main-image-container {
  height: var(--ts-photo-height) !important;
  overflow: visible !important;
}

body.embed-mode [data-testid="gallery-item"] .gallery-container {
  height: var(--ts-photo-height) !important;
  overflow: hidden !important;
  border-radius: var(--ts-card-radius) var(--ts-card-radius) 0 0 !important;
}

body.embed-mode [data-testid="gallery-item"] .image-gallery,
body.embed-mode [data-testid="gallery-item"] .image-gallery-content,
body.embed-mode [data-testid="gallery-item"] .image-gallery-slide-wrapper,
body.embed-mode [data-testid="gallery-item"] .image-gallery-swipe,
body.embed-mode [data-testid="gallery-item"] .image-gallery-slides,
body.embed-mode [data-testid="gallery-item"] .image-gallery-slide {
  height: var(--ts-photo-height) !important;
}

body.embed-mode [data-testid="gallery-item"] .image-gallery-slide img {
  width: 100% !important;
  height: var(--ts-photo-height) !important;
  object-fit: cover !important;
  object-position: center !important;
}

/* === CARD STYLING === */
body.embed-mode [data-testid="gallery-item"] {
  box-shadow: none !important;
  border: 1px solid var(--ts-card-border-color) !important;
  border-radius: var(--ts-card-radius) !important;
  outline: none !important;
  overflow: hidden !important;
  transition: border-color 0.15s ease !important;
}

body.embed-mode [data-testid="gallery-item"]:hover {
  border-color: var(--ts-accent-color) !important;
}

body.embed-mode [data-testid="gallery-item"]:focus,
body.embed-mode [data-testid="gallery-item"]:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

/* === TYPOGRAPHY === */
/* Override extrabold to semibold for price */
body.embed-mode [data-testid="gallery-item"] .font-extrabold {
  font-weight: 600 !important;
  font-family: "Montserrat", sans-serif !important;
}

/* Address link styling */
body.embed-mode [data-testid="gallery-item"] .js-listing-detail {
  color: var(--ts-text-color) !important;
}

body.embed-mode [data-testid="gallery-item"] .js-listing-detail:hover {
  color: var(--ts-accent-color) !important;
}

/* MLS Number styling */
body.embed-mode [data-testid="gallery-item"] .listing-brokerage {
  font-size: 0.75rem !important;
  color: var(--ts-muted-color) !important;
}

/* === STATUS BADGE === */
/* Status badges appear in _property-item-status-text */
body.embed-mode [data-testid="gallery-item"] [class*="status-text"] {
  background: var(--ts-accent-color) !important;
  color: white !important;
}

/* === QUICK WIN POLISH === */
/* Subtle image hover - brightness */
body.embed-mode [data-testid="gallery-item"]:hover .gallery-container {
  filter: brightness(1.05);
}

body.embed-mode [data-testid="gallery-item"] .gallery-container {
  transition: filter 0.2s ease;
}

/* === MISC === */
/* Remove all shadows */
body.embed-mode .shadow-md,
body.embed-mode [class*="shadow"] {
  box-shadow: none !important;
}

/* Hide clearfix, main-content padding, and UserWay widget */
body.embed-mode .clearfix,
body.embed-mode .main-content.p-5,
body.embed-mode [class*="userway"],
body.embed-mode #userwayAccessibilityIcon,
body.embed-mode [data-uw-rm-dialog] {
  display: none !important;
}
